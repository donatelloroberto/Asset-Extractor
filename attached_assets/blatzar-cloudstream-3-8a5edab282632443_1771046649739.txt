Directory structure:
â””â”€â”€ blatzar-cloudstream-3/
    â”œâ”€â”€ README.md
    â”œâ”€â”€ gradle.properties
    â”œâ”€â”€ gradlew
    â”œâ”€â”€ gradlew.bat
    â”œâ”€â”€ LICENSE
    â”œâ”€â”€ providers.json
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ proguard-rules.pro
    â”‚   â””â”€â”€ src/
    â”‚       â”œâ”€â”€ androidTest/
    â”‚       â”‚   â””â”€â”€ java/
    â”‚       â”‚       â””â”€â”€ com/
    â”‚       â”‚           â””â”€â”€ lagradost/
    â”‚       â”‚               â””â”€â”€ cloudstream3/
    â”‚       â”‚                   â””â”€â”€ ExampleInstrumentedTest.kt
    â”‚       â”œâ”€â”€ debug/
    â”‚       â”‚   â””â”€â”€ res/
    â”‚       â”‚       â”œâ”€â”€ drawable/
    â”‚       â”‚       â”‚   â””â”€â”€ ic_banner_foreground.xml
    â”‚       â”‚       â”œâ”€â”€ drawable-anydpi-v24/
    â”‚       â”‚       â”‚   â””â”€â”€ ic_stat_name.xml
    â”‚       â”‚       â”œâ”€â”€ drawable-v24/
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_banner_background.xml
    â”‚       â”‚       â”‚   â””â”€â”€ ic_launcher_foreground.xml
    â”‚       â”‚       â”œâ”€â”€ mipmap-anydpi-v26/
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_banner.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_launcher.xml
    â”‚       â”‚       â”‚   â””â”€â”€ ic_launcher_round.xml
    â”‚       â”‚       â””â”€â”€ values/
    â”‚       â”‚           â”œâ”€â”€ ic_launcher_background.xml
    â”‚       â”‚           â””â”€â”€ strings.xml
    â”‚       â”œâ”€â”€ main/
    â”‚       â”‚   â”œâ”€â”€ AndroidManifest.xml
    â”‚       â”‚   â”œâ”€â”€ java/
    â”‚       â”‚   â”‚   â””â”€â”€ com/
    â”‚       â”‚   â”‚       â””â”€â”€ lagradost/
    â”‚       â”‚   â”‚           â””â”€â”€ cloudstream3/
    â”‚       â”‚   â”‚               â”œâ”€â”€ AcraApplication.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ CommonActivity.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ MainActivity.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ MainAPI.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ ParCollections.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ animeproviders/
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AllAnimeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AnimeFlickProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AnimeflvProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AnimekisaProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AnimePaheProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AnimeWorldProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DreamSubProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DubbedAnimeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ GogoanimeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ GomunimeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ KawaiifuProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ KuramanimeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ KuronimeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ MonoschinosProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ NeonimeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ NineAnimeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ NontonAnimeIDProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ OploverzProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ TenshiProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ WatchCartoonOnlineProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ WcoProvider.kt
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ ZoroProvider.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ extractors/
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AsianLoad.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Blogger.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ BullStream.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DoodExtractor.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Evolaod.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ GenericM3U8.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ GMPlayer.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Hxfile.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Jawcloud.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ M3u8Manifest.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Mcloud.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ MixDrop.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Mp4Upload.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ MultiQuality.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ OkRuExtractor.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Pelisplus.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ PlayerVoxzer.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SBPlay.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Solidfiles.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Streamhub.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ StreamSB.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ StreamTape.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Tomatomatela.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ UpstreamExtractor.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Uqload.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Vidstream.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ VoeExtractor.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ WatchSB.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ WcoStream.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ XStreamCdn.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Zplayer.kt
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ helper/
    â”‚       â”‚   â”‚               â”‚       â”œâ”€â”€ AsianEmbedHelper.kt
    â”‚       â”‚   â”‚               â”‚       â”œâ”€â”€ VstreamhubHelper.kt
    â”‚       â”‚   â”‚               â”‚       â””â”€â”€ WcoHelper.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ metaproviders/
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AnilistRedirector.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ CrossTmdbProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ MultiAnimeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ TmdbProvider.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ movieproviders/
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AkwamProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AllMoviesForYouProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ ApiMDBProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AsiaFlixProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AsianLoadProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ BflixProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ CinecalidadProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ CuevanaProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DopeboxProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DoramasYTProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DramaidProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DramaSeeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ EgyBestProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ EntrepeliculasyseriesProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ FaselHDProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ FilmanProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ FmoviesToProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ FrenchStreamProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ HDMovie5.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ HDMProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ IHaveNoTvProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ KdramaHoodProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ LayarKaca21Provider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ LookMovieProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ MeloMovieProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ MyCimaProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ NginxProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ OlgplyProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ PelisflixProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ PeliSmartProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ PelisplusHDProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ PelisplusProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ PelisplusProviderTemplate.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ PinoyHDXyzProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ PinoyMoviePediaProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ PinoyMoviesEsProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ RebahinProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SeriesflixProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SflixProProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SflixProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SoaptwoDayProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SolarmovieProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ StreamingcommunityProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ TantiFilmProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ TheFlixToProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ TrailersTwoProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ TwoEmbedProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ VfFilmProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ VfSerieProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ VidEmbedProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ VidstreamProviderTemplate.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ VMoveeProvider.kt
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ WatchAsianProvider.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ mvvm/
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ ArchComponentExt.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ network/
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DdosGuardKiller.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DohProviders.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ RequestsHelper.kt
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ WebViewResolver.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ receivers/
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ VideoDownloadRestartReceiver.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ services/
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ VideoDownloadService.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ syncproviders/
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AccountManager.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ OAuth2API.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SyncAPI.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SyncRepo.kt
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ providers/
    â”‚       â”‚   â”‚               â”‚       â”œâ”€â”€ AniListApi.kt
    â”‚       â”‚   â”‚               â”‚       â”œâ”€â”€ DropboxApi.kt
    â”‚       â”‚   â”‚               â”‚       â””â”€â”€ MALApi.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ torrentproviders/
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ NyaaProvider.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ ui/
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ APIRepository.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AutofitRecyclerView.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ ControllerActivity.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ MiniControllerFragment.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ WatchType.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ download/
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ DownloadButtonSetup.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ DownloadButtonViewHolder.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ DownloadChildAdapter.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ DownloadChildFragment.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ DownloadFragment.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ DownloadHeaderAdapter.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ DownloadViewModel.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â””â”€â”€ EasyDownloadButton.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ home/
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ HomeChildItemAdapter.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ HomeFragment.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ HomeParentItemAdapter.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â””â”€â”€ HomeViewModel.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ player/
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ AbstractPlayerFragment.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ CS3IPlayer.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ CustomSubtitleDecoderFactory.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ CustomTextRenderer.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ DownloadedPlayerActivity.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ DownloadFileGenerator.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ FullScreenPlayer.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ GeneratorPlayer.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ IGenerator.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ IPlayer.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ NonFinalTextRenderer.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ PlayerGeneratorViewModel.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ PlayerPipHelper.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ PlayerSubtitleHelper.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ RepoLinkGenerator.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â””â”€â”€ SSLTrustManager.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ quicksearch/
    â”‚       â”‚   â”‚               â”‚   â”‚   â””â”€â”€ QuickSearchFragment.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ result/
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ ActorAdaptor.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ EpisodeAdapter.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ ImageAdapter.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ ResultViewModel.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â””â”€â”€ SyncViewModel.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ search/
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SearchAdaptor.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SearchFragment.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SearchHelper.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SearchHistoryAdaptor.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SearchResultBuilder.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SearchViewModel.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â””â”€â”€ SyncSearchViewModel.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ settings/
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ AccountAdapter.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SettingsAccount.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SettingsFragment.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SettingsLang.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SettingsNginx.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SettingsPlayer.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ SettingsUI.kt
    â”‚       â”‚   â”‚               â”‚   â”‚   â””â”€â”€ SettingsUpdates.kt
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ subtitles/
    â”‚       â”‚   â”‚               â”‚       â”œâ”€â”€ ChromecastSubtitlesFragment.kt
    â”‚       â”‚   â”‚               â”‚       â””â”€â”€ SubtitlesFragment.kt
    â”‚       â”‚   â”‚               â”œâ”€â”€ utils/
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ AppUtils.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ BackupUtils.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ CastHelper.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ CastOptionsProvider.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Coroutines.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DataStore.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DataStoreHelper.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ DownloadFileWorkManager.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Event.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ ExtensionManager.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ ExtractorApi.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ FillerEpisodeCheck.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ GlideApp.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ IDisposable.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ InAppUpdater.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ JsUnpacker.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ M3u8Helper.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SingleSelectionHelper.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SubtitleHelper.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ SyncUtil.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ UIHelper.kt
    â”‚       â”‚   â”‚               â”‚   â”œâ”€â”€ Vector2.kt
    â”‚       â”‚   â”‚               â”‚   â””â”€â”€ VideoDownloadHelper.kt
    â”‚       â”‚   â”‚               â””â”€â”€ widget/
    â”‚       â”‚   â”‚                   â”œâ”€â”€ CenterZoomLayoutManager.kt
    â”‚       â”‚   â”‚                   â””â”€â”€ FlowLayout.kt
    â”‚       â”‚   â””â”€â”€ res/
    â”‚       â”‚       â”œâ”€â”€ anim/
    â”‚       â”‚       â”‚   â”œâ”€â”€ enter_anim.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ exit_anim.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ go_left.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ go_right.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ nav_enter_anim.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ nav_exit_anim.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ nav_pop_enter.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ nav_pop_exit.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ pop_enter.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ pop_exit.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ rotate_left.xml
    â”‚       â”‚       â”‚   â””â”€â”€ rotate_right.xml
    â”‚       â”‚       â”œâ”€â”€ color/
    â”‚       â”‚       â”‚   â”œâ”€â”€ check_selection_color.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ item_select_color.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ player_button_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ player_on_button_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ tag_stroke_color.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ text_selection_color.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ toggle_button.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ toggle_button_outline.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ toggle_button_text.xml
    â”‚       â”‚       â”‚   â””â”€â”€ toggle_selector.xml
    â”‚       â”‚       â”œâ”€â”€ drawable/
    â”‚       â”‚       â”‚   â”œâ”€â”€ background_shadow.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ baseline_description_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ baseline_grid_view_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ baseline_list_alt_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ baseline_remove_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ baseline_restore_page_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ baseline_save_as_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ baseline_sync_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ benene.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ circle_shape.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ circular_progress_bar.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ circular_progress_bar_filled.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ cloud_2.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ cloud_2_gradient.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ cloud_2_gradient_beta.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ cloud_2_gradient_beta_old.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ cloud_2_gradient_debug.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ custom_rating_bar.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ default_cover.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ dialog__window_background.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ dub_bg_color.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ go_back_30.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ go_forward_30.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_anilist_icon.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_banner_foreground.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_add_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_arrow_back_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_arrow_forward_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_aspect_ratio_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_autorenew_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_bookmark_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_bookmark_border_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_brightness_1_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_brightness_2_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_brightness_3_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_brightness_4_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_brightness_5_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_brightness_6_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_brightness_7_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_bug_report_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_check_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_clear_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_close_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_color_lens_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_delete_outline_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_developer_mode_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_discord_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_dns_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_fast_forward_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_favorite_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_favorite_border_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_filter_list_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_hd_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_keyboard_arrow_down_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_keyboard_arrow_right_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_language_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_more_vert_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_notifications_active_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_ondemand_video_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_pause_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_picture_in_picture_alt_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_play_arrow_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_playlist_play_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_public_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_remove_red_eye_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_skip_next_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_speed_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_star_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_star_border_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_storage_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_subtitles_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_system_update_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_text_format_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_touch_app_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_tune_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_tv_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_visibility_off_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_volume_down_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_volume_mute_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_volume_up_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_baseline_warning_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_cloudstreamlogotv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_cloudstreamlogotv_2.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_cloudstreamlogotv_pre.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_cloudstreamlogotv_pre_2.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_dashboard_black_24dp.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_github_logo.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_home_black_24dp.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_launcher_background.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_launcher_foreground.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_notifications_black_24dp.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_outline_home_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_outline_info_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_outline_remove_red_eye_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_outline_settings_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_outline_share_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_outline_subtitles_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_outline_voice_over_off_24.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ mal_logo.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ material_outline_background.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_benene.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_burrito.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_coco.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_cookie.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_drink.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_flusdered.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_funny.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_like.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_party.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ monke_sob.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ netflix_download.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ netflix_pause.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ netflix_play.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ netflix_skip_back.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ netflix_skip_forward.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ outline.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ outline_card.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ outline_drawable.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ pause_to_play.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ play_button.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ play_to_pause.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ player_button_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ player_gradient_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ progress_drawable_vertical.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ quick_novel_icon.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ rating_empty.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ rating_fill.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ rddone.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ rderror.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ rdload.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ rdpause.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ rounded_dialog.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ rounded_progress.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ search_background.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ search_icon.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ solid_primary.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ splash_background.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sub_bg_color.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ subtitles_background_gradient.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sun_1.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sun_2.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sun_3.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sun_4.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sun_5.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sun_6.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sun_7.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ tab_selector.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ title_shadow.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ type_bg_color.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ video_bottom_button.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ video_locked.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ video_pause.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ video_play.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ video_tap_button.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ video_tap_button_always_white.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ video_tap_button_skip.xml
    â”‚       â”‚       â”‚   â””â”€â”€ video_unlocked.xml
    â”‚       â”‚       â”œâ”€â”€ drawable-v24/
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_banner_background.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_banner_foreground.xml
    â”‚       â”‚       â”‚   â””â”€â”€ ic_launcher_foreground.xml
    â”‚       â”‚       â”œâ”€â”€ font/
    â”‚       â”‚       â”‚   â””â”€â”€ google_sans.xml
    â”‚       â”‚       â”œâ”€â”€ layout/
    â”‚       â”‚       â”‚   â”œâ”€â”€ account_managment.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ account_single.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ account_switch.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ activity_main.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ activity_main_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ bottom_input_dialog.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ bottom_selection_dialog.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ cast_item.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ chromecast_subtitle_settings.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ dialog_loading.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ download_child_episode.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ download_header_episode.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ empty_layout.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ fragment_child_downloads.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ fragment_downloads.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ fragment_home.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ fragment_home_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ fragment_player.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ fragment_player_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ fragment_result.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ fragment_result_swipe.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ fragment_search.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ home_episodes_expanded.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ home_result_big_grid.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ home_result_grid.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ home_result_grid_expanded.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ home_select_mainpage.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ homepage_parent.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ homepage_parent_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ loading_downloads.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ loading_episode.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ loading_line.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ loading_line_short.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ loading_line_short_center.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ loading_list.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ loading_poster.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ logcat.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ main_settings.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ options_popup_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ player_custom_layout.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ player_custom_layout_tv.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ player_select_source_and_subs.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ provider_list.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ quick_search.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ result_episode.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ result_episode_large.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ result_mini_image.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ result_poster.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ result_recommendations.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ result_sync.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ result_tag.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ search_history_item.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ search_result_compact.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ search_result_grid.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ search_result_grid_expanded.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ search_result_super_compact.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sort_bottom_footer_add_choice.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sort_bottom_sheet.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sort_bottom_single_choice.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ sort_bottom_single_choice_color.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ subtitle_offset.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ subtitle_settings.xml
    â”‚       â”‚       â”‚   â””â”€â”€ toast.xml
    â”‚       â”‚       â”œâ”€â”€ menu/
    â”‚       â”‚       â”‚   â”œâ”€â”€ bottom_nav_menu.xml
    â”‚       â”‚       â”‚   â””â”€â”€ cast_expanded_controller_menu.xml
    â”‚       â”‚       â”œâ”€â”€ mipmap-anydpi-v26/
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_banner.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_launcher.xml
    â”‚       â”‚       â”‚   â””â”€â”€ ic_launcher_round.xml
    â”‚       â”‚       â”œâ”€â”€ navigation/
    â”‚       â”‚       â”‚   â””â”€â”€ mobile_navigation.xml
    â”‚       â”‚       â”œâ”€â”€ values/
    â”‚       â”‚       â”‚   â”œâ”€â”€ array.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ attrs.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ colors.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ dimens.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_launcher_background.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ strings.xml
    â”‚       â”‚       â”‚   â””â”€â”€ styles.xml
    â”‚       â”‚       â”œâ”€â”€ values-ar/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-de/
    â”‚       â”‚       â”‚   â””â”€â”€ strings-de.xml
    â”‚       â”‚       â”œâ”€â”€ values-el/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-es/
    â”‚       â”‚       â”‚   â””â”€â”€ strings-es.xml
    â”‚       â”‚       â”œâ”€â”€ values-fr/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-hi/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-id/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-it/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-mk/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-ml/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-mo/
    â”‚       â”‚       â”‚   â””â”€â”€ string.xml
    â”‚       â”‚       â”œâ”€â”€ values-nl/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-no/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-pl/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-pt/
    â”‚       â”‚       â”‚   â””â”€â”€ strings-pt.xml
    â”‚       â”‚       â”œâ”€â”€ values-ro/
    â”‚       â”‚       â”‚   â””â”€â”€ strings-ro.xml
    â”‚       â”‚       â”œâ”€â”€ values-sv/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-tl/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-tr/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-vi/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â”œâ”€â”€ values-zh/
    â”‚       â”‚       â”‚   â””â”€â”€ strings.xml
    â”‚       â”‚       â””â”€â”€ xml/
    â”‚       â”‚           â”œâ”€â”€ backup_descriptor.xml
    â”‚       â”‚           â”œâ”€â”€ provider_paths.xml
    â”‚       â”‚           â”œâ”€â”€ settings_credits_account.xml
    â”‚       â”‚           â”œâ”€â”€ settings_media_lang.xml
    â”‚       â”‚           â”œâ”€â”€ settings_nginx.xml
    â”‚       â”‚           â”œâ”€â”€ settings_player.xml
    â”‚       â”‚           â”œâ”€â”€ settings_updates.xml
    â”‚       â”‚           â””â”€â”€ settins_ui.xml
    â”‚       â”œâ”€â”€ prerelease/
    â”‚       â”‚   â””â”€â”€ res/
    â”‚       â”‚       â”œâ”€â”€ drawable/
    â”‚       â”‚       â”‚   â””â”€â”€ ic_banner_foreground.xml
    â”‚       â”‚       â”œâ”€â”€ drawable-v24/
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_banner_background.xml
    â”‚       â”‚       â”‚   â””â”€â”€ ic_launcher_foreground.xml
    â”‚       â”‚       â”œâ”€â”€ mipmap-anydpi-v26/
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_banner.xml
    â”‚       â”‚       â”‚   â”œâ”€â”€ ic_launcher.xml
    â”‚       â”‚       â”‚   â””â”€â”€ ic_launcher_round.xml
    â”‚       â”‚       â””â”€â”€ values/
    â”‚       â”‚           â”œâ”€â”€ ic_launcher_background.xml
    â”‚       â”‚           â””â”€â”€ strings.xml
    â”‚       â”œâ”€â”€ release/
    â”‚       â”‚   â””â”€â”€ res/
    â”‚       â”‚       â”œâ”€â”€ drawable-v24/
    â”‚       â”‚       â”‚   â””â”€â”€ ic_banner_background.xml
    â”‚       â”‚       â””â”€â”€ mipmap-anydpi-v26/
    â”‚       â”‚           â””â”€â”€ ic_banner.xml
    â”‚       â””â”€â”€ test/
    â”‚           â””â”€â”€ java/
    â”‚               â””â”€â”€ com/
    â”‚                   â””â”€â”€ lagradost/
    â”‚                       â””â”€â”€ cloudstream3/
    â”‚                           â””â”€â”€ ProviderTests.kt
    â”œâ”€â”€ docs/
    â”‚   â”œâ”€â”€ _config.yml
    â”‚   â”œâ”€â”€ index.html
    â”‚   â”œâ”€â”€ keys.json
    â”‚   â”œâ”€â”€ providers.json
    â”‚   â”œâ”€â”€ script.js
    â”‚   â””â”€â”€ style.css
    â”œâ”€â”€ fastlane/
    â”‚   â””â”€â”€ metadata/
    â”‚       â””â”€â”€ android/
    â”‚           â”œâ”€â”€ de-DE/
    â”‚           â”‚   â”œâ”€â”€ full_description.txt
    â”‚           â”‚   â””â”€â”€ short_description.txt
    â”‚           â”œâ”€â”€ en-US/
    â”‚           â”‚   â”œâ”€â”€ full_description.txt
    â”‚           â”‚   â”œâ”€â”€ short_description.txt
    â”‚           â”‚   â”œâ”€â”€ title.txt
    â”‚           â”‚   â””â”€â”€ changelogs/
    â”‚           â”‚       â””â”€â”€ 2.txt
    â”‚           â”œâ”€â”€ es-AR/
    â”‚           â”‚   â”œâ”€â”€ full_description.txt
    â”‚           â”‚   â””â”€â”€ short_description.txt
    â”‚           â”œâ”€â”€ it-IT/
    â”‚           â”‚   â”œâ”€â”€ full_description.txt
    â”‚           â”‚   â””â”€â”€ short_description.txt
    â”‚           â”œâ”€â”€ mk-MK/
    â”‚           â”‚   â”œâ”€â”€ full_description.txt
    â”‚           â”‚   â”œâ”€â”€ short_description.txt
    â”‚           â”‚   â””â”€â”€ title.txt
    â”‚           â””â”€â”€ zh-CN/
    â”‚               â”œâ”€â”€ full_description.txt
    â”‚               â””â”€â”€ short_description.txt
    â”œâ”€â”€ gradle/
    â”‚   â””â”€â”€ wrapper/
    â”‚       â””â”€â”€ gradle-wrapper.properties
    â””â”€â”€ .github/
        â”œâ”€â”€ site-list.py
        â”œâ”€â”€ ISSUE_TEMPLATE/
        â”‚   â”œâ”€â”€ application-bug.yml
        â”‚   â”œâ”€â”€ feature-request.yml
        â”‚   â””â”€â”€ provider-bug.yml
        â””â”€â”€ workflows/
            â”œâ”€â”€ prerelease.yml
            â”œâ”€â”€ pull_request.yml
            â””â”€â”€ site_list.yml

================================================
FILE: README.md
================================================
# CloudStream-3

<!-- ![Maintenance](https://img.shields.io/maintenance/yes/2022?color=blue&style=for-the-badge) -->
![GitHub release](https://img.shields.io/github/v/release/LagradOst/cloudstream-3?sort=semver&style=for-the-badge)
![Downloads](https://img.shields.io/github/downloads/lagradost/CloudStream-3/total?color=blue&style=for-the-badge)
![Build](https://img.shields.io/github/workflow/status/lagradost/CloudStream-3/Pre-release?style=for-the-badge)
[![Discord](https://img.shields.io/discord/737724143126052974?style=for-the-badge)](https://discord.gg/5Hus6fM)


**DOWNLOAD:**
https://github.com/LagradOst/CloudStream-3/releases


***Features:***
+ **AdFree**, No ads whatsoever
+ No tracking/analytics
+ Bookmarks
+ Download and stream movies, tv-shows and anime
+ Chromecast

***Screenshots:***
(All the images are blurred because of DMCA reasons, but are actually not blurred in the app)

<img src="./.github/home.jpg" height="400"/><img src="./.github/search.jpg" height="400"/><img src="./.github/downloads.jpg" height="400"/><img src="./.github/results.jpg" height="400"/>
<img src="./.github/player.jpg" height="200"/>

***The list of supported languages:***
* ðŸ‡±ðŸ‡§ Arabic
* ðŸ‡³ðŸ‡± Dutch
* ðŸ‡¬ðŸ‡§ English
* ðŸ‡«ðŸ‡· French
* ðŸ‡©ðŸ‡ª German
* ðŸ‡¬ðŸ‡· Greek
* ðŸ‡®ðŸ‡³ Hindi
* ðŸ‡®ðŸ‡© Indonesian
* ðŸ‡®ðŸ‡¹ Italian
* ðŸ‡²ðŸ‡° Macedonian
* ðŸ‡®ðŸ‡³ Malayalam
* ðŸ‡³ðŸ‡´ Norsk
* ðŸ‡µðŸ‡± Polish
* ðŸ‡§ðŸ‡· Portuguese (Brazil)
* ðŸ‡·ðŸ‡´ Romanian
* ðŸ‡ªðŸ‡¸ Spanish
* ðŸ‡¸ðŸ‡ª Swedish
* ðŸ‡µðŸ‡­ Tagalog
* ðŸ‡¹ðŸ‡· Turkish
* ðŸ‡»ðŸ‡³ Vietnamese

***Disclaimer:***

Any legal issues regarding the content on this application should be taken up with the actual file hosts and providers themselves as we are not affiliated with them.

In case of copyright infringement, please directly contact the responsible parties or the streaming websites.

The app is purely for educational and personal use.

CloudStream 3 does not host any content on the app, and has no control over what media is put up or taken down. CloudStream 3 functions like any other search engine, such as Google. CloudStream 3 does not host, upload or manage any videos, films or content. It simply crawls, aggregates and displayes links in a convenient, user-friendly interface.

It merely scrapes 3rd-party websites that are publicly accessable via any regular web browser. It is the responsibility of user to avoid any actions that might violate the laws governing his/her locality. Use CloudStream 3 at your own risk.


***Sites used:***

Look [here](https://lagradost.github.io/CloudStream-3/) for a comprehensive list



================================================
FILE: gradle.properties
================================================
# Project-wide Gradle settings.
# IDE (e.g. Android Studio) users:
# Gradle settings configured through the IDE *will override*
# any settings specified in this file.
# For more details on how to configure your build environment visit
# http://www.gradle.org/docs/current/userguide/build_environment.html
# Specifies the JVM arguments used for the daemon process.
# The setting is particularly useful for tweaking memory settings.
org.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8
# When configured, Gradle will run in incubating parallel mode.
# This option should only be used with decoupled projects. More details, visit
# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects
# org.gradle.parallel=true
# AndroidX package structure to make it clearer which packages are bundled with the
# Android operating system, and which are packaged with your app"s APK
# https://developer.android.com/topic/libraries/support-library/androidx-rn
android.useAndroidX=true
# Automatically convert third-party libraries to use AndroidX
android.enableJetifier=true
# Kotlin code style for this project: "official" or "obsolete":
kotlin.code.style=official


================================================
FILE: gradlew
================================================
#!/usr/bin/env sh

##############################################################################
##
##  Gradle start up script for UN*X
##
##############################################################################

# Attempt to set APP_HOME
# Resolve links: $0 may be a link
PRG="$0"
# Need this for relative symlinks.
while [ -h "$PRG" ] ; do
    ls=`ls -ld "$PRG"`
    link=`expr "$ls" : '.*-> \(.*\)$'`
    if expr "$link" : '/.*' > /dev/null; then
        PRG="$link"
    else
        PRG=`dirname "$PRG"`"/$link"
    fi
done
SAVED="`pwd`"
cd "`dirname \"$PRG\"`/" >/dev/null
APP_HOME="`pwd -P`"
cd "$SAVED" >/dev/null

APP_NAME="Gradle"
APP_BASE_NAME=`basename "$0"`

# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS=""

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD="maximum"

warn () {
    echo "$*"
}

die () {
    echo
    echo "$*"
    echo
    exit 1
}

# OS specific support (must be 'true' or 'false').
cygwin=false
msys=false
darwin=false
nonstop=false
case "`uname`" in
  CYGWIN* )
    cygwin=true
    ;;
  Darwin* )
    darwin=true
    ;;
  MINGW* )
    msys=true
    ;;
  NONSTOP* )
    nonstop=true
    ;;
esac

CLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar

# Determine the Java command to use to start the JVM.
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        # IBM's JDK on AIX uses strange locations for the executables
        JAVACMD="$JAVA_HOME/jre/sh/java"
    else
        JAVACMD="$JAVA_HOME/bin/java"
    fi
    if [ ! -x "$JAVACMD" ] ; then
        die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
else
    JAVACMD="java"
    which java >/dev/null 2>&1 || die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
fi

# Increase the maximum file descriptors if we can.
if [ "$cygwin" = "false" -a "$darwin" = "false" -a "$nonstop" = "false" ] ; then
    MAX_FD_LIMIT=`ulimit -H -n`
    if [ $? -eq 0 ] ; then
        if [ "$MAX_FD" = "maximum" -o "$MAX_FD" = "max" ] ; then
            MAX_FD="$MAX_FD_LIMIT"
        fi
        ulimit -n $MAX_FD
        if [ $? -ne 0 ] ; then
            warn "Could not set maximum file descriptor limit: $MAX_FD"
        fi
    else
        warn "Could not query maximum file descriptor limit: $MAX_FD_LIMIT"
    fi
fi

# For Darwin, add options to specify how the application appears in the dock
if $darwin; then
    GRADLE_OPTS="$GRADLE_OPTS \"-Xdock:name=$APP_NAME\" \"-Xdock:icon=$APP_HOME/media/gradle.icns\""
fi

# For Cygwin, switch paths to Windows format before running java
if $cygwin ; then
    APP_HOME=`cygpath --path --mixed "$APP_HOME"`
    CLASSPATH=`cygpath --path --mixed "$CLASSPATH"`
    JAVACMD=`cygpath --unix "$JAVACMD"`

    # We build the pattern for arguments to be converted via cygpath
    ROOTDIRSRAW=`find -L / -maxdepth 1 -mindepth 1 -type d 2>/dev/null`
    SEP=""
    for dir in $ROOTDIRSRAW ; do
        ROOTDIRS="$ROOTDIRS$SEP$dir"
        SEP="|"
    done
    OURCYGPATTERN="(^($ROOTDIRS))"
    # Add a user-defined pattern to the cygpath arguments
    if [ "$GRADLE_CYGPATTERN" != "" ] ; then
        OURCYGPATTERN="$OURCYGPATTERN|($GRADLE_CYGPATTERN)"
    fi
    # Now convert the arguments - kludge to limit ourselves to /bin/sh
    i=0
    for arg in "$@" ; do
        CHECK=`echo "$arg"|egrep -c "$OURCYGPATTERN" -`
        CHECK2=`echo "$arg"|egrep -c "^-"`                                 ### Determine if an option

        if [ $CHECK -ne 0 ] && [ $CHECK2 -eq 0 ] ; then                    ### Added a condition
            eval `echo args$i`=`cygpath --path --ignore --mixed "$arg"`
        else
            eval `echo args$i`="\"$arg\""
        fi
        i=$((i+1))
    done
    case $i in
        (0) set -- ;;
        (1) set -- "$args0" ;;
        (2) set -- "$args0" "$args1" ;;
        (3) set -- "$args0" "$args1" "$args2" ;;
        (4) set -- "$args0" "$args1" "$args2" "$args3" ;;
        (5) set -- "$args0" "$args1" "$args2" "$args3" "$args4" ;;
        (6) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" ;;
        (7) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" ;;
        (8) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" ;;
        (9) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" "$args8" ;;
    esac
fi

# Escape application args
save () {
    for i do printf %s\\n "$i" | sed "s/'/'\\\\''/g;1s/^/'/;\$s/\$/' \\\\/" ; done
    echo " "
}
APP_ARGS=$(save "$@")

# Collect all arguments for the java command, following the shell quoting and substitution rules
eval set -- $DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS "\"-Dorg.gradle.appname=$APP_BASE_NAME\"" -classpath "\"$CLASSPATH\"" org.gradle.wrapper.GradleWrapperMain "$APP_ARGS"

# by default we should be in the correct project dir, but when run from Finder on Mac, the cwd is wrong
if [ "$(uname)" = "Darwin" ] && [ "$HOME" = "$PWD" ]; then
  cd "$(dirname "$0")"
fi

exec "$JAVACMD" "$@"



================================================
FILE: gradlew.bat
================================================
@if "%DEBUG%" == "" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

set DIRNAME=%~dp0
if "%DIRNAME%" == "" set DIRNAME=.
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS=

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if "%ERRORLEVEL%" == "0" goto init

echo.
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto init

echo.
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:init
@rem Get command-line arguments, handling Windows variants

if not "%OS%" == "Windows_NT" goto win9xME_args

:win9xME_args
@rem Slurp the command line arguments.
set CMD_LINE_ARGS=
set _SKIP=2

:win9xME_args_slurp
if "x%~1" == "x" goto execute

set CMD_LINE_ARGS=%*

:execute
@rem Setup the command line

set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar

@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %CMD_LINE_ARGS%

:end
@rem End local scope for the variables with windows NT shell
if "%ERRORLEVEL%"=="0" goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd.exe /c_ return code!
if  not "" == "%GRADLE_EXIT_CONSOLE%" exit 1
exit /b 1

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega



================================================
FILE: LICENSE
================================================
                    GNU GENERAL PUBLIC LICENSE
                       Version 3, 29 June 2007

 Copyright (C) 2007 Free Software Foundation, Inc. <https://fsf.org/>
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

                            Preamble

  The GNU General Public License is a free, copyleft license for
software and other kinds of works.

  The licenses for most software and other practical works are designed
to take away your freedom to share and change the works.  By contrast,
the GNU General Public License is intended to guarantee your freedom to
share and change all versions of a program--to make sure it remains free
software for all its users.  We, the Free Software Foundation, use the
GNU General Public License for most of our software; it applies also to
any other work released this way by its authors.  You can apply it to
your programs, too.

  When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
them if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free programs, and that you know you can do these things.

  To protect your rights, we need to prevent others from denying you
these rights or asking you to surrender the rights.  Therefore, you have
certain responsibilities if you distribute copies of the software, or if
you modify it: responsibilities to respect the freedom of others.

  For example, if you distribute copies of such a program, whether
gratis or for a fee, you must pass on to the recipients the same
freedoms that you received.  You must make sure that they, too, receive
or can get the source code.  And you must show them these terms so they
know their rights.

  Developers that use the GNU GPL protect your rights with two steps:
(1) assert copyright on the software, and (2) offer you this License
giving you legal permission to copy, distribute and/or modify it.

  For the developers' and authors' protection, the GPL clearly explains
that there is no warranty for this free software.  For both users' and
authors' sake, the GPL requires that modified versions be marked as
changed, so that their problems will not be attributed erroneously to
authors of previous versions.

  Some devices are designed to deny users access to install or run
modified versions of the software inside them, although the manufacturer
can do so.  This is fundamentally incompatible with the aim of
protecting users' freedom to change the software.  The systematic
pattern of such abuse occurs in the area of products for individuals to
use, which is precisely where it is most unacceptable.  Therefore, we
have designed this version of the GPL to prohibit the practice for those
products.  If such problems arise substantially in other domains, we
stand ready to extend this provision to those domains in future versions
of the GPL, as needed to protect the freedom of users.

  Finally, every program is threatened constantly by software patents.
States should not allow patents to restrict development and use of
software on general-purpose computers, but in those that do, we wish to
avoid the special danger that patents applied to a free program could
make it effectively proprietary.  To prevent this, the GPL assures that
patents cannot be used to render the program non-free.

  The precise terms and conditions for copying, distribution and
modification follow.

                       TERMS AND CONDITIONS

  0. Definitions.

  "This License" refers to version 3 of the GNU General Public License.

  "Copyright" also means copyright-like laws that apply to other kinds of
works, such as semiconductor masks.

  "The Program" refers to any copyrightable work licensed under this
License.  Each licensee is addressed as "you".  "Licensees" and
"recipients" may be individuals or organizations.

  To "modify" a work means to copy from or adapt all or part of the work
in a fashion requiring copyright permission, other than the making of an
exact copy.  The resulting work is called a "modified version" of the
earlier work or a work "based on" the earlier work.

  A "covered work" means either the unmodified Program or a work based
on the Program.

  To "propagate" a work means to do anything with it that, without
permission, would make you directly or secondarily liable for
infringement under applicable copyright law, except executing it on a
computer or modifying a private copy.  Propagation includes copying,
distribution (with or without modification), making available to the
public, and in some countries other activities as well.

  To "convey" a work means any kind of propagation that enables other
parties to make or receive copies.  Mere interaction with a user through
a computer network, with no transfer of a copy, is not conveying.

  An interactive user interface displays "Appropriate Legal Notices"
to the extent that it includes a convenient and prominently visible
feature that (1) displays an appropriate copyright notice, and (2)
tells the user that there is no warranty for the work (except to the
extent that warranties are provided), that licensees may convey the
work under this License, and how to view a copy of this License.  If
the interface presents a list of user commands or options, such as a
menu, a prominent item in the list meets this criterion.

  1. Source Code.

  The "source code" for a work means the preferred form of the work
for making modifications to it.  "Object code" means any non-source
form of a work.

  A "Standard Interface" means an interface that either is an official
standard defined by a recognized standards body, or, in the case of
interfaces specified for a particular programming language, one that
is widely used among developers working in that language.

  The "System Libraries" of an executable work include anything, other
than the work as a whole, that (a) is included in the normal form of
packaging a Major Component, but which is not part of that Major
Component, and (b) serves only to enable use of the work with that
Major Component, or to implement a Standard Interface for which an
implementation is available to the public in source code form.  A
"Major Component", in this context, means a major essential component
(kernel, window system, and so on) of the specific operating system
(if any) on which the executable work runs, or a compiler used to
produce the work, or an object code interpreter used to run it.

  The "Corresponding Source" for a work in object code form means all
the source code needed to generate, install, and (for an executable
work) run the object code and to modify the work, including scripts to
control those activities.  However, it does not include the work's
System Libraries, or general-purpose tools or generally available free
programs which are used unmodified in performing those activities but
which are not part of the work.  For example, Corresponding Source
includes interface definition files associated with source files for
the work, and the source code for shared libraries and dynamically
linked subprograms that the work is specifically designed to require,
such as by intimate data communication or control flow between those
subprograms and other parts of the work.

  The Corresponding Source need not include anything that users
can regenerate automatically from other parts of the Corresponding
Source.

  The Corresponding Source for a work in source code form is that
same work.

  2. Basic Permissions.

  All rights granted under this License are granted for the term of
copyright on the Program, and are irrevocable provided the stated
conditions are met.  This License explicitly affirms your unlimited
permission to run the unmodified Program.  The output from running a
covered work is covered by this License only if the output, given its
content, constitutes a covered work.  This License acknowledges your
rights of fair use or other equivalent, as provided by copyright law.

  You may make, run and propagate covered works that you do not
convey, without conditions so long as your license otherwise remains
in force.  You may convey covered works to others for the sole purpose
of having them make modifications exclusively for you, or provide you
with facilities for running those works, provided that you comply with
the terms of this License in conveying all material for which you do
not control copyright.  Those thus making or running the covered works
for you must do so exclusively on your behalf, under your direction
and control, on terms that prohibit them from making any copies of
your copyrighted material outside their relationship with you.

  Conveying under any other circumstances is permitted solely under
the conditions stated below.  Sublicensing is not allowed; section 10
makes it unnecessary.

  3. Protecting Users' Legal Rights From Anti-Circumvention Law.

  No covered work shall be deemed part of an effective technological
measure under any applicable law fulfilling obligations under article
11 of the WIPO copyright treaty adopted on 20 December 1996, or
similar laws prohibiting or restricting circumvention of such
measures.

  When you convey a covered work, you waive any legal power to forbid
circumvention of technological measures to the extent such circumvention
is effected by exercising rights under this License with respect to
the covered work, and you disclaim any intention to limit operation or
modification of the work as a means of enforcing, against the work's
users, your or third parties' legal rights to forbid circumvention of
technological measures.

  4. Conveying Verbatim Copies.

  You may convey verbatim copies of the Program's source code as you
receive it, in any medium, provided that you conspicuously and
appropriately publish on each copy an appropriate copyright notice;
keep intact all notices stating that this License and any
non-permissive terms added in accord with section 7 apply to the code;
keep intact all notices of the absence of any warranty; and give all
recipients a copy of this License along with the Program.

  You may charge any price or no price for each copy that you convey,
and you may offer support or warranty protection for a fee.

  5. Conveying Modified Source Versions.

  You may convey a work based on the Program, or the modifications to
produce it from the Program, in the form of source code under the
terms of section 4, provided that you also meet all of these conditions:

    a) The work must carry prominent notices stating that you modified
    it, and giving a relevant date.

    b) The work must carry prominent notices stating that it is
    released under this License and any conditions added under section
    7.  This requirement modifies the requirement in section 4 to
    "keep intact all notices".

    c) You must license the entire work, as a whole, under this
    License to anyone who comes into possession of a copy.  This
    License will therefore apply, along with any applicable section 7
    additional terms, to the whole of the work, and all its parts,
    regardless of how they are packaged.  This License gives no
    permission to license the work in any other way, but it does not
    invalidate such permission if you have separately received it.

    d) If the work has interactive user interfaces, each must display
    Appropriate Legal Notices; however, if the Program has interactive
    interfaces that do not display Appropriate Legal Notices, your
    work need not make them do so.

  A compilation of a covered work with other separate and independent
works, which are not by their nature extensions of the covered work,
and which are not combined with it such as to form a larger program,
in or on a volume of a storage or distribution medium, is called an
"aggregate" if the compilation and its resulting copyright are not
used to limit the access or legal rights of the compilation's users
beyond what the individual works permit.  Inclusion of a covered work
in an aggregate does not cause this License to apply to the other
parts of the aggregate.

  6. Conveying Non-Source Forms.

  You may convey a covered work in object code form under the terms
of sections 4 and 5, provided that you also convey the
machine-readable Corresponding Source under the terms of this License,
in one of these ways:

    a) Convey the object code in, or embodied in, a physical product
    (including a physical distribution medium), accompanied by the
    Corresponding Source fixed on a durable physical medium
    customarily used for software interchange.

    b) Convey the object code in, or embodied in, a physical product
    (including a physical distribution medium), accompanied by a
    written offer, valid for at least three years and valid for as
    long as you offer spare parts or customer support for that product
    model, to give anyone who possesses the object code either (1) a
    copy of the Corresponding Source for all the software in the
    product that is covered by this License, on a durable physical
    medium customarily used for software interchange, for a price no
    more than your reasonable cost of physically performing this
    conveying of source, or (2) access to copy the
    Corresponding Source from a network server at no charge.

    c) Convey individual copies of the object code with a copy of the
    written offer to provide the Corresponding Source.  This
    alternative is allowed only occasionally and noncommercially, and
    only if you received the object code with such an offer, in accord
    with subsection 6b.

    d) Convey the object code by offering access from a designated
    place (gratis or for a charge), and offer equivalent access to the
    Corresponding Source in the same way through the same place at no
    further charge.  You need not require recipients to copy the
    Corresponding Source along with the object code.  If the place to
    copy the object code is a network server, the Corresponding Source
    may be on a different server (operated by you or a third party)
    that supports equivalent copying facilities, provided you maintain
    clear directions next to the object code saying where to find the
    Corresponding Source.  Regardless of what server hosts the
    Corresponding Source, you remain obligated to ensure that it is
    available for as long as needed to satisfy these requirements.

    e) Convey the object code using peer-to-peer transmission, provided
    you inform other peers where the object code and Corresponding
    Source of the work are being offered to the general public at no
    charge under subsection 6d.

  A separable portion of the object code, whose source code is excluded
from the Corresponding Source as a System Library, need not be
included in conveying the object code work.

  A "User Product" is either (1) a "consumer product", which means any
tangible personal property which is normally used for personal, family,
or household purposes, or (2) anything designed or sold for incorporation
into a dwelling.  In determining whether a product is a consumer product,
doubtful cases shall be resolved in favor of coverage.  For a particular
product received by a particular user, "normally used" refers to a
typical or common use of that class of product, regardless of the status
of the particular user or of the way in which the particular user
actually uses, or expects or is expected to use, the product.  A product
is a consumer product regardless of whether the product has substantial
commercial, industrial or non-consumer uses, unless such uses represent
the only significant mode of use of the product.

  "Installation Information" for a User Product means any methods,
procedures, authorization keys, or other information required to install
and execute modified versions of a covered work in that User Product from
a modified version of its Corresponding Source.  The information must
suffice to ensure that the continued functioning of the modified object
code is in no case prevented or interfered with solely because
modification has been made.

  If you convey an object code work under this section in, or with, or
specifically for use in, a User Product, and the conveying occurs as
part of a transaction in which the right of possession and use of the
User Product is transferred to the recipient in perpetuity or for a
fixed term (regardless of how the transaction is characterized), the
Corresponding Source conveyed under this section must be accompanied
by the Installation Information.  But this requirement does not apply
if neither you nor any third party retains the ability to install
modified object code on the User Product (for example, the work has
been installed in ROM).

  The requirement to provide Installation Information does not include a
requirement to continue to provide support service, warranty, or updates
for a work that has been modified or installed by the recipient, or for
the User Product in which it has been modified or installed.  Access to a
network may be denied when the modification itself materially and
adversely affects the operation of the network or violates the rules and
protocols for communication across the network.

  Corresponding Source conveyed, and Installation Information provided,
in accord with this section must be in a format that is publicly
documented (and with an implementation available to the public in
source code form), and must require no special password or key for
unpacking, reading or copying.

  7. Additional Terms.

  "Additional permissions" are terms that supplement the terms of this
License by making exceptions from one or more of its conditions.
Additional permissions that are applicable to the entire Program shall
be treated as though they were included in this License, to the extent
that they are valid under applicable law.  If additional permissions
apply only to part of the Program, that part may be used separately
under those permissions, but the entire Program remains governed by
this License without regard to the additional permissions.

  When you convey a copy of a covered work, you may at your option
remove any additional permissions from that copy, or from any part of
it.  (Additional permissions may be written to require their own
removal in certain cases when you modify the work.)  You may place
additional permissions on material, added by you to a covered work,
for which you have or can give appropriate copyright permission.

  Notwithstanding any other provision of this License, for material you
add to a covered work, you may (if authorized by the copyright holders of
that material) supplement the terms of this License with terms:

    a) Disclaiming warranty or limiting liability differently from the
    terms of sections 15 and 16 of this License; or

    b) Requiring preservation of specified reasonable legal notices or
    author attributions in that material or in the Appropriate Legal
    Notices displayed by works containing it; or

    c) Prohibiting misrepresentation of the origin of that material, or
    requiring that modified versions of such material be marked in
    reasonable ways as different from the original version; or

    d) Limiting the use for publicity purposes of names of licensors or
    authors of the material; or

    e) Declining to grant rights under trademark law for use of some
    trade names, trademarks, or service marks; or

    f) Requiring indemnification of licensors and authors of that
    material by anyone who conveys the material (or modified versions of
    it) with contractual assumptions of liability to the recipient, for
    any liability that these contractual assumptions directly impose on
    those licensors and authors.

  All other non-permissive additional terms are considered "further
restrictions" within the meaning of section 10.  If the Program as you
received it, or any part of it, contains a notice stating that it is
governed by this License along with a term that is a further
restriction, you may remove that term.  If a license document contains
a further restriction but permits relicensing or conveying under this
License, you may add to a covered work material governed by the terms
of that license document, provided that the further restriction does
not survive such relicensing or conveying.

  If you add terms to a covered work in accord with this section, you
must place, in the relevant source files, a statement of the
additional terms that apply to those files, or a notice indicating
where to find the applicable terms.

  Additional terms, permissive or non-permissive, may be stated in the
form of a separately written license, or stated as exceptions;
the above requirements apply either way.

  8. Termination.

  You may not propagate or modify a covered work except as expressly
provided under this License.  Any attempt otherwise to propagate or
modify it is void, and will automatically terminate your rights under
this License (including any patent licenses granted under the third
paragraph of section 11).

  However, if you cease all violation of this License, then your
license from a particular copyright holder is reinstated (a)
provisionally, unless and until the copyright holder explicitly and
finally terminates your license, and (b) permanently, if the copyright
holder fails to notify you of the violation by some reasonable means
prior to 60 days after the cessation.

  Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

  Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, you do not qualify to receive new licenses for the same
material under section 10.

  9. Acceptance Not Required for Having Copies.

  You are not required to accept this License in order to receive or
run a copy of the Program.  Ancillary propagation of a covered work
occurring solely as a consequence of using peer-to-peer transmission
to receive a copy likewise does not require acceptance.  However,
nothing other than this License grants you permission to propagate or
modify any covered work.  These actions infringe copyright if you do
not accept this License.  Therefore, by modifying or propagating a
covered work, you indicate your acceptance of this License to do so.

  10. Automatic Licensing of Downstream Recipients.

  Each time you convey a covered work, the recipient automatically
receives a license from the original licensors, to run, modify and
propagate that work, subject to this License.  You are not responsible
for enforcing compliance by third parties with this License.

  An "entity transaction" is a transaction transferring control of an
organization, or substantially all assets of one, or subdividing an
organization, or merging organizations.  If propagation of a covered
work results from an entity transaction, each party to that
transaction who receives a copy of the work also receives whatever
licenses to the work the party's predecessor in interest had or could
give under the previous paragraph, plus a right to possession of the
Corresponding Source of the work from the predecessor in interest, if
the predecessor has it or can get it with reasonable efforts.

  You may not impose any further restrictions on the exercise of the
rights granted or affirmed under this License.  For example, you may
not impose a license fee, royalty, or other charge for exercise of
rights granted under this License, and you may not initiate litigation
(including a cross-claim or counterclaim in a lawsuit) alleging that
any patent claim is infringed by making, using, selling, offering for
sale, or importing the Program or any portion of it.

  11. Patents.

  A "contributor" is a copyright holder who authorizes use under this
License of the Program or a work on which the Program is based.  The
work thus licensed is called the contributor's "contributor version".

  A contributor's "essential patent claims" are all patent claims
owned or controlled by the contributor, whether already acquired or
hereafter acquired, that would be infringed by some manner, permitted
by this License, of making, using, or selling its contributor version,
but do not include claims that would be infringed only as a
consequence of further modification of the contributor version.  For
purposes of this definition, "control" includes the right to grant
patent sublicenses in a manner consistent with the requirements of
this License.

  Each contributor grants you a non-exclusive, worldwide, royalty-free
patent license under the contributor's essential patent claims, to
make, use, sell, offer for sale, import and otherwise run, modify and
propagate the contents of its contributor version.

  In the following three paragraphs, a "patent license" is any express
agreement or commitment, however denominated, not to enforce a patent
(such as an express permission to practice a patent or covenant not to
sue for patent infringement).  To "grant" such a patent license to a
party means to make such an agreement or commitment not to enforce a
patent against the party.

  If you convey a covered work, knowingly relying on a patent license,
and the Corresponding Source of the work is not available for anyone
to copy, free of charge and under the terms of this License, through a
publicly available network server or other readily accessible means,
then you must either (1) cause the Corresponding Source to be so
available, or (2) arrange to deprive yourself of the benefit of the
patent license for this particular work, or (3) arrange, in a manner
consistent with the requirements of this License, to extend the patent
license to downstream recipients.  "Knowingly relying" means you have
actual knowledge that, but for the patent license, your conveying the
covered work in a country, or your recipient's use of the covered work
in a country, would infringe one or more identifiable patents in that
country that you have reason to believe are valid.

  If, pursuant to or in connection with a single transaction or
arrangement, you convey, or propagate by procuring conveyance of, a
covered work, and grant a patent license to some of the parties
receiving the covered work authorizing them to use, propagate, modify
or convey a specific copy of the covered work, then the patent license
you grant is automatically extended to all recipients of the covered
work and works based on it.

  A patent license is "discriminatory" if it does not include within
the scope of its coverage, prohibits the exercise of, or is
conditioned on the non-exercise of one or more of the rights that are
specifically granted under this License.  You may not convey a covered
work if you are a party to an arrangement with a third party that is
in the business of distributing software, under which you make payment
to the third party based on the extent of your activity of conveying
the work, and under which the third party grants, to any of the
parties who would receive the covered work from you, a discriminatory
patent license (a) in connection with copies of the covered work
conveyed by you (or copies made from those copies), or (b) primarily
for and in connection with specific products or compilations that
contain the covered work, unless you entered into that arrangement,
or that patent license was granted, prior to 28 March 2007.

  Nothing in this License shall be construed as excluding or limiting
any implied license or other defenses to infringement that may
otherwise be available to you under applicable patent law.

  12. No Surrender of Others' Freedom.

  If conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot convey a
covered work so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you may
not convey it at all.  For example, if you agree to terms that obligate you
to collect a royalty for further conveying from those to whom you convey
the Program, the only way you could satisfy both those terms and this
License would be to refrain entirely from conveying the Program.

  13. Use with the GNU Affero General Public License.

  Notwithstanding any other provision of this License, you have
permission to link or combine any covered work with a work licensed
under version 3 of the GNU Affero General Public License into a single
combined work, and to convey the resulting work.  The terms of this
License will continue to apply to the part which is the covered work,
but the special requirements of the GNU Affero General Public License,
section 13, concerning interaction through a network will apply to the
combination as such.

  14. Revised Versions of this License.

  The Free Software Foundation may publish revised and/or new versions of
the GNU General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

  Each version is given a distinguishing version number.  If the
Program specifies that a certain numbered version of the GNU General
Public License "or any later version" applies to it, you have the
option of following the terms and conditions either of that numbered
version or of any later version published by the Free Software
Foundation.  If the Program does not specify a version number of the
GNU General Public License, you may choose any version ever published
by the Free Software Foundation.

  If the Program specifies that a proxy can decide which future
versions of the GNU General Public License can be used, that proxy's
public statement of acceptance of a version permanently authorizes you
to choose that version for the Program.

  Later license versions may give you additional or different
permissions.  However, no additional obligations are imposed on any
author or copyright holder as a result of your choosing to follow a
later version.

  15. Disclaimer of Warranty.

  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY
OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM
IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF
ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

  16. Limitation of Liability.

  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS
THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF
DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD
PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),
EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF
SUCH DAMAGES.

  17. Interpretation of Sections 15 and 16.

  If the disclaimer of warranty and limitation of liability provided
above cannot be given local legal effect according to their terms,
reviewing courts shall apply local law that most closely approximates
an absolute waiver of all civil liability in connection with the
Program, unless a warranty or assumption of liability accompanies a
copy of the Program in return for a fee.

                     END OF TERMS AND CONDITIONS

            How to Apply These Terms to Your New Programs

  If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these terms.

  To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
state the exclusion of warranty; and each file should have at least
the "copyright" line and a pointer to where the full notice is found.

    <one line to give the program's name and a brief idea of what it does.>
    Copyright (C) <year>  <name of author>

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

Also add information on how to contact you by electronic and paper mail.

  If the program does terminal interaction, make it output a short
notice like this when it starts in an interactive mode:

    <program>  Copyright (C) <year>  <name of author>
    This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
    This is free software, and you are welcome to redistribute it
    under certain conditions; type `show c' for details.

The hypothetical commands `show w' and `show c' should show the appropriate
parts of the General Public License.  Of course, your program's commands
might be different; for a GUI interface, you would use an "about box".

  You should also get your employer (if you work as a programmer) or school,
if any, to sign a "copyright disclaimer" for the program, if necessary.
For more information on this, and how to apply and follow the GNU GPL, see
<https://www.gnu.org/licenses/>.

  The GNU General Public License does not permit incorporating your program
into proprietary programs.  If your program is a subroutine library, you
may consider it more useful to permit linking proprietary applications with
the library.  If this is what you want to do, use the GNU Lesser General
Public License instead of this License.  But first, please read
<https://www.gnu.org/licenses/why-not-lgpl.html>.



================================================
FILE: providers.json
================================================
{
    "AkwamProvider": {
        "name": "Akwam",
        "url": "https://akwam.to",
        "status": 1
    },
    "AllAnimeProvider": {
        "name": "AllAnime",
        "url": "https://allanime.site",
        "status": 1
    },
    "AllMoviesForYouProvider": {
        "name": "AllMoviesForYou",
        "url": "https://allmoviesforyou.net",
        "status": 1
    },
    "AnimeFlickProvider": {
        "name": "AnimeFlick",
        "url": "https://animeflick.net",
        "status": 1
    },
    "AnimePaheProvider": {
        "name": "AnimePahe",
        "url": "https://animepahe.com",
        "status": 0
    },
    "AnimeWorldProvider": {
        "name": "AnimeWorld",
        "url": "https://www.animeworld.tv",
        "status": 1
    },
    "AnimeflvnetProvider": {
        "name": "Animeflv.net",
        "url": "https://www3.animeflv.net",
        "status": 1
    },
    "AnimekisaProvider": {
        "name": "Animekisa",
        "url": "https://animekisa.in",
        "status": 1
    },
    "AsianLoadProvider": {
        "name": "AsianLoad",
        "url": "https://asianembed.io",
        "status": 1
    },
    "AsiaFlixProvider": {
        "name": "AsiaFlix",
        "url": "https://asiaflix.app",
        "status": 3
    },
    "BflixProvider": {
        "name": "Bflix",
        "url": "https://bflix.ru",
        "status": 0
    },
    "FmoviesToProvider": {
        "name": "Fmovies.to",
        "url": "https://fmovies.to",
        "status": 0
    },
    "SflixProProvider": {
        "name": "Sflix.pro",
        "url": "https://sflix.pro",
        "status": 0
    },
    "CinecalidadProvider": {
        "name": "Cinecalidad",
        "url": "https://cinecalidad.lol",
        "status": 1
    },
    "CrossTmdbProvider": {
        "name": "MultiMovie",
        "url": "NONE",
        "status": 1
    },
    "CuevanaProvider": {
        "name": "Cuevana",
        "url": "https://cuevana3.me",
        "status": 1
    },
    "DoramasYTProvider": {
        "name": "DoramasYT",
        "url": "https://doramasyt.com",
        "status": 1
    },
    "DramaSeeProvider": {
        "name": "DramaSee",
        "url": "https://dramasee.net",
        "status": 1
    },
    "DubbedAnimeProvider": {
        "name": "DubbedAnime",
        "url": "https://bestdubbedanime.com",
        "status": 1
    },
    "EgyBestProvider": {
        "name": "EgyBest",
        "url": "https://egy.best",
        "status": 1
    },
    "EntrepeliculasyseriesProvider": {
        "name": "EntrePeliculasySeries",
        "url": "https://entrepeliculasyseries.nu",
        "status": 1
    },
    "FilmanProvider": {
        "name": "filman.cc",
        "url": "https://filman.cc",
        "status": 1
    },
    "FrenchStreamProvider": {
        "name": "French Stream",
        "url": "https://french-stream.re",
        "status": 1
    },
    "GogoanimeProvider": {
        "name": "GogoAnime",
        "url": "https://gogoanime.film",
        "status": 1
    },
    "KawaiifuProvider": {
        "name": "Kawaiifu",
        "url": "https://kawaiifu.com",
        "status": 0
    },
    "HDMProvider": {
        "name": "HD Movies",
        "url": "https://hdm.to",
        "status": 0
    },
    "IHaveNoTvProvider": {
        "name": "I Have No TV",
        "url": "https://ihavenotv.com",
        "status": 1
    },
    "KdramaHoodProvider": {
        "name": "KDramaHood",
        "url": "https://kdramahood.com",
        "status": 1
    },
    "LookMovieProvider": {
        "name": "LookMovie",
        "url": "https://lookmovie.io",
        "status": 0
    },
    "MeloMovieProvider": {
        "name": "MeloMovie",
        "url": "https://melomovie.com",
        "status": 0
    },
    "MonoschinosProvider": {
        "name": "Monoschinos",
        "url": "https://monoschinos2.com",
        "status": 1
    },
    "MyCimaProvider": {
        "name": "MyCima",
        "url": "https://mycima.tv",
        "status": 1
    },
    "NineAnimeProvider": {
        "name": "9Anime",
        "url": "https://9anime.id",
        "status": 0
    },
    "PeliSmartProvider": {
        "name": "PeliSmart",
        "url": "https://pelismart.com",
        "status": 1
    },
    "PelisflixProvider": {
        "name": "Pelisflix",
        "url": "https://pelisflix.li",
        "status": 1
    },
    "PelisplusHDProvider": {
        "name": "PelisplusHD",
        "url": "https://pelisplushd.net",
        "status": 1
    },
    "PelisplusProvider": {
        "name": "Pelisplus",
        "url": "https://pelisplus.icu",
        "status": 1
    },
    "PinoyHDXyzProvider": {
        "name": "Pinoy-HD",
        "url": "https://www.pinoy-hd.xyz",
        "status": 1
    },
    "PinoyMoviePediaProvider": {
        "name": "Pinoy Moviepedia",
        "url": "https://pinoymoviepedia.ru",
        "status": 1
    },
    "PinoyMoviesEsProvider": {
        "name": "Pinoy Movies",
        "url": "https://pinoymovies.es",
        "status": 1
    },
    "SflixProvider": {
        "name": "Sflix.to",
        "url": "https://sflix.to",
        "status": 1
    },
    "DopeboxProvider": {
        "name": "Dopebox",
        "url": "https://dopebox.to",
        "status": 1
    },
    "SolarmovieProvider": {
        "name": "Solarmovie",
        "url": "https://solarmovie.pe",
        "status": 1
    },
    "SeriesflixProvider": {
        "name": "Seriesflix",
        "url": "https://seriesflix.video",
        "status": 1
    },
    "SoaptwoDayProvider": {
        "name": "Soap2Day",
        "url": "https://secretlink.xyz",
        "status": 1
    },
    "TenshiProvider": {
        "name": "Tenshi.moe",
        "url": "https://tenshi.moe",
        "status": 1
    },
    "TrailersTwoProvider": {
        "name": "Trailers.to",
        "url": "https://trailers.to",
        "status": 1
    },
    "TheFlixToProvider": {
        "name": "TheFlix.to",
        "url": "https://theflix.to",
        "status": 0
    },
    "TwoEmbedProvider": {
        "name": "2Embed",
        "url": "https://www.2embed.ru",
        "status": 1
    },
    "VMoveeProvider": {
        "name": "VMovee",
        "url": "https://www.vmovee.watch",
        "status": 1
    },
    "VfFilmProvider": {
        "name": "vf-film.me",
        "url": "https://vf-film.me",
        "status": 1
    },
    "VfSerieProvider": {
        "name": "vf-serie.org",
        "url": "https://vf-serie.org",
        "status": 1
    },
    "VidEmbedProvider": {
        "name": "VidEmbed",
        "url": "https://vidembed.cc",
        "status": 1
    },
    "WatchAsianProvider": {
        "name": "WatchAsian",
        "url": "https://watchasian.sh",
        "status": 1
    },
    "WatchCartoonOnlineProvider": {
        "name": "WatchCartoonOnline",
        "url": "https://www.wcostream.com",
        "status": 1
    },
    "WcoProvider": {
        "name": "WCO Stream",
        "url": "https://wcostream.cc",
        "status": 1
    },
    "ZoroProvider": {
        "name": "Zoro",
        "url": "https://zoro.to",
        "status": 0
    }
}



================================================
FILE: app/proguard-rules.pro
================================================
# Add project specific ProGuard rules here.
# You can control the set of applied configuration files using the
# proguardFiles setting in build.gradle.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

# Uncomment this to preserve the line number information for
# debugging stack traces.
#-keepattributes SourceFile,LineNumberTable

# If you keep the line number information, uncomment this to
# hide the original source file name.
#-renamesourcefileattribute SourceFile


================================================
FILE: app/src/androidTest/java/com/lagradost/cloudstream3/ExampleInstrumentedTest.kt
================================================
package com.lagradost.cloudstream3

import androidx.test.ext.junit.runners.AndroidJUnit4
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.SubtitleHelper
import kotlinx.coroutines.runBlocking
import org.junit.Assert
import org.junit.Test
import org.junit.runner.RunWith

/**
 * Instrumented test, which will execute on an Android device.
 *
 * See [testing documentation](http://d.android.com/tools/testing).
 */
@RunWith(AndroidJUnit4::class)
class ExampleInstrumentedTest {
    //@Test
    //fun useAppContext() {
    //    // Context of the app under test.
    //    val appContext = InstrumentationRegistry.getInstrumentation().targetContext
    //    assertEquals("com.lagradost.cloudstream3", appContext.packageName)
    //}

    private fun getAllProviders(): List<MainAPI> {
        return APIHolder.allProviders //.filter { !it.usesWebView }
    }

    private suspend fun loadLinks(api: MainAPI, url: String?): Boolean {
        Assert.assertNotNull("Api ${api.name} has invalid url on episode", url)
        if (url == null) return true
        var linksLoaded = 0
        try {
            val success = api.loadLinks(url, false, {}) { link ->
                Assert.assertTrue(
                    "Api ${api.name} returns link with invalid Quality",
                    Qualities.values().map { it.value }.contains(link.quality)
                )
                Assert.assertTrue(
                    "Api ${api.name} returns link with invalid url ${link.url}",
                    link.url.length > 4
                )
                linksLoaded++
            }
            if (success) {
                return linksLoaded > 0
            }
            Assert.assertTrue("Api ${api.name} has returns false on .loadLinks", success)
        } catch (e: Exception) {
            if (e.cause is NotImplementedError) {
                Assert.fail("Provider has not implemented .loadLinks")
            }
            logError(e)
        }
        return true
    }

    private suspend fun testSingleProviderApi(api: MainAPI): Boolean {
        val searchQueries = listOf("over", "iron", "guy")
        var correctResponses = 0
        var searchResult: List<SearchResponse>? = null
        for (query in searchQueries) {
            val response = try {
                api.search(query)
            } catch (e: Exception) {
                if (e.cause is NotImplementedError) {
                    Assert.fail("Provider has not implemented .search")
                }
                logError(e)
                null
            }
            if (!response.isNullOrEmpty()) {
                correctResponses++
                if (searchResult == null) {
                    searchResult = response
                }
            }
        }

        if (correctResponses == 0 || searchResult == null) {
            System.err.println("Api ${api.name} did not return any valid search responses")
            return false
        }

        try {
            var validResults = false
            for (result in searchResult) {
                Assert.assertEquals(
                    "Invalid apiName on response on ${api.name}",
                    result.apiName,
                    api.name
                )
                val load = api.load(result.url) ?: continue
                Assert.assertEquals(
                    "Invalid apiName on load on ${api.name}",
                    load.apiName,
                    result.apiName
                )
                Assert.assertTrue(
                    "Api ${api.name} on load does not contain any of the supportedTypes",
                    api.supportedTypes.contains(load.type)
                )
                when (load) {
                    is AnimeLoadResponse -> {
                        val gotNoEpisodes =
                            load.episodes.keys.isEmpty() || load.episodes.keys.any { load.episodes[it].isNullOrEmpty() }

                        if (gotNoEpisodes) {
                            println("Api ${api.name} got no episodes on ${load.url}")
                            continue
                        }

                        val url = (load.episodes[load.episodes.keys.first()])?.first()?.data
                        validResults = loadLinks(api, url)
                        if (!validResults) continue
                    }
                    is MovieLoadResponse -> {
                        val gotNoEpisodes = load.dataUrl.isBlank()
                        if (gotNoEpisodes) {
                            println("Api ${api.name} got no movie on ${load.url}")
                            continue
                        }

                        validResults = loadLinks(api, load.dataUrl)
                        if (!validResults) continue
                    }
                    is TvSeriesLoadResponse -> {
                        val gotNoEpisodes = load.episodes.isEmpty()
                        if (gotNoEpisodes) {
                            println("Api ${api.name} got no episodes on ${load.url}")
                            continue
                        }

                        validResults = loadLinks(api, load.episodes.first().data)
                        if (!validResults) continue
                    }
                }
                break
            }
            if(!validResults) {
                System.err.println("Api ${api.name} did not load on any")
            }

            return validResults
        } catch (e: Exception) {
            if (e.cause is NotImplementedError) {
                Assert.fail("Provider has not implemented .load")
            }
            logError(e)
            return false
        }
    }

    @Test
    fun providersExist() {
        Assert.assertTrue(getAllProviders().isNotEmpty())
        println("Done providersExist")
    }

    @Test
    fun providerCorrectData() {
        val isoNames = SubtitleHelper.languages.map { it.ISO_639_1 }
        Assert.assertFalse("ISO does not contain any languages", isoNames.isNullOrEmpty())
        for (api in getAllProviders()) {
            Assert.assertTrue("Api does not contain a mainUrl", api.mainUrl != "NONE")
            Assert.assertTrue("Api does not contain a name", api.name != "NONE")
            Assert.assertTrue(
                "Api ${api.name} does not contain a valid language code",
                isoNames.contains(api.lang)
            )
            Assert.assertTrue(
                "Api ${api.name} does not contain any supported types",
                api.supportedTypes.isNotEmpty()
            )
        }
        println("Done providerCorrectData")
    }

    @Test
    fun providerCorrectHomepage() {
        runBlocking {
            getAllProviders().apmap { api ->
                if (api.hasMainPage) {
                    try {
                        val homepage = api.getMainPage()
                        when {
                            homepage == null -> {
                                System.err.println("Homepage provider ${api.name} did not correctly load homepage!")
                            }
                            homepage.items.isEmpty() -> {
                                System.err.println("Homepage provider ${api.name} does not contain any items!")
                            }
                            homepage.items.any { it.list.isEmpty() } -> {
                                System.err.println ("Homepage provider ${api.name} does not have any items on result!")
                            }
                        }
                    } catch (e: Exception) {
                        if (e.cause is NotImplementedError) {
                            Assert.fail("Provider marked as hasMainPage, while in reality is has not been implemented")
                        }
                        logError(e)
                    }
                }
            }
        }
        println("Done providerCorrectHomepage")
    }

//    @Test
//    fun testSingleProvider() {
//        testSingleProviderApi(ThenosProvider())
//    }

    @Test
    fun providerCorrect() {
        runBlocking {
            val invalidProvider = ArrayList<Pair<MainAPI, Exception?>>()
            val providers = getAllProviders()
            providers.apmap { api ->
                try {
                    println("Trying $api")
                    if (testSingleProviderApi(api)) {
                        println("Success $api")
                    } else {
                        System.err.println("Error $api")
                        invalidProvider.add(Pair(api, null))
                    }
                } catch (e: Exception) {
                    logError(e)
                    invalidProvider.add(Pair(api, e))
                }
            }
            if(invalidProvider.isEmpty()) {
                println("No Invalid providers! :D")
            } else {
                println("Invalid providers are: ")
                for (provider in invalidProvider) {
                    println("${provider.first}")
                }
            }
        }
        println("Done providerCorrect")
    }
}



================================================
FILE: app/src/debug/res/drawable/ic_banner_foreground.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="320dp"
    android:height="180dp"
    android:viewportWidth="320"
    android:viewportHeight="180">
  <group android:scaleX="0.6666667"
      android:scaleY="0.6666667"
      android:translateX="53.333332"
      android:translateY="30">
    <group android:scaleX="0"
        android:scaleY="0"
        android:translateX="160"
        android:translateY="90">
      <group android:translateY="155.39062">
        <path android:pathData="M81.84375,-4.53125Q70.671875,2,54,2Q32.484375,2,19.546875,-11.953125Q6.609375,-25.921875,6.609375,-48.59375Q6.609375,-72.953125,21.15625,-87.96875Q35.71875,-103,58.078125,-103Q72.421875,-103,81.84375,-98.59375L81.84375,-86Q71.015625,-92,57.9375,-92Q40.578125,-92,29.78125,-80.375Q18.984375,-68.765625,18.984375,-49.34375Q18.984375,-30.890625,29.078125,-19.9375Q39.171875,-9,55.546875,-9Q70.734375,-9,81.84375,-16L81.84375,-4.53125Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M112.203125,0L100.671875,0L100.671875,-107L112.203125,-107L112.203125,0Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M165.76562,2Q149.8125,2,140.28125,-8.171875Q130.75,-18.34375,130.75,-35.15625Q130.75,-53.4375,140.65625,-63.71875Q150.57812,-74,167.45312,-74Q183.5625,-74,192.59375,-64Q201.625,-54,201.625,-36.28125Q201.625,-18.921875,191.89062,-8.453125Q182.15625,2,165.76562,2ZM166.60938,-64Q155.5,-64,149.03125,-56.4375Q142.5625,-48.875,142.5625,-35.578125Q142.5625,-22.78125,149.09375,-15.390625Q155.64062,-8,166.60938,-8Q177.79688,-8,183.79688,-15.25Q189.8125,-22.5,189.8125,-35.859375Q189.8125,-49.359375,183.79688,-56.671875Q177.79688,-64,166.60938,-64Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M277.89062,0L266.35938,0L266.35938,-11.375L266.07812,-11.375Q258.90625,2,243.85938,2Q218.125,2,218.125,-28.78125L218.125,-72L229.59375,-72L229.59375,-30.78125Q229.59375,-8,247.03125,-8Q255.46875,-8,260.90625,-14.21875Q266.35938,-20.453125,266.35938,-30.5L266.35938,-72L277.89062,-72L277.89062,0Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M363.125,0L351.59375,0L351.59375,-12.21875L351.3125,-12.21875Q343.29688,2,326.5625,2Q313,2,304.875,-7.75Q296.75,-17.5,296.75,-34.296875Q296.75,-52.3125,305.75,-63.15625Q314.75,-74,329.73438,-74Q344.5625,-74,351.3125,-62.03125L351.59375,-62.03125L351.59375,-107L363.125,-107L363.125,0ZM351.59375,-32.546875L351.59375,-43.171875Q351.59375,-51.90625,345.82812,-57.953125Q340.0625,-64,331.20312,-64Q320.65625,-64,314.60938,-56.25Q308.5625,-48.515625,308.5625,-34.875Q308.5625,-22.421875,314.35938,-15.203125Q320.17188,-8,329.9375,-8Q339.57812,-8,345.57812,-14.953125Q351.59375,-21.921875,351.59375,-32.546875Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M383.51562,-4.078125L383.51562,-18Q385.90625,-15.90625,389.23438,-14.234375Q392.57812,-12.5625,396.26562,-11.40625Q399.96875,-10.25,403.6875,-9.625Q407.42188,-9,410.57812,-9Q421.48438,-9,426.85938,-13Q432.23438,-17,432.23438,-24.5Q432.23438,-28.609375,430.4375,-31.65625Q428.65625,-34.703125,425.48438,-37.21875Q422.32812,-39.734375,418,-42.03125Q413.67188,-44.328125,408.6875,-46.890625Q403.40625,-49.578125,398.82812,-52.34375Q394.26562,-55.109375,390.89062,-58.4375Q387.51562,-61.765625,385.57812,-65.96875Q383.65625,-70.1875,383.65625,-75.859375Q383.65625,-82.796875,386.67188,-87.9375Q389.70312,-93.078125,394.625,-96.40625Q399.54688,-99.734375,405.82812,-101.359375Q412.125,-103,418.67188,-103Q433.57812,-103,440.39062,-99.296875L440.39062,-86Q431.46875,-92,417.46875,-92Q413.60938,-92,409.73438,-91.1875Q405.875,-90.390625,402.84375,-88.578125Q399.82812,-86.765625,397.92188,-83.90625Q396.03125,-81.046875,396.03125,-76.921875Q396.03125,-73.03125,397.46875,-70.1875Q398.90625,-67.359375,401.71875,-65.015625Q404.53125,-62.6875,408.57812,-60.484375Q412.625,-58.28125,417.89062,-55.671875Q423.3125,-52.96875,428.15625,-50Q433.01562,-47.03125,436.67188,-43.40625Q440.32812,-39.796875,442.46875,-35.40625Q444.60938,-31.015625,444.60938,-25.34375Q444.60938,-17.828125,441.6875,-12.625Q438.78125,-7.421875,433.8125,-4.15625Q428.85938,-0.90625,422.39062,0.546875Q415.92188,2,408.75,2Q406.35938,2,402.84375,1.59375Q399.32812,1.1875,395.67188,0.40625Q392.01562,-0.375,388.75,-1.515625Q385.48438,-2.671875,383.51562,-4.078125Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M497.07812,-0.234375Q493,2,486.3125,2Q467.40625,2,467.40625,-19.1875L467.40625,-62L455.03125,-62L455.03125,-72L467.40625,-72L467.40625,-89.328125L478.9375,-93L478.9375,-72L497.07812,-72L497.07812,-62L478.9375,-62L478.9375,-21.4375Q478.9375,-14.1875,481.39062,-11.09375Q483.85938,-8,489.54688,-8Q493.90625,-8,497.07812,-10L497.07812,-0.234375Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M550.21875,-60Q547.2031,-62,541.5,-62Q534.125,-62,529.15625,-55.109375Q524.2031,-48.21875,524.2031,-36.328125L524.2031,0L512.6719,0L512.6719,-72L524.2031,-72L524.2031,-56.515625L524.4844,-56.515625Q526.9531,-64.296875,532.0156,-68.640625Q537.0781,-73,543.3281,-73Q547.8281,-73,550.21875,-72.015625L550.21875,-60Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M620.5469,-33L569.7031,-33Q569.9844,-21.03125,576.1719,-14.515625Q582.3594,-8,593.1875,-8Q605.3594,-8,615.5469,-16L615.5469,-5Q606.0625,2,590.4531,2Q575.1875,2,566.46875,-7.890625Q557.75,-17.78125,557.75,-35.71875Q557.75,-52.65625,567.28125,-63.328125Q576.8125,-74,590.9375,-74Q605.0781,-74,612.8125,-64.765625Q620.5469,-55.53125,620.5469,-39.109375L620.5469,-33ZM608.7344,-43Q608.65625,-52.9375,603.90625,-58.46875Q599.1719,-64,590.7344,-64Q582.5781,-64,576.875,-58.1875Q571.1875,-52.375,569.84375,-43L608.7344,-43Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M689.21875,0L677.6875,0L677.6875,-11.234375L677.40625,-11.234375Q669.875,2,655.25,2Q644.5,2,638.40625,-3.765625Q632.3281,-9.546875,632.3281,-19.109375Q632.3281,-39.578125,656.09375,-42.9375L677.6875,-46Q677.6875,-64,662.84375,-64Q649.84375,-64,639.3594,-55L639.3594,-67.09375Q649.9844,-74,663.8281,-74Q689.21875,-74,689.21875,-47.03125L689.21875,0ZM677.6875,-37L660.3125,-34.5625Q652.2969,-33.40625,648.21875,-30.5Q644.1406,-27.59375,644.1406,-20.203125Q644.1406,-14.8125,647.90625,-11.40625Q651.6719,-8,657.9219,-8Q666.5,-8,672.09375,-14.140625Q677.6875,-20.28125,677.6875,-29.671875L677.6875,-37Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M812.90625,0L801.375,0L801.375,-41.359375Q801.375,-53.3125,797.6875,-58.65625Q794,-64,785.28125,-64Q777.8906,-64,772.71875,-57.25Q767.5625,-50.5,767.5625,-41.078125L767.5625,0L756.03125,0L756.03125,-42.765625Q756.03125,-64,739.6406,-64Q732.0469,-64,727.125,-57.625Q722.2031,-51.265625,722.2031,-41.078125L722.2031,0L710.6719,0L710.6719,-72L722.2031,-72L722.2031,-60.625L722.4844,-60.625Q730.15625,-74,744.84375,-74Q752.2344,-74,757.71875,-69.796875Q763.2031,-65.609375,765.2344,-58.796875Q773.25,-74,789.1406,-74Q812.90625,-74,812.90625,-44.5625L812.90625,0Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M875.21875,0L875.21875,-101L903.0625,-101Q956.3594,-101,956.3594,-51.765625Q956.3594,-28.390625,941.5625,-14.1875Q926.7656,0,901.9375,0L875.21875,0ZM887.03125,-90L887.03125,-11L902.0781,-11Q921.90625,-11,932.9375,-21.546875Q943.9844,-32.109375,943.9844,-51.484375Q943.9844,-90,902.78125,-90L887.03125,-90Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M1032.5469,-33L981.7031,-33Q981.9844,-21.03125,988.1719,-14.515625Q994.3594,-8,1005.1875,-8Q1017.3594,-8,1027.5469,-16L1027.5469,-5Q1018.0625,2,1002.4531,2Q987.1875,2,978.46875,-7.890625Q969.75,-17.78125,969.75,-35.71875Q969.75,-52.65625,979.28125,-63.328125Q988.8125,-74,1002.9375,-74Q1017.0781,-74,1024.8125,-64.765625Q1032.5469,-55.53125,1032.5469,-39.109375L1032.5469,-33ZM1020.7344,-43Q1020.65625,-52.9375,1015.90625,-58.46875Q1011.1719,-64,1002.7344,-64Q994.5781,-64,988.875,-58.1875Q983.1875,-52.375,981.84375,-43L1020.7344,-43Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M1061.4844,-10.390625L1061.2031,-10.390625L1061.2031,0L1049.6719,0L1049.6719,-107L1061.2031,-107L1061.2031,-59.359375L1061.4844,-59.359375Q1070,-74,1086.375,-74Q1100.2344,-74,1108.0625,-64.25Q1115.9062,-54.5,1115.9062,-38.125Q1115.9062,-19.90625,1107.1094,-8.953125Q1098.3281,2,1083.0781,2Q1068.7969,2,1061.4844,-10.390625ZM1061.2031,-39.453125L1061.2031,-29.390625Q1061.2031,-20.453125,1067,-14.21875Q1072.8125,-8,1081.7344,-8Q1092.2188,-8,1098.1562,-16.015625Q1104.0938,-24.046875,1104.0938,-38.328125Q1104.0938,-50.359375,1098.5312,-57.171875Q1092.9844,-64,1083.5,-64Q1073.4375,-64,1067.3125,-57Q1061.2031,-50,1061.2031,-39.453125Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M1192.8906,0L1181.3594,0L1181.3594,-11.375L1181.0781,-11.375Q1173.9062,2,1158.8594,2Q1133.125,2,1133.125,-28.78125L1133.125,-72L1144.5938,-72L1144.5938,-30.78125Q1144.5938,-8,1162.0312,-8Q1170.4688,-8,1175.9062,-14.21875Q1181.3594,-20.453125,1181.3594,-30.5L1181.3594,-72L1192.8906,-72L1192.8906,0Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M1278.125,-5.703125Q1278.125,34,1240.1562,34Q1226.7969,34,1216.8125,28.8125L1216.8125,17Q1228.9844,24,1240.0156,24Q1266.5938,24,1266.5938,-4.21875L1266.5938,-12.078125L1266.3125,-12.078125Q1258.0938,2,1241.5625,2Q1228.1406,2,1219.9375,-7.671875Q1211.75,-17.359375,1211.75,-33.65625Q1211.75,-52.171875,1220.5781,-63.078125Q1229.4062,-74,1244.7344,-74Q1259.2812,-74,1266.3125,-62.03125L1266.5938,-62.03125L1266.5938,-72L1278.125,-72L1278.125,-5.703125ZM1266.5938,-32.546875L1266.5938,-43.171875Q1266.5938,-51.765625,1260.7969,-57.875Q1255,-64,1246.3438,-64Q1235.6562,-64,1229.6094,-56.21875Q1223.5625,-48.453125,1223.5625,-34.453125Q1223.5625,-22.421875,1229.3594,-15.203125Q1235.1719,-8,1244.7344,-8Q1254.4375,-8,1260.5156,-14.890625Q1266.5938,-21.78125,1266.5938,-32.546875Z"
            android:fillColor="#FFFFFF"/>
      </group>
    </group>
  </group>
</vector>


================================================
FILE: app/src/debug/res/drawable-anydpi-v24/ic_stat_name.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="#FFFFFF"
    android:name="vector">
  <group android:scaleX="0.0780212"
      android:scaleY="0.0780212"
      android:translateX="0.96"
      android:translateY="0.96">
      <path android:name="path"
            android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
            android:fillColor="#2309db" android:strokeWidth="1"
            tools:ignore="VectorPath"/>
      <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
            android:fillColor="#2149d8" android:strokeWidth="1"/>
      <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
            android:fillColor="#5c89f7" android:strokeWidth="1"/>
  </group>
</vector>


================================================
FILE: app/src/debug/res/drawable-v24/ic_banner_background.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="320dp"
    android:height="180dp"
    android:viewportWidth="320"
    android:viewportHeight="180">
  <group android:scaleX="0.6666667"
      android:scaleY="0.6666667"
      android:translateX="53.333332"
      android:translateY="30">
    <group android:scaleX="0.35277516"
        android:scaleY="0.35277516"
        android:translateX="5.879586E-4">
      <path
          android:strokeWidth="1"
          android:pathData="M-20.09,-10.91h949.79v534.26h-949.79z"
          android:fillColor="#121212"
          android:strokeColor="#fff"/>
      <path
              android:pathData="M273.68,250.58a18.79,18.79 0,0 0,-5.64 0.86,26.56 26.56,0 0,0 -24.73,-21.51 40.83,40.83 0,0 0,-68.95 -13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H273.68a18.9,18.9 0,0 0,0 -37.8Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="245.72"
                  android:startX="113.12"
                  android:endY="245.72"
                  android:endX="292.58"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
              android:pathData="M248.76,234.41c0,-1.22 0,-2.42 -0.09,-3.63a27,27 0,0 0,-5.36 -0.85,40.83 40.83,0 0,0 -68.95,-13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H228.5A81.75,81.75 0,0 0,248.76 234.41Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="245.72"
                  android:startX="113.12"
                  android:endY="245.72"
                  android:endX="248.76"
                  android:type="linear">
            <item android:offset="0" android:color="#FF4F6DFB"/>
            <item android:offset="0.6" android:color="#FF3559E7"/>
            <item android:offset="1" android:color="#FF2149D8"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
              android:pathData="M174.36,216.85A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.89,18.89 0,0 0,-1.18 37.74A81.53,81.53 0,0 0,210 206.83c0,-1.15 0,-2.29 -0.09,-3.43a41.33,41.33 0,0 0,-5 -0.33A40.71,40.71 0,0 0,174.36 216.85Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="245.69"
                  android:startX="113.12"
                  android:endY="245.69"
                  android:endX="210.03"
                  android:type="linear">
            <item android:offset="0" android:color="#FF56B6FE"/>
            <item android:offset="0.61" android:color="#FF599CFA"/>
            <item android:offset="1" android:color="#FF5C89F7"/>
          </gradient>
        </aapt:attr>
      </path>

      <path
              android:pathData="M358.81,285q-13.53,0 -22.64,-9.1t-9,-22.72q0,-13.62 9,-22.64 9,-9.18 22.64,-9.19 13.79,0 22.38,10l-5.62,5.44a20.82,20.82 0,0 0,-16.76 -7.91,23 23,0 0,0 -16.94,6.81q-6.72,6.72 -6.72,17.53t6.72,17.53a23,23 0,0 0,16.94 6.81q10.63,0 18.46,-8.94l5.7,5.53a29.57,29.57 0,0 1,-10.63 8A32.44,32.44 0,0 1,358.81 285Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M397.78,222.69v60.93H390V222.69Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M404.5,262.77q0,-9.61 6,-15.91a20.6,20.6 0,0 1,15.41 -6.3,20.31 20.31,0 0,1 15.31,6.3 21.87,21.87 0,0 1,6.13 15.91q0,9.71 -6.13,15.92A20.3,20.3 0,0 1,426 285a20.6,20.6 0,0 1,-15.41 -6.29Q404.5,272.39 404.5,262.77ZM412.33,262.77a15.31,15.31 0,0 0,3.91 10.9,13.38 13.38,0 0,0 19.41,0 17,17 0,0 0,0 -21.7,13.18 13.18,0 0,0 -19.41,0A15.18,15.18 0,0 0,412.33 262.77Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M490.7,283.62h-7.48v-5.78h-0.35a13.86,13.86 0,0 1,-5.48 5.1,15.77 15.77,0 0,1 -7.7,2q-7.67,0 -11.79,-4.38t-4.13,-12.47v-26.2h7.83v25.69q0.25,10.22 10.3,10.22a9.81,9.81 0,0 0,7.83 -3.79,13.7 13.7,0 0,0 3.14,-9.06V241.93h7.83Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M517.25,285a18.34,18.34 0,0 1,-14 -6.46,24.34 24.34,0 0,1 0,-31.49 18.35,18.35 0,0 1,14 -6.47,18.07 18.07,0 0,1 8.39,2 14.84,14.84 0,0 1,5.83 5.19h0.34l-0.34,-5.78L531.47,222.69h7.82v60.93h-7.48v-5.78h-0.34a14.84,14.84 0,0 1,-5.83 5.19A18.07,18.07 0,0 1,517.25 285ZM518.53,277.86a12,12 0,0 0,9.45 -4.17q3.82,-4.17 3.83,-10.9A15.54,15.54 0,0 0,528 252a12.05,12.05 0,0 0,-9.45 -4.26,12.19 12.19,0 0,0 -9.44,4.26 15.5,15.5 0,0 0,-3.83 10.8,15.32 15.32,0 0,0 3.83,10.81A12.19,12.19 0,0 0,518.53 277.84Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M587.8,267.33a15.91,15.91 0,0 1,-5.87 12.88A22.43,22.43 0,0 1,567.46 285a21.39,21.39 0,0 1,-13.36 -4.42,22.65 22.65,0 0,1 -8,-12.08l7.49,-3.07a19.3,19.3 0,0 0,2.13 4.94,15.72 15.72,0 0,0 3.19,3.78 14.25,14.25 0,0 0,4 2.47,12.26 12.26,0 0,0 4.68,0.9 13.47,13.47 0,0 0,8.76 -2.77,9 9,0 0,0 3.41,-7.36 8.8,8.8 0,0 0,-2.81 -6.55q-2.64,-2.64 -9.87,-5.11 -7.32,-2.64 -9.11,-3.57 -9.69,-4.94 -9.7,-14.55a14.84,14.84 0,0 1,5.37 -11.49A19.53,19.53 0,0 1,567 221.33a20.5,20.5 0,0 1,12.09 3.58,16.67 16.67,0 0,1 6.8,8.76l-7.31,3.06a10.84,10.84 0,0 0,-4 -5.65,13.1 13.1,0 0,0 -15.11,0.28 7.41,7.41 0,0 0,-3.15 6.19,7.14 7.14,0 0,0 2.47,5.42q2.73,2.29 11.83,5.42 9.27,3.17 13.23,7.72A16.53,16.53 0,0 1,587.8 267.33Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M610.26,284.3a11.88,11.88 0,0 1,-8.46 -3.15c-2.25,-2.09 -3.4,-5 -3.45,-8.76V249.07H591v-7.14h7.32V229.16h7.83v12.77h10.21v7.14H606.18v20.77c0,2.78 0.54,4.66 1.61,5.66a5.27,5.27 0,0 0,3.66 1.48,7.9 7.9,0 0,0 1.83,-0.21 9,9 0,0 0,1.66 -0.55l2.47,7A21.23,21.23 0,0 1,610.26 284.3Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M631.71,283.62h-7.83V241.93h7.48v6.8h0.35a11.31,11.31 0,0 1,4.89 -5.66,13.66 13.66,0 0,1 7.27,-2.34 14.7,14.7 0,0 1,5.79 1l-2.38,7.57a12.93,12.93 0,0 0,-4.6 -0.6,10.11 10.11,0 0,0 -7.7,3.58 12,12 0,0 0,-3.27 8.34Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M670.93,285a19.93,19.93 0,0 1,-15.14 -6.29q-6,-6.3 -6,-15.92a22.65,22.65 0,0 1,5.79 -15.87,19.15 19.15,0 0,1 14.8,-6.34q9.29,0 14.77,6t5.49,16.81l-0.09,0.85L657.83,264.24a13.56,13.56 0,0 0,4.08 9.87,13.06 13.06,0 0,0 9.36,3.75q7.49,0 11.75,-7.49l7,3.4a20.69,20.69 0,0 1,-7.78 8.25A21.51,21.51 0,0 1,670.93 285ZM658.42,257.77h23.92a10.43,10.43 0,0 0,-3.53 -7.19,12.38 12.38,0 0,0 -8.56,-2.85 11.34,11.34 0,0 0,-7.61 2.72A13.09,13.09 0,0 0,658.42 257.75Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M714.08,240.56q8.67,0 13.7,4.64c3.34,3.1 5,7.33 5,12.72v25.7h-7.49v-5.78H725Q720.11,285 712,285a16.83,16.83 0,0 1,-11.53 -4.08,13 13,0 0,1 -4.63,-10.21 12.38,12.38 0,0 1,4.89 -10.3q4.89,-3.83 13.06,-3.83a23.16,23.16 0,0 1,11.49 2.55v-1.78a8.9,8.9 0,0 0,-3.24 -6.94,11.08 11.08,0 0,0 -7.57,-2.85 12,12 0,0 0,-10.38 5.53l-6.89,-4.34Q702.93,240.57 714.08,240.56ZM704,270.86a6.24,6.24 0,0 0,2.59 5.1,9.57 9.57,0 0,0 6.09,2.05 12.5,12.5 0,0 0,8.81 -3.66,11.47 11.47,0 0,0 3.87,-8.6q-3.66,-2.88 -10.21,-2.89a13.22,13.22 0,0 0,-8 2.3A6.81,6.81 0,0 0,704 270.86Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M749.47,283.62h-7.82V241.93h7.48v5.78h0.34a14,14 0,0 1,5.49 -5.1,15.06 15.06,0 0,1 7.36,-2.05 15.22,15.22 0,0 1,8.09 2.13,12.56 12.56,0 0,1 5.1,5.87q5.19,-8 14.39,-8 7.23,0 11.14,4.43T805,257.58v26h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.06,9v23.06h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.07,9Z"
              android:fillColor="#5252ff"/>
      <path
          android:pathData="M-13.76,555.76c10.3,-20.89 58.91,-113.94 157.31,-139.7C261.3,385.24 405.9,462.43 469.89,613.28">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="252.3"
                  android:startX="194.11"
                  android:endY="252.3"
                  android:endX="373.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M318.2,592.15c52.89,-55.46 139,-131.3 263,-187.83 223.69,-102 495.29,-119.94 515.35,-62.21 13,37.39 -73.5,124.43 -496.69,339.65">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startX="400.11"
                  android:endX="900"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M-57.58,195c206.91,86.6 494,-219.13 453.91,-347.48C353.52,-289.67 -103.15,-353.41 -203.15,-176 -265.5,-65.35 -189.57,139.73 -57.58,195Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="252.3"
                  android:startX="-100"
                  android:endY="252.3"
                  android:endX="373.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M698.42,648.89C625.71,546 764,320.79 920.68,218.45c46.61,-30.44 110.17,-72 164.35,-50.08 102.25,41.28 158.19,303.22 28.17,446.08C996.65,742.52 762.64,739.78 698.42,648.89Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startX="700.11"
                  android:endX="900.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M339.91,-42.46a246.52,141.46 0,1 0,493.04 0a246.52,141.46 0,1 0,-493.04 0z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startX="400.11"
                  android:endX="800.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
    </group>
  </group>
</vector>



================================================
FILE: app/src/debug/res/drawable-v24/ic_launcher_foreground.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108"
    android:name="vector">
  <group android:scaleX="0.1755477"
      android:scaleY="0.1755477"
      android:translateX="29.16"
      android:translateY="29.16">
      <path android:name="path"
            android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
            android:strokeWidth="1"
            tools:ignore="VectorPath">
          <aapt:attr name="android:fillColor">
              <gradient
                      android:startY="0"
                      android:startX="200"
                      android:endY="0"
                      android:endX="300"
                      android:type="linear">
                  <item android:offset="0" android:color="#3FAA11"/>
                  <item android:offset="1" android:color="#39A11D"/>
              </gradient>
          </aapt:attr>
      </path>

      <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
            android:strokeWidth="1">
      <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="0"
                  android:startX="200"
                  android:endY="0"
                  android:endX="000"
                  android:type="linear">
              <item android:offset="0" android:color="#37DB25"/>
              <item android:offset="1" android:color="#11DD6D"/>
          </gradient>
      </aapt:attr>
      </path>

      <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
             android:strokeWidth="1">
      <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="0"
                  android:startX="150"
                  android:endY="0"
                  android:endX="000"
                  android:type="linear">
              <item android:offset="0" android:color="#40F15D"/>
              <item android:offset="1" android:color="#42C54F"/>
          </gradient>
      </aapt:attr>
  </path>
  </group>
</vector>


================================================
FILE: app/src/debug/res/mipmap-anydpi-v26/ic_banner.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_banner_background"/>
</adaptive-icon>


================================================
FILE: app/src/debug/res/mipmap-anydpi-v26/ic_launcher.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@color/ic_launcher_background"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>


================================================
FILE: app/src/debug/res/mipmap-anydpi-v26/ic_launcher_round.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@color/ic_launcher_background"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>


================================================
FILE: app/src/debug/res/values/ic_launcher_background.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="ic_launcher_background">#000000</color>
</resources>


================================================
FILE: app/src/debug/res/values/strings.xml
================================================
<resources>
    <string name="app_name">CloudStream Debug</string>
</resources>


================================================
FILE: app/src/main/AndroidManifest.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        package="com.lagradost.cloudstream3">

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> <!-- I dont remember, probs has to do with downloads -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> <!-- Downloads -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> <!-- Downloads on low api devices-->
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> <!-- some dependency needs this -->
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> <!-- Used for player vertical slide-->
    <uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES" /> <!--Used for app update-->
    <!--<uses-permission android:name="com.android.providers.tv.permission.WRITE_EPG_DATA" /> not used atm, but code exist that requires it that are not run-->
<!--    <permission android:name="android.permission.QUERY_ALL_PACKAGES" /> &lt;!&ndash; Used for getting if vlc is installed &ndash;&gt;-->

    <!-- Fixes android tv fuckery -->
    <uses-feature
            android:name="android.hardware.touchscreen"
            android:required="false" />
    <uses-feature
            android:name="android.software.leanback"
            android:required="false" />

    <!--TODO https://stackoverflow.com/questions/41799732/chromecast-button-not-visible-in-android-->
    <application
            android:name=".AcraApplication"
            android:allowBackup="true"
            android:icon="@mipmap/ic_launcher"
            android:banner="@mipmap/ic_banner"
            android:label="@string/app_name"
            android:usesCleartextTraffic="true"
            android:roundIcon="@mipmap/ic_launcher_round"
            android:supportsRtl="true"
            android:theme="@style/AppTheme"
            android:fullBackupContent="@xml/backup_descriptor"
            android:appCategory="video"
            tools:targetApi="o">
        <meta-data
                android:name="com.google.android.gms.cast.framework.OPTIONS_PROVIDER_CLASS_NAME"
                android:value="com.lagradost.cloudstream3.utils.CastOptionsProvider" />

        <activity
                android:name=".ui.player.DownloadedPlayerActivity"
                android:screenOrientation="userLandscape"
                android:configChanges="orientation|screenSize|smallestScreenSize|screenLayout|keyboard|keyboardHidden|navigation"
                android:resizeableActivity="true"
                android:supportsPictureInPicture="true"
                android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />

                <data android:scheme="content" />
                <data android:mimeType="video/*" />
            </intent-filter>
        </activity>

        <activity
                android:exported="true"
                android:name=".MainActivity"
                android:configChanges="orientation|screenSize|smallestScreenSize|screenLayout|keyboard|keyboardHidden|navigation"
                android:label="@string/app_name"
                android:resizeableActivity="true"
                android:supportsPictureInPicture="true">
            <intent-filter android:exported="true">
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
                <category android:name="android.intent.category.LEANBACK_LAUNCHER" />
            </intent-filter>
            <intent-filter android:exported="true">
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.BROWSABLE" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:scheme="https" android:host="pelisplus.icu" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="pelisplushd.net" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="pelismart.com" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="melomovie.com" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="doramasyt.com" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="cinecalidad.lol" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="cuevana3.me" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="entrepeliculasyseries.nu" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="pelisflix.li" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="seriesflix.video" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="ihavenotv.com" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="lookmovie.io" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="www.vmovee.watch" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="allmoviesforyou.net" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="vidembed.cc" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="vf-film.me" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="vf-serie.org" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="french-stream.re" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="asianembed.io" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="asiaflix.app" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="bflix.ru" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="fmovies.to" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="sflix.pro" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="filman.cc" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="sflix.to" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="dopebox.to" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="solarmovie.pe" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="pinoymoviepedia.ru" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="www.pinoy-hd.xyz" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="pinoymovies.es" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="trailers.to" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="www.2embed.ru" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="dramasee.net" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="watchasian.sh" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="kdramahood.com" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="akwam.to" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="mycima.tv" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="www.egy.best" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="secretlink.xyz" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="hdm.to" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="theflix.to" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="streamingcommunity.top" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="www.tantifilm.rodeo" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="v2.apimdb.net" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="www.wcostream.com" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="gogoanime.film" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="allanime.site" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="animekisa.in" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="animeflick.net" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="www3.animeflv.net" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="tenshi.moe" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="wcostream.cc" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="animepahe.com" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="dreamsub.me" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="9anime.id" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="www.animeworld.tv" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="zoro.to" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="bestdubbedanime.com" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="monoschinos2.com" android:pathPrefix="/"/>
                <data android:scheme="https" android:host="kawaiifu.com" android:pathPrefix="/"/>
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data android:scheme="cloudstreamapp" />
            </intent-filter>
        </activity>

        <receiver
                android:name=".receivers.VideoDownloadRestartReceiver"
                android:enabled="false"
                android:exported="true">
            <intent-filter android:exported="true">
                <action android:name="restart_service" />
            </intent-filter>
        </receiver>
        <service
                android:name=".services.VideoDownloadService"
                android:enabled="true"
                android:exported="false"></service>

        <activity
                android:exported="false"
                android:name=".ui.ControllerActivity"></activity>

        <provider
                android:name="androidx.core.content.FileProvider"
                android:authorities="${applicationId}.provider"
                android:exported="false"
                android:enabled="true"
                android:grantUriPermissions="true">
            <meta-data
                    android:name="android.support.FILE_PROVIDER_PATHS"
                    android:resource="@xml/provider_paths" />
        </provider>
    </application>
</manifest>


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/AcraApplication.kt
================================================
package com.lagradost.cloudstream3

import android.app.Application
import android.content.Context
import android.widget.Toast
import com.google.auto.service.AutoService
import com.lagradost.cloudstream3.mvvm.normalSafeApiCall
import com.lagradost.cloudstream3.mvvm.suspendSafeApiCall
import com.lagradost.cloudstream3.utils.AppUtils.openBrowser
import com.lagradost.cloudstream3.utils.Coroutines.runOnMainThread
import com.lagradost.cloudstream3.utils.DataStore.getKey
import com.lagradost.cloudstream3.utils.DataStore.getKeys
import com.lagradost.cloudstream3.utils.DataStore.removeKey
import com.lagradost.cloudstream3.utils.DataStore.removeKeys
import com.lagradost.cloudstream3.utils.DataStore.setKey
import kotlinx.coroutines.runBlocking
import org.acra.ReportField
import org.acra.config.CoreConfiguration
import org.acra.data.CrashReportData
import org.acra.data.StringFormat
import org.acra.ktx.initAcra
import org.acra.sender.ReportSender
import org.acra.sender.ReportSenderFactory
import java.lang.ref.WeakReference
import kotlin.concurrent.thread

class CustomReportSender : ReportSender {
    // Sends all your crashes to google forms
    override fun send(context: Context, errorContent: CrashReportData) {
        println("Sending report")
        val url =
            "https://docs.google.com/forms/u/0/d/e/1FAIpQLSeFmyBChi6HF3IkhTVWPiDXJtxt8W0Hf4Agljm_0-0_QuEYFg/formResponse"
        val data = mapOf(
            "entry.134906550" to errorContent.toJSON()
        )

        thread { // to not run it on main thread
            runBlocking {
                suspendSafeApiCall {
                    val post = app.post(url, data = data)
                    println("Report response: $post")
                }
            }
        }

        runOnMainThread { // to run it on main looper
            normalSafeApiCall {
                Toast.makeText(context, R.string.acra_report_toast, Toast.LENGTH_SHORT).show()
            }
        }
    }
}

@AutoService(ReportSenderFactory::class)
class CustomSenderFactory : ReportSenderFactory {
    override fun create(context: Context, config: CoreConfiguration): ReportSender {
        return CustomReportSender()
    }

    override fun enabled(config: CoreConfiguration): Boolean {
        return true
    }
}

class AcraApplication : Application() {
    override fun attachBaseContext(base: Context?) {
        super.attachBaseContext(base)
        context = base

        initAcra {
            //core configuration:
            buildConfigClass = BuildConfig::class.java
            reportFormat = StringFormat.JSON

            reportContent = arrayOf(
                ReportField.BUILD_CONFIG, ReportField.USER_CRASH_DATE,
                ReportField.ANDROID_VERSION, ReportField.PHONE_MODEL,
                ReportField.STACK_TRACE
            )

            // removed this due to bug when starting the app, moved it to when it actually crashes
            //each plugin you chose above can be configured in a block like this:
            /*toast {
                text = getString(R.string.acra_report_toast)
                //opening this block automatically enables the plugin.
            }*/
        }
    }

    companion object {
        private var _context: WeakReference<Context>? = null
        var context
            get() = _context?.get()
            private set(value) {
                _context = WeakReference(value)
            }

        fun removeKeys(folder: String): Int? {
            return context?.removeKeys(folder)
        }

        fun <T> setKey(path: String, value: T) {
            context?.setKey(path, value)
        }

        fun <T> setKey(folder: String, path: String, value: T) {
            context?.setKey(folder, path, value)
        }

        inline fun <reified T : Any> getKey(path: String, defVal: T?): T? {
            return context?.getKey(path, defVal)
        }

        inline fun <reified T : Any> getKey(path: String): T? {
            return context?.getKey(path)
        }

        inline fun <reified T : Any> getKey(folder: String, path: String): T? {
            return context?.getKey(folder, path)
        }

        inline fun <reified T : Any> getKey(folder: String, path: String, defVal: T?): T? {
            return context?.getKey(folder, path, defVal)
        }

        fun getKeys(folder: String): List<String>? {
            return context?.getKeys(folder)
        }

        fun removeKey(folder: String, path: String) {
            context?.removeKey(folder, path)
        }

        fun removeKey(path: String) {
            context?.removeKey(path)
        }

        fun openBrowser(url: String) {
            context?.openBrowser(url)
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/CommonActivity.kt
================================================
package com.lagradost.cloudstream3

import android.app.Activity
import android.app.PictureInPictureParams
import android.content.Context
import android.content.pm.PackageManager
import android.content.res.Resources
import android.os.Build
import android.util.Log
import android.view.*
import android.widget.TextView
import android.widget.Toast
import androidx.annotation.StringRes
import androidx.appcompat.app.AppCompatActivity
import androidx.appcompat.widget.SearchView
import androidx.preference.PreferenceManager
import com.google.android.gms.cast.framework.CastSession
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.ui.player.PlayerEventType
import com.lagradost.cloudstream3.utils.Event
import com.lagradost.cloudstream3.utils.UIHelper
import com.lagradost.cloudstream3.utils.UIHelper.hasPIPPermission
import com.lagradost.cloudstream3.utils.UIHelper.shouldShowPIPMode
import com.lagradost.cloudstream3.utils.UIHelper.toPx
import java.util.*

object CommonActivity {
    fun Activity?.getCastSession(): CastSession? {
        return (this as MainActivity?)?.mSessionManager?.currentCastSession
    }

    var canEnterPipMode: Boolean = false
    var canShowPipMode: Boolean = false
    var isInPIPMode: Boolean = false

    val backEvent = Event<Boolean>()
    val onColorSelectedEvent = Event<Pair<Int, Int>>()
    val onDialogDismissedEvent = Event<Int>()

    var playerEventListener: ((PlayerEventType) -> Unit)? = null
    var keyEventListener: ((Pair<KeyEvent?, Boolean>) -> Boolean)? = null


    var currentToast: Toast? = null

    fun showToast(act: Activity?, @StringRes message: Int, duration: Int) {
        if (act == null) return
        showToast(act, act.getString(message), duration)
    }

    const val TAG = "COMPACT"

    /** duration is Toast.LENGTH_SHORT if null*/
    fun showToast(act: Activity?, message: String?, duration: Int? = null) {
        if (act == null || message == null) {
            Log.w(TAG, "invalid showToast act = $act message = $message")
            return
        }
        Log.i(TAG, "showToast = $message")

        try {
            currentToast?.cancel()
        } catch (e: Exception) {
            logError(e)
        }
        try {
            val inflater =
                act.getSystemService(AppCompatActivity.LAYOUT_INFLATER_SERVICE) as LayoutInflater

            val layout: View = inflater.inflate(
                R.layout.toast,
                act.findViewById<View>(R.id.toast_layout_root) as ViewGroup?
            )

            val text = layout.findViewById(R.id.text) as TextView
            text.text = message.trim()

            val toast = Toast(act)
            toast.setGravity(Gravity.CENTER_HORIZONTAL or Gravity.BOTTOM, 0, 5.toPx)
            toast.duration = duration ?: Toast.LENGTH_SHORT
            toast.view = layout
            //https://github.com/PureWriter/ToastCompat
            toast.show()
            currentToast = toast
        } catch (e: Exception) {
            logError(e)
        }
    }

    fun setLocale(context: Context?, languageCode: String?) {
        if (context == null || languageCode == null) return
        val locale = Locale(languageCode)
        val resources: Resources = context.resources
        val config = resources.configuration
        Locale.setDefault(locale)
        config.setLocale(locale)

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N)
            context.createConfigurationContext(config)
        resources.updateConfiguration(config, resources.displayMetrics)
    }

    fun Context.updateLocale() {
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
        val localeCode = settingsManager.getString(getString(R.string.locale_key), null)
        setLocale(this, localeCode)
    }

    fun init(act: Activity?) {
        if (act == null) return
        //https://stackoverflow.com/questions/52594181/how-to-know-if-user-has-disabled-picture-in-picture-feature-permission
        //https://developer.android.com/guide/topics/ui/picture-in-picture
        canShowPipMode =
            Build.VERSION.SDK_INT >= Build.VERSION_CODES.N && // OS SUPPORT
                    act.packageManager.hasSystemFeature(PackageManager.FEATURE_PICTURE_IN_PICTURE) && // HAS FEATURE, MIGHT BE BLOCKED DUE TO POWER DRAIN
                    act.hasPIPPermission() // CHECK IF FEATURE IS ENABLED IN SETTINGS

        act.updateLocale()
    }

    private fun Activity.enterPIPMode() {
        if (!shouldShowPIPMode(canEnterPipMode) || !canShowPipMode) return
        try {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                try {
                    enterPictureInPictureMode(PictureInPictureParams.Builder().build())
                } catch (e: Exception) {
                    enterPictureInPictureMode()
                }
            } else {
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
                    enterPictureInPictureMode()
                }
            }
        } catch (e: Exception) {
            logError(e)
        }
    }

    fun onUserLeaveHint(act: Activity?) {
        if (canEnterPipMode && canShowPipMode) {
            act?.enterPIPMode()
        }
    }

    fun loadThemes(act: Activity?) {
        if (act == null) return
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(act)

        val currentTheme =
            when (settingsManager.getString(act.getString(R.string.app_theme_key), "AmoledLight")) {
                "Black" -> R.style.AppTheme
                "Light" -> R.style.LightMode
                "Amoled" -> R.style.AmoledMode
                "AmoledLight" -> R.style.AmoledModeLight
                else -> R.style.AppTheme
            }

        val currentOverlayTheme =
            when (settingsManager.getString(act.getString(R.string.primary_color_key), "Normal")) {
                "Normal" -> R.style.OverlayPrimaryColorNormal
                "CarnationPink" -> R.style.OverlayPrimaryColorCarnationPink
                "DarkGreen" -> R.style.OverlayPrimaryColorDarkGreen
                "Maroon" -> R.style.OverlayPrimaryColorMaroon
                "NavyBlue" -> R.style.OverlayPrimaryColorNavyBlue
                "Grey" -> R.style.OverlayPrimaryColorGrey
                "White" -> R.style.OverlayPrimaryColorWhite
                "Brown" -> R.style.OverlayPrimaryColorBrown
                "Purple" -> R.style.OverlayPrimaryColorPurple
                "Green" -> R.style.OverlayPrimaryColorGreen
                "GreenApple" -> R.style.OverlayPrimaryColorGreenApple
                "Red" -> R.style.OverlayPrimaryColorRed
                "Banana" -> R.style.OverlayPrimaryColorBanana
                "Party" -> R.style.OverlayPrimaryColorParty
                "Pink" -> R.style.OverlayPrimaryColorPink
                else -> R.style.OverlayPrimaryColorNormal
            }
        act.theme.applyStyle(currentTheme, true)
        act.theme.applyStyle(currentOverlayTheme, true)

        act.theme.applyStyle(
            R.style.LoadedStyle,
            true
        ) // THEME IS SET BEFORE VIEW IS CREATED TO APPLY THE THEME TO THE MAIN VIEW
    }

    private fun getNextFocus(
        act: Activity?,
        view: View?,
        direction: FocusDirection,
        depth: Int = 0
    ): Int? {
        if (view == null || depth >= 10 || act == null) {
            return null
        }

        val nextId = when (direction) {
            FocusDirection.Left -> {
                view.nextFocusLeftId
            }
            FocusDirection.Up -> {
                view.nextFocusUpId
            }
            FocusDirection.Right -> {
                view.nextFocusRightId
            }
            FocusDirection.Down -> {
                view.nextFocusDownId
            }
        }

        return if (nextId != -1) {
            val next = act.findViewById<View?>(nextId)
            //println("NAME: ${next.accessibilityClassName} | ${next?.isShown}" )

            if (next?.isShown == false) {
                getNextFocus(act, next, direction, depth + 1)
            } else {
                if (depth == 0) {
                    null
                } else {
                    nextId
                }
            }
        } else {
            null
        }
    }

    enum class FocusDirection {
        Left,
        Right,
        Up,
        Down,
    }

    fun onKeyDown(act: Activity?, keyCode: Int, event: KeyEvent?) {
        //println("Keycode: $keyCode")
        //showToast(
        //    this,
        //    "Got Keycode $keyCode | ${KeyEvent.keyCodeToString(keyCode)} \n ${event?.action}",
        //    Toast.LENGTH_LONG
        //)

        // Tested keycodes on remote:
        // KeyEvent.KEYCODE_MEDIA_FAST_FORWARD
        // KeyEvent.KEYCODE_MEDIA_REWIND
        // KeyEvent.KEYCODE_MENU
        // KeyEvent.KEYCODE_MEDIA_NEXT
        // KeyEvent.KEYCODE_MEDIA_PREVIOUS
        // KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE

        // 149 keycode_numpad 5
        when (keyCode) {
            KeyEvent.KEYCODE_FORWARD, KeyEvent.KEYCODE_D, KeyEvent.KEYCODE_MEDIA_SKIP_FORWARD, KeyEvent.KEYCODE_MEDIA_FAST_FORWARD -> {
                PlayerEventType.SeekForward
            }
            KeyEvent.KEYCODE_A, KeyEvent.KEYCODE_MEDIA_SKIP_BACKWARD, KeyEvent.KEYCODE_MEDIA_REWIND -> {
                PlayerEventType.SeekBack
            }
            KeyEvent.KEYCODE_MEDIA_NEXT, KeyEvent.KEYCODE_BUTTON_R1 -> {
                PlayerEventType.NextEpisode
            }
            KeyEvent.KEYCODE_MEDIA_PREVIOUS, KeyEvent.KEYCODE_BUTTON_L1 -> {
                PlayerEventType.PrevEpisode
            }
            KeyEvent.KEYCODE_MEDIA_PAUSE -> {
                PlayerEventType.Pause
            }
            KeyEvent.KEYCODE_MEDIA_PLAY, KeyEvent.KEYCODE_BUTTON_START -> {
                PlayerEventType.Play
            }
            KeyEvent.KEYCODE_L, KeyEvent.KEYCODE_NUMPAD_7 -> {
                PlayerEventType.Lock
            }
            KeyEvent.KEYCODE_H, KeyEvent.KEYCODE_MENU -> {
                PlayerEventType.ToggleHide
            }
            KeyEvent.KEYCODE_M, KeyEvent.KEYCODE_VOLUME_MUTE -> {
                PlayerEventType.ToggleMute
            }
            KeyEvent.KEYCODE_S, KeyEvent.KEYCODE_NUMPAD_9 -> {
                PlayerEventType.ShowMirrors
            }
            KeyEvent.KEYCODE_E, KeyEvent.KEYCODE_NUMPAD_3 -> {
                PlayerEventType.ShowSpeed
            }
            KeyEvent.KEYCODE_R, KeyEvent.KEYCODE_NUMPAD_0 -> {
                PlayerEventType.Resize
            }
            KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE, KeyEvent.KEYCODE_P, KeyEvent.KEYCODE_SPACE, KeyEvent.KEYCODE_NUMPAD_ENTER, KeyEvent.KEYCODE_ENTER -> { // space is not captured due to navigation
                PlayerEventType.PlayPauseToggle
            }
            else -> null
        }?.let { playerEvent ->
            playerEventListener?.invoke(playerEvent)
        }

        //when (keyCode) {
        //    KeyEvent.KEYCODE_DPAD_CENTER -> {
        //        println("DPAD PRESSED")
        //    }
        //}
    }

    fun dispatchKeyEvent(act: Activity?, event: KeyEvent?): Boolean? {
        if (act == null) return null
        event?.keyCode?.let { keyCode ->
            when (event.action) {
                KeyEvent.ACTION_DOWN -> {
                    if (act.currentFocus != null) {
                        val next = when (keyCode) {
                            KeyEvent.KEYCODE_DPAD_LEFT -> getNextFocus(
                                act,
                                act.currentFocus,
                                FocusDirection.Left
                            )
                            KeyEvent.KEYCODE_DPAD_RIGHT -> getNextFocus(
                                act,
                                act.currentFocus,
                                FocusDirection.Right
                            )
                            KeyEvent.KEYCODE_DPAD_UP -> getNextFocus(
                                act,
                                act.currentFocus,
                                FocusDirection.Up
                            )
                            KeyEvent.KEYCODE_DPAD_DOWN -> getNextFocus(
                                act,
                                act.currentFocus,
                                FocusDirection.Down
                            )

                            else -> null
                        }

                        if (next != null && next != -1) {
                            val nextView = act.findViewById<View?>(next)
                            if (nextView != null) {
                                nextView.requestFocus()
                                keyEventListener?.invoke(Pair(event, true))
                                return true
                            }
                        }

                        when (keyCode) {
                            KeyEvent.KEYCODE_DPAD_CENTER -> {
                                if (act.currentFocus is SearchView || act.currentFocus is SearchView.SearchAutoComplete) {
                                    UIHelper.showInputMethod(act.currentFocus?.findFocus())
                                }
                            }
                        }
                    }
                    //println("Keycode: $keyCode")
                    //showToast(
                    //    this,
                    //    "Got Keycode $keyCode | ${KeyEvent.keyCodeToString(keyCode)} \n ${event?.action}",
                    //    Toast.LENGTH_LONG
                    //)
                }
            }
        }

        if (keyEventListener?.invoke(Pair(event, false)) == true) {
            return true
        }
        return null
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/MainActivity.kt
================================================
package com.lagradost.cloudstream3

import android.content.ComponentName
import android.content.Intent
import android.content.res.ColorStateList
import android.content.res.Configuration
import android.os.Bundle
import android.util.Log
import android.view.KeyEvent
import android.view.Menu
import android.view.MenuItem
import android.view.WindowManager
import androidx.annotation.IdRes
import androidx.appcompat.app.AppCompatActivity
import androidx.core.view.isVisible
import androidx.navigation.NavController
import androidx.navigation.NavDestination
import androidx.navigation.NavDestination.Companion.hierarchy
import androidx.navigation.NavGraph.Companion.findStartDestination
import androidx.navigation.NavOptions
import androidx.navigation.fragment.NavHostFragment
import androidx.navigation.ui.setupWithNavController
import androidx.preference.PreferenceManager
import com.google.android.gms.cast.framework.*
import com.google.android.material.navigationrail.NavigationRailView
import com.jaredrummler.android.colorpicker.ColorPickerDialogListener
import com.lagradost.cloudstream3.APIHolder.allProviders
import com.lagradost.cloudstream3.APIHolder.apis
import com.lagradost.cloudstream3.APIHolder.getApiDubstatusSettings
import com.lagradost.cloudstream3.CommonActivity.backEvent
import com.lagradost.cloudstream3.CommonActivity.loadThemes
import com.lagradost.cloudstream3.CommonActivity.onColorSelectedEvent
import com.lagradost.cloudstream3.CommonActivity.onDialogDismissedEvent
import com.lagradost.cloudstream3.CommonActivity.onUserLeaveHint
import com.lagradost.cloudstream3.CommonActivity.showToast
import com.lagradost.cloudstream3.CommonActivity.updateLocale
import com.lagradost.cloudstream3.movieproviders.NginxProvider
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.network.initClient
import com.lagradost.cloudstream3.receivers.VideoDownloadRestartReceiver
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.OAuth2Apis
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.OAuth2accountApis
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.appString
import com.lagradost.cloudstream3.ui.APIRepository
import com.lagradost.cloudstream3.ui.download.DOWNLOAD_NAVIGATE_TO
import com.lagradost.cloudstream3.ui.result.ResultFragment
import com.lagradost.cloudstream3.ui.search.SearchResultBuilder
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isEmulatorSettings
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTvSettings
import com.lagradost.cloudstream3.utils.AppUtils.isCastApiAvailable
import com.lagradost.cloudstream3.utils.AppUtils.loadCache
import com.lagradost.cloudstream3.utils.AppUtils.loadResult
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.BackupUtils.setUpBackup
import com.lagradost.cloudstream3.utils.Coroutines.ioSafe
import com.lagradost.cloudstream3.utils.Coroutines.main
import com.lagradost.cloudstream3.utils.DataStore.getKey
import com.lagradost.cloudstream3.utils.DataStore.removeKey
import com.lagradost.cloudstream3.utils.DataStore.setKey
import com.lagradost.cloudstream3.utils.DataStoreHelper.migrateResumeWatching
import com.lagradost.cloudstream3.utils.DataStoreHelper.setViewPos
import com.lagradost.cloudstream3.utils.InAppUpdater.Companion.runAutoUpdate
import com.lagradost.cloudstream3.utils.UIHelper.changeStatusBarState
import com.lagradost.cloudstream3.utils.UIHelper.checkWrite
import com.lagradost.cloudstream3.utils.UIHelper.colorFromAttribute
import com.lagradost.cloudstream3.utils.UIHelper.getResourceColor
import com.lagradost.cloudstream3.utils.UIHelper.hideKeyboard
import com.lagradost.cloudstream3.utils.UIHelper.navigate
import com.lagradost.cloudstream3.utils.UIHelper.requestRW
import com.lagradost.nicehttp.Requests
import kotlinx.android.synthetic.main.activity_main.*
import kotlinx.android.synthetic.main.fragment_result_swipe.*
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.runBlocking
import kotlinx.coroutines.withContext
import java.io.File
import kotlin.concurrent.thread


const val VLC_PACKAGE = "org.videolan.vlc"
const val VLC_INTENT_ACTION_RESULT = "org.videolan.vlc.player.result"
val VLC_COMPONENT: ComponentName =
    ComponentName(VLC_PACKAGE, "org.videolan.vlc.gui.video.VideoPlayerActivity")
const val VLC_REQUEST_CODE = 42

const val VLC_FROM_START = -1
const val VLC_FROM_PROGRESS = -2
const val VLC_EXTRA_POSITION_OUT = "extra_position"
const val VLC_EXTRA_DURATION_OUT = "extra_duration"
const val VLC_LAST_ID_KEY = "vlc_last_open_id"

// Short name for requests client to make it nicer to use
var app = Requests().apply {
    defaultHeaders = mapOf("user-agent" to USER_AGENT)
}

class MainActivity : AppCompatActivity(), ColorPickerDialogListener {
    companion object {
        const val TAG = "MAINACT"
    }

    override fun onColorSelected(dialogId: Int, color: Int) {
        onColorSelectedEvent.invoke(Pair(dialogId, color))
    }

    override fun onDialogDismissed(dialogId: Int) {
        onDialogDismissedEvent.invoke(dialogId)
    }

    override fun onConfigurationChanged(newConfig: Configuration) {
        super.onConfigurationChanged(newConfig)
        updateLocale() // android fucks me by chaining lang when rotating the phone

        val navHostFragment =
            supportFragmentManager.findFragmentById(R.id.nav_host_fragment) as NavHostFragment
        navHostFragment.navController.currentDestination?.let { updateNavBar(it) }
    }

    private fun updateNavBar(destination: NavDestination) {
        this.hideKeyboard()

        // Fucks up anime info layout since that has its own layout
        cast_mini_controller_holder?.isVisible =
            !listOf(R.id.navigation_results, R.id.navigation_player).contains(destination.id)

        val isNavVisible = listOf(
            R.id.navigation_home,
            R.id.navigation_search,
            R.id.navigation_downloads,
            R.id.navigation_settings,
            R.id.navigation_download_child,
            R.id.navigation_subtitles,
            R.id.navigation_chrome_subtitles,
            R.id.navigation_settings_nginx,
            R.id.navigation_settings_player,
            R.id.navigation_settings_updates,
            R.id.navigation_settings_ui,
            R.id.navigation_settings_account,
            R.id.navigation_settings_lang,
        ).contains(destination.id)

        val landscape = when (resources.configuration.orientation) {
            Configuration.ORIENTATION_LANDSCAPE -> {
                true
            }
            Configuration.ORIENTATION_PORTRAIT -> {
                false
            }
            else -> {
                false
            }
        }

        nav_view?.isVisible = isNavVisible && !landscape
        nav_rail_view?.isVisible = isNavVisible && landscape
    }

    //private var mCastSession: CastSession? = null
    lateinit var mSessionManager: SessionManager
    private val mSessionManagerListener: SessionManagerListener<Session> by lazy { SessionManagerListenerImpl() }

    private inner class SessionManagerListenerImpl : SessionManagerListener<Session> {
        override fun onSessionStarting(session: Session) {
        }

        override fun onSessionStarted(session: Session, sessionId: String) {
            invalidateOptionsMenu()
        }

        override fun onSessionStartFailed(session: Session, i: Int) {
        }

        override fun onSessionEnding(session: Session) {
        }

        override fun onSessionResumed(session: Session, wasSuspended: Boolean) {
            invalidateOptionsMenu()
        }

        override fun onSessionResumeFailed(session: Session, i: Int) {
        }

        override fun onSessionSuspended(session: Session, i: Int) {
        }

        override fun onSessionEnded(session: Session, error: Int) {
        }

        override fun onSessionResuming(session: Session, s: String) {
        }
    }

    override fun onResume() {
        super.onResume()
        try {
            if (isCastApiAvailable()) {
                //mCastSession = mSessionManager.currentCastSession
                mSessionManager.addSessionManagerListener(mSessionManagerListener)
            }
        } catch (e: Exception) {
            logError(e)
        }
    }

    override fun onPause() {
        super.onPause()
        try {
            if (isCastApiAvailable()) {
                mSessionManager.removeSessionManagerListener(mSessionManagerListener)
                //mCastSession = null
            }
        } catch (e: Exception) {
            logError(e)
        }
    }


    override fun dispatchKeyEvent(event: KeyEvent?): Boolean {
        CommonActivity.dispatchKeyEvent(this, event)?.let {
            return it
        }
        return super.dispatchKeyEvent(event)
    }

    override fun onKeyDown(keyCode: Int, event: KeyEvent?): Boolean {
        CommonActivity.onKeyDown(this, keyCode, event)

        return super.onKeyDown(keyCode, event)
    }


    override fun onUserLeaveHint() {
        super.onUserLeaveHint()
        onUserLeaveHint(this)
    }

    override fun onBackPressed() {
        this.window?.navigationBarColor =
            this.colorFromAttribute(R.attr.primaryGrayBackground)
        this.updateLocale()
        backEvent.invoke(true)
        super.onBackPressed()
        this.updateLocale()
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        if (VLC_REQUEST_CODE == requestCode) {
            if (resultCode == RESULT_OK && data != null) {
                val pos: Long =
                    data.getLongExtra(
                        VLC_EXTRA_POSITION_OUT,
                        -1
                    ) //Last position in media when player exited
                val dur: Long =
                    data.getLongExtra(
                        VLC_EXTRA_DURATION_OUT,
                        -1
                    ) //Last position in media when player exited
                val id = getKey<Int>(VLC_LAST_ID_KEY)
                println("SET KEY $id at $pos / $dur")
                if (dur > 0 && pos > 0) {
                    setViewPos(id, pos, dur)
                }
                removeKey(VLC_LAST_ID_KEY)
                ResultFragment.updateUI()
            }
        }
        super.onActivityResult(requestCode, resultCode, data)
    }

    override fun onDestroy() {
        val broadcastIntent = Intent()
        broadcastIntent.action = "restart_service"
        broadcastIntent.setClass(this, VideoDownloadRestartReceiver::class.java)
        this.sendBroadcast(broadcastIntent)
        super.onDestroy()
    }

    override fun onNewIntent(intent: Intent?) {
        handleAppIntent(intent)
        super.onNewIntent(intent)
    }

    private fun handleAppIntent(intent: Intent?) {
        if (intent == null) return
        val str = intent.dataString
        loadCache()
        if (str != null) {
            if (str.contains(appString)) {
                for (api in OAuth2Apis) {
                    if (str.contains("/${api.redirectUrl}")) {
                        ioSafe {
                            Log.i(TAG, "handleAppIntent $str")
                            val isSuccessful = api.handleRedirect(str)

                            if (isSuccessful) {
                                Log.i(TAG, "authenticated ${api.name}")
                            } else {
                                Log.i(TAG, "failed to authenticate ${api.name}")
                            }

                            this.runOnUiThread {
                                try {
                                    showToast(
                                        this,
                                        getString(if (isSuccessful) R.string.authenticated_user else R.string.authenticated_user_fail).format(
                                            api.name
                                        )
                                    )
                                } catch (e: Exception) {
                                    logError(e) // format might fail
                                }
                            }
                        }
                    }
                }
            } else {
                if (str.startsWith(DOWNLOAD_NAVIGATE_TO)) {
                    this.navigate(R.id.navigation_downloads)
                } else {
                    for (api in apis) {
                        if (str.startsWith(api.mainUrl)) {
                            loadResult(str, api.name)
                            break
                        }
                    }
                }
            }
        }
    }

    private fun NavDestination.matchDestination(@IdRes destId: Int): Boolean =
        hierarchy.any { it.id == destId }

    private fun onNavDestinationSelected(item: MenuItem, navController: NavController): Boolean {
        val builder = NavOptions.Builder().setLaunchSingleTop(true).setRestoreState(true)
            .setEnterAnim(R.anim.enter_anim)
            .setExitAnim(R.anim.exit_anim)
            .setPopEnterAnim(R.anim.pop_enter)
            .setPopExitAnim(R.anim.pop_exit)
        if (item.order and Menu.CATEGORY_SECONDARY == 0) {
            builder.setPopUpTo(
                navController.graph.findStartDestination().id,
                inclusive = false,
                saveState = true
            )
        }
        val options = builder.build()
        return try {
            navController.navigate(item.itemId, null, options)
            navController.currentDestination?.matchDestination(item.itemId) == true
        } catch (e: IllegalArgumentException) {
            false
        }
    }

    fun test() {
        /*runBlocking {
            //https://test.api.anime-skip.com/graphiql
            val txt = app.get(
                "https://api.anime-skip.com/status",
                headers = mapOf("X-Client-ID" to "")
            )
            println("TEXT: $txt")
        }*/
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        // init accounts
        for (api in OAuth2accountApis) {
            api.init()
        }

        SearchResultBuilder.updateCache(this)

        val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
        val downloadFromGithub = try {
            settingsManager.getBoolean(getString(R.string.killswitch_key), true)
        } catch (e: Exception) {
            logError(e)
            false
        }

        // must give benenes to get beta providers
        val hasBenene = try {
            val count = settingsManager.getInt(getString(R.string.benene_count), 0)
            count > 30
        } catch (e: Exception) {
            e.printStackTrace()
            false
        }

        fun addNginxToJson(data: java.util.HashMap<String, ProvidersInfoJson>): java.util.HashMap<String, ProvidersInfoJson>? {
            try {
                val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
                val nginxUrl =
                    settingsManager.getString(getString(R.string.nginx_url_key), "nginx_url_key")
                        .toString()
                val nginxCredentials =
                    settingsManager.getString(
                        getString(R.string.nginx_credentials),
                        "nginx_credentials"
                    )
                        .toString()
                val StoredNginxProvider = NginxProvider()
                if (nginxUrl == "nginx_url_key" || nginxUrl == "") { // if key is default value, or empty:
                    data[StoredNginxProvider.javaClass.simpleName] = ProvidersInfoJson(
                        url = nginxUrl,
                        name = StoredNginxProvider.name,
                        status = PROVIDER_STATUS_DOWN,  // the provider will not be display
                        credentials = nginxCredentials
                    )
                } else {  // valid url
                    data[StoredNginxProvider.javaClass.simpleName] = ProvidersInfoJson(
                        url = nginxUrl,
                        name = StoredNginxProvider.name,
                        status = PROVIDER_STATUS_OK,
                        credentials = nginxCredentials
                    )
                }

                return data
            } catch (e: Exception) {
                logError(e)
                return data
            }
        }

        fun createNginxJson(): ProvidersInfoJson? { //java.util.HashMap<String, ProvidersInfoJson>
            return try {
                val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
                val nginxUrl =
                    settingsManager.getString(getString(R.string.nginx_url_key), "nginx_url_key")
                        .toString()
                val nginxCredentials = settingsManager.getString(
                    getString(R.string.nginx_credentials),
                    "nginx_credentials"
                ).toString()
                if (nginxUrl == "nginx_url_key" || nginxUrl == "") { // if key is default value or empty:
                    null // don't overwrite anything
                } else {
                    ProvidersInfoJson(
                        url = nginxUrl,
                        name = NginxProvider().name,
                        status = PROVIDER_STATUS_OK,
                        credentials = nginxCredentials
                    )
                }
            } catch (e: Exception) {
                logError(e)
                null
            }
        }

        // this pulls the latest data so ppl don't have to update to simply change provider url
        if (downloadFromGithub) {
            try {
                runBlocking {
                    withContext(Dispatchers.IO) {
                        try {
                            val cacheStr: String? = getKey(PROVIDER_STATUS_KEY)
                            val cache: HashMap<String, ProvidersInfoJson>? =
                                cacheStr?.let { tryParseJson(cacheStr) }
                            if (cache != null) {
                                // if cache is found then spin up a new request, but dont wait
                                main {
                                    try {
                                        val txt = app.get(PROVIDER_STATUS_URL).text
                                        val newCache =
                                            tryParseJson<HashMap<String, ProvidersInfoJson>>(txt)
                                        setKey(PROVIDER_STATUS_KEY, txt)
                                        MainAPI.overrideData = newCache // update all new providers

                                        val newUpdatedCache =
                                            newCache?.let { addNginxToJson(it) ?: it }

                                        for (api in apis) { // update current providers
                                            newUpdatedCache?.get(api.javaClass.simpleName)
                                                ?.let { data ->
                                                    api.overrideWithNewData(data)
                                                }
                                        }
                                    } catch (e: Exception) {
                                        logError(e)
                                    }
                                }
                                cache
                            } else {
                                // if it is the first time the user has used the app then wait for a request to update all providers
                                val txt = app.get(PROVIDER_STATUS_URL).text
                                setKey(PROVIDER_STATUS_KEY, txt)
                                val newCache = tryParseJson<HashMap<String, ProvidersInfoJson>>(txt)
                                newCache
                            }?.let { providersJsonMap ->
                                MainAPI.overrideData = providersJsonMap
                                val providersJsonMapUpdated = addNginxToJson(providersJsonMap)
                                    ?: providersJsonMap // if return null, use unchanged one
                                val acceptableProviders =
                                    providersJsonMapUpdated.filter { it.value.status == PROVIDER_STATUS_OK || it.value.status == PROVIDER_STATUS_SLOW }
                                        .map { it.key }.toSet()

                                val restrictedApis =
                                    if (hasBenene) providersJsonMapUpdated.filter { it.value.status == PROVIDER_STATUS_BETA_ONLY }
                                        .map { it.key }.toSet() else emptySet()

                                apis = allProviders.filter { api ->
                                    val name = api.javaClass.simpleName
                                    // if the provider does not exist in the json file, then it is shown by default
                                    !providersJsonMap.containsKey(name) || acceptableProviders.contains(
                                        name
                                    ) || restrictedApis.contains(name)
                                }
                            }
                        } catch (e: Exception) {
                            logError(e)
                        }
                    }
                }
            } catch (e: Exception) {
                apis = allProviders
                e.printStackTrace()
                logError(e)
            }
        } else {
            apis = allProviders
            try {
                val nginxProviderName = NginxProvider().name
                val nginxProviderIndex = apis.indexOf(APIHolder.getApiFromName(nginxProviderName))
                val createdJsonProvider = createNginxJson()
                if (createdJsonProvider != null) {
                    apis[nginxProviderIndex].overrideWithNewData(createdJsonProvider) // people will have access to it if they disable metadata check (they are not filtered)
                }
            } catch (e: Exception) {
                logError(e)
            }

        }

        loadThemes(this)
        updateLocale()
        app.initClient(this)
        super.onCreate(savedInstanceState)
        try {
            if (isCastApiAvailable()) {
                mSessionManager = CastContext.getSharedInstance(this).sessionManager
            }
        } catch (e: Exception) {
            logError(e)
        }

        window.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN)

        if (isTvSettings()) {
            setContentView(R.layout.activity_main_tv)
        } else {
            setContentView(R.layout.activity_main)
        }

        changeStatusBarState(isEmulatorSettings())

        //  val navView: BottomNavigationView = findViewById(R.id.nav_view)
        setUpBackup()

        CommonActivity.init(this)
        val navHostFragment =
            supportFragmentManager.findFragmentById(R.id.nav_host_fragment) as NavHostFragment
        val navController = navHostFragment.navController
        //val navController = findNavController(R.id.nav_host_fragment)

        /*navOptions = NavOptions.Builder()
            .setLaunchSingleTop(true)
            .setEnterAnim(R.anim.nav_enter_anim)
            .setExitAnim(R.anim.nav_exit_anim)
            .setPopEnterAnim(R.anim.nav_pop_enter)
            .setPopExitAnim(R.anim.nav_pop_exit)
            .setPopUpTo(navController.graph.startDestination, false)
            .build()*/
        nav_view?.setupWithNavController(navController)
        val nav_rail = findViewById<NavigationRailView?>(R.id.nav_rail_view)
        nav_rail?.setupWithNavController(navController)

        nav_rail?.setOnItemSelectedListener { item ->
            onNavDestinationSelected(
                item,
                navController
            )
        }
        nav_view?.setOnItemSelectedListener { item ->
            onNavDestinationSelected(
                item,
                navController
            )
        }
        navController.addOnDestinationChangedListener { _, destination, _ ->
            updateNavBar(destination)
        }

        loadCache()
        test()
        /*nav_view.setOnNavigationItemSelectedListener { item ->
            when (item.itemId) {
                R.id.navigation_home -> {
                    navController.navigate(R.id.navigation_home, null, navOptions)
                }
                R.id.navigation_search -> {
                    navController.navigate(R.id.navigation_search, null, navOptions)
                }
                R.id.navigation_downloads -> {
                    navController.navigate(R.id.navigation_downloads, null, navOptions)
                }
                R.id.navigation_settings -> {
                    navController.navigate(R.id.navigation_settings, null, navOptions)
                }
            }
            true
        }*/

        val rippleColor = ColorStateList.valueOf(getResourceColor(R.attr.colorPrimary, 0.1f))
        nav_view?.itemRippleColor = rippleColor
        nav_rail?.itemRippleColor = rippleColor
        nav_rail?.itemActiveIndicatorColor = rippleColor
        nav_view?.itemActiveIndicatorColor = rippleColor

        if (!checkWrite()) {
            requestRW()
            if (checkWrite()) return
        }
        CastButtonFactory.setUpMediaRouteButton(this, media_route_button)

        // THIS IS CURRENTLY REMOVED BECAUSE HIGHER VERS OF ANDROID NEEDS A NOTIFICATION
        //if (!VideoDownloadManager.isMyServiceRunning(this, VideoDownloadKeepAliveService::class.java)) {
        //    val mYourService = VideoDownloadKeepAliveService()
        //    val mServiceIntent = Intent(this, mYourService::class.java).putExtra(START_VALUE_KEY, RESTART_ALL_DOWNLOADS_AND_QUEUE)
        //    this.startService(mServiceIntent)
        //}
//settingsManager.getBoolean("disable_automatic_data_downloads", true) &&

        // TODO RETURN TO TRUE
        /*
        if (isUsingMobileData()) {
            Toast.makeText(this, "Downloads not resumed on mobile data", Toast.LENGTH_LONG).show()
        } else {
            val keys = getKeys(VideoDownloadManager.KEY_RESUME_PACKAGES)
            val resumePkg = keys.mapNotNull { k -> getKey<VideoDownloadManager.DownloadResumePackage>(k) }

            // To remove a bug where this is permanent
            removeKeys(VideoDownloadManager.KEY_RESUME_PACKAGES)

            for (pkg in resumePkg) { // ADD ALL CURRENT DOWNLOADS
                VideoDownloadManager.downloadFromResume(this, pkg, false)
            }

            // ADD QUEUE
            // array needed because List gets cast exception to linkedList for some unknown reason
            val resumeQueue =
                getKey<Array<VideoDownloadManager.DownloadQueueResumePackage>>(VideoDownloadManager.KEY_RESUME_QUEUE_PACKAGES)

            resumeQueue?.sortedBy { it.index }?.forEach {
                VideoDownloadManager.downloadFromResume(this, it.pkg)
            }
        }*/


        /*
        val castContext = CastContext.getSharedInstance(applicationContext)
         fun buildMediaQueueItem(video: String): MediaQueueItem {
           // val movieMetadata = MediaMetadata(MediaMetadata.MEDIA_TYPE_PHOTO)
            //movieMetadata.putString(MediaMetadata.KEY_TITLE, "CloudStream")
            val mediaInfo = MediaInfo.Builder(Uri.parse(video).toString())
                .setStreamType(MediaInfo.STREAM_TYPE_NONE)
                .setContentType(MimeTypes.IMAGE_JPEG)
               // .setMetadata(movieMetadata).build()
                .build()
            return MediaQueueItem.Builder(mediaInfo).build()
        }*/
        /*
        castContext.addCastStateListener { state ->
            if (state == CastState.CONNECTED) {
                println("TESTING")
                val isCasting = castContext?.sessionManager?.currentCastSession?.remoteMediaClient?.currentItem != null
                if(!isCasting) {
                    val castPlayer = CastPlayer(castContext)
                    println("LOAD ITEM")

                    castPlayer.loadItem(buildMediaQueueItem("https://cdn.discordapp.com/attachments/551382684560261121/730169809408622702/ChromecastLogo6.png"),0)
                }
            }
        }*/
        /*thread {
            createISO()
        }*/

        if (BuildConfig.DEBUG) {
            var providersAndroidManifestString = "Current androidmanifest should be:\n"
            for (api in allProviders) {
                providersAndroidManifestString += "<data android:scheme=\"https\" android:host=\"${
                    api.mainUrl.removePrefix(
                        "https://"
                    )
                }\" android:pathPrefix=\"/\"/>\n"
            }

            println(providersAndroidManifestString)
        }

        handleAppIntent(intent)

        thread {
            runAutoUpdate()
        }

        APIRepository.dubStatusActive = getApiDubstatusSettings()

        try {
            // this ensures that no unnecessary space is taken
            loadCache()
            File(filesDir, "exoplayer").deleteRecursively() // old cache
            File(cacheDir, "exoplayer").deleteOnExit()      // current cache
        } catch (e: Exception) {
            logError(e)
        }
        println("Loaded everything")

        ioSafe {
            migrateResumeWatching()
        }
/*
        val relativePath = (Environment.DIRECTORY_DOWNLOADS) + File.separatorChar
        val displayName = "output.dex" //""output.dex"
        val file =  getExternalFilesDir(null)?.absolutePath + File.separatorChar + displayName//"${Environment.getExternalStorageDirectory()}${File.separatorChar}$relativePath$displayName"
        println(file)

        val realFile = File(file)
        println("REAALFILE: ${realFile.exists()} at ${realFile.length()}"  )
        val src = ExtensionManager.getSourceFromDex(this, "com.example.testdex2.TestClassToDex", File(file))
        val output = src?.doMath()
        println("MASTER OUTPUT = $output")*/
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/MainAPI.kt
================================================
package com.lagradost.cloudstream3

import android.annotation.SuppressLint
import android.content.Context
import android.net.Uri
import android.util.Base64.encodeToString
import androidx.annotation.WorkerThread
import androidx.preference.PreferenceManager
import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.databind.DeserializationFeature
import com.fasterxml.jackson.databind.json.JsonMapper
import com.fasterxml.jackson.module.kotlin.KotlinModule
import com.lagradost.cloudstream3.animeproviders.*
import com.lagradost.cloudstream3.metaproviders.CrossTmdbProvider
import com.lagradost.cloudstream3.movieproviders.*
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.aniListApi
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.malApi
import com.lagradost.cloudstream3.ui.player.SubtitleData
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import okhttp3.Interceptor
import java.text.SimpleDateFormat
import java.util.*
import kotlin.math.absoluteValue

const val USER_AGENT =
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"

//val baseHeader = mapOf("User-Agent" to USER_AGENT)
val mapper = JsonMapper.builder().addModule(KotlinModule())
    .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false).build()!!

object APIHolder {
    val unixTime: Long
        get() = System.currentTimeMillis() / 1000L
    val unixTimeMS: Long
        get() = System.currentTimeMillis()

    private const val defProvider = 0

    val allProviders by lazy {
        arrayListOf(
            // Movie providers
            PelisplusProvider(),
            PelisplusHDProvider(),
            PeliSmartProvider(),
            MeloMovieProvider(), // Captcha for links
            DoramasYTProvider(),
            CinecalidadProvider(),
            CuevanaProvider(),
            EntrepeliculasyseriesProvider(),
            PelisflixProvider(),
            SeriesflixProvider(),
            IHaveNoTvProvider(), // Documentaries provider
            LookMovieProvider(), // RECAPTCHA (Please allow up to 5 seconds...)
            VMoveeProvider(),
            AllMoviesForYouProvider(),
            VidEmbedProvider(),
            VfFilmProvider(),
            VfSerieProvider(),
            FrenchStreamProvider(),
            AsianLoadProvider(),
            AsiaFlixProvider(), // restricted
            BflixProvider(),
            FmoviesToProvider(),
            SflixProProvider(),
            FilmanProvider(),
            SflixProvider(),
            DopeboxProvider(),
            SolarmovieProvider(),
            PinoyMoviePediaProvider(),
            PinoyHDXyzProvider(),
            PinoyMoviesEsProvider(),
            TrailersTwoProvider(),
            TwoEmbedProvider(),
            DramaSeeProvider(),
            WatchAsianProvider(),
	        DramaidProvider(),
            KdramaHoodProvider(),
            AkwamProvider(),
            MyCimaProvider(),
            EgyBestProvider(),
            FaselHDProvider(),
            SoaptwoDayProvider(),
            HDMProvider(),// disabled due to cloudflare
            TheFlixToProvider(),
            StreamingcommunityProvider(),
            TantifilmProvider(),
            HDMovie5(),
            RebahinProvider(),
            LayarKacaProvider(),

            // Metadata providers
            //TmdbProvider(),
            CrossTmdbProvider(),
            ApiMDBProvider(),

            // Anime providers
            WatchCartoonOnlineProvider(),
            GogoanimeProvider(),
            AllAnimeProvider(),
            AnimekisaProvider(),
            //ShiroProvider(), // v2 fucked me
            AnimeFlickProvider(),
            AnimeflvnetProvider(),
            TenshiProvider(),
            WcoProvider(),
            AnimePaheProvider(),
            DreamSubProvider(),
            NineAnimeProvider(),
            AnimeWorldProvider(),
            ZoroProvider(),
            DubbedAnimeProvider(),
            MonoschinosProvider(),
            KawaiifuProvider(), // disabled due to cloudflare
	        NeonimeProvider(),
            KuramanimeProvider(),
            OploverzProvider(),
            GomunimeProvider(),
            NontonAnimeIDProvider(),
            KuronimeProvider(),
            //MultiAnimeProvider(),
	        NginxProvider(),
            OlgplyProvider(),
        )
    }

    var apis: List<MainAPI> = arrayListOf()
    private var apiMap: Map<String, Int>? = null

    private fun initMap() {
        if (apiMap == null)
            apiMap = apis.mapIndexed { index, api -> api.name to index }.toMap()
    }

    fun getApiFromName(apiName: String?): MainAPI {
        return getApiFromNameNull(apiName) ?: apis[defProvider]
    }

    fun getApiFromNameNull(apiName: String?): MainAPI? {
        if (apiName == null) return null
        initMap()

        return apiMap?.get(apiName)?.let { apis.getOrNull(it) }
    }

    fun getApiFromUrlNull(url: String?): MainAPI? {
        if (url == null) return null
        for (api in allProviders) {
            if (url.startsWith(api.mainUrl))
                return api
        }
        return null
    }

    fun getLoadResponseIdFromUrl(url : String, apiName: String) : Int {
        return url.replace(getApiFromName(apiName).mainUrl, "").replace("/", "").hashCode()
    }

    fun LoadResponse.getId(): Int {
        return getLoadResponseIdFromUrl(url,apiName)
    }

    /**
     * Gets the website captcha token
     * discovered originally by https://github.com/ahmedgamal17
     * optimized by https://github.com/justfoolingaround
     *
     * @param url the main url, likely the same website you found the key from.
     * @param key used to fill https://www.google.com/recaptcha/api.js?render=....
     *
     * @param referer the referer for the google.com/recaptcha/api.js... request, optional.
     * */

    // Try document.select("script[src*=https://www.google.com/recaptcha/api.js?render=]").attr("src").substringAfter("render=")
    // To get the key
    suspend fun getCaptchaToken(url: String, key: String, referer: String? = null): String? {
        val uri = Uri.parse(url)
        val domain = encodeToString(
            (uri.scheme + "://" + uri.host + ":443").encodeToByteArray(),
            0
        ).replace("\n", "").replace("=", ".")

        val vToken =
            app.get(
                "https://www.google.com/recaptcha/api.js?render=$key",
                referer = referer,
                cacheTime = 0
            )
                .text
                .substringAfter("releases/")
                .substringBefore("/")
        val recapToken =
            app.get("https://www.google.com/recaptcha/api2/anchor?ar=1&hl=en&size=invisible&cb=cs3&k=$key&co=$domain&v=$vToken")
                .document
                .selectFirst("#recaptcha-token")?.attr("value")
        if (recapToken != null) {
            return app.post(
                "https://www.google.com/recaptcha/api2/reload?k=$key",
                data = mapOf(
                    "v" to vToken,
                    "k" to key,
                    "c" to recapToken,
                    "co" to domain,
                    "sa" to "",
                    "reason" to "q"
                ), cacheTime = 0
            ).text
                .substringAfter("rresp\",\"")
                .substringBefore("\"")
        }
        return null
    }

    fun Context.getApiSettings(): HashSet<String> {
        //val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)

        val hashSet = HashSet<String>()
        val activeLangs = getApiProviderLangSettings()
        hashSet.addAll(apis.filter { activeLangs.contains(it.lang) }.map { it.name })

        /*val set = settingsManager.getStringSet(
            this.getString(R.string.search_providers_list_key),
            hashSet
        )?.toHashSet() ?: hashSet

        val list = HashSet<String>()
        for (name in set) {
            val api = getApiFromNameNull(name) ?: continue
            if (activeLangs.contains(api.lang)) {
                list.add(name)
            }
        }*/
        //if (list.isEmpty()) return hashSet
        //return list
        return hashSet
    }

    fun Context.getApiDubstatusSettings(): HashSet<DubStatus> {
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
        val hashSet = HashSet<DubStatus>()
        hashSet.addAll(DubStatus.values())
        val list = settingsManager.getStringSet(
            this.getString(R.string.display_sub_key),
            hashSet.map { it.name }.toMutableSet()
        ) ?: return hashSet

        val names = DubStatus.values().map { it.name }.toHashSet()
        //if(realSet.isEmpty()) return hashSet

        return list.filter { names.contains(it) }.map { DubStatus.valueOf(it) }.toHashSet()
    }

    fun Context.getApiProviderLangSettings(): HashSet<String> {
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
        val hashSet = HashSet<String>()
        hashSet.add("en") // def is only en
        val list = settingsManager.getStringSet(
            this.getString(R.string.provider_lang_key),
            hashSet.toMutableSet()
        )

        if (list.isNullOrEmpty()) return hashSet
        return list.toHashSet()
    }

    fun Context.getApiTypeSettings(): HashSet<TvType> {
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
        val hashSet = HashSet<TvType>()
        hashSet.addAll(TvType.values())
        val list = settingsManager.getStringSet(
            this.getString(R.string.search_types_list_key),
            hashSet.map { it.name }.toMutableSet()
        )

        if (list.isNullOrEmpty()) return hashSet

        val names = TvType.values().map { it.name }.toHashSet()
        val realSet = list.filter { names.contains(it) }.map { TvType.valueOf(it) }.toHashSet()
        if (realSet.isEmpty()) return hashSet

        return realSet
    }

    fun Context.filterProviderByPreferredMedia(hasHomePageIsRequired: Boolean = true): List<MainAPI> {
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
        val currentPrefMedia =
            settingsManager.getInt(this.getString(R.string.prefer_media_type_key), 0)
        val langs = this.getApiProviderLangSettings()
        val allApis = apis.filter { langs.contains(it.lang) }
            .filter { api -> api.hasMainPage || !hasHomePageIsRequired }
        return if (currentPrefMedia < 1) {
            allApis
        } else {
            // Filter API depending on preferred media type
            val listEnumAnime = listOf(TvType.Anime, TvType.AnimeMovie, TvType.OVA)
            val listEnumMovieTv =
                listOf(TvType.Movie, TvType.TvSeries, TvType.Cartoon, TvType.AsianDrama)
            val listEnumDoc = listOf(TvType.Documentary)
            val mediaTypeList = when (currentPrefMedia) {
                2 -> listEnumAnime
                3 -> listEnumDoc
                else -> listEnumMovieTv
            }
            allApis.filter { api -> api.supportedTypes.any { it in mediaTypeList } }
        }
    }
}


/*
0 = Site not good
1 = All good
2 = Slow, heavy traffic
3 = restricted, must donate 30 benenes to use
 */
const val PROVIDER_STATUS_KEY = "PROVIDER_STATUS_KEY"
const val PROVIDER_STATUS_URL =
    "https://raw.githubusercontent.com/LagradOst/CloudStream-3/master/docs/providers.json"
const val PROVIDER_STATUS_BETA_ONLY = 3
const val PROVIDER_STATUS_SLOW = 2
const val PROVIDER_STATUS_OK = 1
const val PROVIDER_STATUS_DOWN = 0

data class ProvidersInfoJson(
    @JsonProperty("name") var name: String,
    @JsonProperty("url") var url: String,
    @JsonProperty("credentials") var credentials: String? = null,
    @JsonProperty("status") var status: Int,
)

/**Every provider will **not** have try catch built in, so handle exceptions when calling these functions*/
abstract class MainAPI {
    companion object {
        var overrideData: HashMap<String, ProvidersInfoJson>? = null
    }

    fun overrideWithNewData(data: ProvidersInfoJson) {
        this.name = data.name
        this.mainUrl = data.url
	    this.storedCredentials = data.credentials
    }

    init {
        overrideData?.get(this.javaClass.simpleName)?.let { data ->
            overrideWithNewData(data)
        }
    }

    open var name = "NONE"
    open var mainUrl = "NONE"
    open var storedCredentials: String? = null

    //open val uniqueId : Int by lazy { this.name.hashCode() } // in case of duplicate providers you can have a shared id

    open val lang = "en" // ISO_639_1 check SubtitleHelper

    /**If link is stored in the "data" string, so links can be instantly loaded*/
    open val instantLinkLoading = false

    /**Set false if links require referer or for some reason cant be played on a chromecast*/
    open val hasChromecastSupport = true

    /**If all links are encrypted then set this to false*/
    open val hasDownloadSupport = true

    /**Used for testing and can be used to disable the providers if WebView is not available*/
    open val usesWebView = false

    open val hasMainPage = false
    open val hasQuickSearch = false

    open val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
        TvType.Cartoon,
        TvType.Anime,
        TvType.OVA,
    )

    open val vpnStatus = VPNStatus.None
    open val providerType = ProviderType.DirectProvider

    @WorkerThread
    open suspend fun getMainPage(): HomePageResponse? {
        throw NotImplementedError()
    }

    @WorkerThread
    open suspend fun search(query: String): List<SearchResponse>? {
        throw NotImplementedError()
    }

    @WorkerThread
    open suspend fun quickSearch(query: String): List<SearchResponse>? {
        throw NotImplementedError()
    }

    @WorkerThread
    /**
     * Based on data from search() or getMainPage() it generates a LoadResponse,
     * basically opening the info page from a link.
     * */
    open suspend fun load(url: String): LoadResponse? {
        throw NotImplementedError()
    }

    /**
     * Largely redundant feature for most providers.
     *
     * This job runs in the background when a link is playing in exoplayer.
     * First implemented to do polling for sflix to keep the link from getting expired.
     *
     * This function might be updated to include exoplayer timestamps etc in the future
     * if the need arises.
     * */
    @WorkerThread
    open suspend fun extractorVerifierJob(extractorData: String?) {
        throw NotImplementedError()
    }

    /**Callback is fired once a link is found, will return true if method is executed successfully*/
    @WorkerThread
    open suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        throw NotImplementedError()
    }

    /** An okhttp interceptor for used in OkHttpDataSource */
    open fun getVideoInterceptor(extractorLink: ExtractorLink): Interceptor? {
        return null
    }
}

/** Might need a different implementation for desktop*/
@SuppressLint("NewApi")
fun base64Decode(string: String): String {
    return String(base64DecodeArray(string), Charsets.ISO_8859_1)
}

@SuppressLint("NewApi")
fun base64DecodeArray(string: String): ByteArray {
    return try {
        android.util.Base64.decode(string, android.util.Base64.DEFAULT)
    } catch (e: Exception) {
        Base64.getDecoder().decode(string)
    }
}

@SuppressLint("NewApi")
fun base64Encode(array: ByteArray): String {
    return try {
        String(android.util.Base64.encode(array, android.util.Base64.NO_WRAP), Charsets.ISO_8859_1)
    } catch (e: Exception) {
        String(Base64.getEncoder().encode(array))
    }
}

class ErrorLoadingException(message: String? = null) : Exception(message)

fun parseRating(ratingString: String?): Int? {
    if (ratingString == null) return null
    val floatRating = ratingString.toFloatOrNull() ?: return null
    return (floatRating * 10).toInt()
}

fun MainAPI.fixUrlNull(url: String?): String? {
    if (url.isNullOrEmpty()) {
        return null
    }
    return fixUrl(url)
}

fun MainAPI.fixUrl(url: String): String {
    if (url.startsWith("http")) {
        return url
    }
    if (url.isEmpty()) {
        return ""
    }

    val startsWithNoHttp = url.startsWith("//")
    if (startsWithNoHttp) {
        return "https:$url"
    } else {
        if (url.startsWith('/')) {
            return mainUrl + url
        }
        return "$mainUrl/$url"
    }
}

fun sortUrls(urls: Set<ExtractorLink>): List<ExtractorLink> {
    return urls.sortedBy { t -> -t.quality }
}

fun sortSubs(subs: Set<SubtitleData>): List<SubtitleData> {
    return subs.sortedBy { it.name }
}

fun capitalizeString(str: String): String {
    return capitalizeStringNullable(str) ?: str
}

fun capitalizeStringNullable(str: String?): String? {
    if (str == null)
        return null
    return try {
        str.replaceFirstChar { if (it.isLowerCase()) it.titlecase(Locale.getDefault()) else it.toString() }
    } catch (e: Exception) {
        str
    }
}

/** https://www.imdb.com/title/tt2861424/ -> tt2861424 */
fun imdbUrlToId(url: String): String? {
    return Regex("/title/(tt[0-9]*)").find(url)?.groupValues?.get(1)
        ?: Regex("tt[0-9]{5,}").find(url)?.groupValues?.get(0)
}

fun imdbUrlToIdNullable(url: String?): String? {
    if (url == null) return null
    return imdbUrlToId(url)
}

enum class ProviderType {
    // When data is fetched from a 3rd party site like imdb
    MetaProvider,

    // When all data is from the site
    DirectProvider,
}

enum class VPNStatus {
    None,
    MightBeNeeded,
    Torrent,
}

enum class ShowStatus {
    Completed,
    Ongoing,
}

enum class DubStatus(val id: Int) {
    Dubbed(1),
    Subbed(0),
}

enum class TvType {
    Movie,
    AnimeMovie,
    TvSeries,
    Cartoon,
    Anime,
    OVA,
    Torrent,
    Documentary,
    AsianDrama,
}

// IN CASE OF FUTURE ANIME MOVIE OR SMTH
fun TvType.isMovieType(): Boolean {
    return this == TvType.Movie || this == TvType.AnimeMovie || this == TvType.Torrent
}

// returns if the type has an anime opening
fun TvType.isAnimeOp(): Boolean {
    return this == TvType.Anime || this == TvType.OVA
}

data class SubtitleFile(val lang: String, val url: String)

class HomePageResponse(
    val items: List<HomePageList>
)

class HomePageList(
    val name: String,
    var list: List<SearchResponse>
)

enum class SearchQuality {
    //https://en.wikipedia.org/wiki/Pirated_movie_release_types
    Cam,
    CamRip,
    HdCam,
    Telesync, // TS
    WorkPrint,
    Telecine, // TC
    HQ,
    HD,
    HDR, // high dynamic range
    BlueRay,
    DVD,
    SD,
    FourK,
    UHD,
    SDR, // standard dynamic range
    WebRip
}

/**Add anything to here if you find a site that uses some specific naming convention*/
fun getQualityFromString(string: String?): SearchQuality? {
    val check = (string ?: return null).trim().lowercase().replace(" ", "")

    return when (check) {
        "cam" -> SearchQuality.Cam
        "camrip" -> SearchQuality.CamRip
        "hdcam" -> SearchQuality.HdCam
        "hdtc" -> SearchQuality.HdCam
        "hdts" -> SearchQuality.HdCam
        "highquality" -> SearchQuality.HQ
        "hq" -> SearchQuality.HQ
        "highdefinition" -> SearchQuality.HD
        "hdrip" -> SearchQuality.HD
        "hd" -> SearchQuality.HD
        "hdtv" -> SearchQuality.HD
        "rip" -> SearchQuality.CamRip
        "telecine" -> SearchQuality.Telecine
        "tc" -> SearchQuality.Telecine
        "telesync" -> SearchQuality.Telesync
        "ts" -> SearchQuality.Telesync
        "dvd" -> SearchQuality.DVD
        "dvdrip" -> SearchQuality.DVD
        "dvdscr" -> SearchQuality.DVD
        "blueray" -> SearchQuality.BlueRay
        "bluray" -> SearchQuality.BlueRay
        "blu" -> SearchQuality.BlueRay
        "fhd" -> SearchQuality.HD
        "br" -> SearchQuality.BlueRay
        "standard" -> SearchQuality.SD
        "sd" -> SearchQuality.SD
        "4k" -> SearchQuality.FourK
        "uhd" -> SearchQuality.UHD // may also be 4k or 8k
        "blue" -> SearchQuality.BlueRay
        "wp" -> SearchQuality.WorkPrint
        "workprint" -> SearchQuality.WorkPrint
        "webrip" -> SearchQuality.WebRip
        "webdl" -> SearchQuality.WebRip
        "web" -> SearchQuality.WebRip
        "hdr" -> SearchQuality.HDR
        "sdr" -> SearchQuality.SDR
        else -> null
    }
}

interface SearchResponse {
    val name: String
    val url: String
    val apiName: String
    var type: TvType?
    var posterUrl: String?
    var posterHeaders: Map<String, String>?
    var id: Int?
    var quality: SearchQuality?
}

fun MainAPI.newMovieSearchResponse(
    name: String,
    url: String,
    type: TvType = TvType.Movie,
    fix: Boolean = true,
    initializer: MovieSearchResponse.() -> Unit = { },
): MovieSearchResponse {
    val builder = MovieSearchResponse(name, if (fix) fixUrl(url) else url, this.name, type)
    builder.initializer()

    return builder
}

fun MainAPI.newTvSeriesSearchResponse(
    name: String,
    url: String,
    type: TvType = TvType.TvSeries,
    fix: Boolean = true,
    initializer: TvSeriesSearchResponse.() -> Unit = { },
): TvSeriesSearchResponse {
    val builder = TvSeriesSearchResponse(name, if (fix) fixUrl(url) else url, this.name, type)
    builder.initializer()

    return builder
}


fun MainAPI.newAnimeSearchResponse(
    name: String,
    url: String,
    type: TvType = TvType.Anime,
    fix: Boolean = true,
    initializer: AnimeSearchResponse.() -> Unit = { },
): AnimeSearchResponse {
    val builder = AnimeSearchResponse(name, if (fix) fixUrl(url) else url, this.name, type)
    builder.initializer()

    return builder
}

fun SearchResponse.addQuality(quality: String) {
    this.quality = getQualityFromString(quality)
}

fun SearchResponse.addPoster(url: String?, headers: Map<String, String>? = null) {
    this.posterUrl = url
    this.posterHeaders = headers
}

fun LoadResponse.addPoster(url: String?, headers: Map<String, String>? = null) {
    this.posterUrl = url
    this.posterHeaders = headers
}

enum class ActorRole {
    Main,
    Supporting,
    Background,
}

data class Actor(
    val name: String,
    val image: String? = null,
)

data class ActorData(
    val actor: Actor,
    val role: ActorRole? = null,
    val roleString: String? = null,
    val voiceActor: Actor? = null,
)

data class AnimeSearchResponse(
    override val name: String,
    override val url: String,
    override val apiName: String,
    override var type: TvType? = null,

    override var posterUrl: String? = null,
    var year: Int? = null,
    var dubStatus: EnumSet<DubStatus>? = null,

    var otherName: String? = null,
    var episodes: MutableMap<DubStatus, Int> = mutableMapOf(),

    override var id: Int? = null,
    override var quality: SearchQuality? = null,
    override var posterHeaders: Map<String, String>? = null,
) : SearchResponse

fun AnimeSearchResponse.addDubStatus(status: DubStatus, episodes: Int? = null) {
    this.dubStatus = dubStatus?.also { it.add(status) } ?: EnumSet.of(status)
    if (this.type?.isMovieType() != true)
        if (episodes != null && episodes > 0)
            this.episodes[status] = episodes
}

fun AnimeSearchResponse.addDubStatus(isDub: Boolean, episodes: Int? = null) {
    addDubStatus(if (isDub) DubStatus.Dubbed else DubStatus.Subbed, episodes)
}

fun AnimeSearchResponse.addDub(episodes: Int?) {
    if(episodes == null || episodes <= 0) return
    addDubStatus(DubStatus.Dubbed, episodes)
}

fun AnimeSearchResponse.addSub(episodes: Int?) {
    if(episodes == null || episodes <= 0) return
    addDubStatus(DubStatus.Subbed, episodes)
}

fun AnimeSearchResponse.addDubStatus(
    dubExist: Boolean,
    subExist: Boolean,
    dubEpisodes: Int? = null,
    subEpisodes: Int? = null
) {
    if (dubExist)
        addDubStatus(DubStatus.Dubbed, dubEpisodes)

    if (subExist)
        addDubStatus(DubStatus.Subbed, subEpisodes)
}

fun AnimeSearchResponse.addDubStatus(status: String, episodes: Int? = null) {
    if (status.contains("(dub)", ignoreCase = true)) {
        addDubStatus(DubStatus.Dubbed)
    } else if (status.contains("(sub)", ignoreCase = true)) {
        addDubStatus(DubStatus.Subbed)
    }
}

data class TorrentSearchResponse(
    override val name: String,
    override val url: String,
    override val apiName: String,
    override var type: TvType?,

    override var posterUrl: String?,
    override var id: Int? = null,
    override var quality: SearchQuality? = null,
    override var posterHeaders: Map<String, String>? = null,
) : SearchResponse

data class MovieSearchResponse(
    override val name: String,
    override val url: String,
    override val apiName: String,
    override var type: TvType? = null,

    override var posterUrl: String? = null,
    val year: Int? = null,
    override var id: Int? = null,
    override var quality: SearchQuality? = null,
    override var posterHeaders: Map<String, String>? = null,
) : SearchResponse

data class TvSeriesSearchResponse(
    override val name: String,
    override val url: String,
    override val apiName: String,
    override var type: TvType? = null,

    override var posterUrl: String? = null,
    val year: Int? = null,
    val episodes: Int? = null,
    override var id: Int? = null,
    override var quality: SearchQuality? = null,
    override var posterHeaders: Map<String, String>? = null,
) : SearchResponse

interface LoadResponse {
    var name: String
    var url: String
    var apiName: String
    var type: TvType
    var posterUrl: String?
    var year: Int?
    var plot: String?
    var rating: Int? // 1-1000
    var tags: List<String>?
    var duration: Int? // in minutes
    var trailers: List<String>?
    var recommendations: List<SearchResponse>?
    var actors: List<ActorData>?
    var comingSoon: Boolean
    var syncData: MutableMap<String, String>
    var posterHeaders: Map<String, String>?

    companion object {
        private val malIdPrefix = malApi.idPrefix
        private val aniListIdPrefix = aniListApi.idPrefix

        @JvmName("addActorNames")
        fun LoadResponse.addActors(actors: List<String>?) {
            this.actors = actors?.map { ActorData(Actor(it)) }
        }

        @JvmName("addActors")
        fun LoadResponse.addActors(actors: List<Pair<Actor, String?>>?) {
            this.actors = actors?.map { (actor, role) -> ActorData(actor, roleString = role) }
        }

        @JvmName("addActorsRole")
        fun LoadResponse.addActors(actors: List<Pair<Actor, ActorRole?>>?) {
            this.actors = actors?.map { (actor, role) -> ActorData(actor, role = role) }
        }

        @JvmName("addActorsOnly")
        fun LoadResponse.addActors(actors: List<Actor>?) {
            this.actors = actors?.map { actor -> ActorData(actor) }
        }

        fun LoadResponse.addMalId(id: Int?) {
            this.syncData[malIdPrefix] = (id ?: return).toString()
        }

        fun LoadResponse.addAniListId(id: Int?) {
            this.syncData[aniListIdPrefix] = (id ?: return).toString()
        }

        fun LoadResponse.addImdbUrl(url: String?) {
            addImdbId(imdbUrlToIdNullable(url))
        }

        /**better to set trailers directly instead of calling this multiple times*/
        fun LoadResponse.addTrailer(trailerUrl: String?) {
            if (trailerUrl == null) return
            if (this.trailers == null) {
                this.trailers = listOf(trailerUrl)
            } else {
                val update = this.trailers?.toMutableList()
                update?.add(trailerUrl)
                this.trailers = update
            }
        }

        fun LoadResponse.addImdbId(id: String?) {
            // TODO add imdb sync
        }

        fun LoadResponse.addTrackId(id: String?) {
            // TODO add trackt sync
        }

        fun LoadResponse.addkitsuId(id: String?) {
            // TODO add kitsu sync
        }

        fun LoadResponse.addTMDbId(id: String?) {
            // TODO add TMDb sync
        }

        fun LoadResponse.addRating(text: String?) {
            addRating(text.toRatingInt())
        }

        fun LoadResponse.addRating(value: Int?) {
            if (value ?: return < 0 || value > 1000) {
                return
            }
            this.rating = value
        }

        fun LoadResponse.addDuration(input: String?) {
            val cleanInput = input?.trim()?.replace(" ", "") ?: return
            Regex("([0-9]*)h.*?([0-9]*)m").find(cleanInput)?.groupValues?.let { values ->
                if (values.size == 3) {
                    val hours = values[1].toIntOrNull()
                    val minutes = values[2].toIntOrNull()
                    this.duration = if (minutes != null && hours != null) {
                        hours * 60 + minutes
                    } else null
                    if (this.duration != null) return
                }
            }
            Regex("([0-9]*)m").find(cleanInput)?.groupValues?.let { values ->
                if (values.size == 2) {
                    this.duration = values[1].toIntOrNull()
                    if (this.duration != null) return
                }
            }
        }
    }
}

fun LoadResponse?.isEpisodeBased(): Boolean {
    if (this == null) return false
    return (this is AnimeLoadResponse || this is TvSeriesLoadResponse) && this.type.isEpisodeBased()
}

fun LoadResponse?.isAnimeBased(): Boolean {
    if (this == null) return false
    return (this.type == TvType.Anime || this.type == TvType.OVA) // && (this is AnimeLoadResponse)
}

fun TvType?.isEpisodeBased(): Boolean {
    if (this == null) return false
    return (this == TvType.TvSeries || this == TvType.Anime)
}

data class TorrentLoadResponse(
    override var name: String,
    override var url: String,
    override var apiName: String,
    var magnet: String?,
    var torrent: String?,
    override var plot: String?,
    override var type: TvType = TvType.Torrent,
    override var posterUrl: String? = null,
    override var year: Int? = null,
    override var rating: Int? = null,
    override var tags: List<String>? = null,
    override var duration: Int? = null,
    override var trailers: List<String>? = null,
    override var recommendations: List<SearchResponse>? = null,
    override var actors: List<ActorData>? = null,
    override var comingSoon: Boolean = false,
    override var syncData: MutableMap<String, String> = mutableMapOf(),
    override var posterHeaders: Map<String, String>? = null,
) : LoadResponse

data class AnimeLoadResponse(
    var engName: String? = null,
    var japName: String? = null,
    override var name: String,
    override var url: String,
    override var apiName: String,
    override var type: TvType,

    override var posterUrl: String? = null,
    override var year: Int? = null,

    var episodes: MutableMap<DubStatus, List<Episode>> = mutableMapOf(),
    var showStatus: ShowStatus? = null,

    override var plot: String? = null,
    override var tags: List<String>? = null,
    var synonyms: List<String>? = null,

    override var rating: Int? = null,
    override var duration: Int? = null,
    override var trailers: List<String>? = null,
    override var recommendations: List<SearchResponse>? = null,
    override var actors: List<ActorData>? = null,
    override var comingSoon: Boolean = false,
    override var syncData: MutableMap<String, String> = mutableMapOf(),
    override var posterHeaders: Map<String, String>? = null,
) : LoadResponse

fun AnimeLoadResponse.addEpisodes(status: DubStatus, episodes: List<Episode>?) {
    if (episodes == null) return
    this.episodes[status] = episodes
}

fun MainAPI.newAnimeLoadResponse(
    name: String,
    url: String,
    type: TvType,
    comingSoonIfNone: Boolean = true,
    initializer: AnimeLoadResponse.() -> Unit = { },
): AnimeLoadResponse {
    val builder = AnimeLoadResponse(name = name, url = url, apiName = this.name, type = type)
    builder.initializer()
    if (comingSoonIfNone) {
        builder.comingSoon = true
        for (key in builder.episodes.keys)
            if (!builder.episodes[key].isNullOrEmpty()) {
                builder.comingSoon = false
                break
            }
    }
    return builder
}

data class MovieLoadResponse(
    override var name: String,
    override var url: String,
    override var apiName: String,
    override var type: TvType,
    var dataUrl: String,

    override var posterUrl: String? = null,
    override var year: Int? = null,
    override var plot: String? = null,

    override var rating: Int? = null,
    override var tags: List<String>? = null,
    override var duration: Int? = null,
    override var trailers: List<String>? = null,
    override var recommendations: List<SearchResponse>? = null,
    override var actors: List<ActorData>? = null,
    override var comingSoon: Boolean = false,
    override var syncData: MutableMap<String, String> = mutableMapOf(),
    override var posterHeaders: Map<String, String>? = null,
) : LoadResponse

fun <T> MainAPI.newMovieLoadResponse(
    name: String,
    url: String,
    type: TvType,
    data: T?,
    initializer: MovieLoadResponse.() -> Unit = { }
): MovieLoadResponse {
    // just in case
    if (data is String) return newMovieLoadResponse(
        name,
        url,
        type,
        dataUrl = data,
        initializer = initializer
    )
    val dataUrl = data?.toJson() ?: ""
    val builder = MovieLoadResponse(
        name = name,
        url = url,
        apiName = this.name,
        type = type,
        dataUrl = dataUrl,
        comingSoon = dataUrl.isBlank()
    )
    builder.initializer()
    return builder
}

fun MainAPI.newMovieLoadResponse(
    name: String,
    url: String,
    type: TvType,
    dataUrl: String,
    initializer: MovieLoadResponse.() -> Unit = { }
): MovieLoadResponse {
    val builder = MovieLoadResponse(
        name = name,
        url = url,
        apiName = this.name,
        type = type,
        dataUrl = dataUrl,
        comingSoon = dataUrl.isBlank()
    )
    builder.initializer()
    return builder
}

data class Episode(
    var data: String,
    var name: String? = null,
    var season: Int? = null,
    var episode: Int? = null,
    var posterUrl: String? = null,
    var rating: Int? = null,
    var description: String? = null,
    var date: Long? = null,
)

fun Episode.addDate(date: String?, format: String = "yyyy-MM-dd") {
    try {
        this.date = SimpleDateFormat(format)?.parse(date ?: return)?.time
    } catch (e: Exception) {
        logError(e)
    }
}

fun Episode.addDate(date: Date?) {
    this.date = date?.time
}

fun MainAPI.newEpisode(
    url: String,
    initializer: Episode.() -> Unit = { },
    fix: Boolean = true,
): Episode {
    val builder = Episode(
        data = if (fix) fixUrl(url) else url
    )
    builder.initializer()
    return builder
}

fun <T> MainAPI.newEpisode(
    data: T,
    initializer: Episode.() -> Unit = { }
): Episode {
    if (data is String) return newEpisode(
        url = data,
        initializer = initializer
    ) // just in case java is wack

    val builder = Episode(
        data = data?.toJson() ?: throw ErrorLoadingException("invalid newEpisode")
    )
    builder.initializer()
    return builder
}

data class TvSeriesLoadResponse(
    override var name: String,
    override var url: String,
    override var apiName: String,
    override var type: TvType,
    var episodes: List<Episode>,

    override var posterUrl: String? = null,
    override var year: Int? = null,
    override var plot: String? = null,

    var showStatus: ShowStatus? = null,
    override var rating: Int? = null,
    override var tags: List<String>? = null,
    override var duration: Int? = null,
    override var trailers: List<String>? = null,
    override var recommendations: List<SearchResponse>? = null,
    override var actors: List<ActorData>? = null,
    override var comingSoon: Boolean = false,
    override var syncData: MutableMap<String, String> = mutableMapOf(),
    override var posterHeaders: Map<String, String>? = null,
) : LoadResponse

fun MainAPI.newTvSeriesLoadResponse(
    name: String,
    url: String,
    type: TvType,
    episodes: List<Episode>,
    initializer: TvSeriesLoadResponse.() -> Unit = { }
): TvSeriesLoadResponse {
    val builder = TvSeriesLoadResponse(
        name = name,
        url = url,
        apiName = this.name,
        type = type,
        episodes = episodes,
        comingSoon = episodes.isEmpty(),
    )
    builder.initializer()
    return builder
}

fun fetchUrls(text: String?): List<String> {
    if (text.isNullOrEmpty()) {
        return listOf()
    }
    val linkRegex =
        Regex("""(https?://(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*))""")
    return linkRegex.findAll(text).map { it.value.trim().removeSurrounding("\"") }.toList()
}

fun String?.toRatingInt(): Int? =
    this?.replace(" ", "")?.trim()?.toDoubleOrNull()?.absoluteValue?.times(1000f)?.toInt()



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ParCollections.kt
================================================
package com.lagradost.cloudstream3

import com.lagradost.cloudstream3.mvvm.logError
import kotlinx.coroutines.async
import kotlinx.coroutines.runBlocking

//https://stackoverflow.com/questions/34697828/parallel-operations-on-kotlin-collections
/*
fun <T, R> Iterable<T>.pmap(
    numThreads: Int = maxOf(Runtime.getRuntime().availableProcessors() - 2, 1),
    exec: ExecutorService = Executors.newFixedThreadPool(numThreads),
    transform: (T) -> R,
): List<R> {

    // default size is just an inlined version of kotlin.collections.collectionSizeOrDefault
    val defaultSize = if (this is Collection<*>) this.size else 10
    val destination = Collections.synchronizedList(ArrayList<R>(defaultSize))

    for (item in this) {
        exec.submit { destination.add(transform(item)) }
    }

    exec.shutdown()
    exec.awaitTermination(1, TimeUnit.DAYS)

    return ArrayList<R>(destination)
}*/

fun <K, V, R> Map<out K, V>.apmap(f: suspend (Map.Entry<K, V>) -> R): List<R> = runBlocking {
    map { async { f(it) } }.map { it.await() }
}

fun <A, B> List<A>.apmap(f: suspend (A) -> B): List<B> = runBlocking {
    map { async { f(it) } }.map { it.await() }
}

fun <A, B> List<A>.apmapIndexed(f: suspend (index: Int, A) -> B): List<B> = runBlocking {
    mapIndexed { index, a -> async { f(index, a) } }.map { it.await() }
}

// run code in parallel
/*fun <R> argpmap(
    vararg transforms: () -> R,
    numThreads: Int = maxOf(Runtime.getRuntime().availableProcessors() - 2, 1),
    exec: ExecutorService = Executors.newFixedThreadPool(numThreads)
) {
    for (item in transforms) {
        exec.submit { item.invoke() }
    }

    exec.shutdown()
    exec.awaitTermination(1, TimeUnit.DAYS)
}*/

// built in try catch
fun <R> argamap(
    vararg transforms: suspend () -> R,
) = runBlocking {
    transforms.map {
        async {
            try {
                it.invoke()
            } catch (e: Exception) {
                logError(e)
            }
        }
    }.map { it.await() }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/AllAnimeProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addActors
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper
import com.lagradost.cloudstream3.utils.Qualities
import org.jsoup.Jsoup
import org.mozilla.javascript.Context
import org.mozilla.javascript.Scriptable
import java.net.URI
import java.net.URLDecoder


class AllAnimeProvider : MainAPI() {
    override var mainUrl = "https://allanime.site"
    override var name = "AllAnime"
    override val hasQuickSearch = false
    override val hasMainPage = true

    private fun getStatus(t: String): ShowStatus {
        return when (t) {
            "Finished" -> ShowStatus.Completed
            "Releasing" -> ShowStatus.Ongoing
            else -> ShowStatus.Completed
        }
    }

    override val supportedTypes = setOf(TvType.Anime, TvType.AnimeMovie)

    private data class Data(
        @JsonProperty("shows") val shows: Shows
    )

    private data class Shows(
        @JsonProperty("pageInfo") val pageInfo: PageInfo,
        @JsonProperty("edges") val edges: List<Edges>,
        @JsonProperty("__typename") val _typename: String
    )

    private data class Edges(
        @JsonProperty("_id") val Id: String?,
        @JsonProperty("name") val name: String,
        @JsonProperty("englishName") val englishName: String?,
        @JsonProperty("nativeName") val nativeName: String?,
        @JsonProperty("thumbnail") val thumbnail: String?,
        @JsonProperty("type") val type: String?,
        @JsonProperty("season") val season: Season?,
        @JsonProperty("score") val score: Double?,
        @JsonProperty("airedStart") val airedStart: AiredStart?,
        @JsonProperty("availableEpisodes") val availableEpisodes: AvailableEpisodes?,
        @JsonProperty("availableEpisodesDetail") val availableEpisodesDetail: AvailableEpisodesDetail?,
        @JsonProperty("studios") val studios: List<String>?,
        @JsonProperty("description") val description: String?,
        @JsonProperty("status") val status: String?,
    )

    private data class AvailableEpisodes(
        @JsonProperty("sub") val sub: Int,
        @JsonProperty("dub") val dub: Int,
        @JsonProperty("raw") val raw: Int
    )

    private data class AiredStart(
        @JsonProperty("year") val year: Int,
        @JsonProperty("month") val month: Int,
        @JsonProperty("date") val date: Int
    )

    private data class Season(
        @JsonProperty("quarter") val quarter: String,
        @JsonProperty("year") val year: Int
    )

    private data class PageInfo(
        @JsonProperty("total") val total: Int,
        @JsonProperty("__typename") val _typename: String
    )

    private data class AllAnimeQuery(
        @JsonProperty("data") val data: Data
    )

    data class RandomMain(
        @JsonProperty("data") var data: DataRan? = DataRan()
    )

    data class DataRan(
        @JsonProperty("queryRandomRecommendation") var queryRandomRecommendation: ArrayList<QueryRandomRecommendation> = arrayListOf()
    )

    data class QueryRandomRecommendation(
        @JsonProperty("_id") val Id: String? = null,
        @JsonProperty("name") val name: String? = null,
        @JsonProperty("englishName") val englishName: String? = null,
        @JsonProperty("nativeName") val nativeName: String? = null,
        @JsonProperty("thumbnail") val thumbnail: String? = null,
        @JsonProperty("airedStart") val airedStart: String? = null,
        @JsonProperty("availableChapters") val availableChapters: String? = null,
        @JsonProperty("availableEpisodes") val availableEpisodes: String? = null,
        @JsonProperty("__typename") val _typename: String? = null
    )

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val urls = listOf(
            Pair(
                "Top Anime",
                "$mainUrl/graphql?variables=%7B%22search%22%3A%7B%22allowAdult%22%3Afalse%2C%22sortBy%22%3A%22Top%22%7D%2C%22limit%22%3A26%2C%22page%22%3A1%2C%22translationType%22%3A%22sub%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%229343797cc3d9e3f444e2d3b7db9a84d759b816a4d84512ea72d079f85bb96e98%22%7D%7D"
            ),
            Pair(
                "Animes",
                "$mainUrl/graphql?variables=%7B%22search%22%3A%7B%22allowAdult%22%3Afalse%7D%2C%22limit%22%3A26%2C%22page%22%3A1%2C%22translationType%22%3A%22sub%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%229343797cc3d9e3f444e2d3b7db9a84d759b816a4d84512ea72d079f85bb96e98%22%7D%7D"
            ),
        )

        val random =
            "$mainUrl/graphql?variables=%7B%22format%22%3A%22anime%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%2221ac672633498a3698e8f6a93ce6c2b3722b29a216dcca93363bf012c360cd54%22%7D%7D"
        val ranlink = app.get(random).text
        val jsonran = parseJson<RandomMain>(ranlink)
        val ranhome = jsonran.data?.queryRandomRecommendation?.map {
            newAnimeSearchResponse(it.name!!, "$mainUrl/anime/${it.Id}", fix = false) {
                this.posterUrl = it.thumbnail
                this.otherName = it.nativeName
            }
        }

        items.add(HomePageList("Random", ranhome!!))

        urls.apmap { (HomeName, url) ->
            val test = app.get(url).text
            val json = parseJson<AllAnimeQuery>(test)
            val home = ArrayList<SearchResponse>()
            val results = json.data.shows.edges.filter {
                // filtering in case there is an anime with 0 episodes available on the site.
                !(it.availableEpisodes?.raw == 0 && it.availableEpisodes.sub == 0 && it.availableEpisodes.dub == 0)
            }
            results.map {
                home.add(
                    newAnimeSearchResponse(it.name, "$mainUrl/anime/${it.Id}", fix = false) {
                        this.posterUrl = it.thumbnail
                        this.year = it.airedStart?.year
                        this.otherName = it.englishName
                        addDub(it.availableEpisodes?.dub)
                        addSub(it.availableEpisodes?.sub)
                    })
            }
            items.add(HomePageList(HomeName, home))
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link =
            """$mainUrl/graphql?variables=%7B%22search%22%3A%7B%22allowAdult%22%3Afalse%2C%22query%22%3A%22$query%22%7D%2C%22limit%22%3A26%2C%22page%22%3A1%2C%22translationType%22%3A%22sub%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%229343797cc3d9e3f444e2d3b7db9a84d759b816a4d84512ea72d079f85bb96e98%22%7D%7D"""
        var res = app.get(link).text
        if (res.contains("PERSISTED_QUERY_NOT_FOUND")) {
            res = app.get(link).text
            if (res.contains("PERSISTED_QUERY_NOT_FOUND")) return emptyList()
        }
        val response = mapper.readValue<AllAnimeQuery>(res)

        val results = response.data.shows.edges.filter {
            // filtering in case there is an anime with 0 episodes available on the site.
            !(it.availableEpisodes?.raw == 0 && it.availableEpisodes.sub == 0 && it.availableEpisodes.dub == 0)
        }

        return results.map {
            newAnimeSearchResponse(it.name, "$mainUrl/anime/${it.Id}", fix = false) {
                this.posterUrl = it.thumbnail
                this.year = it.airedStart?.year
                this.otherName = it.englishName
                addDub(it.availableEpisodes?.dub)
                addSub(it.availableEpisodes?.sub)
            }
        }
    }

    private data class AvailableEpisodesDetail(
        @JsonProperty("sub") val sub: List<String>,
        @JsonProperty("dub") val dub: List<String>,
        @JsonProperty("raw") val raw: List<String>
    )


    override suspend fun load(url: String): LoadResponse? {
        val rhino = Context.enter()
        rhino.initStandardObjects()
        rhino.optimizationLevel = -1
        val scope: Scriptable = rhino.initStandardObjects()

        val html = app.get(url).text
        val soup = Jsoup.parse(html)

        val script = soup.select("script").firstOrNull {
            it.html().contains("window.__NUXT__")
        } ?: return null

        val js = """
            const window = {}
            ${script.html()}
            const returnValue = JSON.stringify(window.__NUXT__.fetch[0].show)
        """.trimIndent()

        rhino.evaluateString(scope, js, "JavaScript", 1, null)
        val jsEval = scope.get("returnValue", scope) ?: return null
        val showData = mapper.readValue<Edges>(jsEval as String)

        val title = showData.name
        val description = showData.description
        val poster = showData.thumbnail

        val episodes = showData.availableEpisodes.let {
            if (it == null) return@let Pair(null, null)
            Pair(if (it.sub != 0) ((1..it.sub).map { epNum ->
                Episode(
                    "$mainUrl/anime/${showData.Id}/episodes/sub/$epNum", episode = epNum
                )
            }) else null, if (it.dub != 0) ((1..it.dub).map { epNum ->
                Episode(
                    "$mainUrl/anime/${showData.Id}/episodes/dub/$epNum", episode = epNum
                )
            }) else null)
        }

        val characters = soup.select("div.character > div.card-character-box")?.mapNotNull {
            val img = it?.selectFirst("img")?.attr("src") ?: return@mapNotNull null
            val name = it.selectFirst("div > a")?.ownText() ?: return@mapNotNull null
            val role = when (it.selectFirst("div > .text-secondary")?.text()?.trim()) {
                "Main" -> ActorRole.Main
                "Supporting" -> ActorRole.Supporting
                "Background" -> ActorRole.Background
                else -> null
            }
            Pair(Actor(name, img), role)
        }

        // bruh, they use graphql
        //val recommendations = soup.select("#suggesction > div > div.p > .swipercard")?.mapNotNull {
        //    val recTitle = it?.selectFirst(".showname > a") ?: return@mapNotNull null
        //    val recName = recTitle.text() ?: return@mapNotNull null
        //    val href = fixUrlNull(recTitle.attr("href")) ?: return@mapNotNull null
        //    val img = it.selectFirst(".image > img").attr("src") ?: return@mapNotNull null
        //    AnimeSearchResponse(recName, href, this.name, TvType.Anime, img)
        //}

        return newAnimeLoadResponse(title, url, TvType.Anime) {
            posterUrl = poster
            year = showData.airedStart?.year

            addEpisodes(DubStatus.Subbed, episodes.first)
            addEpisodes(DubStatus.Dubbed, episodes.second)
            addActors(characters)
            //this.recommendations = recommendations

            showStatus = getStatus(showData.status.toString())

            plot = description?.replace(Regex("""<(.*?)>"""), "")
        }
    }

    private val embedBlackList = listOf(
        "https://mp4upload.com/",
        "https://streamsb.net/",
        "https://dood.to/",
        "https://videobin.co/",
        "https://ok.ru",
        "https://streamlare.com",
    )

    private fun embedIsBlacklisted(url: String): Boolean {
        embedBlackList.forEach {
            if (it.javaClass.name == "kotlin.text.Regex") {
                if ((it as Regex).matches(url)) {
                    return true
                }
            } else {
                if (url.contains(it)) {
                    return true
                }
            }
        }
        return false
    }

    private fun String.sanitize(): String {
        var out = this
        listOf(Pair("\\u002F", "/")).forEach {
            out = out.replace(it.first, it.second)
        }
        return out
    }

    private data class Links(
        @JsonProperty("link") val link: String,
        @JsonProperty("hls") val hls: Boolean?,
        @JsonProperty("resolutionStr") val resolutionStr: String,
        @JsonProperty("src") val src: String?
    )

    private data class AllAnimeVideoApiResponse(
        @JsonProperty("links") val links: List<Links>
    )

    private data class ApiEndPoint(
        @JsonProperty("episodeIframeHead") val episodeIframeHead: String
    )

    private fun getM3u8Qualities(
        m3u8Link: String,
        referer: String,
        qualityName: String,
    ): List<ExtractorLink> {
        return M3u8Helper.generateM3u8(
            this.name,
            m3u8Link,
            referer,
            name = "${this.name} - $qualityName"
        )
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        var apiEndPoint =
            mapper.readValue<ApiEndPoint>(app.get("$mainUrl/getVersion").text).episodeIframeHead
        if (apiEndPoint.endsWith("/")) apiEndPoint =
            apiEndPoint.slice(0 until apiEndPoint.length - 1)

        val html = app.get(data).text

        val sources = Regex("""sourceUrl[:=]"(.+?)"""").findAll(html).toList()
            .map { URLDecoder.decode(it.destructured.component1().sanitize(), "UTF-8") }
        sources.apmap {
            safeApiCall {
                var link = it.replace(" ", "%20")
                if (URI(link).isAbsolute || link.startsWith("//")) {
                    if (link.startsWith("//")) link = "https:$it"

                    if (Regex("""streaming\.php\?""").matches(link)) {
                        // for now ignore
                    } else if (!embedIsBlacklisted(link)) {
                        if (URI(link).path.contains(".m3u")) {
                            getM3u8Qualities(link, data, URI(link).host).forEach(callback)
                        } else {
                            callback(
                                ExtractorLink(
                                    "AllAnime - " + URI(link).host,
                                    "",
                                    link,
                                    data,
                                    Qualities.P1080.value,
                                    false
                                )
                            )
                        }
                    }
                } else {
                    link = apiEndPoint + URI(link).path + ".json?" + URI(link).query
                    val response = app.get(link)

                    if (response.code < 400) {
                        val links = mapper.readValue<AllAnimeVideoApiResponse>(response.text).links
                        links.forEach { server ->
                            if (server.hls != null && server.hls) {
                                getM3u8Qualities(
                                    server.link,
                                    "$apiEndPoint/player?uri=" + (if (URI(server.link).host.isNotEmpty()) server.link else apiEndPoint + URI(
                                        server.link
                                    ).path),
                                    server.resolutionStr
                                ).forEach(callback)
                            } else {
                                callback(
                                    ExtractorLink(
                                        "AllAnime - " + URI(server.link).host,
                                        server.resolutionStr,
                                        server.link,
                                        "$apiEndPoint/player?uri=" + (if (URI(server.link).host.isNotEmpty()) server.link else apiEndPoint + URI(
                                            server.link
                                        ).path),
                                        Qualities.P1080.value,
                                        false
                                    )
                                )
                            }
                        }
                    }
                }
            }
        }
        return true
    }

}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/AnimeFlickProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.extractorApis
import org.jsoup.Jsoup
import java.util.*

class AnimeFlickProvider : MainAPI() {
    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }
    }

    override var mainUrl = "https://animeflick.net"
    override var name = "AnimeFlick"
    override val hasQuickSearch = false
    override val hasMainPage = false

    override val supportedTypes = setOf(
        TvType.AnimeMovie,
        TvType.Anime,
        TvType.OVA
    )

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "https://animeflick.net/search.php?search=$query"
        val html = app.get(link).text
        val doc = Jsoup.parse(html)

        return doc.select(".row.mt-2").mapNotNull {
            val href = mainUrl + it.selectFirst("a")?.attr("href")
            val title = it.selectFirst("h5 > a")?.text() ?: return@mapNotNull null
            val poster = mainUrl + it.selectFirst("img")?.attr("src")?.replace("70x110", "225x320")
            AnimeSearchResponse(
                title,
                href,
                this.name,
                getType(title),
                poster,
                null,
                EnumSet.of(DubStatus.Subbed),
            )
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val html = app.get(url).text
        val doc = Jsoup.parse(html)

        val poster = mainUrl + doc.selectFirst("img.rounded")?.attr("src")
        val title = doc.selectFirst("h2.title")!!.text()

        val yearText = doc.selectFirst(".trending-year")?.text()
        val year = if (yearText != null) Regex("""(\d{4})""").find(yearText)?.destructured?.component1()
            ?.toIntOrNull() else null
        val description = doc.selectFirst("p")?.text()

        val genres = doc.select("a[href*=\"genre-\"]").map { it.text() }

        val episodes = doc.select("#collapseOne .block-space > .row > div:nth-child(2)").map {
            val name = it.selectFirst("a")?.text()
            val link = mainUrl + it.selectFirst("a")?.attr("href")
            Episode(link, name)
        }.reversed()

        return newAnimeLoadResponse(title, url, getType(title)) {
            posterUrl = poster
            this.year = year

            addEpisodes(DubStatus.Subbed, episodes)

            plot = description
            tags = genres
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val html = app.get(data).text

        val episodeRegex = Regex("""(https://.*?\.mp4)""")
        val links = episodeRegex.findAll(html).map {
            it.value
        }.toList()
        for (link in links) {
            var alreadyAdded = false
            for (extractor in extractorApis) {
                if (link.startsWith(extractor.mainUrl)) {
                    extractor.getSafeUrl(link, data)?.forEach(callback)
                    alreadyAdded = true
                    break
                }
            }
            if (!alreadyAdded) {
                callback(
                    ExtractorLink(
                        this.name,
                        "${this.name} - Auto",
                        link,
                        "",
                        Qualities.P1080.value
                    )
                )
            }
        }

        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/AnimeflvProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import java.util.*

class AnimeflvnetProvider : MainAPI() {
    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Especial")) TvType.OVA
            else if (t.contains("PelÃ­cula")) TvType.AnimeMovie
            else TvType.Anime
        }

        fun getDubStatus(title: String): DubStatus {
            return if (title.contains("Latino") || title.contains("Castellano"))
                DubStatus.Dubbed
            else DubStatus.Subbed
        }
    }

    override var mainUrl = "https://www3.animeflv.net"
    override var name = "Animeflv.net"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.AnimeMovie,
        TvType.OVA,
        TvType.Anime,
    )

    override suspend fun getMainPage(): HomePageResponse {
        val urls = listOf(
            Pair("$mainUrl/browse?type[]=movie&order=updated", "PelÃ­culas"),
            Pair("$mainUrl/browse?status[]=2&order=default", "Animes"),
            Pair("$mainUrl/browse?status[]=1&order=rating", "En emision"),
        )
        val items = ArrayList<HomePageList>()
        items.add(
            HomePageList(
                "Ãšltimos episodios",
                app.get(mainUrl).document.select("main.Main ul.ListEpisodios li").mapNotNull {
                    val title = it.selectFirst("strong.Title")?.text() ?: return@mapNotNull null
                    val poster = it.selectFirst("span img")?.attr("src") ?: return@mapNotNull null
                    val epRegex = Regex("(-(\\d+)\$)")
                    val url = it.selectFirst("a")?.attr("href")?.replace(epRegex, "")
                        ?.replace("ver/", "anime/") ?: return@mapNotNull null
                    val epNum =
                        it.selectFirst("span.Capi")?.text()?.replace("Episodio ", "")?.toIntOrNull()
                    newAnimeSearchResponse(title, url) {
                        this.posterUrl = fixUrl(poster)
                        addDubStatus(getDubStatus(title), epNum)
                    }
                })
        )
        for ((url, name) in urls) {
            try {
                val doc = app.get(url).document
                val home = doc.select("ul.ListAnimes li article").mapNotNull {
                    val title = it.selectFirst("h3.Title")?.text() ?: return@mapNotNull null
                    val poster = it.selectFirst("figure img")?.attr("src") ?: return@mapNotNull null
                    newAnimeSearchResponse(
                        title,
                        fixUrl(it.selectFirst("a")?.attr("href") ?: return@mapNotNull null)
                    ) {
                        this.posterUrl = fixUrl(poster)
                        addDubStatus(MonoschinosProvider.getDubStatus(title))
                    }
                }

                items.add(HomePageList(name, home))
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    data class SearchObject(
        @JsonProperty("id") val id: String,
        @JsonProperty("title") val title: String,
        @JsonProperty("type") val type: String,
        @JsonProperty("last_id") val lastId: String,
        @JsonProperty("slug") val slug: String
    )

    override suspend fun search(query: String): List<SearchResponse> {
        val response = app.post(
            "https://www3.animeflv.net/api/animes/search",
            data = mapOf(Pair("value", query))
        ).text
        val json = parseJson<List<SearchObject>>(response)
        return json.map { searchr ->
            val title = searchr.title
            val href = "$mainUrl/anime/${searchr.slug}"
            val image = "$mainUrl/uploads/animes/covers/${searchr.id}.jpg"
            AnimeSearchResponse(
                title,
                href,
                this.name,
                TvType.Anime,
                fixUrl(image),
                null,
                if (title.contains("Latino") || title.contains("Castellano")) EnumSet.of(DubStatus.Dubbed) else EnumSet.of(
                    DubStatus.Subbed
                ),
            )
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val episodes = ArrayList<Episode>()
        val title = doc.selectFirst("h1.Title")!!.text()
        val poster = doc.selectFirst("div.AnimeCover div.Image figure img")?.attr("src")!!
        val description = doc.selectFirst("div.Description p")?.text()
        val type = doc.selectFirst("span.Type")?.text() ?: ""
        val status = when (doc.selectFirst("p.AnmStts span")?.text()) {
            "En emision" -> ShowStatus.Ongoing
            "Finalizado" -> ShowStatus.Completed
            else -> null
        }
        val genre = doc.select("nav.Nvgnrs a")
            .map { it?.text()?.trim().toString() }

        doc.select("script").map { script ->
            if (script.data().contains("var episodes = [")) {
                val data = script.data().substringAfter("var episodes = [").substringBefore("];")
                data.split("],").forEach {
                    val epNum = it.removePrefix("[").substringBefore(",")
                    // val epthumbid = it.removePrefix("[").substringAfter(",").substringBefore("]")
                    val animeid = doc.selectFirst("div.Strs.RateIt")?.attr("data-id")
                    val epthumb = "https://cdn.animeflv.net/screenshots/$animeid/$epNum/th_3.jpg"
                    val link = url.replace("/anime/", "/ver/") + "-$epNum"
                    episodes.add(
                        Episode(
                            link,
                            null,
                            posterUrl = epthumb,
                            episode = epNum.toIntOrNull()
                        )
                    )
                }
            }
        }
        return newAnimeLoadResponse(title, url, getType(type)) {
            posterUrl = fixUrl(poster)
            addEpisodes(DubStatus.Subbed, episodes.reversed())
            showStatus = status
            plot = description
            tags = genre
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document.select("script").apmap { script ->
            if (script.data().contains("var videos = {") || script.data()
                    .contains("var anime_id =") || script.data().contains("server")
            ) {
                val videos = script.data().replace("\\/", "/")
                fetchUrls(videos).map {
                    it.replace("https://embedsb.com/e/", "https://watchsb.com/e/")
                        .replace("https://ok.ru", "http://ok.ru")
                }.apmap {
                    loadExtractor(it, data, callback)
                }
            }
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/AnimekisaProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.mvvm.normalSafeApiCall
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.mvvm.suspendSafeApiCall
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup
import java.util.*


class AnimekisaProvider : MainAPI() {
    override var mainUrl = "https://animekisa.in"
    override var name = "Animekisa"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.AnimeMovie,
        TvType.OVA,
        TvType.Anime,
    )

    data class Response(
        @JsonProperty("html") val html: String
    )

    override suspend fun getMainPage(): HomePageResponse {
        val urls = listOf(
            Pair("$mainUrl/ajax/list/views?type=all", "All animes"),
            Pair("$mainUrl/ajax/list/views?type=day", "Trending now"),
            Pair("$mainUrl/ajax/list/views?type=week", "Trending by week"),
            Pair("$mainUrl/ajax/list/views?type=month", "Trending by month"),
        )

        val items = urls.mapNotNull  {
            suspendSafeApiCall {
                val home = Jsoup.parse(
                    parseJson<Response>(
                        app.get(
                            it.first
                        ).text
                    ).html
                ).select("div.flw-item").mapNotNull secondMap@ {
                    val title = it.selectFirst("h3.title a")?.text() ?: return@secondMap null
                    val link = it.selectFirst("a")?.attr("href")  ?: return@secondMap null
                    val poster = it.selectFirst("img.lazyload")?.attr("data-src")
                    AnimeSearchResponse(
                        title,
                        link,
                        this.name,
                        TvType.Anime,
                        poster,
                        null,
                        if (title.contains("(DUB)") || title.contains("(Dub)")) EnumSet.of(
                            DubStatus.Dubbed
                        ) else EnumSet.of(DubStatus.Subbed),
                    )
                }
                HomePageList(name, home)
            }
        }

        if (items.isEmpty()) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        return app.get("$mainUrl/search/?keyword=$query").document.select("div.flw-item")
            .mapNotNull {
                val title = it.selectFirst("h3 a")?.text() ?: ""
                val url = it.selectFirst("a.film-poster-ahref")?.attr("href")
                    ?.replace("watch/", "anime/")?.replace(
                        Regex("(-episode-(\\d+)\\/\$|-episode-(\\d+)\$|-episode-full|-episode-.*-.(\\/|))"),
                        ""
                    ) ?: return@mapNotNull null
                val poster = it.selectFirst(".film-poster img")?.attr("data-src")
                AnimeSearchResponse(
                    title,
                    url,
                    this.name,
                    TvType.Anime,
                    poster,
                    null,
                    if (title.contains("(DUB)") || title.contains("(Dub)")) EnumSet.of(
                        DubStatus.Dubbed
                    ) else EnumSet.of(DubStatus.Subbed),
                )
            }.toList()
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url, timeout = 120).document
        val poster = doc.selectFirst(".mb-2 img")?.attr("src")
            ?: doc.selectFirst("head meta[property=og:image]")?.attr("content")
        val title = doc.selectFirst("h1.heading-name a")!!.text()
        val description = doc.selectFirst("div.description p")?.text()?.trim()
        val genres = doc.select("div.row-line a").map { it.text() }
        val test = if (doc.selectFirst("div.dp-i-c-right").toString()
                .contains("Airing")
        ) ShowStatus.Ongoing else ShowStatus.Completed
        val episodes = doc.select("div.tab-content ul li.nav-item").mapNotNull {
            val link = it.selectFirst("a")?.attr("href") ?: return@mapNotNull null
            Episode(link)
        }
        val type = if (doc.selectFirst(".dp-i-stats").toString()
                .contains("Movies")
        ) TvType.AnimeMovie else TvType.Anime
        return newAnimeLoadResponse(title, url, type) {
            posterUrl = poster
            addEpisodes(DubStatus.Subbed, episodes)
            showStatus = test
            plot = description
            tags = genres
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document.select("#servers-list ul.nav li a").apmap {
            val server = it.attr("data-embed")
            loadExtractor(server, data, callback)
        }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/AnimePaheProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addAniListId
import com.lagradost.cloudstream3.LoadResponse.Companion.addMalId
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.mvvm.suspendSafeApiCall
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.JsUnpacker
import com.lagradost.cloudstream3.utils.getQualityFromName
import com.lagradost.nicehttp.NiceResponse
import org.jsoup.Jsoup
import kotlin.math.pow

class AnimePaheProvider : MainAPI() {
    // credit to https://github.com/justfoolingaround/animdl/tree/master/animdl/core/codebase/providers/animepahe
    companion object {
        const val MAIN_URL = "https://animepahe.com"

        var cookies: Map<String, String> = mapOf()
        private fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }

        suspend fun generateSession(): Boolean {
            if (cookies.isNotEmpty()) return true
            return try {
                val response = app.get("$MAIN_URL/")
                cookies = response.cookies
                true
            } catch (e: Exception) {
                false
            }
        }

        val YTSM = Regex("ysmm = '([^']+)")

        val KWIK_PARAMS_RE = Regex("""\("(\w+)",\d+,"(\w+)",(\d+),(\d+),\d+\)""")
        val KWIK_D_URL = Regex("action=\"([^\"]+)\"")
        val KWIK_D_TOKEN = Regex("value=\"([^\"]+)\"")
        val YOUTUBE_VIDEO_LINK =
            Regex("""(^(?:https?:)?(?://)?(?:www\.)?(?:youtu\.be/|youtube(?:-nocookie)?\.(?:[A-Za-z]{2,4}|[A-Za-z]{2,3}\.[A-Za-z]{2})/)(?:watch|embed/|vi?/)*(?:\?[\w=&]*vi?=)?[^#&?/]{11}.*${'$'})""")
    }

    override var mainUrl = MAIN_URL
    override var name = "AnimePahe"
    override val hasQuickSearch = false
    override val hasMainPage = true

    override val supportedTypes = setOf(
        TvType.AnimeMovie,
        TvType.Anime,
        TvType.OVA
    )

    override suspend fun getMainPage(): HomePageResponse {
        data class Data(
            @JsonProperty("id") val id: Int,
            @JsonProperty("anime_id") val animeId: Int,
            @JsonProperty("anime_title") val animeTitle: String,
            @JsonProperty("anime_slug") val animeSlug: String,
            @JsonProperty("episode") val episode: Int,
            @JsonProperty("snapshot") val snapshot: String,
            @JsonProperty("created_at") val createdAt: String,
            @JsonProperty("anime_session") val animeSession: String,
        )

        data class AnimePaheLatestReleases(
            @JsonProperty("total") val total: Int,
            @JsonProperty("data") val data: List<Data>
        )

        val urls = listOf(
            Pair("$mainUrl/api?m=airing&page=1", "Latest Releases"),
        )

        val items = ArrayList<HomePageList>()
        for (i in urls) {
            try {
                val response = app.get(i.first).text
                val episodes = mapper.readValue<AnimePaheLatestReleases>(response).data.map {
                    newAnimeSearchResponse(
                        it.animeTitle,
                        "https://pahe.win/a/${it.animeId}?slug=${it.animeTitle}",
                        fix = false
                    ) {
                        this.posterUrl = it.snapshot
                        addDubStatus(DubStatus.Subbed, it.episode)
                    }
                }

                items.add(HomePageList(i.second, episodes))
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    data class AnimePaheSearchData(
        @JsonProperty("id") val id: Int,
        @JsonProperty("slug") val slug: String,
        @JsonProperty("title") val title: String,
        @JsonProperty("type") val type: String,
        @JsonProperty("episodes") val episodes: Int,
        @JsonProperty("status") val status: String,
        @JsonProperty("season") val season: String,
        @JsonProperty("year") val year: Int,
        @JsonProperty("score") val score: Double,
        @JsonProperty("poster") val poster: String,
        @JsonProperty("session") val session: String,
        @JsonProperty("relevance") val relevance: String
    )

    data class AnimePaheSearch(
        @JsonProperty("total") val total: Int,
        @JsonProperty("data") val data: List<AnimePaheSearchData>
    )

    private suspend fun getAnimeByIdAndTitle(title: String, animeId: Int): String? {
        val url = "$mainUrl/api?m=search&l=8&q=$title"
        val headers = mapOf("referer" to "$mainUrl/")

        val req = app.get(url, headers = headers).text
        val data = req.let { mapper.readValue<AnimePaheSearch>(it) }
        for (anime in data.data) {
            if (anime.id == animeId) {
                return "https://animepahe.com/anime/${anime.session}"
            }
        }
        return null
    }


    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/api?m=search&l=8&q=$query"
        val headers = mapOf("referer" to "$mainUrl/")

        val req = app.get(url, headers = headers).text
        val data = req.let { mapper.readValue<AnimePaheSearch>(it) }

        return data.data.map {
            newAnimeSearchResponse(
                it.title,
                "https://pahe.win/a/${it.id}?slug=${it.title}",
                fix = false
            ) {
                this.posterUrl = it.poster
                addDubStatus(DubStatus.Subbed, it.episodes)
            }
        }
    }

    private data class AnimeData(
        @JsonProperty("id") val id: Int,
        @JsonProperty("anime_id") val animeId: Int,
        @JsonProperty("episode") val episode: Int,
        @JsonProperty("title") val title: String,
        @JsonProperty("snapshot") val snapshot: String,
        @JsonProperty("session") val session: String,
        @JsonProperty("filler") val filler: Int,
        @JsonProperty("created_at") val createdAt: String
    )

    private data class AnimePaheAnimeData(
        @JsonProperty("total") val total: Int,
        @JsonProperty("per_page") val perPage: Int,
        @JsonProperty("current_page") val currentPage: Int,
        @JsonProperty("last_page") val lastPage: Int,
        @JsonProperty("next_page_url") val nextPageUrl: String?,
        @JsonProperty("prev_page_url") val prevPageUrl: String?,
        @JsonProperty("from") val from: Int,
        @JsonProperty("to") val to: Int,
        @JsonProperty("data") val data: List<AnimeData>
    )

    private suspend fun generateListOfEpisodes(link: String): ArrayList<Episode> {
        try {
            val attrs = link.split('/')
            val id = attrs[attrs.size - 1].split("?")[0]

            val uri = "$mainUrl/api?m=release&id=$id&sort=episode_asc&page=1"
            val headers = mapOf("referer" to "$mainUrl/")

            val req = app.get(uri, headers = headers).text
            val data = req.let { mapper.readValue<AnimePaheAnimeData>(it) }

            val lastPage = data.lastPage
            val perPage = data.perPage
            val total = data.total
            var ep = 1
            val episodes = ArrayList<Episode>()

            fun getEpisodeTitle(k: AnimeData): String {
                return k.title.ifEmpty {
                    "Episode ${k.episode}"
                }
            }

            if (lastPage == 1 && perPage > total) {
                data.data.forEach {
                    episodes.add(
                        newEpisode("$mainUrl/api?m=links&id=${it.animeId}&session=${it.session}&p=kwik!!TRUE!!") {
                            addDate(it.createdAt)
                            this.name = getEpisodeTitle(it)
                            this.posterUrl = it.snapshot
                        }
                    )
                }
            } else {
                for (page in 0 until lastPage) {
                    for (i in 0 until perPage) {
                        if (ep <= total) {
                            episodes.add(
                                Episode(
                                    "$mainUrl/api?m=release&id=${id}&sort=episode_asc&page=${page + 1}&ep=${ep}!!FALSE!!"
                                )
                            )
                            ++ep
                        }
                    }
                }
            }
            return episodes
        } catch (e: Exception) {
            return ArrayList()
        }
    }

    override suspend fun load(url: String): LoadResponse? {
        return suspendSafeApiCall {
            val regex = Regex("""a/(\d+)\?slug=(.+)""")
            val (animeId, animeTitle) = regex.find(url)!!.destructured
            val link = getAnimeByIdAndTitle(animeTitle, animeId.toInt())!!

            val html = app.get(link).text
            val doc = Jsoup.parse(html)

            val japTitle = doc.selectFirst("h2.japanese")?.text()
            val poster = doc.selectFirst(".anime-poster a")?.attr("href")

            val tvType = doc.selectFirst("""a[href*="/anime/type/"]""")?.text()

            val trailer: String? = if (html.contains("https://www.youtube.com/watch")) {
                YOUTUBE_VIDEO_LINK.find(html)?.destructured?.component1()
            } else {
                null
            }

            val episodes = generateListOfEpisodes(url)
            val year = Regex("""<strong>Aired:</strong>[^,]*, (\d+)""")
                .find(html)!!.destructured.component1()
                .toIntOrNull()
            val status =
                when (Regex("""<strong>Status:</strong>[^a]*a href=["']/anime/(.*?)["']""")
                    .find(html)!!.destructured.component1()) {
                    "airing" -> ShowStatus.Ongoing
                    "completed" -> ShowStatus.Completed
                    else -> null
                }
            val synopsis = doc.selectFirst(".anime-synopsis")?.text()

            var anilistId: Int? = null
            var malId: Int? = null

            doc.select(".external-links > a").forEach { aTag ->
                val split = aTag.attr("href").split("/")

                if (aTag.attr("href").contains("anilist.co")) {
                    anilistId = split[split.size - 1].toIntOrNull()
                } else if (aTag.attr("href").contains("myanimelist.net")) {
                    malId = split[split.size - 1].toIntOrNull()
                }
            }

            newAnimeLoadResponse(animeTitle, url, getType(tvType.toString())) {
                engName = animeTitle
                japName = japTitle

                this.posterUrl = poster
                this.year = year

                addEpisodes(DubStatus.Subbed, episodes)
                this.showStatus = status
                plot = synopsis
                tags = if (!doc.select(".anime-genre > ul a").isEmpty()) {
                    ArrayList(doc.select(".anime-genre > ul a").map { it.text().toString() })
                } else {
                    null
                }

                addMalId(malId)
                addAniListId(anilistId)
                addTrailer(trailer)
            }
        }
    }


    private fun isNumber(s: String?): Boolean {
        return s?.toIntOrNull() != null
    }

    private fun cookieStrToMap(cookie: String): Map<String, String> {
        val cookies = mutableMapOf<String, String>()
        for (string in cookie.split("; ")) {
            val split = string.split("=").toMutableList()
            val name = split.removeFirst().trim()
            val value = if (split.size == 0) {
                "true"
            } else {
                split.joinToString("=")
            }
            cookies[name] = value
        }
        return cookies.toMap()
    }

    private fun getString(content: String, s1: Int, s2: Int): String {
        val characterMap = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+/"

        val slice2 = characterMap.slice(0 until s2)
        var acc: Long = 0

        for ((n, i) in content.reversed().withIndex()) {
            acc += (when (isNumber("$i")) {
                true -> "$i".toLong()
                false -> "0".toLong()
            }) * s1.toDouble().pow(n.toDouble()).toInt()
        }

        var k = ""

        while (acc > 0) {
            k = slice2[(acc % s2).toInt()] + k
            acc = (acc - (acc % s2)) / s2
        }

        return when (k != "") {
            true -> k
            false -> "0"
        }
    }

    private fun decrypt(fullString: String, key: String, v1: Int, v2: Int): String {
        var r = ""
        var i = 0

        while (i < fullString.length) {
            var s = ""

            while (fullString[i] != key[v2]) {
                s += fullString[i]
                ++i
            }
            var j = 0

            while (j < key.length) {
                s = s.replace(key[j].toString(), j.toString())
                ++j
            }
            r += (getString(s, v2, 10).toInt() - v1).toChar()
            ++i
        }
        return r
    }

    private fun zipGen(gen: Sequence<Pair<Int, Int>>): ArrayList<Pair<Pair<Int, Int>, Pair<Int, Int>>> {
        val allItems = gen.toList().toMutableList()
        val newList = ArrayList<Pair<Pair<Int, Int>, Pair<Int, Int>>>()

        while (allItems.size > 1) {
            newList.add(Pair(allItems[0], allItems[1]))
            allItems.removeAt(0)
            allItems.removeAt(0)
        }
        return newList
    }

    private fun decodeAdfly(codedKey: String): String {
        var r = ""
        var j = ""

        for ((n, l) in codedKey.withIndex()) {
            if (n % 2 != 0) {
                j = l + j
            } else {
                r += l
            }
        }

        val encodedUri = ((r + j).toCharArray().map { it.toString() }).toMutableList()
        val numbers = sequence {
            for ((i, n) in encodedUri.withIndex()) {
                if (isNumber(n)) {
                    yield(Pair(i, n.toInt()))
                }
            }
        }

        for ((first, second) in zipGen(numbers)) {
            val xor = first.second.xor(second.second)
            if (xor < 10) {
                encodedUri[first.first] = xor.toString()
            }
        }
        var returnValue = String(encodedUri.joinToString("").toByteArray(), Charsets.UTF_8)
        returnValue = base64Decode(returnValue)
        return returnValue.slice(16..returnValue.length - 17)
    }

    private data class VideoQuality(
        @JsonProperty("id") val id: Int?,
        @JsonProperty("audio") val audio: String?,
        @JsonProperty("kwik") val kwik: String?,
        @JsonProperty("kwik_pahewin") val kwikPahewin: String
    )

    private data class AnimePaheEpisodeLoadLinks(
        @JsonProperty("data") val data: List<Map<String, VideoQuality>>
    )

    private suspend fun bypassAdfly(adflyUri: String): String {
        if (!generateSession()) {
            return bypassAdfly(adflyUri)
        }

        var responseCode = 302
        var adflyContent: NiceResponse? = null
        var tries = 0

        while (responseCode != 200 && tries < 20) {
            adflyContent = app.get(
                app.get(adflyUri, cookies = cookies, allowRedirects = false).url,
                cookies = cookies,
                allowRedirects = false
            )
            cookies = cookies + adflyContent.cookies
            responseCode = adflyContent.code
            ++tries
        }
        if (tries > 19) {
            throw Exception("Failed to bypass adfly.")
        }
        return decodeAdfly(YTSM.find(adflyContent?.text.toString())!!.destructured.component1())
    }

    private suspend fun getStreamUrlFromKwik(url: String?): String? {
        if (url == null) return null
        val response =
            app.get(
                url,
                headers = mapOf("referer" to mainUrl),
                cookies = cookies
            ).text
        Regex("eval((.|\\n)*?)</script>").find(response)?.groupValues?.get(1)?.let { jsEval ->
            JsUnpacker("eval$jsEval").unpack()?.let { unPacked ->
                Regex("source=\'(.*?)\'").find(unPacked)?.groupValues?.get(1)?.let { link ->
                    return link
                }
            }
        }
        return null
    }

    private suspend fun getStreamUrlFromKwikAdfly(adflyUri: String): String {
        val fContent =
            app.get(
                bypassAdfly(adflyUri),
                headers = mapOf("referer" to "https://kwik.cx/"),
                cookies = cookies
            )
        cookies = cookies + fContent.cookies

        val (fullString, key, v1, v2) = KWIK_PARAMS_RE.find(fContent.text)!!.destructured
        val decrypted = decrypt(fullString, key, v1.toInt(), v2.toInt())
        val uri = KWIK_D_URL.find(decrypted)!!.destructured.component1()
        val tok = KWIK_D_TOKEN.find(decrypted)!!.destructured.component1()
        var content: NiceResponse? = null

        var code = 419
        var tries = 0

        while (code != 302 && tries < 20) {
            content = app.post(
                uri,
                allowRedirects = false,
                data = mapOf("_token" to tok),
                headers = mapOf("referer" to fContent.url),
                cookies = fContent.cookies
            )
            code = content.code
            ++tries
        }
        if (tries > 19) {
            throw Exception("Failed to extract the stream uri from kwik.")
        }
        return content?.headers?.values("location").toString()
    }

    private suspend fun extractVideoLinks(
        episodeLink: String,
        callback: (ExtractorLink) -> Unit
    ) {
        var link = episodeLink
        val headers = mapOf("referer" to "$mainUrl/")

        if (link.contains("!!TRUE!!")) {
            link = link.replace("!!TRUE!!", "")
        } else {
            val regex = """&ep=(\d+)!!FALSE!!""".toRegex()
            val episodeNum = regex.find(link)?.destructured?.component1()?.toIntOrNull()
            link = link.replace(regex, "")

            val req = app.get(link, headers = headers).text
            val jsonResponse = req.let { mapper.readValue<AnimePaheAnimeData>(it) }
            val ep = ((jsonResponse.data.map {
                if (it.episode == episodeNum) {
                    it
                } else {
                    null
                }
            }).filterNotNull())[0]
            link = "$mainUrl/api?m=links&id=${ep.animeId}&session=${ep.session}&p=kwik"
        }
        val req = app.get(link, headers = headers).text
        val data = mapper.readValue<AnimePaheEpisodeLoadLinks>(req)

        data.data.forEach {
            it.entries.toList().apmap { quality ->
                getStreamUrlFromKwik(quality.value.kwik)?.let { link ->
                    callback(
                        ExtractorLink(
                            "KWIK",
                            "KWIK - ${quality.key} [${quality.value.audio ?: "jpn"}]",
                            link,
                            "https://kwik.cx/",
                            getQualityFromName(quality.key),
                            link.contains(".m3u8")
                        )
                    )
                }
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        extractVideoLinks(data, callback)
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/AnimeWorldProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addAniListId
import com.lagradost.cloudstream3.LoadResponse.Companion.addMalId
import com.lagradost.cloudstream3.LoadResponse.Companion.addRating
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.nicehttp.NiceResponse
import org.jsoup.nodes.Element

class AnimeWorldProvider : MainAPI() {
    override var mainUrl = "https://www.animeworld.tv"
    override var name = "AnimeWorld"
    override val lang = "it"
    override val hasMainPage = true

    override val supportedTypes = setOf(
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.OVA
    )

    companion object {
        private const val cookieName = "AWCookieVerify"
        private val cookieRegex = Regex("$cookieName=(.+?)(\\s?);")
        private val cookies = mutableMapOf(cookieName to "")

        private suspend fun request(url: String): NiceResponse {
            val response = app.get(url, cookies = cookies)
            return cookieRegex.find(response.text)?.let {
                val verify = it.groups[1]?.value ?: throw ErrorLoadingException("Can't bypass protection")
                cookies[cookieName] = verify
                return app.get(url, cookies = cookies)
            } ?: response
        }

        fun getType(t: String?): TvType {
            return when (t?.lowercase()) {
                "movie" -> TvType.AnimeMovie
                "ova" -> TvType.OVA
                else -> TvType.Anime
            }
        }

        fun getStatus(t: String?): ShowStatus? {
            return when (t?.lowercase()) {
                "finito" -> ShowStatus.Completed
                "in corso" -> ShowStatus.Ongoing
                else -> null
            }
        }
    }

    private fun Element.toSearchResult(showEpisode: Boolean = true): AnimeSearchResponse {
        fun String.parseHref(): String {
            val h = this.split('.').toMutableList()
            h[1] = h[1].substringBeforeLast('/')
            return h.joinToString(".")
        }

        val anchor = this.select("a.name").firstOrNull() ?: throw ErrorLoadingException("Error")
        val title = anchor.text().removeSuffix(" (ITA)")
        val otherTitle = anchor.attr("data-jtitle").removeSuffix(" (ITA)")

        val url = fixUrl(anchor.attr("href").parseHref())
        val poster = this.select("a.poster img").attr("src")

        val statusElement = this.select("div.status") // .first()
        val dub = statusElement.select(".dub").isNotEmpty()

        val episode = if (showEpisode) statusElement.select(".ep").text().split(' ').last()
            .toIntOrNull() else null
        val type = when {
            statusElement.select(".movie").isNotEmpty() -> TvType.AnimeMovie
            statusElement.select(".ova").isNotEmpty() -> TvType.OVA
            else -> TvType.Anime
        }

        return newAnimeSearchResponse(title, url, type) {
            addDubStatus(dub, episode)
            this.otherName = otherTitle
            this.posterUrl = poster
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val document = request(mainUrl).document
        val list = ArrayList<HomePageList>()

        val widget = document.select(".widget.hotnew")
        widget.select(".tabs [data-name=\"sub\"], .tabs [data-name=\"dub\"]").forEach { tab ->
            val tabId = tab.attr("data-name")
            val tabName = tab.text().removeSuffix("-ITA")
            val animeList = widget.select("[data-name=\"$tabId\"] .film-list .item").map {
                it.toSearchResult()
            }
            list.add(HomePageList(tabName, animeList))
        }
        widget.select(".tabs [data-name=\"trending\"]").forEach { tab ->
            val tabId = tab.attr("data-name")
            val tabName = tab.text()
            val animeList = widget.select("[data-name=\"$tabId\"] .film-list .item").map {
                it.toSearchResult(showEpisode = false)
            }.distinctBy { it.url }
            list.add(HomePageList(tabName, animeList))
        }
        return HomePageResponse(list)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val document = request("$mainUrl/search?keyword=$query").document
        return document.select(".film-list > .item").map {
            it.toSearchResult(showEpisode = false)
        }
    }

    override suspend fun load(url: String): LoadResponse {
        fun String.parseDuration(): Int? {
            val arr = this.split(" e ")
            return if (arr.size == 1)
                arr[0].split(' ')[0].toIntOrNull()
            else
                arr[1].split(' ')[0].toIntOrNull()?.let {
                    arr[0].removeSuffix("h").toIntOrNull()?.times(60)!!.plus(it)
                }
        }

        val document = request(url).document

        val widget = document.select("div.widget.info")
        val title = widget.select(".info .title").text().removeSuffix(" (ITA)")
        val otherTitle = widget.select(".info .title").attr("data-jtitle").removeSuffix(" (ITA)")
        val description =
            widget.select(".desc .long").first()?.text() ?: widget.select(".desc").text()
        val poster = document.select(".thumb img").attr("src")

        val type: TvType = getType(widget.select("dd").first()?.text())
        val genres = widget.select(".meta").select("a[href*=\"/genre/\"]").map { it.text() }
        val rating = widget.select("#average-vote")?.text()

        val trailerUrl = document.select(".trailer[data-url]").attr("data-url")
        val malId = document.select("#mal-button").attr("href")
            .split('/').last().toIntOrNull()
        val anlId = document.select("#anilist-button").attr("href")
            .split('/').last().toIntOrNull()

        var dub = false
        var year: Int? = null
        var status: ShowStatus? = null
        var duration: Int? = null

        for (meta in document.select(".meta dt, .meta dd")) {
            val text = meta.text()
            if (text.contains("Audio"))
                dub = meta.nextElementSibling()?.text() == "Italiano"
            else if (year == null && text.contains("Data"))
                year = meta.nextElementSibling()?.text()?.split(' ')?.last()?.toIntOrNull()
            else if (status == null && text.contains("Stato"))
                status = getStatus(meta.nextElementSibling()?.text())
            else if (status == null && text.contains("Durata"))
                duration = meta.nextElementSibling()?.text()?.parseDuration()
        }

        val servers = document.select(".widget.servers")
        val episodes = servers.select(".server[data-name=\"9\"] .episode").map {
            val id = it.select("a").attr("data-id")
            val number = it.select("a").attr("data-episode-num").toIntOrNull()
            Episode(
                "$mainUrl/api/episode/info?id=$id",
                episode = number
            )
        }
        val comingSoon = episodes.isEmpty()

        val recommendations = document.select(".film-list.interesting .item").map {
            it.toSearchResult(showEpisode = false)
        }

        return newAnimeLoadResponse(title, url, type) {
            engName = title
            japName = otherTitle
            posterUrl = poster
            this.year = year
            addEpisodes(if (dub) DubStatus.Dubbed else DubStatus.Subbed, episodes)
            showStatus = status
            plot = description
            tags = genres
            addMalId(malId)
            addAniListId(anlId)
            addRating(rating)
            this.duration = duration
            addTrailer(trailerUrl)
            this.recommendations = recommendations
            this.comingSoon = comingSoon
        }
    }

    data class Json (
        @JsonProperty("grabber") val grabber: String,
        @JsonProperty("name") val name: String,
        @JsonProperty("target") val target: String,
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val url = tryParseJson<Json>(
            request(data).text
        )?.grabber

        if (url.isNullOrEmpty())
            return false

        callback.invoke(
            ExtractorLink(
                name,
                name,
                url,
                referer = mainUrl,
                quality = Qualities.Unknown.value
            )
        )
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/DreamSubProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addDuration
import com.lagradost.cloudstream3.LoadResponse.Companion.addRating
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import org.jsoup.nodes.Element

class DreamSubProvider : MainAPI() {
    override var mainUrl = "https://dreamsub.me"
    override var name = "DreamSub"
    override val lang = "it"
    override val hasMainPage = true

    override val supportedTypes = setOf(
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.OVA
    )

    companion object {
        fun getType(t: String?): TvType {
            return when (t?.lowercase()) {
                "film" -> TvType.AnimeMovie
                "ova" -> TvType.OVA
                else -> TvType.Anime
            }
        }

        fun getStatus(t: String?): ShowStatus? {
            return when (t?.lowercase()) {
                "conclusa" -> ShowStatus.Completed
                "in corso" -> ShowStatus.Ongoing
                else -> null
            }
        }
    }

    private fun Element.toSearchResponse(): AnimeSearchResponse {
        val title = this.select(".title").first()?.text()
            ?: throw ErrorLoadingException("No title found")
        val url = this.select(".showStreaming a").first()?.attr("href")
            ?: throw ErrorLoadingException("No url found")

        val type = TvType.Anime
        val posterUrl = this.select(".cover").first()?.attr("style")
            ?.substringAfter("url(")?.substringBefore(")")?.trim()

        val dubInfo = this.select(".showStreaming").first()?.text()
            ?.substringAfter("Lingua:")?.substringBefore("\n")?.trim()
        val dub = dubInfo?.contains("DUB ITA", ignoreCase = true) ?: false
        val sub = dubInfo?.contains("SUB ITA", ignoreCase = true) ?: true

        val desc = this.select(".desc").text()
        val episodes = desc.substringAfter("Episodi:").substringBefore(",")
            .removeSuffix("+").trim().toIntOrNull()
        val year = desc.substringAfter("Anno di inizio:").substringBefore(",")
            .trim().toIntOrNull()

        return newAnimeSearchResponse(title, url, type) {
            addDubStatus(dub, sub, episodes, episodes)
            this.posterUrl = fixUrlNull(posterUrl)
            this.year = year
        }
    }

    private fun Element.episodeToSearchResponse(): AnimeSearchResponse {
        val title = this.select(".item-title a").first()?.text()
            ?: throw ErrorLoadingException("No title found")
        val url = fixUrlNull(this.select("a").first()?.attr("href"))
            ?: throw ErrorLoadingException("No url found")

        val type = getType(this.select(".gr-eps").first()?.text())
        val posterUrl = this.select("img").first()?.attr("src")
        val episodes = this.select("div[style]").first()?.text()
            ?.replace("Ep", "")?.trim()?.toIntOrNull()

        val dubInfo = this.select(".grt-dub").first()?.text()
        val dub = dubInfo?.contains("DUB ITA", ignoreCase = true) ?: false
        val sub = dubInfo?.contains("SUB ITA", ignoreCase = true) ?: true

        return newAnimeSearchResponse(title, url, type) {
            addDubStatus(dub, sub, episodes, episodes)
            this.posterUrl = fixUrlNull(posterUrl)
        }
    }

    private fun Element.toEpisode(season: Int? = null): Episode? {
        val available = this.select(".sli-btn").first() != null
        if (!available)
            return null

        val anchor = this.select(".sli-name a")
        val href = anchor.attr("href")
        val name = anchor.text().substringAfter(":").trim()
        val episode = anchor.text().substringAfter("Episodio").substringBefore(":")
            .trim().toIntOrNull()

        val date = this.select(".sli-name span").text()

        return newEpisode(href) {
            this.name = if (name != "TBA") name else null
            this.season = season
            this.episode = episode
            addDate(date, "dd MMMM yyyy")
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val document = app.get(mainUrl).document
        val list = ArrayList<HomePageList>()

        val episodeList = document.select("#episodiRecenti ul.grid-item li").map {
            it.episodeToSearchResponse()
        }
        list.add(HomePageList("Ultimi Episodi", episodeList))

        val updatedList = document.select("#episodiNuovi ul.grid-item li").map {
            it.episodeToSearchResponse()
        }
        list.add(HomePageList("Ultimi Aggiornamenti", updatedList))

        val recommendedList = document.select("#sliderEvidenza .tvBlock").map {
            it.toSearchResponse()
        }
        list.add(HomePageList("In Evidenza", recommendedList))

        val lastedList = document.select("#sliderUltimeInserite .tvBlock").map {
            it.toSearchResponse()
        }
        list.add(HomePageList("Ultime Inserite", lastedList))
        return HomePageResponse(list)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val document = app.get("$mainUrl/search/?q=$query").document
        return document.select(".tvBlock").map {
            it.toSearchResponse()
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val details = document.select("#animeDetails").first()
            ?: throw ErrorLoadingException("Not found")

        val title = details.select(".dc-title").text()
        val plot = document.select("#tramaLong").first()?.text()
            ?: document.select(".dci-desc").first()?.text()
        val posterUrl = fixUrl(details.select(".dc-thumb img").attr("src"))

        val rating = document.select("#vote_percent").text()
        val trailerUrl = document.select("#media-play iframe").attr("data-url")

        var type: TvType = TvType.Anime
        var duration: String? = null
        var dub = false
        var tags: List<String> = listOf()
        var year: Int? = null
        var status: ShowStatus? = null
        var japName: String? = null

        for (meta in document.select(".dci-spe .dcis")) {
            val key = meta.select("b").text()
            val value = meta.text().removePrefix(key).trim()
            when (key) {
                "Tipo:" -> type = getType(value)
                "Durata:" -> duration = value
                "Lingua:" -> dub = value.contains("DUB ITA", ignoreCase = true)
                "Genere:" -> tags = meta.select("a").map { it.text() }
                "Data:" -> {
                    val values = value.split(",")
                    year = values[0].substringBefore(" a ").trim()
                        .split(" ").getOrNull(2)?.toIntOrNull()
                    status = getStatus(values.getOrNull(1)?.trim())
                }
                // "Titolo giapponese:" -> japName = value
                "Altri titoli:" -> japName = value
            }
        }

        val episodes = mutableListOf<Episode>()
        val seasonElements = document.select("#episodes-sv > li.mainSeas")
        val episodeElements = document.select("#episodes-sv li.ep-item")
        when {
            seasonElements.isNotEmpty() -> {
                seasonElements.forEachIndexed { index, element ->
                    val season = index + 1
                    element.select("li.ep-item").forEach {
                        val episode = it.toEpisode(season)
                        if (episode != null)
                            episodes.add(episode)
                    }
                }
            }
            episodeElements.isNotEmpty() -> {
                episodeElements.forEach {
                    val episode = it.toEpisode()
                    if (episode != null)
                        episodes.add(episode)
                }
            }
            else -> episodes.add(newEpisode(url)) // Movie or Special
        }

        val recommendations = document.select(".related-list ul.grid-item li").map {
            it.episodeToSearchResponse()
        }
        val comingSoon = episodes.isEmpty()

        return newAnimeLoadResponse(title, url, type) {
            addEpisodes(if (dub) DubStatus.Dubbed else DubStatus.Subbed, episodes)
            addPoster(posterUrl)
            addRating(rating)
            addDuration(duration)
            addTrailer(trailerUrl)
            this.japName = japName
            this.year = year
            this.showStatus = status
            this.plot = plot
            this.tags = tags
            this.recommendations = recommendations
            this.comingSoon = comingSoon
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val document = app.get(data).document

        val links = document.select("#main-content.onlyDesktop .goblock-content > div")
        if (links.isEmpty())
            return false

        links.forEach { tab ->
            val sub = tab.select("b").text().contains("SUB")
            tab.select("a.dwButton").forEach {
                val title = document.select("#current_episode_name").text()
                    .substringAfter(":").trim()
                val url = it.attr("href")
                val quality = getQualityFromName(it.text())
                callback.invoke(
                    ExtractorLink(
                        name,
                        (if (sub) "SUB ITA" else "DUB") + (if (title != "TBA") " - $title" else ""),
                        url,
                        referer = url,
                        headers = mapOf("host" to "https://cdn.dreamsub.me"),
                        quality = quality
                    )
                )
            }
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/DubbedAnimeProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.unixTime
import com.lagradost.cloudstream3.APIHolder.unixTimeMS
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import org.jsoup.Jsoup
import java.util.*

class DubbedAnimeProvider : MainAPI() {
    override var mainUrl = "https://bestdubbedanime.com"
    override var name = "DubbedAnime"
    override val hasQuickSearch = true
    override val hasMainPage = true

    override val supportedTypes = setOf(
        TvType.AnimeMovie,
        TvType.Anime,
    )

    data class QueryEpisodeResultRoot(
        @JsonProperty("result")
        val result: QueryEpisodeResult,
    )

    data class QueryEpisodeResult(
        @JsonProperty("anime") val anime: List<EpisodeInfo>,
        @JsonProperty("error") val error: Boolean,
        @JsonProperty("errorMSG") val errorMSG: String?,
    )

    data class EpisodeInfo(
        @JsonProperty("serversHTML") val serversHTML: String,
        @JsonProperty("title") val title: String,
        @JsonProperty("preview_img") val previewImg: String?,
        @JsonProperty("wideImg") val wideImg: String?,
        @JsonProperty("year") val year: String?,
        @JsonProperty("desc") val desc: String?,

        /*
        @JsonProperty("rowid") val rowid: String,
        @JsonProperty("status") val status: String,
        @JsonProperty("skips") val skips: String,
        @JsonProperty("totalEp") val totalEp: Long,
        @JsonProperty("ep") val ep: String,
        @JsonProperty("NextEp") val nextEp: Long,
        @JsonProperty("slug") val slug: String,
        @JsonProperty("showid") val showid: String,
        @JsonProperty("Epviews") val epviews: String,
        @JsonProperty("TotalViews") val totalViews: String,
        @JsonProperty("tags") val tags: String,*/
    )

    private suspend fun parseDocumentTrending(url: String): List<SearchResponse> {
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        return document.select("li > a").mapNotNull {
            val href = fixUrl(it.attr("href"))
            val title = it.selectFirst("> div > div.cittx")?.text() ?: return@mapNotNull null
            val poster = fixUrlNull(it.selectFirst("> div > div.imghddde > img")?.attr("src"))
            AnimeSearchResponse(
                title,
                href,
                this.name,
                TvType.Anime,
                poster,
                null,
                EnumSet.of(DubStatus.Dubbed),
            )
        }
    }

    private suspend fun parseDocument(
        url: String,
        trimEpisode: Boolean = false
    ): List<SearchResponse> {
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        return document.select("a.grid__link").mapNotNull {
            val href = fixUrl(it.attr("href"))
            val title = it.selectFirst("> div.gridtitlek")?.text() ?: return@mapNotNull null
            val poster =
                fixUrl(it.selectFirst("> img.grid__img")?.attr("src") ?: return@mapNotNull null)
            AnimeSearchResponse(
                title,
                if (trimEpisode) href.removeRange(href.lastIndexOf('/'), href.length) else href,
                this.name,
                TvType.Anime,
                poster,
                null,
                EnumSet.of(DubStatus.Dubbed),
            )
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val trendingUrl = "$mainUrl/xz/trending.php?_=$unixTimeMS"
        val lastEpisodeUrl = "$mainUrl/xz/epgrid.php?p=1&_=$unixTimeMS"
        val recentlyAddedUrl = "$mainUrl/xz/gridgrabrecent.php?p=1&_=$unixTimeMS"
        //val allUrl = "$mainUrl/xz/gridgrab.php?p=1&limit=12&_=$unixTimeMS"

        val listItems = listOf(
            HomePageList("Trending", parseDocumentTrending(trendingUrl)),
            HomePageList("Recently Added", parseDocument(recentlyAddedUrl)),
            HomePageList("Recent Releases", parseDocument(lastEpisodeUrl, true)),
            // HomePageList("All", parseDocument(allUrl))
        )

        return HomePageResponse(listItems)
    }


    private suspend fun getEpisode(slug: String, isMovie: Boolean): EpisodeInfo {
        val url =
            mainUrl + (if (isMovie) "/movies/jsonMovie" else "/xz/v3/jsonEpi") + ".php?slug=$slug&_=$unixTime"
        val response = app.get(url).text
        val mapped = mapper.readValue<QueryEpisodeResultRoot>(response)
        return mapped.result.anime.first()
    }


    private fun getIsMovie(href: String): Boolean {
        return href.contains("movies/")
    }

    private fun getSlug(href: String): String {
        return href.replace("$mainUrl/", "")
    }

    override suspend fun quickSearch(query: String): List<SearchResponse> {
        val url = "$mainUrl/xz/searchgrid.php?p=1&limit=12&s=$query&_=$unixTime"
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val items = document.select("div.grid__item > a")
        if (items.isEmpty()) return emptyList()
        return items.mapNotNull { i ->
            val href = fixUrl(i.attr("href"))
            val title = i.selectFirst("div.gridtitlek")?.text() ?: return@mapNotNull null
            val img = fixUrlNull(i.selectFirst("img.grid__img")?.attr("src"))

            if (getIsMovie(href)) {
                MovieSearchResponse(
                    title, href, this.name, TvType.AnimeMovie, img, null
                )
            } else {
                AnimeSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Anime,
                    img,
                    null,
                    EnumSet.of(DubStatus.Dubbed),
                )
            }
        }
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/search/$query"
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val items = document.select("div.resultinner > a.resulta")
        if (items.isEmpty()) return ArrayList()
        return items.mapNotNull { i ->
            val innerDiv = i.selectFirst("> div.result")
            val href = fixUrl(i.attr("href"))
            val img = fixUrl(innerDiv?.selectFirst("> div.imgkz > img")?.attr("src") ?: return@mapNotNull null)
            val title = innerDiv.selectFirst("> div.titleresults")?.text() ?: return@mapNotNull null

            if (getIsMovie(href)) {
                MovieSearchResponse(
                    title, href, this.name, TvType.AnimeMovie, img, null
                )
            } else {
                AnimeSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Anime,
                    img,
                    null,
                    EnumSet.of(DubStatus.Dubbed),
                )
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val serversHTML = (if (data.startsWith(mainUrl)) { // CLASSIC EPISODE
            val slug = getSlug(data)
            getEpisode(slug, false).serversHTML
        } else data).replace("\\", "")

        val hls = ArrayList("hl=\"(.*?)\"".toRegex().findAll(serversHTML).map {
            it.groupValues[1]
        }.toList())
        for (hl in hls) {
            try {
                val sources = app.get("$mainUrl/xz/api/playeri.php?url=$hl&_=$unixTime").text
                val find = "src=\"(.*?)\".*?label=\"(.*?)\"".toRegex().find(sources)
                if (find != null) {
                    val quality = find.groupValues[2]
                    callback.invoke(
                        ExtractorLink(
                            this.name,
                            this.name + " " + quality + if (quality.endsWith('p')) "" else 'p',
                            fixUrl(find.groupValues[1]),
                            this.mainUrl,
                            getQualityFromName(quality)
                        )
                    )
                }
            } catch (e: Exception) {
                //IDK
            }
        }
        return true
    }

    override suspend fun load(url: String): LoadResponse {
        if (getIsMovie(url)) {
            val realSlug = url.replace("movies/", "")
            val episode = getEpisode(realSlug, true)
            val poster = episode.previewImg ?: episode.wideImg
            return MovieLoadResponse(
                episode.title,
                realSlug,
                this.name,
                TvType.AnimeMovie,
                episode.serversHTML,
                if (poster == null) null else fixUrl(poster),
                episode.year?.toIntOrNull(),
                episode.desc,
                null
            )
        } else {
            val response = app.get(url).text
            val document = Jsoup.parse(response)
            val title = document.selectFirst("h4")!!.text()
            val descriptHeader = document.selectFirst("div.animeDescript")
            val descript = descriptHeader?.selectFirst("> p")?.text()
            val year = descriptHeader?.selectFirst("> div.distatsx > div.sroverd")
                ?.text()
                ?.replace("Released: ", "")
                ?.toIntOrNull()

            val episodes = document.select("a.epibloks").map {
                val epTitle = it.selectFirst("> div.inwel > span.isgrxx")?.text()
                Episode(fixUrl(it.attr("href")), epTitle)
            }

            val img = fixUrl(document.select("div.fkimgs > img").attr("src"))
            return newAnimeLoadResponse(title, url, TvType.Anime) {
                posterUrl = img
                this.year = year
                addEpisodes(DubStatus.Dubbed, episodes)
                plot = descript
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/GogoanimeProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.mvvm.normalSafeApiCall
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.utils.*
import org.jsoup.Jsoup
import org.jsoup.nodes.Document
import java.net.URI
import java.util.*
import javax.crypto.Cipher
import javax.crypto.spec.IvParameterSpec
import javax.crypto.spec.SecretKeySpec

class GogoanimeProvider : MainAPI() {
    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }

        fun getStatus(t: String): ShowStatus {
            return when (t) {
                "Completed" -> ShowStatus.Completed
                "Ongoing" -> ShowStatus.Ongoing
                else -> ShowStatus.Completed
            }
        }

        /**
         * @param id base64Decode(show_id) + IV
         * @return the encryption key
         * */
        private fun getKey(id: String): String? {
            return normalSafeApiCall {
                id.map {
                    it.code.toString(16)
                }.joinToString("").substring(0, 32)
            }
        }

        val qualityRegex = Regex("(\\d+)P")

        // https://github.com/saikou-app/saikou/blob/3e756bd8e876ad7a9318b17110526880525a5cd3/app/src/main/java/ani/saikou/anime/source/extractors/GogoCDN.kt#L60
        // No Licence on the function
        private fun cryptoHandler(
            string: String,
            iv: String,
            secretKeyString: String,
            encrypt: Boolean = true
        ): String {
            println("IV: $iv, Key: $secretKeyString, encrypt: $encrypt, Message: $string")
            val ivParameterSpec = IvParameterSpec(iv.toByteArray())
            val secretKey = SecretKeySpec(secretKeyString.toByteArray(), "AES")
            val cipher = Cipher.getInstance("AES/CBC/PKCS5Padding")
            return if (!encrypt) {
                cipher.init(Cipher.DECRYPT_MODE, secretKey, ivParameterSpec)
                String(cipher.doFinal(base64DecodeArray(string)))
            } else {
                cipher.init(Cipher.ENCRYPT_MODE, secretKey, ivParameterSpec)
                base64Encode(cipher.doFinal(string.toByteArray()))
            }
        }

        private fun String.decodeHex(): ByteArray {
            check(length % 2 == 0) { "Must have an even length" }
            return chunked(2)
                .map { it.toInt(16).toByte() }
                .toByteArray()
        }

        /**
         * @param iframeUrl something like https://gogoplay4.com/streaming.php?id=XXXXXX
         * @param mainApiName used for ExtractorLink names and source
         * @param iv secret iv from site, required non-null if isUsingAdaptiveKeys is off
         * @param secretKey secret key for decryption from site, required non-null if isUsingAdaptiveKeys is off
         * @param secretDecryptKey secret key to decrypt the response json, required non-null if isUsingAdaptiveKeys is off
         * @param isUsingAdaptiveKeys generates keys from IV and ID, see getKey()
         * @param isUsingAdaptiveData generate encrypt-ajax data based on $("script[data-name='episode']")[0].dataset.value
         * */
        suspend fun extractVidstream(
            iframeUrl: String,
            mainApiName: String,
            callback: (ExtractorLink) -> Unit,
            iv: String?,
            secretKey: String?,
            secretDecryptKey: String?,
            // This could be removed, but i prefer it verbose
            isUsingAdaptiveKeys: Boolean,
            isUsingAdaptiveData: Boolean
        ) = safeApiCall {
            // https://github.com/saikou-app/saikou/blob/3e756bd8e876ad7a9318b17110526880525a5cd3/app/src/main/java/ani/saikou/anime/source/extractors/GogoCDN.kt
            // No Licence on the following code
            // Also modified of https://github.com/jmir1/aniyomi-extensions/blob/master/src/en/gogoanime/src/eu/kanade/tachiyomi/animeextension/en/gogoanime/extractors/GogoCdnExtractor.kt
            // License on the code above  https://github.com/jmir1/aniyomi-extensions/blob/master/LICENSE

            if ((iv == null || secretKey == null || secretDecryptKey == null) && !isUsingAdaptiveKeys)
                return@safeApiCall

            val id = Regex("id=([^&]+)").find(iframeUrl)!!.value.removePrefix("id=")

            var document: Document? = null
            val foundIv =
                iv ?: app.get(iframeUrl).document.also { document = it }
                    .select("""div.wrapper[class*=container]""")
                    .attr("class").split("-").lastOrNull() ?: return@safeApiCall
            val foundKey = secretKey ?: getKey(base64Decode(id) + foundIv) ?: return@safeApiCall
            val foundDecryptKey = secretDecryptKey ?: foundKey

            val uri = URI(iframeUrl)
            val mainUrl = "https://" + uri.host

            val encryptedId = cryptoHandler(id, foundIv, foundKey)
            val encryptRequestData = if (isUsingAdaptiveData) {
                // Only fetch the document if necessary
                val realDocument = document ?: app.get(iframeUrl).document
                val dataEncrypted =
                    realDocument.select("script[data-name='episode']").attr("data-value")
                val headers = cryptoHandler(dataEncrypted, foundIv, foundKey, false)
                "id=$encryptedId&alias=$id&" + headers.substringAfter("&")
            } else {
                "id=$encryptedId&alias=$id"
            }

            val jsonResponse =
                app.get(
                    "$mainUrl/encrypt-ajax.php?$encryptRequestData",
                    headers = mapOf("X-Requested-With" to "XMLHttpRequest")
                )
            val dataencrypted =
                jsonResponse.text.substringAfter("{\"data\":\"").substringBefore("\"}")
            val datadecrypted = cryptoHandler(dataencrypted, foundIv, foundDecryptKey, false)
            val sources = AppUtils.parseJson<GogoSources>(datadecrypted)

            fun invokeGogoSource(
                source: GogoSource,
                sourceCallback: (ExtractorLink) -> Unit
            ) {
                when {
                    source.file.contains("m3u8") -> {
                        M3u8Helper.generateM3u8(
                            mainApiName,
                            source.file,
                            mainUrl,
                            headers = mapOf("Referer" to "https://gogoplay4.com")
                        ).forEach(sourceCallback)
                    }
                    source.file.contains("vidstreaming") -> {
                        sourceCallback.invoke(
                            ExtractorLink(
                                mainApiName,
                                mainApiName,
                                source.file,
                                mainUrl,
                                getQualityFromName(source.label),
                                isM3u8 = source.type == "hls"
                            )
                        )
                    }
                    else -> {
                        sourceCallback.invoke(
                            ExtractorLink(
                                mainApiName,
                                mainApiName,
                                source.file,
                                mainUrl,
                                getQualityFromName(source.label),
                                isM3u8 = source.type == "hls"
                            )
                        )
                    }
                }
            }

            sources.source?.forEach {
                invokeGogoSource(it, callback)
            }
            sources.sourceBk?.forEach {
                invokeGogoSource(it, callback)
            }
        }
    }

    override var mainUrl = "https://gogoanime.film"
    override var name = "GogoAnime"
    override val hasQuickSearch = false
    override val hasMainPage = true

    override val supportedTypes = setOf(
        TvType.AnimeMovie,
        TvType.Anime,
        TvType.OVA
    )

    override suspend fun getMainPage(): HomePageResponse {
        val headers = mapOf(
            "authority" to "ajax.gogo-load.com",
            "sec-ch-ua" to "\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\"",
            "accept" to "text/html, */*; q=0.01",
            "dnt" to "1",
            "sec-ch-ua-mobile" to "?0",
            "user-agent" to "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
            "origin" to mainUrl,
            "sec-fetch-site" to "cross-site",
            "sec-fetch-mode" to "cors",
            "sec-fetch-dest" to "empty",
            "referer" to "$mainUrl/"
        )
        val parseRegex =
            Regex("""<li>\s*\n.*\n.*<a\s*href=["'](.*?-episode-(\d+))["']\s*title=["'](.*?)["']>\n.*?img src="(.*?)"""")

        val urls = listOf(
            Pair("1", "Recent Release - Sub"),
            Pair("2", "Recent Release - Dub"),
            Pair("3", "Recent Release - Chinese"),
        )

        val items = ArrayList<HomePageList>()
        for (i in urls) {
            try {
                val params = mapOf("page" to "1", "type" to i.first)
                val html = app.get(
                    "https://ajax.gogo-load.com/ajax/page-recent-release.html",
                    headers = headers,
                    params = params
                )
                items.add(HomePageList(i.second, (parseRegex.findAll(html.text).map {
                    val (link, epNum, title, poster) = it.destructured
                    val isSub = listOf(1, 3).contains(i.first.toInt())
                    newAnimeSearchResponse(title, link) {
                        this.posterUrl = poster
                        addDubStatus(!isSub, epNum.toIntOrNull())
                    }
                }).toList()))
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): ArrayList<SearchResponse> {
        val link = "$mainUrl/search.html?keyword=$query"
        val html = app.get(link).text
        val doc = Jsoup.parse(html)

        val episodes = doc.select(""".last_episodes li""").mapNotNull {
            AnimeSearchResponse(
                it.selectFirst(".name")?.text()?.replace(" (Dub)", "") ?: return@mapNotNull null,
                fixUrl(it.selectFirst(".name > a")?.attr("href") ?: return@mapNotNull null),
                this.name,
                TvType.Anime,
                it.selectFirst("img")?.attr("src"),
                it.selectFirst(".released")?.text()?.split(":")?.getOrNull(1)?.trim()
                    ?.toIntOrNull(),
                if (it.selectFirst(".name")?.text()
                        ?.contains("Dub") == true
                ) EnumSet.of(DubStatus.Dubbed) else EnumSet.of(
                    DubStatus.Subbed
                ),
            )
        }

        return ArrayList(episodes)
    }

    private fun getProperAnimeLink(uri: String): String {
        if (uri.contains("-episode")) {
            val split = uri.split("/")
            val slug = split[split.size - 1].split("-episode")[0]
            return "$mainUrl/category/$slug"
        }
        return uri
    }

    override suspend fun load(url: String): LoadResponse {
        val link = getProperAnimeLink(url)
        val episodeloadApi = "https://ajax.gogo-load.com/ajax/load-list-episode"
        val html = app.get(link).text
        val doc = Jsoup.parse(html)

        val animeBody = doc.selectFirst(".anime_info_body_bg")
        val title = animeBody?.selectFirst("h1")!!.text()
        val poster = animeBody.selectFirst("img")?.attr("src")
        var description: String? = null
        val genre = ArrayList<String>()
        var year: Int? = null
        var status: String? = null
        var nativeName: String? = null
        var type: String? = null

        animeBody.select("p.type").forEach { pType ->
            when (pType.selectFirst("span")?.text()?.trim()) {
                "Plot Summary:" -> {
                    description = pType.text().replace("Plot Summary:", "").trim()
                }
                "Genre:" -> {
                    genre.addAll(pType.select("a").map {
                        it.attr("title")
                    })
                }
                "Released:" -> {
                    year = pType.text().replace("Released:", "").trim().toIntOrNull()
                }
                "Status:" -> {
                    status = pType.text().replace("Status:", "").trim()
                }
                "Other name:" -> {
                    nativeName = pType.text().replace("Other name:", "").trim()
                }
                "Type:" -> {
                    type = pType.text().replace("type:", "").trim()
                }
            }
        }

        val animeId = doc.selectFirst("#movie_id")!!.attr("value")
        val params = mapOf("ep_start" to "0", "ep_end" to "2000", "id" to animeId)

        val episodes = app.get(episodeloadApi, params = params).document.select("a").map {
            Episode(
                fixUrl(it.attr("href").trim()),
                "Episode " + it.selectFirst(".name")?.text()?.replace("EP", "")?.trim()
            )
        }.reversed()

        return newAnimeLoadResponse(title, link, getType(type.toString())) {
            japName = nativeName
            engName = title
            posterUrl = poster
            this.year = year
            addEpisodes(DubStatus.Subbed, episodes) // TODO CHECK
            plot = description
            tags = genre

            showStatus = getStatus(status.toString())
        }
    }

    data class GogoSources(
        @JsonProperty("source") val source: List<GogoSource>?,
        @JsonProperty("sourceBk") val sourceBk: List<GogoSource>?,
        //val track: List<Any?>,
        //val advertising: List<Any?>,
        //val linkiframe: String
    )

    data class GogoSource(
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String?,
        @JsonProperty("type") val type: String?,
        @JsonProperty("default") val default: String? = null
    )

    private suspend fun extractVideos(uri: String, callback: (ExtractorLink) -> Unit) {
        val doc = app.get(uri).document

        val iframe = fixUrlNull(doc.selectFirst("div.play-video > iframe")?.attr("src")) ?: return

        argamap(
            {
                val link = iframe.replace("streaming.php", "download")
                val page = app.get(link, headers = mapOf("Referer" to iframe))

                page.document.select(".dowload > a").apmap {
                    if (it.hasAttr("download")) {
                        val qual = if (it.text()
                                .contains("HDP")
                        ) "1080" else qualityRegex.find(it.text())?.destructured?.component1()
                            .toString()
                        callback(
                            ExtractorLink(
                                "Gogoanime",
                                "Gogoanime",
                                it.attr("href"),
                                page.url,
                                getQualityFromName(qual),
                                it.attr("href").contains(".m3u8")
                            )
                        )
                    } else {
                        val url = it.attr("href")
                        loadExtractor(url, null, callback)
                    }
                }
            }, {
                val streamingResponse = app.get(iframe, headers = mapOf("Referer" to iframe))
                val streamingDocument = streamingResponse.document
                argamap({
                    streamingDocument.select(".list-server-items > .linkserver")
                        ?.forEach { element ->
                            val status = element.attr("data-status") ?: return@forEach
                            if (status != "1") return@forEach
                            val data = element.attr("data-video") ?: return@forEach
                            loadExtractor(data, streamingResponse.url, callback)
                        }
                }, {
                    val iv = "3134003223491201"
                    val secretKey = "37911490979715163134003223491201"
                    val secretDecryptKey = "54674138327930866480207815084989"
                    extractVidstream(
                        iframe,
                        this.name,
                        callback,
                        iv,
                        secretKey,
                        secretDecryptKey,
                        isUsingAdaptiveKeys = false,
                        isUsingAdaptiveData = true
                    )
                })
            }
        )
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        extractVideos(data, callback)
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/GomunimeProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import org.jsoup.Jsoup
import java.util.*
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.utils.*
import com.lagradost.cloudstream3.utils.AppUtils.parseJson

class GomunimeProvider : MainAPI() {
    override var mainUrl = "https://185.231.223.76"
    override var name = "Gomunime"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val lang = "id"
    override val hasDownloadSupport = true

    override val supportedTypes = setOf(
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.OVA
    )

    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }

        fun getStatus(t: String): ShowStatus {
            return when (t) {
                "Completed" -> ShowStatus.Completed
                "Ongoing" -> ShowStatus.Ongoing
                else -> ShowStatus.Completed
            }
        }
    }

    private data class Response(
        @JsonProperty("status") val status: Boolean,
        @JsonProperty("html") val html: String
    )

    override suspend fun getMainPage(): HomePageResponse {
        val urls = listOf(
            Pair("e", "Episode Baru"),
            Pair("c", "Completed"),
            Pair("la", "Live Action"),
            Pair("t", "Trending"),
        )

        val items = ArrayList<HomePageList>()

        for ((payload, name) in urls) {
            try {
                val home = Jsoup.parse(
                    parseJson<Response>(
                        app.post(
                            url = "$mainUrl/wp-admin/admin-ajax.php/wp-admin/admin-ajax.php",
                            headers = mapOf("Referer" to mainUrl),
                            data = mapOf("action" to "home_ajax", "fungsi" to payload, "pag" to "1")
                        ).text
                    ).html
                ).select("li").map {
                    val title = it.selectFirst("a.name")!!.text().trim()
                    val href = getProperAnimeLink(it.selectFirst("a")!!.attr("href"))
                    val posterUrl = it.selectFirst("img")!!.attr("src")
                    val type = getType(it.selectFirst(".taglist > span")!!.text().trim())
                    val epNum = it.select(".tag.ep").text().replace(Regex("[^0-9]"), "").trim()
                        .toIntOrNull()
                    newAnimeSearchResponse(title, href, type) {
                        this.posterUrl = posterUrl
                        addDubStatus(dubExist = false, subExist = true, subEpisodes = epNum)
                    }
                }
                items.add(HomePageList(name, home))
            } catch (e: Exception) {
                logError(e)
            }
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    private fun getProperAnimeLink(uri: String): String {
        return if (uri.contains("-episode")) {
            val href =
                "$mainUrl/anime/" + Regex("\\w\\d/(.*)-episode.*").find(uri)?.groupValues?.get(1)
                    .toString()
            when {
                href.contains("pokemon") -> href.replace(Regex("-[0-9]+"), "")
                else -> href
            }
        } else {
            uri
        }
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/?s=$query"
        val document = app.get(link).document

        return document.select(".anime-list > li").map {
            val title = it.selectFirst("a.name")!!.text()
            val poster = it.selectFirst("img")!!.attr("src")
            val tvType = getType(it.selectFirst(".taglist > span")?.text().toString())
            val href = fixUrl(it.selectFirst("a.name")!!.attr("href"))

            newAnimeSearchResponse(title, href, tvType) {
                this.posterUrl = poster
                addDubStatus(dubExist = false, subExist = true)
            }
        }
    }

    private data class EpisodeElement(
        @JsonProperty("data-index") val dataIndex: Long?,
        @JsonProperty("ep-num") val epNum: String?,
        @JsonProperty("ep-title") val epTitle: String?,
        @JsonProperty("ep-link") val epLink: String,
        @JsonProperty("ep-date") val epDate: String?
    )

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val title = document.selectFirst(".entry-title")?.text().toString()
        val poster = document.selectFirst(".thumbposter > img")?.attr("data-lazy-src")
        val tags = document.select(".genxed > a").map { it.text() }

        val year = Regex("\\d, ([0-9]*)").find(
            document.select("time[itemprop = datePublished]").text()
        )?.groupValues?.get(1)?.toIntOrNull()
        val status = getStatus(document.selectFirst(".spe > span")!!.ownText())
        val description = document.select("div[itemprop = description] > p").text()

        val episodes = parseJson<List<EpisodeElement>>(
            Regex("var episodelist = (\\[.*])").find(
                document.select(".bixbox.bxcl.epcheck > script").toString().trim()
            )?.groupValues?.get(1).toString().replace(Regex("""\\"""), "").trim()
        ).map {
            val name = it.epTitle
            val link = it.epLink
            Episode(link, name)
        }.reversed()

        return newAnimeLoadResponse(title, url, TvType.Anime) {
            engName = title
            posterUrl = poster
            this.year = year
            addEpisodes(DubStatus.Subbed, episodes)
            showStatus = status
            plot = description
            this.tags = tags
        }
    }

    data class MobiSource(
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String,
        @JsonProperty("type") val type: String
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val document = app.get(data).document

        val scriptData = document.select("aside.sidebar > script").dataNodes().toString()
        val key = scriptData.substringAfter("var a_ray = '").substringBefore("';")
        val title = scriptData.substringAfter("var judul_postingan = \"").substringBefore("\";")

        val sources: List<Pair<String, String>> = app.post(
            url = "https://path.gomuni.me/app/vapi.php",
            data = mapOf("data" to key, "judul" to title, "func" to "mirror")
        ).document.select("div.gomunime-server-mirror").map {
            Pair(
                it.attr("data-vhash"),
                it.attr("data-type")
            )
        }

        sources.apmap {
            safeApiCall {
                when {
                    it.second.contains("frame") -> {
                        loadExtractor(it.first, data, callback)
                    }
                    it.second.contains("hls") -> {
                        app.post(
                            url = "https://path.gomuni.me/app/vapi.php",
                            data = mapOf("fid" to it.first, "func" to "hls")
                        ).text.let { link ->
                            M3u8Helper.generateM3u8(
                                this.name,
                                link,
                                "$mainUrl/",
                                headers = mapOf("Origin" to mainUrl)
                            ).forEach(callback)
                        }
                    }
                    it.second.contains("mp4") -> {
                        app.post(
                            url = "https://path.gomuni.me/app/vapi.php",
                            data = mapOf("data" to it.first, "func" to "blogs")
                        ).parsed<List<MobiSource>>().map {
                            callback.invoke(
                                ExtractorLink(
                                    source = name,
                                    name = "Mobi SD",
                                    url = it.file,
                                    referer = "$mainUrl/",
                                    quality = Qualities.P360.value
                                )
                            )
                        }
                    }
                    else -> null
                }
            }
        }

        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/KawaiifuProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import org.jsoup.Jsoup
import java.util.*

class KawaiifuProvider : MainAPI() {
    override var mainUrl = "https://kawaiifu.com"
    override var name = "Kawaiifu"
    override val hasQuickSearch = false
    override val hasMainPage = true

    override val supportedTypes = setOf(TvType.Anime, TvType.AnimeMovie)

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val resp = app.get(mainUrl).text

        val soup = Jsoup.parse(resp)

        items.add(HomePageList("Latest Updates", soup.select(".today-update .item").mapNotNull {
            val title = it.selectFirst("img")?.attr("alt")
            AnimeSearchResponse(
                title ?: return@mapNotNull null,
                it.selectFirst("a")?.attr("href") ?: return@mapNotNull null,
                this.name,
                TvType.Anime,
                it.selectFirst("img")?.attr("src"),
                it.selectFirst("h4 > a")?.attr("href")?.split("-")?.last()?.toIntOrNull(),
                if (title.contains("(DUB)")) EnumSet.of(DubStatus.Dubbed) else EnumSet.of(
                    DubStatus.Subbed
                ),
            )
        }))
        for (section in soup.select(".section")) {
            try {
                val title = section.selectFirst(".title")!!.text()
                val anime = section.select(".list-film > .item").mapNotNull { ani ->
                    val animTitle = ani.selectFirst("img")?.attr("alt")
                    AnimeSearchResponse(
                        animTitle ?: return@mapNotNull null,
                        ani.selectFirst("a")?.attr("href") ?: return@mapNotNull null,
                        this.name,
                        TvType.Anime,
                        ani.selectFirst("img")?.attr("src"),
                        ani.selectFirst(".vl-chil-date")?.text()?.toIntOrNull(),
                        if (animTitle.contains("(DUB)")) EnumSet.of(DubStatus.Dubbed) else EnumSet.of(
                            DubStatus.Subbed
                        ),
                    )
                }
                items.add(HomePageList(title, anime))

            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }


    override suspend fun search(query: String): ArrayList<SearchResponse> {
        val link = "$mainUrl/search-movie?keyword=${query}"
        val html = app.get(link).text
        val soup = Jsoup.parse(html)

        return ArrayList(soup.select(".item").mapNotNull {
            val year = it.selectFirst("h4 > a")?.attr("href")?.split("-")?.last()?.toIntOrNull()
            val title = it.selectFirst("img")?.attr("alt") ?: return@mapNotNull null
            val poster = it.selectFirst("img")?.attr("src")
            val uri = it.selectFirst("a")?.attr("href") ?: return@mapNotNull null
            AnimeSearchResponse(
                title,
                uri,
                this.name,
                TvType.Anime,
                poster,
                year,
                if (title.contains("(DUB)")) EnumSet.of(DubStatus.Dubbed) else EnumSet.of(DubStatus.Subbed),
            )
        })
    }

    override suspend fun load(url: String): LoadResponse {
        val html = app.get(url).text
        val soup = Jsoup.parse(html)

        val title = soup.selectFirst(".title")!!.text()
        val tags = soup.select(".table a[href*=\"/tag/\"]").map { tag -> tag.text() }
        val description = soup.select(".sub-desc p")
            .filter { it.select("strong").isEmpty() && it.select("iframe").isEmpty() }
            .joinToString("\n") { it.text() }
        val year = url.split("/").filter { it.contains("-") }[0].split("-")[1].toIntOrNull()

        val episodesLink = soup.selectFirst("a[href*=\".html-episode\"]")?.attr("href")
            ?: throw ErrorLoadingException("Error getting episode list")
        val episodes = Jsoup.parse(
            app.get(episodesLink).text
        ).selectFirst(".list-ep")?.select("li")?.map {
            Episode(
                it.selectFirst("a")!!.attr("href"),
                if (it.text().trim().toIntOrNull() != null) "Episode ${
                    it.text().trim()
                }" else it.text().trim()
            )
        }
        val poster = soup.selectFirst("a.thumb > img")?.attr("src")

        return newAnimeLoadResponse(title, url, TvType.Anime) {
            this.year = year
            posterUrl = poster
            addEpisodes(DubStatus.Subbed, episodes)
            plot = description
            this.tags = tags
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val htmlSource = app.get(data).text
        val soupa = Jsoup.parse(htmlSource)

        val episodeNum =
            if (data.contains("ep=")) data.split("ep=")[1].split("&")[0].toIntOrNull() else null

        val servers = soupa.select(".list-server").map {
            val serverName = it.selectFirst(".server-name")!!.text()
            val episodes = it.select(".list-ep > li > a")
                .map { episode -> Pair(episode.attr("href"), episode.text()) }
            val episode = if (episodeNum == null) episodes[0] else episodes.mapNotNull { ep ->
                if ((if (ep.first.contains("ep=")) ep.first.split("ep=")[1].split("&")[0].toIntOrNull() else null) == episodeNum) {
                    ep
                } else null
            }[0]
            Pair(serverName, episode)
        }.map {
            if (it.second.first == data) {
                val sources = soupa.select("video > source")
                    .map { source -> Pair(source.attr("src"), source.attr("data-quality")) }
                Triple(it.first, sources, it.second.second)
            } else {
                val html = app.get(it.second.first).text
                val soup = Jsoup.parse(html)

                val sources = soup.select("video > source")
                    .map { source -> Pair(source.attr("src"), source.attr("data-quality")) }
                Triple(it.first, sources, it.second.second)
            }
        }

        servers.forEach {
            it.second.forEach { source ->
                callback(
                    ExtractorLink(
                        "Kawaiifu",
                        it.first,
                        source.first,
                        "",
                        getQualityFromName(source.second),
                        source.first.contains(".m3u")
                    )
                )
            }
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/KuramanimeProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.network.DdosGuardKiller
import com.lagradost.cloudstream3.utils.ExtractorLink
import org.jsoup.Jsoup
import org.jsoup.nodes.Element
import java.util.*

class KuramanimeProvider : MainAPI() {
    override var mainUrl = "https://kuramanime.com"
    override var name = "Kuramanime"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val lang = "id"
    override val hasDownloadSupport = true

    override val supportedTypes = setOf(
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.OVA
    )

    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }

        fun getStatus(t: String): ShowStatus {
            return when (t) {
                "Selesai Tayang" -> ShowStatus.Completed
                "Sedang Tayang" -> ShowStatus.Ongoing
                else -> ShowStatus.Completed
            }
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val document = app.get(mainUrl).document

        val homePageList = ArrayList<HomePageList>()

        document.select("div[class*=__product]").forEach { block ->
            val header = block.select(".section-title > h4").text()
            val animes = block.select("div.col-lg-4.col-md-6.col-sm-6").mapNotNull {
                it.toSearchResult()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        document.select("#topAnimesSection").forEach { block ->
            val header = block.previousElementSibling()!!.select("h5").text().trim()
            val animes = block.select("a").mapNotNull {
                it.toSearchResultView()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        document.select("#latestCommentSection").forEach { block ->
            val header = block.previousElementSibling()!!.select("h5").text().trim()
            val animes = block.select(".product__sidebar__comment__item").mapNotNull {
                it.toSearchResultComment()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        return HomePageResponse(homePageList)
    }

    private fun getProperAnimeLink(uri: String): String {
        return if (uri.contains("/episode")) {
            Regex("(.*)/episode/.+").find(uri)?.groupValues?.get(1).toString() + "/"
        } else {
            uri
        }
    }

    private fun Element.toSearchResult(): SearchResponse {
        val href = getProperAnimeLink(fixUrl(this.selectFirst("a")!!.attr("href")))
        val title = this.select(".product__item__text > h5 > a").text()
        val posterUrl = fixUrl(this.select(".product__item__pic.set-bg").attr("data-setbg"))
        val type = getType(this.selectFirst(".product__item__text > ul > li")!!.text())

        return newAnimeSearchResponse(title, href, type) {
            this.posterUrl = posterUrl
            addDubStatus(dubExist = false, subExist = true)
        }

    }

    private fun Element.toSearchResultView(): SearchResponse {
        val href = getProperAnimeLink(fixUrl(this.attr("href")))
        val title = this.selectFirst("h5")!!.text().trim()
        val posterUrl =
            fixUrl(this.select(".product__sidebar__view__item.set-bg").attr("data-setbg"))

        return newAnimeSearchResponse(title, href, TvType.Anime) {
            this.posterUrl = posterUrl
            addDubStatus(dubExist = false, subExist = true)
        }

    }

    private fun Element.toSearchResultComment(): SearchResponse {
        val href = getProperAnimeLink(fixUrl(this.selectFirst("a")!!.attr("href")))
        val title = this.selectFirst("h5")!!.text()
        val posterUrl = fixUrl(this.select("img").attr("src"))
        val type = getType(this.selectFirst("ul > li")!!.text())

        return newAnimeSearchResponse(title, href, type) {
            this.posterUrl = posterUrl
            addDubStatus(dubExist = false, subExist = true)
        }

    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/anime?search=$query&order_by=oldest"
        val document = app.get(link).document

        return document.select(".product__item").mapNotNull {
            val title = it.selectFirst("div.product__item__text > h5")!!.text().trim()
            val poster = it.selectFirst("a > div")!!.attr("data-setbg")
            val tvType =
                getType(it.selectFirst(".product__item__text > ul > li")!!.text().toString())
            val href = fixUrl(it.selectFirst("a")!!.attr("href"))

            newAnimeSearchResponse(title, href, tvType) {
                this.posterUrl = poster
                addDubStatus(dubExist = false, subExist = true)
            }
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val title = document.selectFirst(".anime__details__title > h3")!!.text().trim()
        val poster = document.selectFirst(".anime__details__pic")?.attr("data-setbg")
        val tags =
            document.select("div.anime__details__widget > div > div:nth-child(2) > ul > li:nth-child(1)")
                .text().trim().replace("Genre: ", "").split(", ")

        val year = Regex("[^0-9]").replace(
            document.select("div.anime__details__widget > div > div:nth-child(1) > ul > li:nth-child(5)")
                .text().trim().replace("Musim: ", ""), ""
        ).toIntOrNull()
        val status = getStatus(
            document.select("div.anime__details__widget > div > div:nth-child(1) > ul > li:nth-child(3)")
                .text().trim().replace("Status: ", "")
        )
        val description = document.select(".anime__details__text > p").text().trim()

        val episodes =
            Jsoup.parse(document.select("#episodeLists").attr("data-content")).select("a").map {
                val name = it.text().trim()
                val link = it.attr("href")
                Episode(link, name)
            }

        val recommendations = document.select("div#randomList > a").mapNotNull {
            val epHref = it.attr("href")
            val epTitle = it.select("h5.sidebar-title-h5.px-2.py-2").text()
            val epPoster = it.select(".product__sidebar__view__item.set-bg").attr("data-setbg")

            newAnimeSearchResponse(epTitle, epHref, TvType.Anime) {
                this.posterUrl = epPoster
                addDubStatus(dubExist = false, subExist = true)
            }
        }

        return newAnimeLoadResponse(title, url, TvType.Anime) {
            engName = title
            posterUrl = poster
            this.year = year
            addEpisodes(DubStatus.Subbed, episodes)
            showStatus = status
            plot = description
            this.tags = tags
            this.recommendations = recommendations
        }

    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val servers = app.get(data, interceptor = DdosGuardKiller(true)).document
        servers.select("video#player > source").map {
            val url = it.attr("src")
            val quality = it.attr("size").toInt()
            callback.invoke(
                ExtractorLink(
                    name,
                    name,
                    url,
                    referer = "$mainUrl/",
                    quality = quality
                )
            )
        }

        return true
    }

}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/KuronimeProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.utils.*
import org.jsoup.Jsoup
import org.jsoup.nodes.Element
import java.util.ArrayList

class KuronimeProvider : MainAPI() {
    override var mainUrl = "https://185.231.223.254"
    override var name = "Kuronime"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val lang = "id"
    override val hasDownloadSupport = true

    override val supportedTypes = setOf(
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.OVA
    )

    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }

        fun getStatus(t: String): ShowStatus {
            return when (t) {
                "Completed" -> ShowStatus.Completed
                "Ongoing" -> ShowStatus.Ongoing
                else -> ShowStatus.Completed
            }
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val document = app.get(mainUrl).document

        val homePageList = ArrayList<HomePageList>()

        document.select(".bixbox").forEach { block ->
            val header = block.select(".releases > h3").text().trim()
            val animes = block.select("article").mapNotNull {
                it.toSearchResult()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        return HomePageResponse(homePageList)
    }

    private fun getProperAnimeLink(uri: String): String {
        return if (uri.contains("/anime/")) {
            uri
        } else {
            var title = uri.substringAfter("$mainUrl/")
            title = when {
                (title.contains("-episode")) && !(title.contains("-movie")) -> Regex("nonton-(.+)-episode").find(
                    title
                )?.groupValues?.get(1).toString()
                (title.contains("-movie")) -> Regex("nonton-(.+)-movie").find(title)?.groupValues?.get(
                    1
                ).toString()
                else -> title
            }

            "$mainUrl/anime/$title"
        }
    }

    private fun Element.toSearchResult(): SearchResponse {
        val href = getProperAnimeLink(fixUrl(this.select("a").attr("href")))
        val title = this.select(".bsuxtt, .tt > h4").text().trim()
        val posterUrl = fixUrl(this.select("img").attr("src"))
        val epNum = this.select(".ep").text().replace(Regex("[^0-9]"), "").trim().toIntOrNull()

        return newAnimeSearchResponse(title, href, TvType.Anime) {
            this.posterUrl = posterUrl
            addDubStatus(dubExist = false, subExist = true, subEpisodes = epNum)
        }

    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/?s=$query"
        val document = app.get(link).document

        return document.select("article.bs").mapNotNull {
            val title = it.selectFirst(".tt > h4")!!.text().trim()
            val poster = it.select("img").attr("src")
            val tvType = getType(it.selectFirst(".bt > span")?.text().toString())
            val href = getProperAnimeLink(fixUrl(it.selectFirst("a")!!.attr("href")))

            newAnimeSearchResponse(title, href, tvType) {
                this.posterUrl = poster
                addDubStatus(dubExist = false, subExist = true)
            }
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val title = document.selectFirst(".entry-title")?.text().toString().trim()
        val poster = document.select("div[itemprop=image]").joinToString {
            it.select("img").attr("src")
        }
        val tags = document.select(".infodetail > ul > li:nth-child(2) > a").map { it.text() }
        val type = getType(
            document.selectFirst(".infodetail > ul > li:nth-child(7)")?.ownText()?.trim().toString()
        )
        val trailer = document.select("iframe.entered.lazyloaded").attr("src")
        val year = Regex("\\d, ([0-9]*)").find(
            document.select(".infodetail > ul > li:nth-child(5)").text()
        )?.groupValues?.get(1)?.toIntOrNull()
        val status = getStatus(
            document.selectFirst(".infodetail > ul > li:nth-child(3)")!!.ownText()
                .replace(Regex("\\W"), "")
        )
        val description = document.select("span.const > p").text()

        val episodes = document.select("div.bixbox.bxcl > ul > li").map {
            val name = it.selectFirst("a")?.text()?.trim()?.replace("Episode", title)
            val link = it.selectFirst("a")!!.attr("href")
            Episode(link, name)
        }.reversed()

        return newAnimeLoadResponse(title, url, type) {
            engName = title
            posterUrl = poster
            this.year = year
            addEpisodes(DubStatus.Subbed, episodes)
            showStatus = status
            plot = description
            addTrailer(trailer)
            this.tags = tags
            trailers = listOf(trailer)
        }
    }

    private suspend fun invokeKuroSource(
        url: String,
        sourceCallback: (ExtractorLink) -> Unit
    ) {
        val doc = app.get(url).document

        doc.select("script").map { script ->
            if (script.data().contains("function jalankan_jwp() {")) {
                val data = script.data()
                val doma = data.substringAfter("var doma = \"").substringBefore("\";")
                val token = data.substringAfter("var token = \"").substringBefore("\";")
                val pat = data.substringAfter("var pat = \"").substringBefore("\";")
                val link = "$doma$token$pat/index.m3u8"
                val quality =
                    Regex("\\d{3,4}p").find(doc.select("title").text())?.groupValues?.get(0)

                sourceCallback.invoke(
                    ExtractorLink(
                        this.name,
                        this.name,
                        link,
                        referer = "https://animeku.org/",
                        quality = getQualityFromName(quality),
                        headers = mapOf("Origin" to "https://animeku.org"),
                        isM3u8 = true
                    )
                )
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val document = app.get(data).document
        val sources = document.select(".mobius > .mirror > option").mapNotNull {
            fixUrl(Jsoup.parse(base64Decode(it.attr("value"))).select("iframe").attr("src"))
        }

        sources.apmap {
            safeApiCall {
                when {
                    it.startsWith("https://animeku.org") -> invokeKuroSource(it, callback)
                    else -> loadExtractor(it, mainUrl, callback)
                }
            }
        }
        return true
    }

}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/MonoschinosProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.extractors.FEmbed
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import java.util.*


class MonoschinosProvider : MainAPI() {
    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Especial")) TvType.OVA
            else if (t.contains("Pelicula")) TvType.AnimeMovie
            else TvType.Anime
        }

        fun getDubStatus(title: String): DubStatus {
            return if (title.contains("Latino") || title.contains("Castellano"))
                DubStatus.Dubbed
            else DubStatus.Subbed
        }
    }

    override var mainUrl = "https://monoschinos2.com"
    override var name = "Monoschinos"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.AnimeMovie,
        TvType.OVA,
        TvType.Anime,
    )

    override suspend fun getMainPage(): HomePageResponse {
        val urls = listOf(
            Pair("$mainUrl/emision", "En emisiÃ³n"),
            Pair(
                "$mainUrl/animes?categoria=pelicula&genero=false&fecha=false&letra=false",
                "Peliculas"
            ),
            Pair("$mainUrl/animes", "Animes"),
        )

        val items = ArrayList<HomePageList>()

        items.add(
            HomePageList(
                "CapÃ­tulos actualizados",
                app.get(mainUrl, timeout = 120).document.select(".col-6").map {
                    val title = it.selectFirst("p.animetitles")!!.text()
                    val poster = it.selectFirst(".animeimghv")!!.attr("data-src")
                    val epRegex = Regex("episodio-(\\d+)")
                    val url = it.selectFirst("a")?.attr("href")!!.replace("ver/", "anime/")
                        .replace(epRegex, "sub-espanol")
                    val epNum = it.selectFirst(".positioning h5")?.text()?.toIntOrNull()
                    newAnimeSearchResponse(title, url) {
                        this.posterUrl = fixUrl(poster)
                        addDubStatus(getDubStatus(title), epNum)
                    }
                })
        )

        for (i in urls) {
            try {
                val home = app.get(i.first, timeout = 120).document.select(".col-6").map {
                    val title = it.selectFirst(".seristitles")!!.text()
                    val poster = it.selectFirst("img.animemainimg")!!.attr("src")
                    newAnimeSearchResponse(title, fixUrl(it.selectFirst("a")!!.attr("href"))) {
                        this.posterUrl = fixUrl(poster)
                        addDubStatus(getDubStatus(title))
                    }
                }

                items.add(HomePageList(i.second, home))
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): ArrayList<SearchResponse> {
        val search =
            app.get("$mainUrl/buscar?q=$query", timeout = 120).document.select(".col-6").map {
                val title = it.selectFirst(".seristitles")!!.text()
                val href = fixUrl(it.selectFirst("a")!!.attr("href"))
                val image = it.selectFirst("img.animemainimg")!!.attr("src")
                AnimeSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Anime,
                    fixUrl(image),
                    null,
                    if (title.contains("Latino") || title.contains("Castellano")) EnumSet.of(
                        DubStatus.Dubbed
                    ) else EnumSet.of(DubStatus.Subbed),
                )
            }
        return ArrayList(search)
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url, timeout = 120).document
        val poster = doc.selectFirst(".chapterpic img")!!.attr("src")
        val title = doc.selectFirst(".chapterdetails h1")!!.text()
        val type = doc.selectFirst("div.chapterdetls2")!!.text()
        val description = doc.selectFirst("p.textComplete")!!.text().replace("Ver menos", "")
        val genres = doc.select(".breadcrumb-item a").map { it.text() }
        val status = when (doc.selectFirst("button.btn1")?.text()) {
            "Estreno" -> ShowStatus.Ongoing
            "Finalizado" -> ShowStatus.Completed
            else -> null
        }
        val episodes = doc.select("div.col-item").map {
            val name = it.selectFirst("p.animetitles")!!.text()
            val link = it.selectFirst("a")!!.attr("href")
            val epThumb = it.selectFirst(".animeimghv")!!.attr("data-src")
            Episode(link, name, posterUrl = epThumb)
        }
        return newAnimeLoadResponse(title, url, getType(type)) {
            posterUrl = poster
            addEpisodes(DubStatus.Subbed, episodes)
            showStatus = status
            plot = description
            tags = genres
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document.select("div.playother p").forEach {
            val encodedurl = it.select("p").attr("data-player")
            val urlDecoded = base64Decode(encodedurl)
            val url = (urlDecoded).replace("https://monoschinos2.com/reproductor?url=", "")
            if (url.startsWith("https://www.fembed.com")) {
                val extractor = FEmbed()
                extractor.getUrl(url).forEach { link ->
                    callback.invoke(link)
                }
            } else {
                loadExtractor(url, mainUrl, callback)
            }
        }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/NeonimeProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.nodes.Element
import java.util.*

class NeonimeProvider : MainAPI() {
    override var mainUrl = "https://neonime.watch"
    override var name = "Neonime"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val lang = "id"
    override val hasDownloadSupport = true

    override val supportedTypes = setOf(
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.OVA
    )

    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }

        fun getStatus(t: String): ShowStatus {
            return when (t) {
                "Ended"  -> ShowStatus.Completed
                "OnGoing" -> ShowStatus.Ongoing
                "Ongoing" -> ShowStatus.Ongoing
                "In Production" -> ShowStatus.Ongoing
                "Returning Series" -> ShowStatus.Ongoing
                else -> ShowStatus.Completed
            }
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val document = app.get(mainUrl).document

        val homePageList = ArrayList<HomePageList>()

        document.select("div.item_1.items").forEach { block ->
            val header = block.previousElementSibling()?.select("h1")!!.text()
            val animes = block.select("div.item").mapNotNull {
                it.toSearchResult()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        return HomePageResponse(homePageList)
    }

    private fun getProperAnimeLink(uri: String): String {
        return when {
            uri.contains("/episode") -> {
                val href = "$mainUrl/tvshows/" + Regex("episode/(.*)-\\d{1,2}x\\d+").find(uri)?.groupValues?.get(1).toString()
                when {
                    !href.contains("-subtitle-indonesia") -> "$href-subtitle-indonesia"
                    href.contains("-special") -> href.replace(Regex("-x\\d+"), "")
                    else -> href
                }
            }
            else -> uri
        }
    }

    private fun Element.toSearchResult(): SearchResponse {
        val href = getProperAnimeLink(fixUrl(this.select("a").attr("href")))
        val title = this.select("span.tt.title-episode,h2.title-episode-movie").text()
        val posterUrl = fixUrl(this.select("img").attr("data-src"))
        val epNum = this.select(".fixyear > h2.text-center").text().replace(Regex("[^0-9]"), "").trim().toIntOrNull()

        return newAnimeSearchResponse(title, href, TvType.Anime) {
            this.posterUrl = posterUrl
            addDubStatus(dubExist = false, subExist = true, subEpisodes = epNum)
        }

    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/?s=$query"
        val document = app.get(link).document

        return document.select("div.item.episode-home").mapNotNull {
            val title = it.selectFirst("div.judul-anime > span")!!.text()
            val poster = it.select("img").attr("data-src").toString().trim()
            val episodes = it.selectFirst("div.fixyear > h2.text-center")!!
                .text().replace(Regex("[^0-9]"), "").trim().toIntOrNull()
            val tvType = getType(it.selectFirst("span.calidad2.episode")?.text().toString())
            val href = getProperAnimeLink(fixUrl(it.selectFirst("a")!!.attr("href")))

            newAnimeSearchResponse(title, href, tvType) {
                this.posterUrl = poster
                addDubStatus(dubExist = false, subExist = true, subEpisodes = episodes)
            }
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

            if (url.contains("movie") || url.contains("live-action")) {
                val mTitle = document.selectFirst(".sbox > .data > h1[itemprop = name]")?.text().toString().trim()
                val mPoster =
                    document.selectFirst(".sbox > .imagen > .fix > img[itemprop = image]")?.attr("data-src")
                val mTags = document.select("p.meta_dd > a").map { it.text() }
                val mYear = document.selectFirst("a[href*=release-year]")!!.text().toIntOrNull()
                val mDescription = document.select("div[itemprop = description]").text().trim()
                val mRating = document.select("span[itemprop = ratingValue]").text().toIntOrNull()

                return MovieLoadResponse(
                    name = mTitle,
                    url = url,
                    this.name,
                    type = TvType.Movie,
                    dataUrl = url,
                    posterUrl = mPoster,
                    year = mYear,
                    plot = mDescription,
                    rating = mRating,
                    tags = mTags
                )
            }
            else {
                val title = document.select("h1[itemprop = name]").text().trim()
                val poster = document.selectFirst(".imagen > img")?.attr("data-src")
                val tags = document.select("#info a[href*=\"-genre/\"]").map { it.text() }
                val year = document.select("#info a[href*=\"-year/\"]").text().toIntOrNull()
                val status = getStatus(document.select("div.metadatac > span").last()!!.text().trim())
                val description = document.select("div[itemprop = description] > p").text().trim()

                val episodes = document.select("ul.episodios > li").mapNotNull {
                    val name = it.selectFirst(".episodiotitle > a")!!.ownText().trim()
                    val link = fixUrl(it.selectFirst(".episodiotitle > a")!!.attr("href"))
                    Episode(link, name)
                }.reversed()

                return newAnimeLoadResponse(title, url, TvType.Anime) {
                    engName = title
                    posterUrl = poster
                    this.year = year
                    addEpisodes(DubStatus.Subbed, episodes)
                    showStatus = status
                    plot = description
                    this.tags = tags
                }
            }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val source = if(data.contains("movie") || data.contains("live-action")) {
            app.get(data).document.select("#player2-1 > div[id*=div]").mapNotNull {
                fixUrl(it.select("iframe").attr("data-src"))
            }
        } else {
            app.get(data).document.select(".player2 > .embed2 > div[id*=player]").mapNotNull {
                fixUrl(it.select("iframe").attr("data-src"))
            }
        }

        source.apmap {
            loadExtractor(it, data, callback)
        }

        return true
    }

}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/NineAnimeProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup
import java.util.*

class NineAnimeProvider : MainAPI() {
    override var mainUrl = "https://9anime.id"
    override var name = "9Anime"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(TvType.Anime)

    companion object {
        fun getDubStatus(title: String): DubStatus {
            return if (title.contains("(dub)", ignoreCase = true)) {
                DubStatus.Dubbed
            } else {
                DubStatus.Subbed
            }
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val items = listOf(
            Pair("$mainUrl/ajax/home/widget?name=trending", "Trending"),
            Pair("$mainUrl/ajax/home/widget?name=updated_all", "All"),
            Pair("$mainUrl/ajax/home/widget?name=updated_sub&page=1", "Recently Updated (SUB)"),
            Pair(
                "$mainUrl/ajax/home/widget?name=updated_dub&page=1",
                "Recently Updated (DUB)(DUB)"
            ),
            Pair(
                "$mainUrl/ajax/home/widget?name=updated_chinese&page=1",
                "Recently Updated (Chinese)"
            ),
            Pair("$mainUrl/ajax/home/widget?name=random", "Random"),
        ).apmap { (url, name) ->
            val home = Jsoup.parse(
                app.get(
                    url
                ).parsed<Response>().html
            ).select("ul.anime-list li").map {
                val title = it.selectFirst("a.name")!!.text()
                val link = it.selectFirst("a")!!.attr("href")
                val poster = it.selectFirst("a.poster img")!!.attr("src")

                newAnimeSearchResponse(title, link) {
                    this.posterUrl = poster
                    addDubStatus(getDubStatus(title))
                }
            }

            HomePageList(name, home)
        }

        return HomePageResponse(items)
    }

    //Credits to https://github.com/jmir1
    private val key = "c/aUAorINHBLxWTy3uRiPt8J+vjsOheFG1E0q2X9CYwDZlnmd4Kb5M6gSVzfk7pQ" //key credits to @Modder4869

    private fun getVrf(id: String): String? {
        val reversed = ue(encode(id) + "0000000").slice(0..5).reversed()

        return reversed + ue(je(reversed, encode(id) ?: return null)).replace(
            """=+$""".toRegex(),
            ""
        )
    }

    private fun getLink(url: String): String? {
        val i = url.slice(0..5)
        val n = url.slice(6..url.lastIndex)
        return decode(je(i, ze(n)))
    }

    private fun ue(input: String): String {
        if (input.any { it.code >= 256 }) throw Exception("illegal characters!")
        var output = ""
        for (i in input.indices step 3) {
            val a = intArrayOf(-1, -1, -1, -1)
            a[0] = input[i].code shr 2
            a[1] = (3 and input[i].code) shl 4
            if (input.length > i + 1) {
                a[1] = a[1] or (input[i + 1].code shr 4)
                a[2] = (15 and input[i + 1].code) shl 2
            }
            if (input.length > i + 2) {
                a[2] = a[2] or (input[i + 2].code shr 6)
                a[3] = 63 and input[i + 2].code
            }
            for (n in a) {
                if (n == -1) output += "="
                else {
                    if (n in 0..63) output += key[n]
                }
            }
        }
        return output;
    }

    private fun je(inputOne: String, inputTwo: String): String {
        val arr = IntArray(256) { it }
        var output = ""
        var u = 0
        var r: Int
        for (a in arr.indices) {
            u = (u + arr[a] + inputOne[a % inputOne.length].code) % 256
            r = arr[a]
            arr[a] = arr[u]
            arr[u] = r
        }
        u = 0
        var c = 0
        for (f in inputTwo.indices) {
            c = (c + f) % 256
            u = (u + arr[c]) % 256
            r = arr[c]
            arr[c] = arr[u]
            arr[u] = r
            output += (inputTwo[f].code xor arr[(arr[c] + arr[u]) % 256]).toChar()
        }
        return output
    }

    private fun ze(input: String): String {
        val t = if (input.replace("""[\t\n\f\r]""".toRegex(), "").length % 4 == 0) {
            input.replace(Regex("""/==?$/"""), "")
        } else input
        if (t.length % 4 == 1 || t.contains(Regex("""[^+/0-9A-Za-z]"""))) throw Exception("bad input")
        var i: Int
        var r = ""
        var e = 0
        var u = 0
        for (o in t.indices) {
            e = e shl 6
            i = key.indexOf(t[o])
            e = e or i
            u += 6
            if (24 == u) {
                r += ((16711680 and e) shr 16).toChar()
                r += ((65280 and e) shr 8).toChar()
                r += (255 and e).toChar()
                e = 0
                u = 0
            }
        }
        return if (12 == u) {
            e = e shr 4
            r + e.toChar()
        } else {
            if (18 == u) {
                e = e shr 2
                r += ((65280 and e) shr 8).toChar()
                r += (255 and e).toChar()
            }
            r
        }
    }

    private fun encode(input: String): String? = java.net.URLEncoder.encode(input, "utf-8")

    private fun decode(input: String): String? = java.net.URLDecoder.decode(input, "utf-8")

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/filter?sort=title%3Aasc&keyword=$query"

        return app.get(url).document.select("ul.anime-list li").mapNotNull {
            val title = it.selectFirst("a.name")!!.text()
            val href =
                fixUrlNull(it.selectFirst("a")!!.attr("href"))?.replace(Regex("(\\?ep=(\\d+)\$)"), "")
                    ?: return@mapNotNull null
            val image = it.selectFirst("a.poster img")!!.attr("src")
            AnimeSearchResponse(
                title,
                href,
                this.name,
                TvType.Anime,
                image,
                null,
                if (title.contains("(DUB)") || title.contains("(Dub)")) EnumSet.of(
                    DubStatus.Dubbed
                ) else EnumSet.of(DubStatus.Subbed),
            )
        }
    }

    data class Response(
        @JsonProperty("html") val html: String
    )

    override suspend fun load(url: String): LoadResponse? {
        val validUrl = url.replace("https://9anime.to", mainUrl)
        val doc = app.get(validUrl).document
        val animeid = doc.selectFirst("div.player-wrapper.watchpage")!!.attr("data-id") ?: return null
        val animeidencoded = encode(getVrf(animeid) ?: return null)
        val poster = doc.selectFirst("aside.main div.thumb div img")!!.attr("src")
        val title = doc.selectFirst(".info .title")!!.text()
        val description = doc.selectFirst("div.info p")!!.text().replace("Ver menos", "").trim()
        val episodes = Jsoup.parse(
            app.get(
                "$mainUrl/ajax/anime/servers?ep=1&id=${animeid}&vrf=$animeidencoded&ep=8&episode=&token="
            ).parsed<Response>().html
        ).select("ul.episodes li a").mapNotNull {
            val link = it?.attr("href") ?: return@mapNotNull null
            val name = "Episode ${it.text()}"
            Episode(link, name)
        }

        val recommendations =
            doc.select("div.container aside.main section div.body ul.anime-list li")
                .mapNotNull { element ->
                    val recTitle = element.select("a.name").text() ?: return@mapNotNull null
                    val image = element.select("a.poster img").attr("src")
                    val recUrl = fixUrl(element.select("a").attr("href"))
                    newAnimeSearchResponse(recTitle, recUrl) {
                        this.posterUrl = image
                        addDubStatus(getDubStatus(recTitle))
                    }
                }

        val infodoc = doc.selectFirst("div.info .meta .col1")!!.text()
        val tvType = if (infodoc.contains("Movie")) TvType.AnimeMovie else TvType.Anime
        val status =
            if (infodoc.contains("Completed")) ShowStatus.Completed
            else if (infodoc.contains("Airing")) ShowStatus.Ongoing
            else null
        val tags = doc.select("div.info .meta .col1 div:contains(Genre) a").map { it.text() }

        return newAnimeLoadResponse(title, validUrl, tvType) {
            this.posterUrl = poster
            this.plot = description
            this.recommendations = recommendations
            this.showStatus = status
            this.tags = tags
            addEpisodes(DubStatus.Subbed, episodes)
        }
    }

    data class Links(
        @JsonProperty("url") val url: String
    )

    data class Servers(
        @JsonProperty("28") val mcloud: String?,
        @JsonProperty("35") val mp4upload: String?,
        @JsonProperty("40") val streamtape: String?,
        @JsonProperty("41") val vidstream: String?,
        @JsonProperty("43") val videovard: String?
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val document = app.get(data).document
        val animeid =
            document.selectFirst("div.player-wrapper.watchpage")!!.attr("data-id") ?: return false
        val animeidencoded = encode(getVrf(animeid) ?: return false)

        Jsoup.parse(
            app.get(
                "$mainUrl/ajax/anime/servers?&id=${animeid}&vrf=$animeidencoded&episode=&token="
            ).parsed<Response>().html
        ).select("div.body").map { element ->
            val jsonregex = Regex("(\\{.+\\}.*$data)")
            val servers = jsonregex.find(element.toString())?.value?.replace(
                Regex("(\".*data-base=.*href=\"$data)"),
                ""
            )?.replace("&quot;", "\"") ?: return@map

            val jsonservers = parseJson<Servers?>(servers) ?: return@map
            listOfNotNull(
                jsonservers.vidstream,
                jsonservers.mcloud,
                jsonservers.mp4upload,
                jsonservers.streamtape
            ).mapNotNull {
                try {
                    val epserver = app.get("$mainUrl/ajax/anime/episode?id=$it").text
                    (if (epserver.contains("url")) {
                        parseJson<Links>(epserver)
                    } else null)?.url?.let { it1 -> getLink(it1.replace("=", "")) }
                        ?.replace("/embed/", "/e/")
                } catch (e: Exception) {
                    logError(e)
                    null
                }
            }.apmap { url ->
                loadExtractor(
                    url, data, callback
                )
            }
        }

        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/NontonAnimeIDProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.utils.*
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import org.jsoup.Jsoup
import org.jsoup.nodes.Element
import java.net.URI
import java.util.ArrayList

class NontonAnimeIDProvider : MainAPI() {
    override var mainUrl = "https://75.119.159.228"
    override var name = "NontonAnimeID"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val lang = "id"
    override val hasDownloadSupport = true

    override val supportedTypes = setOf(
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.OVA
    )

    companion object {
        fun getType(t: String): TvType {
            return when {
                t.contains("TV") -> TvType.Anime
                t.contains("Movie") -> TvType.AnimeMovie
                else -> TvType.OVA
            }
        }

        fun getStatus(t: String): ShowStatus {
            return when (t) {
                "Finished Airing" -> ShowStatus.Completed
                "Currently Airing" -> ShowStatus.Ongoing
                else -> ShowStatus.Completed
            }
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val document = app.get(mainUrl).document

        val homePageList = ArrayList<HomePageList>()

        document.select("section#postbaru").forEach { block ->
            val header = block.selectFirst("h2")!!.text().trim()
            val animes = block.select("article.animeseries").mapNotNull {
                it.toSearchResult()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        document.select("aside#sidebar_right > div.side:nth-child(2)").forEach { block ->
            val header = block.selectFirst("h3")!!.ownText().trim()
            val animes = block.select("li.fullwdth").mapNotNull {
                it.toSearchResultPopular()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        return HomePageResponse(homePageList)
    }

    private fun getProperAnimeLink(uri: String): String {
        return if (uri.contains("/anime/")) {
            uri
        } else {
            val name = Regex("$mainUrl/(.*)-episode.*").find(uri)?.groupValues?.get(1).toString()
            if (name.contains("movie")) {
                return "$mainUrl/anime/" + name.replace("-movie", "")
            } else {
                if (name.contains("kokurasetai-season-3")) {
                    "$mainUrl/anime/${name.replace("season-3", "ultra-romantic")}"
                } else {
                    "$mainUrl/anime/$name"
                }
            }
        }
    }

    private fun Element.toSearchResult(): SearchResponse {
        val href = getProperAnimeLink(fixUrl(this.selectFirst("a")!!.attr("href")))
        val title = this.selectFirst("h3.title")!!.text()
        val posterUrl = fixUrl(this.select("img").attr("data-src"))

        return newAnimeSearchResponse(title, href, TvType.Anime) {
            this.posterUrl = posterUrl
            addDubStatus(dubExist = false, subExist = true)
        }

    }

    private fun Element.toSearchResultPopular(): SearchResponse {
        val href = getProperAnimeLink(fixUrl(this.selectFirst("a")!!.attr("href")))
        val title = this.select("h4").text().trim()
        val posterUrl = fixUrl(this.select("img").attr("data-src"))

        return newAnimeSearchResponse(title, href, TvType.Anime) {
            this.posterUrl = posterUrl
            addDubStatus(dubExist = false, subExist = true)
        }

    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/?s=$query"
        val document = app.get(link).document

        return document.select(".result > ul > li").mapNotNull {
            val title = it.selectFirst("h2")!!.text().trim()
            val poster = it.selectFirst("img")!!.attr("src")
            val tvType = getType(
                it.selectFirst(".boxinfores > span.typeseries")!!.text().toString()
            )
            val href = fixUrl(it.selectFirst("a")!!.attr("href"))

            newAnimeSearchResponse(title, href, tvType) {
                this.posterUrl = poster
                addDubStatus(dubExist = false, subExist = true)
            }
        }
    }

    private data class EpResponse(
        @JsonProperty("posts") val posts: String?,
        @JsonProperty("max_page") val max_page: Int?,
        @JsonProperty("found_posts") val found_posts: Int?,
        @JsonProperty("content") val content: String
    )

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val title = document.selectFirst("h1.entry-title.cs")!!.text().trim()
        val poster = document.selectFirst(".poster > img")?.attr("data-src")
        val tags = document.select(".tagline > a").map { it.text() }

        val year = Regex("\\d, ([0-9]*)").find(
            document.select(".bottomtitle > span:nth-child(5)").text()
        )?.groupValues?.get(1)?.toIntOrNull()
        val status = getStatus(
            document.select("span.statusseries").text().trim()
        )
        val type = getType(document.select("span.typeseries").text().trim())
        val rating = document.select("span.nilaiseries").text().trim().toIntOrNull()
        val description = document.select(".entry-content.seriesdesc > p").text().trim()
        val trailer = document.select("a.ytp-impression-link").attr("href")

        val episodes = if (document.select("button.buttfilter").isNotEmpty()) {
            val id = document.select("input[name=series_id]").attr("value")
            val numEp =
                document.selectFirst(".latestepisode > a")?.text()?.replace(Regex("[^0-9]"), "")
                    .toString()
            Jsoup.parse(
                app.post(
                    url = "$mainUrl/wp-admin/admin-ajax.php",
                    data = mapOf(
                        "misha_number_of_results" to numEp,
                        "misha_order_by" to "date-DESC",
                        "action" to "mishafilter",
                        "series_id" to id
                    )
                ).parsed<EpResponse>().content
            ).select("li").map {
                val engName =
                    document.selectFirst("div.bottomtitle:nth-child(4) > span:nth-child(1)")
                        ?.ownText()
                val name = it.selectFirst("span.t1")!!.text().trim().replace("Episode", "$engName")
                val link = it.selectFirst("a")!!.attr("href")
                Episode(link, name)
            }.reversed()
        } else {
            document.select("ul.misha_posts_wrap2 > li").map {
                val name = it.select("span.t1").text().trim()
                val link = it.select("a").attr("href")
                Episode(link, name)
            }.reversed()
        }


        val recommendations = document.select(".result > li").mapNotNull {
            val epHref = it.selectFirst("a")!!.attr("href")
            val epTitle = it.selectFirst("h3")!!.text()
            val epPoster = it.select(".top > img").attr("data-src")

            newAnimeSearchResponse(epTitle, epHref, TvType.Anime) {
                this.posterUrl = epPoster
                addDubStatus(dubExist = false, subExist = true)
            }
        }

        return newAnimeLoadResponse(title, url, type) {
            engName = title
            posterUrl = poster
            this.year = year
            addEpisodes(DubStatus.Subbed, episodes)
            showStatus = status
            this.rating = rating
            plot = description
            addTrailer(trailer)
            this.tags = tags
            this.recommendations = recommendations
        }

    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {

        val document = app.get(data).document
        val sources = ArrayList<String>()

        document.select(".container1 > ul > li").apmap {
            val dataPost = it.attr("data-post")
            val dataNume = it.attr("data-nume")
            val dataType = it.attr("data-type")

            val iframe = app.post(
                url = "$mainUrl/wp-admin/admin-ajax.php",
                data = mapOf(
                    "action" to "player_ajax",
                    "post" to dataPost,
                    "nume" to dataNume,
                    "type" to dataType
                )
            ).document.select("iframe").attr("src")

            sources.add(fixUrl(iframe))
        }

        sources.apmap {
            loadExtractor(it, data, callback)
        }

        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/OploverzProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup
import org.jsoup.nodes.Element
import java.util.ArrayList

class OploverzProvider : MainAPI() {
    override var mainUrl = "https://oploverz.asia"
    override var name = "Oploverz"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val lang = "id"
    override val hasDownloadSupport = true

    override val supportedTypes = setOf(
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.OVA
    )

    companion object {
        fun getType(t: String): TvType {
            return when {
                t.contains("TV") -> TvType.Anime
                t.contains("Movie") -> TvType.AnimeMovie
                else -> TvType.OVA
            }
        }

        fun getStatus(t: String): ShowStatus {
            return when (t) {
                "Completed" -> ShowStatus.Completed
                "Ongoing" -> ShowStatus.Ongoing
                else -> ShowStatus.Completed
            }
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val document = app.get(mainUrl).document

        val homePageList = ArrayList<HomePageList>()

        document.select(".bixbox.bbnofrm").forEach { block ->
            val header = block.selectFirst("h3")!!.text().trim()
            val animes = block.select("article[itemscope=itemscope]").mapNotNull {
                it.toSearchResult()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        return HomePageResponse(homePageList)
    }

    private fun getProperAnimeLink(uri: String): String {

        return if (uri.contains("/anime/")) {
            uri
        } else {
            var title = uri.substringAfter("$mainUrl/")
            title = when {
                (title.contains("-episode")) && !(title.contains("-ova")) -> Regex("(.+)-episode").find(
                    title
                )?.groupValues?.get(1).toString()
                (title.contains("-ova")) -> Regex("(.+)-ova").find(title)?.groupValues?.get(1)
                    .toString()
                else -> Regex("(.+)-subtitle").find(title)?.groupValues?.get(1).toString()
                    .replace(Regex("-\\d+"), "")
            }

            when {
                title.contains("overlord") -> {
                    title = title.replace("s", "season-")
                }
                title.contains("kaguya-sama") -> {
                    title = title.replace("s3", "ultra-romantic")
                }
            }

            "$mainUrl/anime/$title"
        }

    }

    private fun Element.toSearchResult(): SearchResponse {
        val href = getProperAnimeLink(this.selectFirst("a.tip")!!.attr("href"))
        val title = this.selectFirst("h2[itemprop=headline]")!!.text().trim()
        val posterUrl = fixUrl(this.selectFirst("img")!!.attr("src"))
        val type = getType(this.selectFirst(".eggtype, .typez")!!.text().trim())
        val epNum =
            this.selectFirst(".eggepisode, span.epx")!!.text().replace(Regex("[^0-9]"), "").trim()
                .toIntOrNull()

        return newAnimeSearchResponse(title, href, type) {
            this.posterUrl = posterUrl
            addDubStatus(dubExist = false, subExist = true, subEpisodes = epNum)
        }
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/?s=$query"
        val document = app.get(link).document

        return document.select("article[itemscope=itemscope]").map {
            val title = it.selectFirst(".tt")!!.ownText().trim()
            val poster = it.selectFirst("img")!!.attr("src")
            val tvType = getType(it.selectFirst(".typez")?.text().toString())
            val href = fixUrl(it.selectFirst("a.tip")!!.attr("href"))

            newAnimeSearchResponse(title, href, tvType) {
                this.posterUrl = poster
                addDubStatus(dubExist = false, subExist = true)
            }
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val title = document.selectFirst("h1.entry-title")!!.text().trim()
        val poster = document.select(".thumb > img").attr("src")
        val tags = document.select(".genxed > a").map { it.text() }

        val year = Regex("\\d, ([0-9]*)").find(
            document.selectFirst(".info-content > .spe > span > time")!!.text().trim()
        )?.groupValues?.get(1).toString().toIntOrNull()
        val status = getStatus(
            document.select(".info-content > .spe > span:nth-child(1)")
                .text().trim().replace("Status: ", "")
        )
        val typeCheck =
            when {
                document.select(".info-content > .spe > span:nth-child(5), .info-content > .spe > span")
                    .text().trim().contains("TV") -> "TV"
                document.select(".info-content > .spe > span:nth-child(5), .info-content > .spe > span")
                    .text().trim().contains("TV") -> "Movie"
                else -> "OVA"
            }
        val type = getType(typeCheck)
        val description = document.select(".entry-content > p").text().trim()

        val episodes = document.select(".eplister > ul > li").map {
            val name = it.select(".epl-title").text().trim()
            val link = fixUrl(it.select("a").attr("href"))
            Episode(link, name)
        }.reversed()

        val recommendations =
            document.select(".listupd > article[itemscope=itemscope]").mapNotNull { rec ->
                val epTitle = rec.selectFirst(".tt")!!.ownText().trim()
                val epPoster = rec.selectFirst("img")!!.attr("src")
                val epType = getType(rec.selectFirst(".typez")?.text().toString())
                val epHref = fixUrl(rec.selectFirst("a.tip")!!.attr("href"))

                newAnimeSearchResponse(epTitle, epHref, epType) {
                    this.posterUrl = epPoster
                    addDubStatus(dubExist = false, subExist = true)
                }
            }

        return newAnimeLoadResponse(title, url, type) {
            engName = title
            posterUrl = poster
            this.year = year
            addEpisodes(DubStatus.Subbed, episodes)
            showStatus = status
            plot = description
            this.tags = tags
            this.recommendations = recommendations
        }

    }

    data class Source(
        @JsonProperty("play_url") val play_url: String,
        @JsonProperty("format_id") val format_id: Int
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val document = app.get(data).document
        val sources = document.select(".mobius > .mirror > option").mapNotNull {
            fixUrl(Jsoup.parse(base64Decode(it.attr("value"))).select("iframe").attr("src"))
        }

        sources.apmap {
            loadExtractor(it, data, callback)
        }

        return true
    }

}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/TenshiProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import android.annotation.SuppressLint
import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.network.DdosGuardKiller
import com.lagradost.cloudstream3.network.getHeaders
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import org.jsoup.nodes.Document
import java.net.URI
import java.text.SimpleDateFormat
import java.util.*

class TenshiProvider : MainAPI() {
    companion object {
        //var token: String? = null
        //var cookie: Map<String, String> = mapOf()

        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }
    }

    override var mainUrl = "https://tenshi.moe"
    override var name = "Tenshi.moe"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val supportedTypes = setOf(TvType.Anime, TvType.AnimeMovie, TvType.OVA)
    private var ddosGuardKiller = DdosGuardKiller(true)

    /*private fun loadToken(): Boolean {
        return try {
            val response = get(mainUrl)
            cookie = response.cookies
            val document = Jsoup.parse(response.text)
            token = document.selectFirst("""meta[name="csrf-token"]""").attr("content")
            token != null
        } catch (e: Exception) {
            false
        }
    }*/

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val soup = app.get(mainUrl, interceptor = ddosGuardKiller).document
        println(soup)
        for (section in soup.select("#content > section")) {
            try {
                if (section.attr("id") == "toplist-tabs") {
                    for (top in section.select(".tab-content > [role=\"tabpanel\"]")) {
                        val title = "Top - " + top.attr("id").split("-")[1].replaceFirstChar {
                            if (it.isLowerCase()) it.titlecase(
                                Locale.UK
                            ) else it.toString()
                        }
                        val anime = top.select("li > a").map {
                            AnimeSearchResponse(
                                it.selectFirst(".thumb-title")!!.text(),
                                fixUrl(it.attr("href")),
                                this.name,
                                TvType.Anime,
                                it.selectFirst("img")!!.attr("src"),
                                null,
                                EnumSet.of(DubStatus.Subbed),
                            )
                        }
                        items.add(HomePageList(title, anime))
                    }
                } else {
                    val title = section.selectFirst("h2")!!.text()
                    val anime = section.select("li > a").map {
                        AnimeSearchResponse(
                            it.selectFirst(".thumb-title")?.text() ?: "",
                            fixUrl(it.attr("href")),
                            this.name,
                            TvType.Anime,
                            it.selectFirst("img")!!.attr("src"),
                            null,
                            EnumSet.of(DubStatus.Subbed),
                        )
                    }
                    items.add(HomePageList(title, anime))
                }
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    private fun getIsMovie(type: String, id: Boolean = false): Boolean {
        if (!id) return type == "Movie"

        val movies = listOf("rrso24fa", "e4hqvtym", "bl5jdbqn", "u4vtznut", "37t6h2r4", "cq4azcrj")
        val aniId = type.replace("$mainUrl/anime/", "")
        return movies.contains(aniId)
    }

    private fun parseSearchPage(soup: Document): List<SearchResponse> {
        val items = soup.select("ul.thumb > li > a")
        return items.map {
            val href = fixUrl(it.attr("href"))
            val img = fixUrl(it.selectFirst("img")!!.attr("src"))
            val title = it.attr("title")
            if (getIsMovie(href, true)) {
                MovieSearchResponse(
                    title, href, this.name, TvType.Movie, img, null
                )
            } else {
                AnimeSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Anime,
                    img,
                    null,
                    EnumSet.of(DubStatus.Subbed),
                )
            }
        }
    }

    @SuppressLint("SimpleDateFormat")
    private fun dateParser(dateString: String?): Date? {
        if (dateString == null) return null
        try {
            val format = SimpleDateFormat("dd 'of' MMM',' yyyy")
            val data = format.parse(
                dateString.replace("th ", " ").replace("st ", " ").replace("nd ", " ")
                    .replace("rd ", " ")
            ) ?: return null
            return data
        } catch (e: Exception) {
            return null
        }
    }

//    data class TenshiSearchResponse(
//        @JsonProperty("url") var url : String,
//        @JsonProperty("title") var title : String,
//        @JsonProperty("cover") var cover : String,
//        @JsonProperty("genre") var genre : String,
//        @JsonProperty("year") var year : Int,
//        @JsonProperty("type") var type : String,
//        @JsonProperty("eps") var eps : String,
//        @JsonProperty("cen") var cen : String
//    )

//    override suspend fun quickSearch(query: String): ArrayList<SearchResponse>? {
//        if (!autoLoadToken()) return quickSearch(query)
//        val url = "$mainUrl/anime/search"
//        val response = khttp.post(
//            url,
//            data=mapOf("q" to query),
//            headers=mapOf("x-csrf-token" to token, "x-requested-with" to "XMLHttpRequest"),
//            cookies = cookie
//
//        )
//
//        val items = mapper.readValue<List<TenshiSearchResponse>>(response.text)
//
//        if (items.isEmpty()) return ArrayList()
//
//        val returnValue = ArrayList<SearchResponse>()
//        for (i in items) {
//            val href = fixUrl(i.url)
//            val title = i.title
//            val img = fixUrl(i.cover)
//            val year = i.year
//
//            returnValue.add(
//                if (getIsMovie(i.type)) {
//                    MovieSearchResponse(
//                        title, href, getSlug(href), this.name, TvType.Movie, img, year
//                    )
//                } else {
//                    AnimeSearchResponse(
//                        title, href, getSlug(href), this.name,
//                        TvType.Anime, img,  year, null,
//                        EnumSet.of(DubStatus.Subbed),
//                        null, null
//                    )
//                }
//            )
//        }
//        return returnValue
//    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/anime"
        var document = app.get(
            url,
            params = mapOf("q" to query),
            cookies = mapOf("loop-view" to "thumb"),
            interceptor = ddosGuardKiller
        ).document

        val returnValue = parseSearchPage(document).toMutableList()

        while (!document.select("""a.page-link[rel="next"]""").isEmpty()) {
            val link = document.selectFirst("""a.page-link[rel="next"]""")?.attr("href")
            if (!link.isNullOrBlank()) {
                document = app.get(
                    link,
                    cookies = mapOf("loop-view" to "thumb"),
                    interceptor = ddosGuardKiller
                ).document
                returnValue.addAll(parseSearchPage(document))
            } else {
                break
            }
        }

        return returnValue
    }

    override suspend fun load(url: String): LoadResponse {
        var document = app.get(
            url,
            cookies = mapOf("loop-view" to "thumb"),
            interceptor = ddosGuardKiller
        ).document

        val canonicalTitle = document.selectFirst("header.entry-header > h1.mb-3")!!.text().trim()
        val episodeNodes = document.select("li[class*=\"episode\"] > a").toMutableList()
        val totalEpisodePages = if (document.select(".pagination").size > 0)
            document.select(".pagination .page-item a.page-link:not([rel])").last()!!.text()
                .toIntOrNull()
        else 1

        if (totalEpisodePages != null && totalEpisodePages > 1) {
            for (pageNum in 2..totalEpisodePages) {
                document = app.get(
                    "$url?page=$pageNum",
                    cookies = mapOf("loop-view" to "thumb"),
                    interceptor = ddosGuardKiller
                ).document
                episodeNodes.addAll(document.select("li[class*=\"episode\"] > a"))
            }
        }

        val episodes = ArrayList(episodeNodes.map {
            val title = it.selectFirst(".episode-title")?.text()?.trim()
            newEpisode(it.attr("href")) {
                this.name = if (title == "No Title") null else title
                this.posterUrl = it.selectFirst("img")?.attr("src")
                addDate(dateParser(it?.selectFirst(".episode-date")?.text()?.trim()))
                this.description = it.attr("data-content").trim()
            }
        })

        val similarAnime = document.select("ul.anime-loop > li > a")?.mapNotNull { element ->
            val href = element.attr("href") ?: return@mapNotNull null
            val title =
                element.selectFirst("> .overlay > .thumb-title")?.text() ?: return@mapNotNull null
            val img = element.selectFirst("> img")?.attr("src")
            AnimeSearchResponse(title, href, this.name, TvType.Anime, img)
        }

        val type = document.selectFirst("a[href*=\"$mainUrl/type/\"]")?.text()?.trim()

        return newAnimeLoadResponse(canonicalTitle, url, getType(type ?: "")) {
            recommendations = similarAnime
            posterUrl = document.selectFirst("img.cover-image")?.attr("src")
            plot = document.selectFirst(".entry-description > .card-body")?.text()?.trim()
            tags =
                document.select("li.genre.meta-data > span.value")
                    .map { it?.text()?.trim().toString() }

            synonyms =
                document.select("li.synonym.meta-data > div.info-box > span.value")
                    .map { it?.text()?.trim().toString() }

            engName =
                document.selectFirst("span.value > span[title=\"English\"]")?.parent()?.text()
                    ?.trim()
            japName =
                document.selectFirst("span.value > span[title=\"Japanese\"]")?.parent()?.text()
                    ?.trim()

            val pattern = Regex("(\\d{4})")
            val yearText = document.selectFirst("li.release-date .value")!!.text()
            year = pattern.find(yearText)?.groupValues?.get(1)?.toIntOrNull()

            addEpisodes(DubStatus.Subbed, episodes)

            showStatus = when (document.selectFirst("li.status > .value")?.text()?.trim()) {
                "Ongoing" -> ShowStatus.Ongoing
                "Completed" -> ShowStatus.Completed
                else -> null
            }
        }
    }


    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val soup = app.get(data, interceptor = ddosGuardKiller).document

        data class Quality(
            @JsonProperty("src") val src: String,
            @JsonProperty("size") val size: Int
        )

        for (source in soup.select("""[aria-labelledby="mirror-dropdown"] > li > a.dropdown-item""")) {
            val release = source.text().replace("/", "").trim()
            val sourceHTML = app.get(
                "https://tenshi.moe/embed?v=${source.attr("href").split("v=")[1].split("&")[0]}",
                headers = mapOf("Referer" to data), interceptor = ddosGuardKiller
            ).text

            val match = Regex("""sources: (\[(?:.|\s)+?type: ['"]video/.*?['"](?:.|\s)+?])""").find(
                sourceHTML
            )
            if (match != null) {
                val qualities = mapper.readValue<List<Quality>>(
                    match.destructured.component1()
                        .replace("'", "\"")
                        .replace(Regex("""(\w+): """), "\"\$1\": ")
                        .replace(Regex("""\s+"""), "")
                        .replace(",}", "}")
                        .replace(",]", "]")
                )
                qualities.forEach {
                    callback.invoke(
                        ExtractorLink(
                            this.name,
                            "${this.name} $release",
                            fixUrl(it.src),
                            this.mainUrl,
                            getQualityFromName("${it.size}"),
                            headers = getHeaders(emptyMap(),
                                ddosGuardKiller.savedCookiesMap[URI(this.mainUrl).host]
                                    ?: emptyMap()
                            ).toMap()
                        )
                    )
                }
            }
        }

        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/WatchCartoonOnlineProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import org.jsoup.Jsoup
import org.mozilla.javascript.Context
import org.mozilla.javascript.Scriptable
import java.util.*


class WatchCartoonOnlineProvider : MainAPI() {
    override var name = "WatchCartoonOnline"
    override var mainUrl = "https://www.wcostream.com"

    override val supportedTypes = setOf(
        TvType.Cartoon,
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.TvSeries
    )

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "https://www.wcostream.com/search"

        var response =
            app.post(
                url,
                headers = mapOf("Referer" to url),
                data = mapOf("catara" to query, "konuara" to "series")
            ).text
        var document = Jsoup.parse(response)
        var items = document.select("div#blog > div.cerceve").toList()

        val returnValue = ArrayList<SearchResponse>()

        for (item in items) {
            val header = item.selectFirst("> div.iccerceve")
            val titleHeader = header!!.selectFirst("> div.aramadabaslik > a")
            val title = titleHeader!!.text()
            val href = fixUrl(titleHeader.attr("href"))
            val poster = fixUrl(header.selectFirst("> a > img")!!.attr("src"))
            val genreText = item.selectFirst("div.cerceve-tur-ve-genre")!!.ownText()
            if (genreText.contains("cartoon")) {
                returnValue.add(TvSeriesSearchResponse(title, href, this.name, TvType.Cartoon, poster, null, null))
            } else {
                val isDubbed = genreText.contains("dubbed")
                val set: EnumSet<DubStatus> =
                    EnumSet.of(if (isDubbed) DubStatus.Dubbed else DubStatus.Subbed)
                returnValue.add(
                    AnimeSearchResponse(
                        title,
                        href,
                        this.name,
                        TvType.Anime,
                        poster,
                        null,
                        set,
                    )
                )
            }
        }

        // "episodes-search", is used for finding movies, anime episodes should be filtered out
        response =
            app.post(
                url,
                headers = mapOf("Referer" to url),
                data = mapOf("catara" to query, "konuara" to "episodes")
            ).text
        document = Jsoup.parse(response)
        items = document.select("#catlist-listview2 > ul > li")
            .filter { it?.text() != null && !it.text().toString().contains("Episode") }

        for (item in items) {
            val titleHeader = item.selectFirst("a")
            val title = titleHeader!!.text()
            val href = fixUrl(titleHeader.attr("href"))
            //val isDubbed = title.contains("dubbed")
            //val set: EnumSet<DubStatus> =
            //   EnumSet.of(if (isDubbed) DubStatus.Dubbed else DubStatus.Subbed)
            returnValue.add(
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.AnimeMovie,
                    null,
                    null,
                    null,
                )
            )
        }

        return returnValue
    }

    override suspend fun load(url: String): LoadResponse {
        val isMovie = !url.contains("/anime/")
        val response = app.get(url).text
        val document = Jsoup.parse(response)

        return if (!isMovie) {
            val title = document.selectFirst("td.vsbaslik > h2")!!.text()
            val poster = fixUrlNull(document.selectFirst("div#cat-img-desc > div > img")?.attr("src"))
            val plot = document.selectFirst("div.iltext")!!.text()
            val genres = document.select("div#cat-genre > div.wcobtn > a").map { it.text() }
            val episodes = document.select("div#catlist-listview > ul > li > a").reversed().map {
                val text = it.text()
                val match = Regex("Season ([0-9]*) Episode ([0-9]*).*? (.*)").find(text)
                val href = it.attr("href")
                if (match != null) {
                    val last = match.groupValues[3]
                    return@map Episode(
                        href,
                        if (last.startsWith("English")) null else last,
                        match.groupValues[1].toIntOrNull(),
                        match.groupValues[2].toIntOrNull(),
                    )
                }
                val match2 = Regex("Episode ([0-9]*).*? (.*)").find(text)
                if (match2 != null) {
                    val last = match2.groupValues[2]
                    return@map Episode(
                        href,
                        if (last.startsWith("English")) null else last,
                        null,
                        match2.groupValues[1].toIntOrNull(),
                    )
                }
                return@map Episode(
                    href,
                    text
                )
            }
            TvSeriesLoadResponse(
                title,
                url,
                this.name,
                TvType.TvSeries,
                episodes,
                poster,
                null,
                plot,
                null,
                null,
                tags = genres
            )
        } else {
            val title = document.selectFirst(".iltext .Apple-style-span")?.text().toString()
            val b = document.select(".iltext b")
            val description = if (b.isNotEmpty()) {
                b.last()!!.html().split("<br>")[0]
            } else null

            TvSeriesLoadResponse(
                title,
                url,
                this.name,
                TvType.TvSeries,
                listOf(Episode(url,title)),
                null,
                null,
                description,
                null,
                null
            )
        }
    }

    data class LinkResponse(
        //  @JsonProperty("cdn")
        //  val cdn: String,
        @JsonProperty("enc")
        val enc: String,
        @JsonProperty("hd")
        val hd: String,
        @JsonProperty("server")
        val server: String,
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val response = app.get(data).text
        /*val embedUrl = fixUrl(
            Regex("itemprop=\"embedURL\" content=\"(.*?)\"").find(response.text)?.groupValues?.get(1) ?: return false
        )*/
        val start = response.indexOf("itemprop=\"embedURL")
        val foundJS = Regex("<script>(.*?)</script>").find(response, start)?.groupValues?.get(1)
            ?.replace("document.write", "var returnValue = ")

        val rhino = Context.enter()
        rhino.initStandardObjects()
        rhino.optimizationLevel = -1
        val scope: Scriptable = rhino.initStandardObjects()

        val decodeBase64 = "atob = function(s) {\n" +
                "    var e={},i,b=0,c,x,l=0,a,r='',w=String.fromCharCode,L=s.length;\n" +
                "    var A=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n" +
                "    for(i=0;i<64;i++){e[A.charAt(i)]=i;}\n" +
                "    for(x=0;x<L;x++){\n" +
                "        c=e[s.charAt(x)];b=(b<<6)+c;l+=6;\n" +
                "        while(l>=8){((a=(b>>>(l-=8))&0xff)||(x<(L-2)))&&(r+=w(a));}\n" +
                "    }\n" +
                "    return r;\n" +
                "};"

        rhino.evaluateString(scope, decodeBase64 + foundJS, "JavaScript", 1, null)
        val jsEval = scope.get("returnValue", scope) ?: return false
        val src = fixUrl(Regex("src=\"(.*?)\"").find(jsEval as String)?.groupValues?.get(1) ?: return false)

        val embedResponse = app.get(
            (src),
            headers = mapOf("Referer" to data)
        )

        val getVidLink = fixUrl(
            Regex("get\\(\"(.*?)\"").find(embedResponse.text)?.groupValues?.get(1) ?: return false
        )
        val linkResponse = app.get(
            getVidLink, headers = mapOf(
                "sec-ch-ua" to "\"Chromium\";v=\"91\", \" Not;A Brand\";v=\"99\"",
                "sec-ch-ua-mobile" to "?0",
                "sec-fetch-dest" to "empty",
                "sec-fetch-mode" to "cors",
                "sec-fetch-site" to "same-origin",
                "accept" to "*/*",
                "x-requested-with" to "XMLHttpRequest",
                "referer" to src.replace(" ", "%20"),
                "user-agent" to "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",
                "cookie" to "countrytabs=0"
            )
        )

        val link = mapper.readValue<LinkResponse>(linkResponse.text)

        val hdLink = "${link.server}/getvid?evid=${link.hd}"
        val sdLink = "${link.server}/getvid?evid=${link.enc}"

        if (link.hd.isNotBlank())
            callback.invoke(
                ExtractorLink(
                    this.name,
                    this.name + " HD",
                    hdLink,
                    "",
                    Qualities.P720.value
                )
            )

        if (link.enc.isNotBlank())
            callback.invoke(
                ExtractorLink(
                    this.name,
                    this.name + " SD",
                    sdLink,
                    "",
                    Qualities.P480.value
                )
            )

        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/WcoProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.extractors.Mcloud
import com.lagradost.cloudstream3.extractors.WcoStream
import com.lagradost.cloudstream3.utils.ExtractorLink
import org.json.JSONObject
import org.jsoup.Jsoup
import org.jsoup.nodes.Document
import java.util.*


class WcoProvider : MainAPI() {
    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }
    }

    override var mainUrl = "https://wcostream.cc"
    override var name = "WCO Stream"
    override val hasQuickSearch = true
    override val hasMainPage = true

    override val supportedTypes = setOf(
        TvType.AnimeMovie,
        TvType.Anime,
        TvType.OVA
    )

    override suspend fun getMainPage(): HomePageResponse {
        val urls = listOf(
            Pair("$mainUrl/ajax/list/recently_updated?type=tv", "Recently Updated Anime"),
            Pair("$mainUrl/ajax/list/recently_updated?type=movie", "Recently Updated Movies"),
            Pair("$mainUrl/ajax/list/recently_added?type=tv", "Recently Added Anime"),
            Pair("$mainUrl/ajax/list/recently_added?type=movie", "Recently Added Movies"),
        )

        val items = ArrayList<HomePageList>()
        for (i in urls) {
            try {
                val response = JSONObject(
                    app.get(
                        i.first,
                    ).text
                ).getString("html") // I won't make a dataclass for this shit
                val document = Jsoup.parse(response)
                val results = document.select("div.flw-item").map {
                    val filmPoster = it.selectFirst("> div.film-poster")
                    val filmDetail = it.selectFirst("> div.film-detail")
                    val nameHeader = filmDetail!!.selectFirst("> h3.film-name > a")
                    val title = nameHeader!!.text().replace(" (Dub)", "")
                    val href =
                        nameHeader.attr("href").replace("/watch/", "/anime/")
                            .replace(Regex("-episode-.*"), "/")
                    val isDub =
                        filmPoster!!.selectFirst("> div.film-poster-quality")?.text()?.contains("DUB")
                            ?: false
                    val poster = filmPoster.selectFirst("> img")!!.attr("data-src")
                    val set: EnumSet<DubStatus> =
                        EnumSet.of(if (isDub) DubStatus.Dubbed else DubStatus.Subbed)
                    AnimeSearchResponse(title, href, this.name, TvType.Anime, poster, null, set)
                }
                items.add(HomePageList(i.second, results))
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }


    private fun fixAnimeLink(url: String): String {
        val regex = "watch/([a-zA-Z\\-0-9]*)-episode".toRegex()
        val (aniId) = regex.find(url)!!.destructured
        return "$mainUrl/anime/$aniId"
    }

    private fun parseSearchPage(soup: Document): List<SearchResponse> {
        val items = soup.select(".film_list-wrap > .flw-item")
        if (items.isEmpty()) return ArrayList()
        return items.map { i ->
            val href = fixAnimeLink(i.selectFirst("a")!!.attr("href"))
            val img = fixUrl(i.selectFirst("img")!!.attr("data-src"))
            val title = i.selectFirst("img")!!.attr("title")
            val isDub = !i.select(".pick.film-poster-quality").isEmpty()
            val year =
                i.selectFirst(".film-detail.film-detail-fix > div > span:nth-child(1)")!!.text()
                    .toIntOrNull()
            val type =
                i.selectFirst(".film-detail.film-detail-fix > div > span:nth-child(3)")!!.text()

            if (getType(type) == TvType.AnimeMovie) {
                MovieSearchResponse(
                    title, href, this.name, TvType.AnimeMovie, img, year
                )
            } else {
                AnimeSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Anime,
                    img,
                    year,
                    EnumSet.of(if (isDub) DubStatus.Dubbed else DubStatus.Subbed),
                )
            }
        }
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/search"
        val response =
            app.get(url, params = mapOf("keyword" to query))
        var document = Jsoup.parse(response.text)
        val returnValue = parseSearchPage(document).toMutableList()

        while (!document.select(".pagination").isEmpty()) {
            val link = document.select("a.page-link[rel=\"next\"]")
            if (!link.isEmpty() && returnValue.size < 40) {
                val extraResponse = app.get(fixUrl(link[0].attr("href"))).text
                document = Jsoup.parse(extraResponse)
                returnValue.addAll(parseSearchPage(document))
            } else {
                break
            }
        }
        return returnValue.distinctBy { it.url }
    }

    override suspend fun quickSearch(query: String): List<SearchResponse> {
        val response = JSONObject(
            app.post(
                "https://wcostream.cc/ajax/search",
                data = mapOf("keyword" to query)
            ).text
        ).getString("html") // I won't make a dataclass for this shit
        val document = Jsoup.parse(response)

        return document.select("a.nav-item").mapNotNull {
            val title = it.selectFirst("img")?.attr("title") ?: return@mapNotNull null
            val img = it?.selectFirst("img")?.attr("src") ?: return@mapNotNull null
            val href = it?.attr("href") ?: return@mapNotNull null
            val isDub = title.contains("(Dub)")
            val filmInfo = it.selectFirst(".film-infor")
            val year = filmInfo?.select("span")?.get(0)?.text()?.toIntOrNull()
            val type = filmInfo?.select("span")?.get(1)?.text().toString()
            if (getType(type) == TvType.AnimeMovie) {
                MovieSearchResponse(
                    title, href, this.name, TvType.AnimeMovie, img, year
                )
            } else {
                AnimeSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Anime,
                    img,
                    year,
                    EnumSet.of(if (isDub) DubStatus.Dubbed else DubStatus.Subbed),
                )
            }
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val response = app.get(url, timeout = 120).text
        val document = Jsoup.parse(response)

        val japaneseTitle =
            document.selectFirst("div.elements div.row > div:nth-child(1) > div.row-line:nth-child(1)")
                ?.text()?.trim()?.replace("Other names:", "")?.trim()

        val canonicalTitle = document.selectFirst("meta[name=\"title\"]")
            ?.attr("content")?.split("| W")?.get(0).toString()

        val isDubbed = canonicalTitle.contains("Dub")
        val episodeNodes = document.select(".tab-content .nav-item > a")

        val episodes = ArrayList(episodeNodes?.map {
            Episode(it.attr("href"))
        } ?: ArrayList())

        val statusElem =
            document.selectFirst("div.elements div.row > div:nth-child(1) > div.row-line:nth-child(2)")
        val status = when (statusElem?.text()?.replace("Status:", "")?.trim()) {
            "Ongoing" -> ShowStatus.Ongoing
            "Completed" -> ShowStatus.Completed
            else -> null
        }
        val yearText =
            document.selectFirst("div.elements div.row > div:nth-child(2) > div.row-line:nth-child(4)")
                ?.text()
        val year = yearText?.replace("Date release:", "")?.trim()?.split("-")?.get(0)?.toIntOrNull()

        val poster = document.selectFirst(".film-poster-img")?.attr("src")
        val type = document.selectFirst("span.item.mr-1 > a")?.text()?.trim()

        val synopsis = document.selectFirst(".description > p")?.text()?.trim()
        val genre =
            document.select("div.elements div.row > div:nth-child(1) > div.row-line:nth-child(5) > a")
                .map { it?.text()?.trim().toString() }

        return newAnimeLoadResponse(canonicalTitle, url, getType(type ?: "")) {
            japName = japaneseTitle
            engName = canonicalTitle
            posterUrl = poster
            this.year = year
            addEpisodes(if (isDubbed) DubStatus.Dubbed else DubStatus.Subbed, episodes)
            showStatus = status
            plot = synopsis
            tags = genre
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val response = app.get(data).text
        val servers = Jsoup.parse(response).select("#servers-list > ul > li").map {
            mapOf(
                "link" to it?.selectFirst("a")?.attr("data-embed"),
                "title" to it?.selectFirst("span")?.text()?.trim()
            )
        }

        for (server in servers) {
            WcoStream().getSafeUrl(server["link"].toString(), "")?.forEach(callback)
            Mcloud().getSafeUrl(server["link"].toString(), "")?.forEach(callback)
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/animeproviders/ZoroProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import android.util.Log
import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addAniListId
import com.lagradost.cloudstream3.LoadResponse.Companion.addMalId
import com.lagradost.cloudstream3.movieproviders.SflixProvider.Companion.extractRabbitStream
import com.lagradost.cloudstream3.movieproviders.SflixProvider.Companion.runSflixExtractorVerifierJob
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.Coroutines.ioSafe
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import com.lagradost.nicehttp.Requests.Companion.await
import okhttp3.Interceptor
import org.jsoup.Jsoup
import org.jsoup.nodes.Element
import java.net.URI

private const val OPTIONS = "OPTIONS"

class ZoroProvider : MainAPI() {
    override var mainUrl = "https://zoro.to"
    override var name = "Zoro"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val usesWebView = true

    override val supportedTypes = setOf(
        TvType.Anime,
        TvType.AnimeMovie,
        TvType.OVA
    )

    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Special")) TvType.OVA
            else if (t.contains("Movie")) TvType.AnimeMovie
            else TvType.Anime
        }

        fun getStatus(t: String): ShowStatus {
            return when (t) {
                "Finished Airing" -> ShowStatus.Completed
                "Currently Airing" -> ShowStatus.Ongoing
                else -> ShowStatus.Completed
            }
        }
    }

    val epRegex = Regex("Ep (\\d+)/")
    private fun Element.toSearchResult(): SearchResponse? {
        val href = fixUrl(this.select("a").attr("href"))
        val title = this.select("h3.film-name").text()
            val dubSub = this.select(".film-poster > .tick.ltr").text()
        //val episodes = this.selectFirst(".film-poster > .tick-eps")?.text()?.toIntOrNull()

        val dubExist = dubSub.contains("dub", ignoreCase = true)
        val subExist = dubSub.contains("sub", ignoreCase = true)
        val episodes = this.selectFirst(".film-poster > .tick.rtl > .tick-eps")?.text()?.let { eps ->
            //println("REGEX:::: $eps")
            // current episode / max episode
            //Regex("Ep (\\d+)/(\\d+)")
            epRegex.find(eps)?.groupValues?.get(1)?.toIntOrNull()
        }
        if (href.contains("/news/") || title.trim().equals("News", ignoreCase = true)) return null
        val posterUrl = fixUrl(this.select("img").attr("data-src"))
        val type = getType(this.select("div.fd-infor > span.fdi-item").text())

        return newAnimeSearchResponse(title, href, type) {
            this.posterUrl = posterUrl
            addDubStatus(dubExist, subExist, episodes, episodes)
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val html = app.get("$mainUrl/home").text
        val document = Jsoup.parse(html)

        val homePageList = ArrayList<HomePageList>()

        document.select("div.anif-block").forEach { block ->
            val header = block.select("div.anif-block-header").text().trim()
            val animes = block.select("li").mapNotNull {
                it.toSearchResult()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        document.select("section.block_area.block_area_home").forEach { block ->
            val header = block.select("h2.cat-heading").text().trim()
            val animes = block.select("div.flw-item").mapNotNull {
                it.toSearchResult()
            }
            if (animes.isNotEmpty()) homePageList.add(HomePageList(header, animes))
        }

        return HomePageResponse(homePageList)
    }

    private data class Response(
        @JsonProperty("status") val status: Boolean,
        @JsonProperty("html") val html: String
    )

//    override suspend fun quickSearch(query: String): List<SearchResponse> {
//        val url = "$mainUrl/ajax/search/suggest?keyword=${query}"
//        val html = mapper.readValue<Response>(khttp.get(url).text).html
//        val document = Jsoup.parse(html)
//
//        return document.select("a.nav-item").map {
//            val title = it.selectFirst(".film-name")?.text().toString()
//            val href = fixUrl(it.attr("href"))
//            val year = it.selectFirst(".film-infor > span")?.text()?.split(",")?.get(1)?.trim()?.toIntOrNull()
//            val image = it.select("img").attr("data-src")
//
//            AnimeSearchResponse(
//                title,
//                href,
//                this.name,
//                TvType.TvSeries,
//                image,
//                year,
//                null,
//                EnumSet.of(DubStatus.Subbed),
//                null,
//                null
//            )
//
//        }
//    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/search?keyword=$query"
        val html = app.get(link).text
        val document = Jsoup.parse(html)

        return document.select(".flw-item").map {
            val title = it.selectFirst(".film-detail > .film-name > a")?.attr("title").toString()
            val filmPoster = it.selectFirst(".film-poster")
            val poster = filmPoster!!.selectFirst("img")?.attr("data-src")

            val episodes = filmPoster.selectFirst("div.rtl > div.tick-eps")?.text()?.let { eps ->
                // current episode / max episode
                val epRegex = Regex("Ep (\\d+)/")//Regex("Ep (\\d+)/(\\d+)")
                epRegex.find(eps)?.groupValues?.get(1)?.toIntOrNull()
            }
            val dubsub = filmPoster.selectFirst("div.ltr")?.text()
            val dubExist = dubsub?.contains("DUB") ?: false
            val subExist = dubsub?.contains("SUB") ?: false || dubsub?.contains("RAW") ?: false

            val tvType =
                getType(it.selectFirst(".film-detail > .fd-infor > .fdi-item")?.text().toString())
            val href = fixUrl(it.selectFirst(".film-name a")!!.attr("href"))

            newAnimeSearchResponse(title, href, tvType) {
                this.posterUrl = poster
                addDubStatus(dubExist, subExist, episodes, episodes)
            }
        }
    }

    private fun Element?.getActor(): Actor? {
        val image =
            fixUrlNull(this?.selectFirst(".pi-avatar > img")?.attr("data-src")) ?: return null
        val name = this?.selectFirst(".pi-detail > .pi-name")?.text() ?: return null
        return Actor(name = name, image = image)
    }

    data class ZoroSyncData(
        @JsonProperty("mal_id") val malId: String?,
        @JsonProperty("anilist_id") val aniListId: String?,
    )

    override suspend fun load(url: String): LoadResponse {
        val html = app.get(url).text
        val document = Jsoup.parse(html)

        val syncData = tryParseJson<ZoroSyncData>(document.selectFirst("#syncData")?.data())

        val title = document.selectFirst(".anisc-detail > .film-name")?.text().toString()
        val poster = document.selectFirst(".anisc-poster img")?.attr("src")
        val tags = document.select(".anisc-info a[href*=\"/genre/\"]").map { it.text() }

        var year: Int? = null
        var japaneseTitle: String? = null
        var status: ShowStatus? = null

        for (info in document.select(".anisc-info > .item.item-title")) {
            val text = info?.text().toString()
            when {
                (year != null && japaneseTitle != null && status != null) -> break
                text.contains("Premiered") && year == null ->
                    year =
                        info.selectFirst(".name")?.text().toString().split(" ").last().toIntOrNull()

                text.contains("Japanese") && japaneseTitle == null ->
                    japaneseTitle = info.selectFirst(".name")?.text().toString()

                text.contains("Status") && status == null ->
                    status = getStatus(info.selectFirst(".name")?.text().toString())
            }
        }

        val description = document.selectFirst(".film-description.m-hide > .text")?.text()
        val animeId = URI(url).path.split("-").last()

        val episodes = Jsoup.parse(
            mapper.readValue<Response>(
                app.get(
                    "$mainUrl/ajax/v2/episode/list/$animeId"
                ).text
            ).html
        ).select(".ss-list > a[href].ssl-item.ep-item").map {
            newEpisode(it.attr("href")) {
                this.name = it?.attr("title")
                this.episode = it.selectFirst(".ssli-order")?.text()?.toIntOrNull()
            }
        }

        val actors = document.select("div.block-actors-content > div.bac-list-wrap > div.bac-item")
            ?.mapNotNull { head ->
                val subItems = head.select(".per-info") ?: return@mapNotNull null
                if (subItems.isEmpty()) return@mapNotNull null
                var role: ActorRole? = null
                val mainActor = subItems.first()?.let {
                    role = when (it.selectFirst(".pi-detail > .pi-cast")?.text()?.trim()) {
                        "Supporting" -> ActorRole.Supporting
                        "Main" -> ActorRole.Main
                        else -> null
                    }
                    it.getActor()
                } ?: return@mapNotNull null
                val voiceActor = if (subItems.size >= 2) subItems[1]?.getActor() else null
                ActorData(actor = mainActor, role = role, voiceActor = voiceActor)
            }

        val recommendations =
            document.select("#main-content > section > .tab-content > div > .film_list-wrap > .flw-item")
                .mapNotNull { head ->
                    val filmPoster = head?.selectFirst(".film-poster")
                    val epPoster = filmPoster?.selectFirst("img")?.attr("data-src")
                    val a = head?.selectFirst(".film-detail > .film-name > a")
                    val epHref = a?.attr("href")
                    val epTitle = a?.attr("title")
                    if (epHref == null || epTitle == null || epPoster == null) {
                        null
                    } else {
                        AnimeSearchResponse(
                            epTitle,
                            fixUrl(epHref),
                            this.name,
                            TvType.Anime,
                            epPoster,
                            dubStatus = null
                        )
                    }
                }

        return newAnimeLoadResponse(title, url, TvType.Anime) {
            japName = japaneseTitle
            engName = title
            posterUrl = poster
            this.year = year
            addEpisodes(DubStatus.Subbed, episodes)
            showStatus = status
            plot = description
            this.tags = tags
            this.recommendations = recommendations
            this.actors = actors
            addMalId(syncData?.malId?.toIntOrNull())
            addAniListId(syncData?.aniListId?.toIntOrNull())
        }
    }

    private data class RapidCloudResponse(
        @JsonProperty("link") val link: String
    )

    override suspend fun extractorVerifierJob(extractorData: String?) {
        Log.d(this.name, "Starting ${this.name} job!")
        runSflixExtractorVerifierJob(this, extractorData, "https://rapid-cloud.ru/")
    }

    /** Url hashcode to sid */
    var sid: HashMap<Int, String?> = hashMapOf()

    /**
     * Makes an identical Options request before .ts request
     * Adds an SID header to the .ts request.
     * */
    override fun getVideoInterceptor(extractorLink: ExtractorLink): Interceptor {
        return Interceptor { chain ->
            val request = chain.request()
            if (request.url.toString().endsWith(".ts")
                && request.method != OPTIONS
                // No option requests on VidCloud
                && !request.url.toString().contains("betterstream")
            ) {
                val newRequest =
                    chain.request()
                        .newBuilder().apply {
                            sid[extractorLink.url.hashCode()]?.let { sid ->
                                addHeader("SID", sid)
                            }
                        }
                        .build()
                val options = request.newBuilder().method(OPTIONS, request.body).build()
                ioSafe { app.baseClient.newCall(options).await() }

                return@Interceptor chain.proceed(newRequest)
            } else {
                return@Interceptor chain.proceed(chain.request())
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {

        val servers: List<Pair<DubStatus, String>> = Jsoup.parse(
            app.get("$mainUrl/ajax/v2/episode/servers?episodeId=" + data.split("=")[1])
                .parsed<Response>().html
        ).select(".server-item[data-type][data-id]").map {
            Pair(
                if (it.attr("data-type") == "sub") DubStatus.Subbed else DubStatus.Dubbed,
                it.attr("data-id")
            )
        }

        val extractorData =
            "https://ws1.rapid-cloud.ru/socket.io/?EIO=4&transport=polling"

        // Prevent duplicates
        servers.distinctBy { it.second }.apmap {
            val link =
                "$mainUrl/ajax/v2/episode/sources?id=${it.second}"
            val extractorLink = app.get(
                link,
            ).parsed<RapidCloudResponse>().link
            val hasLoadedExtractorLink =
                loadExtractor(extractorLink, "https://rapid-cloud.ru/", callback)

            if (!hasLoadedExtractorLink) {
                extractRabbitStream(
                    extractorLink,
                    subtitleCallback,
                    // Blacklist VidCloud for now
                    { videoLink -> if (!videoLink.url.contains("betterstream")) callback(videoLink) },
                    extractorData
                ) { sourceName ->
                    sourceName + " - ${it.first}"
                }
            }
        }

        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/AsianLoad.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper
import com.lagradost.cloudstream3.utils.getQualityFromName
import java.net.URI

class AsianLoad : ExtractorApi() {
    override var name = "AsianLoad"
    override var mainUrl = "https://asianembed.io"
    override val requiresReferer = true

    private val sourceRegex = Regex("""sources:[\W\w]*?file:\s*?["'](.*?)["']""")
    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val extractedLinksList: MutableList<ExtractorLink> = mutableListOf()
        with(app.get(url, referer = referer)) {
            sourceRegex.findAll(this.text).forEach { sourceMatch ->
                val extractedUrl = sourceMatch.groupValues[1]
                // Trusting this isn't mp4, may fuck up stuff
                if (URI(extractedUrl).path.endsWith(".m3u8")) {
                    M3u8Helper.generateM3u8(
                        name,
                        extractedUrl,
                        url,
                        headers = mapOf("referer" to this.url)
                    ).forEach { link ->
                        extractedLinksList.add(link)
                    }
                } else if (extractedUrl.endsWith(".mp4")) {
                    extractedLinksList.add(
                        ExtractorLink(
                            name,
                            name,
                            extractedUrl,
                            url.replace(" ", "%20"),
                            getQualityFromName(sourceMatch.groupValues[2]),
                        )
                    )
                }
            }
            return extractedLinksList
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Blogger.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.*
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson

class Blogger : ExtractorApi() {
    override val name = "Blogger"
    override val mainUrl = "https://www.blogger.com"
    override val requiresReferer = false

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val sources = mutableListOf<ExtractorLink>()
        with(app.get(url).document) {
            this.select("script").map { script ->
                if (script.data().contains("\"streams\":[")) {
                    val data = script.data().substringAfter("\"streams\":[")
                        .substringBefore("]")
                    tryParseJson<List<ResponseSource>>("[$data]")?.map {
                        sources.add(
                            ExtractorLink(
                                name,
                                name,
                                it.play_url,
                                referer = "https://www.youtube.com/",
                                quality = when (it.format_id) {
                                    18 -> 360
                                    22 -> 720
                                    else -> Qualities.Unknown.value
                                }
                            )
                        )
                    }
                }
            }
        }
        return sources
    }

    private data class ResponseSource(
        @JsonProperty("play_url") val play_url: String,
        @JsonProperty("format_id") val format_id: Int
    )
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/BullStream.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper

class BullStream : ExtractorApi() {
    override val name = "BullStream"
    override val mainUrl = "https://bullstream.xyz"
    override val requiresReferer = false
    val regex = Regex("(?<=sniff\\()(.*)(?=\\)\\);)")

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val data = regex.find(app.get(url).text)?.value
            ?.replace("\"", "")
            ?.split(",")
            ?: return null

        val m3u8 = "$mainUrl/m3u8/${data[1]}/${data[2]}/master.txt?s=1&cache=${data[4]}"
        println("shiv : $m3u8")
        return M3u8Helper.generateM3u8(
            name,
            m3u8,
            url,
            headers = mapOf("referer" to url, "accept" to "*/*")
        )
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/DoodExtractor.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.getQualityFromName
import kotlinx.coroutines.delay

class DoodCxExtractor : DoodLaExtractor() {
    override var mainUrl = "https://dood.cx"
}

class DoodPmExtractor : DoodLaExtractor() {
    override var mainUrl = "https://dood.pm"
}

class DoodToExtractor : DoodLaExtractor() {
    override var mainUrl = "https://dood.to"
}

class DoodSoExtractor : DoodLaExtractor() {
    override var mainUrl = "https://dood.so"
}

class DoodWsExtractor : DoodLaExtractor() {
    override var mainUrl = "https://dood.ws"
}


open class DoodLaExtractor : ExtractorApi() {
    override var name = "DoodStream"
    override var mainUrl = "https://dood.la"
    override val requiresReferer = false

    override fun getExtractorUrl(id: String): String {
        return "$mainUrl/d/$id"
    }

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val response0 = app.get(url).text // html of DoodStream page to look for /pass_md5/...
        val md5 =mainUrl+(Regex("/pass_md5/[^']*").find(response0)?.value ?: return null)  // get https://dood.ws/pass_md5/...
        val trueUrl = app.get(md5, referer = url).text + "zUEJeL3mUN?token=" + md5.substringAfterLast("/")   //direct link to extract  (zUEJeL3mUN is random)
        val quality = Regex("\\d{3,4}p").find(response0.substringAfter("<title>").substringBefore("</title>"))?.groupValues?.get(0)
        return listOf(
            ExtractorLink(
                trueUrl,
                this.name,
                trueUrl,
                mainUrl,
                getQualityFromName(quality),
                false
            )
        ) // links are valid in 8h

    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Evolaod.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.utils.*
import com.lagradost.cloudstream3.app

class Evoload1 : Evoload() {
    override var mainUrl = "https://evoload.io"
}

open class Evoload : ExtractorApi() {
    override val name: String = "Evoload"
    override val mainUrl: String = "https://www.evoload.io"
    //private val srcRegex = Regex("""video .*src="(.*)""""")  // would be possible to use the parse and find src attribute
    override val requiresReferer = true



    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val lang = url.substring(0, 2)
        val flag =
            if (lang == "vo") {
                " \uD83C\uDDEC\uD83C\uDDE7"
            }
            else if (lang == "vf"){
                " \uD83C\uDDE8\uD83C\uDDF5"
            } else {
                ""
            }
        
        val cleaned_url = if (lang == "ht") {  // if url doesn't contain a flag and the url starts with http://
            url
        } else {
            url.substring(2, url.length)
        }
	//println(lang)
        //println(cleaned_url)

        val id = cleaned_url.replace("https://evoload.io/e/", "")  // wanted media id
        val csrv_token = app.get("https://csrv.evosrv.com/captcha?m412548=").text  // whatever that is
        val captchaPass = app.get("https://cd2.evosrv.com/html/jsx/e.jsx").text.take(300).split("captcha_pass = '")[1].split("\'")[0]  //extract the captcha pass from the js response (located in the 300 first chars)
        val payload = mapOf("code" to id, "csrv_token" to csrv_token, "pass" to captchaPass)
        val r = app.post("https://evoload.io/SecurePlayer", data=(payload)).text
        val link = Regex("src\":\"(.*?)\"").find(r)?.destructured?.component1() ?: return listOf()
        return listOf(
            ExtractorLink(
                name,
                name + flag,
                link,
                cleaned_url,
                Qualities.Unknown.value,
            )
        )
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/GenericM3U8.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.network.WebViewResolver
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper


open class GenericM3U8 : ExtractorApi() {
    override var name = "Upstream"
    override var mainUrl = "https://upstream.to"
    override val requiresReferer = false

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val response = app.get(
            url, interceptor = WebViewResolver(
                Regex("""master\.m3u8""")
            )
        )
        val sources = mutableListOf<ExtractorLink>()
        if (response.url.contains("m3u8"))
            M3u8Helper.generateM3u8(
                name,
                response.url,
                url,
                headers = response.headers.toMap()
            ).forEach { link ->
                sources.add(link)
            }
        return sources
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/GMPlayer.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper

class GMPlayer : ExtractorApi() {
    override val name = "GM Player"
    override val mainUrl = "https://gmplayer.xyz"
    override val requiresReferer = true

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val ref = referer ?: return null
        val id = url.substringAfter("/video/").substringBefore("/")

        val m3u8 = app.post(
            "$mainUrl/player/index.php?data=$id&do=getVideo",
            mapOf(
                "accept" to "*/*",
                "referer" to ref,
                "x-requested-with" to "XMLHttpRequest",
                "origin" to mainUrl
            ),
            data = mapOf("hash" to id, "r" to ref)
        ).also { println("shiv " + it.text) }.parsed<GmResponse>().videoSource ?: return null

        return M3u8Helper.generateM3u8(
            name,
            m3u8,
            ref,
            headers = mapOf("accept" to "*/*")
        )
    }

    private data class GmResponse(
        val videoSource: String? = null
    )
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Hxfile.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.*
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson

class Neonime7n : Hxfile() {
    override val name = "Neonime7n"
    override val mainUrl = "https://7njctn.neonime.watch"
    override val redirect = false
}

class Neonime8n : Hxfile() {
    override val name = "Neonime8n"
    override val mainUrl = "https://8njctn.neonime.net"
    override val redirect = false
}

class KotakAnimeid : Hxfile() {
    override val name = "KotakAnimeid"
    override val mainUrl = "https://kotakanimeid.com"
}

private data class ResponseSource(
    @JsonProperty("file") val file: String,
    @JsonProperty("type") val type: String?,
    @JsonProperty("label") val label: String?
)

open class Hxfile : ExtractorApi() {
    override val name = "Hxfile"
    override val mainUrl = "https://hxfile.co"
    override val requiresReferer = false
    open val redirect = true

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val sources = mutableListOf<ExtractorLink>()
        val document = app.get(url, allowRedirects = redirect).document
        with(document) {
            this.select("script").map { script ->
                if (script.data().contains("eval(function(p,a,c,k,e,d)")) {
                    val data =
                        getAndUnpack(script.data()).substringAfter("sources:[").substringBefore("]")
                    tryParseJson<List<ResponseSource>>("[$data]")?.map {
                        sources.add(
                            ExtractorLink(
                                name,
                                name,
                                it.file,
                                referer = mainUrl,
                                quality = when {
                                    url.contains("hxfile.co") -> getQualityFromName(
                                        Regex("\\d\\.(.*?).mp4").find(
                                            document.select("title").text()
                                        )?.groupValues?.get(1).toString()
                                    )
                                    else -> getQualityFromName(it.label)
                                }
                            )
                        )
                    }
                } else if (script.data().contains("\"sources\":[")) {
                    val data = script.data().substringAfter("\"sources\":[").substringBefore("]")
                    tryParseJson<List<ResponseSource>>("[$data]")?.map {
                        sources.add(
                            ExtractorLink(
                                name,
                                name,
                                it.file,
                                referer = mainUrl,
                                quality = when {
                                    it.label?.contains("HD") == true -> Qualities.P720.value
                                    it.label?.contains("SD") == true -> Qualities.P480.value
                                    else -> getQualityFromName(it.label)
                                }
                            )
                        )
                    }
                }
                else {
                    null
                }
            }
        }
        return sources
    }

}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Jawcloud.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper


open class Jawcloud : ExtractorApi() {
    override var name = "Jawcloud"
    override var mainUrl = "https://jawcloud.co"
    override val requiresReferer = false

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val doc = app.get(url).document
        val urlString = doc.select("html body div source").attr("src")
        val sources = mutableListOf<ExtractorLink>()
        if (urlString.contains("m3u8"))
            M3u8Helper.generateM3u8(
                name,
                urlString,
                url,
                headers = app.get(url).headers.toMap()
            ).forEach { link -> sources.add(link) }
        return sources
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/M3u8Manifest.kt
================================================
package com.lagradost.cloudstream3.extractors

//{"auto":"/manifests/movies/15559/1624728920/qDwu5BOsfAwfTmnnjmkmXA/master.m3u8","1080p":"https://vdoc3.sallenes.space/qDwu5BOsfAwfTmnnjmkmXA/1624728920/storage6/movies/the-man-with-the-iron-heart-2017/1080p/index.m3u8","720p":"https://vdoc3.sallenes.space/qDwu5BOsfAwfTmnnjmkmXA/1624728920/storage6/movies/the-man-with-the-iron-heart-2017/720p/index.m3u8","360p":"https://vdoc3.sallenes.space/qDwu5BOsfAwfTmnnjmkmXA/1624728920/storage6/movies/the-man-with-the-iron-heart-2017/360p/index.m3u8","480p":"https://vdoc3.sallenes.space/qDwu5BOsfAwfTmnnjmkmXA/1624728920/storage6/movies/the-man-with-the-iron-heart-2017/480p/index.m3u8"}
object M3u8Manifest {
    // URL = first, QUALITY = second
    fun extractLinks(m3u8Data: String): ArrayList<Pair<String, String>> {
        val data: ArrayList<Pair<String, String>> = ArrayList()
        Regex("\"(.*?)\":\"(.*?)\"").findAll(m3u8Data).forEach {
            var quality = it.groupValues[1].replace("auto", "Auto")
            if (quality != "Auto" && !quality.endsWith('p')) quality += "p"
            val url = it.groupValues[2]
            data.add(Pair(url, quality))
        }
        return data
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Mcloud.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.USER_AGENT
import com.lagradost.cloudstream3.apmap
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.extractors.WcoStream.Companion.cipher
import com.lagradost.cloudstream3.extractors.WcoStream.Companion.encrypt
import com.lagradost.cloudstream3.extractors.WcoStream.Companion.keytwo
import com.lagradost.cloudstream3.extractors.helper.WcoHelper.Companion.getWcoKey
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper.Companion.generateM3u8

open class Mcloud : ExtractorApi() {
    override var name = "Mcloud"
    override var mainUrl = "https://mcloud.to"
    override val requiresReferer = true
    val headers = mapOf(
        "Host" to "mcloud.to",
        "User-Agent" to USER_AGENT,
        "Accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8",
        "Accept-Language" to "en-US,en;q=0.5",
        "DNT" to "1",
        "Connection" to "keep-alive",
        "Upgrade-Insecure-Requests" to "1",
        "Sec-Fetch-Dest" to "iframe",
        "Sec-Fetch-Mode" to "navigate",
        "Sec-Fetch-Site" to "cross-site",
        "Referer" to "https://animekisa.in/", //Referer works for wco and animekisa, probably with others too
        "Pragma" to "no-cache",
        "Cache-Control" to "no-cache",)
    private val key = "LCbu3iYC7ln24K7P" // key credits @Modder4869
    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val id = url.substringAfter("e/").substringAfter("embed/").substringBefore("?")
        keytwo = getWcoKey() ?: return null
        val encryptedid = encrypt(cipher(key, encrypt(id))).replace("/", "_").replace("=","")
        val link = "$mainUrl/info/$encryptedid"
        val response = app.get(link, headers = headers).text
        if(response.startsWith("<!DOCTYPE html>")) {
            // TODO decrypt html for link
            return emptyList()
        }
        data class SourcesMcloud (
            @JsonProperty("file" ) val file : String
        )

        data class MediaMcloud (
            @JsonProperty("sources" ) val sources : ArrayList<SourcesMcloud> = arrayListOf()
        )

        data class DataMcloud (
            @JsonProperty("media" ) val media : MediaMcloud? = MediaMcloud()
        )

        data class JsonMcloud (
            @JsonProperty("status" ) val status : Int?  = null,
            @JsonProperty("data"   ) val data   : DataMcloud = DataMcloud()
        )

        val mapped = parseJson<JsonMcloud>(response)
        val sources = mutableListOf<ExtractorLink>()
        val checkfile = mapped.status == 200
        if (checkfile)
            mapped.data.media?.sources?.apmap {
                if (it.file.contains("m3u8")) {
                    sources.addAll(
                        generateM3u8(
                            name,
                            it.file,
                            url,
                            headers = mapOf("Referer" to url)
                        )
                    )
                }
            }
        return sources
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/MixDrop.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.*

class MixDropBz : MixDrop(){
    override var mainUrl = "https://mixdrop.bz"
}

class MixDropCh : MixDrop(){
    override var mainUrl = "https://mixdrop.ch"
}

open class MixDrop : ExtractorApi() {
    override var name = "MixDrop"
    override var mainUrl = "https://mixdrop.co"
    private val srcRegex = Regex("""wurl.*?=.*?"(.*?)";""")
    override val requiresReferer = false

    override fun getExtractorUrl(id: String): String {
        return "$mainUrl/e/$id"
    }

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        with(app.get(url)) {
            getAndUnpack(this.text).let { unpackedText ->
                srcRegex.find(unpackedText)?.groupValues?.get(1)?.let { link ->
                    return listOf(
                        ExtractorLink(
                            name,
                            name,
                            httpsify(link),
                            url,
                            Qualities.Unknown.value,
                        )
                    )
                }
            }
        }
        return null
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Mp4Upload.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.getAndUnpack

class Mp4Upload : ExtractorApi() {
    override var name = "Mp4Upload"
    override var mainUrl = "https://www.mp4upload.com"
    private val srcRegex = Regex("""player\.src\("(.*?)"""")
    override val requiresReferer = true

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        with(app.get(url)) {
            getAndUnpack(this.text).let { unpackedText ->
                val quality = unpackedText.lowercase().substringAfter(" height=").substringBefore(" ").toIntOrNull()
                srcRegex.find(unpackedText)?.groupValues?.get(1)?.let { link ->
                    return listOf(
                        ExtractorLink(
                            name,
                            name,
                            link,
                            url,
                            quality ?: Qualities.Unknown.value,
                        )
                    )
                }
            }
        }
        return null
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/MultiQuality.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.getQualityFromName
import java.net.URI

class MultiQuality : ExtractorApi() {
    override var name = "MultiQuality"
    override var mainUrl = "https://gogo-play.net"
    private val sourceRegex = Regex("""file:\s*['"](.*?)['"],label:\s*['"](.*?)['"]""")
    private val m3u8Regex = Regex(""".*?(\d*).m3u8""")
    private val urlRegex = Regex("""(.*?)([^/]+$)""")
    override val requiresReferer = false

    override fun getExtractorUrl(id: String): String {
        return "$mainUrl/loadserver.php?id=$id"
    }

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val extractedLinksList: MutableList<ExtractorLink> = mutableListOf()
        with(app.get(url)) {
            sourceRegex.findAll(this.text).forEach { sourceMatch ->
                val extractedUrl = sourceMatch.groupValues[1]
                // Trusting this isn't mp4, may fuck up stuff
                if (URI(extractedUrl).path.endsWith(".m3u8")) {
                    with(app.get(extractedUrl)) {
                        m3u8Regex.findAll(this.text).forEach { match ->
                            extractedLinksList.add(
                                ExtractorLink(
                                    name,
                                    name = name,
                                    urlRegex.find(this.url)!!.groupValues[1] + match.groupValues[0],
                                    url,
                                    getQualityFromName(match.groupValues[1]),
                                    isM3u8 = true
                                )
                            )
                        }

                    }
                } else if (extractedUrl.endsWith(".mp4")) {
                    extractedLinksList.add(
                        ExtractorLink(
                            name,
                            "$name ${sourceMatch.groupValues[2]}",
                            extractedUrl,
                            url.replace(" ", "%20"),
                            Qualities.Unknown.value,
                        )
                    )
                }
            }
            return extractedLinksList
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/OkRuExtractor.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.utils.*
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.AppUtils.parseJson

data class DataOptionsJson (
    @JsonProperty("flashvars") var flashvars : Flashvars? = Flashvars(),
)
data class Flashvars (
    @JsonProperty("metadata") var metadata : String? = null,
    @JsonProperty("hlsManifestUrl") var hlsManifestUrl : String? = null, //m3u8
)

data class MetadataOkru (
    @JsonProperty("videos") var videos: ArrayList<Videos> = arrayListOf(),
)

data class Videos (
    @JsonProperty("name") var name : String,
    @JsonProperty("url") var url : String,
    @JsonProperty("seekSchema") var seekSchema : Int? = null,
    @JsonProperty("disallowed") var disallowed : Boolean? = null
)

class OkRuHttps: OkRu(){
    override var mainUrl = "https://ok.ru"
}

open class OkRu : ExtractorApi() {
    override var name = "Okru"
    override var mainUrl = "http://ok.ru"
    override val requiresReferer = false

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val doc = app.get(url).document
        val sources = ArrayList<ExtractorLink>()
        val datajson = doc.select("div[data-options]").attr("data-options")
        if (datajson.isNotBlank()) {
            val main = parseJson<DataOptionsJson>(datajson)
            val metadatajson = parseJson<MetadataOkru>(main.flashvars?.metadata!!)
            val servers = metadatajson.videos
            servers.forEach {
                val quality = it.name.uppercase()
                    .replace("MOBILE","144p")
                    .replace("LOWEST","240p")
                    .replace("LOW","360p")
                    .replace("SD","480p")
                    .replace("HD","720p")
                    .replace("FULL","1080p")
                    .replace("QUAD","1440p")
                    .replace("ULTRA","4k")
                val extractedurl = it.url.replace("\\\\u0026", "&")
                sources.add(ExtractorLink(
                    name,
                    name = this.name,
                    extractedurl,
                    url,
                    getQualityFromName(quality),
                    isM3u8 = false
                ))
            }
        }
        return sources
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Pelisplus.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.apmap
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mvvm.suspendSafeApiCall
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.extractorApis
import com.lagradost.cloudstream3.utils.getQualityFromName
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup

/**
 * overrideMainUrl is necessary for for other vidstream clones like vidembed.cc
 * If they diverge it'd be better to make them separate.
 * */
class Pelisplus(val mainUrl: String) {
    val name: String = "Vidstream"

    private fun getExtractorUrl(id: String): String {
        return "$mainUrl/play?id=$id"
    }

    private fun getDownloadUrl(id: String): String {
        return "$mainUrl/download?id=$id"
    }

    private val normalApis = arrayListOf(MultiQuality())

    // https://gogo-stream.com/streaming.php?id=MTE3NDg5
    suspend fun getUrl(id: String, isCasting: Boolean = false, callback: (ExtractorLink) -> Unit): Boolean {
        try {
            normalApis.apmap { api ->
                val url = api.getExtractorUrl(id)
                val source = api.getSafeUrl(url)
                source?.forEach { callback.invoke(it) }
            }
            val extractorUrl = getExtractorUrl(id)

            /** Stolen from GogoanimeProvider.kt extractor */
            suspendSafeApiCall {
                val link = getDownloadUrl(id)
                println("Generated vidstream download link: $link")
                val page = app.get(link, referer = extractorUrl)

                val pageDoc = Jsoup.parse(page.text)
                val qualityRegex = Regex("(\\d+)P")

                //a[download]
                pageDoc.select(".dowload > a")?.apmap { element ->
                    val href = element.attr("href") ?: return@apmap
                    val qual = if (element.text()
                            .contains("HDP")
                    ) "1080" else qualityRegex.find(element.text())?.destructured?.component1().toString()

                    if (!loadExtractor(href, link, callback)) {
                        callback.invoke(
                            ExtractorLink(
                                this.name,
                                name = this.name,
                                href,
                                page.url,
                                getQualityFromName(qual),
                                element.attr("href").contains(".m3u8")
                            )
                        )
                    }
                }
            }

            with(app.get(extractorUrl)) {
                val document = Jsoup.parse(this.text)
                val primaryLinks = document.select("ul.list-server-items > li.linkserver")
                //val extractedLinksList: MutableList<ExtractorLink> = mutableListOf()

                // All vidstream links passed to extractors
                primaryLinks.distinctBy { it.attr("data-video") }.forEach { element ->
                    val link = element.attr("data-video")
                    //val name = element.text()

                    // Matches vidstream links with extractors
                    extractorApis.filter { !it.requiresReferer || !isCasting }.apmap { api ->
                        if (link.startsWith(api.mainUrl)) {
                            val extractedLinks = api.getSafeUrl(link, extractorUrl)
                            if (extractedLinks?.isNotEmpty() == true) {
                                extractedLinks.forEach {
                                    callback.invoke(it)
                                }
                            }
                        }
                    }
                }
                return true
            }
        } catch (e: Exception) {
            return false
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/PlayerVoxzer.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper


open class PlayerVoxzer : ExtractorApi() {
    override var name = "Voxzer"
    override var mainUrl = "https://player.voxzer.org"
    override val requiresReferer = false

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val listurl = url.replace("/view/","/list/")
        val urltext = app.get(listurl, referer = url).text
        val m3u8regex = Regex("((https:|http:)\\/\\/.*\\.m3u8)")
        val sources = mutableListOf<ExtractorLink>()
        val listm3 = m3u8regex.find(urltext)?.value
        if (listm3?.contains("m3u8") == true)
            M3u8Helper.generateM3u8(
                name,
                listm3,
                url,
                headers = app.get(url).headers.toMap()
            ).forEach { link ->
                sources.add(link)
            }
        return sources
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/SBPlay.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.APIHolder.unixTimeMS
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.getPostForm
import org.jsoup.Jsoup

//class SBPlay1 : SBPlay() {
//    override var mainUrl = "https://sbplay1.com"
//}

//class SBPlay2 : SBPlay() {
//    override var mainUrl = "https://sbplay2.com"
//}

open class SBPlay : ExtractorApi() {
    override var mainUrl = "https://sbplay.one"
    override var name = "SBPlay"
    override val requiresReferer = false

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val response = app.get(url, referer = referer).text
        val document = Jsoup.parse(response)

        val links = ArrayList<ExtractorLink>()

        val tree = document.select("table > tbody > tr > td > a")
        for (item in tree) {
            val onDownload = item.attr("onclick")
            val name = "${this.name} - ${item.text()}"
            try {
                Regex("download_video\\('(.*?)','(.*?)','(.*?)'\\)").matchEntire(onDownload)?.let {
                    val id = it.groupValues[1]
                    val mode = it.groupValues[2]
                    val hash = it.groupValues[3]
                    val href = "https://sbplay.one/dl?op=download_orig&id=$id&mode=$mode&hash=$hash"
                    val hrefResponse = app.get(href).text
                    app.post("https://sbplay.one/?op=notifications&open=&_=$unixTimeMS", referer = href)
                    val hrefDocument = Jsoup.parse(hrefResponse)
                    val hrefSpan = hrefDocument.selectFirst("span > a")
                    if (hrefSpan == null) {
                        getPostForm(href, hrefResponse)?.let { form ->
                            val postDocument = Jsoup.parse(form)
                            val downloadBtn = postDocument.selectFirst("a.downloadbtn")?.attr("href")
                            if (downloadBtn.isNullOrEmpty()) {
                                val hrefSpan2 = postDocument.selectFirst("span > a")?.attr("href")
                                if (hrefSpan2?.startsWith("https://") == true) {
                                    links.add(
                                        ExtractorLink(
                                            this.name, name,
                                            hrefSpan2, "", Qualities.Unknown.value, false
                                        )
                                    )
                                } else {
                                    // no link found!!!
                                }
                            } else {
                                links.add(
                                    ExtractorLink(
                                        this.name,
                                        name,
                                        downloadBtn,
                                        "",
                                        Qualities.Unknown.value,
                                        false
                                    )
                                )
                            }
                        }
                    } else {
                        val link = hrefSpan.attr("href")
                        links.add(ExtractorLink(this.name, name, link, "", Qualities.Unknown.value, false))
                    }
                }
            } catch (e: Exception) {
                logError(e)
            }
        }

        return links
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Solidfiles.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName


class Solidfiles : ExtractorApi() {
    override val name = "Solidfiles"
    override val mainUrl = "https://www.solidfiles.com"
    override val requiresReferer = false

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val sources = mutableListOf<ExtractorLink>()
        with(app.get(url).document) {
            this.select("script").map { script ->
                if (script.data().contains("\"streamUrl\":")) {
                    val data = script.data().substringAfter("constant('viewerOptions', {").substringBefore("});")
                    val source = tryParseJson<ResponseSource>("{$data}")
                    val quality = Regex("\\d{3,4}p").find(source!!.nodeName)?.groupValues?.get(0)
                    sources.add(
                        ExtractorLink(
                            name,
                            name,
                            source.streamUrl,
                            referer = url,
                            quality = getQualityFromName(quality)
                        )
                    )
                }
            }
        }
        return sources
    }


    private data class ResponseSource(
        @JsonProperty("streamUrl") val streamUrl: String,
        @JsonProperty("nodeName") val nodeName: String
    )

}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Streamhub.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.JsUnpacker
import com.lagradost.cloudstream3.utils.Qualities
import java.net.URI

class Streamhub : ExtractorApi() {
    override var mainUrl = "https://streamhub.to"
    override var name = "Streamhub"
    override val requiresReferer = false

    override fun getExtractorUrl(id: String): String {
        return "$mainUrl/e/$id"
    }

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val response = app.get(url).text
        Regex("eval((.|\\n)*?)</script>").find(response)?.groupValues?.get(1)?.let { jsEval ->
            JsUnpacker("eval$jsEval").unpack()?.let { unPacked ->
                Regex("sources:\\[\\{src:\"(.*?)\"").find(unPacked)?.groupValues?.get(1)?.let { link ->
                    return listOf(
                        ExtractorLink(
                            this.name,
                            this.name,
                            link,
                            referer ?: "",
                            Qualities.Unknown.value,
                            URI(link).path.endsWith(".m3u8")
                        )
                    )
                }
            }
        }
        return null
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/StreamSB.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper

class SBfull : StreamSB() {
    override var mainUrl = "https://sbfull.com"
}

class StreamSB1 : StreamSB() {
    override var mainUrl = "https://sbplay1.com"
}

class StreamSB2 : StreamSB() {
    override var mainUrl = "https://sbplay2.com"
}

class StreamSB3 : StreamSB() {
    override var mainUrl = "https://sbplay3.com"
}

class StreamSB4 : StreamSB() {
    override var mainUrl = "https://cloudemb.com"
}

class StreamSB5 : StreamSB() {
    override var mainUrl = "https://sbplay.org"
}

class StreamSB6 : StreamSB() {
    override var mainUrl = "https://embedsb.com"
}

class StreamSB7 : StreamSB() {
    override var mainUrl = "https://pelistop.co"
}

class StreamSB8 : StreamSB() {
    override var mainUrl = "https://streamsb.net"
}

class StreamSB9 : StreamSB() {
    override var mainUrl = "https://sbplay.one"
}

class StreamSB10 : StreamSB() {
    override var mainUrl = "https://sbplay2.xyz"
}

// This is a modified version of https://github.com/jmir1/aniyomi-extensions/blob/master/src/en/genoanime/src/eu/kanade/tachiyomi/animeextension/en/genoanime/extractors/StreamSBExtractor.kt
// The following code is under the Apache License 2.0 https://github.com/jmir1/aniyomi-extensions/blob/master/LICENSE
open class StreamSB : ExtractorApi() {
    override var name = "StreamSB"
    override var mainUrl = "https://watchsb.com"
    override val requiresReferer = false

    private val hexArray = "0123456789ABCDEF".toCharArray()

    private fun bytesToHex(bytes: ByteArray): String {
        val hexChars = CharArray(bytes.size * 2)
        for (j in bytes.indices) {
            val v = bytes[j].toInt() and 0xFF

            hexChars[j * 2] = hexArray[v ushr 4]
            hexChars[j * 2 + 1] = hexArray[v and 0x0F]
        }
        return String(hexChars)
    }

    data class Subs (
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String,
    )

    data class StreamData (
        @JsonProperty("file") val file: String,
        @JsonProperty("cdn_img") val cdnImg: String,
        @JsonProperty("hash") val hash: String,
        @JsonProperty("subs") val subs: List<Subs>?,
        @JsonProperty("length") val length: String,
        @JsonProperty("id") val id: String,
        @JsonProperty("title") val title: String,
        @JsonProperty("backup") val backup: String,
    )

    data class Main (
        @JsonProperty("stream_data") val streamData: StreamData,
        @JsonProperty("status_code") val statusCode: Int,
    )

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val regexID = Regex("(embed-[a-zA-Z0-9]{0,8}[a-zA-Z0-9_-]+|\\/e\\/[a-zA-Z0-9]{0,8}[a-zA-Z0-9_-]+)")
        val id = regexID.findAll(url).map {
            it.value.replace(Regex("(embed-|\\/e\\/)"),"")
        }.first()
        val bytes = id.toByteArray()
        val bytesToHex = bytesToHex(bytes)
        val master = "$mainUrl/sources43/6d6144797752744a454267617c7c${bytesToHex.lowercase()}7c7c4e61755a56456f34385243727c7c73747265616d7362/6b4a33767968506e4e71374f7c7c343837323439333133333462353935333633373836643638376337633462333634663539343137373761333635313533333835333763376333393636363133393635366136323733343435323332376137633763373337343732363536313664373336327c7c504d754478413835306633797c7c73747265616d7362"
        val headers = mapOf(
            "watchsb" to "streamsb",
            )
        val urltext = app.get(master,
            headers = headers,
            allowRedirects = false
        ).text
        val mapped = urltext.let { parseJson<Main>(it) }
        val testurl = app.get(mapped.streamData.file, headers = headers).text
        // val urlmain = mapped.streamData.file.substringBefore("/hls/")
        if (urltext.contains("m3u8") && testurl.contains("EXTM3U"))
            return M3u8Helper.generateM3u8(
                name,
                mapped.streamData.file,
                url,
                headers = headers
            )
        return null
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/StreamTape.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities

class StreamTape : ExtractorApi() {
    override var name = "StreamTape"
    override var mainUrl = "https://streamtape.com"
    override val requiresReferer = false

    private val linkRegex =
        Regex("""'robotlink'\)\.innerHTML = '(.+?)'\+ \('(.+?)'\)""")

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        with(app.get(url)) {
            linkRegex.find(this.text)?.let {
                val extractedUrl = "https:${it.groups[1]!!.value + it.groups[2]!!.value.substring(3,)}"
                return listOf(
                    ExtractorLink(
                        name,
                        name,
                        extractedUrl,
                        url,
                        Qualities.Unknown.value,
                    )
                )
            }
        }
        return null
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Tomatomatela.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities

class Cinestart: Tomatomatela() {
    override var name = "Cinestart"
    override var mainUrl = "https://cinestart.net"
    override val details = "vr.php?v="
}

open class Tomatomatela : ExtractorApi() {
    override var name = "Tomatomatela"
    override var mainUrl = "https://tomatomatela.com"
    override val requiresReferer = false
    private data class Tomato (
        @JsonProperty("status") val status: Int,
        @JsonProperty("file") val file: String
    )
    open val details = "details.php?v="
    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val link = url.replace("$mainUrl/embed.html#","$mainUrl/$details")
        val server = app.get(link, allowRedirects = false).text
        val json = parseJson<Tomato>(server)
        if (json.status == 200) return listOf(
            ExtractorLink(
                name,
                name,
                json.file,
                "",
                Qualities.Unknown.value,
                isM3u8 = false
            )
        )
        return null
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/UpstreamExtractor.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities

class UpstreamExtractor: ExtractorApi() {
    override val name: String = "Upstream.to"
    override val mainUrl: String = "https://upstream.to"
    override val requiresReferer = true

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        // WIP: m3u8 link fetched but sometimes not playing
        //Log.i(this.name, "Result => (no extractor) ${url}")
        val sources: MutableList<ExtractorLink> = mutableListOf()
        val doc = app.get(url, referer = referer).text
        if (doc.isNotBlank()) {
            var reg = Regex("(?<=master)(.*)(?=hls)")
            val result = reg.find(doc)?.groupValues?.map {
                it.trim('|')
            }?.toList()
            reg = Regex("(?<=\\|file\\|)(.*)(?=\\|remove\\|)")
            val domainList = reg.find(doc)?.groupValues?.get(1)?.split("|")
            var domain = when (!domainList.isNullOrEmpty()) {
                true -> {
                    if (domainList.isNotEmpty()) {
                        var domName = ""
                        for (part in domainList) {
                            domName = "${part}.${domName}"
                        }
                        domName.trimEnd('.')
                    } else { "" }
                }
                false -> ""
            }
            //Log.i(this.name, "Result => (domain) ${domain}")
            if (domain.isEmpty()) {
                domain = "s96.upstreamcdn.co"
                //Log.i(this.name, "Result => (default domain) ${domain}")
            }

            result?.forEach {
                val linkUrl = "https://${domain}/hls/${it}/master.m3u8"
                sources.add(
                    ExtractorLink(
                    name = "Upstream m3u8",
                    source = this.name,
                    url = linkUrl,
                    quality = Qualities.Unknown.value,
                    referer = referer ?: linkUrl,
                    isM3u8 = true
                    )
                )
            }
        }
        return sources
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Uqload.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.utils.*
import com.lagradost.cloudstream3.app

class Uqload1 : Uqload() {
    override var mainUrl = "https://uqload.com"
}

open class Uqload : ExtractorApi() {
    override val name: String = "Uqload"
    override val mainUrl: String = "https://www.uqload.com"
    private val srcRegex = Regex("""sources:.\[(.*?)\]""")  // would be possible to use the parse and find src attribute
    override val requiresReferer = true


    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink>? {
        val lang = url.substring(0, 2)
        val flag =
            if (lang == "vo") {
                " \uD83C\uDDEC\uD83C\uDDE7"
            }
            else if (lang == "vf"){
                " \uD83C\uDDE8\uD83C\uDDF5"
            } else {
                ""
            }
        
        val cleaned_url = if (lang == "ht") {  // if url doesn't contain a flag and the url starts with http://
            url
        } else {
            url.substring(2, url.length)
        }
        with(app.get(cleaned_url)) {  // raised error ERROR_CODE_PARSING_CONTAINER_UNSUPPORTED (3003) is due to the response: "error_nofile"
            srcRegex.find(this.text)?.groupValues?.get(1)?.replace("\"", "")?.let { link ->
                return listOf(
                    ExtractorLink(
                        name,
                        name + flag,
                        link,
                        cleaned_url,
                        Qualities.Unknown.value,
                    )
                )
            }
        }
        return null
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Vidstream.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.apmap
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.argamap
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.extractorApis
import com.lagradost.cloudstream3.utils.getQualityFromName
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup

/**
 * overrideMainUrl is necessary for for other vidstream clones like vidembed.cc
 * If they diverge it'd be better to make them separate.
 * */
class Vidstream(val mainUrl: String) {
    val name: String = "Vidstream"

    private fun getExtractorUrl(id: String): String {
        return "$mainUrl/streaming.php?id=$id"
    }

    private fun getDownloadUrl(id: String): String {
        return "$mainUrl/download?id=$id"
    }

    private val normalApis = arrayListOf(MultiQuality())

    // https://gogo-stream.com/streaming.php?id=MTE3NDg5
    suspend fun getUrl(
        id: String,
        isCasting: Boolean = false,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val extractorUrl = getExtractorUrl(id)
        argamap(
            {
                normalApis.apmap { api ->
                    val url = api.getExtractorUrl(id)
                    val source = api.getSafeUrl(url)
                    source?.forEach { callback.invoke(it) }
                }
            }, {
                /** Stolen from GogoanimeProvider.kt extractor */
                val link = getDownloadUrl(id)
                println("Generated vidstream download link: $link")
                val page = app.get(link, referer = extractorUrl)

                val pageDoc = Jsoup.parse(page.text)
                val qualityRegex = Regex("(\\d+)P")

                //a[download]
                pageDoc.select(".dowload > a")?.apmap { element ->
                    val href = element.attr("href") ?: return@apmap
                    val qual = if (element.text()
                            .contains("HDP")
                    ) "1080" else qualityRegex.find(element.text())?.destructured?.component1()
                        .toString()

                    if (!loadExtractor(href, link, callback)) {
                        callback.invoke(
                            ExtractorLink(
                                this.name,
                                name = this.name,
                                href,
                                page.url,
                                getQualityFromName(qual),
                                element.attr("href").contains(".m3u8")
                            )
                        )
                    }
                }
            }, {
                with(app.get(extractorUrl)) {
                    val document = Jsoup.parse(this.text)
                    val primaryLinks = document.select("ul.list-server-items > li.linkserver")
                    //val extractedLinksList: MutableList<ExtractorLink> = mutableListOf()

                    // All vidstream links passed to extractors
                    primaryLinks.distinctBy { it.attr("data-video") }.forEach { element ->
                        val link = element.attr("data-video")
                        //val name = element.text()

                        // Matches vidstream links with extractors
                        extractorApis.filter { !it.requiresReferer || !isCasting }.apmap { api ->
                            if (link.startsWith(api.mainUrl)) {
                                val extractedLinks = api.getSafeUrl(link, extractorUrl)
                                if (extractedLinks?.isNotEmpty() == true) {
                                    extractedLinks.forEach {
                                        callback.invoke(it)
                                    }
                                }
                            }
                        }
                    }
                }
            }
        )
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/VoeExtractor.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName

open class VoeExtractor : ExtractorApi() {
    override val name: String = "Voe"
    override val mainUrl: String = "https://voe.sx"
    override val requiresReferer = false

    private data class ResponseLinks(
        @JsonProperty("hls") val url: String?,
        @JsonProperty("video_height") val label: Int?
        //val type: String // Mp4
    )

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val extractedLinksList: MutableList<ExtractorLink> = mutableListOf()
        val doc = app.get(url).text
        if (doc.isNotBlank()) {
            val start = "const sources ="
            var src = doc.substring(doc.indexOf(start))
            src = src.substring(start.length, src.indexOf(";"))
                .replace("0,", "0")
                .trim()
            //Log.i(this.name, "Result => (src) ${src}")
            parseJson<ResponseLinks?>(src)?.let { voelink ->
                //Log.i(this.name, "Result => (voelink) ${voelink}")
                val linkUrl = voelink.url
                val linkLabel = voelink.label?.toString() ?: ""
                if (!linkUrl.isNullOrEmpty()) {
                    extractedLinksList.add(
                        ExtractorLink(
                            name = this.name,
                            source = this.name,
                            url = linkUrl,
                            quality = getQualityFromName(linkLabel),
                            referer = url,
                            isM3u8 = true
                        )
                    )
                }
            }
        }
        return extractedLinksList
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/WatchSB.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.network.WebViewResolver
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper.Companion.generateM3u8

open class WatchSB : ExtractorApi() {
    override var name = "WatchSB"
    override var mainUrl = "https://watchsb.com"
    override val requiresReferer = false

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val response = app.get(
            url, interceptor = WebViewResolver(
                Regex("""master\.m3u8""")
            )
        )

        return generateM3u8(name, response.url, url, headers = response.headers.toMap())
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/WcoStream.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.apmap
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.extractors.helper.WcoHelper.Companion.getWcoKey
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper.Companion.generateM3u8
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.getQualityFromName

class Vidstreamz : WcoStream() {
    override var mainUrl = "https://vidstreamz.online"
}

class Vizcloud : WcoStream() {
    override var mainUrl = "https://vizcloud2.ru"
}

class Vizcloud2 : WcoStream() {
    override var mainUrl = "https://vizcloud2.online"
}

class VizcloudOnline : WcoStream() {
    override var mainUrl = "https://vizcloud.online"
}

class VizcloudXyz : WcoStream() {
    override var mainUrl = "https://vizcloud.xyz"
}

class VizcloudLive : WcoStream() {
    override var mainUrl = "https://vizcloud.live"
}

class VizcloudInfo : WcoStream() {
    override var mainUrl = "https://vizcloud.info"
}

class MwvnVizcloudInfo : WcoStream() {
    override var mainUrl = "https://mwvn.vizcloud.info"
}

class VizcloudDigital : WcoStream() {
    override var mainUrl = "https://vizcloud.digital"
}

class VizcloudCloud : WcoStream() {
    override var mainUrl = "https://vizcloud.cloud"
}

open class WcoStream : ExtractorApi() {
    override var name = "VidStream" // Cause works for animekisa and wco
    override var mainUrl = "https://vidstream.pro"
    override val requiresReferer = false

    companion object {
        var keytwo = ""
        fun encrypt(input: String): String {
            if (input.any { it.code >= 256 }) throw Exception("illegal characters!")
            var output = ""
            for (i in input.indices step 3) {
                val a = intArrayOf(-1, -1, -1, -1)
                a[0] = input[i].code shr 2
                a[1] = (3 and input[i].code) shl 4
                if (input.length > i + 1) {
                    a[1] = a[1] or (input[i + 1].code shr 4)
                    a[2] = (15 and input[i + 1].code) shl 2
                }
                if (input.length > i + 2) {
                    a[2] = a[2] or (input[i + 2].code shr 6)
                    a[3] = 63 and input[i + 2].code
                }
                for (n in a) {
                    if (n == -1) output += "="
                    else {
                        if (n in 0..63) output += keytwo[n]
                    }
                }
            }
            return output;
        }

        fun cipher(inputOne: String, inputTwo: String): String {
            val arr = IntArray(256) { it }
            var output = ""
            var u = 0
            var r: Int
            for (a in arr.indices) {
                u = (u + arr[a] + inputOne[a % inputOne.length].code) % 256
                r = arr[a]
                arr[a] = arr[u]
                arr[u] = r
            }
            u = 0
            var c = 0
            for (f in inputTwo.indices) {
                c = (c + f) % 256
                u = (u + arr[c]) % 256
                r = arr[c]
                arr[c] = arr[u]
                arr[u] = r
                output += (inputTwo[f].code xor arr[(arr[c] + arr[u]) % 256]).toChar()
            }
            return output
        }
    }
    private val key = "LCbu3iYC7ln24K7P" // key credits @Modder4869
    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val baseUrl = url.split("/e/")[0]

        val (Id) = (Regex("/e/(.*?)?domain").find(url)?.destructured ?: Regex("""/e/(.*)""").find(
            url
        )?.destructured) ?: return emptyList()
      //  val (skey) = Regex("""skey\s=\s['"](.*?)['"];""").find(html)?.destructured
      //     ?: return emptyList()
        keytwo = getWcoKey() ?: return emptyList()
        val encryptedID = encrypt(cipher(key, encrypt(Id))).replace("/", "_").replace("=","")
        val apiLink = "$baseUrl/info/$encryptedID"
        val referrer = "$baseUrl/e/$Id?domain=wcostream.cc"

        data class SourcesWco (
            @JsonProperty("file" ) val file : String
        )

        data class MediaWco (
            @JsonProperty("sources" ) val sources : ArrayList<SourcesWco> = arrayListOf()
        )

        data class DataWco (
            @JsonProperty("media" ) val media : MediaWco? = MediaWco()
        )

        data class WcoResponse (
            @JsonProperty("status" ) val status : Int?  = null,
            @JsonProperty("data"   ) val data   : DataWco? = DataWco()
        )

        val mapped = app.get(apiLink, headers = mapOf("Referer" to referrer)).parsed<WcoResponse>()
        val sources = mutableListOf<ExtractorLink>()
        val check = mapped.status == 200
        if (check) {
            mapped.data?.media?.sources?.forEach {
                if (mainUrl == "https://vizcloud2.ru" || mainUrl == "https://vizcloud.online") {
                    if (it.file.contains("vizcloud2.ru") || it.file.contains("vizcloud.online")) {
                        // Had to do this thing 'cause "list.m3u8#.mp4" gives 404 error so no quality is added
                        val link1080 = it.file.replace("list.m3u8#.mp4", "H4/v.m3u8")
                        val link720 = it.file.replace("list.m3u8#.mp4", "H3/v.m3u8")
                        val link480 = it.file.replace("list.m3u8#.mp4", "H2/v.m3u8")
                        val link360 = it.file.replace("list.m3u8#.mp4", "H1/v.m3u8")
                        val linkauto = it.file.replace("#.mp4", "")
                        listOf(
                            link1080,
                            link720,
                            link480,
                            link360,
                            linkauto
                        ).apmap { serverurl ->
                            val testurl = app.get(serverurl, headers = mapOf("Referer" to url)).text
                            if (testurl.contains("EXTM3")) {
                                val quality = when {
                                    serverurl.contains("H4") -> "1080p"
                                    serverurl.contains("H3") -> "720p"
                                    serverurl.contains("H2") -> "480p"
                                    serverurl.contains("H1") -> "360p"
                                    else -> "Auto"
                                }
                                sources.add(
                                    ExtractorLink(
                                        "VidStream",
                                        "VidStream",
                                        serverurl,
                                        url,
                                        getQualityFromName(quality),
                                        true,
                                    )
                                )
                            }
                        }
                    }
                } else if (
                    arrayOf(
                        "https://vidstream.pro",
                        "https://vidstreamz.online",
                        "https://vizcloud2.online",
                        "https://vizcloud.xyz",
                        "https://vizcloud.live",
                        "https://vizcloud.info",
                        "https://mwvn.vizcloud.info",
                        "https://vizcloud.digital",
                        "https://vizcloud.cloud"
                    ).contains(mainUrl)
                ) {
                    if (it.file.contains("m3u8")) {
                        sources.addAll(
                            generateM3u8(
                                name,
                                it.file.replace("#.mp4", ""),
                                url,
                                headers = mapOf("Referer" to url)
                            )
                        )
                    } else {
                        sources.add(
                            ExtractorLink(
                                name,
                                name = name,
                                it.file,
                                "",
                                Qualities.P720.value,
                                false
                            )
                        )
                    }
                }
            }
        }
        return sources
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/XStreamCdn.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mapper
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName

class LayarKaca: XStreamCdn() {
    override val name: String = "LayarKaca-xxi"
    override val mainUrl: String = "https://layarkacaxxi.icu"
}

class DBfilm: XStreamCdn() {
    override val name: String = "DBfilm"
    override val mainUrl: String = "https://dbfilm.bar"
}

class FEmbed: XStreamCdn() {
    override val name: String = "FEmbed"
    override val mainUrl: String = "https://www.fembed.com"
}

class Fplayer: XStreamCdn() {
    override val name: String = "Fplayer"
    override val mainUrl: String = "https://fplayer.info"
}

class FeHD: XStreamCdn() {
    override val name: String = "FeHD"
    override val mainUrl: String = "https://fembed-hd.com"
    override var domainUrl: String = "fembed-hd.com"
}

open class XStreamCdn : ExtractorApi() {
    override val name: String = "XStreamCdn"
    override val mainUrl: String = "https://embedsito.com"
    override val requiresReferer = false
    open var domainUrl: String = "embedsito.com"

    private data class ResponseData(
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String,
        //val type: String // Mp4
    )

    private data class ResponseJson(
        @JsonProperty("success") val success: Boolean,
        @JsonProperty("data") val data: List<ResponseData>?
    )

    override fun getExtractorUrl(id: String): String {
        return "$domainUrl/api/source/$id"
    }

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val headers = mapOf(
            "Referer" to url,
            "User-Agent" to "Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0",
        )
        val id = url.trimEnd('/').split("/").last()
        val newUrl = "https://${domainUrl}/api/source/${id}"
        val extractedLinksList: MutableList<ExtractorLink> = mutableListOf()
        with(app.post(newUrl, headers = headers)) {
            if (this.code != 200) return listOf()
            val text = this.text
            if (text.isEmpty()) return listOf()
            if (text == """{"success":false,"data":"Video not found or has been removed"}""") return listOf()
            mapper.readValue<ResponseJson?>(text)?.let {
                if (it.success && it.data != null) {
                    it.data.forEach { data ->
                        extractedLinksList.add(
                            ExtractorLink(
                                name,
                                name = name,
                                data.file,
                                url,
                                getQualityFromName(data.label),
                            )
                        )
                    }
                }
            }
        }
        return extractedLinksList
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/Zplayer.kt
================================================
package com.lagradost.cloudstream3.extractors

import com.lagradost.cloudstream3.apmap
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorApi
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper
import com.lagradost.cloudstream3.utils.getAndUnpack

class Zplayer: ZplayerV2() {
    override var name: String = "Zplayer"
    override var mainUrl: String = "https://zplayer.live"
}

class Upstream: ZplayerV2() {
    override var name: String = "Upstream" //Here 'cause works
    override var mainUrl: String = "https://upstream.to"
}

class Streamhub2: ZplayerV2() {
    override var name = "Streamhub" //Here 'cause works
    override var mainUrl = "https://streamhub.to"
}

open class ZplayerV2 : ExtractorApi() {
    override var name = "Zplayer V2"
    override var mainUrl = "https://v2.zplayer.live"
    override val requiresReferer = false

    override suspend fun getUrl(url: String, referer: String?): List<ExtractorLink> {
        val doc = app.get(url).document
        val sources = mutableListOf<ExtractorLink>()
        doc.select("script").map { script ->
            if (script.data().contains("eval(function(p,a,c,k,e,d)")) {
                val testdata = getAndUnpack(script.data())
                val m3u8regex = Regex("((https:|http:)\\/\\/.*\\.m3u8)")
                m3u8regex.findAll(testdata).map {
                    it.value
                }.toList().apmap { urlm3u8 ->
                    if (urlm3u8.contains("m3u8")) {
                        val testurl = app.get(urlm3u8, headers = mapOf("Referer" to url)).text
                        if (testurl.contains("EXTM3U")) {
                            M3u8Helper.generateM3u8(
                                name,
                                urlm3u8,
                                url,
                                headers = mapOf("Referer" to url)
                            ).forEach { link ->
                                sources.add(link)
                            }
                        }
                    }
                }
            }
        }
        return sources
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/helper/AsianEmbedHelper.kt
================================================
package com.lagradost.cloudstream3.extractors.helper

import android.util.Log
import com.lagradost.cloudstream3.apmap
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class AsianEmbedHelper {
    companion object {
        suspend fun getUrls(url: String, callback: (ExtractorLink) -> Unit) {
            // Fetch links
            val doc = app.get(url).document
            val links = doc.select("div#list-server-more > ul > li.linkserver")
            if (!links.isNullOrEmpty()) {
                links.apmap {
                    val datavid = it.attr("data-video") ?: ""
                    //Log.i("AsianEmbed", "Result => (datavid) ${datavid}")
                    if (datavid.isNotBlank()) {
                        val res = loadExtractor(datavid, url, callback)
                        Log.i("AsianEmbed", "Result => ($res) (datavid) $datavid")
                    }
                }
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/helper/VstreamhubHelper.kt
================================================
package com.lagradost.cloudstream3.extractors.helper

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.loadExtractor

class VstreamhubHelper {
    companion object {
        private val baseUrl: String = "https://vstreamhub.com"
        private val baseName: String = "Vstreamhub"

        suspend fun getUrls(url: String, callback: (ExtractorLink) -> Unit) {
            if (url.startsWith(baseUrl)) {
                // Fetch links
                val doc = app.get(url).document.select("script")
                doc?.forEach {
                    val innerText = it?.toString()
                    if (!innerText.isNullOrEmpty()) {
                        if (innerText.contains("file:")) {
                            val startString = "file: "
                            val aa = innerText.substring(innerText.indexOf(startString))
                            val linkUrl = aa.substring(startString.length + 1, aa.indexOf("\",")).trim()
                            //Log.i(baseName, "Result => (linkUrl) ${linkUrl}")
                            val exlink = ExtractorLink(
                                name = "$baseName m3u8",
                                source = baseName,
                                url = linkUrl,
                                quality = Qualities.Unknown.value,
                                referer = url,
                                isM3u8 = true
                            )
                            callback.invoke(exlink)
                        }
                        if (innerText.contains("playerInstance")) {
                            val aa = innerText.substring(innerText.indexOf("playerInstance.addButton"))
                            val startString = "window.open(["
                            val bb = aa.substring(aa.indexOf(startString))
                            val datavid = bb.substring(startString.length, bb.indexOf("]")).removeSurrounding("\"")
                            if (datavid.isNotBlank()) {
                                loadExtractor(datavid, url, callback)
                                //Log.i(baseName, "Result => (datavid) ${datavid}")
                            }
                        }
                    }
                }
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/extractors/helper/WcoHelper.kt
================================================
package com.lagradost.cloudstream3.extractors.helper

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.app

class WcoHelper {
    companion object {
        private const val BACKUP_KEY_DATA = "github_keys_backup"

        data class ExternalKeys(
            @JsonProperty("wco_key")
            val wcoKey: String? = null,
        )

        private var keys: ExternalKeys? = null
        private val wcoKey: String? get() = keys?.wcoKey

        private suspend fun getKeys() {
            keys = keys
                ?: app.get("https://raw.githubusercontent.com/LagradOst/CloudStream-3/master/docs/keys.json")
                    .parsedSafe<ExternalKeys>()?.also { setKey(BACKUP_KEY_DATA, it) } ?: getKey(
                    BACKUP_KEY_DATA
                )
        }

        suspend fun getWcoKey(): String? {
            getKeys()
            return wcoKey
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/metaproviders/AnilistRedirector.kt
================================================
package com.lagradost.cloudstream3.metaproviders

import com.lagradost.cloudstream3.ErrorLoadingException
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.SyncApis
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.aniListApi
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.malApi
import com.lagradost.cloudstream3.utils.SyncUtil

object SyncRedirector {
    val syncApis = SyncApis

    suspend fun redirect(url: String, preferredUrl: String): String {
        for (api in syncApis) {
            if (url.contains(api.mainUrl)) {
                val otherApi = when (api.name) {
                    aniListApi.name -> "anilist"
                    malApi.name -> "myanimelist"
                    else -> return url
                }

                return SyncUtil.getUrlsFromId(api.getIdFromUrl(url), otherApi).firstOrNull { realUrl ->
                    realUrl.contains(preferredUrl)
                } ?: run {
                    throw ErrorLoadingException("Page does not exist on $preferredUrl")
                }
            }
        }
        return url
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/metaproviders/CrossTmdbProvider.kt
================================================
package com.lagradost.cloudstream3.metaproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.apis
import com.lagradost.cloudstream3.APIHolder.getApiFromNameNull
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.ExtractorLink

class CrossTmdbProvider : TmdbProvider() {
    override var name = "MultiMovie"
    override val apiName = "MultiMovie"
    override val lang = "en"
    override val useMetaLoadResponse = true
    override val usesWebView = true
    override val supportedTypes = setOf(TvType.Movie)

    private fun filterName(name: String): String {
        return Regex("""[^a-zA-Z0-9-]""").replace(name, "")
    }

    private val validApis by lazy {
        apis.filter { it.lang == this.lang && it::class.java != this::class.java }
            //.distinctBy { it.uniqueId }
    }

    data class CrossMetaData(
        @JsonProperty("isSuccess") val isSuccess: Boolean,
        @JsonProperty("movies") val movies: List<Pair<String, String>>? = null,
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        tryParseJson<CrossMetaData>(data)?.let { metaData ->
            if (!metaData.isSuccess) return false
            metaData.movies?.apmap { (apiName, data) ->
                getApiFromNameNull(apiName)?.let {
                    try {
                        it.loadLinks(data, isCasting, subtitleCallback, callback)
                    } catch (e: Exception) {
                        logError(e)
                    }
                }
            }

            return true
        }
        return false
    }

    override suspend fun search(query: String): List<SearchResponse>? {
        return super.search(query)?.filterIsInstance<MovieSearchResponse>() // TODO REMOVE
    }

    override suspend fun load(url: String): LoadResponse? {
        val base = super.load(url)?.apply {
            this.recommendations = this.recommendations?.filterIsInstance<MovieSearchResponse>() // TODO REMOVE
            val matchName = filterName(this.name)
            when (this) {
                is MovieLoadResponse -> {
                    val data = validApis.apmap { api ->
                        try {
                            if (api.supportedTypes.contains(TvType.Movie)) { //|| api.supportedTypes.contains(TvType.AnimeMovie)
                                return@apmap api.search(this.name)?.first {
                                    if (filterName(it.name).equals(
                                            matchName,
                                            ignoreCase = true
                                        )
                                    ) {
                                        if (it is MovieSearchResponse)
                                            if (it.year != null && this.year != null && it.year != this.year) // if year exist then do a check
                                                return@first false

                                        return@first true
                                    }
                                    false
                                }?.let { search ->
                                    val response = api.load(search.url)
                                    if (response is MovieLoadResponse) {
                                        response
                                    } else {
                                        null
                                    }
                                }
                            }
                            null
                        } catch (e: Exception) {
                            logError(e)
                            null
                        }
                    }.filterNotNull()
                    this.dataUrl =
                        CrossMetaData(true, data.map { it.apiName to it.dataUrl }).toJson()
                }
                else -> {
                    throw ErrorLoadingException("Nothing besides movies are implemented for this provider")
                }
            }
        }

        return base
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/metaproviders/MultiAnimeProvider.kt
================================================
package com.lagradost.cloudstream3.metaproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addAniListId
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.syncproviders.OAuth2API
import com.lagradost.cloudstream3.syncproviders.SyncAPI
import com.lagradost.cloudstream3.syncproviders.providers.AniListApi
import com.lagradost.cloudstream3.syncproviders.providers.MALApi
import com.lagradost.cloudstream3.utils.SyncUtil

// wont be implemented
class MultiAnimeProvider : MainAPI() {
    override var name = "MultiAnime"
    override val lang = "en"
    override val usesWebView = true
    override val supportedTypes = setOf(TvType.Anime)
    private val syncApi: SyncAPI = OAuth2API.aniListApi

    private val syncUtilType by lazy {
        when (syncApi) {
            is AniListApi -> "anilist"
            is MALApi -> "myanimelist"
            else -> throw ErrorLoadingException("Invalid Api")
        }
    }

    private val validApis by lazy {
        APIHolder.apis.filter {
            it.lang == this.lang && it::class.java != this::class.java && it.supportedTypes.contains(
                TvType.Anime
            )
        }
    }

    private fun filterName(name: String): String {
        return Regex("""[^a-zA-Z0-9-]""").replace(name, "")
    }

    override suspend fun search(query: String): List<SearchResponse>? {
        return syncApi.search(query)?.map {
            AnimeSearchResponse(it.name, it.url, this.name, TvType.Anime, it.posterUrl)
        }
    }

    override suspend fun load(url: String): LoadResponse? {
        return syncApi.getResult(url)?.let { res ->
            val data = SyncUtil.getUrlsFromId(res.id, syncUtilType).apmap { url ->
                validApis.firstOrNull { api -> url.startsWith(api.mainUrl) }?.load(url)
            }.filterNotNull()

            val type =
                if (data.any { it.type == TvType.AnimeMovie }) TvType.AnimeMovie else TvType.Anime

            newAnimeLoadResponse(
                res.title ?: throw ErrorLoadingException("No Title found"),
                url,
                type
            ) {
                posterUrl = res.posterUrl
                plot = res.synopsis
                tags = res.genres
                rating = res.publicScore
                addTrailer(res.trailerUrl)
                addAniListId(res.id.toIntOrNull())
                recommendations = res.recommendations
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/metaproviders/TmdbProvider.kt
================================================
package com.lagradost.cloudstream3.metaproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addActors
import com.lagradost.cloudstream3.LoadResponse.Companion.addImdbId
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.uwetrottmann.tmdb2.Tmdb
import com.uwetrottmann.tmdb2.entities.*
import com.uwetrottmann.tmdb2.enumerations.AppendToResponseItem
import retrofit2.awaitResponse
import java.util.*

/**
 * episode and season starting from 1
 * they are null if movie
 * */
data class TmdbLink(
    @JsonProperty("imdbID") val imdbID: String?,
    @JsonProperty("tmdbID") val tmdbID: Int?,
    @JsonProperty("episode") val episode: Int?,
    @JsonProperty("season") val season: Int?,
    @JsonProperty("movieName") val movieName: String? = null,
)

open class TmdbProvider : MainAPI() {

    // Use the LoadResponse from the metadata provider
    open val useMetaLoadResponse = false
    open val apiName = "TMDB"

    // As some sites doesn't support s0
    open val disableSeasonZero = true

    override val hasMainPage = true
    override val providerType = ProviderType.MetaProvider

    // Fuck it, public private api key because github actions won't co-operate.
    // Please no stealy.
    private val tmdb = Tmdb("e6333b32409e02a4a6eba6fb7ff866bb")

    private fun getImageUrl(link: String?): String? {
        if (link == null) return null
        return if (link.startsWith("/")) "https://image.tmdb.org/t/p/w500/$link" else link
    }

    private fun getUrl(id: Int?, tvShow: Boolean): String {
        return if (tvShow) "https://www.themoviedb.org/tv/${id ?: -1}"
        else "https://www.themoviedb.org/movie/${id ?: -1}"
    }

    private fun BaseTvShow.toSearchResponse(): TvSeriesSearchResponse {
        return TvSeriesSearchResponse(
            this.name ?: this.original_name,
            getUrl(id, true),
            apiName,
            TvType.TvSeries,
            getImageUrl(this.poster_path),
            this.first_air_date?.let {
                Calendar.getInstance().apply {
                    time = it
                }.get(Calendar.YEAR)
            },
            null,
            this.id
        )
    }

    private fun BaseMovie.toSearchResponse(): MovieSearchResponse {
        return MovieSearchResponse(
            this.title ?: this.original_title,
            getUrl(id, false),
            apiName,
            TvType.TvSeries,
            getImageUrl(this.poster_path),
            this.release_date?.let {
                Calendar.getInstance().apply {
                    time = it
                }.get(Calendar.YEAR)
            },
            this.id,
        )
    }

    private fun List<CastMember?>?.toActors(): List<Pair<Actor, String?>>? {
        return this?.mapNotNull {
            Pair(
                Actor(it?.name ?: return@mapNotNull null, getImageUrl(it.profile_path)),
                it.character
            )
        }
    }

    private fun TvShow.toLoadResponse(): TvSeriesLoadResponse {
        val episodes = this.seasons?.filter { !disableSeasonZero || (it.season_number ?: 0) != 0 }
            ?.mapNotNull { season ->
                season.episodes?.map { episode ->
                    Episode(
                        TmdbLink(
                            episode.external_ids?.imdb_id ?: this.external_ids?.imdb_id,
                            this.id,
                            episode.episode_number,
                            episode.season_number,
                        ).toJson(),
                        episode.name,
                        episode.season_number,
                        episode.episode_number,
                        getImageUrl(episode.still_path),
                        episode.rating,
                        episode.overview,
                        episode.air_date?.time,
                    )
                } ?: (1..(season.episode_count ?: 1)).map { episodeNum ->
                    Episode(
                        episode = episodeNum,
                        data = TmdbLink(
                            this.external_ids?.imdb_id,
                            this.id,
                            episodeNum,
                            season.season_number,
                        ).toJson(),
                        season = season.season_number
                    )
                }
            }?.flatten() ?: listOf()

        return newTvSeriesLoadResponse(
            this.name ?: this.original_name,
            getUrl(id, true),
            TvType.TvSeries,
            episodes
        ) {
            posterUrl = getImageUrl(poster_path)
            year = first_air_date?.let {
                Calendar.getInstance().apply {
                    time = it
                }.get(Calendar.YEAR)
            }
            plot = overview
            addImdbId(external_ids?.imdb_id)

            tags = genres?.mapNotNull { it.name }
            duration = episode_run_time?.average()?.toInt()
            rating = this@toLoadResponse.rating

            recommendations = (this@toLoadResponse.recommendations
                ?: this@toLoadResponse.similar)?.results?.map { it.toSearchResponse() }
            addActors(credits?.cast?.toList().toActors())
        }
    }

    private fun Movie.toLoadResponse(): MovieLoadResponse {
        return newMovieLoadResponse(
            this.title ?: this.original_title, getUrl(id, false), TvType.Movie, TmdbLink(
                this.imdb_id,
                this.id,
                null,
                null,
                this.title ?: this.original_title,
            ).toJson()
        ) {
            posterUrl = getImageUrl(poster_path)
            year = release_date?.let {
                Calendar.getInstance().apply {
                    time = it
                }.get(Calendar.YEAR)
            }
            plot = overview
            addImdbId(external_ids?.imdb_id)
            tags = genres?.mapNotNull { it.name }
            duration = runtime
            rating = this@toLoadResponse.rating

            recommendations = (this@toLoadResponse.recommendations
                ?: this@toLoadResponse.similar)?.results?.map { it.toSearchResponse() }
            addActors(credits?.cast?.toList().toActors())
        }
    }

    override suspend fun getMainPage(): HomePageResponse {

        // SAME AS DISCOVER IT SEEMS
//        val popularSeries = tmdb.tvService().popular(1, "en-US").execute().body()?.results?.map {
//            it.toSearchResponse()
//        } ?: listOf()
//
//        val popularMovies =
//            tmdb.moviesService().popular(1, "en-US", "840").execute().body()?.results?.map {
//                it.toSearchResponse()
//            } ?: listOf()

        var discoverMovies: List<MovieSearchResponse> = listOf()
        var discoverSeries: List<TvSeriesSearchResponse> = listOf()
        var topMovies: List<MovieSearchResponse> = listOf()
        var topSeries: List<TvSeriesSearchResponse> = listOf()
        argamap(
            {
                discoverMovies = tmdb.discoverMovie().build().awaitResponse().body()?.results?.map {
                    it.toSearchResponse()
                } ?: listOf()
            }, {
                discoverSeries = tmdb.discoverTv().build().awaitResponse().body()?.results?.map {
                    it.toSearchResponse()
                } ?: listOf()
            }, {
                // https://en.wikipedia.org/wiki/ISO_3166-1
                topMovies =
                    tmdb.moviesService().topRated(1, "en-US", "US").awaitResponse()
                        .body()?.results?.map {
                            it.toSearchResponse()
                        } ?: listOf()
            }, {
                topSeries =
                    tmdb.tvService().topRated(1, "en-US").awaitResponse().body()?.results?.map {
                        it.toSearchResponse()
                    } ?: listOf()
            }
        )

        return HomePageResponse(
            listOf(
//                HomePageList("Popular Series", popularSeries),
//                HomePageList("Popular Movies", popularMovies),
                HomePageList("Popular Movies", discoverMovies),
                HomePageList("Popular Series", discoverSeries),
                HomePageList("Top Movies", topMovies),
                HomePageList("Top Series", topSeries),
            )
        )
    }

    open fun loadFromImdb(imdb: String, seasons: List<TvSeason>): LoadResponse? {
        return null
    }

    open fun loadFromTmdb(tmdb: Int, seasons: List<TvSeason>): LoadResponse? {
        return null
    }

    open fun loadFromImdb(imdb: String): LoadResponse? {
        return null
    }

    open fun loadFromTmdb(tmdb: Int): LoadResponse? {
        return null
    }

    // Possible to add recommendations and such here.
    override suspend fun load(url: String): LoadResponse? {
        // https://www.themoviedb.org/movie/7445-brothers
        // https://www.themoviedb.org/tv/71914-the-wheel-of-time

        val idRegex = Regex("""themoviedb\.org/(.*)/(\d+)""")
        val found = idRegex.find(url)

        val isTvSeries = found?.groupValues?.getOrNull(1).equals("tv", ignoreCase = true)
        val id = found?.groupValues?.getOrNull(2)?.toIntOrNull()
            ?: throw ErrorLoadingException("No id found")

        return if (useMetaLoadResponse) {
            return if (isTvSeries) {
                val body = tmdb.tvService().tv(id, "en-US", AppendToResponse(AppendToResponseItem.EXTERNAL_IDS)).awaitResponse().body()
                val response = body?.toLoadResponse()
                if (response != null) {
                    if (response.recommendations.isNullOrEmpty())
                        tmdb.tvService().recommendations(id, 1, "en-US").awaitResponse().body()
                            ?.let {
                                it.results?.map { res -> res.toSearchResponse() }
                            }?.let { list ->
                                response.recommendations = list
                            }

                    if (response.actors.isNullOrEmpty())
                        tmdb.tvService().credits(id, "en-US").awaitResponse().body()?.let {
                            response.addActors(it.cast?.toActors())
                        }
                }

                response
            } else {
                val body = tmdb.moviesService().summary(id, "en-US", AppendToResponse(AppendToResponseItem.EXTERNAL_IDS)).awaitResponse().body()
                val response = body?.toLoadResponse()
                if (response != null) {
                    if (response.recommendations.isNullOrEmpty())
                        tmdb.moviesService().recommendations(id, 1, "en-US").awaitResponse().body()
                            ?.let {
                                it.results?.map { res -> res.toSearchResponse() }
                            }?.let { list ->
                                response.recommendations = list
                            }

                    if (response.actors.isNullOrEmpty())
                        tmdb.moviesService().credits(id).awaitResponse().body()?.let {
                            response.addActors(it.cast?.toActors())
                        }
                }
                response
            }
        } else {
            loadFromTmdb(id)?.let { return it }
            if (isTvSeries) {
                tmdb.tvService().externalIds(id, "en-US").awaitResponse().body()?.imdb_id?.let {
                    val fromImdb = loadFromImdb(it)
                    val result = if (fromImdb == null) {
                        val details = tmdb.tvService().tv(id, "en-US").awaitResponse().body()
                        loadFromImdb(it, details?.seasons ?: listOf())
                            ?: loadFromTmdb(id, details?.seasons ?: listOf())
                    } else {
                        fromImdb
                    }

                    result
                }
            } else {
                tmdb.moviesService().externalIds(id, "en-US").awaitResponse()
                    .body()?.imdb_id?.let { loadFromImdb(it) }
            }
        }
    }

    override suspend fun search(query: String): List<SearchResponse>? {
        return tmdb.searchService().multi(query, 1, "en-Us", "US", true).awaitResponse()
            .body()?.results?.mapNotNull {
                it.movie?.toSearchResponse() ?: it.tvShow?.toSearchResponse()
            }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/AkwamProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addActors
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import org.jsoup.nodes.Element

class AkwamProvider : MainAPI() {
    override val lang = "ar"
    override var mainUrl = "https://akwam.to"
    override var name = "Akwam"
    override val usesWebView = false
    override val hasMainPage = true
    override val supportedTypes = setOf(TvType.TvSeries, TvType.Movie, TvType.Anime, TvType.Cartoon)

    private fun Element.toSearchResponse(): SearchResponse? {
        val url = select("a.box")?.attr("href") ?: return null
        if (url.contains("/games/") || url.contains("/programs/")) return null
        val poster = select("picture > img")
        val title = poster.attr("alt")
        val posterUrl = poster.attr("data-src")
        val year = select(".badge-secondary")?.text()?.toIntOrNull()

        // If you need to differentiate use the url.
        return MovieSearchResponse(
            title,
            url,
            this@AkwamProvider.name,
            TvType.TvSeries,
            posterUrl,
            year,
            null,
        )
    }

    override suspend fun getMainPage(): HomePageResponse {
        // Title, Url
        val moviesUrl = listOf(
            "Movies" to "$mainUrl/movies",
            "Series" to "$mainUrl/series",
            "Shows" to "$mainUrl/shows"
        )
        val pages = moviesUrl.apmap {
            val doc = app.get(it.second).document
            val list = doc.select("div.col-lg-auto.col-md-4.col-6.mb-12").mapNotNull { element ->
                element.toSearchResponse()
            }
            HomePageList(it.first, list)
        }.sortedBy { it.name }
        return HomePageResponse(pages)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/search?q=$query"
        val doc = app.get(url).document
        return doc.select("div.col-lg-auto").mapNotNull {
            it.toSearchResponse()
        }
    }

    private fun String.getIntFromText(): Int? {
        return Regex("""\d+""").find(this)?.groupValues?.firstOrNull()?.toIntOrNull()
    }

    private fun Element.toEpisode(): Episode {
        val a = select("a.text-white")
        val url = a.attr("href")
        val title = a.text()
        val thumbUrl = select("picture > img").attr("src")
        val date = select("p.entry-date").text()
        return newEpisode(url) {
            name = title
            episode = title.getIntFromText()
            posterUrl = thumbUrl
            addDate(date)
        }
    }


    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val isMovie = url.contains("/movie/")
        val title = doc.select("h1.entry-title").text()
        val posterUrl = doc.select("picture > img").attr("src")

        val year =
            doc.select("div.font-size-16.text-white.mt-2").firstOrNull {
                it.text().contains("Ø§Ù„Ø³Ù†Ø©")
            }?.text()?.getIntFromText()

        // A bit iffy to parse twice like this, but it'll do.
        val duration =
            doc.select("div.font-size-16.text-white.mt-2").firstOrNull {
                it.text().contains("Ù…Ø¯Ø© Ø§Ù„ÙÙŠÙ„Ù…")
            }?.text()?.getIntFromText()

        val synopsis = doc.select("div.widget-body p:first-child").text()

        val rating = doc.select("span.mx-2").text().split("/").lastOrNull()?.toRatingInt()

        val tags = doc.select("div.font-size-16.d-flex.align-items-center.mt-3 > a").map {
            it.text()
        }

        val actors = doc.select("div.widget-body > div > div.entry-box > a")?.mapNotNull {
            val name = it?.selectFirst("div > .entry-title")?.text() ?: return@mapNotNull null
            val image = it.selectFirst("div > img")?.attr("src") ?: return@mapNotNull null
            Actor(name, image)
        }

        val recommendations =
            doc.select("div > div.widget-body > div.row > div > div.entry-box")?.mapNotNull {
                val recTitle = it?.selectFirst("div.entry-body > .entry-title > .text-white")
                    ?: return@mapNotNull null
                val href = recTitle.attr("href") ?: return@mapNotNull null
                val name = recTitle.text() ?: return@mapNotNull null
                val poster = it.selectFirst(".entry-image > a > picture > img")?.attr("data-src")
                    ?: return@mapNotNull null
                MovieSearchResponse(name, href, this.name, TvType.Movie, fixUrl(poster))
            }

        return if (isMovie) {
            newMovieLoadResponse(
                title,
                url,
                TvType.Movie,
                url
            ) {
                this.posterUrl = posterUrl
                this.year = year
                this.plot = synopsis
                this.rating = rating
                this.tags = tags
                this.duration = duration
                this.recommendations = recommendations
                addActors(actors)
            }
        } else {
            val episodes = doc.select("div.bg-primary2.p-4.col-lg-4.col-md-6.col-12").map {
                it.toEpisode()
            }.let {
                val isReversed = it.lastOrNull()?.episode ?: 1 < it.firstOrNull()?.episode ?: 0
                if (isReversed)
                    it.reversed()
                else it
            }

            newTvSeriesLoadResponse(title, url, TvType.TvSeries, episodes) {
                this.duration = duration
                this.posterUrl = posterUrl
                this.tags = tags.filterNotNull()
                this.rating = rating
                this.year = year
                this.plot = synopsis
                this.recommendations = recommendations
                addActors(actors)
            }
        }
    }


//    // Maybe possible to not use the url shortener but cba investigating that.
//    private suspend fun skipUrlShortener(url: String): AppResponse {
//        return app.get(app.get(url).document.select("a.download-link").attr("href"))
//    }

    private fun getQualityFromId(id: Int?): Qualities {
        return when (id) {
            2 -> Qualities.P360 // Extrapolated
            3 -> Qualities.P480
            4 -> Qualities.P720
            5 -> Qualities.P1080
            else -> Qualities.Unknown
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val doc = app.get(data).document

        val links = doc.select("div.tab-content.quality").map {
            val quality = getQualityFromId(it.attr("id").getIntFromText())
            it.select(".col-lg-6 > a:contains(ØªØ­Ù…ÙŠÙ„)").map { linkElement ->
                if(linkElement.attr("href").contains("/download/")) { linkElement.attr("href") to quality } else {
                    "$mainUrl/download${linkElement.attr("href").split("/link")[1]}${data.split("/movie|/episode|/show/episode".toRegex())[1]}" to quality // just in case if they add the shorts urls again
                }
            }
        }.flatten()

        links.map {
            val linkDoc = app.get(it.first).document
            val button = linkDoc.select("div.btn-loader > a")
            val url = button.attr("href")

            callback.invoke(
                ExtractorLink(
                    this.name,
                    this.name + " - ${it.second.name.replace("P", "")}p",
                    url,
                    this.mainUrl,
                    it.second.value
                )
            )
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/AllMoviesForYouProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addDuration
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup

class AllMoviesForYouProvider : MainAPI() {
    companion object {
        fun getType(t: String): TvType {
            return when {
                t.contains("series") -> TvType.TvSeries
                t.contains("movies") -> TvType.Movie
                else -> TvType.Movie
            }
        }
    }

    // Fetching movies will not work if this link is outdated.
    override var mainUrl = "https://allmoviesforyou.net"
    override var name = "AllMoviesForYou"
    override val hasMainPage = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries
    )

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val soup = app.get(mainUrl).document
        val urls = listOf(
            Pair("Movies", "section[data-id=movies] article.TPost.B"),
            Pair("TV Series", "section[data-id=series] article.TPost.B"),
        )
        for ((name, element) in urls) {
            try {
                val home = soup.select(element).map {
                    val title = it.selectFirst("h2.title")!!.text()
                    val link = it.selectFirst("a")!!.attr("href")
                    TvSeriesSearchResponse(
                        title,
                        link,
                        this.name,
                        TvType.Movie,
                        fixUrl(it.selectFirst("figure img")!!.attr("data-src")),
                        null,
                        null,
                    )
                }

                items.add(HomePageList(name, home))
            } catch (e: Exception) {
                logError(e)
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=$query"
        val document = app.get(url).document

        val items = document.select("ul.MovieList > li > article > a")
        return items.map { item ->
            val href = item.attr("href")
            val title = item.selectFirst("> h2.Title")!!.text()
            val img = fixUrl(item.selectFirst("> div.Image > figure > img")!!.attr("data-src"))
            val type = getType(href)
            if (type == TvType.Movie) {
                MovieSearchResponse(title, href, this.name, type, img, null)
            } else {
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    type,
                    img,
                    null,
                    null
                )
            }
        }
    }

//    private fun getLink(document: Document): List<String>? {
//         val list = ArrayList<String>()
//         Regex("iframe src=\"(.*?)\"").find(document.html())?.groupValues?.get(1)?.let {
//             list.add(it)
//         }
//         document.select("div.OptionBx")?.forEach { element ->
//             val baseElement = element.selectFirst("> a.Button")
//             val elementText = element.selectFirst("> p.AAIco-dns")?.text()
//             if (elementText == "Streamhub" || elementText == "Dood") {
//                 baseElement?.attr("href")?.let { href ->
//                     list.add(href)
//                 }
//             }
//         }
//
//         return if (list.isEmpty()) null else list
//     }

    override suspend fun load(url: String): LoadResponse {
        val type = getType(url)

        val document = app.get(url).document

        val title = document.selectFirst("h1.Title")!!.text()
        val descipt = document.selectFirst("div.Description > p")!!.text()
        val rating =
            document.selectFirst("div.Vote > div.post-ratings > span")?.text()?.toRatingInt()
        val year = document.selectFirst("span.Date")?.text()
        val duration = document.selectFirst("span.Time")!!.text()
        val backgroundPoster =
            fixUrlNull(document.selectFirst("div.Image > figure > img")?.attr("data-src"))

        if (type == TvType.TvSeries) {
            val list = ArrayList<Pair<Int, String>>()

            document.select("main > section.SeasonBx > div > div.Title > a").forEach { element ->
                val season = element.selectFirst("> span")?.text()?.toIntOrNull()
                val href = element.attr("href")
                if (season != null && season > 0 && !href.isNullOrBlank()) {
                    list.add(Pair(season, fixUrl(href)))
                }
            }
            if (list.isEmpty()) throw ErrorLoadingException("No Seasons Found")

            val episodeList = ArrayList<Episode>()

            for (season in list) {
                val seasonResponse = app.get(season.second).text
                val seasonDocument = Jsoup.parse(seasonResponse)
                val episodes = seasonDocument.select("table > tbody > tr")
                if (episodes.isNotEmpty()) {
                    episodes.forEach { episode ->
                        val epNum = episode.selectFirst("> td > span.Num")?.text()?.toIntOrNull()
                        val poster = episode.selectFirst("> td.MvTbImg > a > img")?.attr("data-src")
                        val aName = episode.selectFirst("> td.MvTbTtl > a")
                        val name = aName!!.text()
                        val href = aName.attr("href")
                        val date = episode.selectFirst("> td.MvTbTtl > span")?.text()

                        episodeList.add(
                            newEpisode(href) {
                                this.name = name
                                this.season = season.first
                                this.episode = epNum
                                this.posterUrl = fixUrlNull(poster)
                                addDate(date)
                            }
                        )
                    }
                }
            }
            return TvSeriesLoadResponse(
                title,
                url,
                this.name,
                type,
                episodeList,
                backgroundPoster,
                year?.toIntOrNull(),
                descipt,
                null,
                rating
            )
        } else {
            return newMovieLoadResponse(
                title,
                url,
                type,
                fixUrl(url)
            ) {
                posterUrl = backgroundPoster
                this.year = year?.toIntOrNull()
                this.plot = descipt
                this.rating = rating
                addDuration(duration)
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val doc = app.get(data).document
        val iframe = doc.select("body iframe").map { fixUrl(it.attr("src")) }
        iframe.apmap { id ->
            if (id.contains("trembed")) {
                val soup = app.get(id).document
                soup.select("body iframe").map {
                    val link = fixUrl(it.attr("src").replace("streamhub.to/d/", "streamhub.to/e/"))
                    loadExtractor(link, data, callback)
                }
            } else loadExtractor(id, data, callback)
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/ApiMDBProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.extractors.Vidstream
import com.lagradost.cloudstream3.metaproviders.TmdbLink
import com.lagradost.cloudstream3.metaproviders.TmdbProvider
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class ApiMDBProvider : TmdbProvider() {
    override val apiName = "ApiMDB"
    override var name = "ApiMDB"
    override var mainUrl = "https://v2.apimdb.net"
    override val useMetaLoadResponse = true
    override val instantLinkLoading = false
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val mappedData = parseJson<TmdbLink>(data)
        val (id, site) = if (mappedData.imdbID != null) listOf(
            mappedData.imdbID,
            "imdb"
        ) else listOf(mappedData.tmdbID.toString(), "tmdb")
        val isMovie = mappedData.episode == null && mappedData.season == null
        val embedUrl = if (isMovie) {
            if(site == "imdb") "$mainUrl/e/movie/$id" else
                "$mainUrl/e/tmdb/movie/$id"
        } else {
            val suffix = "$id/${mappedData.season ?: 1}/${mappedData.episode ?: 1}"
            if (site == "imdb") "$mainUrl/e/tv/$suffix" else
                "$mainUrl/e/tmdb/tv/$suffix"
        }
        val document = app.get(embedUrl, referer = mainUrl).document
        val servers = document.select(".servers-list div.server").map { it.attr("data-src") }
        servers.apmap { serverID ->
            val serverdoc = app.get("$mainUrl$serverID", referer = embedUrl).document
            serverdoc.select("html body iframe").map {
                val link = it.attr("src")
                    .replace("https://vidembed.cc/load.php","https://vidembed.io/streaming.php")
                    .replace(Regex("(https://cloudemb\\.com/play/.*\\?auto=1&referer=)"),"")
                if (link.contains("vidembed", ignoreCase = true)) {
                    val vidstreamid = link.substringAfter("https://vidembed.io/streaming.php?id=")
                    val vidstreamObject = Vidstream("https://vidembed.io")
                    vidstreamObject.getUrl(vidstreamid, isCasting, callback)
                } else
                    loadExtractor(link, embedUrl, callback)
            }
        }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/AsiaFlixProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.core.JsonParser
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.animeproviders.GogoanimeProvider.Companion.getStatus
import com.lagradost.cloudstream3.utils.DataStore.toKotlinObject
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import java.net.URI

class AsiaFlixProvider : MainAPI() {
    override var mainUrl = "https://asiaflix.app"
    override var name = "AsiaFlix"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val hasChromecastSupport = false
    override val supportedTypes = setOf(TvType.AsianDrama)

    private val apiUrl = "https://api.asiaflix.app/api/v2"

    data class DashBoardObject(
        @JsonProperty("sectionName") val sectionName: String,
        @JsonProperty("type") val type: String?,
        @JsonProperty("data") val data: List<Data>?
    )

    data class Episodes(
        @JsonProperty("_id") val _id: String,
        @JsonProperty("epUrl") val epUrl: String?,
        @JsonProperty("number") val number: Int?,
        @JsonProperty("type") val type: String?,
        @JsonProperty("extracted") val extracted: String?,
        @JsonProperty("videoUrl") val videoUrl: String?
    )


    data class Data(
        @JsonProperty("_id") val _id: String,
        @JsonProperty("name") val name: String,
        @JsonProperty("altNames") val altNames: String?,
        @JsonProperty("image") val image: String?,
        @JsonProperty("tvStatus") val tvStatus: String?,
        @JsonProperty("genre") val genre: String?,
        @JsonProperty("releaseYear") val releaseYear: Int?,
        @JsonProperty("createdAt") val createdAt: Long?,
        @JsonProperty("episodes") val episodes: List<Episodes>?,
        @JsonProperty("views") val views: Int?
    )


    data class DramaPage(
        @JsonProperty("_id") val _id: String,
        @JsonProperty("name") val name: String,
        @JsonProperty("altNames") val altNames: String?,
        @JsonProperty("synopsis") val synopsis: String?,
        @JsonProperty("image") val image: String?,
        @JsonProperty("language") val language: String?,
        @JsonProperty("dramaUrl") val dramaUrl: String?,
        @JsonProperty("published") val published: Boolean?,
        @JsonProperty("tvStatus") val tvStatus: String?,
        @JsonProperty("firstAirDate") val firstAirDate: String?,
        @JsonProperty("genre") val genre: String?,
        @JsonProperty("releaseYear") val releaseYear: Int?,
        @JsonProperty("createdAt") val createdAt: Long?,
        @JsonProperty("modifiedAt") val modifiedAt: Long?,
        @JsonProperty("episodes") val episodes: List<Episodes>,
        @JsonProperty("__v") val __v: Int?,
        @JsonProperty("cdnImage") val cdnImage: String?,
        @JsonProperty("views") val views: Int?
    )

    private fun Data.toSearchResponse(): TvSeriesSearchResponse {
        return TvSeriesSearchResponse(
            name,
            _id,
            this@AsiaFlixProvider.name,
            TvType.AsianDrama,
            image,
            releaseYear,
            episodes?.size,
        )
    }

    private fun Episodes.toEpisode(): Episode? {
        if (videoUrl != null && videoUrl.contains("watch/null") || number == null) return null
        return videoUrl?.let {
            Episode(
                it,
                null,
                number,
            )
        }
    }

    private fun DramaPage.toLoadResponse(): TvSeriesLoadResponse {
        return TvSeriesLoadResponse(
            name,
            "$mainUrl$dramaUrl/$_id".replace("drama-detail", "show-details"),
            this@AsiaFlixProvider.name,
            TvType.AsianDrama,
            episodes.mapNotNull { it.toEpisode() }.sortedBy { it.episode },
            image,
            releaseYear,
            synopsis,
            getStatus(tvStatus ?: ""),
            null,
            genre?.split(",")?.map { it.trim() }
        )
    }

    override suspend fun getMainPage(): HomePageResponse {
        val headers = mapOf("X-Requested-By" to "asiaflix-web")
        val response = app.get("$apiUrl/dashboard", headers = headers).text

        val customMapper =
            mapper.copy().configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true)
        // Hack, because it can either be object or a list
        val cleanedResponse = Regex(""""data":(\{.*?),\{"sectionName"""").replace(response) {
            """"data":null},{"sectionName""""
        }

        val dashBoard = customMapper.readValue<List<DashBoardObject>?>(cleanedResponse)

        val listItems = dashBoard?.mapNotNull {
            it.data?.map { data ->
                data.toSearchResponse()
            }?.let { searchResponse ->
                HomePageList(it.sectionName, searchResponse)
            }
        }
        return HomePageResponse(listItems ?: listOf())
    }

    data class Link(
        @JsonProperty("url") val url: String?,
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        if (isCasting) return false
        val headers = mapOf("X-Requested-By" to "asiaflix-web")
        app.get(
            "$apiUrl/utility/get-stream-links?url=$data",
            headers = headers
        ).text.toKotlinObject<Link>().url?.let {
//            val fixedUrl = "https://api.asiaflix.app/api/v2/utility/cors-proxy/playlist/${URLEncoder.encode(it, StandardCharsets.UTF_8.toString())}"
            callback.invoke(
                ExtractorLink(
                    name,
                    name,
                    it,
                    "https://asianload1.com/",
                    /** <------ This provider should be added instead */
                    getQualityFromName(it),
                    URI(it).path.endsWith(".m3u8")
                )
            )
        }
        return true
    }

    override suspend fun search(query: String): List<SearchResponse>? {
        val headers = mapOf("X-Requested-By" to "asiaflix-web")
        val url = "$apiUrl/drama/search?q=$query"
        val response = app.get(url, headers = headers).text
        return mapper.readValue<List<Data>?>(response)?.map { it.toSearchResponse() }
    }

    override suspend fun load(url: String): LoadResponse {
        val headers = mapOf("X-Requested-By" to "asiaflix-web")
        val requestUrl = "$apiUrl/drama?id=${url.split("/").lastOrNull()}"
        val response = app.get(requestUrl, headers = headers).text
        val dramaPage = response.toKotlinObject<DramaPage>()
        return dramaPage.toLoadResponse()
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/AsianLoadProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.TvType

/** Needs to inherit from MainAPI() to
 * make the app know what functions to call
 */
class AsianLoadProvider : VidstreamProviderTemplate() {
    override var name = "AsianLoad"
    override var mainUrl = "https://asianembed.io"
    override val homePageUrlList = listOf(
        mainUrl,
        "$mainUrl/recently-added-raw",
        "$mainUrl/movies",
        "$mainUrl/kshow",
        "$mainUrl/popular",
        "$mainUrl/ongoing-series"
    )

    override val iv = "9262859232435825"
    override val secretKey = "93422192433952489752342908585752"

    override val supportedTypes = setOf(TvType.AsianDrama)
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/BflixProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup

open class BflixProvider : MainAPI() {
    override var mainUrl = "https://bflix.ru"
    override var name = "Bflix"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    //override val uniqueId: Int by lazy { "BflixProvider".hashCode() }

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val soup = app.get("$mainUrl/home").document
        val testa = listOf(
            Pair("Movies", "div.tab-content[data-name=movies] div.filmlist div.item"),
            Pair("Shows", "div.tab-content[data-name=shows] div.filmlist div.item"),
            Pair("Trending", "div.tab-content[data-name=trending] div.filmlist div.item"),
            Pair("Latest Movies", "div.container section.bl:contains(Latest Movies) div.filmlist div.item"),
            Pair("Latest TV-Series", "div.container section.bl:contains(Latest TV-Series) div.filmlist div.item"),
        )
        for ((name, element) in testa) try {
            val test = soup.select(element).map {
                val title = it.selectFirst("h3 a")!!.text()
                val link = fixUrl(it.selectFirst("a")!!.attr("href"))
                val qualityInfo = it.selectFirst("div.quality")!!.text()
                val quality = getQualityFromString(qualityInfo)
                TvSeriesSearchResponse(
                    title,
                    link,
                    this.name,
                    if (link.contains("/movie/")) TvType.Movie else TvType.TvSeries,
                    it.selectFirst("a.poster img")!!.attr("src"),
                    null,
                    null,
                    quality = quality
                )
            }
            items.add(HomePageList(name, test))
        } catch (e: Exception) {
            e.printStackTrace()
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    //Credits to https://github.com/jmir1
    private val key = "5uLKesbh0nkrpPq9VwMC6+tQBdomjJ4HNl/fWOSiREvAYagT8yIG7zx2D13UZFXc" //key credits to @Modder4869

    private fun getVrf(id: String): String? {
        val reversed = ue(encode(id) + "0000000").slice(0..5).reversed()
        return reversed + ue(je(reversed, encode(id)?.replace("+", "%20") ?: return null)).replace(
            """=+$""".toRegex(),
            ""
        )
    }

    private fun getLink(url: String): String? {
        val i = url.slice(0..5)
        val n = url.slice(6..url.lastIndex)
        return decode(je(i, ze(n)))
    }

    private fun ue(input: String): String {
        if (input.any { it.code >= 256 }) throw Exception("illegal characters!")
        var output = ""
        for (i in input.indices step 3) {
            val a = intArrayOf(-1, -1, -1, -1)
            a[0] = input[i].code shr 2
            a[1] = (3 and input[i].code) shl 4
            if (input.length > i + 1) {
                a[1] = a[1] or (input[i + 1].code shr 4)
                a[2] = (15 and input[i + 1].code) shl 2
            }
            if (input.length > i + 2) {
                a[2] = a[2] or (input[i + 2].code shr 6)
                a[3] = 63 and input[i + 2].code
            }
            for (n in a) {
                if (n == -1) output += "="
                else {
                    if (n in 0..63) output += key[n]
                }
            }
        }
        return output
    }

    private fun je(inputOne: String, inputTwo: String): String {
        val arr = IntArray(256) { it }
        var output = ""
        var u = 0
        var r: Int
        for (a in arr.indices) {
            u = (u + arr[a] + inputOne[a % inputOne.length].code) % 256
            r = arr[a]
            arr[a] = arr[u]
            arr[u] = r
        }
        u = 0
        var c = 0
        for (f in inputTwo.indices) {
            c = (c + f) % 256
            u = (u + arr[c]) % 256
            r = arr[c]
            arr[c] = arr[u]
            arr[u] = r
            output += (inputTwo[f].code xor arr[(arr[c] + arr[u]) % 256]).toChar()
        }
        return output
    }

    private fun ze(input: String): String {
        val t = if (input.replace("""[\t\n\f\r]""".toRegex(), "").length % 4 == 0) {
            input.replace("""/==?$/""".toRegex(), "")
        } else input
        if (t.length % 4 == 1 || t.contains("""[^+/0-9A-Za-z]""".toRegex())) throw Exception("bad input")
        var i: Int
        var r = ""
        var e = 0
        var u = 0
        for (o in t.indices) {
            e = e shl 6
            i = key.indexOf(t[o])
            e = e or i
            u += 6
            if (24 == u) {
                r += ((16711680 and e) shr 16).toChar()
                r += ((65280 and e) shr 8).toChar()
                r += (255 and e).toChar()
                e = 0
                u = 0
            }
        }
        return if (12 == u) {
            e = e shr 4
            r + e.toChar()
        } else {
            if (18 == u) {
                e = e shr 2
                r += ((65280 and e) shr 8).toChar()
                r += (255 and e).toChar()
            }
            r
        }
    }

    private fun encode(input: String): String? = java.net.URLEncoder.encode(input, "utf-8")
    private fun decode(input: String): String? = java.net.URLDecoder.decode(input, "utf-8")

    override suspend fun search(query: String): List<SearchResponse>? {
        val encodedquery = getVrf(query)?.let { encode(it) } ?: return null
        val url = "$mainUrl/search?keyword=$query&vrf=$encodedquery"
        val html = app.get(url).text
        val document = Jsoup.parse(html)

        return document.select(".filmlist div.item").map {
            val title = it.selectFirst("h3 a")!!.text()
            val href = fixUrl(it.selectFirst("a")!!.attr("href"))
            val image = it.selectFirst("a.poster img")!!.attr("src")
            val isMovie = href.contains("/movie/")
            val qualityInfo = it.selectFirst("div.quality")!!.text()
            val quality = getQualityFromString(qualityInfo)

            if (isMovie) {
                MovieSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Movie,
                    image,
                    null,
                    quality = quality
                )
            } else {
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.TvSeries,
                    image,
                    null,
                    null,
                    quality = quality
                )
            }
        }
    }

    data class Response(
        @JsonProperty("html") val html: String
    )

    override suspend fun load(url: String): LoadResponse? {
        val soup = app.get(url).document
        val movieid = soup.selectFirst("div#watch")!!.attr("data-id")
        val movieidencoded = encode(getVrf(movieid) ?: return null)
        val title = soup.selectFirst("div.info h1")!!.text()
        val description = soup.selectFirst(".info .desc")?.text()?.trim()
        val poster: String? = try {
            soup.selectFirst("img.poster")!!.attr("src")
        } catch (e: Exception) {
            soup.selectFirst(".info .poster img")!!.attr("src")
        }

        val tags = soup.select("div.info .meta div:contains(Genre) a").map { it.text() }
        val episodes =  Jsoup.parse(
            app.get(
                "$mainUrl/ajax/film/servers?id=$movieid&vrf=$movieidencoded"
            ).parsed<Response>().html
        ).select("div.episode").map {
            val a = it.selectFirst("a")
            val href = fixUrl(a!!.attr("href"))
            val extraData = a.attr("data-kname").let { str ->
                str.split("-").mapNotNull { subStr -> subStr.toIntOrNull() }
            }
            val isValid = extraData.size == 2
            val episode = if (isValid) extraData.getOrNull(1) else null
            val season = if (isValid) extraData.getOrNull(0) else null

            val eptitle = it.selectFirst(".episode a span.name")!!.text()
            val secondtitle = it.selectFirst(".episode a span")!!.text()
                .replace(Regex("(Episode (\\d+):|Episode (\\d+)-|Episode (\\d+))"),"") ?: ""
            Episode(
                href,
                secondtitle+eptitle,
                season,
                episode,
            )
        }
        val tvType = if (url.contains("/movie/") && episodes.size == 1) TvType.Movie else TvType.TvSeries
        val recommendations =
            soup.select("div.bl-2 section.bl div.content div.filmlist div.item")
                ?.mapNotNull { element ->
                    val recTitle = element.select("h3 a").text() ?: return@mapNotNull null
                    val image = element.select("a.poster img")?.attr("src")
                    val recUrl = fixUrl(element.select("a").attr("href"))
                    MovieSearchResponse(
                        recTitle,
                        recUrl,
                        this.name,
                        if (recUrl.contains("/movie/")) TvType.Movie else TvType.TvSeries,
                        image,
                        year = null
                    )
                }
        val rating = soup.selectFirst(".info span.imdb")?.text()?.toRatingInt()
        val durationdoc = soup.selectFirst("div.info div.meta").toString()
        val durationregex = Regex("((\\d+) min)")
        val yearegex = Regex("<span>(\\d+)<\\/span>")
        val duration = if (durationdoc.contains("na min")) null
        else durationregex.find(durationdoc)?.destructured?.component1()?.replace(" min","")?.toIntOrNull()
        val year = if (mainUrl == "https://bflix.ru") { yearegex.find(durationdoc)?.destructured?.component1()
            ?.replace(Regex("<span>|<\\/span>"),"") } else null
        return when (tvType) {
            TvType.TvSeries -> {
                TvSeriesLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes,
                    poster,
                    year?.toIntOrNull(),
                    description,
                    null,
                    rating,
                    tags,
                    recommendations = recommendations,
                    duration = duration,
                )
            }
            TvType.Movie -> {
                MovieLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    url,
                    poster,
                    year?.toIntOrNull(),
                    description,
                    rating,
                    tags,
                    recommendations = recommendations,
                    duration = duration
                )
            }
            else -> null
        }
    }


    data class Subtitles(
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String,
        @JsonProperty("kind") val kind: String
    )

    data class Links(
        @JsonProperty("url") val url: String
    )

    data class Servers(
        @JsonProperty("28") val mcloud: String?,
        @JsonProperty("35") val mp4upload: String?,
        @JsonProperty("40") val streamtape: String?,
        @JsonProperty("41") val vidstream: String?,
        @JsonProperty("43") val videovard: String?
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val soup = app.get(data).document

        val movieid = encode(soup.selectFirst("div#watch")?.attr("data-id") ?: return false)
        val movieidencoded = encode(getVrf(movieid!!) ?: return false)
        Jsoup.parse(
            parseJson<Response>(
                app.get(
                    "$mainUrl/ajax/film/servers?id=$movieid&vrf=$movieidencoded"
                ).text
            ).html
        )
            .select("html body #episodes").map {
                val cleandata = data.replace(mainUrl, "")
                val a = it.select("a").map {
                    it.attr("data-kname")
                }
                val tvType = if (data.contains("movie/") && a.size == 1) TvType.Movie else TvType.TvSeries
                val servers = if (tvType == TvType.Movie) it.select(".episode a").attr("data-ep")
                else
                    it.select(".episode a[href=$cleandata]").attr("data-ep")
                        ?: it.select(".episode a[href=${cleandata.replace("/1-full", "")}]")
                            .attr("data-ep")
                val jsonservers = parseJson<Servers?>(servers) ?: return@map
                listOfNotNull(
                    jsonservers.vidstream,
                    jsonservers.mcloud,
                    jsonservers.mp4upload,
                    jsonservers.streamtape
                ).mapNotNull {
                    val epserver = app.get("$mainUrl/ajax/episode/info?id=$it").text
                    (if (epserver.contains("url")) {
                        parseJson<Links>(epserver)
                    } else null)?.url?.let { it1 -> getLink(it1.replace("=", "")) }
                        ?.replace("/embed/", "/e/")?.replace(Regex("(\\?sub.info.*)"), "")
                }.apmap { url ->
                    loadExtractor(
                        url, data, callback
                    )
                }
                //Apparently any server works, I haven't found any diference
                val sublink =
                    app.get("$mainUrl/ajax/episode/subtitles/${jsonservers.mcloud}").text
                val jsonsub = parseJson<List<Subtitles>>(sublink)
                jsonsub.forEach { subtitle ->
                    subtitleCallback(
                        SubtitleFile(subtitle.label, subtitle.file)
                    )
                }
            }

        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/CinecalidadProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.extractors.Cinestart
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class CinecalidadProvider:MainAPI() {
    override var mainUrl = "https://cinecalidad.lol"
    override var name = "Cinecalidad"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )
    override val vpnStatus = VPNStatus.MightBeNeeded //Due to evoload sometimes not loading

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val urls = listOf(
            Pair("$mainUrl/ver-serie/", "Series"),
            Pair("$mainUrl/", "Peliculas"),
            Pair("$mainUrl/genero-de-la-pelicula/peliculas-en-calidad-4k/", "4K UHD"),
        )

        for ((url, name) in urls) {
            try {
                val soup = app.get(url).document
                val home = soup.select(".item.movies").map {
                    val title = it.selectFirst("div.in_title")!!.text()
                    val link = it.selectFirst("a")!!.attr("href")
                    TvSeriesSearchResponse(
                        title,
                        link,
                        this.name,
                        if (link.contains("/ver-pelicula/")) TvType.Movie else TvType.TvSeries,
                        it.selectFirst(".poster.custom img")!!.attr("data-src"),
                        null,
                        null,
                    )
                }

                items.add(HomePageList(name, home))
            } catch (e: Exception) {
                logError(e)
            }
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=${query}"
        val document = app.get(url).document

        return document.select("article").map {
            val title = it.selectFirst("div.in_title")!!.text()
            val href = it.selectFirst("a")!!.attr("href")
            val image = it.selectFirst(".poster.custom img")!!.attr("data-src")
            val isMovie = href.contains("/ver-pelicula/")

            if (isMovie) {
                MovieSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Movie,
                    image,
                    null
                )
            } else {
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.TvSeries,
                    image,
                    null,
                    null
                )
            }
        }
    }


    override suspend fun load(url: String): LoadResponse? {
        val soup = app.get(url, timeout = 120).document

        val title = soup.selectFirst(".single_left h1")!!.text()
        val description = soup.selectFirst("div.single_left table tbody tr td p")?.text()?.trim()
        val poster: String? = soup.selectFirst(".alignnone")!!.attr("data-src")
        val episodes = soup.select("div.se-c div.se-a ul.episodios li").map { li ->
            val href = li.selectFirst("a")!!.attr("href")
            val epThumb = li.selectFirst("img.lazy")!!.attr("data-src")
            val name = li.selectFirst(".episodiotitle a")!!.text()
            val seasonid = li.selectFirst(".numerando")!!.text().replace(Regex("(S|E)"),"").let { str ->
                str.split("-").mapNotNull { subStr -> subStr.toIntOrNull() }
            }
            val isValid = seasonid.size == 2
            val episode = if (isValid) seasonid.getOrNull(1) else null
            val season = if (isValid) seasonid.getOrNull(0) else null
            Episode(
                href,
                name,
                season,
                episode,
                if (epThumb.contains("svg")) null else epThumb
            )
        }
        return when (val tvType = if (url.contains("/ver-pelicula/")) TvType.Movie else TvType.TvSeries) {
            TvType.TvSeries -> {
                TvSeriesLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes,
                    poster,
                    null,
                    description,
                )
            }
            TvType.Movie -> {
                MovieLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    url,
                    poster,
                    null,
                    description,
                )
            }
            else -> null
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {

        val datam = app.get(data)
        val doc = datam.document
        val datatext = datam.text

        doc.select(".dooplay_player_option").apmap {
            val url = it.attr("data-option")
            if (url.startsWith("https://cinestart.net")) {
                val extractor = Cinestart()
                extractor.getSafeUrl(url)?.forEach { link ->
                    callback.invoke(link)
                }
            } else {
                loadExtractor(url, mainUrl, callback)
            }
            if (url.startsWith("https://cinecalidad.lol")) {
                val cineurlregex = Regex("(https:\\/\\/cinecalidad\\.lol\\/play\\/\\?h=[a-zA-Z0-9]{0,8}[a-zA-Z0-9_-]+)")
                cineurlregex.findAll(url).map {
                    it.value.replace("/play/","/play/r.php")
                }.toList().apmap {
                    app.get(it,
                        headers = mapOf(
                            "Host" to "cinecalidad.lol",
                            "User-Agent" to USER_AGENT,
                            "Accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8",
                            "Accept-Language" to "en-US,en;q=0.5",
                            "DNT" to "1",
                            "Connection" to "keep-alive",
                            "Referer" to data,
                            "Upgrade-Insecure-Requests" to "1",
                            "Sec-Fetch-Dest" to "iframe",
                            "Sec-Fetch-Mode" to "navigate",
                            "Sec-Fetch-Site" to "same-origin",
                            "Sec-Fetch-User" to "?1",
                        ),
                        allowRedirects = false).okhttpResponse.headers.values("location").apmap { extractedurl ->
                        if (extractedurl.contains("cinestart"))   {
                            loadExtractor(extractedurl, mainUrl, callback)
                        }
                    }
                }
            }
        }
        if (datatext.contains("en castellano")) app.get("$data?ref=es").document.select(".dooplay_player_option").apmap {
            val url = it.attr("data-option")
            if (url.startsWith("https://cinestart.net")) {
                val extractor = Cinestart()
                extractor.getSafeUrl(url)?.forEach { link ->
                    callback.invoke(link)
                }
            } else {
                loadExtractor(url, mainUrl, callback)
            }

            if (url.startsWith("https://cinecalidad.lol")) {
                val cineurlregex = Regex("(https:\\/\\/cinecalidad\\.lol\\/play\\/\\?h=[a-zA-Z0-9]{0,8}[a-zA-Z0-9_-]+)")
                cineurlregex.findAll(url).map {
                    it.value.replace("/play/","/play/r.php")
                }.toList().apmap {
                    app.get(it,
                        headers = mapOf(
                            "Host" to "cinecalidad.lol",
                            "User-Agent" to USER_AGENT,
                            "Accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8",
                            "Accept-Language" to "en-US,en;q=0.5",
                            "DNT" to "1",
                            "Connection" to "keep-alive",
                            "Referer" to data,
                            "Upgrade-Insecure-Requests" to "1",
                            "Sec-Fetch-Dest" to "iframe",
                            "Sec-Fetch-Mode" to "navigate",
                            "Sec-Fetch-Site" to "same-origin",
                            "Sec-Fetch-User" to "?1",
                        ),
                        allowRedirects = false).okhttpResponse.headers.values("location").apmap { extractedurl ->
                        if (extractedurl.contains("cinestart"))   {
                            loadExtractor(extractedurl, mainUrl, callback)
                        }
                    }
                }
            }
        }
        if (datatext.contains("SubtÃ­tulo LAT") || datatext.contains("Forzados LAT"))   {
            doc.select("#panel_descarga.pane a").apmap {
                val link = if (data.contains("serie") || data.contains("episodio")) "${data}${it.attr("href")}"
                else it.attr("href")
                val docsub = app.get(link)
                val linksub = docsub.document
                val validsub = docsub.text
                if (validsub.contains("SubtÃ­tulo") || validsub.contains("Forzados")) {
                    val langregex = Regex("(SubtÃ­tulo.*\$|Forzados.*\$)")
                    val langdoc = linksub.selectFirst("div.titulo h3")!!.text()
                    val reallang = langregex.find(langdoc)?.destructured?.component1()
                    linksub.select("a.link").apmap {
                        val sublink = if (data.contains("serie") || data.contains("episodio")) "${data}${it.attr("href")}"
                        else it.attr("href")
                        subtitleCallback(
                            SubtitleFile(reallang!!, sublink)
                        )
                    }
                }
            }
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/CuevanaProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class CuevanaProvider : MainAPI() {
    override var mainUrl = "https://cuevana3.me"
    override var name = "Cuevana"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val urls = listOf(
            Pair(mainUrl, "Recientemente actualizadas"),
            Pair("$mainUrl/estrenos/", "Estrenos"),
        )
        items.add(
            HomePageList(
                "Series",
                app.get("$mainUrl/serie", timeout = 120).document.select("section.home-series li")
                    .map {
                        val title = it.selectFirst("h2.Title")!!.text()
                        val poster = it.selectFirst("img.lazy")!!.attr("data-src")
                        val url = it.selectFirst("a")!!.attr("href")
                        TvSeriesSearchResponse(
                            title,
                            url,
                            this.name,
                            TvType.Anime,
                            poster,
                            null,
                            null,
                        )
                    })
        )
        for ((url, name) in urls) {
            try {
                val soup = app.get(url).document
                val home = soup.select("section li.xxx.TPostMv").map {
                    val title = it.selectFirst("h2.Title")!!.text()
                    val link = it.selectFirst("a")!!.attr("href")
                    TvSeriesSearchResponse(
                        title,
                        link,
                        this.name,
                        if (link.contains("/pelicula/")) TvType.Movie else TvType.TvSeries,
                        it.selectFirst("img.lazy")!!.attr("data-src"),
                        null,
                        null,
                    )
                }

                items.add(HomePageList(name, home))
            } catch (e: Exception) {
                logError(e)
            }
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=${query}"
        val document = app.get(url).document

        return document.select("li.xxx.TPostMv").map {
            val title = it.selectFirst("h2.Title")!!.text()
            val href = it.selectFirst("a")!!.attr("href")
            val image = it.selectFirst("img.lazy")!!.attr("data-src")
            val isSerie = href.contains("/serie/")

            if (isSerie) {
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.TvSeries,
                    image,
                    null,
                    null
                )
            } else {
                MovieSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Movie,
                    image,
                    null
                )
            }
        }
    }

    override suspend fun load(url: String): LoadResponse? {
        val soup = app.get(url, timeout = 120).document
        val title = soup.selectFirst("h1.Title")!!.text()
        val description = soup.selectFirst(".Description p")?.text()?.trim()
        val poster: String? = soup.selectFirst(".movtv-info div.Image img")!!.attr("data-src")
        val year1 = soup.selectFirst("footer p.meta").toString()
        val yearRegex = Regex("<span>(\\d+)</span>")
        val yearf =
            yearRegex.find(year1)?.destructured?.component1()?.replace(Regex("<span>|</span>"), "")
        val year = if (yearf.isNullOrBlank()) null else yearf.toIntOrNull()
        val episodes = soup.select(".all-episodes li.TPostMv article").map { li ->
            val href = li.select("a").attr("href")
            val epThumb =
                li.selectFirst("div.Image img")?.attr("data-src") ?: li.selectFirst("img.lazy")!!
                    .attr("data-srcc")
            val seasonid = li.selectFirst("span.Year")!!.text().let { str ->
                str.split("x").mapNotNull { subStr -> subStr.toIntOrNull() }
            }
            val isValid = seasonid.size == 2
            val episode = if (isValid) seasonid.getOrNull(1) else null
            val season = if (isValid) seasonid.getOrNull(0) else null
            Episode(
                href,
                null,
                season,
                episode,
                fixUrl(epThumb)
            )
        }
        val tags = soup.select("ul.InfoList li.AAIco-adjust:contains(Genero) a").map { it.text() }
        val tvType = if (episodes.isEmpty()) TvType.Movie else TvType.TvSeries
        val recelement =
            if (tvType == TvType.TvSeries) "main section div.series_listado.series div.xxx"
            else "main section ul.MovieList li"
        val recommendations =
            soup.select(recelement).mapNotNull { element ->
                val recTitle = element.select("h2.Title").text() ?: return@mapNotNull null
                val image = element.select("figure img")?.attr("data-src")
                val recUrl = fixUrl(element.select("a").attr("href"))
                MovieSearchResponse(
                    recTitle,
                    recUrl,
                    this.name,
                    TvType.Movie,
                    image,
                    year = null
                )
            }

        return when (tvType) {
            TvType.TvSeries -> {
                TvSeriesLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes,
                    poster,
                    year,
                    description,
                    tags = tags,
                    recommendations = recommendations
                )
            }
            TvType.Movie -> {
                MovieLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    url,
                    poster,
                    year,
                    description,
                    tags = tags,
                    recommendations = recommendations
                )
            }
            else -> null
        }
    }

    data class Femcuevana(
        @JsonProperty("url") val url: String,
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document.select("div.TPlayer.embed_div iframe").apmap {
            val iframe = fixUrl(it.attr("data-src"))
            if (iframe.contains("api.cuevana3.me/fembed/")) {
                val femregex =
                    Regex("(https.\\/\\/api\\.cuevana3\\.me\\/fembed\\/\\?h=[a-zA-Z0-9]{0,8}[a-zA-Z0-9_-]+)")
                femregex.findAll(iframe).map { femreg ->
                    femreg.value
                }.toList().apmap { fem ->
                    val key = fem.replace("https://api.cuevana3.me/fembed/?h=", "")
                    val url = app.post(
                        "https://api.cuevana3.me/fembed/api.php",
                        allowRedirects = false,
                        headers = mapOf(
                            "Host" to "api.cuevana3.me",
                            "User-Agent" to USER_AGENT,
                            "Accept" to "application/json, text/javascript, */*; q=0.01",
                            "Accept-Language" to "en-US,en;q=0.5",
                            "Content-Type" to "application/x-www-form-urlencoded; charset=UTF-8",
                            "X-Requested-With" to "XMLHttpRequest",
                            "Origin" to "https://api.cuevana3.me",
                            "DNT" to "1",
                            "Connection" to "keep-alive",
                            "Sec-Fetch-Dest" to "empty",
                            "Sec-Fetch-Mode" to "cors",
                            "Sec-Fetch-Site" to "same-origin",
                        ),
                        data = mapOf(Pair("h", key))
                    ).text
                    val json = parseJson<Femcuevana>(url)
                    val link = json.url
                    if (link.contains("fembed")) {
                        loadExtractor(link, data, callback)
                    }
                }
            }
            if (iframe.contains("tomatomatela")) {
                val tomatoRegex =
                    Regex("(\\/\\/apialfa.tomatomatela.com\\/ir\\/player.php\\?h=[a-zA-Z0-9]{0,8}[a-zA-Z0-9_-]+)")
                tomatoRegex.findAll(iframe).map { tomreg ->
                    tomreg.value
                }.toList().apmap { tom ->
                    val tomkey = tom.replace("//apialfa.tomatomatela.com/ir/player.php?h=", "")
                    app.post(
                        "https://apialfa.tomatomatela.com/ir/rd.php", allowRedirects = false,
                        headers = mapOf(
                            "Host" to "apialfa.tomatomatela.com",
                            "User-Agent" to USER_AGENT,
                            "Accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8",
                            "Accept-Language" to "en-US,en;q=0.5",
                            "Content-Type" to "application/x-www-form-urlencoded",
                            "Origin" to "null",
                            "DNT" to "1",
                            "Connection" to "keep-alive",
                            "Upgrade-Insecure-Requests" to "1",
                            "Sec-Fetch-Dest" to "iframe",
                            "Sec-Fetch-Mode" to "navigate",
                            "Sec-Fetch-Site" to "same-origin",
                        ),
                        data = mapOf(Pair("url", tomkey))
                    ).okhttpResponse.headers.values("location").apmap { loc ->
                        if (loc.contains("goto_ddh.php")) {
                            val gotoregex =
                                Regex("(\\/\\/api.cuevana3.me\\/ir\\/goto_ddh.php\\?h=[a-zA-Z0-9]{0,8}[a-zA-Z0-9_-]+)")
                            gotoregex.findAll(loc).map { goreg ->
                                goreg.value.replace("//api.cuevana3.me/ir/goto_ddh.php?h=", "")
                            }.toList().apmap { gotolink ->
                                app.post(
                                    "https://api.cuevana3.me/ir/redirect_ddh.php",
                                    allowRedirects = false,
                                    headers = mapOf(
                                        "Host" to "api.cuevana3.me",
                                        "User-Agent" to USER_AGENT,
                                        "Accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8",
                                        "Accept-Language" to "en-US,en;q=0.5",
                                        "Content-Type" to "application/x-www-form-urlencoded",
                                        "Origin" to "null",
                                        "DNT" to "1",
                                        "Connection" to "keep-alive",
                                        "Upgrade-Insecure-Requests" to "1",
                                        "Sec-Fetch-Dest" to "iframe",
                                        "Sec-Fetch-Mode" to "navigate",
                                        "Sec-Fetch-Site" to "same-origin",
                                    ),
                                    data = mapOf(Pair("url", gotolink))
                                ).okhttpResponse.headers.values("location").apmap { golink ->
                                    loadExtractor(golink, data, callback)
                                }
                            }
                        }
                        if (loc.contains("index.php?h=")) {
                            val indexRegex =
                                Regex("(\\/\\/api.cuevana3.me\\/sc\\/index.php\\?h=[a-zA-Z0-9]{0,8}[a-zA-Z0-9_-]+)")
                            indexRegex.findAll(loc).map { indreg ->
                                indreg.value.replace("//api.cuevana3.me/sc/index.php?h=", "")
                            }.toList().apmap { inlink ->
                                app.post(
                                    "https://api.cuevana3.me/sc/r.php", allowRedirects = false,
                                    headers = mapOf(
                                        "Host" to "api.cuevana3.me",
                                        "User-Agent" to USER_AGENT,
                                        "Accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8",
                                        "Accept-Language" to "en-US,en;q=0.5",
                                        "Accept-Encoding" to "gzip, deflate, br",
                                        "Content-Type" to "application/x-www-form-urlencoded",
                                        "Origin" to "null",
                                        "DNT" to "1",
                                        "Connection" to "keep-alive",
                                        "Upgrade-Insecure-Requests" to "1",
                                        "Sec-Fetch-Dest" to "iframe",
                                        "Sec-Fetch-Mode" to "navigate",
                                        "Sec-Fetch-Site" to "same-origin",
                                        "Sec-Fetch-User" to "?1",
                                    ),
                                    data = mapOf(Pair("h", inlink))
                                ).okhttpResponse.headers.values("location").apmap { link ->
                                    loadExtractor(link, data, callback)
                                }
                            }
                        }
                    }
                }
            }
        }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/DopeboxProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

class DopeboxProvider : SflixProvider() {
    override var mainUrl = "https://dopebox.to"
    override var name = "Dopebox"
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/DoramasYTProvider.kt
================================================
package com.lagradost.cloudstream3.animeproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.extractors.FEmbed
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import java.util.*


class DoramasYTProvider : MainAPI() {
    companion object {
        fun getType(t: String): TvType {
            return if (t.contains("OVA") || t.contains("Especial")) TvType.OVA
            else if (t.contains("Pelicula")) TvType.Movie
            else TvType.TvSeries
        }
        fun getDubStatus(title: String): DubStatus {
            return if (title.contains("Latino") || title.contains("Castellano"))
                DubStatus.Dubbed
            else DubStatus.Subbed
        }
    }

    override var mainUrl = "https://doramasyt.com"
    override var name = "DoramasYT"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.TvSeries,
        TvType.Movie,
    )

    override suspend fun getMainPage(): HomePageResponse {
        val urls = listOf(
            Pair("$mainUrl/emision", "En emisiÃ³n"),
            Pair(
                "$mainUrl/doramas?categoria=pelicula&genero=false&fecha=false&letra=false",
                "Peliculas"
            ),
            Pair("$mainUrl/doramas", "Doramas"),
            Pair(
                "$mainUrl/doramas?categoria=live-action&genero=false&fecha=false&letra=false",
                "Live Action"
            ),
        )

        val items = ArrayList<HomePageList>()

        items.add(
            HomePageList(
                "CapÃ­tulos actualizados",
                app.get(mainUrl, timeout = 120).document.select(".col-6").map {
                    val title = it.selectFirst("p")!!.text()
                    val poster = it.selectFirst(".chapter img")!!.attr("src")
                    val epRegex = Regex("episodio-(\\d+)")
                    val url = it.selectFirst("a")!!.attr("href").replace("ver/", "dorama/")
                        .replace(epRegex, "sub-espanol")
                    val epNum = it.selectFirst("h3")!!.text().toIntOrNull()
                    newAnimeSearchResponse(title,url) {
                        this.posterUrl = fixUrl(poster)
                        addDubStatus(getDubStatus(title), epNum)
                    }
                })
        )

        for (i in urls) {
            try {
                val home = app.get(i.first, timeout = 120).document.select(".col-6").map {
                    val title = it.selectFirst(".animedtls p")!!.text()
                    val poster = it.selectFirst(".anithumb img")!!.attr("src")
                    newAnimeSearchResponse(title, fixUrl(it.selectFirst("a")!!.attr("href"))) {
                        this.posterUrl = fixUrl(poster)
                        addDubStatus(getDubStatus(title))
                    }
                }

                items.add(HomePageList(i.second, home))
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        return app.get("$mainUrl/buscar?q=$query", timeout = 120).document.select(".col-6").map {
            val title = it.selectFirst(".animedtls p")!!.text()
            val href = it.selectFirst("a")!!.attr("href")
            val image = it.selectFirst(".animes img")!!.attr("src")
            AnimeSearchResponse(
                title,
                href,
                this.name,
                TvType.Anime,
                image,
                null,
                if (title.contains("Latino") || title.contains("Castellano")) EnumSet.of(
                    DubStatus.Dubbed
                ) else EnumSet.of(DubStatus.Subbed),
            )
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url, timeout = 120).document
        val poster = doc.selectFirst("div.flimimg img.img1")!!.attr("src")
        val title = doc.selectFirst("h1")!!.text()
        val type = doc.selectFirst("h4")!!.text()
        val description = doc.selectFirst("p.textComplete")!!.text().replace("Ver menos", "")
        val genres = doc.select(".nobel a").map { it.text() }
        val status = when (doc.selectFirst(".state h6")?.text()) {
            "Estreno" -> ShowStatus.Ongoing
            "Finalizado" -> ShowStatus.Completed
            else -> null
        }
        val episodes = doc.select(".heromain .col-item").map {
            val name = it.selectFirst(".dtlsflim p")!!.text()
            val link = it.selectFirst("a")!!.attr("href")
            val epThumb = it.selectFirst(".flimimg img.img1")!!.attr("src")
            Episode(link, name, posterUrl = epThumb)
        }
        return newAnimeLoadResponse(title, url, getType(type)) {
            posterUrl = poster
            addEpisodes(DubStatus.Subbed, episodes)
            showStatus = status
            plot = description
            tags = genres
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document.select("div.playother p").apmap {
            val encodedurl = it.select("p").attr("data-player")
            val urlDecoded = base64Decode(encodedurl)
            val url = (urlDecoded).replace("https://doramasyt.com/reproductor?url=", "")
            if (url.startsWith("https://www.fembed.com")) {
                val extractor = FEmbed()
                extractor.getUrl(url).forEach { link ->
                    callback.invoke(link)
                }
            } else {
                loadExtractor(url, mainUrl, callback)
            }
        }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/DramaidProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup
import org.jsoup.nodes.Element
import java.util.ArrayList

class DramaidProvider : MainAPI() {
    override var mainUrl = "https://185.224.83.103"
    override var name = "DramaId"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val lang = "id"
    override val hasDownloadSupport = true
    override val hasChromecastSupport = false
    override val supportedTypes = setOf(TvType.AsianDrama)

    companion object {
        fun getStatus(t: String): ShowStatus {
            return when (t) {
                "Completed" -> ShowStatus.Completed
                "Ongoing" -> ShowStatus.Ongoing
                else -> ShowStatus.Completed
            }
        }
    }

    override suspend fun getMainPage(): HomePageResponse {
        val document = app.get(mainUrl).document

        val homePageList = ArrayList<HomePageList>()

        document.select(".bixbox").forEach { block ->
            val header = block.selectFirst(".releases > h3")!!.text().trim()
            val dramas = block.select("article[itemscope=itemscope]").mapNotNull {
                it.toSearchResult()
            }
            if (dramas.isNotEmpty()) homePageList.add(HomePageList(header, dramas))
        }

        return HomePageResponse(homePageList)
    }

    private fun getProperDramaLink(uri: String): String {
        return if (uri.contains("/series/")) {
            uri
        } else {
            "$mainUrl/series/" + Regex("$mainUrl/(.+)-ep.+").find(uri)?.groupValues?.get(1)
                .toString()
        }
    }

    private fun Element.toSearchResult(): SearchResponse {
        val href = getProperDramaLink(this.selectFirst("a.tip")!!.attr("href"))
        val title = this.selectFirst("h2[itemprop=headline]")!!.text().trim()
        val posterUrl = this.selectFirst(".limit > noscript > img")!!.attr("src")

        return newTvSeriesSearchResponse(title, href, TvType.AsianDrama) {
            this.posterUrl = posterUrl
        }
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/?s=$query"
        val document = app.get(link).document

        return document.select("article[itemscope=itemscope]").map {
            val title = it.selectFirst("h2[itemprop=headline]")!!.text().trim()
            val poster = it.selectFirst(".limit > noscript > img")!!.attr("src")
            val href = it.selectFirst("a.tip")!!.attr("href")

            newTvSeriesSearchResponse(title, href, TvType.AsianDrama) {
                this.posterUrl = poster
            }
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val title = document.selectFirst("h1.entry-title")!!.text().trim()
        val poster = document.select(".thumb > noscript > img").attr("src")
        val tags = document.select(".genxed > a").map { it.text() }

        val year = Regex("\\d, ([0-9]*)").find(
            document.selectFirst(".info-content > .spe > span > time")!!.text().trim()
        )?.groupValues?.get(1).toString().toIntOrNull()
        val status = getStatus(
            document.select(".info-content > .spe > span:nth-child(1)")
                .text().trim().replace("Status: ", "")
        )
        val description = document.select(".entry-content > p").text().trim()

        val episodes = document.select(".eplister > ul > li").map {
            val name = it.selectFirst("a > .epl-title")!!.text().trim()
            val link = it.select("a").attr("href")
            val epNum = it.selectFirst("a > .epl-num")!!.text().trim().toIntOrNull()
            newEpisode(link) {
                this.name = name
                this.episode = epNum
            }
        }.reversed()

        val recommendations =
            document.select(".listupd > article[itemscope=itemscope]").map { rec ->
                val epTitle = rec.selectFirst("h2[itemprop=headline]")!!.text().trim()
                val epPoster = rec.selectFirst(".limit > noscript > img")!!.attr("src")
                val epHref = fixUrl(rec.selectFirst("a.tip")!!.attr("href"))

                newTvSeriesSearchResponse(epTitle, epHref, TvType.AsianDrama) {
                    this.posterUrl = epPoster
                }
            }

        if (episodes.size == 1) {
            return newMovieLoadResponse(title, url, TvType.Movie, episodes[0].data) {
                posterUrl = poster
                this.year = year
                plot = description
                this.tags = tags
                this.recommendations = recommendations
            }
        } else {
            return newTvSeriesLoadResponse(title, url, TvType.AsianDrama, episodes = episodes) {
                posterUrl = poster
                this.year = year
                showStatus = status
                plot = description
                this.tags = tags
                this.recommendations = recommendations
            }
        }

    }

    private data class Sources(
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String,
        @JsonProperty("type") val type: String,
        @JsonProperty("default") val default: Boolean?
    )

    private data class Tracks(
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String,
        @JsonProperty("kind") val type: String,
        @JsonProperty("default") val default: Boolean?
    )

    private suspend fun invokeDriveSource(
        url: String,
        name: String,
        subCallback: (SubtitleFile) -> Unit,
        sourceCallback: (ExtractorLink) -> Unit
    ) {
        val server = app.get(url).document.selectFirst(".picasa")?.nextElementSibling()?.data()

        val source = "[${server!!.substringAfter("sources: [").substringBefore("],")}]".trimIndent()
        val trackers = server.substringAfter("tracks:[").substringBefore("],")
            .replace("//language", "")
            .replace("file", "\"file\"")
            .replace("label", "\"label\"")
            .replace("kind", "\"kind\"").trimIndent()

        tryParseJson<List<Sources>>(source)?.map {
            sourceCallback(
                ExtractorLink(
                    name,
                    "Drive",
                    fixUrl(it.file),
                    referer = "https://motonews.club/",
                    quality = getQualityFromName(it.label)
                )
            )
        }

        tryParseJson<Tracks>(trackers)?.let {
            subCallback(
                SubtitleFile(
                    if (it.label.contains("Indonesia")) "${it.label}n" else it.label,
                    it.file
                )
            )
        }

    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val document = app.get(data).document
        val sources = document.select(".mobius > .mirror > option").mapNotNull {
            fixUrl(Jsoup.parse(base64Decode(it.attr("value"))).select("iframe").attr("src"))
        }

        sources.map {
            it.replace("https://ndrama.xyz", "https://www.fembed.com")
        }.apmap {
            when {
                it.contains("motonews.club") -> invokeDriveSource(it, this.name, subtitleCallback, callback)
                else -> loadExtractor(it, data, callback)
            }
        }

        return true
    }

}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/DramaSeeProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.animeproviders.GogoanimeProvider.Companion.extractVidstream
import com.lagradost.cloudstream3.extractors.XStreamCdn
import com.lagradost.cloudstream3.extractors.helper.AsianEmbedHelper
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class DramaSeeProvider : MainAPI() {
    override var mainUrl = "https://dramasee.net"
    override var name = "DramaSee"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val hasChromecastSupport = false
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(TvType.AsianDrama)

    override suspend fun getMainPage(): HomePageResponse {
        val headers = mapOf("X-Requested-By" to "dramasee.net")
        val document = app.get(mainUrl, headers = headers).document
        val mainbody = document.getElementsByTag("body")

        return HomePageResponse(
            mainbody?.select("section")?.map { row ->
                val main = row?.select("main") ?: return@map null
                val title = main.select("div.title > div > h2")?.text() ?: "Main"
                val inner = main.select("li.series-item") ?: return@map null

                HomePageList(
                    title,
                    inner.mapNotNull {
                        // Get inner div from article
                        val innerBody = it?.selectFirst("a")
                        // Fetch details
                        val link = fixUrlNull(innerBody?.attr("href")) ?: return@mapNotNull null
                        val image = fixUrlNull(innerBody?.select("img")?.attr("src")) ?: ""
                        val name = it?.selectFirst("a.series-name")?.text() ?: "<Untitled>"
                        //Log.i(this.name, "Result => (innerBody, image) ${innerBody} / ${image}")
                        MovieSearchResponse(
                            name,
                            link,
                            this.name,
                            TvType.AsianDrama,
                            image,
                            year = null,
                            id = null,
                        )
                    }.distinctBy { c -> c.url })
            }?.filterNotNull() ?: listOf()
        )
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/search?q=$query"
        val html = app.get(url).document
        val document = html.getElementsByTag("body")
            .select("section > main > ul.series > li") ?: return listOf()

        return document.mapNotNull {
            if (it == null) {
                return@mapNotNull null
            }
            val innerA = it.select("a.series-img") ?: return@mapNotNull null
            val link = fixUrlNull(innerA.attr("href")) ?: return@mapNotNull null
            val title = it.select("a.series-name")?.text() ?: return@mapNotNull null
            val year = null
            val imgsrc = innerA.select("img")?.attr("src") ?: return@mapNotNull null
            val image = fixUrlNull(imgsrc)

            MovieSearchResponse(
                name = title,
                url = link,
                apiName = this.name,
                type = TvType.Movie,
                posterUrl = image,
                year = year
            )
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val body = doc.getElementsByTag("body")
        val inner = body?.select("div.series-info")

        // Video details
        val poster = fixUrlNull(inner?.select("div.img > img")?.attr("src")) ?: ""
        //Log.i(this.name, "Result => (imgLinkCode) ${imgLinkCode}")
        val title = inner?.select("h1.series-name")?.text() ?: ""
        val year = if (title.length > 5) {
            title.substring(title.length - 5)
                .trim().trimEnd(')').toIntOrNull()
        } else {
            null
        }
        //Log.i(this.name, "Result => (year) ${title.substring(title.length - 5)}")
        val seriesBody = body?.select("div.series-body")
        val descript = seriesBody?.firstOrNull()?.select("div.js-content")?.text()
        val tags = seriesBody?.select("div.series-tags > a")
            ?.mapNotNull { it?.text()?.trim() ?: return@mapNotNull null }
        val recs = body?.select("ul.series > li")?.mapNotNull {
            val a = it.select("a.series-img") ?: return@mapNotNull null
            val aUrl = fixUrlNull(a.attr("href")) ?: return@mapNotNull null
            val aImg = fixUrlNull(a.select("img")?.attr("src"))
            val aName = a.select("img")?.attr("alt") ?: return@mapNotNull null
            val aYear = aName.trim().takeLast(5).removeSuffix(")").toIntOrNull()
            MovieSearchResponse(
                url = aUrl,
                name = aName,
                type = TvType.Movie,
                posterUrl = aImg,
                year = aYear,
                apiName = this.name
            )
        }

        // Episodes Links
        val episodeList = ArrayList<Episode>()
        body?.select("ul.episodes > li")?.forEach { ep ->
            val innerA = ep.select("a") ?: return@forEach
            val count = innerA.select("span.episode")?.text()?.toIntOrNull() ?: 0
            val epLink = fixUrlNull(innerA.attr("href")) ?: return@forEach
            //Log.i(this.name, "Result => (epLink) ${epLink}")
            if (epLink.isNotBlank()) {
                // Fetch video links
                val epVidLinkEl = app.get(epLink, referer = mainUrl).document
                val ajaxUrl = epVidLinkEl.select("div#js-player")?.attr("embed")
                //Log.i(this.name, "Result => (ajaxUrl) ${ajaxUrl}")
                if (!ajaxUrl.isNullOrEmpty()) {
                    val innerPage = app.get(fixUrl(ajaxUrl), referer = epLink).document
                    val listOfLinks = mutableListOf<String>()
                    innerPage.select("div.player.active > main > div")?.forEach { em ->
                        val href = fixUrlNull(em.attr("src")) ?: ""
                        if (href.isNotBlank()) {
                            listOfLinks.add(href)
                        }
                    }

                    //Log.i(this.name, "Result => (listOfLinks) ${listOfLinks.toJson()}")
                    episodeList.add(
                        Episode(
                            name = null,
                            season = null,
                            episode = count,
                            data = listOfLinks.distinct().toJson(),
                            posterUrl = poster,
                            date = null
                        )
                    )
                }
            }
        }

        //If there's only 1 episode, consider it a movie.
        if (episodeList.size == 1) {
            return MovieLoadResponse(
                name = title,
                url = url,
                apiName = this.name,
                type = TvType.Movie,
                dataUrl = episodeList[0].data,
                posterUrl = poster,
                year = year,
                plot = descript,
                recommendations = recs,
                tags = tags
            )
        }
        return TvSeriesLoadResponse(
            name = title,
            url = url,
            apiName = this.name,
            type = TvType.AsianDrama,
            episodes = episodeList.reversed(),
            posterUrl = poster,
            year = year,
            plot = descript,
            recommendations = recs,
            tags = tags
        )
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        var count = 0
        mapper.readValue<List<String>>(data).apmap { item ->
            if (item.isNotEmpty()) {
                count++
                val url = fixUrl(item.trim())
                //Log.i(this.name, "Result => (url) ${url}")
                when {
                    url.startsWith("https://asianembed.io") || url.startsWith("https://asianload.io") -> {
                        val iv = "9262859232435825"
                        val secretKey = "93422192433952489752342908585752"
                        extractVidstream(url, this.name, callback, iv, secretKey, secretKey,
                            isUsingAdaptiveKeys = false,
                            isUsingAdaptiveData = false
                        )
                        AsianEmbedHelper.getUrls(url, callback)
                    }
                    url.startsWith("https://embedsito.com") -> {
                        val extractor = XStreamCdn()
                        extractor.domainUrl = "embedsito.com"
                        extractor.getSafeUrl(url)?.forEach(callback)
                    }
                    else -> {
                        loadExtractor(url, mainUrl, callback)
                    }
                }
            }
        }
        return count > 0
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/EgyBestProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import org.jsoup.nodes.Element

class EgyBestProvider : MainAPI() {
    override val lang = "ar"
    override var mainUrl = "https://www.egy.best"
    override var name = "EgyBest"
    override val usesWebView = false
    override val hasMainPage = true
    override val supportedTypes = setOf(TvType.TvSeries, TvType.Movie, TvType.Anime)

    private fun String.getIntFromText(): Int? {
        return Regex("""\d+""").find(this)?.groupValues?.firstOrNull()?.toIntOrNull()
    }

    private fun Element.toSearchResponse(): SearchResponse? {
        val url = this.attr("href") ?: return null
        val posterUrl = select("img")?.attr("src")
        var title = select("span.title").text()
        val year = title.getYearFromTitle()
        val isMovie = Regex(".*/movie/.*|.*/masrahiya/.*").matches(url)
        val tvType = if (isMovie) TvType.Movie else TvType.TvSeries
        title = if (year !== null) title else title.split(" (")[0].trim()
        val quality = select("span.ribbon span").text().replace("-", "")
        // If you need to differentiate use the url.
        return MovieSearchResponse(
            title,
            url,
            this@EgyBestProvider.name,
            tvType,
            posterUrl,
            year,
            null,
            quality = getQualityFromString(quality)
        )
    }

    override suspend fun getMainPage(): HomePageResponse {
        // url, title
        val doc = app.get(mainUrl).document
        val pages = arrayListOf<HomePageList>()
        doc.select("#mainLoad div.mbox").apmap {
            val name = it.select(".bdb.pda > strong").text()
            if (it.select(".movie").first()?.attr("href")?.contains("season-(.....)|ep-(.....)".toRegex()) == true) return@apmap
            val list = arrayListOf<SearchResponse>()
            it.select(".movie").map { element ->
                list.add(element.toSearchResponse()!!)
            }
            pages.add(HomePageList(name, list))
        }
        return HomePageResponse(pages)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val q = query.replace(" ","%20")
        val result = arrayListOf<SearchResponse>()
        listOf("$mainUrl/explore/?q=$q").apmap { url ->
            val d = app.get(url).document
            d.select("div.movies a").not("a.auto.load.btn.b").mapNotNull {
                it.toSearchResponse()?.let { it1 -> result.add(it1) }
            }
        }
        return result.distinct().sortedBy { it.name }
    }

    private fun String.getYearFromTitle(): Int? {
        return Regex("""\(\d{4}\)""").find(this)?.groupValues?.firstOrNull()?.toIntOrNull()
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val isMovie = Regex(".*/movie/.*|.*/masrahiya/.*").matches(url)
        val posterUrl = doc.select("div.movie_img a img")?.attr("src")
        val year = doc.select("div.movie_title h1 a")?.text()?.toIntOrNull()
        val title = doc.select("div.movie_title h1 span").text()

        val synopsis = doc.select("div.mbox").firstOrNull {
            it.text().contains("Ø§Ù„Ù‚ØµØ©")
        }?.text()?.replace("Ø§Ù„Ù‚ØµØ© ", "")

        val tags = doc.select("table.movieTable tbody tr").firstOrNull {
            it.text().contains("Ø§Ù„Ù†ÙˆØ¹")
        }?.select("a")?.map { it.text() }

        val actors = doc.select("div.cast_list .cast_item").mapNotNull {
            val name = it.selectFirst("div > a > img")?.attr("alt") ?: return@mapNotNull null
            val image = it.selectFirst("div > a > img")?.attr("src") ?: return@mapNotNull null
            val roleString = it.selectFirst("div > span")!!.text()
            val mainActor = Actor(name, image)
            ActorData(actor = mainActor, roleString = roleString)
        }

        return if (isMovie) {
            val recommendations = doc.select(".movies_small .movie").mapNotNull { element ->
                element.toSearchResponse()
            }

            newMovieLoadResponse(
                title,
                url,
                TvType.Movie,
                url
            ) {
                this.posterUrl = posterUrl
                this.year = year
                this.recommendations = recommendations
                this.plot = synopsis
                this.tags = tags
                this.actors = actors
            }
        } else {
            val episodes = ArrayList<Episode>()
            doc.select("#mainLoad > div:nth-child(2) > div.h_scroll > div a").map {
                it.attr("href")
            }.apmap {
                val d = app.get(it).document
                val season = Regex("season-(.....)").find(it)?.groupValues?.getOrNull(1)?.getIntFromText()
                if(d.select("tr.published").isNotEmpty()) {
                    d.select("tr.published").map { element ->
                        val ep = Regex("ep-(.....)").find(element.select(".ep_title a").attr("href"))?.groupValues?.getOrNull(1)?.getIntFromText()
                        episodes.add(
                            Episode(
                                element.select(".ep_title a").attr("href"),
                                name = element.select("td.ep_title").html().replace(".*</span>|</a>".toRegex(), ""),
                                season,
                                ep,
                                rating = element.select("td.tam:not(.date, .ep_len)").text().getIntFromText()
                            )
                        )
                    }
                } else {
                    d.select("#mainLoad > div:nth-child(3) > div.movies_small a").map { eit ->
                        val ep = Regex("ep-(.....)").find(eit.attr("href"))?.groupValues?.getOrNull(1)?.getIntFromText()
                        episodes.add(
                            Episode(
                                eit.attr("href"),
                                eit.select("span.title").text(),
                                season,
                                ep,
                            )
                        )
                    }
                }
            }
            newTvSeriesLoadResponse(title, url, TvType.TvSeries, episodes.distinct().sortedBy { it.episode }) {
                this.posterUrl = posterUrl
                this.tags = tags
                this.year = year
                this.plot = synopsis
                this.actors = actors
            }
        }
    }
    data class Sources (
        @JsonProperty("quality") val quality: Int?,
        @JsonProperty("link") val link: String
    )


    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        /*val baseURL = data.split("/")[0] + "//" + data.split("/")[2]
        val episodeSoup = app.get(data).document

        val vidstreamURL = fixUrlNull(episodeSoup.selectFirst("iframe.auto-size")?.attr("src") ) ?: throw ErrorLoadingException("No iframe")
        val videoSoup = app.get(vidstreamURL).document
        fixUrlNull( videoSoup.select("source").firstOrNull { it.hasAttr("src") }?.attr("src"))?.let {
            callback.invoke(ExtractorLink(this.name,this.name,it,"",Qualities.Unknown.value,it.contains(".m3u8")))
        } ?: run {
            var jsCode = videoSoup.select("script")[1].data()

            val verificationToken = Regex("{'[0-9a-zA-Z_]*':'ok'}").findAll(jsCode)[0][2:-7]
            val encodedAdLinkVar = Regex("([0-9a-zA-Z_]{2,12}\[Math").findAll(jsCode)[0][1:-5]
            val encodingArraysRegEx = Regex(",[0-9a-zA-Z_]{2,12}=\[\]").findAll(jsCode)
            val firstEncodingArray = encodingArraysRegEx[1][1:-3]
            val secondEncodingArray = encodingArraysRegEx[2][1:-3]

            jsCode = Regex("^<script type=\"text/javascript\">", "", jsCode)
            jsCode = Regex("[;,]\$\('\*'\)(.*)$", ";", jsCode)
            jsCode = Regex(",ismob=(.*)\(navigator\[(.*)\]\)[,;]", ";", jsCode)
            jsCode = Regex("var a0b=function\(\)(.*)a0a\(\);",).findAll( jsCode)
            jsCode += "var link = ''; for (var i = 0; i <= $secondEncodingArray['length']; i++) { link += $firstEncodingArray[$secondEncodingArray[i]] || ''; } return [link, $encodedAdLinkVar[0]] }"

            val jsCodeReturn = executeJS(jsCode)()
            val verificationPath = jsCodeReturn[0]
            val encodedAdPath = jsCodeReturn[1]

            val adLink = baseURL + "/" + str(decode(encodedAdPath + "=" * (-len(encodedAdPath) % 4)), "utf-8")
            val session.get(adLink)

            val verificationLink = baseURL + "/tvc.php?verify=" + verificationPath
            val session.post(verificationLink, data={verificationToken: "ok"})

            val vidstreamResponseText = session.get(vidstreamURL).text
            val videoSoup = BeautifulSoup(vidstreamResponseText, features="html.parser")

            val qualityLinksFileURL = baseURL + videoSoup.body.find("source").get("src")
        }


        return true*/

        val requestJSON = app.get("https://api.zr5.repl.co/egybest?url=$data").text
        val jsonArray = parseJson<List<Sources>>(requestJSON)
        for (i in jsonArray) {
            val quality = i.quality
            val link = i.link
            callback.invoke(
                ExtractorLink(
                    this.name,
                    this.name,
                    link,
                    this.mainUrl,
                    quality!!,
                    true
                )
            )
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/EntrepeliculasyseriesProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class EntrepeliculasyseriesProvider:MainAPI() {
    override var mainUrl = "https://entrepeliculasyseries.nu"
    override var name = "EntrePeliculasySeries"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )
    override val vpnStatus = VPNStatus.MightBeNeeded //Due to evoload sometimes not loading

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val urls = listOf(
            Pair("$mainUrl/series/", "Series"),
            Pair("$mainUrl/peliculas/", "Peliculas"),
            Pair("$mainUrl/anime/", "Animes"),
        )

        for ((url, name) in urls) {
            try {
                val soup = app.get(url).document
                val home = soup.select("ul.list-movie li").map {
                    val title = it.selectFirst("a.link-title h2")!!.text()
                    val link = it.selectFirst("a")!!.attr("href")
                    TvSeriesSearchResponse(
                        title,
                        link,
                        this.name,
                        if (link.contains("/pelicula/")) TvType.Movie else TvType.TvSeries,
                        it.selectFirst("a.poster img")!!.attr("src"),
                        null,
                        null,
                    )
                }

                items.add(HomePageList(name, home))
            } catch (e: Exception) {
                logError(e)
            }
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=${query}"
        val document = app.get(url).document

        return document.select("li.xxx.TPostMv").map {
            val title = it.selectFirst("h2.Title")!!.text()
            val href = it.selectFirst("a")!!.attr("href")
            val image = it.selectFirst("img.lazy")!!.attr("data-src")
            val isMovie = href.contains("/pelicula/")

            if (isMovie) {
                MovieSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Movie,
                    image,
                    null
                )
            } else {
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.TvSeries,
                    image,
                    null,
                    null
                )
            }
        }.toList()
    }


    override suspend fun load(url: String): LoadResponse? {
        val soup = app.get(url, timeout = 120).document

        val title = soup.selectFirst("h1.title-post")!!.text()
        val description = soup.selectFirst("p.text-content:nth-child(3)")?.text()?.trim()
        val poster: String? = soup.selectFirst("article.TPost img.lazy")!!.attr("data-src")
        val episodes = soup.select(".TPostMv article").map { li ->
            val href = (li.select("a") ?: li.select(".C a") ?: li.select("article a")).attr("href")
            val epThumb = li.selectFirst("div.Image img")!!.attr("data-src")
            val seasonid = li.selectFirst("span.Year")!!.text().let { str ->
                str.split("x").mapNotNull { subStr -> subStr.toIntOrNull() }
            }
            val isValid = seasonid.size == 2
            val episode = if (isValid) seasonid.getOrNull(1) else null
            val season = if (isValid) seasonid.getOrNull(0) else null
            Episode(
                href,
                null,
                season,
                episode,
                fixUrl(epThumb)
            )
        }
        return when (val tvType = if (url.contains("/pelicula/")) TvType.Movie else TvType.TvSeries) {
            TvType.TvSeries -> {
                TvSeriesLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes,
                    poster,
                    null,
                    description,
                )
            }
            TvType.Movie -> {
                MovieLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    url,
                    poster,
                    null,
                    description,
                )
            }
            else -> null
        }
    }


    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document.select(".video ul.dropdown-menu li").apmap {
            val servers = it.attr("data-link")
            val doc = app.get(servers).document
            doc.select("input").apmap {
                val postkey = it.attr("value")
                app.post("https://entrepeliculasyseries.nu/r.php",
                    headers = mapOf("Host" to "entrepeliculasyseries.nu",
                        "User-Agent" to USER_AGENT,
                        "Accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8",
                        "Accept-Language" to "en-US,en;q=0.5",
                        "Content-Type" to "application/x-www-form-urlencoded",
                        "Origin" to "https://entrepeliculasyseries.nu",
                        "DNT" to "1",
                        "Connection" to "keep-alive",
                        "Referer" to servers,
                        "Upgrade-Insecure-Requests" to "1",
                        "Sec-Fetch-Dest" to "document",
                        "Sec-Fetch-Mode" to "navigate",
                        "Sec-Fetch-Site" to "same-origin",
                        "Sec-Fetch-User" to "?1",),
                    //params = mapOf(Pair("h", postkey)),
                    data =  mapOf(Pair("h", postkey)),
                    allowRedirects = false
                ).okhttpResponse.headers.values("location").apmap {
                    loadExtractor(it, data, callback)
                }
            }
        }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/FaselHDProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import org.jsoup.nodes.Element

class FaselHDProvider : MainAPI() {
    override val lang = "ar"
    override var mainUrl = "https://faselhd.io"
    override var name = "FaselHD"
    override val usesWebView = false
    override val hasMainPage = true
    override val supportedTypes = setOf(TvType.TvSeries, TvType.Movie, TvType.AsianDrama, TvType.Anime)

    private fun String.getIntFromText(): Int? {
        return Regex("""\d+""").find(this)?.groupValues?.firstOrNull()?.toIntOrNull()
    }

    private fun Element.toSearchResponse(): SearchResponse? {
        val url = select("div.postDiv a").attr("href") ?: return null
        val posterUrl = select("div.postDiv a div img").attr("data-src") ?:
        select("div.postDiv a div img").attr("src")
        val title = select("div.postDiv a div img").attr("alt")
        val quality = select(".quality").first()?.text()?.replace("1080p |-".toRegex(), "")
        val type = if(title.contains("ÙÙŠÙ„Ù…")) TvType.Movie else TvType.TvSeries
        return MovieSearchResponse(
            title.replace("Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø£ÙˆÙ„|Ø¨Ø±Ù†Ø§Ù…Ø¬|ÙÙŠÙ„Ù…|Ù…ØªØ±Ø¬Ù…|Ø§ÙˆÙ† Ù„Ø§ÙŠÙ†|Ù…Ø³Ù„Ø³Ù„|Ù…Ø´Ø§Ù‡Ø¯Ø©|Ø§Ù†Ù…ÙŠ|Ø£Ù†Ù…ÙŠ".toRegex(),""),
            url,
            this@FaselHDProvider.name,
            type,
            posterUrl,
            null,
            null,
            quality = getQualityFromString(quality)
        )
    }

    override suspend fun getMainPage(): HomePageResponse {
        // Title, Url
        val moviesUrl = listOf(
            Pair("Movies", "$mainUrl/all-movies/page/"+(0..10).random()),
            Pair("Series", "$mainUrl/series/page/"+(0..10).random()),
            Pair("Top Movies IMDB", "$mainUrl/movies_top_imdb"),
        )
        val pages = moviesUrl.apmap { (title, url) ->
            val doc = app.get(url).document
            val list = doc.select("div[id=\"postList\"] div[class=\"col-xl-2 col-lg-2 col-md-3 col-sm-3\"]")
                .mapNotNull { element ->
                    element.toSearchResponse()
                }
            HomePageList(title, list)
        }
        return HomePageResponse(pages)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val q = query.replace(" ","+")
        val d = app.get("$mainUrl/?s=$q").document
        return d.select("div[id=\"postList\"] div[class=\"col-xl-2 col-lg-2 col-md-3 col-sm-3\"]")
            .mapNotNull {
                it.toSearchResponse()
            }
    }


    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val isMovie = doc.select("div.epAll").isEmpty()
        val posterUrl = doc.select("div.posterImg img").attr("src")
            .ifEmpty { doc.select("div.seasonDiv.active img").attr("data-src") }

        val year = doc.select("div[id=\"singleList\"] div[class=\"col-xl-6 col-lg-6 col-md-6 col-sm-6\"]").firstOrNull {
            it.text().contains("Ø³Ù†Ø©|Ù…ÙˆØ¹Ø¯".toRegex())
        }?.text()?.getIntFromText()

        val title =
            doc.select("title").text().replace(" - ÙØ§ØµÙ„ Ø¥Ø¹Ù„Ø§Ù†ÙŠ", "")
                .replace("Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø£ÙˆÙ„|Ø¨Ø±Ù†Ø§Ù…Ø¬|ÙÙŠÙ„Ù…|Ù…ØªØ±Ø¬Ù…|Ø§ÙˆÙ† Ù„Ø§ÙŠÙ†|Ù…Ø³Ù„Ø³Ù„|Ù…Ø´Ø§Ù‡Ø¯Ø©|Ø§Ù†Ù…ÙŠ|Ø£Ù†Ù…ÙŠ|$year".toRegex(),"")
        // A bit iffy to parse twice like this, but it'll do.
        val duration = doc.select("div[id=\"singleList\"] div[class=\"col-xl-6 col-lg-6 col-md-6 col-sm-6\"]").firstOrNull {
            it.text().contains("Ù…Ø¯Ø©|ØªÙˆÙ‚ÙŠØª".toRegex())
        }?.text()?.getIntFromText()

        val tags = doc.select("div[id=\"singleList\"] div[class=\"col-xl-6 col-lg-6 col-md-6 col-sm-6\"]:contains(ØªØµÙ†ÙŠÙ Ø§Ù„ÙÙŠÙ„Ù…) a").map {
            it.text()
        }
        val recommendations = doc.select("div#postList div.postDiv").mapNotNull {
            it.toSearchResponse()
        }
        val synopsis = doc.select("div.singleDesc p").text()
        return if (isMovie) {
            newMovieLoadResponse(
                title,
                url,
                TvType.Movie,
                url
            ) {
                this.posterUrl = posterUrl
                this.year = year
                this.plot = synopsis
                this.duration = duration
                this.tags = tags
                this.recommendations = recommendations
            }
        } else {
            val episodes = ArrayList<Episode>()
            doc.select("div.epAll a").map {
                episodes.add(
                    Episode(
                        it.attr("href"),
                        it.text(),
                        doc.select("div.seasonDiv.active div.title").text().getIntFromText() ?: 1,
                        it.text().getIntFromText(),
                    )
                )
            }
            doc.select("div[id=\"seasonList\"] div[class=\"col-xl-2 col-lg-3 col-md-6\"] div.seasonDiv")
                .not(".active").apmap { it ->
                    val s = app.get("$mainUrl/?p="+it.attr("data-href")).document
                    s.select("div.epAll a").map {
                        episodes.add(
                            Episode(
                                it.attr("href"),
                                it.text(),
                                s.select("div.seasonDiv.active div.title").text().getIntFromText(),
                                it.text().getIntFromText(),
                            )
                        )
                    }
                }
            newTvSeriesLoadResponse(title, url, TvType.TvSeries, episodes.distinct().sortedBy { it.episode }) {
                this.duration = duration
                this.posterUrl = posterUrl
                this.year = year
                this.plot = synopsis
                this.tags = tags
                this.recommendations = recommendations
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val player = app.get(app.get(data).document.select("iframe[name=\"player_iframe\"]").attr("src")).document
        player.select("div.quality_change button.hd_btn").map {
                callback.invoke(
                    ExtractorLink(
                        this.name,
                        this.name,
                        it.attr("data-url"),
                        this.mainUrl,
                        quality = it.text().getIntFromText() ?: 0,
                        isM3u8 = true
                    )
                )
        }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/FilmanProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup
import org.jsoup.select.Elements

class FilmanProvider : MainAPI() {
    override var mainUrl = "https://filman.cc"
    override var name = "filman.cc"
    override val lang = "pl"
    override val hasMainPage = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries
    )

    override suspend fun getMainPage(): HomePageResponse {
        val response = app.get(mainUrl).text
        val document = Jsoup.parse(response)
        val lists = document.select(".item-list,.series-list")
        val categories = ArrayList<HomePageList>()
        for (l in lists) {
            val title = l.parent()!!.select("h3").text()
            val items = l.select(".poster").map { i ->
                val name = i.select("a[href]").attr("title")
                val href = i.select("a[href]").attr("href")
                val poster = i.select("img[src]").attr("src")
                val year = l.select(".film_year").text().toIntOrNull()
                if (l.hasClass("series-list")) TvSeriesSearchResponse(
                    name,
                    href,
                    this.name,
                    TvType.TvSeries,
                    poster,
                    year,
                    null
                ) else MovieSearchResponse(
                    name,
                    href,
                    this.name,
                    TvType.Movie,
                    poster,
                    year
                )
            }
            categories.add(HomePageList(title, items))
        }
        return HomePageResponse(categories)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/wyszukiwarka?phrase=$query"
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val lists = document.select("#advanced-search > div")
        val movies = lists[1].select(".item")
        val series = lists[3].select(".item")
        if (movies.isEmpty() && series.isEmpty()) return ArrayList()
        fun getVideos(type: TvType, items: Elements): List<SearchResponse> {
            return items.map { i ->
                val href = i.attr("href")
                val img = i.selectFirst("> img")!!.attr("src").replace("/thumb/", "/big/")
                val name = i.selectFirst(".title")!!.text()
                if (type === TvType.TvSeries) {
                    TvSeriesSearchResponse(
                        name,
                        href,
                        this.name,
                        type,
                        img,
                        null,
                        null
                    )
                } else {
                    MovieSearchResponse(name, href, this.name, type, img, null)
                }
            }
        }
        return getVideos(TvType.Movie, movies) + getVideos(TvType.TvSeries, series)
    }

    override suspend fun load(url: String): LoadResponse {
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        var title = document.select("span[itemprop=title]").text()
        val data = document.select("#links").outerHtml()
        val posterUrl = document.select("#single-poster > img").attr("src")
        val year = document.select(".info > ul li")[1].text().toIntOrNull()
        val plot = document.select(".description").text()
        val episodesElements = document.select("#episode-list a[href]")
        if (episodesElements.isEmpty()) {
            return MovieLoadResponse(title, url, name, TvType.Movie, data, posterUrl, year, plot)
        }
        title = document.selectFirst(".info")?.parent()?.select("h2")?.text() ?: ""
        val episodes = episodesElements.mapNotNull { episode ->
            val e = episode.text()
            val regex = Regex("""\[s(\d{1,3})e(\d{1,3})]""").find(e) ?: return@mapNotNull null
            val eid = regex.groups
            Episode(
                episode.attr("href"),
                e.split("]")[1].trim(),
                eid[1]?.value?.toInt(),
                eid[2]?.value?.toInt(),
            )
        }.toMutableList()

        return TvSeriesLoadResponse(
            title,
            url,
            name,
            TvType.TvSeries,
            episodes,
            posterUrl,
            year,
            plot
        )
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val document = if (data.startsWith("http"))
            app.get(data).document.select("#links").first()
        else Jsoup.parse(data)

        document?.select(".link-to-video")?.apmap { item ->
            val decoded = base64Decode(item.select("a").attr("data-iframe"))
            val link = mapper.readValue<LinkElement>(decoded).src
            loadExtractor(link, null, callback)
        }
        return true
    }
}

data class LinkElement(
    @JsonProperty("src") val src: String
)



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/FmoviesToProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

class FmoviesToProvider : BflixProvider() {
    override var mainUrl = "https://fmovies.to"
    override var name = "Fmovies.to"
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/FrenchStreamProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addRating
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.extractorApis


class FrenchStreamProvider : MainAPI() {
    override var mainUrl = "https://french-stream.re"
    override var name = "French Stream"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val lang = "fr"
    override val supportedTypes = setOf(TvType.AnimeMovie, TvType.TvSeries, TvType.Movie)

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/?do=search&subaction=search&story=$query"
        val soup = app.post(link).document

        return soup.select("div.short-in.nl").map { li ->
            val href = fixUrl(li.selectFirst("a.short-poster")!!.attr("href"))
            val poster = li.selectFirst("img")?.attr("src")
            val title = li.selectFirst("> a.short-poster")!!.text().toString().replace(". ", "")
            val year = li.selectFirst(".date")?.text()?.split("-")?.get(0)?.toIntOrNull()
            if (title.contains(
                    "saison",
                    ignoreCase = true
                )
            ) {  // if saison in title ==> it's a TV serie
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.TvSeries,
                    poster,
                    year,
                    (title.split("Eps ", " ")[1]).split(" ")[0].toIntOrNull()
                )
            } else {  // it's a movie
                MovieSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Movie,
                    poster,
                    year,
                )
            }
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val soup = app.get(url).document

        val title = soup.selectFirst("h1#s-title")!!.text().toString()
        val isMovie = !title.contains("saison", ignoreCase = true)
        val description =
            soup.selectFirst("div.fdesc")!!.text().toString()
                .split("streaming", ignoreCase = true)[1].replace(" :  ", "")
        var poster = fixUrlNull(soup.selectFirst("div.fposter > img")?.attr("src"))
        val listEpisode = soup.select("div.elink")

        if (isMovie) {
            val tags = soup.select("ul.flist-col > li").getOrNull(1)
            val tagsList = tags?.select("a")
                ?.mapNotNull {   // all the tags like action, thriller ...; unused variable
                    it?.text()
                }
            return newMovieLoadResponse(title,url,TvType.Movie,url) {
                this.posterUrl = poster
                addRating(soup.select("div.fr-count > div").text())
                this.year = soup.select("ul.flist-col > li").getOrNull(2)?.text()?.toIntOrNull()
                this.tags = tagsList
                this.plot = description
                addTrailer(soup.selectFirst("div.fleft > span > a")?.attr("href"))
            }
        } else  // a tv serie
        {
            //println(listEpisode)
            //println("listeEpisode:")
            val episodeList = if ("<a" !in (listEpisode[0]).toString()) {  // check if VF is empty
                listEpisode[1]  // no vf, return vostfr
            }
            else {
                listEpisode[0] // no vostfr, return vf
            }

            //println(url)

            val episodes = episodeList.select("a").map { a ->
                val epNum = a.text().split("Episode")[1].trim().toIntOrNull()
                val epTitle = if (a.text().contains("Episode")) {
                    val type = if ("honey" in a.attr("id")) {
                        "VF"
                    } else {
                        "VOSTFR"
                    }
                    "Episode " + epNum?.toString() + " en " + type
                } else {
                    a.text()
                }
                if (poster == null) {
                    poster = a.selectFirst("div.fposter > img")?.attr("src")
                }
                Episode(
                    fixUrl(url).plus("-episodenumber:$epNum"),
                    epTitle,
                    null,
                    epNum,
                    null,  // episode Thumbnail
                    null // episode date
                )
            }
            return TvSeriesLoadResponse(
                title,
                url,
                this.name,
                TvType.TvSeries,
                episodes,
                poster,
                null,
                description,
                ShowStatus.Ongoing,
            )
        }
    }

    fun translate(
        // the website has weird naming of series for episode 2 and 1 and original version content
        episodeNumber: String,
        is_vf_available: Boolean,
    ): String {
        return if (episodeNumber == "1") {
            if (is_vf_available) {  // 1 translate differently if vf is available or not
                "FGHIJK"
            } else {
                "episode033"
            }
        } else {
            "episode" + (episodeNumber.toInt() + 32).toString()
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit,
    ): Boolean {
        val servers =
            if (data.contains("-episodenumber:"))// It's a serie:
            {
                val split =
                    data.split("-episodenumber:")  // the data contains the url and the wanted episode number (a temporary dirty fix that will last forever)
                val url = split[0]
                val wantedEpisode =
                    if (split[1] == "2") { // the episode number 2 has id of ABCDE, don't ask any question
                        "ABCDE"
                    } else {
                        "episode" + split[1]
                    }


                val soup = app.get(fixUrl(url)).document
                val div =
                    if (wantedEpisode == "episode1") {
                        "> div.tabs-sel "  // this element is added when the wanted episode is one (the place changes in the document)
                    } else {
                        ""
                    }
                val serversvf =// French version servers
                    soup.select("div#$wantedEpisode > div.selink > ul.btnss $div> li")
                        .mapNotNull { li ->  // list of all french version servers
                            val serverUrl = fixUrl(li.selectFirst("a")!!.attr("href"))
//                            val litext = li.text()
                            if (serverUrl.isNotBlank()) {
                                if (li.text().replace("&nbsp;", "").replace(" ", "").isNotBlank()) {
                                    Pair(li.text().replace(" ", ""), "vf" + fixUrl(serverUrl))
                                } else {
                                    null
                                }
                            } else {
                                null
                            }
                        }

                val translated = translate(split[1], serversvf.isNotEmpty())
                val serversvo =  // Original version servers
                    soup.select("div#$translated > div.selink > ul.btnss $div> li")
                        .mapNotNull { li ->
                            val serverUrl = fixUrlNull(li.selectFirst("a")?.attr("href"))
                            if (!serverUrl.isNullOrEmpty()) {
                                if (li.text().replace("&nbsp;", "").isNotBlank()) {
                                    Pair(li.text().replace(" ", ""), "vo" + fixUrl(serverUrl))
                                } else {
                                    null
                                }
                            } else {
                                null
                            }
                        }
                serversvf + serversvo
            } else {  // it's a movie
                val movieServers =
                    app.get(fixUrl(data)).document.select("nav#primary_nav_wrap > ul > li > ul > li > a")
                        .mapNotNull { a ->
                            val serverurl = fixUrlNull(a.attr("href")) ?: return@mapNotNull null
                            val parent = a.parents()[2]
                            val element = parent.selectFirst("a")!!.text().plus(" ")
                            if (a.text().replace("&nbsp;", "").isNotBlank()) {
                                Pair(element.plus(a.text()), fixUrl(serverurl))
                            } else {
                                null
                            }
                        }
                movieServers
            }

        servers.apmap {
            for (extractor in extractorApis) {
                if (it.first.contains(extractor.name, ignoreCase = true)) {
        //                    val name = it.first
        //                    print("true for $name")
                    extractor.getSafeUrl(it.second, it.second)?.forEach(callback)
                    break
                }
            }
        }

        return true
    }


    override suspend fun getMainPage(): HomePageResponse? {
        val document = app.get(mainUrl).document
        val docs = document.select("div.sect")
        val returnList = docs.mapNotNull {
            val epList = it.selectFirst("> div.sect-c.floats.clearfix") ?: return@mapNotNull null
            val title =
                it.selectFirst("> div.sect-t.fx-row.icon-r > div.st-left > a.st-capt")!!.text()
            val list = epList.select("> div.short")
            val isMovieType = title.contains("Films")  // if truen type is Movie
            val currentList = list.map { head ->
                val hrefItem = head.selectFirst("> div.short-in.nl > a")
                val href = fixUrl(hrefItem!!.attr("href"))
                val img = hrefItem.selectFirst("> img")
                val posterUrl = img!!.attr("src")
                val name = img.attr("> div.short-title").toString()
                return@map if (isMovieType) MovieSearchResponse(
                    name,
                    href,
                    this.name,
                    TvType.Movie,
                    posterUrl,
                    null
                ) else TvSeriesSearchResponse(
                    name,
                    href,
                    this.name,
                    TvType.TvSeries,
                    posterUrl,
                    null, null
                )
            }
            if (currentList.isNotEmpty()) {
                HomePageList(title, currentList)
            } else null
        }
        if (returnList.isEmpty()) return null
        return HomePageResponse(returnList)
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/HDMovie5.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.httpsify
import com.lagradost.cloudstream3.utils.loadExtractor
import okhttp3.Interceptor
import org.jsoup.Jsoup

class HDMovie5 : MainAPI() {
    override var mainUrl = "https://hdmovie5.tv"
    override var name = "HDMovie"
    override val lang = "hi"

    override val hasQuickSearch = true
    override val hasMainPage = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    override suspend fun getMainPage(): HomePageResponse {
        val doc = app.get(mainUrl).document.select("div.content")
        val list = mapOf(
            "Featured Movies" to "featured",
            "Updated Movies" to "normal"
        )
        return HomePageResponse(list.map { item ->
            HomePageList(item.key,
                doc.select("div.${item.value}>.item").map {
                    val data = it.select(".data")
                    val a = data.select("a")
                    MovieSearchResponse(
                        a.text(),
                        a.attr("href"),
                        this.name,
                        TvType.Movie,
                        it.select("img").attr("src"),
                        data.select("span").text().toIntOrNull()
                    )
                }
            )
        })
    }

    private data class QuickSearchResponse(
        val title: String,
        val url: String,
        val img: String,
        val extra: Extra
    ) {
        data class Extra(
            val date: String
        )
    }

    override suspend fun quickSearch(query: String): List<SearchResponse> {
        return app.get("$mainUrl/wp-json/dooplay/search/?keyword=$query&nonce=ddbde04d9c")
            .parsed<Map<String, QuickSearchResponse>>().map {
                val res = it.value
                MovieSearchResponse(
                    res.title,
                    res.url,
                    this.name,
                    TvType.Movie,
                    res.img,
                    res.extra.date.toIntOrNull()
                )
            }
    }

    override suspend fun search(query: String): List<SearchResponse> {
        return app.get("$mainUrl/?s=$query").document.select(".search-page>div.result-item").map {
            val image = it.select(".image")
            MovieSearchResponse(
                image.select("img").attr("alt"),
                image.select("a").attr("href"),
                this.name,
                TvType.Movie,
                image.select("img").attr("src"),
                it.select(".year").text().toIntOrNull()
            )
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val info = doc.select(".sheader")
        val links = doc.select("#playeroptionsul>li")
        val data = links.joinToString(",") { it.attr("data-post") }
        return MovieLoadResponse(
            info.select(".data>h1").text(),
            url,
            this.name,
            TvType.Movie,
            data,
            info.select(".poster>img").attr("src"),
            info.select(".date").text().substringAfter(", ").toIntOrNull(),
            doc.select(".wp-content>p").let { it.getOrNull(it.size - 1)?.text() },
            (doc.select("#repimdb>strong").text().toFloatOrNull()?.times(1000))?.toInt(),
            info.select(".sgeneros>a").map { it.text() },
            info.select(".runtime").text().substringBefore(" Min.").toIntOrNull(),
            null,
            doc.select("#single_relacionados>article>a").map {
                val img = it.select("img")
                MovieSearchResponse(
                    img.attr("alt"),
                    it.attr("href"),
                    this.name,
                    TvType.Movie,
                    img.attr("src")
                )
            },
            doc.select("#cast>.persons>.person").mapNotNull {
                if (it.attr("itemprop") != "director") {
                    ActorData(
                        Actor(
                            it.select("meta").attr("content"),
                            it.select("img").attr("src")
                        )
                    )
                } else null
            },
        )
    }

    private data class PlayerAjaxResponse(
        @JsonProperty("embed_url")
        val embedURL: String? = null
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        return data.split(",").apmapIndexed { index, it ->
            val html = app.post(
                "$mainUrl/wp-admin/admin-ajax.php",
                data = mapOf(
                    "action" to "doo_player_ajax",
                    "post" to it,
                    "nume" to "${index + 1}",
                    "type" to "movie"
                )
            ).parsed<PlayerAjaxResponse>().embedURL ?: return@apmapIndexed false
            val doc = Jsoup.parse(html)
            val link = doc.select("iframe").attr("src")
            loadExtractor(httpsify(link), "$mainUrl/",callback)
        }.contains(true)
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/HDMProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import org.jsoup.Jsoup

class HDMProvider : MainAPI() {
    override var name = "HD Movies"
    override var mainUrl = "https://hdm.to"
    override val hasMainPage = true

    override val supportedTypes = setOf(
        TvType.Movie,
    )

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/search/$query"
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val items = document.select("div.col-md-2 > article > a")
        if (items.isEmpty()) return emptyList()

        return items.map { i ->
            val href = i.attr("href")
            val data = i.selectFirst("> div.item")!!
            val img = data.selectFirst("> img")!!.attr("src")
            val name = data.selectFirst("> div.movie-details")!!.text()
            MovieSearchResponse(name, href, this.name, TvType.Movie, img, null)
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        if (data == "") return false
        val slug = Regex(".*/(.*?)\\.mp4").find(data)?.groupValues?.get(1) ?: return false
        val response = app.get(data).text
        val key = Regex("playlist\\.m3u8(.*?)\"").find(response)?.groupValues?.get(1) ?: return false
        callback.invoke(
            ExtractorLink(
                this.name,
                this.name,
                "https://hls.1o.to/vod/$slug/playlist.m3u8$key",
                "",
                Qualities.P720.value,
                true
            )
        )
        return true
    }

    override suspend fun load(url: String): LoadResponse? {
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val title = document.selectFirst("h2.movieTitle")?.text() ?: throw ErrorLoadingException("No Data Found")
        val poster = document.selectFirst("div.post-thumbnail > img")!!.attr("src")
        val descript = document.selectFirst("div.synopsis > p")!!.text()
        val year = document.select("div.movieInfoAll > div.row > div.col-md-6").getOrNull(1)?.selectFirst("> p > a")?.text()
            ?.toIntOrNull()
        val data = "src/player/\\?v=(.*?)\"".toRegex().find(response)?.groupValues?.get(1) ?: return null

        return MovieLoadResponse(
            title, url, this.name, TvType.Movie,
            "$mainUrl/src/player/?v=$data", poster, year, descript, null
        )
    }

    override suspend fun getMainPage(): HomePageResponse {
        val html = app.get(mainUrl, timeout = 25).text
        val document = Jsoup.parse(html)
        val all = ArrayList<HomePageList>()

        val mainbody = document.getElementsByTag("body")
            ?.select("div.homeContentOuter > section > div.container > div")
        // Fetch row title
        val inner = mainbody?.select("div.col-md-2.col-sm-2.mrgb")
        val title = mainbody?.select("div > div")?.firstOrNull()?.select("div.title.titleBar")?.text() ?: "Unnamed Row"
        // Fetch list of items and map
        if (inner != null) {
            val elements: List<SearchResponse> = inner.map {

                val aa = it.select("a").firstOrNull()
                val item = aa?.select("div.item")
                val href = aa?.attr("href")
                val link = when (href != null) {
                    true -> fixUrl(href)
                    false -> ""
                }
                val name = item?.select("div.movie-details")?.text() ?: "<No Title>"
                var image = item?.select("img")?.get(1)?.attr("src") ?: ""
                val year = null

                MovieSearchResponse(
                    name,
                    link,
                    this.name,
                    TvType.Movie,
                    image,
                    year,
                    null,
                )
            }

            all.add(
                HomePageList(
                    title, elements
                )
            )
        }
        return HomePageResponse(all)
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/IHaveNoTvProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup
import java.net.URLEncoder

class IHaveNoTvProvider : MainAPI() {
    override var mainUrl = "https://ihavenotv.com"
    override var name = "I Have No TV"
    override val hasQuickSearch = false
    override val hasMainPage = true

    override val supportedTypes = setOf(TvType.Documentary)

    override suspend fun getMainPage(): HomePageResponse {
        // Uhh, I am too lazy to scrape the "latest documentaries" and "recommended documentaries",
        // so I am just scraping 3 random categories
        val allCategories = listOf(
            "astronomy",
            "brain",
            "creativity",
            "design",
            "economics",
            "environment",
            "health",
            "history",
            "lifehack",
            "math",
            "music",
            "nature",
            "people",
            "physics",
            "science",
            "technology",
            "travel"
        )

        val categories = allCategories.asSequence().shuffled().take(3)
            .toList()  // randomly get 3 categories, because there are too many

        val items = ArrayList<HomePageList>()

        categories.forEach { cat ->
            val link = "$mainUrl/category/$cat"
            val html = app.get(link).text
            val soup = Jsoup.parse(html)

            val searchResults: MutableMap<String, SearchResponse> = mutableMapOf()
            soup.select(".episodesDiv .episode").forEach { res ->
                val poster = res.selectFirst("img")?.attr("src")
                val aTag = if (res.html().contains("/series/")) {
                    res.selectFirst(".episodeMeta > a")
                } else {
                    res.selectFirst("a[href][title]")
                }
                val year = Regex("""â€¢?\s+(\d{4})\s+â€¢""").find(
                    res.selectFirst(".episodeMeta")!!.text()
                )?.destructured?.component1()?.toIntOrNull()

                val title = aTag!!.attr("title")
                val href = fixUrl(aTag.attr("href"))
                searchResults[href] = TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Documentary,//if (href.contains("/series/")) TvType.TvSeries else TvType.Movie,
                    poster,
                    year,
                    null
                )
            }
            items.add(
                HomePageList(
                    capitalizeString(cat),
                    ArrayList(searchResults.values).subList(0, 5)
                )
            ) // just 5 results per category, app crashes when they are too many
        }

        return HomePageResponse(items)
    }

    override suspend fun search(query: String): ArrayList<SearchResponse> {
        val url = """$mainUrl/search/${URLEncoder.encode(query, "UTF-8")}"""
        val response = app.get(url).text
        val soup = Jsoup.parse(response)

        val searchResults: MutableMap<String, SearchResponse> = mutableMapOf()

        soup.select(".episodesDiv .episode").forEach { res ->
            val poster = res.selectFirst("img")?.attr("src")
            val aTag = if (res.html().contains("/series/")) {
                res.selectFirst(".episodeMeta > a")
            } else {
                res.selectFirst("a[href][title]")
            }
            val year =
                Regex("""â€¢?\s+(\d{4})\s+â€¢""").find(
                    res.selectFirst(".episodeMeta")!!.text()
                )?.destructured?.component1()
                    ?.toIntOrNull()

            val title = aTag!!.attr("title")
            val href = fixUrl(aTag.attr("href"))
            searchResults[href] = TvSeriesSearchResponse(
                title,
                href,
                this.name,
                TvType.Documentary, //if (href.contains("/series/")) TvType.TvSeries else TvType.Movie,
                poster,
                year,
                null
            )
        }

        return ArrayList(searchResults.values)
    }

    override suspend fun load(url: String): LoadResponse {
        val isSeries = url.contains("/series/")
        val html = app.get(url).text
        val soup = Jsoup.parse(html)

        val container = soup.selectFirst(".container-fluid h1")?.parent()
        val title = if (isSeries) {
            container?.selectFirst("h1")?.text()?.split("â€¢")?.firstOrNull().toString()
        } else soup.selectFirst(".videoDetails")!!.selectFirst("strong")?.text().toString()
        val description = if (isSeries) {
            container?.selectFirst("p")?.text()
        } else {
            soup.selectFirst(".videoDetails > p")?.text()
        }

        var year: Int? = null
        val categories: MutableSet<String> = mutableSetOf()

        val episodes = if (isSeries) {
            container?.select(".episode")?.map { ep ->
                val thumb = ep.selectFirst("img")!!.attr("src")

                val epLink = fixUrl(ep.selectFirst("a[title]")!!.attr("href"))
                val (season, epNum) = if (ep.selectFirst(".episodeMeta > strong") != null &&
                    ep.selectFirst(".episodeMeta > strong")!!.html().contains("S")
                ) {
                    val split = ep.selectFirst(".episodeMeta > strong")?.text()?.split("E")
                    Pair(
                        split?.firstOrNull()?.replace("S", "")?.toIntOrNull(),
                        split?.get(1)?.toIntOrNull()
                    )
                } else Pair<Int?, Int?>(null, null)

                year = Regex("""â€¢?\s+(\d{4})\s+â€¢""").find(
                    ep.selectFirst(".episodeMeta")!!.text()
                )?.destructured?.component1()?.toIntOrNull()

                categories.addAll(
                    ep.select(".episodeMeta > a[href*=\"/category/\"]").map { it.text().trim() })

                newEpisode(epLink) {
                    this.name = ep.selectFirst("a[title]")!!.attr("title")
                    this.season = season
                    this.episode = epNum
                    this.posterUrl = thumb
                    this.description = ep.selectFirst(".episodeSynopsis")?.text()
                }
            }
        } else {
            listOf(MovieLoadResponse(
                title,
                url,
                this.name,
                TvType.Movie,
                url,
                soup.selectFirst("[rel=\"image_src\"]")!!.attr("href"),
                Regex("""â€¢?\s+(\d{4})\s+â€¢""").find(
                    soup.selectFirst(".videoDetails")!!.text()
                )?.destructured?.component1()?.toIntOrNull(),
                description,
                null,
                soup.selectFirst(".videoDetails")!!.select("a[href*=\"/category/\"]")
                    .map { it.text().trim() }
            ))
        }

        val poster = episodes?.firstOrNull().let {
            if (isSeries && it != null) (it as Episode).posterUrl
            else null
        }

        return if (isSeries) TvSeriesLoadResponse(
            title,
            url,
            this.name,
            TvType.TvSeries,
            episodes!!.map { it as Episode },
            poster,
            year,
            description,
            null,
            null,
            categories.toList()
        ) else (episodes?.first() as MovieLoadResponse)
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val html = app.get(data).text
        val soup = Jsoup.parse(html)

        val iframe = soup.selectFirst("#videoWrap iframe")
        if (iframe != null) {
            loadExtractor(iframe.attr("src"), null, callback)
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/KdramaHoodProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.extractors.XStreamCdn
import com.lagradost.cloudstream3.extractors.helper.AsianEmbedHelper
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup

class KdramaHoodProvider : MainAPI() {
    override var mainUrl = "https://kdramahood.com"
    override var name = "KDramaHood"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val hasChromecastSupport = false
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(TvType.AsianDrama)

    private data class ResponseDatas(
        @JsonProperty("label") val label: String,
        @JsonProperty("file") val file: String
    )

    override suspend fun getMainPage(): HomePageResponse {
        val doc = app.get("$mainUrl/home2").document
        val home = ArrayList<HomePageList>()

        // Hardcoded homepage cause of site implementation
        // Recently added
        val recentlyInner = doc.selectFirst("div.peliculas")
        val recentlyAddedTitle = recentlyInner!!.selectFirst("h1")?.text() ?: "Recently Added"
        val recentlyAdded = recentlyInner.select("div.item_2.items > div.fit.item").mapNotNull {
            val innerA = it.select("div.image > a") ?: return@mapNotNull null
            val link = fixUrlNull(innerA.attr("href")) ?: return@mapNotNull null
            val image = fixUrlNull(innerA.select("img").attr("src"))

            val innerData = it.selectFirst("div.data")
            val title = innerData!!.selectFirst("h1")?.text() ?: return@mapNotNull null
            val year = try {
                val yearText = innerData.selectFirst("span.titulo_o")
                    ?.text()?.takeLast(11)?.trim()?.take(4) ?: ""
                //Log.i(this.name, "Result => (yearText) $yearText")
                val rex = Regex("\\((\\d+)")
                //Log.i(this.name, "Result => (rex value) ${rex.find(yearText)?.value}")
                rex.find(yearText)?.value?.toIntOrNull()
            } catch (e: Exception) { null }

            MovieSearchResponse(
                name = title,
                url = link,
                apiName = this.name,
                type = TvType.TvSeries,
                posterUrl = image,
                year = year
            )
        }.distinctBy { it.url } ?: listOf()
        home.add(HomePageList(recentlyAddedTitle, recentlyAdded))
        return HomePageResponse(home.filter { it.list.isNotEmpty() })
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=$query"
        val html = app.get(url).document
        val document = html.getElementsByTag("body")
                .select("div.item_1.items > div.item") ?: return listOf()

        return document.mapNotNull {
            if (it == null) {
                return@mapNotNull null
            }
            val innerA = it.selectFirst("div.boxinfo > a") ?: return@mapNotNull null
            val link = fixUrlNull(innerA.attr("href")) ?: return@mapNotNull null
            val title = innerA.select("span.tt")?.text() ?: return@mapNotNull null

            val year = it.selectFirst("span.year")?.text()?.toIntOrNull()
            val image = fixUrlNull(it.selectFirst("div.image > img")?.attr("src"))

            MovieSearchResponse(
                name = title,
                url = link,
                apiName = this.name,
                type = TvType.Movie,
                posterUrl = image,
                year = year
            )
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val inner = doc.selectFirst("div.central")

        // Video details
        val title = inner?.selectFirst("h1")?.text() ?: ""
        val poster = fixUrlNull(doc.selectFirst("meta[property=og:image]")?.attr("content")) ?: ""
        //Log.i(this.name, "Result => (poster) ${poster}")
        val info = inner!!.selectFirst("div#info")
        val descript = inner.selectFirst("div.contenidotv > div > p")?.text()
        val year = try {
            val startLink = "https://kdramahood.com/drama-release-year/"
            var res: Int? = null
            info?.select("div.metadatac")?.forEach {
                if (res != null) { return@forEach }
                if (it == null) { return@forEach }
                val yearLink = it.select("a").attr("href") ?: return@forEach
                if (yearLink.startsWith(startLink)) {
                    res = yearLink.substring(startLink.length).replace("/", "").toIntOrNull()
                }
            }
            res
        } catch (e: Exception) { null }

        val recs = doc.select("div.sidebartv > div.tvitemrel").mapNotNull {
            val a = it?.select("a") ?: return@mapNotNull null
            val aUrl = fixUrlNull(a.attr("href")) ?: return@mapNotNull null
            val aImg = a.select("img")
            val aCover = fixUrlNull(aImg.attr("src")) ?: fixUrlNull(aImg.attr("data-src"))
            val aNameYear = a.select("div.datatvrel") ?: return@mapNotNull null
            val aName = aNameYear.select("h4").text() ?: aImg.attr("alt") ?: return@mapNotNull null
            val aYear = aName.trim().takeLast(5).removeSuffix(")").toIntOrNull()
            MovieSearchResponse(
                url = aUrl,
                name = aName,
                type = TvType.Movie,
                posterUrl = aCover,
                year = aYear,
                apiName = this.name
            )
        }

        // Episodes Links
        val episodeList = inner.select("ul.episodios > li")?.mapNotNull { ep ->
            //Log.i(this.name, "Result => (ep) ${ep}")
            val listOfLinks = mutableListOf<String>()
            val count = ep.select("div.numerando")?.text()?.toIntOrNull() ?: 0
            val innerA = ep.select("div.episodiotitle > a") ?: return@mapNotNull null
            //Log.i(this.name, "Result => (innerA) ${innerA}")
            val epLink = fixUrlNull(innerA.attr("href")) ?: return@mapNotNull null
            //Log.i(this.name, "Result => (epLink) ${epLink}")
            if (epLink.isNotBlank()) {
                // Fetch video links
                val epVidLinkEl = app.get(epLink, referer = mainUrl).document
                val epLinksContent = epVidLinkEl.selectFirst("div.player_nav > script")?.html()
                    ?.replace("ifr_target.src =", "<div>")
                    ?.replace("';", "</div>")
                //Log.i(this.name, "Result => (epLinksContent) $epLinksContent")
                if (!epLinksContent.isNullOrEmpty()) {
                    //Log.i(this.name, "Result => (epLinksContent) ${Jsoup.parse(epLinksContent)?.select("div")}")
                    Jsoup.parse(epLinksContent)?.select("div")?.forEach { em ->
                        val href = em?.html()?.trim()?.removePrefix("'") ?: return@forEach
                        //Log.i(this.name, "Result => (ep#$count link) $href")
                        if (href.isNotBlank()) {
                            listOfLinks.add(fixUrl(href))
                        }
                    }
                }
                //Fetch default source and subtitles
                epVidLinkEl.select("div.embed2")?.forEach { defsrc ->
                    if (defsrc == null) { return@forEach }
                    val scriptstring = defsrc.toString()
                    if (scriptstring.contains("sources: [{")) {
                        "(?<=playerInstance2.setup\\()([\\s\\S]*?)(?=\\);)".toRegex().find(scriptstring)?.value?.let { itemjs ->
                            listOfLinks.add("$mainUrl$itemjs")
                        }
                    }
                }
            }
            Episode(
                name = null,
                season = null,
                episode = count,
                data = listOfLinks.distinct().toJson(),
                posterUrl = poster,
                date = null
            )
        }

        //If there's only 1 episode, consider it a movie.
        if (episodeList?.size == 1) {
            return MovieLoadResponse(
                name = title,
                url = url,
                apiName = this.name,
                type = TvType.Movie,
                dataUrl = episodeList[0].data,
                posterUrl = poster,
                year = year,
                plot = descript,
                recommendations = recs
            )
        }
        return TvSeriesLoadResponse(
            name = title,
            url = url,
            apiName = this.name,
            type = TvType.AsianDrama,
            episodes = episodeList?.reversed() ?: emptyList(),
            posterUrl = poster,
            year = year,
            plot = descript,
            recommendations = recs
        )
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        var count = 0
        parseJson<List<String>>(data).apmap { item ->
            if (item.isNotBlank()) {
                count++
                if (item.startsWith(mainUrl)) {
                    val text = item.substring(mainUrl.length)
                    //Log.i(this.name, "Result => (text) $text")
                    //Find video files
                    try {
                        "(?<=sources: )([\\s\\S]*?)(?<=])".toRegex().find(text)?.value?.let { vid ->
                            parseJson<List<ResponseDatas>>(vid).forEach { src ->
                                //Log.i(this.name, "Result => (src) ${src.toJson()}")
                                callback(
                                    ExtractorLink(
                                        name = name,
                                        url = src.file,
                                        quality = getQualityFromName(src.label),
                                        referer = mainUrl,
                                        source = name
                                    )
                                )
                            }
                        }
                    } catch (e: Exception) {
                        logError(e)
                    }
                    //Find subtitles
                    try {
                        "(?<=tracks: )([\\s\\S]*?)(?<=])".toRegex().find(text)?.value?.let { sub ->
                            val subtext = sub.replace("file:", "\"file\":")
                                .replace("label:", "\"label\":")
                                .replace("kind:", "\"kind\":")
                            parseJson<List<ResponseDatas>>(subtext).forEach { src ->
                                //Log.i(this.name, "Result => (sub) ${src.toJson()}")
                                subtitleCallback(
                                    SubtitleFile(
                                        lang = src.label,
                                        url = src.file
                                    )
                                )
                            }
                        }
                    } catch (e: Exception) {
                        logError(e)
                    }

                } else {
                    val url = fixUrl(item.trim())
                    //Log.i(this.name, "Result => (url) $url")
                    when {
                        url.startsWith("https://asianembed.io") -> {
                            AsianEmbedHelper.getUrls(url, callback)
                        }
                        url.startsWith("https://embedsito.com") -> {
                            val extractor = XStreamCdn()
                            extractor.domainUrl = "embedsito.com"
                            extractor.getUrl(url).forEach { link ->
                                callback.invoke(link)
                            }
                        }
                        else -> {
                            loadExtractor(url, mainUrl, callback)
                        }
                    }
                }
            }
        }
        return count > 0
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/LayarKaca21Provider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup
import org.jsoup.nodes.Element
import java.util.*

class LayarKacaProvider : MainAPI() {
    override var mainUrl = "https://149.56.24.226"
    override var name = "LayarKaca"
    override val hasMainPage = true
    override val lang = "id"
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
        TvType.AsianDrama
    )

    override suspend fun getMainPage(): HomePageResponse {
        val document = app.get(mainUrl).document

        val homePageList = ArrayList<HomePageList>()

        document.select("section.hot-block,section#newseries").forEach { block ->
            val header = block.select("footer.load-more > a").text().trim()
            val items = block.select("div.slider-item").mapNotNull {
                it.toTopSearchResult()
            }
            if (items.isNotEmpty()) homePageList.add(HomePageList(header, items))
        }

        document.select("div#newest").forEach { block ->
            val header = block.select(".header > h2 > a").text()
            val items = block.select("div.item").mapNotNull {
                it.toMainSearchResult()
            }
            if (items.isNotEmpty()) homePageList.add(HomePageList(header, items))
        }

        document.select("section#recomendation,section#populer,section#seriespopuler")
            .forEach { block ->
                val header = block.select(".header > h2 > a").text()
                val items = block.select("div.item").mapNotNull {
                    it.toBottomSearchResult()
                }
                if (items.isNotEmpty()) homePageList.add(HomePageList(header, items))
            }

        return HomePageResponse(homePageList)
    }

    private fun Element.toTopSearchResult(): SearchResponse {
        val title = this.selectFirst("h3.caption")!!.text().trim()
        val href = this.selectFirst("a")!!.attr("href")
        val posterUrl = fixUrl(this.selectFirst("a > img")?.attr("src").toString())
        val type =
            if (this.select("div.quality-top").isNotEmpty()) TvType.Movie else TvType.TvSeries
        return if (type == TvType.Movie) {
            val quality = getQualityFromString(this.select("div.quality-top").text().trim())
            return newMovieSearchResponse(title, href, TvType.Movie) {
                this.posterUrl = posterUrl
                this.quality = quality
            }
        } else {
            val episode = this.select("div.last-episode > span").text().toIntOrNull()
            newAnimeSearchResponse(title, href, TvType.TvSeries) {
                this.posterUrl = posterUrl
                addDubStatus(dubExist = false, subExist = true, subEpisodes = episode)
            }
        }

    }

    private fun Element.toMainSearchResult(): SearchResponse {
        val title = this.selectFirst("h3.caption")!!.text().trim()
        val href = this.selectFirst("a")!!.attr("href")
        val posterUrl = fixUrl(this.select("a > img").attr("src").toString())
        val quality = getQualityFromString(this.select("div.quality-top").text().trim())
        return newMovieSearchResponse(title, href, TvType.Movie) {
            this.posterUrl = posterUrl
            this.quality = quality
        }

    }

    private fun Element.toBottomSearchResult(): SearchResponse {
        val title = this.selectFirst("h1.grid-title > a")!!.ownText().trim()
        val href = this.selectFirst("h1.grid-title > a")!!.attr("href")
        val posterUrl = fixUrl(this.selectFirst(".grid-poster > a > img")?.attr("src").toString())
        val type = if (this.select("div.quality").isNotEmpty()) TvType.Movie else TvType.TvSeries
        return if (type == TvType.Movie) {
            val quality = getQualityFromString(this.select("div.quality").text().trim())
            return newMovieSearchResponse(title, href, TvType.Movie) {
                this.posterUrl = posterUrl
                this.quality = quality
            }
        } else {
            newTvSeriesSearchResponse(title, href, TvType.TvSeries) {
                this.posterUrl = posterUrl
            }
        }

    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/?s=$query"
        val document = app.get(link).document

        return document.select("div.search-item").map {
            val title = it.selectFirst("h2 > a")!!.text().trim()
            val href = it.selectFirst("h2 > a")!!.attr("href")
            val posterUrl = fixUrl(it.selectFirst("img.img-thumbnail")?.attr("src").toString())
            newTvSeriesSearchResponse(title, href, TvType.TvSeries) {
                this.posterUrl = posterUrl
            }
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val title = document.selectFirst("li.last > span[itemprop=name]")?.text()?.trim().toString()
        val poster = fixUrl(document.select("img.img-thumbnail").attr("src").toString())
        val tags = document.select("div.content > div:nth-child(5) > h3 > a").map { it.text() }

        val year = Regex("\\d, (\\d+)").find(
            document.select("div.content > div:nth-child(7) > h3").text().trim()
        )?.groupValues?.get(1).toString().toIntOrNull()
        val tvType = if (document.select("div.serial-wrapper")
                .isNotEmpty()
        ) TvType.TvSeries else TvType.Movie
        val description = document.select("div.content > blockquote").text().trim()
        val rating =
            document.selectFirst("div.content > div:nth-child(6) > h3")?.text()?.toRatingInt()
        val actors = document.select("div.col-xs-9.content > div:nth-child(3) > h3 > a").map {
            ActorData(
                Actor(
                    it.text()
                )
            )
        }

        val recommendations = document.select("div.row.item-media").map {
            val recName = it.selectFirst("h3")?.text()?.trim().toString()
            val recHref = it.selectFirst(".content-media > a")!!.attr("href")
            val recPosterUrl = fixUrl(it.selectFirst(".poster-media > a > img")?.attr("src").toString())
            newTvSeriesSearchResponse(recName, recHref, TvType.TvSeries) {
                this.posterUrl = recPosterUrl
            }
        }

        return if (tvType == TvType.TvSeries) {
            val episodes = document.select("div.episode-list > a:matches(\\d+)").map {
                val href = fixUrl(it.attr("href"))
                val episode = it.text().toIntOrNull()
                val season =
                    it.attr("href").substringAfter("season-").substringBefore("-").toIntOrNull()
                Episode(
                    href,
                    "Episode $episode",
                    season,
                    episode,
                )
            }.reversed()
            newTvSeriesLoadResponse(title, url, TvType.TvSeries, episodes) {
                this.posterUrl = poster
                this.year = year
                this.plot = description
                this.tags = tags
                this.rating = rating
                this.actors = actors
                this.recommendations = recommendations
            }
        }
        else {
            newMovieLoadResponse(title, url, TvType.Movie, url) {
                this.posterUrl = poster
                this.year = year
                this.plot = description
                this.tags = tags
                this.rating = rating
                this.actors = actors
                this.recommendations = recommendations
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {

        val document = app.get(data).document

        val sources = if(data.contains("-episode-")) {
            document.select("script").mapNotNull { script ->
                if(script.data().contains("var data =")) {
                    val scriptData = script.toString().substringAfter("var data = '").substringBefore("';")
                    Jsoup.parse(scriptData).select("li").map {
                        fixUrl(it.select("a").attr("href"))
                    }
                } else {
                    null
                }
            }[0]
        } else {
            document.select("ul#loadProviders > li").map {
                fixUrl(it.select("a").attr("href"))
            }
        }

        sources.apmap {
            loadExtractor(it, data, callback)
        }

        return true
    }


}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/LookMovieProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.unixTime
import com.lagradost.cloudstream3.extractors.M3u8Manifest
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import org.jsoup.Jsoup

//BE AWARE THAT weboas.is is a clone of lookmovie
class LookMovieProvider : MainAPI() {
    override val hasQuickSearch = true
    override var name = "LookMovie"
    override var mainUrl = "https://lookmovie.io"

    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    data class LookMovieSearchResult(
        @JsonProperty("backdrop") val backdrop: String?,
        @JsonProperty("imdb_rating") val imdb_rating: String,
        @JsonProperty("poster") val poster: String?,
        @JsonProperty("slug") val slug: String,
        @JsonProperty("title") val title: String,
        @JsonProperty("year") val year: String?,
        //  @JsonProperty("flag_quality") val flag_quality: Int?,
    )

    data class LookMovieTokenRoot(
        @JsonProperty("data") val data: LookMovieTokenResult?,
        @JsonProperty("success") val success: Boolean,
    )

    data class LookMovieTokenResult(
        @JsonProperty("accessToken") val accessToken: String,
        @JsonProperty("subtitles") val subtitles: List<LookMovieTokenSubtitle>?,
    )

    data class LookMovieTokenSubtitle(
        @JsonProperty("language") val language: String,
        @JsonProperty("source") val source: String?,
        //@JsonProperty("source_id") val source_id: String,
        //@JsonProperty("kind") val kind: String,
        //@JsonProperty("id") val id: String,
        @JsonProperty("file") val file: String,
    )

    data class LookMovieSearchResultRoot(
        // @JsonProperty("per_page") val per_page: Int?,
        // @JsonProperty("total") val total: Int?,
        @JsonProperty("result") val result: List<LookMovieSearchResult>?,
    )

    data class LookMovieEpisode(
        @JsonProperty("title") var title: String,
        @JsonProperty("index") var index: String,
        @JsonProperty("episode") var episode: String,
        @JsonProperty("id_episode") var idEpisode: Int,
        @JsonProperty("season") var season: String,
    )

    override suspend fun quickSearch(query: String): List<SearchResponse> {
        val movieUrl = "$mainUrl/api/v1/movies/search/?q=$query"
        val movieResponse = app.get(movieUrl).text
        val movies = mapper.readValue<LookMovieSearchResultRoot>(movieResponse).result

        val showsUrl = "$mainUrl/api/v1/shows/search/?q=$query"
        val showsResponse = app.get(showsUrl).text
        val shows = mapper.readValue<LookMovieSearchResultRoot>(showsResponse).result

        val returnValue = ArrayList<SearchResponse>()
        if (!movies.isNullOrEmpty()) {
            for (m in movies) {
                val url = "$mainUrl/movies/view/${m.slug}"
                returnValue.add(
                    MovieSearchResponse(
                        m.title,
                        url,
                        this.name,
                        TvType.Movie,
                        m.poster ?: m.backdrop,
                        m.year?.toIntOrNull()
                    )
                )
            }
        }

        if (!shows.isNullOrEmpty()) {
            for (s in shows) {
                val url = "$mainUrl/shows/view/${s.slug}"
                returnValue.add(
                    MovieSearchResponse(
                        s.title,
                        url,
                        this.name,
                        TvType.TvSeries,
                        s.poster ?: s.backdrop,
                        s.year?.toIntOrNull()
                    )
                )
            }
        }

        return returnValue
    }

    override suspend fun search(query: String): List<SearchResponse> {
        suspend fun search(query: String, isMovie: Boolean): List<SearchResponse> {
            val url = "$mainUrl/${if (isMovie) "movies" else "shows"}/search/?q=$query"
            val response = app.get(url).text
            val document = Jsoup.parse(response)

            val items = document.select("div.flex-wrap-movielist > div.movie-item-style-1")
            return items.map { item ->
                val titleHolder = item.selectFirst("> div.mv-item-infor > h6 > a")
                val href = fixUrl(titleHolder!!.attr("href"))
                val name = titleHolder.text()
                val posterHolder = item.selectFirst("> div.image__placeholder > a")
                val poster = posterHolder!!.selectFirst("> img")?.attr("data-src")
                val year = posterHolder.selectFirst("> p.year")?.text()?.toIntOrNull()
                if (isMovie) {
                    MovieSearchResponse(
                        name, href, this.name, TvType.Movie, poster, year
                    )
                } else
                    TvSeriesSearchResponse(
                        name, href, this.name, TvType.TvSeries, poster, year, null
                    )
            }
        }

        val movieList = search(query, true).toMutableList()
        val seriesList = search(query, false)
        movieList.addAll(seriesList)
        return movieList
    }

    data class LookMovieLinkLoad(val url: String, val extraUrl: String, val isMovie: Boolean)

    private fun addSubtitles(
        subs: List<LookMovieTokenSubtitle>?,
        subtitleCallback: (SubtitleFile) -> Unit
    ) {
        if (subs == null) return
        subs.forEach {
            if (it.file.endsWith(".vtt"))
                subtitleCallback.invoke(SubtitleFile(it.language, fixUrl(it.file)))
        }
    }

    private suspend fun loadCurrentLinks(url: String, callback: (ExtractorLink) -> Unit) {
        val response = app.get(url.replace("\$unixtime", unixTime.toString())).text
        M3u8Manifest.extractLinks(response).forEach {
            callback.invoke(
                ExtractorLink(
                    this.name,
                    "${this.name} - ${it.second}",
                    fixUrl(it.first),
                    "",
                    getQualityFromName(it.second),
                    true
                )
            )
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val localData: LookMovieLinkLoad = mapper.readValue(data)

        if (localData.isMovie) {
            val tokenResponse = app.get(localData.url).text
            val root = mapper.readValue<LookMovieTokenRoot>(tokenResponse)
            val accessToken = root.data?.accessToken ?: return false
            addSubtitles(root.data.subtitles, subtitleCallback)
            loadCurrentLinks(localData.extraUrl.replace("\$accessToken", accessToken), callback)
            return true
        } else {
            loadCurrentLinks(localData.url, callback)
            val subResponse = app.get(localData.extraUrl).text
            val subs = mapper.readValue<List<LookMovieTokenSubtitle>>(subResponse)
            addSubtitles(subs, subtitleCallback)
        }
        return true
    }

    override suspend fun load(url: String): LoadResponse? {
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val isMovie = url.contains("/movies/")

        val watchHeader = document.selectFirst("div.watch-heading")
        val nameHeader = watchHeader!!.selectFirst("> h1.bd-hd")
        val year = nameHeader!!.selectFirst("> span")?.text()?.toIntOrNull()
        val title = nameHeader.ownText()
        val rating =
            parseRating(watchHeader.selectFirst("> div.movie-rate > div.rate > p > span")!!.text())
        val imgElement = document.selectFirst("div.movie-img > p.movie__poster")
        val img = imgElement?.attr("style")
        var poster = if (img.isNullOrEmpty()) null else "url\\((.*?)\\)".toRegex()
            .find(img)?.groupValues?.get(1)
        if (poster.isNullOrEmpty()) poster = imgElement?.attr("data-background-image")
        val descript = document.selectFirst("p.description-short")!!.text()
        val id = "${if (isMovie) "id_movie" else "id_show"}:(.*?),".toRegex()
            .find(response)?.groupValues?.get(1)
            ?.replace(" ", "")
            ?: return null
        val realSlug = url.replace("$mainUrl/${if (isMovie) "movies" else "shows"}/view/", "")
        val realUrl =
            "$mainUrl/api/v1/security/${if (isMovie) "movie" else "show"}-access?${if (isMovie) "id_movie=$id" else "slug=$realSlug"}&token=1&sk=&step=1"

        if (isMovie) {
            val localData =
                LookMovieLinkLoad(
                    realUrl,
                    "$mainUrl/manifests/movies/json/$id/\$unixtime/\$accessToken/master.m3u8",
                    true
                ).toJson()

            return MovieLoadResponse(
                title,
                url,
                this.name,
                TvType.Movie,
                localData,
                poster,
                year,
                descript,
                rating
            )
        } else {
            val tokenResponse = app.get(realUrl).text
            val root = mapper.readValue<LookMovieTokenRoot>(tokenResponse)
            val accessToken = root.data?.accessToken ?: return null

            val window =
                "window\\['show_storage'] =((.|\\n)*?<)".toRegex().find(response)?.groupValues?.get(
                    1
                )
                    ?: return null
            // val id = "id_show:(.*?),".toRegex().find(response.text)?.groupValues?.get(1) ?: return null
            val season = "seasons:.*\\[((.|\\n)*?)]".toRegex().find(window)?.groupValues?.get(1)
                ?: return null

            fun String.fixSeasonJson(replace: String): String {
                return this.replace("$replace:", "\"$replace\":")
            }

            val json = season
                .replace("\'", "\"")
                .fixSeasonJson("title")
                .fixSeasonJson("id_episode")
                .fixSeasonJson("episode")
                .fixSeasonJson("index")
                .fixSeasonJson("season")
            val realJson = "[" + json.substring(0, json.lastIndexOf(',')) + "]"

            val episodes = mapper.readValue<List<LookMovieEpisode>>(realJson).map {
                val localData =
                    LookMovieLinkLoad(
                        "$mainUrl/manifests/shows/json/$accessToken/\$unixtime/${it.idEpisode}/master.m3u8",
                        "https://lookmovie.io/api/v1/shows/episode-subtitles/?id_episode=${it.idEpisode}",
                        false
                    ).toJson()


                Episode(
                    localData,
                    it.title,
                    it.season.toIntOrNull(),
                    it.episode.toIntOrNull(),
                )
            }.toList()

            return TvSeriesLoadResponse(
                title,
                url,
                this.name,
                TvType.TvSeries,
                ArrayList(episodes),
                poster,
                year,
                descript,
                null,
                rating
            )
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/MeloMovieProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addImdbUrl
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import org.jsoup.Jsoup
import org.jsoup.nodes.Element

class MeloMovieProvider : MainAPI() {
    override var name = "MeloMovie"
    override var mainUrl = "https://melomovie.com"
    override val instantLinkLoading = true
    override val hasQuickSearch = true
    override val hasChromecastSupport = false // MKV FILES CANT BE PLAYED ON A CHROMECAST

    data class MeloMovieSearchResult(
        @JsonProperty("id") val id: Int,
        @JsonProperty("imdb_code") val imdbId: String,
        @JsonProperty("title") val title: String,
        @JsonProperty("type") val type: Int, // 1 = MOVIE, 2 = TV-SERIES
        @JsonProperty("year") val year: Int?, // 1 = MOVIE, 2 = TV-SERIES
        //"mppa" for tags
    )

    data class MeloMovieLink(
        @JsonProperty("name") val name: String,
        @JsonProperty("link") val link: String
    )

    override suspend fun quickSearch(query: String): List<SearchResponse> {
        return search(query)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/movie/search/?name=$query"
        val returnValue: ArrayList<SearchResponse> = ArrayList()
        val response = app.get(url).text
        val mapped = response.let { mapper.readValue<List<MeloMovieSearchResult>>(it) }
        if (mapped.isEmpty()) return returnValue

        for (i in mapped) {
            val currentUrl = "$mainUrl/movie/${i.id}"
            val currentPoster = "$mainUrl/assets/images/poster/${i.imdbId}.jpg"
            if (i.type == 2) { // TV-SERIES
                returnValue.add(
                    TvSeriesSearchResponse(
                        i.title,
                        currentUrl,
                        this.name,
                        TvType.TvSeries,
                        currentPoster,
                        i.year,
                        null
                    )
                )
            } else if (i.type == 1) { // MOVIE
                returnValue.add(
                    MovieSearchResponse(
                        i.title,
                        currentUrl,
                        this.name,
                        TvType.Movie,
                        currentUrl,
                        i.year
                    )
                )
            }
        }
        return returnValue
    }

    // http not https, the links are not https!
    private fun fixUrl(url: String): String {
        if (url.isEmpty()) return ""

        if (url.startsWith("//")) {
            return "http:$url"
        }
        if (!url.startsWith("http")) {
            return "http://$url"
        }
        return url
    }

    private fun serializeData(element: Element): List<MeloMovieProvider.MeloMovieLink> {
        val eps = element.select("> tbody > tr")
        val parsed = eps.mapNotNull {
            try {
                val tds = it.select("> td")
                val name = tds[if (tds.size == 5) 1 else 0].text()
                val url = fixUrl(tds.last()!!.selectFirst("> a")!!.attr("data-lnk").replace(" ", "%20"))
                MeloMovieLink(name, url)
            } catch (e: Exception) {
                MeloMovieLink("", "")
            }
        }.filter { it.link != "" && it.name != "" }
        return parsed
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val links = parseJson<List<MeloMovieLink>>(data)
        for (link in links) {
            callback.invoke(
                ExtractorLink(
                    this.name,
                    link.name,
                    link.link,
                    "",
                    getQualityFromName(link.name),
                    false
                )
            )
        }
        return true
    }

    override suspend fun load(url: String): LoadResponse? {
        val response = app.get(url).text

        //backdrop = imgurl
        fun findUsingRegex(src: String): String? {
            return src.toRegex().find(response)?.groups?.get(1)?.value ?: return null
        }

        val imdbUrl = findUsingRegex("var imdb = \"(.*?)\"")
        val document = Jsoup.parse(response)
        val poster = document.selectFirst("img.img-fluid")!!.attr("src")
        val type = findUsingRegex("var posttype = ([0-9]*)")?.toInt() ?: return null
        val titleInfo = document.selectFirst("div.movie_detail_title > div > div > h1")
        val title = titleInfo!!.ownText()
        val year =
            titleInfo.selectFirst("> a")?.text()?.replace("(", "")?.replace(")", "")?.toIntOrNull()
        val plot = document.selectFirst("div.col-lg-12 > p")!!.text()

        if (type == 1) { // MOVIE
            val serialize = document.selectFirst("table.accordion__list")
                ?: throw ErrorLoadingException("No links found")
            return newMovieLoadResponse(
                title,
                url,
                TvType.Movie,
                serializeData(serialize)
            ) {
                this.posterUrl = poster
                this.year = year
                this.plot = plot
                addImdbUrl(imdbUrl)
            }
        } else if (type == 2) {
            val episodes = ArrayList<Episode>()
            val seasons = document.select("div.accordion__card")
                ?: throw ErrorLoadingException("No episodes found")
            for (s in seasons) {
                val season =
                    s.selectFirst("> div.card-header > button > span")!!.text()
                        .replace("Season: ", "").toIntOrNull()
                val localEpisodes = s.select("> div.collapse > div > div > div.accordion__card")
                for (e in localEpisodes) {
                    val episode =
                        e.selectFirst("> div.card-header > button > span")!!.text()
                            .replace("Episode: ", "").toIntOrNull()
                    val links =
                        e.selectFirst("> div.collapse > div > table.accordion__list") ?: continue
                    val data = serializeData(links)
                    episodes.add(newEpisode(data) {
                        this.season = season
                        this.episode = episode
                    })
                }
            }
            episodes.reverse()
            return newTvSeriesLoadResponse(
                title,
                url,
                TvType.TvSeries,
                episodes
            ) {
                this.posterUrl = poster
                this.year = year
                this.plot = plot
                addImdbUrl(imdbUrl)
            }
        }
        return null
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/MyCimaProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addActors
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import org.jsoup.Jsoup
import org.jsoup.nodes.Element

class MyCimaProvider : MainAPI() {
    override val lang = "ar"
    override var mainUrl = "https://mycima.tv"
    override var name = "MyCima"
    override val usesWebView = false
    override val hasMainPage = true
    override val supportedTypes = setOf(TvType.TvSeries, TvType.Movie, TvType.Anime)

    private fun String.getImageURL(): String? {
        return this.replace("--im(age|g):url\\(|\\);".toRegex(), "")
    }

    private fun String.getIntFromText(): Int? {
        return Regex("""\d+""").find(this)?.groupValues?.firstOrNull()?.toIntOrNull()
    }

    private fun Element.toSearchResponse(): SearchResponse? {
        val url = select("div.Thumb--GridItem a")
        val posterUrl = select("span.BG--GridItem")?.attr("data-lazy-style")
            ?.getImageURL()
        val year = select("div.GridItem span.year")?.text()
        val title = select("div.Thumb--GridItem strong").text()
            .replace("$year", "")
            .replace("Ù…Ø´Ø§Ù‡Ø¯Ø©|ÙÙŠÙ„Ù…|Ù…Ø³Ù„Ø³Ù„|Ù…ØªØ±Ø¬Ù…".toRegex(), "")
            .replace("( Ù†Ø³Ø®Ø© Ù…Ø¯Ø¨Ù„Ø¬Ø© )", " ( Ù†Ø³Ø®Ø© Ù…Ø¯Ø¨Ù„Ø¬Ø© ) ")
        // If you need to differentiate use the url.
        return MovieSearchResponse(
            title,
            url.attr("href"),
            this@MyCimaProvider.name,
            if(url.attr("title").contains("ÙÙŠÙ„Ù…")) TvType.Movie else TvType.TvSeries,
            posterUrl,
            year?.getIntFromText(),
            null,
        )
    }

    override suspend fun getMainPage(): HomePageResponse {
        // Title, Url
        val moviesUrl = listOf(
            "Movies" to "$mainUrl/movies/page/" + (0..25).random(),
            "Series" to "$mainUrl/seriestv/new/page/" + (0..25).random()
        )
        val pages = moviesUrl.apmap {
            val doc = app.get(it.second).document
            val list = doc.select("div.Grid--MycimaPosts div.GridItem").mapNotNull { element ->
                element.toSearchResponse()
            }
            HomePageList(it.first, list)
        }.sortedBy { it.name }
        return HomePageResponse(pages)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val q = query.replace(" ", "%20")
        val result = arrayListOf<SearchResponse>()
        listOf(
            "$mainUrl/search/$q",
            "$mainUrl/search/$q/list/series/",
            "$mainUrl/search/$q/list/anime/"
        ).apmap { url ->
            val d = app.get(url).document
            d.select("div.Grid--MycimaPosts div.GridItem").mapNotNull {
                if (it.text().contains("Ø§Ø¹Ù„Ø§Ù†")) return@mapNotNull null
                it.toSearchResponse()?.let { it1 -> result.add(it1) }
            }
        }
        return result.distinct().sortedBy { it.name }
    }

    data class MoreEPS(
        val output: String
    )

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val isMovie = doc.select("ol li:nth-child(3)").text().contains("Ø§ÙÙ„Ø§Ù…")
        val posterUrl =
            doc.select("mycima.separated--top")?.attr("data-lazy-style")?.getImageURL()
                ?.ifEmpty { doc.select("meta[itemprop=\"thumbnailUrl\"]")?.attr("content") }
                ?.ifEmpty { doc.select("mycima.separated--top")?.attr("style")?.getImageURL() }
        val year =
            doc.select("div.Title--Content--Single-begin h1 a.unline")?.text()?.getIntFromText()
        val title = doc.select("div.Title--Content--Single-begin h1").text()
            .replace("($year)", "")
            .replace("Ù…Ø´Ø§Ù‡Ø¯Ø©|ÙÙŠÙ„Ù…|Ù…Ø³Ù„Ø³Ù„|Ù…ØªØ±Ø¬Ù…|Ø§Ù†Ù…ÙŠ".toRegex(), "")
        // A bit iffy to parse twice like this, but it'll do.
        val duration =
            doc.select("ul.Terms--Content--Single-begin li").firstOrNull {
                it.text().contains("Ø§Ù„Ù…Ø¯Ø©")
            }?.text()?.getIntFromText()

        val synopsis = doc.select("div.StoryMovieContent").text()
            .ifEmpty { doc.select("div.PostItemContent").text() }

        val tags = doc.select("li:nth-child(3) > p > a").map { it.text() }

        val actors = doc.select("div.List--Teamwork > ul.Inner--List--Teamwork > li")?.mapNotNull {
            val name = it?.selectFirst("a > div.ActorName > span")?.text() ?: return@mapNotNull null
            val image = it.attr("style")
                ?.getImageURL()
                ?: return@mapNotNull null
            Actor(name, image)
        }
        val recommendations =
            doc.select("div.Grid--MycimaPosts div.GridItem")?.mapNotNull { element ->
                element.toSearchResponse()
            }

        return if (isMovie) {
            newMovieLoadResponse(
                title,
                url,
                TvType.Movie,
                url
            ) {
                this.posterUrl = posterUrl
                this.year = year
                this.plot = synopsis
                this.tags = tags
                this.duration = duration
                this.recommendations = recommendations
                addActors(actors)
            }
        } else {
            val episodes = ArrayList<Episode>()
            val seasons = doc.select("div.List--Seasons--Episodes a").not(".selected").map {
                it.attr("href")
            }
            val moreButton = doc.select("div.MoreEpisodes--Button")
            val season =
                doc.select("div.List--Seasons--Episodes a.selected").text().getIntFromText()
            doc.select("div.Seasons--Episodes div.Episodes--Seasons--Episodes a")
                .apmap {
                    episodes.add(
                        Episode(
                            it.attr("href"),
                            it.text(),
                            season,
                            it.text().getIntFromText(),
                        )
                    )
                }
            if (moreButton.isNotEmpty()) {
                val n = doc.select("div.Seasons--Episodes div.Episodes--Seasons--Episodes a").size
                val totals =
                    doc.select("div.Episodes--Seasons--Episodes a").first()!!.text().getIntFromText()
                val mEPS = arrayListOf(
                    n,
                    n + 40,
                    n + 80,
                    n + 120,
                    n + 160,
                    n + 200,
                    n + 240,
                    n + 280,
                    n + 320,
                    n + 360,
                    n + 400,
                    n + 440,
                    n + 480,
                    n + 520,
                    n + 660,
                    n + 700,
                    n + 740,
                    n + 780,
                    n + 820,
                    n + 860,
                    n + 900,
                    n + 940,
                    n + 980,
                    n + 1020,
                    n + 1060,
                    n + 1100,
                    n + 1140,
                    n + 1180,
                    n + 1220,
                    totals
                )
                mEPS.apmap { it ->
                    if (it != null) {
                        if (it > totals!!) return@apmap
                        val ajaxURL =
                            "$mainUrl/AjaxCenter/MoreEpisodes/${moreButton.attr("data-term")}/$it"
                        val jsonResponse = app.get(ajaxURL)
                        val json = parseJson<MoreEPS>(jsonResponse.text)
                        val document = Jsoup.parse(json.output?.replace("""\""", ""))
                        document.select("a").map {
                            episodes.add(
                                Episode(
                                    it.attr("href"),
                                    it.text(),
                                    season,
                                    it.text().getIntFromText(),
                                )
                            )
                        }
                    }
                }
            }
            if (seasons.isNotEmpty()) {
                seasons.apmap { surl ->
                    if (surl.contains("%d9%85%d8%af%d8%a8%d9%84%d8%ac")) return@apmap
                    val seasonsite = app.get(surl).document
                    val fmoreButton = seasonsite.select("div.MoreEpisodes--Button")
                    val fseason = seasonsite.select("div.List--Seasons--Episodes a.selected").text()
                        .getIntFromText() ?: 1
                    seasonsite.select("div.Seasons--Episodes div.Episodes--Seasons--Episodes a")
                        .map {
                            episodes.add(
                                Episode(
                                    it.attr("href"),
                                    it.text(),
                                    fseason,
                                    it.text().getIntFromText(),
                                )
                            )
                        }
                    if (fmoreButton.isNotEmpty()) {
                        val n =
                            seasonsite.select("div.Seasons--Episodes div.Episodes--Seasons--Episodes a").size
                        val totals =
                            seasonsite.select("div.Episodes--Seasons--Episodes a").first()!!.text()
                                .getIntFromText()
                        val mEPS = arrayListOf(
                            n,
                            n + 40,
                            n + 80,
                            n + 120,
                            n + 160,
                            n + 200,
                            n + 240,
                            n + 280,
                            n + 320,
                            n + 360,
                            n + 400,
                            n + 440,
                            n + 480,
                            n + 520,
                            n + 660,
                            n + 700,
                            n + 740,
                            n + 780,
                            n + 820,
                            n + 860,
                            n + 900,
                            n + 940,
                            n + 980,
                            n + 1020,
                            n + 1060,
                            n + 1100,
                            n + 1140,
                            n + 1180,
                            n + 1220,
                            totals
                        )
                        mEPS.apmap { it ->
                            if (it != null) {
                                if (it > totals!!) return@apmap
                                val ajaxURL =
                                    "$mainUrl/AjaxCenter/MoreEpisodes/${fmoreButton.attr("data-term")}/$it"
                                val jsonResponse = app.get(ajaxURL)
                                val json = parseJson<MoreEPS>(jsonResponse.text)
                                val document = Jsoup.parse(json.output?.replace("""\""", ""))
                                document.select("a").map {
                                    episodes.add(
                                        Episode(
                                            it.attr("href"),
                                            it.text(),
                                            fseason,
                                            it.text().getIntFromText(),
                                        )
                                    )
                                }
                            }
                        }
                    } else return@apmap
                }
            }
            newTvSeriesLoadResponse(
                title,
                url,
                TvType.TvSeries,
                episodes.distinct().sortedBy { it.episode }) {
                this.duration = duration
                this.posterUrl = posterUrl
                this.tags = tags
                this.year = year
                this.plot = synopsis
                this.recommendations = recommendations
                addActors(actors)
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document
            .select("ul.List--Download--Mycima--Single:nth-child(2) li").map {
                it.select("a").map { linkElement ->
                    callback.invoke(
                        ExtractorLink(
                            this.name,
                            this.name,
                            linkElement.attr("href"),
                            this.mainUrl,
                            quality = linkElement.select("resolution").text().getIntFromText() ?: 0
                        )
                    )
                }
            }.flatten()
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/NginxProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addDuration
import com.lagradost.cloudstream3.LoadResponse.Companion.addRating
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.TvType
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.Qualities
import java.lang.Exception

class NginxProvider : MainAPI() {
    override var name = "Nginx"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val supportedTypes = setOf(TvType.AnimeMovie, TvType.TvSeries, TvType.Movie)



    fun getAuthHeader(storedCredentials: String?): Map<String, String> {
        if (storedCredentials == null) {
            return mapOf(Pair("Authorization", "Basic "))  // no Authorization headers
        }
        val basicAuthToken = base64Encode(storedCredentials.toByteArray())  // will this be loaded when not using the provider ??? can increase load
        return mapOf(Pair("Authorization", "Basic $basicAuthToken"))
    }

    override suspend fun load(url: String): LoadResponse {
        val authHeader = getAuthHeader(storedCredentials)  // call again because it isn't reloaded if in main class and storedCredentials loads after
        // url can be tvshow.nfo for series or mediaRootUrl for movies

        val mediaRootDocument = app.get(url, authHeader).document

        val nfoUrl = url + mediaRootDocument.getElementsByAttributeValueContaining("href", ".nfo").attr("href")  // metadata url file

        val metadataDocument = app.get(nfoUrl, authHeader).document  // get the metadata nfo file

        val isMovie = !nfoUrl.contains("tvshow.nfo")

        val title = metadataDocument.selectFirst("title")!!.text()

        val description = metadataDocument.selectFirst("plot")!!.text()

        if (isMovie) {
            val poster = metadataDocument.selectFirst("thumb")!!.text()
            val trailer = metadataDocument.select("trailer").mapNotNull {
               it?.text()?.replace(
                   "plugin://plugin.video.youtube/play/?video_id=",
                   "https://www.youtube.com/watch?v="
               )
            }
            val partialUrl = mediaRootDocument.getElementsByAttributeValueContaining("href", ".nfo").attr("href").replace(".nfo", ".")
            val date = metadataDocument.selectFirst("year")?.text()?.toIntOrNull()
            val ratingAverage = metadataDocument.selectFirst("value")?.text()?.toIntOrNull()
            val tagsList = metadataDocument.select("genre")
                ?.mapNotNull {   // all the tags like action, thriller ...
                    it?.text()

                }


            val dataList = mediaRootDocument.getElementsByAttributeValueContaining(  // list of all urls of the webpage
                "href",
                partialUrl
            )

            val data = url + dataList.firstNotNullOf { item -> item.takeIf { (!it.attr("href").contains(".nfo") &&  !it.attr("href").contains(".jpg"))} }.attr("href").toString()  // exclude poster and nfo (metadata) file

            return newMovieLoadResponse(
                title,
                url,
                TvType.Movie,
                data
            ) {
                this.year = date
                this.plot = description
                this.rating = ratingAverage
                this.tags = tagsList
                this.trailers = trailer
                addPoster(poster, authHeader)
            }
        } else  // a tv serie
        {

            val list = ArrayList<Pair<Int, String>>()
            val mediaRootUrl = url.replace("tvshow.nfo", "")
            val posterUrl = mediaRootUrl + "poster.jpg"
            val mediaRootDocument = app.get(mediaRootUrl, authHeader).document
            val seasons =
                mediaRootDocument.getElementsByAttributeValueContaining("href", "Season%20")


            val tagsList = metadataDocument.select("genre")
                ?.mapNotNull {   // all the tags like action, thriller ...; unused variable
                    it?.text()
                }

            //val actorsList = document.select("actor")
            //    ?.mapNotNull {   // all the tags like action, thriller ...; unused variable
            //        it?.text()
            //    }

            seasons.forEach { element ->
                val season =
                    element.attr("href")?.replace("Season%20", "")?.replace("/", "")?.toIntOrNull()
                val href = mediaRootUrl + element.attr("href")
                if (season != null && season > 0 && href.isNotBlank()) {
                    list.add(Pair(season, href))
                }
            }

            if (list.isEmpty()) throw ErrorLoadingException("No Seasons Found")

            val episodeList = ArrayList<Episode>()


            list.apmap { (seasonInt, seasonString) ->
                val seasonDocument = app.get(seasonString, authHeader).document
                val episodes = seasonDocument.getElementsByAttributeValueContaining(
                    "href",
                    ".nfo"
                ) // get metadata
                    episodes.forEach { episode ->
                        val nfoDocument = app.get(seasonString + episode.attr("href"), authHeader).document // get episode metadata file
                        val epNum = nfoDocument.selectFirst("episode")?.text()?.toIntOrNull()
                        val poster =
                            seasonString + episode.attr("href").replace(".nfo", "-thumb.jpg")
                        val name = nfoDocument.selectFirst("title")!!.text()
                        // val seasonInt = nfoDocument.selectFirst("season").text().toIntOrNull()
                        val date = nfoDocument.selectFirst("aired")?.text()
                        val plot = nfoDocument.selectFirst("plot")?.text()

                        val dataList = seasonDocument.getElementsByAttributeValueContaining(
                            "href",
                            episode.attr("href").replace(".nfo", "")
                        )
                        val data = seasonString + dataList.firstNotNullOf { item -> item.takeIf { (!it.attr("href").contains(".nfo") &&  !it.attr("href").contains(".jpg"))} }.attr("href").toString()  // exclude poster and nfo (metadata) file

                        episodeList.add(
                            newEpisode(data) {
                                    this.name = name
                                    this.season = seasonInt
                                    this.episode = epNum
                                    this.posterUrl = poster  // will require headers too
                                    this.description = plot
                                    addDate(date)
                            }
                        )
                    }
            }
            return newTvSeriesLoadResponse(title, url, TvType.TvSeries, episodeList) {
                this.name = title
                this.url = url
                this.episodes = episodeList
                this.plot = description
                this.tags = tagsList
                addPoster(posterUrl, authHeader)
            }
        }

    }


    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        // loadExtractor(data, null) { callback(it.copy(headers=authHeader)) }
        val authHeader = getAuthHeader(storedCredentials)  // call again because it isn't reloaded if in main class and storedCredentials loads after
        callback.invoke (
            ExtractorLink(
                name,
                name,
                data,
                data,  // referer not needed
                Qualities.Unknown.value,
                false,
                authHeader,
            )
        )

        return true
    }



    override suspend fun getMainPage(): HomePageResponse {
        val authHeader = getAuthHeader(storedCredentials)  // call again because it isn't reloaded if in main class and storedCredentials loads after
        if (mainUrl == "NONE"){
            throw ErrorLoadingException("No nginx url specified in the settings: Nginx Settigns > Nginx server url, try again in a few seconds")
        }
        val document = app.get(mainUrl, authHeader).document
        val categories = document.select("a")
        val returnList = categories.mapNotNull {
            val categoryPath = mainUrl + it.attr("href") ?: return@mapNotNull null // get the url of the category; like http://192.168.1.10/media/Movies/
            val categoryTitle = it.text()  // get the category title like Movies or Series
            if (categoryTitle != "../" && categoryTitle != "Music/") {  // exclude parent dir and Music dir
                val categoryDocument = app.get(categoryPath, authHeader).document // queries the page http://192.168.1.10/media/Movies/
                val contentLinks = categoryDocument.select("a")
                val currentList = contentLinks.mapNotNull { head ->
                    if (head.attr("href") != "../") {
                        try {
                            val mediaRootUrl =
                                categoryPath + head.attr("href")// like http://192.168.1.10/media/Series/Chernobyl/
                            val mediaDocument = app.get(mediaRootUrl, authHeader).document
                            val nfoFilename = mediaDocument.getElementsByAttributeValueContaining(
                                "href",
                                ".nfo"
                            )[0].attr("href")
                            val isMovieType = nfoFilename != "tvshow.nfo"
                            val nfoPath =
                                mediaRootUrl + nfoFilename // must exist or will raise errors, only the first one is taken
                            val nfoContent =
                                app.get(nfoPath, authHeader).document  // all the metadata


                            if (isMovieType) {
                                val movieName = nfoContent.select("title").text()
                                val posterUrl = mediaRootUrl + "poster.jpg"
                                return@mapNotNull newMovieSearchResponse(
                                    movieName,
                                    mediaRootUrl,
                                    TvType.Movie,
                                ) {
                                    addPoster(posterUrl, authHeader)
                                }
                            } else {  // tv serie
                                val serieName = nfoContent.select("title").text()

                                val posterUrl = mediaRootUrl + "poster.jpg"

                                newTvSeriesSearchResponse(
                                    serieName,
                                    nfoPath,
                                    TvType.TvSeries,
                                ) {
                                    addPoster(posterUrl, authHeader)
                                }


                            }
                        } catch (e: Exception) {  // can cause issues invisible errors
                            null
                            //logError(e) // not working because it changes the return type of currentList to Any
                        }


                    } else null
                }
                if (currentList.isNotEmpty() && categoryTitle != "../") {  // exclude upper dir
                    HomePageList(categoryTitle, currentList)
                } else null
            } else null  // the path is ../ which is parent directory
        }
        // if (returnList.isEmpty()) return null // maybe doing nothing idk
        return HomePageResponse(returnList)
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/OlgplyProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.SubtitleFile
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.metaproviders.TmdbLink
import com.lagradost.cloudstream3.metaproviders.TmdbProvider
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities

class OlgplyProvider : TmdbProvider() {
    override var mainUrl = "https://olgply.com"
    override val apiName = "Olgply"
    override var name = "Olgply"
    override val instantLinkLoading = true
    override val useMetaLoadResponse = true

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val mappedData = parseJson<TmdbLink>(data)
        val imdbId = mappedData.imdbID ?: return false
        val iframeUrl =
            "$mainUrl/api/?imdb=$imdbId${mappedData.season?.let { "&season=$it" } ?: ""}${mappedData.episode?.let { "&episode=$it" } ?: ""}"

        val iframeRegex = Regex("""file:.*?"([^"]*)""")

        val html = app.get(iframeUrl).text
        val link = iframeRegex.find(html)?.groupValues?.getOrNull(1) ?: return false
        callback.invoke(
            ExtractorLink(
                this.name,
                this.name,
                link,
                this.mainUrl + "/",
                Qualities.Unknown.value,
                headers = mapOf("range" to "bytes=0-")
            )
        )
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/PelisflixProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addDuration
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class PelisflixProvider : MainAPI() {
    override var mainUrl = "https://pelisflix.li"
    override var name = "Pelisflix"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val urls = listOf(
            Pair("$mainUrl/ver-peliculas-online-gratis-fullhdc3/", "PelÃ­culas"),
            Pair("$mainUrl/ver-series-online-gratis/", "Series"),
        )
        for (i in urls) {
            try {
                val soup = app.get(i.first).document
                val home = soup.select("article.TPost.B").map {
                    val title = it.selectFirst("h2.title")!!.text()
                    val link = it.selectFirst("a")!!.attr("href")
                    TvSeriesSearchResponse(
                        title,
                        link,
                        this.name,
                        TvType.Movie,
                        it.selectFirst("figure img")!!.attr("data-src"),
                        null,
                        null,
                    )
                }

                items.add(HomePageList(i.second, home))
            } catch (e: Exception) {
                logError(e)
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=$query"
        val doc = app.get(url).document
        return doc.select("article.TPost.B").map {
            val href = it.selectFirst("a")!!.attr("href")
            val poster = it.selectFirst("figure img")!!.attr("data-src")
            val name = it.selectFirst("h2.title")!!.text()
            val isMovie = href.contains("/pelicula/")
            if (isMovie) {
                MovieSearchResponse(
                    name,
                    href,
                    this.name,
                    TvType.Movie,
                    poster,
                    null
                )
            } else {
                TvSeriesSearchResponse(
                    name,
                    href,
                    this.name,
                    TvType.TvSeries,
                    poster,
                    null,
                    null
                )
            }
        }.toList()
    }

    override suspend fun load(url: String): LoadResponse? {
        val type = if (url.contains("/pelicula/")) TvType.Movie else TvType.TvSeries

        val document = app.get(url).document

        val title = document.selectFirst("h1.Title")!!.text()
        val descRegex = Regex("(.Recuerda.*Pelisflix.+)")
        val descRegex2 = Regex("(Actualmente.*.)")
        val descRegex3 = Regex("(.*Director:.*)")
        val descRegex4 = Regex("(.*Actores:.*)")
        val descRegex5 = Regex("(Ver.*(\\)|)((\\d+).))")
        val descipt = document.selectFirst("div.Description")!!.text().replace(descRegex, "")
            .replace(descRegex2, "").replace(descRegex3, "")
            .replace(descRegex4, "").replace(descRegex5, "")
        val desc2Regex = Regex("(G(e|Ã©)nero:.*..)")
        val descipt2 = document.selectFirst("div.Description")!!.text().replace(desc2Regex, "")
        val rating =
            document.selectFirst("div.rating-content button.like-mov span.vot_cl")?.text()
                ?.toFloatOrNull()
                ?.times(0)?.toInt()
        val year = document.selectFirst("span.Date")?.text()
        val duration =
            if (type == TvType.Movie) document.selectFirst(".Container .Container  span.Time")!!
                .text() else null
        val postercss = document.selectFirst("head").toString()
        val posterRegex =
            Regex("(\"og:image\" content=\"https:\\/\\/seriesflix.video\\/wp-content\\/uploads\\/(\\d+)\\/(\\d+)\\/?.*.jpg)")
        val poster = try {
            posterRegex.findAll(postercss).map {
                it.value.replace("\"og:image\" content=\"", "")
            }.toList().first()
        } catch (e: Exception) {
            document.select(".TPostBg").attr("src")
        }
        if (type == TvType.TvSeries) {
            val list = ArrayList<Pair<Int, String>>()

            document.select("main > section.SeasonBx > div > div.Title > a").forEach { element ->
                val season = element.selectFirst("> span")?.text()?.toIntOrNull()
                val href = element.attr("href")
                if (season != null && season > 0 && !href.isNullOrBlank()) {
                    list.add(Pair(season, fixUrl(href)))
                }
            }
            if (list.isEmpty()) throw ErrorLoadingException("No Seasons Found")

            val episodeList = ArrayList<Episode>()

            for ((seasonInt, seasonUrl) in list) {
                val seasonDocument = app.get(seasonUrl).document
                val episodes = seasonDocument.select("table > tbody > tr")
                if (episodes.isNotEmpty()) {
                    episodes.forEach { episode ->
                        val epNum = episode.selectFirst("> td > span.Num")?.text()?.toIntOrNull()
                        val epthumb = episode.selectFirst("img")?.attr("src")
                        val aName = episode.selectFirst("> td.MvTbTtl > a")
                        val name = aName!!.text()
                        val href = aName.attr("href")
                        val date = episode.selectFirst("> td.MvTbTtl > span")?.text()
                        episodeList.add(
                            newEpisode(href) {
                                this.name = name
                                this.season = seasonInt
                                this.episode =  epNum
                                this.posterUrl = fixUrlNull(epthumb)
                                addDate(date)
                            }
                        )
                    }
                }
            }
            return TvSeriesLoadResponse(
                title,
                url,
                this.name,
                type,
                episodeList,
                fixUrlNull(poster),
                year?.toIntOrNull(),
                descipt2,
                null,
                rating
            )
        } else {
            return newMovieLoadResponse(
                title,
                url,
                type,
                url
            ) {
                posterUrl = fixUrlNull(poster)
                this.year = year?.toIntOrNull()
                this.plot = descipt
                this.rating = rating
                addDuration(duration)
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document.select("li button.Button.sgty").forEach {
            val movieID = it.attr("data-id")
            val serverID = it.attr("data-key")
            val type = if (data.contains("pelicula")) 1 else 2
            val url =
                "$mainUrl/?trembed=$serverID&trid=$movieID&trtype=$type" //This is to get the POST key value
            val doc1 = app.get(url).document
            doc1.select("div.Video iframe").apmap {
                val iframe = it.attr("src")
                val postkey = iframe.replace("/stream/index.php?h=", "") // this obtains
                // djNIdHNCR2lKTGpnc3YwK3pyRCs3L2xkQmljSUZ4ai9ibTcza0JRODNMcmFIZ0hPejdlYW0yanJIL2prQ1JCZA POST KEY
                app.post(
                    "https://pelisflix.li/stream/r.php",
                    headers = mapOf(
                        "Host" to "pelisflix.li",
                        "User-Agent" to USER_AGENT,
                        "Accept" to "ext/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8",
                        "Accept-Language" to "en-US,en;q=0.5",
                        "Content-Type" to "application/x-www-form-urlencoded",
                        "Origin" to "null",
                        "DNT" to "1",
                        "Connection" to "keep-alive",
                        "Upgrade-Insecure-Requests" to "1",
                        "Sec-Fetch-Dest" to "iframe",
                        "Sec-Fetch-Mode" to "navigate",
                        "Sec-Fetch-Site" to "same-origin",
                        "Sec-Fetch-User" to "?1",
                        "Pragma" to "no-cache",
                        "Cache-Control" to "no-cache",
                        "TE" to "trailers"
                    ),
                    params = mapOf(Pair("h", postkey)),
                    data = mapOf(Pair("h", postkey)),
                    allowRedirects = false
                ).okhttpResponse.headers.values("location").apmap { link ->
                    val url1 = link.replace("#bu", "")
                    loadExtractor(url1, data, callback)
                }
            }
        }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/PeliSmartProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class PeliSmartProvider: MainAPI() {
    override var mainUrl = "https://pelismart.com"
    override var name = "PeliSmart"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )
    override val vpnStatus = VPNStatus.MightBeNeeded //Due to evoload sometimes not loading

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val urls = listOf(
            Pair("$mainUrl/peliculas/", "Peliculas"),
            Pair("$mainUrl/series/", "Series"),
            Pair("$mainUrl/documentales/", "Documentales"),
        )

        for ((url, name) in urls) {
            try {
                val soup = app.get(url).document
                val home = soup.select(".description-off").map {
                    val title = it.selectFirst("h3.entry-title a")!!.text()
                    val link = it.selectFirst("a")!!.attr("href")
                    TvSeriesSearchResponse(
                        title,
                        link,
                        this.name,
                        if (link.contains("pelicula")) TvType.Movie else TvType.TvSeries,
                        it.selectFirst("div img")!!.attr("src"),
                        null,
                        null,
                    )
                }

                items.add(HomePageList(name, home))
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl?s=${query}&post_type=post"
        val document = app.get(url).document

        return document.select(".description-off").map {
            val title = it.selectFirst("h3.entry-title a")!!.text()
            val href = it.selectFirst("a")!!.attr("href")
            val image = it.selectFirst("div img")!!.attr("src")
            val isMovie = href.contains("pelicula")

            if (isMovie) {
                MovieSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Movie,
                    image,
                    null
                )
            } else {
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.TvSeries,
                    image,
                    null,
                    null
                )
            }
        }
    }


    override suspend fun load(url: String): LoadResponse? {
        val soup = app.get(url, timeout = 120).document
        val title = soup.selectFirst(".wpb_wrapper h1")!!.text()
        val description = soup.selectFirst("div.wpb_wrapper p")?.text()?.trim()
        val poster: String? = soup.selectFirst(".vc_single_image-img")!!.attr("src")
        val episodes = soup.select("div.vc_tta-panel-body div a").map { li ->
            val href = li.selectFirst("a")!!.attr("href")
            val preregex = Regex("(\\d+)\\. ")
            val name = li.selectFirst("a")!!.text().replace(preregex,"")
            val regextest = Regex("(temporada-(\\d+)-capitulo-(\\d+)|temporada-(\\d+)-episodio-(\\d+))")
            val test = regextest.find(href)?.destructured?.component1()?.replace(Regex("(temporada-|-)"),"")
            val seasonid = test.let { str ->
                str?.split("episodio","capitulo")?.mapNotNull { subStr -> subStr.toIntOrNull() }
            }
            val isValid = seasonid?.size == 2
            val episode = if (isValid) seasonid?.getOrNull(1) else null
            val season = if (isValid) seasonid?.getOrNull(0) else null
                Episode(
                    href,
                    name,
                    season,
                    episode,
                )
        }
        return when (val tvType = if (episodes.isEmpty()) TvType.Movie else TvType.TvSeries) {
            TvType.TvSeries -> {
                TvSeriesLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes,
                    poster,
                    null,
                    description,
                )
            }
            TvType.Movie -> {
                MovieLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    url,
                    poster,
                    null,
                    description,
                )
            }
            else -> null
        }
    }
    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val soup = app.get(data).text
         fetchUrls(soup).apmap {
             val urlc = it.replace("https://pelismart.com/p/1.php?v=","https://evoload.io/e/")
             .replace("https://pelismart.com/p/2.php?v=","https://streamtape.com/e/")
             .replace("https://pelismart.com/p/4.php?v=","https://dood.to/e/")
             .replace("https://pelismarthd.com/p/1.php?v=","https://evoload.io/e/")
             .replace("https://pelismarthd.com/p/2.php?v=","https://streamtape.com/e/")
             .replace("https://pelismarthd.com/p/4.php?v=","https://dood.to/e/")
             loadExtractor(urlc, data, callback)
         }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/PelisplusHDProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.nodes.Element

class PelisplusHDProvider:MainAPI() {
    override var mainUrl = "https://pelisplushd.net"
    override var name = "PelisplusHD"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )
    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val document = app.get(mainUrl).document
        val map = mapOf(
            "PelÃ­culas" to "#default-tab-1",
            "Series" to "#default-tab-2",
            "Anime" to "#default-tab-3",
            "Doramas" to "#default-tab-4",
        )
        map.forEach {
            items.add(HomePageList(
                it.key,
                document.select(it.value).select("a.Posters-link").map { element ->
                    element.toSearchResult()
                }
            ))
        }
        return HomePageResponse(items)
    }
    private fun Element.toSearchResult(): SearchResponse {
        val title = this.select(".listing-content p").text()
        val href = this.select("a").attr("href")
        val posterUrl = this.select(".Posters-img").attr("src")
        val isMovie = href.contains("/pelicula/")
        return if (isMovie) {
            MovieSearchResponse(
                title,
                href,
                name,
                TvType.Movie,
                posterUrl,
                null
            )
        } else {
            TvSeriesSearchResponse(
                title,
                href,
                name,
                TvType.Movie,
                posterUrl,
                null,
                null
            )
        }
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "https://pelisplushd.net/search?s=${query}"
        val document = app.get(url).document

        return document.select("a.Posters-link").map {
            val title = it.selectFirst(".listing-content p")!!.text()
            val href = it.selectFirst("a")!!.attr("href")
            val image = it.selectFirst(".Posters-img")!!.attr("src")
            val isMovie = href.contains("/pelicula/")

            if (isMovie) {
                MovieSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Movie,
                    image,
                    null
                )
            } else {
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.TvSeries,
                    image,
                    null,
                    null
                )
            }
        }
    }

    override suspend fun load(url: String): LoadResponse? {
        val soup = app.get(url, timeout = 120).document

        val title = soup.selectFirst(".m-b-5")!!.text()
        val description = soup.selectFirst("div.text-large")?.text()?.trim()
        val poster: String? = soup.selectFirst(".img-fluid")!!.attr("src")
        val episodes = soup.select("div.tab-pane .btn").map { li ->
            val href = li.selectFirst("a")!!.attr("href")
            val name = li.selectFirst(".btn-primary.btn-block")!!.text()
            val seasonid = href.replace("/capitulo/","-")
                .replace(Regex("$mainUrl/.*/.*/temporada/"),"").let { str ->
                    str.split("-").mapNotNull { subStr -> subStr.toIntOrNull() }
                }
            val isValid = seasonid.size == 2
            val episode = if (isValid) seasonid.getOrNull(1) else null
            val season = if (isValid) seasonid.getOrNull(0) else null
            Episode(
                href,
                name,
                season,
                episode,
            )
        }

        val year = soup.selectFirst(".p-r-15 .text-semibold")!!.text().toIntOrNull()
        val tvType = if (url.contains("/pelicula/")) TvType.Movie else TvType.TvSeries
        val tags = soup.select(".p-h-15.text-center a span.font-size-18.text-info.text-semibold")
            .map { it?.text()?.trim().toString().replace(", ","") }

        return when (tvType) {
            TvType.TvSeries -> {
                TvSeriesLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes,
                    poster,
                    year,
                    description,
                    null,
                    null,
                    tags,
                )
            }
            TvType.Movie -> {
                MovieLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    url,
                    poster,
                    year,
                    description,
                    null,
                    tags,
                )
            }
            else -> null
        }
    }
    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document.select("div.player > script").map { script ->
            fetchUrls(script.data().replace("https://pelisplushd.net/fembed.php?url=","https://www.fembed.com/v/")).apmap {
                loadExtractor(it, data, callback)
            }
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/PelisplusProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.TvType

/** Needs to inherit from MainAPI() to
 * make the app know what functions to call
 */ 
class PelisplusProvider : PelisplusProviderTemplate() {
    // mainUrl is good to have as a holder for the url to make future changes easier.
    override var mainUrl = "https://pelisplus.icu"

    // name is for how the provider will be named which is visible in the UI, no real rules for this.
    override var name = "Pelisplus"

    override val homePageUrlList = listOf(
        mainUrl,
        "$mainUrl/movies",
        "$mainUrl/series",
        "$mainUrl/new-season",
        "$mainUrl/popular"
    )

    // This is just extra metadata about what type of movies the provider has.
    // Needed for search functionality.
    override val supportedTypes = setOf(TvType.TvSeries, TvType.Movie)
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/PelisplusProviderTemplate.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.Jsoup


/** Needs to inherit from MainAPI() to
 * make the app know what functions to call
 */

open class PelisplusProviderTemplate : MainAPI() {
    override val lang = "es"
    open val homePageUrlList = listOf<String>()

//    // mainUrl is good to have as a holder for the url to make future changes easier.
//    override val mainUrl: String
//        get() = "https://vidembed.cc"
//
//    // name is for how the provider will be named which is visible in the UI, no real rules for this.
//    override val name: String
//        get() = "VidEmbed"

    // hasQuickSearch defines if quickSearch() should be called, this is only when typing the searchbar
    // gives results on the site instead of bringing you to another page.
    // if hasQuickSearch is true and quickSearch() hasn't been overridden you will get errors.
    // VidEmbed actually has quick search on their site, but the function wasn't implemented.
    override val hasQuickSearch = false

    // If getMainPage() is functional, used to display the homepage in app, an optional, but highly encouraged endevour.
    override val hasMainPage = true

    // Searching returns a SearchResponse, which can be one of the following: AnimeSearchResponse, MovieSearchResponse, TorrentSearchResponse, TvSeriesSearchResponse
    // Each of the classes requires some different data, but always has some critical things like name, poster and url.

    override suspend fun search(query: String): ArrayList<SearchResponse> {
        // Simply looking at devtools network is enough to spot a request like:
        // https://vidembed.cc/search.html?keyword=neverland where neverland is the query, can be written as below.
        val link = "$mainUrl/search.html?keyword=$query"
        val html = app.get(link).text
        val soup = Jsoup.parse(html)

        return ArrayList(soup.select(".listing.items > .video-block").map { li ->
            // Selects the href in <a href="...">
            val href = fixUrl(li.selectFirst("a")!!.attr("href"))
            val poster = fixUrl(li.selectFirst("img")!!.attr("src"))

            // .text() selects all the text in the element, be careful about doing this while too high up in the html hierarchy
            val title = cleanName(li.selectFirst(".name")!!.text())
            // Use get(0) and toIntOrNull() to prevent any possible crashes, [0] or toInt() will error the search on unexpected values.
            val year = li.selectFirst(".date")?.text()?.split("-")?.get(0)?.toIntOrNull()

            TvSeriesSearchResponse(
                // .trim() removes unwanted spaces in the start and end.
                if (!title.contains("Episode")) title else title.split("Episode")[0].trim(),
                href,
                this.name,
                TvType.TvSeries,
                poster, year,
                // You can't get the episodes from the search bar.
                null
            )
        })
    }


    // Load, like the name suggests loads the info page, where all the episodes and data usually is.
    // Like search you should return either of: AnimeLoadResponse, MovieLoadResponse, TorrentLoadResponse, TvSeriesLoadResponse.
    override suspend fun load(url: String): LoadResponse? {
        // Gets the url returned from searching.
        val html = app.get(url).text
        val soup = Jsoup.parse(html)

        val title = cleanName(soup.selectFirst("h1,h2,h3")!!.text())
        val description = soup.selectFirst(".post-entry")?.text()?.trim()
        val poster = soup.selectFirst("head meta[property=og:image]")!!.attr("content")

        var year : Int? = null
        val episodes = soup.select(".listing.items.lists > .video-block").map { li ->
            val href = fixUrl(li.selectFirst("a")!!.attr("href"))
            val regexseason = Regex("(-[Tt]emporada-(\\d+)-[Cc]apitulo-(\\d+))")
            val aaa = regexseason.find(href)?.destructured?.component1()?.replace(Regex("(-[Tt]emporada-|[Cc]apitulo-)"),"")
            val seasonid = aaa.let { str ->
                str?.split("-")?.mapNotNull { subStr -> subStr.toIntOrNull() }
            }
            val isValid = seasonid?.size == 2
            val episode = if (isValid) seasonid?.getOrNull(1) else null
            val season = if (isValid) seasonid?.getOrNull(0) else null
            val epThumb = fixUrl(li.selectFirst("img")!!.attr("src"))
            val epDate = li.selectFirst(".meta > .date")!!.text()

            if(year == null) {
                year = epDate?.split("-")?.get(0)?.toIntOrNull()
            }

            newEpisode(li.selectFirst("a")!!.attr("href")) {
                this.season = season
                this.episode = episode
                this.posterUrl = epThumb
                addDate(epDate)
            }
        }.reversed()

        // Make sure to get the type right to display the correct UI.
        val tvType = if (episodes.size == 1 && episodes[0].name == title) TvType.Movie else TvType.TvSeries

        return when (tvType) {
            TvType.TvSeries -> {
                TvSeriesLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes,
                    fixUrl(poster),
                    year,
                    description,
                    null,
                    null,
                    null
                )
            }
            TvType.Movie -> {
                MovieLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes[0].data,
                    fixUrl(poster),
                    year,
                    description,
                    null,
                    null
                )
            }
            else -> null
        }
    }

    // This loads the homepage, which is basically a collection of search results with labels.
    // Optional function, but make sure to enable hasMainPage if you program this.
    override suspend fun getMainPage(): HomePageResponse {
        val urls = homePageUrlList
        val homePageList = ArrayList<HomePageList>()
        // .pmap {} is used to fetch the different pages in parallel
        urls.apmap { url ->
            val response = app.get(url, timeout = 20).text
            val document = Jsoup.parse(response)
            document.select("div.main-inner")?.forEach { inner ->
                // Always trim your text unless you want the risk of spaces at the start or end.
                val title = cleanName(inner.select(".widget-title").text())
                val elements = inner.select(".video-block").map {
                    val link = fixUrl(it.select("a").attr("href"))
                    val image = it.select(".picture > img").attr("src").replace("//img", "https://img")
                    val name = cleanName(it.select("div.name").text())
                    val isSeries = (name.contains("Temporada") || name.contains("CapÃ­tulo"))

                    if (isSeries) {
                        TvSeriesSearchResponse(
                            name,
                            link,
                            this.name,
                            TvType.TvSeries,
                            image,
                            null,
                            null,
                        )
                    } else {
                        MovieSearchResponse(
                            name,
                            link,
                            this.name,
                            TvType.Movie,
                            image,
                            null,
                            null,
                        )
                    }
                }

                homePageList.add(
                    HomePageList(
                        title, elements
                    )
                )

            }

        }
        return HomePageResponse(homePageList)
    }


    private fun cleanName(input: String): String = input.replace(Regex("([Tt]emporada (\\d+)|[Cc]apÃ­tulo (\\d+))|[Tt]emporada|[Cc]apÃ­tulo"),"").trim()


    private suspend fun getPelisStream(
        link: String,
        callback: (ExtractorLink) -> Unit) : Boolean {
        val soup = app.get(link).text
        val m3u8regex = Regex("((https:|http:)\\/\\/.*m3u8.*expiry=(\\d+))")
        val m3u8 = m3u8regex.find(soup)?.value ?: return false

        M3u8Helper.generateM3u8(
            name,
            m3u8,
            mainUrl,
            headers = mapOf("Referer" to mainUrl)
        ).forEach (callback)

        return true
    }

    // loadLinks gets the raw .mp4 or .m3u8 urls from the data parameter in the episodes class generated in load()
    // See Episode(...) in this provider.
    // The data are usually links, but can be any other string to help aid loading the links.
    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        // These callbacks are functions you should call when you get a link to a subtitle file or media file.
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val doc = app.get(data).document
        val info = doc.select("div.tabs-video li").text()
        if (info.contains("Latino")) {
            doc.select(".server-item-1 li").apmap {
                val serverid = fixUrl(it.attr("data-video")).replace("streaming.php","play")
                loadExtractor(serverid, data, callback)
                if (serverid.contains("pelisplus.icu")) {
                    getPelisStream(serverid, callback)
                }
            }
        }

        if (info.contains("Subtitulado")) {
            doc.select(".server-item-0 li").apmap {
                val serverid = fixUrl(it.attr("data-video")).replace("streaming.php","play")
                loadExtractor(serverid, data, callback)
                if (serverid.contains("pelisplus.icu")) {
                    getPelisStream(serverid, callback)
                }
            }
        }

        if (info.contains("Castellano")) {
            doc.select(".server-item-2 li").apmap {
                val serverid = fixUrl(it.attr("data-video")).replace("streaming.php","play")
                loadExtractor(serverid, data, callback)
                if (serverid.contains("pelisplus.icu")) {
                    getPelisStream(serverid, callback)
                }
            }
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/PinoyHDXyzProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class PinoyHDXyzProvider : MainAPI() {
    override var name = "Pinoy-HD"
    override var mainUrl = "https://www.pinoy-hd.xyz"
    override val lang = "tl"
    override val supportedTypes = setOf(TvType.AsianDrama)
    override val hasDownloadSupport = true
    override val hasMainPage = true
    override val hasQuickSearch = false

    override suspend fun getMainPage(): HomePageResponse {
        val all = ArrayList<HomePageList>()
        val document = app.get(mainUrl, referer = mainUrl).document
        val mainbody = document.getElementsByTag("body")

        mainbody?.select("div.section-cotent.col-md-12.bordert")?.forEach { row ->
            val title = row?.select("div.title-section.tt")?.text() ?: "<Row>"
            val elements = row?.select("li.img_frame.preview-tumb7")?.mapNotNull {
                // Get inner div from article
                val innerBody = it?.selectFirst("a") ?: return@mapNotNull null
                // Fetch details
                val name = it.text()?.trim()
                if (name.isNullOrBlank()) { return@mapNotNull null }

                val link = innerBody.attr("href") ?: return@mapNotNull null
                val image = fixUrlNull(innerBody.select("img")?.attr("src"))
                //Log.i(this.name, "Result => (innerBody, image) ${innerBody} / ${image}")
                // Get Year from Link
                val rex = Regex("_(\\d+)_")
                val year = rex.find(link)?.value?.replace("_", "")?.toIntOrNull()
                //Log.i(this.name, "Result => (yearRes, year) ${yearRes} / ${year}")
                MovieSearchResponse(
                    name = name,
                    url = link,
                    apiName = this.name,
                    type = TvType.Movie,
                    posterUrl = image,
                    year = year
                )
            }?.distinctBy { c -> c.url } ?: listOf()
            // Add to Homepage
            if (elements.isNotEmpty()) {
                all.add(
                    HomePageList(
                        title, elements
                    )
                )
            }
        }
        return HomePageResponse(all)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/search/?q=${query.replace(" ", "+")}"
        val document = app.get(url).document.select("div.portfolio-thumb")
        return document?.mapNotNull {
            if (it == null) {
                return@mapNotNull null
            }
            val link = it.selectFirst("a")?.attr("href") ?: return@mapNotNull null
            val title = it.text() ?: ""
            val year = null
            val image = null // site provides no image on search page

            MovieSearchResponse(
                name = title,
                url = link,
                apiName = this.name,
                type = TvType.Movie,
                posterUrl = image,
                year = year
            )
        }?.distinctBy { c -> c.url } ?: listOf()
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val body = doc.getElementsByTag("body")
        val inner = body?.select("div.info")

        // Video links
        val listOfLinks: MutableList<String> = mutableListOf()

        // Video details
        var title = ""
        var year: Int? = null
        var tags: List<String>? = null
        val poster = fixUrlNull(inner?.select("div.portfolio-tumb.ph-link > img")?.attr("src"))
        //Log.i(this.name, "Result => (imgLinkCode) ${imgLinkCode}")
        inner?.select("table")?.select("tr")?.forEach {
            val td = it?.select("td") ?: return@forEach
            val caption = td[0].text()?.lowercase()
            //Log.i(this.name, "Result => (caption) $caption")
            when (caption) {
                "name" -> {
                    title = td[1].text()
                }
                "year" -> {
                    var yearRes = td[1].toString()
                    year = if (yearRes.isNotBlank()) {
                        if (yearRes.contains("var year =")) {
                            yearRes = yearRes.substring(yearRes.indexOf("var year =") + "var year =".length)
                            //Log.i(this.name, "Result => (yearRes) $yearRes")
                            yearRes = yearRes.substring(0, yearRes.indexOf(';'))
                                .trim().removeSurrounding("'")
                        }
                        yearRes.toIntOrNull()
                    } else { null }
                }
                "genre" -> {
                    tags = td[1].select("a")?.mapNotNull { tag ->
                        tag?.text()?.trim() ?: return@mapNotNull null
                    }?.filter { a -> a.isNotBlank() }
                }
            }
        }

        var descript = body?.select("div.eText")?.text()
        if (!descript.isNullOrEmpty()) {
            try {
                descript = "(undefined_x_Polus+[.\\d+])".toRegex().replace(descript, "")
                descript = "(_x_Polus+[.\\d+])".toRegex().replace(descript, "")
                descript = descript.trim().removeSuffix("undefined").trim()
            } catch (e: java.lang.Exception) {  }
        }
        // Add links hidden in description
        listOfLinks.addAll(fetchUrls(descript))
        listOfLinks.forEach { link ->
            //Log.i(this.name, "Result => (hidden link) $link")
            descript = descript?.replace(link, "")
        }

        // Try looking for episodes, for series
        val episodeList = ArrayList<Episode>()
        val bodyText = body?.select("div.section-cotent1.col-md-12")?.select("section")
            ?.select("script")?.toString() ?: ""
        //Log.i(this.name, "Result => (bodyText) ${bodyText}")

        "(?<=ses=\\(')(.*)(?='\\).split)".toRegex().find(bodyText)?.groupValues?.get(0).let {
            if (!it.isNullOrEmpty()) {
                var count = 0
                it.split(", ").forEach { ep ->
                    count++
                    val listEpStream = listOf(ep.trim()).toJson()
                    //Log.i(this.name, "Result => (ep $count) $listEpStream")
                    episodeList.add(
                        Episode(
                            name = null,
                            season = null,
                            episode = count,
                            data = listEpStream,
                            posterUrl = null,
                            date = null
                        )
                    )
                }
            }
        }
        if (episodeList.size > 0) {
            return TvSeriesLoadResponse(
                name = title,
                url = url,
                apiName = this.name,
                type = TvType.AsianDrama,
                episodes = episodeList,
                posterUrl = poster,
                year = year,
                plot = descript,
                tags = tags
            )
        }

        // Video links for Movie
        body?.select("div.tabcontent > iframe")?.forEach {
            val linkMain = it?.attr("src")
            if (!linkMain.isNullOrEmpty()) {
                listOfLinks.add(linkMain)
                //Log.i(this.name, "Result => (linkMain) $linkMain")
            }
        }
        body?.select("div.tabcontent.hide > iframe")?.forEach {
            val linkMain = it?.attr("src")
            if (!linkMain.isNullOrEmpty()) {
                listOfLinks.add(linkMain)
                //Log.i(this.name, "Result => (linkMain hide) $linkMain")
            }
        }

        val extraLinks = body?.select("div.tabcontent.hide")?.text()
        listOfLinks.addAll(fetchUrls(extraLinks))

        val streamLinks = listOfLinks.distinct().toJson()
        //Log.i(this.name, "Result => (streamLinks) streamLinks")
        return MovieLoadResponse(
            name = title,
            url = url,
            apiName = this.name,
            type = TvType.Movie,
            dataUrl = streamLinks,
            posterUrl = poster,
            year = year,
            plot = descript,
            tags = tags
        )
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        var count = 0
        mapper.readValue<List<String>>(data).forEach { item ->
            val url = item.trim()
            if (url.isNotBlank()) {
                if (loadExtractor(url, mainUrl, callback)) {
                    count++
                }
            }
        }
        return count > 0
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/PinoyMoviePediaProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.extractors.FEmbed
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class PinoyMoviePediaProvider : MainAPI() {
    override var name = "Pinoy Moviepedia"
    override var mainUrl = "https://pinoymoviepedia.ru"
    override val lang = "tl"
    override val supportedTypes = setOf(TvType.AsianDrama)
    override val hasDownloadSupport = true
    override val hasMainPage = true
    override val hasQuickSearch = false

    override suspend fun getMainPage(): HomePageResponse {
        val all = ArrayList<HomePageList>()
        val document = app.get(mainUrl).document
        val mainbody = document.getElementsByTag("body")
        // All rows will be hardcoded bc of the nature of the site
        val rows: List<Pair<String, String>> = listOf(
            Pair("Latest Movies", "featured-titles"),
            Pair("Movies", "dt-movies"),
            Pair("Digitally Restored", "genre_digitally-restored"),
            Pair("Action", "genre_action"),
            Pair("Romance", "genre_romance"),
            Pair("Comedy", "genre_comedy"),
            Pair("Family", "genre_family")
            //Pair("Adult +18", "genre_pinay-sexy-movies")
        )
        rows.forEach { item ->
            val title = item.first
            val inner = mainbody?.select("div#${item.second} > article")

            val elements: List<SearchResponse> = inner?.mapNotNull {
                if (it == null) { return@mapNotNull null }

                // Get inner div from article
                val urlTitle = it.select("div.data") ?: return@mapNotNull null
                // Fetch details
                val link = fixUrlNull(urlTitle.select("a")?.attr("href")) ?: return@mapNotNull null
                val image = it.select("div.poster > img")?.attr("src")

                // Get Title and Year
                val titleYear = it.select("div.data.dfeatur")
                var name = titleYear?.select("h3")?.text() ?: ""
                var year = titleYear?.select("span")?.text()?.toIntOrNull()

                if (name.isEmpty()) {
                    name = urlTitle.select("h3")?.text() ?: ""
                    year = titleYear?.select("span")?.text()?.takeLast(4)?.toIntOrNull()
                }
                // Get year from name
                if (year == null) {
                    val rex = Regex("\\((\\d+)")
                    year = rex.find(name)?.value?.replace("(", "")?.toIntOrNull()
                }
                //Get quality
                val qual = getQualityFromString(it.selectFirst("span.quality")?.text())

                MovieSearchResponse(
                    name = name,
                    url = link,
                    apiName = this.name,
                    TvType.Movie,
                    posterUrl = image,
                    year = year,
                    quality = qual
                )
            }?.distinctBy { c -> c.url } ?: listOf()
            // Add
            all.add(
                HomePageList(
                    title, elements
                )
            )
        }
        return HomePageResponse(all.filter { a -> a.list.isNotEmpty() })
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=${query}"
        val document = app.get(url).document.selectFirst("div.search-page")
            ?.select("div.result-item")

        return document?.mapNotNull {
            val inner = it.select("article") ?: return@mapNotNull null
            val details = inner.select("div.details") ?: return@mapNotNull null
            val link = fixUrlNull(details.select("div.title > a")?.attr("href")) ?: return@mapNotNull null

            val title = details.select("div.title")?.text() ?: ""
            val year = details.select("div.meta > span.year")?.text()?.toIntOrNull()
            val image = inner.select("div.image > div > a > img")?.attr("src")
            val qual = getQualityFromString(it.selectFirst("span.quality")?.text())

            MovieSearchResponse(
                name = title,
                url = link,
                apiName = this.name,
                TvType.Movie,
                posterUrl = image,
                year = year,
                quality = qual
            )
        }?.distinctBy { c -> c.url } ?: listOf()
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val body = doc.getElementsByTag("body")
        val inner = body?.select("div.sheader")
        // Identify if movie or series
        val isTvSeries = doc.select("title")?.text()?.lowercase()?.contains("full episode -") ?: false

        // Video details
        val data = inner?.select("div.data")
        val poster = inner?.select("div.poster > img")?.attr("src")
        val title = data?.select("h1")?.firstOrNull()?.text()?.trim() ?: ""
        val descript = body?.select("div#info > div.wp-content p")?.firstOrNull()?.text()
        val rex = Regex("\\((\\d+)")
        val yearRes = rex.find(title)?.value ?: ""
        //Log.i(this.name, "Result => (yearRes) ${yearRes}")
        val year = yearRes.replace("(", "").toIntOrNull()
        val tags = data?.select("div.sgeneros > a")?.mapNotNull { tag ->
            tag?.text()?.trim() ?: return@mapNotNull null
        }?.toList()
        val recList = body?.select("div#single_relacionados > article")?.mapNotNull {
            val a = it.select("a") ?: return@mapNotNull null
            val aUrl = a.attr("href") ?: return@mapNotNull null
            val aImg = a.select("img")?.attr("src")
            val aName = a.select("img")?.attr("alt") ?: return@mapNotNull null
            val aYear = try {
                aName.trim().takeLast(5).removeSuffix(")").toIntOrNull()
            } catch (e: Exception) { null }

            MovieSearchResponse(
                url = aUrl,
                name = aName,
                type = TvType.Movie,
                posterUrl = aImg,
                year = aYear,
                apiName = this.name
            )
        }

        // Video links
        val playcontainer = body?.select("div#playcontainer")
        val listOfLinks: MutableList<String> = mutableListOf()
        playcontainer?.select("iframe")?.forEach { item ->
            val lnk = item?.attr("src")?.trim() ?: ""
            //Log.i(this.name, "Result => (lnk) $lnk")
            if (lnk.isNotEmpty()) {
                listOfLinks.add(lnk)
            }
        }

        // Parse episodes if series
        if (isTvSeries) {
            val episodeList = ArrayList<Episode>()
            val epLinks = playcontainer?.select("div > div > div.source-box")
            //Log.i(this.name, "Result => (epList) ${epList}")
            body?.select("div#playeroptions > ul > li")?.forEach { ep ->
                val epTitle = ep.select("span.title")?.text()
                if (!epTitle.isNullOrEmpty()) {
                    val epNum = epTitle.lowercase().replace("episode", "").trim().toIntOrNull()
                    //Log.i(this.name, "Result => (epNum) ${epNum}")
                    val href = when (epNum != null && !epLinks.isNullOrEmpty()) {
                        true -> epLinks.select("div#source-player-$epNum")
                            ?.select("iframe")?.attr("src") ?: ""
                        false -> ""
                    }
                    val streamEpLink = listOf(href.trim()).toJson()
                    //Log.i(this.name, "Result => (streamEpLink $epNum) $streamEpLink")
                    episodeList.add(
                        Episode(
                            name = null,
                            season = null,
                            episode = epNum,
                            data = streamEpLink,
                            posterUrl = poster,
                            date = null
                        )
                    )
                }
            }
            return TvSeriesLoadResponse(
                name = title,
                url = url,
                apiName = this.name,
                type = TvType.AsianDrama,
                episodes = episodeList,
                posterUrl = poster,
                year = year,
                plot = descript,
                tags = tags,
                recommendations = recList
            )
        }
        val streamlinks = listOfLinks.distinct().toJson()
        return MovieLoadResponse(
            name = title,
            url = url,
            apiName = this.name,
            type = TvType.Movie,
            dataUrl = streamlinks,
            posterUrl = poster,
            year = year,
            plot = descript,
            tags = tags,
            recommendations = recList
        )
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        // parse movie servers
        var count = 0
        tryParseJson<List<String>>(data)?.apmap { link ->
            count++
            if (link.contains("fembed.com")) {
                val extractor = FEmbed()
                extractor.domainUrl = "diasfem.com"
                extractor.getUrl(data).forEach {
                    callback.invoke(it)
                }
            } else {
                loadExtractor(link, mainUrl, callback)
            }
        }
        return count > 0
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/PinoyMoviesEsProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import android.util.Log
import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.extractors.FEmbed
import com.lagradost.cloudstream3.extractors.helper.VstreamhubHelper
import com.lagradost.cloudstream3.network.DdosGuardKiller
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor
import org.jsoup.select.Elements

class PinoyMoviesEsProvider : MainAPI() {
    override var name = "Pinoy Movies"
    override var mainUrl = "https://pinoymovies.es"
    override val lang = "tl"
    override val supportedTypes = setOf(TvType.AsianDrama)
    override val hasDownloadSupport = false
    override val hasMainPage = true
    override val hasQuickSearch = false

    data class EmbedUrl(
        @JsonProperty("embed_url") val embed_url: String,
        @JsonProperty("type") val type: String
    )

    private fun getRowElements(mainbody: Elements, rows: List<Pair<String, String>>, sep: String): MutableList<HomePageList> {
        val all = mutableListOf<HomePageList>()
        for (item in rows) {
            val title = item.first
            val elements = mainbody.select("div${sep}${item.second} > article")?.mapNotNull {
                // Get inner div from article
                var urlTitle = it?.select("div.data.dfeatur")
                if (urlTitle.isNullOrEmpty()) {
                    urlTitle = it?.select("div.data")
                }
                if (urlTitle.isNullOrEmpty()) { return@mapNotNull null }
                // Fetch details
                val link = fixUrlNull(urlTitle.select("a")?.attr("href"))
                if (link.isNullOrBlank()) { return@mapNotNull null }

                val image = it?.select("div.poster > img")?.attr("data-src")

                // Get Title and Year
                val name = urlTitle.select("h3")?.text()
                    ?: urlTitle.select("h2")?.text()
                    ?: urlTitle.select("h1")?.text()
                if (name.isNullOrBlank()) { return@mapNotNull null }

                var year = urlTitle.select("span")?.text()?.toIntOrNull()

                if (year == null) {
                    // Get year from name
                    val rex = Regex("\\((\\d+)")
                    year = rex.find(name)?.value?.replace("(", "")?.toIntOrNull()
                }
                //Log.i(this.name, "ApiError -> ${it.selectFirst("span.quality")?.text()}")
                val searchQual = getQualityFromString(it.selectFirst("span.quality")?.text())

                MovieSearchResponse(
                    name = name,
                    url = link,
                    apiName = this.name,
                    type = TvType.Movie,
                    posterUrl = image,
                    year = year,
                    quality = searchQual
                )
            }?.distinctBy { c -> c.url } ?: listOf()
            //Add to list of homepages
            if (!elements.isNullOrEmpty()) {
                all.add(
                    HomePageList(
                        title, elements
                    )
                )
            }
        }
        return all
    }
    override suspend fun getMainPage(): HomePageResponse {
        val all = ArrayList<HomePageList>()
        val document = app.get(mainUrl).document
        val mainbody = document.getElementsByTag("body")
        if (mainbody != null) {
            // All rows will be hardcoded bc of the nature of the site
            val homepage1 = getRowElements(mainbody, listOf(
                Pair("Suggestion", "items.featured"),
                Pair("All Movies", "items.full")
            ), ".")
            if (homepage1.isNotEmpty()) {
                all.addAll(homepage1)
            }
            //2nd rows
            val homepage2 = getRowElements(mainbody, listOf(
                Pair("Action", "genre_action"),
                Pair("Comedy", "genre_comedy"),
                Pair("Romance", "genre_romance"),
                Pair("Horror", "genre_horror")
                //Pair("Rated-R", "genre_rated-r")
            ), "#")
            if (homepage2.isNotEmpty()) {
                all.addAll(homepage2)
            }
        }
        return HomePageResponse(all)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=${query.replace(" ", "+")}"
        val document = app.get(url, interceptor = DdosGuardKiller(true))
            .document.select("div#archive-content > article")

        return document?.mapNotNull {
            // Fetch details
            val urlTitle = it?.select("div.data") ?: return@mapNotNull null
            val link = urlTitle.select("a")?.attr("href") ?: return@mapNotNull null
            val title = urlTitle.text()?.trim() ?: "<No Title>"
            val year = urlTitle.select("span.year")?.text()?.toIntOrNull()
            val image = it.select("div.poster > img")?.attr("src")
            val searchQual = getQualityFromString(it.selectFirst("span.quality")?.text())

            MovieSearchResponse(
                name = title,
                url = link,
                apiName = this.name,
                type = TvType.Movie,
                posterUrl = image,
                year = year,
                quality = searchQual
            )
        }?.distinctBy { it.url } ?: listOf()
    }

    override suspend fun load(url: String): LoadResponse {
        val doc = app.get(url).document
        val body = doc.getElementsByTag("body")
        val inner = body?.select("div.sheader")

        // Video details
        val data = inner?.select("div.sheader > div.data")
        val title = data?.select("h1")?.firstOrNull()?.text() ?: "<Untitled>"
        val year = data?.select("span.date")?.text()?.takeLast(4)?.toIntOrNull()

        val descript = body?.select("div#info > div.wp-content")?.text()
        val poster = body?.select("div.poster > img")?.attr("src")
        val tags = data?.select("div.sgeneros > a")?.mapNotNull { tag ->
            tag?.text() ?: return@mapNotNull null
        }?.toList()
        val recList = body?.select("div#single_relacionados > article")?.mapNotNull {
            val a = it.select("a") ?: return@mapNotNull null
            val aUrl = a.attr("href") ?: return@mapNotNull null
            val aImg = a.select("img")?.attr("data-src")
            val aName = a.select("img")?.attr("alt") ?: return@mapNotNull null
            val aYear = try {
                aName.trim().takeLast(5).removeSuffix(")").toIntOrNull()
            } catch (e: Exception) { null }
            MovieSearchResponse(
                url = aUrl,
                name = aName,
                type = TvType.Movie,
                posterUrl = aImg,
                year = aYear,
                apiName = this.name
            )
        }

        // Video links
        val listOfLinks: MutableList<String> = mutableListOf()
        val postlist = body?.select("div#playeroptions > ul > li")?.mapNotNull {
            it?.attr("data-post") ?: return@mapNotNull null
        }?.filter { it.isNotBlank() }?.distinct() ?: listOf()

        postlist.apmap { datapost ->
            //Log.i(this.name, "Result => (datapost) ${datapost}")
            val content = mapOf(
                Pair("action", "doo_player_ajax"),
                Pair("post", datapost),
                Pair("nume", "1"),
                Pair("type", "movie")
            )
            val innerPage = app.post("https://pinoymovies.es/wp-admin/admin-ajax.php ",
                referer = url, data = content).document.select("body")?.text()?.trim()
            if (!innerPage.isNullOrBlank()) {
                tryParseJson<EmbedUrl>(innerPage)?.let {
                    listOfLinks.add(it.embed_url)
                }
            }
        }
        return MovieLoadResponse(
            name = title,
            url = url,
            apiName = this.name,
            type = TvType.Movie,
            dataUrl = listOfLinks.toJson(),
            posterUrl = poster,
            year = year,
            plot = descript,
            tags = tags,
            recommendations = recList
        )
    }

    override suspend fun loadLinks(
            data: String,
            isCasting: Boolean,
            subtitleCallback: (SubtitleFile) -> Unit,
            callback: (ExtractorLink) -> Unit
    ): Boolean {
        // parse movie servers
        var count = 0
        tryParseJson<List<String>>(data)?.forEach { link ->
            //Log.i(this.name, "Result => (link) $link")
            if (link.startsWith("https://vstreamhub.com")) {
                VstreamhubHelper.getUrls(link, callback)
                count++
            } else if (link.contains("fembed.com")) {
                val extractor = FEmbed()
                extractor.domainUrl = "diasfem.com"
                extractor.getUrl(data).forEach {
                    callback.invoke(it)
                    count++
                }
            } else {
                if (loadExtractor(link, mainUrl, callback)) {
                    count++
                }
            }
        }
        return count > 0
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/RebahinProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.network.WebViewResolver
import com.lagradost.cloudstream3.utils.*
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import org.jsoup.nodes.Element
import java.net.URI
import java.util.ArrayList

class RebahinProvider : MainAPI() {
    override var mainUrl = "http://167.88.14.149"
    override var name = "Rebahin"
    override val hasMainPage = true
    override val lang = "id"
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
        TvType.Anime,
        TvType.AsianDrama
    )

    override suspend fun getMainPage(): HomePageResponse {
        val urls = listOf(
            Pair("Featured", "xtab1"),
            Pair("Film Terbaru", "xtab2"),
            Pair("Romance", "xtab3"),
            Pair("Drama", "xtab4"),
            Pair("Action", "xtab5"),
            Pair("Scifi", "xtab6"),
            Pair("Tv Series Terbaru", "stab1"),
            Pair("Anime Series", "stab2"),
            Pair("Drakor Series", "stab3"),
            Pair("West Series", "stab4"),
            Pair("China Series", "stab5"),
            Pair("Japan Series", "stab6"),
        )

        val items = ArrayList<HomePageList>()

        for ((header, tab) in urls) {
            try {
                val home =
                    app.get("$mainUrl/wp-content/themes/indoxxi/ajax-top-$tab.php").document.select(
                        "div.ml-item"
                    ).map {
                        it.toSearchResult()
                    }
                items.add(HomePageList(header, home))
            } catch (e: Exception) {
                logError(e)
            }
        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    private fun Element.toSearchResult(): SearchResponse {
        val title = this.selectFirst("span.mli-info > h2")!!.text().trim()
        val href = this.selectFirst("a")!!.attr("href")
        val type =
            if (this.select("span.mli-quality").isNotEmpty()) TvType.Movie else TvType.TvSeries
        return if (type == TvType.Movie) {
            val posterUrl = this.select("img").attr("src")
            val quality = getQualityFromString(this.select("span.mli-quality").text().trim())
            newMovieSearchResponse(title, href, TvType.Movie) {
                this.posterUrl = posterUrl
                this.quality = quality
            }
        } else {
            val posterUrl =
                this.select("img").attr("src").ifEmpty { this.select("img").attr("data-original") }
            val episode =
                this.select("div.mli-eps > span").text().replace(Regex("[^0-9]"), "").toIntOrNull()
            newAnimeSearchResponse(title, href, TvType.TvSeries) {
                this.posterUrl = posterUrl
                addDubStatus(dubExist = false, subExist = true, subEpisodes = episode)
            }
        }
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val link = "$mainUrl/?s=$query"
        val document = app.get(link).document

        return document.select("div.ml-item").map {
            it.toSearchResult()
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val title = document.selectFirst("h3[itemprop=name]")!!.ownText().trim()
        val poster = document.select(".mvic-desc > div.thumb.mvic-thumb").attr("style")
            .substringAfter("url(").substringBeforeLast(")")
        val tags = document.select("span[itemprop=genre]").map { it.text() }

        val year = Regex("([0-9]{4}?)-").find(
            document.selectFirst(".mvici-right > p:nth-child(3)")!!.ownText().trim()
        )?.groupValues?.get(1).toString().toIntOrNull()
        val tvType = if (url.contains("/series/")) TvType.TvSeries else TvType.Movie
        val description = document.select("span[itemprop=reviewBody] > p").text().trim()
        val rating = document.selectFirst("span[itemprop=ratingValue]")?.text()?.toRatingInt()
        val duration = document.selectFirst(".mvici-right > p:nth-child(1)")!!
            .ownText().replace(Regex("[^0-9]"), "").toIntOrNull()
        val actors = document.select("span[itemprop=actor] > a").map {
            ActorData(
                Actor(
                    it.select("span").text()
                )
            )
        }

        return if (tvType == TvType.TvSeries) {
            val baseLink = document.select("div#mv-info > a").attr("href")
            val episodes = app.get(baseLink).document.select("div#list-eps > a").map {
                val name = it.text().replace(Regex("Server\\s?\\d"), "").trim()
                name
            }.distinct().map {
                val name = it
//                val epNum = Regex("[^r|R]\\s(\\d+)").find(it)?.groupValues?.get(1)?.toIntOrNull()
                val epNum = it.replace(Regex("[^0-9]"), "").toIntOrNull()
                val link = "$baseLink?ep=$epNum"
                newEpisode(link) {
                    this.name = name
                    this.episode = epNum
                }
            }
            newTvSeriesLoadResponse(title, url, TvType.TvSeries, episodes) {
                this.posterUrl = poster
                this.year = year
                this.plot = description
                this.tags = tags
                this.rating = rating
                this.duration = duration
                this.actors = actors
            }
        } else {
            val episodes = document.select("div#mv-info > a").attr("href")
            newMovieLoadResponse(title, url, TvType.Movie, episodes) {
                this.posterUrl = poster
                this.year = year
                this.plot = description
                this.tags = tags
                this.rating = rating
                this.duration = duration
                this.actors = actors
            }
        }
    }

    private data class ResponseLocal(
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String,
        @JsonProperty("type") val type: String?
    )

    private data class Tracks(
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String?,
        @JsonProperty("kind") val kind: String?
    )

    private suspend fun invokeLokalSource(
        url: String,
        name: String,
        ref: String,
        subCallback: (SubtitleFile) -> Unit,
        sourceCallback: (ExtractorLink) -> Unit
    ) {
        val document = app.get(
            url,
            allowRedirects = false,
            referer = mainUrl,
            headers = mapOf("Accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8")
        ).document

        document.select("script").map { script ->
            if (script.data().contains("sources: [")) {
                val source = tryParseJson<ResponseLocal>(
                    script.data().substringAfter("sources: [").substringBefore("],"))
                val m3uData = app.get(source!!.file, referer = ref).text
                val quality = Regex("\\d{3,4}\\.m3u8").findAll(m3uData).map { it.value }.toList()

                quality.forEach {
                    sourceCallback.invoke(
                        ExtractorLink(
                            source = name,
                            name = name,
                            url = source.file.replace("video.m3u8", it),
                            referer = ref,
                            quality = getQualityFromName("${it.replace(".m3u8", "")}p"),
                            isM3u8 = true
                        )
                    )
                }

                val trackJson = script.data().substringAfter("tracks: [").substringBefore("],")
                val track = tryParseJson<List<Tracks>>("[$trackJson]")
                track?.map {
                    subCallback(
                        SubtitleFile(
                            "Indonesian",
                            (if (it.file.contains(".srt")) it.file else null)!!
                        )
                    )
                }
            }
        }
    }

    private data class Captions(
        @JsonProperty("id") val id: String,
        @JsonProperty("hash") val hash: String,
        @JsonProperty("language") val language: String,
    )

    private data class Data(
        @JsonProperty("file") val file: String,
        @JsonProperty("label") val label: String,
    )

    private data class Player(
        @JsonProperty("poster_file") val poster_file: String,
    )

    private data class ResponseKotakAjair(
        @JsonProperty("success") val success: Boolean,
        @JsonProperty("player") val player: Player,
        @JsonProperty("data") val data: List<Data>?,
        @JsonProperty("captions") val captions: List<Captions>?
    )

    private suspend fun invokeKotakAjairSource(
        url: String,
        subCallback: (SubtitleFile) -> Unit,
        sourceCallback: (ExtractorLink) -> Unit
    ) {
        val domainUrl = "https://kotakajair.xyz"
        val id = url.trimEnd('/').split("/").last()
        val sources = app.post(
            url = "$domainUrl/api/source/$id",
            data = mapOf("r" to mainUrl, "d" to URI(url).host)
        ).parsed<ResponseKotakAjair>()

        sources.data?.map {
            sourceCallback.invoke(
                ExtractorLink(
                    name,
                    "KotakAjair",
                    fixUrl(it.file),
                    referer = url,
                    quality = getQualityFromName(it.label)
                )
            )
        }
        val userData = sources.player.poster_file.split("/")[2]
        sources.captions?.map {
            subCallback(
                SubtitleFile(
                    if (it.language.lowercase().contains("eng")) it.language else "Indonesian",
                    "$domainUrl/asset/userdata/$userData/caption/${it.hash}/${it.id}.srt"
                )
            )
        }

    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {

        val sources = if (data.contains("/play")) {
            app.get(data).document.select(".server-wrapper").mapNotNull {
                val iframeLink =
                    "${mainUrl}/iembed/?source=${it.selectFirst("div.server")?.attr("data-iframe")}"
                app.get(iframeLink).document.select("iframe").attr("src")
            }
        } else {
            val fixData = Regex("(.*?)\\?ep").find(data)?.groupValues?.get(1).toString()
            val document = app.get(fixData).document
            val ep = Regex("\\?ep=([0-9]+)").find(data)?.groupValues?.get(1).toString()
            val title = document.selectFirst("div#list-eps > a")?.text()?.replace(Regex("[\\d]"), "")
                    ?.trim()?.replace("Server", "")?.trim()
            document.select("div#list-eps > a:matches(${title}\\s?${ep}$)").mapNotNull {
                val iframeLink = "${mainUrl}/iembed/?source=${it.attr("data-iframe")}"
                app.get(iframeLink).document.select("iframe")
                    .attr("src")
            }
        }

        sources.apmap {
            safeApiCall {
                when {
                    it.startsWith("http://172.96.161.72") -> invokeLokalSource(
                        it,
                        this.name,
                        "http://172.96.161.72/",
                        subtitleCallback,
                        callback
                    )
                    it.startsWith("https://kotakajair.xyz") -> invokeKotakAjairSource(
                        it,
                        subtitleCallback,
                        callback
                    )
                    else -> {
                        loadExtractor(it, data, callback)
                        if (it.startsWith("https://sbfull.com")) {
                            val response = app.get(
                                it, interceptor = WebViewResolver(
                                    Regex("""\.srt""")
                                )
                            )
                            subtitleCallback.invoke(
                                SubtitleFile(
                                    "Indonesian",
                                    response.url
                                )
                            )
                        }
                    }
                }
            }
        }

        return true
    }

}




================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/SeriesflixProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addDuration
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class SeriesflixProvider : MainAPI() {
    override var mainUrl = "https://seriesflix.video"
    override var name = "Seriesflix"
    override val lang = "es"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val urls = listOf(
            Pair("$mainUrl/ver-series-online/", "Series"),
            Pair("$mainUrl/genero/accion/", "AcciÃ³n"),
            Pair("$mainUrl/genero/ciencia-ficcion/", "Ciencia ficciÃ³n"),
        )
        for (i in urls) {
            try {
                val soup = app.get(i.first).document
                val home = soup.select("article.TPost.B").map {
                    val title = it.selectFirst("h2.title")!!.text()
                    val link = it.selectFirst("a")!!.attr("href")
                    TvSeriesSearchResponse(
                        title,
                        link,
                        this.name,
                        TvType.Movie,
                        it.selectFirst("figure img")!!.attr("src"),
                        null,
                        null,
                    )
                }

                items.add(HomePageList(i.second, home))
            } catch (e: Exception) {
                logError(e)
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=$query"
        val doc = app.get(url).document
        return doc.select("article.TPost.B").map {
            val href = it.selectFirst("a")!!.attr("href")
            val poster = it.selectFirst("figure img")!!.attr("src")
            val name = it.selectFirst("h2.title")!!.text()
            val isMovie = href.contains("/movies/")
            if (isMovie) {
                MovieSearchResponse(
                    name,
                    href,
                    this.name,
                    TvType.Movie,
                    poster,
                    null
                )
            } else {
                TvSeriesSearchResponse(
                    name,
                    href,
                    this.name,
                    TvType.TvSeries,
                    poster,
                    null,
                    null
                )
            }
        }.toList()
    }


    override suspend fun load(url: String): LoadResponse {
        val type = if (url.contains("/movies/")) TvType.Movie else TvType.TvSeries

        val document = app.get(url).document

        val title = document.selectFirst("h1.Title")!!.text()
        val descRegex = Regex("(Recuerda.*Seriesflix.)")
        val descipt = document.selectFirst("div.Description > p")!!.text().replace(descRegex, "")
        val rating =
            document.selectFirst("div.Vote > div.post-ratings > span")?.text()?.toRatingInt()
        val year = document.selectFirst("span.Date")?.text()
        // ?: does not work
        val duration = try {
            document.selectFirst("span.Time")!!.text()
        } catch (e: Exception) {
            null
        }
        val postercss = document.selectFirst("head").toString()
        val posterRegex =
            Regex("(\"og:image\" content=\"https://seriesflix.video/wp-content/uploads/(\\d+)/(\\d+)/?.*.jpg)")
        val poster = try {
            posterRegex.findAll(postercss).map {
                it.value.replace("\"og:image\" content=\"", "")
            }.toList().first()
        } catch (e: Exception) {
            document.select(".TPostBg").attr("src")
        }

        if (type == TvType.TvSeries) {
            val list = ArrayList<Pair<Int, String>>()

            document.select("main > section.SeasonBx > div > div.Title > a").forEach { element ->
                val season = element.selectFirst("> span")?.text()?.toIntOrNull()
                val href = element.attr("href")
                if (season != null && season > 0 && !href.isNullOrBlank()) {
                    list.add(Pair(season, fixUrl(href)))
                }
            }
            if (list.isEmpty()) throw ErrorLoadingException("No Seasons Found")

            val episodeList = ArrayList<Episode>()

            for (season in list) {
                val seasonDocument = app.get(season.second).document
                val episodes = seasonDocument.select("table > tbody > tr")
                if (episodes.isNotEmpty()) {
                    episodes.forEach { episode ->
                        val epNum = episode.selectFirst("> td > span.Num")?.text()?.toIntOrNull()
                        val epthumb = episode.selectFirst("img")?.attr("src")
                        val aName = episode.selectFirst("> td.MvTbTtl > a")
                        val name = aName!!.text()
                        val href = aName!!.attr("href")
                        val date = episode.selectFirst("> td.MvTbTtl > span")?.text()
                        episodeList.add(
                            newEpisode(href) {
                                this.name = name
                                this.season = season.first
                                this.episode = epNum
                                this.posterUrl = fixUrlNull(epthumb)
                                addDate(date)
                            }
                        )
                    }
                }
            }
            return TvSeriesLoadResponse(
                title,
                url,
                this.name,
                type,
                episodeList,
                fixUrlNull(poster),
                year?.toIntOrNull(),
                descipt,
                null,
                rating
            )
        } else {
            return newMovieLoadResponse(
                title,
                url,
                type,
                url
            ) {
                posterUrl = fixUrlNull(poster)
                this.year = year?.toIntOrNull()
                this.plot = descipt
                this.rating = rating
                addDuration(duration)
            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        app.get(data).document.select("ul.ListOptions li").forEach {
            val movieID = it.attr("data-id")
            val serverID = it.attr("data-key")
            val type = if (data.contains("movies")) 1 else 2
            val url =
                "$mainUrl/?trembed=$serverID&trid=$movieID&trtype=$type" //This is to get the POST key value
            val doc1 = app.get(url).document
            doc1.select("div.Video iframe").apmap {
                val iframe = it.attr("src")
                val postkey =
                    iframe.replace("https://sc.seriesflix.video/index.php?h=", "") // this obtains
                // djNIdHNCR2lKTGpnc3YwK3pyRCs3L2xkQmljSUZ4ai9ibTcza0JRODNMcmFIZ0hPejdlYW0yanJIL2prQ1JCZA POST KEY
                app.post(
                    "https://sc.seriesflix.video/r.php",
                    headers = mapOf(
                        "Host" to "sc.seriesflix.video",
                        "User-Agent" to USER_AGENT,
                        "Accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8",
                        "Accept-Language" to "en-US,en;q=0.5",
                        "Content-Type" to "application/x-www-form-urlencoded",
                        "Origin" to "null",
                        "DNT" to "1",
                        "Alt-Used" to "sc.seriesflix.video",
                        "Connection" to "keep-alive",
                        "Upgrade-Insecure-Requests" to "1",
                        "Sec-Fetch-Dest" to "iframe",
                        "Sec-Fetch-Mode" to "navigate",
                        "Sec-Fetch-Site" to "same-origin",
                        "Sec-Fetch-User" to "?1",
                    ),
                    params = mapOf(Pair("h", postkey)),
                    data = mapOf(Pair("h", postkey)),
                    allowRedirects = false
                ).okhttpResponse.headers.values("location").apmap { link ->
                    val url1 = link.replace("#bu", "")
                    loadExtractor(url1, data, callback)
                }
            }
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/SflixProProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

class SflixProProvider : BflixProvider() {
    override var mainUrl = "https://sflix.pro"
    override var name = "Sflix.pro"
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/SflixProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import android.util.Log
import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.getCaptchaToken
import com.lagradost.cloudstream3.APIHolder.unixTimeMS
import com.lagradost.cloudstream3.LoadResponse.Companion.addActors
import com.lagradost.cloudstream3.LoadResponse.Companion.addDuration
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.animeproviders.ZoroProvider
import com.lagradost.cloudstream3.mvvm.suspendSafeApiCall
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.Coroutines.ioSafe
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.M3u8Helper
import com.lagradost.cloudstream3.utils.getQualityFromName
import com.lagradost.nicehttp.NiceResponse
import kotlinx.coroutines.delay
import okhttp3.RequestBody.Companion.toRequestBody
import org.jsoup.Jsoup
import org.jsoup.nodes.Element
import java.net.URI
import kotlin.system.measureTimeMillis

open class SflixProvider : MainAPI() {
    override var mainUrl = "https://sflix.to"
    override var name = "Sflix.to"

    override val hasQuickSearch = false
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val usesWebView = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )
    override val vpnStatus = VPNStatus.None

    override suspend fun getMainPage(): HomePageResponse {
        val html = app.get("$mainUrl/home").text
        val document = Jsoup.parse(html)

        val all = ArrayList<HomePageList>()

        val map = mapOf(
            "Trending Movies" to "div#trending-movies",
            "Trending TV Shows" to "div#trending-tv",
        )
        map.forEach {
            all.add(HomePageList(
                it.key,
                document.select(it.value).select("div.flw-item").map { element ->
                    element.toSearchResult()
                }
            ))
        }

        document.select("section.block_area.block_area_home.section-id-02").forEach {
            val title = it.select("h2.cat-heading").text().trim()
            val elements = it.select("div.flw-item").map { element ->
                element.toSearchResult()
            }
            all.add(HomePageList(title, elements))
        }

        return HomePageResponse(all)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/search/${query.replace(" ", "-")}"
        val html = app.get(url).text
        val document = Jsoup.parse(html)

        return document.select("div.flw-item").map {
            val title = it.select("h2.film-name").text()
            val href = fixUrl(it.select("a").attr("href"))
            val year = it.select("span.fdi-item").text().toIntOrNull()
            val image = it.select("img").attr("data-src")
            val isMovie = href.contains("/movie/")

            val metaInfo = it.select("div.fd-infor > span.fdi-item")
            // val rating = metaInfo[0].text()
            val quality = getQualityFromString(metaInfo.getOrNull(1)?.text())

            if (isMovie) {
                MovieSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.Movie,
                    image,
                    year,
                    quality = quality
                )
            } else {
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.TvSeries,
                    image,
                    year,
                    null,
                    quality = quality
                )
            }
        }
    }

    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document

        val details = document.select("div.detail_page-watch")
        val img = details.select("img.film-poster-img")
        val posterUrl = img.attr("src")
        val title = img.attr("title") ?: throw ErrorLoadingException("No Title")

        /*
        val year = Regex("""[Rr]eleased:\s*(\d{4})""").find(
            document.select("div.elements").text()
        )?.groupValues?.get(1)?.toIntOrNull()
        val duration = Regex("""[Dd]uration:\s*(\d*)""").find(
            document.select("div.elements").text()
        )?.groupValues?.get(1)?.trim()?.plus(" min")*/
        var duration = document.selectFirst(".fs-item > .duration")?.text()?.trim()
        var year: Int? = null
        var tags: List<String>? = null
        var cast: List<String>? = null
        val youtubeTrailer = document.selectFirst("iframe#iframe-trailer")?.attr("data-src")
        val rating = document.selectFirst(".fs-item > .imdb")?.text()?.trim()
            ?.removePrefix("IMDB:")?.toRatingInt()

        document.select("div.elements > .row > div > .row-line").forEach { element ->
            val type = element?.select(".type")?.text() ?: return@forEach
            when {
                type.contains("Released") -> {
                    year = Regex("\\d+").find(
                        element.ownText() ?: return@forEach
                    )?.groupValues?.firstOrNull()?.toIntOrNull()
                }
                type.contains("Genre") -> {
                    tags = element.select("a").mapNotNull { it.text() }
                }
                type.contains("Cast") -> {
                    cast = element.select("a").mapNotNull { it.text() }
                }
                type.contains("Duration") -> {
                    duration = duration ?: element.ownText().trim()
                }
            }
        }
        val plot = details.select("div.description").text().replace("Overview:", "").trim()

        val isMovie = url.contains("/movie/")

        // https://sflix.to/movie/free-never-say-never-again-hd-18317 -> 18317
        val idRegex = Regex(""".*-(\d+)""")
        val dataId = details.attr("data-id")
        val id = if (dataId.isNullOrEmpty())
            idRegex.find(url)?.groupValues?.get(1)
                ?: throw ErrorLoadingException("Unable to get id from '$url'")
        else dataId

        val recommendations =
            document.select("div.film_list-wrap > div.flw-item").mapNotNull { element ->
                val titleHeader =
                    element.select("div.film-detail > .film-name > a") ?: return@mapNotNull null
                val recUrl = fixUrlNull(titleHeader.attr("href")) ?: return@mapNotNull null
                val recTitle = titleHeader.text() ?: return@mapNotNull null
                val poster = element.select("div.film-poster > img").attr("data-src")
                MovieSearchResponse(
                    recTitle,
                    recUrl,
                    this.name,
                    if (recUrl.contains("/movie/")) TvType.Movie else TvType.TvSeries,
                    poster,
                    year = null
                )
            }

        if (isMovie) {
            // Movies
            val episodesUrl = "$mainUrl/ajax/movie/episodes/$id"
            val episodes = app.get(episodesUrl).text

            // Supported streams, they're identical
            val sourceIds = Jsoup.parse(episodes).select("a").mapNotNull { element ->
                var sourceId = element.attr("data-id")
                if (sourceId.isNullOrEmpty())
                    sourceId = element.attr("data-linkid")

                if (element.select("span").text().trim().isValidServer()) {
                    if (sourceId.isNullOrEmpty()) {
                        fixUrlNull(element.attr("href"))
                    } else {
                        "$url.$sourceId".replace("/movie/", "/watch-movie/")
                    }
                } else {
                    null
                }
            }

            val comingSoon = sourceIds.isEmpty()

            return newMovieLoadResponse(title, url, TvType.Movie, sourceIds) {
                this.year = year
                this.posterUrl = posterUrl
                this.plot = plot
                addDuration(duration)
                addActors(cast)
                this.tags = tags
                this.recommendations = recommendations
                this.comingSoon = comingSoon
                addTrailer(youtubeTrailer)
                this.rating = rating
            }
        } else {
            val seasonsDocument = app.get("$mainUrl/ajax/v2/tv/seasons/$id").document
            val episodes = arrayListOf<Episode>()
            var seasonItems = seasonsDocument.select("div.dropdown-menu.dropdown-menu-model > a")
            if (seasonItems.isNullOrEmpty())
                seasonItems = seasonsDocument.select("div.dropdown-menu > a.dropdown-item")
            seasonItems.apmapIndexed { season, element ->
                val seasonId = element.attr("data-id")
                if (seasonId.isNullOrBlank()) return@apmapIndexed

                var episode = 0
                val seasonEpisodes = app.get("$mainUrl/ajax/v2/season/episodes/$seasonId").document
                var seasonEpisodesItems =
                    seasonEpisodes.select("div.flw-item.film_single-item.episode-item.eps-item")
                if (seasonEpisodesItems.isNullOrEmpty()) {
                    seasonEpisodesItems =
                        seasonEpisodes.select("ul > li > a")
                }
                seasonEpisodesItems.forEach {
                    val episodeImg = it?.select("img")
                    val episodeTitle = episodeImg?.attr("title") ?: it.ownText()
                    val episodePosterUrl = episodeImg?.attr("src")
                    val episodeData = it.attr("data-id") ?: return@forEach

                    episode++

                    val episodeNum =
                        (it.select("div.episode-number").text()
                            ?: episodeTitle).let { str ->
                            Regex("""\d+""").find(str)?.groupValues?.firstOrNull()
                                ?.toIntOrNull()
                        } ?: episode

                    episodes.add(
                        newEpisode(Pair(url, episodeData)) {
                            this.posterUrl = fixUrlNull(episodePosterUrl)
                            this.name = episodeTitle?.removePrefix("Episode $episodeNum: ")
                            this.season = season + 1
                            this.episode = episodeNum
                        }
                    )
                }
            }

            return newTvSeriesLoadResponse(title, url, TvType.TvSeries, episodes) {
                this.posterUrl = posterUrl
                this.year = year
                this.plot = plot
                addDuration(duration)
                addActors(cast)
                this.tags = tags
                this.recommendations = recommendations
                addTrailer(youtubeTrailer)
                this.rating = rating
            }
        }
    }

    data class Tracks(
        @JsonProperty("file") val file: String?,
        @JsonProperty("label") val label: String?,
        @JsonProperty("kind") val kind: String?
    )

    data class Sources(
        @JsonProperty("file") val file: String?,
        @JsonProperty("type") val type: String?,
        @JsonProperty("label") val label: String?
    )

    data class SourceObject(
        @JsonProperty("sources") val sources: List<Sources?>?,
        @JsonProperty("sources_1") val sources1: List<Sources?>?,
        @JsonProperty("sources_2") val sources2: List<Sources?>?,
        @JsonProperty("sourcesBackup") val sourcesBackup: List<Sources?>?,
        @JsonProperty("tracks") val tracks: List<Tracks?>?
    )

    data class IframeJson(
//        @JsonProperty("type") val type: String? = null,
        @JsonProperty("link") val link: String? = null,
//        @JsonProperty("sources") val sources: ArrayList<String> = arrayListOf(),
//        @JsonProperty("tracks") val tracks: ArrayList<String> = arrayListOf(),
//        @JsonProperty("title") val title: String? = null
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val urls = (tryParseJson<Pair<String, String>>(data)?.let { (prefix, server) ->
            val episodesUrl = "$mainUrl/ajax/v2/episode/servers/$server"

            // Supported streams, they're identical
            app.get(episodesUrl).document.select("a").mapNotNull { element ->
                val id = element?.attr("data-id") ?: return@mapNotNull null
                if (element.select("span").text().trim().isValidServer()) {
                    "$prefix.$id".replace("/tv/", "/watch-tv/")
                } else {
                    null
                }
            }
        } ?: tryParseJson<List<String>>(data))?.distinct()

        urls?.apmap { url ->
            suspendSafeApiCall {
                // Possible without token

//                val response = app.get(url)
//                val key =
//                    response.document.select("script[src*=https://www.google.com/recaptcha/api.js?render=]")
//                        .attr("src").substringAfter("render=")
//                val token = getCaptchaToken(mainUrl, key) ?: return@suspendSafeApiCall

                val serverId = url.substringAfterLast(".")
                val iframeLink =
                    app.get("${this.mainUrl}/ajax/get_link/$serverId").parsed<IframeJson>().link
                        ?: return@suspendSafeApiCall

                // Some smarter ws11 or w10 selection might be required in the future.
                val extractorData =
                    "https://ws11.rabbitstream.net/socket.io/?EIO=4&transport=polling"

                extractRabbitStream(iframeLink, subtitleCallback, callback, extractorData) { it }
            }
        }

        return !urls.isNullOrEmpty()
    }

    override suspend fun extractorVerifierJob(extractorData: String?) {
        runSflixExtractorVerifierJob(this, extractorData, "https://rabbitstream.net/")
    }

    private fun Element.toSearchResult(): SearchResponse {
        val inner = this.selectFirst("div.film-poster")
        val img = inner!!.select("img")
        val title = img.attr("title")
        val posterUrl = img.attr("data-src") ?: img.attr("src")
        val href = fixUrl(inner.select("a").attr("href"))
        val isMovie = href.contains("/movie/")
        val otherInfo =
            this.selectFirst("div.film-detail > div.fd-infor")?.select("span")?.toList() ?: listOf()
        //var rating: Int? = null
        var year: Int? = null
        var quality: SearchQuality? = null
        when (otherInfo.size) {
            1 -> {
                year = otherInfo[0]?.text()?.trim()?.toIntOrNull()
            }
            2 -> {
                year = otherInfo[0]?.text()?.trim()?.toIntOrNull()
            }
            3 -> {
                //rating = otherInfo[0]?.text()?.toRatingInt()
                quality = getQualityFromString(otherInfo[1]?.text())
                year = otherInfo[2]?.text()?.trim()?.toIntOrNull()
            }
        }

        return if (isMovie) {
            MovieSearchResponse(
                title,
                href,
                this@SflixProvider.name,
                TvType.Movie,
                posterUrl = posterUrl,
                year = year,
                quality = quality,
            )
        } else {
            TvSeriesSearchResponse(
                title,
                href,
                this@SflixProvider.name,
                TvType.Movie,
                posterUrl,
                year = year,
                episodes = null,
                quality = quality,
            )
        }
    }

    companion object {
        data class PollingData(
            @JsonProperty("sid") val sid: String? = null,
            @JsonProperty("upgrades") val upgrades: ArrayList<String> = arrayListOf(),
            @JsonProperty("pingInterval") val pingInterval: Int? = null,
            @JsonProperty("pingTimeout") val pingTimeout: Int? = null
        )

        /*
        # python code to figure out the time offset based on code if necessary
        chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_"
        code = "Nxa_-bM"
        total = 0
        for i, char in enumerate(code[::-1]):
            index = chars.index(char)
            value = index * 64**i
            total += value
        print(f"total {total}")
        */
        private fun generateTimeStamp(): String {
            val chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_"
            var code = ""
            var time = unixTimeMS
            while (time > 0) {
                code += chars[(time % (chars.length)).toInt()]
                time /= chars.length
            }
            return code.reversed()
        }


        /**
         * Generates a session
         * 1 Get request.
         * */
        private suspend fun negotiateNewSid(baseUrl: String): PollingData? {
            // Tries multiple times
            for (i in 1..5) {
                val jsonText =
                    app.get("$baseUrl&t=${generateTimeStamp()}").text.replaceBefore("{", "")
//            println("Negotiated sid $jsonText")
                parseJson<PollingData?>(jsonText)?.let { return it }
                delay(1000L * i)
            }
            return null
        }

        /**
         * Generates a new session if the request fails
         * @return the data and if it is new.
         * */
        private suspend fun getUpdatedData(
            response: NiceResponse,
            data: PollingData,
            baseUrl: String
        ): Pair<PollingData, Boolean> {
            if (!response.okhttpResponse.isSuccessful) {
                return negotiateNewSid(baseUrl)?.let {
                    it to true
                } ?: data to false
            }
            return data to false
        }


        private suspend fun initPolling(
            extractorData: String,
            referer: String
        ): Pair<PollingData?, String?> {
            val headers = mapOf(
                "Referer" to referer // "https://rabbitstream.net/"
            )

            val data = negotiateNewSid(extractorData) ?: return null to null
            app.post(
                "$extractorData&t=${generateTimeStamp()}&sid=${data.sid}",
                requestBody = "40".toRequestBody(),
                headers = headers
            )

            // This makes the second get request work, and re-connect work.
            val reconnectSid =
                parseJson<PollingData>(
                    app.get(
                        "$extractorData&t=${generateTimeStamp()}&sid=${data.sid}",
                        headers = headers
                    )
//                    .also { println("First get ${it.text}") }
                        .text.replaceBefore("{", "")
                ).sid

            // This response is used in the post requests. Same contents in all it seems.
            val authInt =
                app.get(
                    "$extractorData&t=${generateTimeStamp()}&sid=${data.sid}",
                    timeout = 60,
                    headers = headers
                ).text
                    //.also { println("Second get ${it}") }
                    // Dunno if it's actually generated like this, just guessing.
                    .toIntOrNull()?.plus(1) ?: 3

            return data to reconnectSid
        }

        suspend fun runSflixExtractorVerifierJob(
            api: MainAPI,
            extractorData: String?,
            referer: String
        ) {
            if (extractorData == null) return
            val headers = mapOf(
                "Referer" to referer // "https://rabbitstream.net/"
            )

            lateinit var data: PollingData
            var reconnectSid = ""

            initPolling(extractorData, referer)
                .also {
                    data = it.first ?: throw RuntimeException("Data Null")
                    reconnectSid = it.second ?: throw RuntimeException("ReconnectSid Null")
                }

            // Prevents them from fucking us over with doing a while(true){} loop
            val interval = maxOf(data.pingInterval?.toLong()?.plus(2000) ?: return, 10000L)
            var reconnect = false
            var newAuth = false


            while (true) {
                val authData =
                    when {
                        newAuth -> "40"
                        reconnect -> """42["_reconnect", "$reconnectSid"]"""
                        else -> "3"
                    }

                val url = "${extractorData}&t=${generateTimeStamp()}&sid=${data.sid}"

                getUpdatedData(
                    app.post(url, json = authData, headers = headers),
                    data,
                    extractorData
                ).also {
                    newAuth = it.second
                    data = it.first
                }

                //.also { println("Sflix post job ${it.text}") }
                Log.d(api.name, "Running ${api.name} job $url")

                val time = measureTimeMillis {
                    // This acts as a timeout
                    val getResponse = app.get(
                        url,
                        timeout = interval / 1000,
                        headers = headers
                    )
//                    .also { println("Sflix get job ${it.text}") }
                    reconnect = getResponse.text.contains("sid")
                }
                // Always waits even if the get response is instant, to prevent a while true loop.
                if (time < interval - 4000)
                    delay(4000)
            }
        }

        fun String?.isValidServer(): Boolean {
            if (this.isNullOrEmpty()) return false
            if (this.equals("UpCloud", ignoreCase = true) || this.equals(
                    "Vidcloud",
                    ignoreCase = true
                ) || this.equals("RapidStream", ignoreCase = true)
            ) return true
            return false
        }

        // For re-use in Zoro
        fun Sources.toExtractorLink(
            caller: MainAPI,
            name: String,
            extractorData: String? = null,
        ): List<ExtractorLink>? {
            return this.file?.let { file ->
                //println("FILE::: $file")
                val isM3u8 = URI(this.file).path.endsWith(".m3u8") || this.type.equals(
                    "hls",
                    ignoreCase = true
                )
                if (isM3u8) {
                    M3u8Helper().m3u8Generation(M3u8Helper.M3u8Stream(this.file, null), null)
                        .map { stream ->
                            ExtractorLink(
                                caller.name,
                                "${caller.name} $name",
                                stream.streamUrl,
                                caller.mainUrl,
                                getQualityFromName(stream.quality?.toString()),
                                true,
                                extractorData = extractorData
                            )
                        }
                } else {
                    listOf(ExtractorLink(
                        caller.name,
                        caller.name,
                        file,
                        caller.mainUrl,
                        getQualityFromName(this.label),
                        false,
                        extractorData = extractorData
                    ))
                }
            }
        }

        private fun Tracks.toSubtitleFile(): SubtitleFile? {
            return this.file?.let {
                SubtitleFile(
                    this.label ?: "Unknown",
                    it
                )
            }
        }

        suspend fun MainAPI.extractRabbitStream(
            url: String,
            subtitleCallback: (SubtitleFile) -> Unit,
            callback: (ExtractorLink) -> Unit,
            /** Used for extractorLink name, input: Source name */
            extractorData: String,
            nameTransformer: (String) -> String
        ) = suspendSafeApiCall {
            // https://rapid-cloud.ru/embed-6/dcPOVRE57YOT?z= -> https://rapid-cloud.ru/embed-6
            val mainIframeUrl =
                url.substringBeforeLast("/")
            val mainIframeId = url.substringAfterLast("/")
                .substringBefore("?") // https://rapid-cloud.ru/embed-6/dcPOVRE57YOT?z= -> dcPOVRE57YOT
            val iframe = app.get(url, referer = mainUrl)
            val iframeKey =
                iframe.document.select("script[src*=https://www.google.com/recaptcha/api.js?render=]")
                    .attr("src").substringAfter("render=")
            val iframeToken = getCaptchaToken(url, iframeKey)
            val number =
                Regex("""recaptchaNumber = '(.*?)'""").find(iframe.text)?.groupValues?.get(1)

            var sid: String? = null

            negotiateNewSid(extractorData)?.also {
                app.post(
                    "$extractorData&t=${generateTimeStamp()}&sid=${it.sid}",
                    requestBody = "40".toRequestBody(),
                    timeout = 60
                )
                val text = app.get(
                    "$extractorData&t=${generateTimeStamp()}&sid=${it.sid}",
                    timeout = 60
                ).text.replaceBefore("{", "")

                sid = parseJson<PollingData>(text).sid
                ioSafe { app.get("$extractorData&t=${generateTimeStamp()}&sid=${it.sid}") }
            }

            val mapped = app.get(
                "${
                    mainIframeUrl.replace(
                        "/embed",
                        "/ajax/embed"
                    )
                }/getSources?id=$mainIframeId&_token=$iframeToken&_number=$number$&sId=${sid!!}",
                referer = mainUrl,
                headers = mapOf(
                    "X-Requested-With" to "XMLHttpRequest",
                    "Accept" to "*/*",
                    "Accept-Language" to "en-US,en;q=0.5",
//                        "Cache-Control" to "no-cache",
                    "Connection" to "keep-alive",
//                        "Sec-Fetch-Dest" to "empty",
//                        "Sec-Fetch-Mode" to "no-cors",
//                        "Sec-Fetch-Site" to "cross-site",
//                        "Pragma" to "no-cache",
//                        "Cache-Control" to "no-cache",
                    "TE" to "trailers"
                )
            ).parsed<SourceObject>()

            mapped.tracks?.forEach { track ->
                track?.toSubtitleFile()?.let { subtitleFile ->
                    subtitleCallback.invoke(subtitleFile)
                }
            }

            val list = listOf(
                mapped.sources to "source 1",
                mapped.sources1 to "source 2",
                mapped.sources2 to "source 3",
                mapped.sourcesBackup to "source backup"
            )
            list.forEach { subList ->
                subList.first?.forEach { source ->
                    source?.toExtractorLink(
                        this,
                        nameTransformer(subList.second),
                        extractorData,
                    )
                        ?.forEach {
                            // Sets Zoro SID used for video loading
                            (this as? ZoroProvider)?.sid?.set(it.url.hashCode(), sid)
                            callback(it)
                        }
                }
            }
        }
    }
}




================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/SoaptwoDayProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import org.jsoup.Jsoup

class SoaptwoDayProvider : MainAPI() {
    override var mainUrl = "https://secretlink.xyz" //Probably a rip off, but it has no captcha
    override var name = "Soap2Day"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val urls = listOf(
            Pair("$mainUrl/movielist/", "Movies"),
            Pair("$mainUrl/tvlist/", "TV Series"),
        )
        for ((url, name) in urls) {
            try {
                val soup = app.get(url).document
                val home =
                    soup.select("div.container div.row div.col-sm-12.col-lg-12 div.row div.col-sm-12.col-lg-12 .col-xs-6")
                        .map {
                            val title = it.selectFirst("h5 a")!!.text()
                            val link = it.selectFirst("a")!!.attr("href")
                            TvSeriesSearchResponse(
                                title,
                                link,
                                this.name,
                                TvType.TvSeries,
                                fixUrl(it.selectFirst("img")!!.attr("src")),
                                null,
                                null,
                            )
                        }

                items.add(HomePageList(name, home))
            } catch (e: Exception) {
                logError(e)
            }
        }
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val doc = app.get("$mainUrl/search/keyword/$query").document
        return doc.select("div.container div.row div.col-sm-12.col-lg-12 div.row div.col-sm-12.col-lg-12 .col-xs-6")
            .map {
                val title = it.selectFirst("h5 a")!!.text()
                val image = fixUrl(it.selectFirst("img")!!.attr("src"))
                val href = fixUrl(it.selectFirst("a")!!.attr("href"))
                TvSeriesSearchResponse(
                    title,
                    href,
                    this.name,
                    TvType.TvSeries,
                    image,
                    null,
                    null
                )
            }
    }

    override suspend fun load(url: String): LoadResponse? {
        val soup = app.get(url).document
        val title = soup.selectFirst(".hidden-lg > div:nth-child(1) > h4")?.text() ?: ""
        val description = soup.selectFirst("p#wrap")?.text()?.trim()
        val poster =
            soup.selectFirst(".col-md-5 > div:nth-child(1) > div:nth-child(1) > img")?.attr("src")
        val episodes = mutableListOf<Episode>()
        soup.select("div.alert").forEach {
            val season = it?.selectFirst("h4")?.text()?.filter { c -> c.isDigit() }?.toIntOrNull()
            it?.select("div > div > a")?.forEach { entry ->
                val link = fixUrlNull(entry?.attr("href")) ?: return@forEach
                val text = entry?.text() ?: ""
                val name = text.replace(Regex("(^(\\d+)\\.)"), "")
                val epNum = text.substring(0, text.indexOf(".")).toIntOrNull()
                episodes.add(
                    Episode(
                        name = name,
                        data = link,
                        season = season,
                        episode = epNum
                    )
                )
            }
        }
        val otherInfoBody = soup.select("div.col-sm-8 div.panel-body").toString()
        //Fetch casts
        val casts = otherInfoBody.substringAfter("Stars : ")
            .substringBefore("Genre : ").let {
                Jsoup.parse(it).select("a")
            }.mapNotNull {
                val castName = it?.text() ?: return@mapNotNull null
                ActorData(
                    Actor(
                        name = castName
                    )
                )
            }
        //Fetch year
        val year = otherInfoBody.substringAfter("<h4>Release : </h4>")
            .substringBefore("<div").let {
                //Log.i(this.name, "Result => year string: $it")
                Jsoup.parse(it).select("p")[1]
            }?.text()?.take(4)?.toIntOrNull()
        //Fetch genres
        val genre = otherInfoBody.substringAfter("<h4>Genre : </h4>")
            .substringBefore("<h4>Release : </h4>").let {
                //Log.i(this.name, "Result => genre string: $it")
                Jsoup.parse(it).select("a")
            }.mapNotNull { it?.text()?.trim() ?: return@mapNotNull null }

        return when (val tvType = if (episodes.isEmpty()) TvType.Movie else TvType.TvSeries) {
            TvType.TvSeries -> {
                TvSeriesLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes.reversed(),
                    fixUrlNull(poster),
                    year = year,
                    description,
                    actors = casts,
                    tags = genre
                )
            }
            TvType.Movie -> {
                MovieLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    url,
                    fixUrlNull(poster),
                    year = year,
                    description,
                    actors = casts,
                    tags = genre
                )
            }
            else -> null
        }
    }

    data class ServerJson(
        @JsonProperty("0") val zero: String?,
        @JsonProperty("key") val key: Boolean?,
        @JsonProperty("val") val stream: String?,
        @JsonProperty("val_bak") val streambackup: String?,
        @JsonProperty("pos") val pos: Int?,
        @JsonProperty("type") val type: String?,
        @JsonProperty("subs") val subs: List<Subs>?,
        @JsonProperty("prev_epi_title") val prevEpiTitle: String?,
        @JsonProperty("prev_epi_url") val prevEpiUrl: String?,
        @JsonProperty("next_epi_title") val nextEpiTitle: String?,
        @JsonProperty("next_epi_url") val nextEpiUrl: String?
    )

    data class Subs(
        @JsonProperty("id") val id: Int?,
        @JsonProperty("movieId") val movieId: Int?,
        @JsonProperty("tvId") val tvId: Int?,
        @JsonProperty("episodeId") val episodeId: Int?,
        @JsonProperty("default") val default: Int?,
        @JsonProperty("IsShow") val IsShow: Int?,
        @JsonProperty("name") val name: String,
        @JsonProperty("path") val path: String?,
        @JsonProperty("downlink") val downlink: String?,
        @JsonProperty("source_file_name") val sourceFileName: String?,
        @JsonProperty("createtime") val createtime: Int?
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val doc = app.get(data).document
        val idplayer = doc.selectFirst("#divU")?.text()
        val idplayer2 = doc.selectFirst("#divP")?.text()
        val movieid = doc.selectFirst("div.row input#hId")!!.attr("value")
        val tvType = try {
            doc.selectFirst(".col-md-5 > div:nth-child(1) > div:nth-child(1) > img")!!.attr("src")
                ?: ""
        } catch (e: Exception) {
            ""
        }
        val ajaxlink =
            if (tvType.contains("movie")) "$mainUrl/home/index/GetMInfoAjax" else "$mainUrl/home/index/GetEInfoAjax"
        listOf(
            idplayer,
            idplayer2,
        ).mapNotNull { playerID ->
            val url = app.post(
                ajaxlink,
                headers = mapOf(
                    "Host" to "secretlink.xyz",
                    "User-Agent" to USER_AGENT,
                    "Accept" to "application/json, text/javascript, */*; q=0.01",
                    "Accept-Language" to "en-US,en;q=0.5",
                    "Content-Type" to "application/x-www-form-urlencoded; charset=UTF-8",
                    "X-Requested-With" to "XMLHttpRequest",
                    "Origin" to "https://secretlink.xyz",
                    "DNT" to "1",
                    "Connection" to "keep-alive",
                    "Referer" to data,
                    "Sec-Fetch-Dest" to "empty",
                    "Sec-Fetch-Mode" to "cors",
                    "Sec-Fetch-Site" to "same-origin",
                ),
                data = mapOf(
                    Pair("pass", movieid),
                    Pair("param", playerID ?: ""),
                )
            ).text.replace("\\\"", "\"").replace("\"{", "{").replace("}\"", "}")
                .replace("\\\\\\/", "\\/")
            val json = parseJson<ServerJson>(url)
            listOfNotNull(
                json.stream,
                json.streambackup
            ).apmap { stream ->
                val cleanstreamurl = stream.replace("\\/", "/").replace("\\\\\\", "")
                if (cleanstreamurl.isNotBlank()) {
                    callback(
                        ExtractorLink(
                            "Soap2Day",
                            "Soap2Day",
                            cleanstreamurl,
                            "https://soap2day.ac",
                            Qualities.Unknown.value,
                            isM3u8 = false
                        )
                    )
                }
            }
            json.subs?.forEach { subtitle ->
                val sublink = mainUrl + subtitle.path
                listOf(
                    sublink,
                    subtitle.downlink
                ).mapNotNull { subs ->
                    if (subs != null) {
                        if (subs.isNotBlank()) {
                            subtitleCallback(
                                SubtitleFile(subtitle.name, subs)
                            )
                        }
                    }
                }
            }
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/SolarmovieProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

class SolarmovieProvider : SflixProvider() {
    override var mainUrl = "https://solarmovie.pe"
    override var name = "Solarmovie"
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/StreamingcommunityProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import android.text.Html
import com.fasterxml.jackson.annotation.*
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.utils.*
import org.json.JSONObject
import java.net.URI
import java.security.MessageDigest

data class Moviedata(
    @JsonProperty("id") val id: Long,
    @JsonProperty("name") val name: String,
    @JsonProperty("type") val type: String,
    @JsonProperty("release_date") val releaseDate: String,
    @JsonProperty("seasons_count") val seasonsCount: Long? = null,
    @JsonProperty("genres") val genres: List<Genre>,
    @JsonProperty("votes") val votes: List<Vote>,
    @JsonProperty("runtime") val runtime: Long? = null
)

data class Genre(
    @JsonProperty("name") val name: String,
    @JsonProperty("pivot") val pivot: Pivot,
)

data class Pivot(
    @JsonProperty("titleID") val titleID: Long,
    @JsonProperty("genreID") val genreID: Long,
)

data class Vote(
    @JsonProperty("title_id") val title_id: Long,
    @JsonProperty("average") val average: String,
    @JsonProperty("count") val count: Long,
    @JsonProperty("type") val type: String,
)

data class VideoElement(
    @JsonProperty("id") val id: Long,
    @JsonProperty("slug") val slug: String,
    @JsonProperty("images") val images: List<Image>,
)

data class Image(
    @JsonProperty("imageable_id") val imageableID: Long,
    @JsonProperty("imageable_type") val imageableType: String,
    @JsonProperty("server_id") val serverID: Long,
    @JsonProperty("proxy_id") val proxyID: Long,
    @JsonProperty("url") val url: String,
    @JsonProperty("type") val type: String,
    @JsonProperty("sc_url") val scURL: String,
    @JsonProperty("proxy") val proxy: Proxy,
    @JsonProperty("server") val server: Proxy
)

data class Proxy(
    @JsonProperty("id") val id: Long,
    @JsonProperty("type") val type: String,
    @JsonProperty("ip") val ip: String,
    @JsonProperty("number") val number: Long,
    @JsonProperty("storage") val storage: Long,
    @JsonProperty("max_storage") val maxStorage: Long,
    @JsonProperty("max_conversions") val maxConversions: Any? = null,
    @JsonProperty("max_publications") val maxPublications: Any? = null,
    @JsonProperty("created_at") val createdAt: String,
    @JsonProperty("updated_at") val updatedAt: String,
    @JsonProperty("upload_bandwidth") val uploadBandwidth: Any? = null,
    @JsonProperty("upload_bandwidth_limit") val uploadBandwidthLimit: Any? = null
)

data class Season(
    @JsonProperty("id") val id: Long,
    @JsonProperty("name") val name: String? = "",
    @JsonProperty("plot") val plot: String? = "",
    @JsonProperty("date") val date: String? = "",
    @JsonProperty("number") val number: Long,
    @JsonProperty("title_id") val title_id: Long,
    @JsonProperty("createdAt") val createdAt: String? = "",
    @JsonProperty("updated_at") val updatedAt: String? = "",
    @JsonProperty("episodes") val episodes: List<Episodejson>
)

data class Episodejson(
    @JsonProperty("id") val id: Long,
    @JsonProperty("number") val number: Long,
    @JsonProperty("name") val name: String? = "",
    @JsonProperty("plot") val plot: String? = "",
    @JsonProperty("season_id") val seasonID: Long,
    @JsonProperty("images") val images: List<ImageSeason>
)

data class ImageSeason(
    @JsonProperty("imageable_id") val imageableID: Long,
    @JsonProperty("imageable_type") val imageableType: String,
    @JsonProperty("server_id") val serverID: Long,
    @JsonProperty("proxy_id") val proxyID: Long,
    @JsonProperty("url") val url: String,
    @JsonProperty("type") val type: String,
    @JsonProperty("original_url") val originalURL: String
)

data class TrailerElement(
    @JsonProperty("id") val id: Long? = null,
    @JsonProperty("url") val url: String? = null,
    @JsonProperty("host") val host: String? = null,
    @JsonProperty("videoable_id") val videoableID: Long? = null,
    @JsonProperty("videoable_type") val videoableType: String? = null,
    @JsonProperty("created_at") val createdAt: String? = null,
    @JsonProperty("updated_at") val updatedAt: String? = null,
    @JsonProperty("size") val size: String? = null,
    @JsonProperty("created_by") val createdBy: String? = null,
    @JsonProperty("server_id") val serverID: Long? = null,
    @JsonProperty("name") val name: String? = null,
    @JsonProperty("quality") val quality: String? = null,
    @JsonProperty("original_name") val originalName: Any? = null,
    @JsonProperty("views") val views: Long? = null,
    @JsonProperty("public") val public: Long? = null,
    @JsonProperty("proxy_id") val proxyID: Any? = null,
    @JsonProperty("proxy_default_id") val proxyDefaultID: Any? = null,
    @JsonProperty("scws_id") val scwsID: Any? = null
)


class StreamingcommunityProvider : MainAPI() {
    override val lang = "it"
    override var mainUrl = "https://streamingcommunity.top"
    override var name = "Streamingcommunity"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    private fun translatenumber(num: Int): Int? {
        return when (num) {
            67 -> 1
            71 -> 2
            72 -> 3
            73 -> 4
            74 -> 5
            75 -> 6
            76 -> 7
            77 -> 8
            78 -> 9
            79 -> 10
            133 -> 11
            else -> null
        }
    }

    private fun translateip(num: Int): String? {
        return when (num) {
            16 -> "sc-b1-01.scws-content.net"
            17 -> "sc-b1-02.scws-content.net"
            18 -> "sc-b1-03.scws-content.net"
            85 -> "sc-b1-04.scws-content.net"
            95 -> "sc-b1-05.scws-content.net"
            117 -> "sc-b1-06.scws-content.net"
            141 -> "sc-b1-07.scws-content.net"
            142 -> "sc-b1-08.scws-content.net"
            143 -> "sc-b1-09.scws-content.net"
            144 -> "sc-b1-10.scws-content.net"
            else -> null
        }
    }

    companion object {
        val posterMap = hashMapOf<String, String>()
    }

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val document = app.get(mainUrl).document
        document.select("slider-title").subList(2, 6).map { it ->
            if (it.attr("slider-name") != "In arrivo") {
                val films = it.attr("titles-json")
                val lista = mutableListOf<MovieSearchResponse>()
                val videoData = parseJson<List<VideoElement>>(films)

                videoData.subList(0, 12).map { searchr ->
                    val id = searchr.id
                    val name = searchr.slug
                    val img = searchr.images[0].url
                    val number = translatenumber(searchr.images[0].serverID.toInt())
                    val ip = translateip(searchr.images[0].proxyID.toInt())
                    val posterurl = "https://$ip/images/$number/$img"
                    val videourl = "$mainUrl/titles/$id-$name"
                    posterMap[videourl] = posterurl
                    val data = app.post("$mainUrl/api/titles/preview/$id", referer = mainUrl).text
                    val datajs = parseJson<Moviedata>(data)
                    val type: TvType = if (datajs.type == "movie") {
                        TvType.Movie
                    } else {
                        TvType.TvSeries
                    }

                    lista.add(
                        MovieSearchResponse(
                            datajs.name,
                            videourl,
                            this.name,
                            type,
                            posterurl,
                            datajs.releaseDate.substringBefore("-").filter { it.isDigit() }
                                .toIntOrNull(),
                            null,
                        )
                    )
                }
                items.add(HomePageList(it.attr("slider-name"), lista))
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val queryformatted = query.replace(" ", "%20")
        val url = "$mainUrl/search?q=$queryformatted"
        val document = app.get(url).document

        val films =
            document.selectFirst("the-search-page")!!.attr("records-json").replace("&quot;", """"""")

        val searchresults = parseJson<List<VideoElement>>(films)
        return searchresults.map { result ->
            val id = result.id
            val name = result.slug
            val img = result.images[0].url
            val number = translatenumber(result.images[0].serverID.toInt())
            val ip = translateip(result.images[0].proxyID.toInt())
            val data = app.post("$mainUrl/api/titles/preview/$id", referer = mainUrl).text
            val datajs = parseJson<Moviedata>(data)
            val posterurl = "https://$ip/images/$number/$img"
            val videourl = "$mainUrl/titles/$id-$name"
            posterMap[videourl] = posterurl
            if (datajs.type == "movie") {
                val type = TvType.Movie
                MovieSearchResponse(
                    datajs.name,
                    videourl,
                    this.name,
                    type,
                    posterurl,
                    datajs.releaseDate.substringBefore("-").filter { it.isDigit() }.toIntOrNull(),
                    null,
                )
            } else {
                val type = TvType.TvSeries
                TvSeriesSearchResponse(
                    datajs.name,
                    videourl,
                    this.name,
                    type,
                    posterurl,
                    datajs.releaseDate.substringBefore("-").filter { it.isDigit() }.toIntOrNull(),
                    null,
                )
            }

        }

    }

    override suspend fun load(url: String): LoadResponse {

        val document = app.get(url).document
        val poster = posterMap[url]
        val id = url.substringBefore("-").filter { it.isDigit() }
        val data = app.post("$mainUrl/api/titles/preview/$id", referer = mainUrl).text

        val datajs = parseJson<Moviedata>(data)
        val type: TvType = if (datajs.type == "movie") {
            TvType.Movie
        } else {
            TvType.TvSeries
        }
        val trailerinfojs = document.select("slider-trailer").attr("videos")
        val trailerinfo = parseJson<List<TrailerElement>>(trailerinfojs)
        val trailerurl: String? = if (trailerinfo.isNotEmpty()) {
            "https://www.youtube.com/watch?v=${trailerinfo[0].id}"
        } else {
            null
        }

        val year = datajs.releaseDate.substringBefore("-")

        val correlatijs = document.selectFirst("slider-title")!!.attr("titles-json")
        val listacorr = mutableListOf<MovieSearchResponse>()
        val correlatidata = parseJson<List<VideoElement>>(correlatijs)
        val number : Int = if (correlatidata.size<=15) {correlatidata.size} else correlatidata.size-15

        correlatidata.take(number).map { searchr ->
            val idcorr = searchr.id
            val name = searchr.slug
            val img = searchr.images[0].url
            val number = translatenumber(searchr.images[0].serverID.toInt())
            val ip = translateip(searchr.images[0].proxyID.toInt())
            val datacorrel = app.post("$mainUrl/api/titles/preview/$idcorr", referer = mainUrl).text
            val datajscorrel = parseJson<Moviedata>(datacorrel)
            val videourl = "$mainUrl/titles/$idcorr-$name"
            val posterurl = "https://$ip/images/$number/$img"

            posterMap[videourl] = posterurl
            val typecorr: TvType = if (datajscorrel.type == "movie") {
                TvType.Movie
            } else {
                TvType.TvSeries
            }

            listacorr.add(
                MovieSearchResponse(
                    datajscorrel.name,
                    videourl,
                    this.name,
                    typecorr,
                    posterurl,
                    datajscorrel.releaseDate.substringBefore("-").filter { it.isDigit() }
                        .toIntOrNull(),
                    null,
                )
            )
        }

        if (type == TvType.TvSeries) {

            val name = datajs.name
            val episodeList = arrayListOf<Episode>()

            val episodes =
                Html.fromHtml(document.selectFirst("season-select")!!.attr("seasons")).toString()
            val jsonEpisodes = parseJson<List<Season>>(episodes)

            jsonEpisodes.map { seasons ->
                val stagione = seasons.number.toInt()
                val sid = seasons.title_id
                val episodio = seasons.episodes
                episodio.map { ep ->
                    val href = "$mainUrl/watch/$sid?e=${ep.id}"
                    val postimage = if (ep.images.isNotEmpty()) {
                        ep.images.first().originalURL
                    } else {
                        ""
                    }
                    episodeList.add(

                        newEpisode(href) {
                            this.name = ep.name
                            this.season = stagione
                            this.episode = ep.number.toInt()
                            this.description = ep.plot
                            this.posterUrl = postimage
                        }
                    )
                }
            }


            if (episodeList.isEmpty()) throw ErrorLoadingException("No Seasons Found")

            return newTvSeriesLoadResponse(name, url, type, episodeList) {
                this.posterUrl = poster
                this.year = year.filter { it.isDigit() }.toInt()
                this.plot = document.selectFirst("div.plot-wrap > p")!!.text()
                this.duration = datajs.runtime?.toInt()
                this.rating = (datajs.votes[0].average.toFloatOrNull()?.times(1000))?.toInt()
                this.tags = datajs.genres.map { it.name }
                addTrailer(trailerurl)
                this.recommendations = listacorr
            }


        } else {

            return newMovieLoadResponse(
                document.selectFirst("div > div > h1")!!.text(),
                document.select("a.play-hitzone").attr("href"),
                type,
                document.select("a.play-hitzone").attr("href")
            ) {
                posterUrl = fixUrlNull(poster)
                this.year = year.filter { it.isDigit() }.toInt()
                this.plot = document.selectFirst("p.plot")!!.text()
                this.rating = datajs.votes[0].average.toFloatOrNull()?.times(1000)?.toInt()
                this.tags = datajs.genres.map { it.name }
                this.duration = datajs.runtime?.toInt()
                addTrailer(trailerurl)
                this.recommendations = listacorr
            }

        }
    }


    private fun getM3u8Qualities(
        m3u8Link: String,
        referer: String,
        qualityName: String,
    ): List<ExtractorLink> {
        return M3u8Helper.generateM3u8(
            this.name,
            m3u8Link,
            referer,
            name = "${this.name} - $qualityName"
        )
    }


    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val ip = app.get("https://api.ipify.org/").text
        val videors = app.get(data).document
        val scwsidjs = videors.select("video-player").attr("response").replace("&quot;", """"""")
        val jsn = JSONObject(scwsidjs)
        val scwsid = jsn.getString("scws_id")
        val expire = (System.currentTimeMillis() / 1000 + 172800).toString()

        val uno = "$expire$ip Yc8U6r8KjAKAepEA".toByteArray()
        val due = MessageDigest.getInstance("MD5").digest(uno)
        val tre = base64Encode(due)
        val token = tre.replace("=", "").replace("+", "-").replace("/", "_")


        val link = "https://scws.xyz/master/$scwsid?token=$token&expires=$expire&n=1&n=1"
        getM3u8Qualities(link, data, URI(link).host).forEach(callback)
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/TantiFilmProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.*

class TantifilmProvider : MainAPI() {
    override val lang = "it"
    override var mainUrl = "https://www.tantifilm.rodeo"
    override var name = "Tantifilm"
    override val hasMainPage = true
    override val hasChromecastSupport = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val urls = listOf(
            Pair("$mainUrl/watch-genre/serie-tv/", "Serie Tv"),
            Pair("$mainUrl/watch-genre/azione/", "Azione"),
            Pair("$mainUrl/watch-genre/avventura/", "Avventura"),
        )
        for ((url, name) in urls) {
            try {
                val soup = app.get(url).document
                val home = soup.select("div.media3").map {
                    val title = it.selectFirst("p")!!.text().substringBefore("(")
                    val link = it.selectFirst("a")!!.attr("href")
                    TvSeriesSearchResponse(
                        title,
                        link,
                        this.name,
                        TvType.Movie,
                        it.selectFirst("img")!!.attr("src"),
                        null,
                        null,
                    )
                }

                items.add(HomePageList(name, home))
            } catch (e: Exception) {
                logError(e)
            }
        }
        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val queryformatted = query.replace(" ", "+")
        val url = "$mainUrl/search/$queryformatted"
        val doc = app.get(url).document
        return doc.select("div.film.film-2").map {
            val href = it.selectFirst("a")!!.attr("href")
            val poster = it.selectFirst("img")!!.attr("src")
            val name = it.selectFirst("a")!!.text().substringBefore("(")
            MovieSearchResponse(
                name,
                href,
                this.name,
                TvType.Movie,
                poster,
                null
            )

        }
    }


    override suspend fun load(url: String): LoadResponse {
        val document = app.get(url).document
        val type = if (document.selectFirst("div.category-film")!!.text().contains("Serie")
                .not()
        ) TvType.Movie else TvType.TvSeries
        val title = document.selectFirst("div.title-film-left")!!.text().substringBefore("(")
        val descipt = document.select("div.content-left-film > p").map { it.text() }
        val rating =
            document.selectFirst("div.star-rating.star-rating-f > span > span")!!
                .attr("data-rateit-value").toFloatOrNull()
                ?.times(2857)?.toInt()?.let { minOf(it, 10000) }

        var year = document.selectFirst("div.title-film-left")!!.text().substringAfter("(")
            .filter { it.isDigit() }
        year = if (year.length > 4) {
            year.dropLast(4)
        } else {
            year
        }
        // ?: does not wor
        val poster = document.selectFirst("div.image-right-film > img")!!.attr("src")

        val recomm = document.select("div.mediaWrap.mediaWrapAlt.recomended_videos").map {
            val href = it.selectFirst("a")!!.attr("href")
            val poster = it.selectFirst("img")!!.attr("src")
            val name = it.selectFirst("a")!!.attr("title").substringBeforeLast("(")
            MovieSearchResponse(
                name,
                href,
                this.name,
                TvType.Movie,
                poster,
                null
            )

        }



        if (type == TvType.TvSeries) {
            val list = ArrayList<Pair<Int, String>>()
            val urlvideocontainer = document.selectFirst("iframe")!!.attr("src")
            val videocontainer = app.get(urlvideocontainer).document
            videocontainer.select("nav.nav1 > select > option").forEach { element ->
                val season = element.text().toIntOrNull()
                val href = element.attr("value")
                if (season != null && season > 0 && !href.isNullOrBlank()) {
                    list.add(Pair(season, fixUrl(href)))
                }
            }
            if (list.isEmpty()) throw ErrorLoadingException("No Seasons Found")

            val episodeList = ArrayList<Episode>()

            for ((season,seasonurl) in list) {
                val seasonDocument = app.get(seasonurl).document
                val episodes = seasonDocument.select("nav.second_nav > select > option")
                if (episodes.isNotEmpty()) {
                    episodes.forEach { episode ->
                        val href = episode.attr("value")
                        val epNum = episode.text().toIntOrNull()
                        episodeList.add(
                            Episode(
                                href,
                                title,
                                season,
                                epNum,
                            )
                        )
                    }
                }
            }
            return TvSeriesLoadResponse(
                title,
                url,
                this.name,
                type,
                episodeList,
                fixUrlNull(poster),
                year.toIntOrNull(),
                descipt[0],
                null,
                rating,
                null,
                null,
                null,
                recomm
            )
        } else {
            val url2 = document.selectFirst("iframe")!!.attr("src")
            val actorpagelink =
                document.select("div.content-left-film > p:nth-child(2) > a").attr("href")
            val actorpagelink2 = document.select("div.content-left-film > p > a").attr("href")
            val Linkactor: String = actorpagelink.ifEmpty {
                actorpagelink2
            }

            val actors: List<ActorData>? = if (Linkactor.isNotEmpty()) {
                val actorpage = app.get(Linkactor + "cast/").document
                actorpage.select("article.membro-cast").filter {
                    it.selectFirst("img")
                        ?.attr("src") != "https://www.filmtv.it/imgbank/DUMMY/no_portrait.jpg"
                }.mapNotNull {
                    val name = it.selectFirst("div.info > h3")!!.text()
                    val image = it.selectFirst("img")?.attr("src")
                    val roleString: String = if (it.selectFirst("h2")?.text() == "Regia") {
                        "Regia"
                    } else {
                        "Attore"
                    }
                    val mainActor = Actor(name, image)
                    ActorData(actor = mainActor, roleString = roleString)
                }
            } else {
                null
            }


            val duratio: Int? = if (descipt.size == 2) {
                descipt[0].filter { it.isDigit() }.toInt()
            } else {
                null
            }
            val tags: List<String>? = if (descipt.size == 2) {
                mutableListOf(descipt[0].substringBefore(" "))
            } else {
                null
            }
            val plot: String = if (descipt.size == 2) {
                descipt[1]
            } else {
                descipt[0]
            }
            return newMovieLoadResponse(
                title,
                url2,
                type,
                url2
            ) {
                posterUrl = fixUrlNull(poster)
                this.year = year.toIntOrNull()
                this.plot = plot
                this.rating = rating
                this.recommendations = recomm
                this.tags = tags
                this.duration = duratio
                this.actors = actors

            }
        }
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val doc = app.get(data).document
        val iframe =
            doc.select("option").map { fixUrl(it.attr("value")) }.filter { it.contains("label") }
        iframe.forEach { id ->
            val doc2 = app.get(id).document
            val id2 = app.get(doc2.selectFirst("iframe")!!.attr("src")).url
            loadExtractor(id2, data, callback)
        }
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/TheFlixToProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.LoadResponse.Companion.addActors
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName


class TheFlixToProvider : MainAPI() {
    companion object {
        var latestCookies: Map<String, String> = emptyMap()
    }

    override var name = "TheFlix.to"
    override var mainUrl = "https://theflix.to"
    override val instantLinkLoading = false
    override val hasMainPage = true
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    data class HomeJson(
        @JsonProperty("props") val props: HomeProps = HomeProps(),
    )

    data class HomeProps(
        @JsonProperty("pageProps") val pageProps: PageProps = PageProps(),
    )

    data class PageProps(
        @JsonProperty("moviesListTrending") val moviesListTrending: MoviesListTrending = MoviesListTrending(),
        @JsonProperty("moviesListNewArrivals") val moviesListNewArrivals: MoviesListNewArrivals = MoviesListNewArrivals(),
        @JsonProperty("tvsListTrending") val tvsListTrending: TvsListTrending = TvsListTrending(),
        @JsonProperty("tvsListNewEpisodes") val tvsListNewEpisodes: TvsListNewEpisodes = TvsListNewEpisodes(),
    )


    data class MoviesListTrending(
        @JsonProperty("docs") val docs: ArrayList<Docs> = arrayListOf(),
        @JsonProperty("total") val total: Int? = null,
        @JsonProperty("page") val page: Int? = null,
        @JsonProperty("limit") val limit: Int? = null,
        @JsonProperty("pages") val pages: Int? = null,
        @JsonProperty("type") val type: String? = null,
    )

    data class MoviesListNewArrivals(
        @JsonProperty("docs") val docs: ArrayList<Docs> = arrayListOf(),
        @JsonProperty("total") val total: Int? = null,
        @JsonProperty("page") val page: Int? = null,
        @JsonProperty("limit") val limit: Int? = null,
        @JsonProperty("pages") val pages: Int? = null,
        @JsonProperty("type") val type: String? = null,
    )

    data class TvsListTrending(
        @JsonProperty("docs") val docs: ArrayList<Docs> = arrayListOf(),
        @JsonProperty("total") val total: Int? = null,
        @JsonProperty("page") val page: Int? = null,
        @JsonProperty("limit") val limit: Int? = null,
        @JsonProperty("pages") val pages: Int? = null,
        @JsonProperty("type") val type: String? = null,
    )

    data class TvsListNewEpisodes(
        @JsonProperty("docs") val docs: ArrayList<Docs> = arrayListOf(),
        @JsonProperty("total") val total: Int? = null,
        @JsonProperty("page") val page: Int? = null,
        @JsonProperty("limit") val limit: Int? = null,
        @JsonProperty("pages") val pages: Int? = null,
        @JsonProperty("type") val type: String? = null,
    )

    data class Docs(
        @JsonProperty("name") val name: String = String(),
        @JsonProperty("originalLanguage") val originalLanguage: String? = null,
        @JsonProperty("popularity") val popularity: Double? = null,
        @JsonProperty("runtime") val runtime: Int? = null,
        @JsonProperty("status") val status: String? = null,
        @JsonProperty("voteAverage") val voteAverage: Double? = null,
        @JsonProperty("voteCount") val voteCount: Int? = null,
        @JsonProperty("cast") val cast: String? = null,
        @JsonProperty("director") val director: String? = null,
        @JsonProperty("overview") val overview: String? = null,
        @JsonProperty("posterUrl") val posterUrl: String? = null,
        @JsonProperty("releaseDate") val releaseDate: String? = null,
        @JsonProperty("createdAt") val createdAt: String? = null,
        @JsonProperty("updatedAt") val updatedAt: String? = null,
        @JsonProperty("conversionDate") val conversionDate: String? = null,
        @JsonProperty("id") val id: Int? = null,
        @JsonProperty("available") val available: Boolean? = null,
    )


    override suspend fun getMainPage(): HomePageResponse {
        val items = ArrayList<HomePageList>()
        val doc = app.get(mainUrl).document
        val scriptText = doc.selectFirst("script[type=application/json]")!!.data()
        if (scriptText.contains("moviesListTrending")) {
            val json = parseJson<HomeJson>(scriptText)
            val homePageProps = json.props.pageProps
            listOf(
                Triple(
                    homePageProps.moviesListNewArrivals.docs,
                    homePageProps.moviesListNewArrivals.type,
                    "New Movie arrivals"
                ),
                Triple(
                    homePageProps.moviesListTrending.docs,
                    homePageProps.moviesListTrending.type,
                    "Trending Movies"
                ),
                Triple(
                    homePageProps.tvsListTrending.docs,
                    homePageProps.tvsListTrending.type,
                    "Trending TV Series"
                ),
                Triple(
                    homePageProps.tvsListNewEpisodes.docs,
                    homePageProps.tvsListNewEpisodes.type,
                    "New Episodes"
                )
            ).map { (docs, type, homename) ->
                val home = docs.map { info ->
                    val title = info.name
                    val poster = info.posterUrl
                    val typeinfo =
                        if (type?.contains("TV") == true) TvType.TvSeries else TvType.Movie
                    val link =
                        if (typeinfo == TvType.Movie) "$mainUrl/movie/${info.id}-${cleanTitle(title)}"
                        else "$mainUrl/tv-show/${info.id}-${cleanTitle(title)}/season-1/episode-1"
                    TvSeriesSearchResponse(
                        title,
                        link,
                        this.name,
                        typeinfo,
                        poster,
                        null,
                        null,
                    )
                }
                items.add(HomePageList(homename, home))
            }

        }

        if (items.size <= 0) throw ErrorLoadingException()
        return HomePageResponse(items)
    }

    data class SearchJson(
        @JsonProperty("props") val props: SearchProps = SearchProps(),
    )

    data class SearchProps(
        @JsonProperty("pageProps") val pageProps: SearchPageProps = SearchPageProps(),
    )

    data class SearchPageProps(
        @JsonProperty("mainList") val mainList: SearchMainList = SearchMainList(),
    )

    data class SearchMainList(
        @JsonProperty("docs") val docs: ArrayList<Docs> = arrayListOf(),
        @JsonProperty("total") val total: Int? = null,
        @JsonProperty("page") val page: Int? = null,
        @JsonProperty("limit") val limit: Int? = null,
        @JsonProperty("pages") val pages: Int? = null,
        @JsonProperty("type") val type: String? = null,
    )


    override suspend fun search(query: String): List<SearchResponse> {
        val search = ArrayList<SearchResponse>()
        val urls = listOf(
            "$mainUrl/movies/trending?search=$query",
            "$mainUrl/tv-shows/trending?search=$query"
        )
        urls.apmap { url ->
            val doc = app.get(url).document
            val scriptText = doc.selectFirst("script[type=application/json]")!!.data()
            if (scriptText.contains("pageProps")) {
                val json = parseJson<SearchJson>(scriptText)
                val searchPageProps = json.props.pageProps.mainList
                val pair = listOf(Pair(searchPageProps.docs, searchPageProps.type))
                pair.map { (docs, type) ->
                    docs.map { info ->
                        val title = info.name
                        val poster = info.posterUrl
                        val typeinfo =
                            if (type?.contains("TV") == true) TvType.TvSeries else TvType.Movie
                        val link = if (typeinfo == TvType.Movie) "$mainUrl/movie/${info.id}-${
                            cleanTitle(title)
                        }"
                        else "$mainUrl/tv-show/${info.id}-${cleanTitle(title)}/season-1/episode-1"
                        if (typeinfo == TvType.Movie) {
                            search.add(
                                MovieSearchResponse(
                                    title,
                                    link,
                                    this.name,
                                    TvType.Movie,
                                    poster,
                                    null
                                )
                            )
                        } else {
                            search.add(
                                TvSeriesSearchResponse(
                                    title,
                                    link,
                                    this.name,
                                    TvType.TvSeries,
                                    poster,
                                    null,
                                    null
                                )
                            )
                        }
                    }
                }
            }
        }
        return search
    }


    data class LoadMain(
        @JsonProperty("props") val props: LoadProps = LoadProps(),
        @JsonProperty("page") var page: String? = null,
        //@JsonProperty("query") val query: Query? = Query(),
        @JsonProperty("buildId") val buildId: String? = null,
        @JsonProperty("runtimeConfig") val runtimeConfig: RuntimeConfig? = RuntimeConfig(),
        @JsonProperty("isFallback") val isFallback: Boolean? = null,
        @JsonProperty("customServer") val customServer: Boolean? = null,
        @JsonProperty("appGip") val appGip: Boolean? = null
    )

    data class RuntimeConfig(
        @JsonProperty("AddThisService") val AddThisService: AddThisService? = AddThisService(),
        //@JsonProperty("Application") val Application: Application? = Application(),
        //@JsonProperty("Content") val Content: Content? = Content(),
        //@JsonProperty("GtmService") val GtmService: GtmService? = GtmService(),
        //@JsonProperty("IptvChannels") val IptvChannels: IptvChannels? = IptvChannels(),
        //@JsonProperty("Notifications") val Notifications: Notifications? = Notifications(),
        //@JsonProperty("Payments") val Payments: Payments? = Payments(),
        //@JsonProperty("Redux") val Redux: Redux? = Redux(),
        //@JsonProperty("Search") val Search: Search? = Search(),
        @JsonProperty("Services") val Services: Services? = Services(),
        //@JsonProperty("Sitemap") val Sitemap: Sitemap? = Sitemap(),
        //@JsonProperty("Support") val Support: Support? = Support(),
        @JsonProperty("Videos") val Videos: Videos? = Videos()
    )


    data class Server(
        @JsonProperty("Url") var Url: String? = null
    )

    data class Services(

        @JsonProperty("Server") val Server: Server? = Server(),
        @JsonProperty("TmdbServer") val TmdbServer: Server? = Server()

    )

    data class AddThisService(
        @JsonProperty("PublicId") val PublicId: String? = null
    )

    data class LoadProps(
        @JsonProperty("pageProps") val pageProps: LoadPageProps = LoadPageProps(),
    )

    data class LoadPageProps(
        @JsonProperty("selectedTv") val selectedTv: TheFlixMetadata? = TheFlixMetadata(),
        @JsonProperty("movie") val movie: TheFlixMetadata? = TheFlixMetadata(),
        @JsonProperty("videoUrl") val videoUrl: String? = null,
        @JsonProperty("recommendationsList") val recommendationsList: RecommendationsList? = RecommendationsList(),
    )

    data class Genres(
        @JsonProperty("name") val name: String,
        @JsonProperty("id") val id: Int? = null
    )

    data class Seasons(
        @JsonProperty("name") val name: String? = null,
        @JsonProperty("numberOfEpisodes") val numberOfEpisodes: Int? = null,
        @JsonProperty("seasonNumber") val seasonNumber: Int? = null,
        @JsonProperty("overview") val overview: String? = null,
        @JsonProperty("posterUrl") val posterUrl: String? = null,
        @JsonProperty("releaseDate") val releaseDate: String? = null,
        @JsonProperty("createdAt") val createdAt: String? = null,
        @JsonProperty("updatedAt") val updatedAt: String? = null,
        @JsonProperty("id") val id: Int? = null,
        @JsonProperty("episodes") val episodes: ArrayList<Episodes> = arrayListOf()
    )

    data class Episodes(
        @JsonProperty("episodeNumber") val episodeNumber: Int? = null,
        @JsonProperty("name") val name: String? = null,
        @JsonProperty("seasonNumber") val seasonNumber: Int? = null,
        @JsonProperty("voteAverage") val voteAverage: Double? = null,
        @JsonProperty("voteCount") val voteCount: Int? = null,
        @JsonProperty("overview") val overview: String? = null,
        @JsonProperty("releaseDate") val releaseDate: String? = null,
        @JsonProperty("createdAt") val createdAt: String? = null,
        @JsonProperty("updatedAt") val updatedAt: String? = null,
        @JsonProperty("id") val id: Int? = null,
        @JsonProperty("videos") val videos: ArrayList<Videos> = arrayListOf()
    )

    data class Videos(
        @JsonProperty("language") val language: String? = null,
        @JsonProperty("name") val name: String? = null,
        @JsonProperty("id") val id: Int? = null
    )

    data class RecommendationsList(
        @JsonProperty("docs") val docs: ArrayList<LoadDocs> = arrayListOf(),
        @JsonProperty("total") val total: Int? = null,
        @JsonProperty("page") val page: Int? = null,
        @JsonProperty("limit") val limit: Int? = null,
        @JsonProperty("pages") val pages: Int? = null,
        @JsonProperty("type") val type: String? = null,
    )

    data class LoadDocs(
        @JsonProperty("name") val name: String = String(),
        @JsonProperty("originalLanguage") val originalLanguage: String? = null,
        @JsonProperty("popularity") val popularity: Double? = null,
        @JsonProperty("runtime") val runtime: Int? = null,
        @JsonProperty("status") val status: String? = null,
        @JsonProperty("voteAverage") val voteAverage: Double? = null,
        @JsonProperty("voteCount") val voteCount: Int? = null,
        @JsonProperty("cast") val cast: String? = null,
        @JsonProperty("director") val director: String? = null,
        @JsonProperty("overview") val overview: String? = null,
        @JsonProperty("posterUrl") val posterUrl: String? = null,
        @JsonProperty("releaseDate") val releaseDate: String? = null,
        @JsonProperty("createdAt") val createdAt: String? = null,
        @JsonProperty("updatedAt") val updatedAt: String? = null,
        @JsonProperty("id") val id: Int? = null,
        @JsonProperty("available") val available: Boolean? = null,
    )


    data class TheFlixMetadata(
        @JsonProperty("episodeRuntime") val episodeRuntime: Int? = null,
        @JsonProperty("name") val name: String = String(),
        @JsonProperty("originalLanguage") val originalLanguage: String? = null,
        @JsonProperty("popularity") val popularity: Double? = null,
        @JsonProperty("runtime") val runtime: Int? = null,
        @JsonProperty("numberOfSeasons") val numberOfSeasons: Int? = null,
        @JsonProperty("numberOfEpisodes") val numberOfEpisodes: Int? = null,
        @JsonProperty("status") val status: String? = null,
        @JsonProperty("voteAverage") val voteAverage: Double? = null,
        @JsonProperty("voteCount") val voteCount: Int? = null,
        @JsonProperty("cast") val cast: String? = null,
        @JsonProperty("director") val director: String? = null,
        @JsonProperty("overview") val overview: String? = null,
        @JsonProperty("posterUrl") val posterUrl: String? = null,
        @JsonProperty("releaseDate") val releaseDate: String? = null,
        @JsonProperty("conversionDate") val conversionDate: String? = null,
        @JsonProperty("createdAt") val createdAt: String? = null,
        @JsonProperty("updatedAt") val updatedAt: String? = null,
        @JsonProperty("id") val id: Int? = null,
        @JsonProperty("available") val available: Boolean? = null,
        @JsonProperty("genres") val genres: ArrayList<Genres> = arrayListOf(),
        @JsonProperty("videos") val videos: ArrayList<Videos> = arrayListOf(),
        @JsonProperty("seasons") val seasons: ArrayList<Seasons> = arrayListOf()
    )

    private fun cleanTitle(title: String): String {
        val dotTitle = title.substringBefore("/season")
        if (dotTitle.contains(Regex("\\..\\."))) { //For titles containing more than two dots (S.W.A.T.)
            return (dotTitle.removeSuffix(".")
                .replace(" - ", "-")
                .replace(".", "-").replace(" ", "-")
                .replace("-&", "")
                .replace(Regex("(:|-&)"), "")
                .replace("'", "-")).lowercase()
        }
        return (title
            .replace(" - ", "-")
            .replace(" ", "-")
            .replace("-&", "")
            .replace("/", "-")
            .replace(Regex("(:|-&|\\.)"), "")
            .replace("'", "-")).lowercase()
    }

    private suspend fun getLoadMan(url: String): LoadMain {
        val og = app.get(url, cookies = latestCookies)
        val soup = og.document
        val script = soup.selectFirst("script[type=application/json]")!!.data()
        return parseJson(script)
    }

    // I legit cant figure this out
    private suspend fun getLoadMainRetry(url: String): LoadMain {
        val first = getLoadMan(url)
        val notFound = "/404"
        if (first.page == notFound) {
            first.runtimeConfig?.Services?.TmdbServer?.Url?.let { authUrl ->
                val optionsUrl = "$authUrl/authorization/session/continue?contentUsageType=Viewing"
                val options = app.options(
                    optionsUrl,
                    headers = mapOf(
                        "User-Agent" to USER_AGENT,
                        "Access-Control-Request-Method" to "POST",
                        "Access-Control-Request-Headers" to "content-type",
                        "Origin" to url,
                        "Referer" to mainUrl,
                    )
                )
                //{"affiliateCode":"","pathname":"/movie/696806-the-adam-project"}
                val data = mapOf("affiliateCode" to "", "pathname" to url.removePrefix(mainUrl))
                val resp = app.post(
                    optionsUrl, headers = mapOf(
                        "User-Agent" to USER_AGENT,
                        "Content-Type" to "application/json;charset=UTF-8",
                        "Accept" to "application/json, text/plain, */*",
                        "Origin" to url,
                        "Referer" to mainUrl,
                    ), data = data
                )

                latestCookies = resp.cookies
                val newData = getLoadMan(url)
                if (newData.page == notFound) {
                    throw ErrorLoadingException("404 Not found")
                }
                return newData
            }
        }
        return first
    }

    override suspend fun load(url: String): LoadResponse? {
        val tvtype = if (url.contains("movie")) TvType.Movie else TvType.TvSeries
        val json = getLoadMainRetry(url)
        val episodes = ArrayList<Episode>()
        val isMovie = tvtype == TvType.Movie
        val pageMain = json.props.pageProps

        val metadata: TheFlixMetadata? = if (isMovie) pageMain.movie else pageMain.selectedTv

        val available = metadata?.available

        val comingsoon = !available!!

        val movieId = metadata.id

        val movietitle = metadata.name

        val poster = metadata.posterUrl

        val description = metadata.overview

        if (!isMovie) {
            metadata.seasons.map { seasons ->
                val seasonPoster = seasons.posterUrl ?: metadata.posterUrl
                seasons.episodes.forEach { epi ->
                    val episodenu = epi.episodeNumber
                    val seasonum = epi.seasonNumber
                    val title = epi.name
                    val epDesc = epi.overview
                    val test = epi.videos
                    val ratinginfo = (epi.voteAverage)?.times(10)?.toInt()
                    val rating = if (ratinginfo?.equals(0) == true) null else ratinginfo
                    val eps = Episode(
                        "$mainUrl/tv-show/$movieId-${cleanTitle(movietitle)}/season-$seasonum/episode-$episodenu",
                        title,
                        seasonum,
                        episodenu,
                        description = epDesc!!,
                        posterUrl = seasonPoster,
                        rating = rating,
                    )
                    if (test.isNotEmpty()) {
                        episodes.add(eps)
                    } else {
                        //Nothing, will prevent seasons/episodes with no videos to be added
                    }
                }
            }
        }
        val rating = metadata.voteAverage?.toFloat()?.times(1000)?.toInt()

        val tags = metadata.genres.map { it.name }

        val recommendationsitem = pageMain.recommendationsList?.docs?.map { loadDocs ->
            val title = loadDocs.name
            val posterrec = loadDocs.posterUrl
            val link = if (isMovie) "$mainUrl/movie/${loadDocs.id}-${cleanTitle(title)}"
            else "$mainUrl/tv-show/${loadDocs.id}-${cleanTitle(title)}/season-1/episode-1"
            MovieSearchResponse(
                title,
                link,
                this.name,
                tvtype,
                posterrec,
                year = null
            )
        }

        val year = metadata.releaseDate?.substringBefore("-")

        val runtime = metadata.runtime?.div(60) ?: metadata.episodeRuntime?.div(60)
        val cast = metadata.cast?.split(",")

        return when (tvtype) {
            TvType.TvSeries -> {
                return newTvSeriesLoadResponse(movietitle, url, TvType.TvSeries, episodes) {
                    this.posterUrl = poster
                    this.year = year?.toIntOrNull()
                    this.plot = description
                    this.duration = runtime
                    addActors(cast)
                    this.tags = tags
                    this.recommendations = recommendationsitem
                    this.comingSoon = comingsoon
                    this.rating = rating
                }
            }
            TvType.Movie -> {
                newMovieLoadResponse(movietitle, url, TvType.Movie, url) {
                    this.year = year?.toIntOrNull()
                    this.posterUrl = poster
                    this.plot = description
                    this.duration = runtime
                    addActors(cast)
                    this.tags = tags
                    this.recommendations = recommendationsitem
                    this.comingSoon = comingsoon
                    this.rating = rating
                }
            }
            else -> null
        }
    }


    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val json = getLoadMainRetry(data)
        val extractedLink = json.props.pageProps.videoUrl
        val qualityReg = Regex("(\\d+p)")
        if (extractedLink != null) {
            val quality = qualityReg.find(extractedLink)?.value ?: ""
            callback(
                ExtractorLink(
                    name,
                    "$name $quality",
                    extractedLink,
                    "",
                    getQualityFromName(quality),
                    false
                )
            )
        }
        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/TrailersTwoProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.metaproviders.TmdbLink
import com.lagradost.cloudstream3.metaproviders.TmdbProvider
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.SubtitleHelper

class TrailersTwoProvider : TmdbProvider() {
    val user = "cloudstream"
    override val apiName = "Trailers.to"
    override var name = "Trailers.to"
    override var mainUrl = "https://trailers.to"
    override val useMetaLoadResponse = true
    override val instantLinkLoading = true

    data class TrailersEpisode(
        // val tvShowItemID: Long?,
        //val tvShow: String,
        //val tvShowIMDB: String?,
        //val tvShowTMDB: Long?,
        @JsonProperty("ItemID")
        val itemID: Int,
        //val title: String,
        //@JsonProperty("IMDb")
        @JsonProperty("IMDb")
        val imdb: String?,
        //@JsonProperty("TMDb")
        @JsonProperty("TMDb")
        val tmdb: Int?,
        //val releaseDate: String,
        //val entryDate: String
    )

    data class TrailersMovie(
        @JsonProperty("ItemID")
        val itemID: Int,
        @JsonProperty("IMDb")
        val imdb: String?,
        @JsonProperty("TMDb")
        val tmdb: Int?,
        //@JsonProperty("Title")
        //val title: String?,
    )

    /*companion object {
        private var tmdbToIdMovies: HashMap<Int, Int> = hashMapOf()
        private var imdbToIdMovies: HashMap<String, Int> = hashMapOf()
        private var tmdbToIdTvSeries: HashMap<Int, Int> = hashMapOf()
        private var imdbToIdTvSeries: HashMap<String, Int> = hashMapOf()

        private const val startDate = 1900
        private const val endDate = 9999

        fun getEpisode(tmdb: Int?, imdb: String?): Int? {
            var currentId: Int? = null
            if (tmdb != null) {
                currentId = tmdbToIdTvSeries[tmdb]
            }
            if (imdb != null && currentId == null) {
                currentId = imdbToIdTvSeries[imdb]
            }
            return currentId
        }

        fun getMovie(tmdb: Int?, imdb: String?): Int? {
            var currentId: Int? = null
            if (tmdb != null) {
                currentId = tmdbToIdMovies[tmdb]
            }
            if (imdb != null && currentId == null) {
                currentId = imdbToIdMovies[imdb]
            }
            return currentId
        }

        suspend fun fillData(isMovie: Boolean) {
            if (isMovie) {
                if (tmdbToIdMovies.isNotEmpty() || imdbToIdMovies.isNotEmpty()) {
                    return
                }
                parseJson<List<TrailersMovie>>(
                    app.get(
                        "https://trailers.to/movies?from=$startDate-01-01&to=$endDate",
                        timeout = 30
                    ).text
                ).forEach { movie ->
                    movie.imdb?.let {
                        imdbToIdTvSeries[it] = movie.itemID
                    }
                    movie.tmdb?.let {
                        tmdbToIdTvSeries[it] = movie.itemID
                    }
                }
            } else {
                if (tmdbToIdTvSeries.isNotEmpty() || imdbToIdTvSeries.isNotEmpty()) {
                    return
                }
                parseJson<List<TrailersEpisode>>(
                    app.get(
                        "https://trailers.to/episodes?from=$startDate-01-01&to=$endDate",
                        timeout = 30
                    ).text
                ).forEach { episode ->
                    episode.imdb?.let {
                        imdbToIdTvSeries[it] = episode.itemID
                    }
                    episode.tmdb?.let {
                        tmdbToIdTvSeries[it] = episode.itemID
                    }
                }
            }
        }
    }*/

    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
        //TvType.AnimeMovie,
        //TvType.Anime,
        //TvType.Cartoon
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val mappedData = parseJson<TmdbLink>(data)
        val (id, site) = if (mappedData.imdbID != null) listOf(
            mappedData.imdbID,
            "imdb"
        ) else listOf(mappedData.tmdbID.toString(), "tmdb")

        val isMovie = mappedData.episode == null && mappedData.season == null
        val (videoUrl, subtitleUrl) = if (isMovie) {
            val suffix = "$user/$site/$id"
            Pair(
                "https://trailers.to/video/$suffix",
                "https://trailers.to/subtitles/$suffix"
            )
        } else {
            val suffix = "$user/$site/$id/S${mappedData.season ?: 1}E${mappedData.episode ?: 1}"
            Pair(
                "https://trailers.to/video/$suffix",
                "https://trailers.to/subtitles/$suffix"
            )
        }

        callback.invoke(
            ExtractorLink(
                this.name,
                this.name,
                videoUrl,
                "https://trailers.to",
                Qualities.Unknown.value,
                false,
            )
        )

        argamap(
            {
                val subtitles =
                    app.get(subtitleUrl).text
                val subtitlesMapped = parseJson<List<TrailersSubtitleFile>>(subtitles)
                subtitlesMapped.forEach {
                    subtitleCallback.invoke(
                        SubtitleFile(
                            SubtitleHelper.fromTwoLettersToLanguage(it.LanguageCode ?: "en")
                                ?: "English",
                            "https://trailers.to/subtitles/${it.ContentHash ?: return@forEach}/${it.LanguageCode ?: return@forEach}.vtt" // ${it.MetaInfo?.SubFormat ?: "srt"}"
                        )
                    )
                }
            }, {
                //https://trailers.to/en/quick-search?q=iron man
                val name = mappedData.movieName
                if (name != null && isMovie) {
                    app.get("https://trailers.to/en/quick-search?q=${name}").document.select("a.post-minimal")
                        .mapNotNull {
                            it?.attr("href")
                        }.map { Regex("""/movie/(\d+)/""").find(it)?.groupValues?.getOrNull(1) }
                        .firstOrNull()?.let { movieId ->
                            val correctUrl = app.get(videoUrl).url
                            callback.invoke(
                                ExtractorLink(
                                    this.name,
                                    "${this.name} Backup",
                                    correctUrl.replace("/$user/0/", "/$user/$movieId/"),
                                    "https://trailers.to",
                                    Qualities.Unknown.value,
                                    false,
                                )
                            )
                        }
                }
            }
        )

        /*
        // the problem with this code is that it tages ages and the json file is 50mb or so for movies
        fillData(isMovie)
        val movieId = if (isMovie) {
            getMovie(mappedData.tmdbID, mappedData.imdbID)
        } else {
            getEpisode(mappedData.tmdbID, mappedData.imdbID)
        } ?: return@argamap
        val request = app.get(data)
        val endUrl = request.url
        callback.invoke(
            ExtractorLink(
                this.name,
                "${this.name} Backup",
                endUrl.replace("/cloudstream/0/", "/cloudstream/$movieId/"),
                "https://trailers.to",
                Qualities.Unknown.value,
                false,
            )
        )
         */

        return true
    }
}

// Auto generated
data class TrailersSubtitleFile(
    @JsonProperty("SubtitleID") val SubtitleID: Int?,
    @JsonProperty("ItemID") val ItemID: Int?,
    @JsonProperty("ContentText") val ContentText: String?,
    @JsonProperty("ContentHash") val ContentHash: String?,
    @JsonProperty("LanguageCode") val LanguageCode: String?,
    @JsonProperty("MetaInfo") val MetaInfo: MetaInfo?,
    @JsonProperty("EntryDate") val EntryDate: String?,
    @JsonProperty("ItemSubtitleAdaptations") val ItemSubtitleAdaptations: List<ItemSubtitleAdaptations>?,
    @JsonProperty("ReleaseNames") val ReleaseNames: List<String>?,
    @JsonProperty("SubFileNames") val SubFileNames: List<String>?,
    @JsonProperty("Framerates") val Framerates: List<Int>?,
    @JsonProperty("IsRelevant") val IsRelevant: Boolean?
)

data class QueryParameters(
    @JsonProperty("imdbid") val imdbid: String?
)

data class MetaInfo(
    @JsonProperty("MatchedBy") val MatchedBy: String?,
    @JsonProperty("IDSubMovieFile") val IDSubMovieFile: String?,
    @JsonProperty("MovieHash") val MovieHash: String?,
    @JsonProperty("MovieByteSize") val MovieByteSize: String?,
    @JsonProperty("MovieTimeMS") val MovieTimeMS: String?,
    @JsonProperty("IDSubtitleFile") val IDSubtitleFile: String?,
    @JsonProperty("SubFileName") val SubFileName: String?,
    @JsonProperty("SubActualCD") val SubActualCD: String?,
    @JsonProperty("SubSize") val SubSize: String?,
    @JsonProperty("SubHash") val SubHash: String?,
    @JsonProperty("SubLastTS") val SubLastTS: String?,
    @JsonProperty("SubTSGroup") val SubTSGroup: String?,
    @JsonProperty("InfoReleaseGroup") val InfoReleaseGroup: String?,
    @JsonProperty("InfoFormat") val InfoFormat: String?,
    @JsonProperty("InfoOther") val InfoOther: String?,
    @JsonProperty("IDSubtitle") val IDSubtitle: String?,
    @JsonProperty("UserID") val UserID: String?,
    @JsonProperty("SubLanguageID") val SubLanguageID: String?,
    @JsonProperty("SubFormat") val SubFormat: String?,
    @JsonProperty("SubSumCD") val SubSumCD: String?,
    @JsonProperty("SubAuthorComment") val SubAuthorComment: String?,
    @JsonProperty("SubAddDate") val SubAddDate: String?,
    @JsonProperty("SubBad") val SubBad: String?,
    @JsonProperty("SubRating") val SubRating: String?,
    @JsonProperty("SubSumVotes") val SubSumVotes: String?,
    @JsonProperty("SubDownloadsCnt") val SubDownloadsCnt: String?,
    @JsonProperty("MovieReleaseName") val MovieReleaseName: String?,
    @JsonProperty("MovieFPS") val MovieFPS: String?,
    @JsonProperty("IDMovie") val IDMovie: String?,
    @JsonProperty("IDMovieImdb") val IDMovieImdb: String?,
    @JsonProperty("MovieName") val MovieName: String?,
    @JsonProperty("MovieNameEng") val MovieNameEng: String?,
    @JsonProperty("MovieYear") val MovieYear: String?,
    @JsonProperty("MovieImdbRating") val MovieImdbRating: String?,
    @JsonProperty("SubFeatured") val SubFeatured: String?,
    @JsonProperty("UserNickName") val UserNickName: String?,
    @JsonProperty("SubTranslator") val SubTranslator: String?,
    @JsonProperty("ISO639") val ISO639: String?,
    @JsonProperty("LanguageName") val LanguageName: String?,
    @JsonProperty("SubComments") val SubComments: String?,
    @JsonProperty("SubHearingImpaired") val SubHearingImpaired: String?,
    @JsonProperty("UserRank") val UserRank: String?,
    @JsonProperty("SeriesSeason") val SeriesSeason: String?,
    @JsonProperty("SeriesEpisode") val SeriesEpisode: String?,
    @JsonProperty("MovieKind") val MovieKind: String?,
    @JsonProperty("SubHD") val SubHD: String?,
    @JsonProperty("SeriesIMDBParent") val SeriesIMDBParent: String?,
    @JsonProperty("SubEncoding") val SubEncoding: String?,
    @JsonProperty("SubAutoTranslation") val SubAutoTranslation: String?,
    @JsonProperty("SubForeignPartsOnly") val SubForeignPartsOnly: String?,
    @JsonProperty("SubFromTrusted") val SubFromTrusted: String?,
    @JsonProperty("QueryCached") val QueryCached: Int?,
    @JsonProperty("SubTSGroupHash") val SubTSGroupHash: String?,
    @JsonProperty("SubDownloadLink") val SubDownloadLink: String?,
    @JsonProperty("ZipDownloadLink") val ZipDownloadLink: String?,
    @JsonProperty("SubtitlesLink") val SubtitlesLink: String?,
    @JsonProperty("QueryNumber") val QueryNumber: String?,
    @JsonProperty("QueryParameters") val QueryParameters: QueryParameters?,
    @JsonProperty("Score") val Score: Double?
)

data class ItemSubtitleAdaptations(
    @JsonProperty("ContentHash") val ContentHash: String?,
    @JsonProperty("OffsetMs") val OffsetMs: Int?,
    @JsonProperty("Framerate") val Framerate: Int?,
    @JsonProperty("Views") val Views: Int?,
    @JsonProperty("EntryDate") val EntryDate: String?,
    @JsonProperty("Subtitle") val Subtitle: String?
)


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/TwoEmbedProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import android.util.Log
import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.getCaptchaToken
import com.lagradost.cloudstream3.metaproviders.TmdbLink
import com.lagradost.cloudstream3.metaproviders.TmdbProvider
import com.lagradost.cloudstream3.movieproviders.SflixProvider.Companion.extractRabbitStream
import com.lagradost.cloudstream3.movieproviders.SflixProvider.Companion.runSflixExtractorVerifierJob
import com.lagradost.cloudstream3.utils.AppUtils.parseJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class TwoEmbedProvider : TmdbProvider() {
    override val apiName = "2Embed"
    override var name = "2Embed"
    override var mainUrl = "https://www.2embed.ru"
    override val useMetaLoadResponse = true
    override val instantLinkLoading = false
    override val supportedTypes = setOf(
        TvType.Movie,
        TvType.TvSeries,
    )

    data class EmbedJson (
        @JsonProperty("type") val type: String?,
        @JsonProperty("link") val link: String,
        @JsonProperty("sources") val sources: List<String?>,
        @JsonProperty("tracks") val tracks: List<String>?
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val mappedData = parseJson<TmdbLink>(data)
        val (id, site) = if (mappedData.imdbID != null) listOf(
            mappedData.imdbID,
            "imdb"
        ) else listOf(mappedData.tmdbID.toString(), "tmdb")
        val isMovie = mappedData.episode == null && mappedData.season == null
        val embedUrl = if (isMovie) {
            "$mainUrl/embed/$site/movie?id=$id"
        } else {
            val suffix = "$id&s=${mappedData.season ?: 1}&e=${mappedData.episode ?: 1}"
            "$mainUrl/embed/$site/tv?id=$suffix"
        }

        val document = app.get(embedUrl).document
        val captchaKey =
            document.select("script[src*=https://www.google.com/recaptcha/api.js?render=]")
                .attr("src").substringAfter("render=")

        val servers =  document.select(".dropdown-menu a[data-id]").map { it.attr("data-id") }
        servers.apmap { serverID ->
            val token = getCaptchaToken(embedUrl, captchaKey)
            val ajax = app.get("$mainUrl/ajax/embed/play?id=$serverID&_token=$token", referer = embedUrl).text
            val mappedservers = parseJson<EmbedJson>(ajax)
            val iframeLink = mappedservers.link
            if (iframeLink.contains("rabbitstream")) {
                extractRabbitStream(iframeLink, subtitleCallback, callback, "https://ws10.rabbitstream.net/socket.io/?EIO=4&transport=polling") { it }
            } else {
                loadExtractor(iframeLink, embedUrl, callback)
            }
        }
        return true
    }

    override suspend fun extractorVerifierJob(extractorData: String?) {
        Log.d(this.name, "Starting ${this.name} job!")
        runSflixExtractorVerifierJob(this, extractorData, "https://rabbitstream.net/")
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/VfFilmProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import org.jsoup.Jsoup

// referer = https://vf-film.org, USERAGENT ALSO REQUIRED
class VfFilmProvider : MainAPI() {
    override var mainUrl = "https://vf-film.me"
    override var name = "vf-film.me"
    override val lang = "fr"
    override val hasQuickSearch = false
    override val hasMainPage = false
    override val hasChromecastSupport = false

    override val supportedTypes = setOf(TvType.Movie)

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=$query"
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val items = document.select("ul.MovieList > li > article > a")
        if (items.isNullOrEmpty()) return ArrayList()

        val returnValue = ArrayList<SearchResponse>()
        for (item in items) {
            val href = item.attr("href")

            val poster = item.selectFirst("> div.Image > figure > img")!!.attr("src")
                .replace("//image", "https://image")

            val name = item.selectFirst("> h3.Title")!!.text()

            val year = item.selectFirst("> span.Year")!!.text().toIntOrNull()

            returnValue.add(MovieSearchResponse(name, href, this.name, TvType.Movie, poster, year))
        }
        return returnValue
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        if (data.length <= 4) return false
        callback.invoke(
            ExtractorLink(
                this.name,
                this.name,
                data,
                "",
                Qualities.P720.value,
                false
            )
        )
        return true
    }

    private suspend fun getDirect(original: String): String {  // original data, https://vf-film.org/?trembed=1&trid=55313&trtype=1 for example
        val response = app.get(original).text
        val url = "iframe .*src=\"(.*?)\"".toRegex().find(response)?.groupValues?.get(1)
            .toString()  // https://vudeo.net/embed-uweno86lzx8f.html for example
        val vudoResponse = app.get(url).text
        val document = Jsoup.parse(vudoResponse)
        val vudoUrl = Regex("sources: \\[\"(.*?)\"]").find(document.html())?.groupValues?.get(1)
            .toString()  // direct mp4 link, https://m11.vudeo.net/2vp3ukyw2avjdohilpebtzuct42q5jwvpmpsez3xjs6d7fbs65dpuey2rbra/v.mp4 for exemple
        return vudoUrl
    }

    override suspend fun load(url: String): LoadResponse {
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val title = document.selectFirst("div.SubTitle")?.text()
            ?: throw ErrorLoadingException("Service might be unavailable")

        val year = document.select("span.Date").text().toIntOrNull()

//        val rating = document.select("span.AAIco-star").text()

        val duration = document.select("span.Time").text().toIntOrNull()

        val poster = document.selectFirst("div.Image > figure > img")!!.attr("src")
            .replace("//image", "https://image")

        val descript = document.selectFirst("div.Description > p")!!.text()

        val players = document.select("ul.TPlayerNv > li")
        var number_player = 0
        var found = false
        for (player in players) {
            if (player.selectFirst("> span")!!.text() == "Vudeo") {
                found = true
                break
            } else {
                number_player += 1
            }
        }
        if (!found) {
            number_player = 0
        }
        val i = number_player.toString()
        val trid = Regex("iframe .*trid=(.*?)&").find(document.html())?.groupValues?.get(1)

        val data = getDirect("$mainUrl/?trembed=$i&trid=$trid&trtype=1")

        return newMovieLoadResponse(
            title,
            url,
            TvType.Movie,
            data
        ) {
            this.posterUrl = poster
            this.year = year
            this.plot = descript
            //this.rating = rating
            this.duration = duration
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/VfSerieProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import org.jsoup.Jsoup

// referer = https://vf-serie.org, USERAGENT ALSO REQUIRED
class VfSerieProvider : MainAPI() {
    override var mainUrl = "https://vf-serie.org"
    override var name = "vf-serie.org"
    override val lang = "fr"

    override val hasQuickSearch = false
    override val hasMainPage = false
    override val hasChromecastSupport = false

    override val supportedTypes = setOf(TvType.TvSeries)

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=$query"
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val items = document.select("ul.MovieList > li > article > a")
        if (items.isNullOrEmpty()) return ArrayList()

        val returnValue = ArrayList<SearchResponse>()
        for (item in items) {
            val href = item.attr("href")

            val poster = item.selectFirst("> div.Image > figure > img")!!.attr("src")
                .replace("//image", "https://image")

            if (poster == "$mainUrl/wp-content/themes/toroplay/img/cnt/noimg-thumbnail.png") {  // if the poster is missing (the item is just a redirect to something like https://vf-serie.org/series-tv/)
                continue
            }
            val name = item.selectFirst("> h3.Title")!!.text()

            val year = item.selectFirst("> span.Year")!!.text().toIntOrNull()

            returnValue.add(
                TvSeriesSearchResponse(
                    name,
                    href,
                    this.name,
                    TvType.TvSeries,
                    poster,
                    year,
                    null
                )
            )
        }
        return returnValue
    }

    private suspend fun getDirect(original: String): String {  // original data, https://vf-serie.org/?trembed=1&trid=80467&trtype=2 for example
        val response = app.get(original).text
        val url = "iframe .*src=\"(.*?)\"".toRegex().find(response)?.groupValues?.get(1)
            .toString()  // https://vudeo.net/embed-7jdb1t5b2mvo.html for example
        val vudoResponse = app.get(url).text
        val document = Jsoup.parse(vudoResponse)
        return Regex("sources: \\[\"(.*?)\"]").find(document.html())?.groupValues?.get(1)
            .toString()  // direct mp4 link, https://m5.vudeo.net/2vp3xgpw2avjdohilpfbtyuxzzrqzuh4z5yxvztral5k3rjnba6f4byj3saa/v.mp4 for exemple
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        if (data == "") return false

        val response = app.get(data).text
        val document = Jsoup.parse(response)
        val players = document.select("ul.TPlayerNv > li")
        val trembedUrl = document.selectFirst("div.TPlayerTb > iframe")!!.attr("src")
        var numberPlayer = Regex(".*trembed=(.*?)&").find(trembedUrl)?.groupValues?.get(1)!!
            .toInt()  // the starting trembed number of the first player website, some start at 0 other at 1
        var found = false
        for (player in players) {
            if (player.selectFirst("> span")!!.text() == "Vudeo") {
                found = true
                break
            } else {
                numberPlayer += 1
            }
        }
        if (!found) {
            numberPlayer = 1
        }
        val i = numberPlayer.toString()
        val trid = Regex("iframe .*trid=(.*?)&").find(document.html())?.groupValues?.get(1)

        val directData = getDirect("$mainUrl/?trembed=$i&trid=$trid&trtype=2")
        callback.invoke(
            ExtractorLink(
                this.name,
                this.name,
                directData,
                "",
                Qualities.P720.value,
                false
            )
        )
        return true
    }

    override suspend fun load(url: String): LoadResponse {
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val title =
            document.selectFirst(".Title")?.text()?.replace("Regarder Serie ", "")
                ?.replace(" En Streaming", "")
                ?: throw ErrorLoadingException("Service might be unavailable")


        val year = document.select("span.Date").text().toIntOrNull()
        val rating = document.select("span.AAIco-star").text().toIntOrNull()

        //val duration = document.select("span.Time").text()?.toIntOrNull()

        val backgroundPoster =
            document.selectFirst("div.Image > figure > img")!!.attr("src")
                .replace("//image", "https://image")

        val descript = document.selectFirst("div.Description > p")!!.text()

        val list = ArrayList<Int>()

        // episode begin
        document.select(".Wdgt").forEach { element ->
            val season = element.selectFirst("> .AA-Season > span")?.text()?.toIntOrNull()
            if (season != null && season > 0) {
                list.add(season)
            }
        }
        if (list.isEmpty()) throw ErrorLoadingException("No Seasons Found")

        val episodeList = ArrayList<Episode>()

        for (season in list) {
            val episodes = document.select("table > tbody > tr")
            if (episodes.isNotEmpty()) {
                episodes.forEach { episode ->
                    val epNum = episode.selectFirst("> span.Num")?.text()?.toIntOrNull()
                    val poster =
                        episode.selectFirst("> td.MvTbImg > a > img")?.attr("src")
                            ?.replace("//image", "https://image")
                    val aName = episode.selectFirst("> td.MvTbTtl > a")
                    val date = episode.selectFirst("> td.MvTbTtl > span")?.text()?.toString()
                    val name = aName!!.text()
                    val href = aName.attr("href")
                    episodeList.add(
                        newEpisode(href) {
                            this.name = name
                            this.season = season
                            this.episode = epNum
                            this.posterUrl = poster
                            addDate(date)
                        }
                    )
                }
            }
        }
        return TvSeriesLoadResponse(
            title,
            url,
            this.name,
            TvType.TvSeries,
            episodeList,
            backgroundPoster,
            year,
            descript,
            null,
            rating
        )
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/VidEmbedProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.TvType

/** Needs to inherit from MainAPI() to
 * make the app know what functions to call
 */
class VidEmbedProvider : VidstreamProviderTemplate() {
    // mainUrl is good to have as a holder for the url to make future changes easier.
    override var mainUrl = "https://vidembed.cc"

    // name is for how the provider will be named which is visible in the UI, no real rules for this.
    override var name = "VidEmbed"

    override val homePageUrlList: List<String> = listOf(
        mainUrl,
        "$mainUrl/movies",
        "$mainUrl/series",
        "$mainUrl/recommended-series",
        "$mainUrl/cinema-movies"
    )

    override val iv = "9225679083961858"
    override val secretKey = "25742532592138496744665879883281"
    override val secretDecryptKey = secretKey

    // This is just extra metadata about what type of movies the provider has.
    // Needed for search functionality.
    override val supportedTypes = setOf(TvType.TvSeries, TvType.Movie)
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/VidstreamProviderTemplate.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.animeproviders.GogoanimeProvider.Companion.extractVidstream
import com.lagradost.cloudstream3.extractors.Vidstream
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import org.jsoup.Jsoup
import java.net.URI

/** Needs to inherit from MainAPI() to
 * make the app know what functions to call
 */
open class VidstreamProviderTemplate : MainAPI() {
    open val homePageUrlList = listOf<String>()
    open val vidstreamExtractorUrl: String? = null

    /**
     *  Used to generate encrypted video links.
     *  Try keys from other providers before cracking
     *  one yourself.
     * */
    // Userscript to get the keys:

    /*
    // ==UserScript==
    // @name        Easy keys
    // @namespace   Violentmonkey Scripts
    // @match       https://*/streaming.php*
    // @grant       none
    // @version     1.0
    // @author      LagradOst
    // @description 4/16/2022, 2:05:31 PM
    // ==/UserScript==

    let encrypt = CryptoJS.AES.encrypt;
    CryptoJS.AES.encrypt = (message, key, cfg) => {
        let realKey = CryptoJS.enc.Utf8.stringify(key);
        let realIv = CryptoJS.enc.Utf8.stringify(cfg.iv);

        var result = encrypt(message, key, cfg);
        let realResult = CryptoJS.enc.Utf8.stringify(result);

        popup = "Encrypt key: " + realKey + "\n\nIV: " + realIv + "\n\nMessage: " + message + "\n\nResult: " + realResult;
        alert(popup);

        return result;
    };

    let decrypt = CryptoJS.AES.decrypt;
    CryptoJS.AES.decrypt = (message, key, cfg) => {
        let realKey = CryptoJS.enc.Utf8.stringify(key);
        let realIv = CryptoJS.enc.Utf8.stringify(cfg.iv);

        let result = decrypt(message, key, cfg);
        let realResult = CryptoJS.enc.Utf8.stringify(result);

        popup = "Decrypt key: " + realKey + "\n\nIV: " + realIv + "\n\nMessage: " + message + "\n\nResult: " + realResult;
        alert(popup);

        return result;
    };

     */
     */

    open val iv: String? = null
    open val secretKey: String? = null
    open val secretDecryptKey: String? = null
    /** Generated the key from IV and ID */
    open val isUsingAdaptiveKeys: Boolean = false
    /**
     * Generate data for the encrypt-ajax automatically (only on supported sites)
     * See $("script[data-name='episode']")[0].dataset.value
     * */
    open val isUsingAdaptiveData: Boolean = false


//    // mainUrl is good to have as a holder for the url to make future changes easier.
//    override val mainUrl: String
//        get() = "https://vidembed.cc"
//
//    // name is for how the provider will be named which is visible in the UI, no real rules for this.
//    override val name: String
//        get() = "VidEmbed"

    // hasQuickSearch defines if quickSearch() should be called, this is only when typing the searchbar
    // gives results on the site instead of bringing you to another page.
    // if hasQuickSearch is true and quickSearch() hasn't been overridden you will get errors.
    // VidEmbed actually has quick search on their site, but the function wasn't implemented.
    override val hasQuickSearch = false

    // If getMainPage() is functional, used to display the homepage in app, an optional, but highly encouraged endevour.
    override val hasMainPage = true

    // Searching returns a SearchResponse, which can be one of the following: AnimeSearchResponse, MovieSearchResponse, TorrentSearchResponse, TvSeriesSearchResponse
    // Each of the classes requires some different data, but always has some critical things like name, poster and url.
    override suspend fun search(query: String): ArrayList<SearchResponse> {
        // Simply looking at devtools network is enough to spot a request like:
        // https://vidembed.cc/search.html?keyword=neverland where neverland is the query, can be written as below.
        val link = "$mainUrl/search.html?keyword=$query"
        val html = app.get(link).text
        val soup = Jsoup.parse(html)

        return ArrayList(soup.select(".listing.items > .video-block").map { li ->
            // Selects the href in <a href="...">
            val href = fixUrl(li.selectFirst("a")!!.attr("href"))
            val poster = li.selectFirst("img")?.attr("src")

            // .text() selects all the text in the element, be careful about doing this while too high up in the html hierarchy
            val title = li.selectFirst(".name")!!.text()
            // Use get(0) and toIntOrNull() to prevent any possible crashes, [0] or toInt() will error the search on unexpected values.
            val year = li.selectFirst(".date")?.text()?.split("-")?.get(0)?.toIntOrNull()

            TvSeriesSearchResponse(
                // .trim() removes unwanted spaces in the start and end.
                if (!title.contains("Episode")) title else title.split("Episode")[0].trim(),
                href,
                this.name,
                TvType.TvSeries,
                poster, year,
                // You can't get the episodes from the search bar.
                null
            )
        })
    }


    // Load, like the name suggests loads the info page, where all the episodes and data usually is.
    // Like search you should return either of: AnimeLoadResponse, MovieLoadResponse, TorrentLoadResponse, TvSeriesLoadResponse.
    override suspend fun load(url: String): LoadResponse? {
        // Gets the url returned from searching.
        val html = app.get(url).text
        val soup = Jsoup.parse(html)

        var title = soup.selectFirst("h1,h2,h3")!!.text()
        title = if (!title.contains("Episode")) title else title.split("Episode")[0].trim()

        val description = soup.selectFirst(".post-entry")?.text()?.trim()
        var poster: String? = null
        var year: Int? = null

        val episodes =
            soup.select(".listing.items.lists > .video-block").withIndex().map { (_, li) ->
                val epTitle = if (li.selectFirst(".name") != null)
                    if (li.selectFirst(".name")!!.text().contains("Episode"))
                        "Episode " + li.selectFirst(".name")!!.text().split("Episode")[1].trim()
                    else
                        li.selectFirst(".name")!!.text()
                else ""
                val epThumb = li.selectFirst("img")?.attr("src")
                val epDate = li.selectFirst(".meta > .date")!!.text()

                if (poster == null) {
                    poster = li.selectFirst("img")?.attr("onerror")?.split("=")?.get(1)
                        ?.replace(Regex("[';]"), "")
                }

                val epNum = Regex("""Episode (\d+)""").find(epTitle)?.destructured?.component1()
                    ?.toIntOrNull()
                if (year == null) {
                    year = epDate.split("-")[0].toIntOrNull()
                }
                newEpisode(li.selectFirst("a")!!.attr("href")) {
                    this.episode = epNum
                    this.posterUrl = epThumb
                    addDate(epDate)
                }
            }.reversed()

        // Make sure to get the type right to display the correct UI.
        val tvType =
            if (episodes.size == 1 && episodes[0].name == title) TvType.Movie else TvType.TvSeries

        return when (tvType) {
            TvType.TvSeries -> {
                TvSeriesLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes,
                    poster,
                    year,
                    description,
                    ShowStatus.Ongoing,
                    null,
                    null
                )
            }
            TvType.Movie -> {
                MovieLoadResponse(
                    title,
                    url,
                    this.name,
                    tvType,
                    episodes[0].data,
                    poster,
                    year,
                    description,
                    null,
                    null
                )
            }
            else -> null
        }
    }

    // This loads the homepage, which is basically a collection of search results with labels.
    // Optional function, but make sure to enable hasMainPage if you program this.
    override suspend fun getMainPage(): HomePageResponse {
        val urls = homePageUrlList
        val homePageList = ArrayList<HomePageList>()
        // .pmap {} is used to fetch the different pages in parallel
        urls.apmap { url ->
            val response = app.get(url, timeout = 20).text
            val document = Jsoup.parse(response)
            document.select("div.main-inner").forEach { inner ->
                // Always trim your text unless you want the risk of spaces at the start or end.
                val title = inner.select(".widget-title").text().trim()
                val elements = inner.select(".video-block").map {
                    val link = fixUrl(it.select("a").attr("href"))
                    val image = it.select(".picture > img").attr("src")
                    val name =
                        it.select("div.name").text().trim().replace(Regex("""[Ee]pisode \d+"""), "")
                    val isSeries = (name.contains("Season") || name.contains("Episode"))

                    if (isSeries) {
                        newTvSeriesSearchResponse(name, link) {
                            posterUrl = image
                        }
                    } else {
                        newMovieSearchResponse(name, link) {
                            posterUrl = image
                        }
                    }
                }

                homePageList.add(
                    HomePageList(
                        title, elements
                    )
                )
            }
        }
        return HomePageResponse(homePageList)
    }

    // loadLinks gets the raw .mp4 or .m3u8 urls from the data parameter in the episodes class generated in load()
    // See Episode(...) in this provider.
    // The data are usually links, but can be any other string to help aid loading the links.
    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        // These callbacks are functions you should call when you get a link to a subtitle file or media file.
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        // "?: return" is a very useful statement which returns if the iframe link isn't found.
        val iframeLink =
            Jsoup.parse(app.get(data).text).selectFirst("iframe")?.attr("src") ?: return false

        extractVidstream(iframeLink, this.name, callback, iv, secretKey, secretDecryptKey, isUsingAdaptiveKeys, isUsingAdaptiveData)
        // In this case the video player is a vidstream clone and can be handled by the vidstream extractor.
        // This case is a both unorthodox and you normally do not call extractors as they detect the url returned and does the rest.
        val vidstreamObject = Vidstream(vidstreamExtractorUrl ?: mainUrl)
        // https://vidembed.cc/streaming.php?id=MzUwNTY2&... -> MzUwNTY2
        val id = Regex("""id=([^&]*)""").find(iframeLink)?.groupValues?.get(1)

        if (id != null) {
            vidstreamObject.getUrl(id, isCasting, callback)
        }

        val html = app.get(fixUrl(iframeLink)).text
        val soup = Jsoup.parse(html)

        val servers = soup.select(".list-server-items > .linkserver").mapNotNull { li ->
            if (!li?.attr("data-video").isNullOrEmpty()) {
                Pair(li.text(), fixUrl(li.attr("data-video")))
            } else {
                null
            }
        }
        servers.apmap {
            // When checking strings make sure to make them lowercase and trimmed because edgecases like "beta server " wouldn't work otherwise.
            if (it.first.trim().equals("beta server", ignoreCase = true)) {
                // Group 1: link, Group 2: Label
                // Regex can be used to effectively parse small amounts of json without bothering with writing a json class.
                val sourceRegex =
                    Regex("""sources:[\W\w]*?file:\s*["'](.*?)["'][\W\w]*?label:\s*["'](.*?)["']""")
                val trackRegex =
                    Regex("""tracks:[\W\w]*?file:\s*["'](.*?)["'][\W\w]*?label:\s*["'](.*?)["']""")

                // Having a referer is often required. It's a basic security check most providers have.
                // Try to replicate what your browser does.
                val serverHtml = app.get(it.second, headers = mapOf("referer" to iframeLink)).text
                sourceRegex.findAll(serverHtml).forEach { match ->
                    callback.invoke(
                        ExtractorLink(
                            this.name,
                            match.groupValues.getOrNull(2)?.let { "${this.name} $it" } ?: this.name,
                            match.groupValues[1],
                            it.second,
                            // Useful function to turn something like "1080p" to an app quality.
                            getQualityFromName(match.groupValues.getOrNull(2) ?: ""),
                            // Kinda risky
                            // isM3u8 makes the player pick the correct extractor for the source.
                            // If isM3u8 is wrong the player will error on that source.
                            URI(match.groupValues[1]).path.endsWith(".m3u8"),
                        )
                    )
                }
                trackRegex.findAll(serverHtml).forEach { match ->
                    subtitleCallback.invoke(
                        SubtitleFile(
                            match.groupValues.getOrNull(2) ?: "Unknown",
                            match.groupValues[1]
                        )
                    )
                }
            }
        }

        return true
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/VMoveeProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.getQualityFromName
import org.jsoup.Jsoup

class VMoveeProvider : MainAPI() {
    override var name = "VMovee"
    override var mainUrl = "https://www.vmovee.watch"

    override val supportedTypes = setOf(TvType.Movie)

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?s=$query"
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val searchItems = document.select("div.search-page > div.result-item > article")
        if (searchItems.size == 0) return ArrayList()
        val returnValue = ArrayList<SearchResponse>()
        for (item in searchItems) {
            val details = item.selectFirst("> div.details")
            val imgHolder = item.selectFirst("> div.image > div.thumbnail > a")
            // val href = imgHolder.attr("href")
            val poster = imgHolder!!.selectFirst("> img")!!.attr("data-lazy-src")
            val isTV = imgHolder.selectFirst("> span")!!.text() == "TV"
            if (isTV) continue // no TV support yet

            val titleHolder = details!!.selectFirst("> div.title > a")
            val title = titleHolder!!.text()
            val href = titleHolder.attr("href")
            val meta = details.selectFirst("> div.meta")
            val year = meta!!.selectFirst("> span.year")!!.text().toIntOrNull()
            // val rating = parseRating(meta.selectFirst("> span.rating").text().replace("IMDb ", ""))
            // val descript = details.selectFirst("> div.contenido").text()
            returnValue.add(
                if (isTV) TvSeriesSearchResponse(title, href, this.name, TvType.TvSeries, poster, year, null)
                else MovieSearchResponse(title, href, this.name, TvType.Movie, poster, year)
            )
        }
        return returnValue
    }

    data class LoadLinksAjax(
        @JsonProperty("embed_url")
        val embedUrl: String,
    )

    data class ReeoovAPIData(
        @JsonProperty("file")
        val file: String,
        @JsonProperty("label")
        val label: String,
    )

    data class ReeoovAPI(
        @JsonProperty("data")
        val data: List<ReeoovAPIData>,
    )

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {

        val url = "$mainUrl/dashboard/admin-ajax.php"
        val post =
            app.post(
                url,
                headers = mapOf("referer" to url),
                data = mapOf("action" to "doo_player_ajax", "post" to data, "nume" to "2", "type" to "movie")
            ).text

        val ajax = mapper.readValue<LoadLinksAjax>(post)
        var realUrl = ajax.embedUrl
        if (realUrl.startsWith("//")) {
            realUrl = "https:$realUrl"
        }

        val request = app.get(realUrl)
        val prefix = "https://reeoov.tube/v/"
        if (request.url.startsWith(prefix)) {
            val apiUrl = "https://reeoov.tube/api/source/${request.url.removePrefix(prefix)}"
            val apiResponse = app.post(
                apiUrl,
                headers = mapOf("Referer" to request.url),
                data = mapOf("r" to "https://www.vmovee.watch/", "d" to "reeoov.tube")
            ).text
            val apiData = mapper.readValue<ReeoovAPI>(apiResponse)
            for (d in apiData.data) {
                callback.invoke(
                    ExtractorLink(
                        this.name,
                        this.name + " " + d.label,
                        d.file,
                        "https://reeoov.tube/",
                        getQualityFromName(d.label),
                        false
                    )
                )
            }
        }

        return true
    }

    override suspend fun load(url: String): LoadResponse {
        val response = app.get(url).text
        val document = Jsoup.parse(response)

        val sheader = document.selectFirst("div.sheader")

        val poster = sheader!!.selectFirst("> div.poster > img")!!.attr("data-lazy-src")
        val data = sheader.selectFirst("> div.data")
        val title = data!!.selectFirst("> h1")!!.text()
        val descript = document.selectFirst("div#info > div")!!.text()
        val id = document.select("div.starstruck").attr("data-id")

        return MovieLoadResponse(title, url, this.name, TvType.Movie, id, poster, null, descript, null, null)
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/movieproviders/WatchAsianProvider.kt
================================================
package com.lagradost.cloudstream3.movieproviders

import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.animeproviders.GogoanimeProvider.Companion.extractVidstream
import com.lagradost.cloudstream3.extractors.XStreamCdn
import com.lagradost.cloudstream3.extractors.helper.AsianEmbedHelper
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.loadExtractor

class WatchAsianProvider : MainAPI() {
    override var mainUrl = "https://watchasian.sh"
    override var name = "WatchAsian"
    override val hasQuickSearch = false
    override val hasMainPage = true
    override val hasChromecastSupport = false
    override val hasDownloadSupport = true
    override val supportedTypes = setOf(TvType.AsianDrama)

    override suspend fun getMainPage(): HomePageResponse {
        val headers = mapOf("X-Requested-By" to mainUrl)
        val doc = app.get(mainUrl, headers = headers).document
        val rowPair = mutableListOf<Pair<String, String>>()
        doc.select("div.block-tab")?.forEach {
            it?.select("ul.tab > li")?.mapNotNull { row ->
                val link = row?.attr("data-tab") ?: return@mapNotNull null
                val title = row.text() ?: return@mapNotNull null
                Pair(title, link)
            }?.let { it1 ->
                rowPair.addAll(
                    it1
                )
            }
        }

        return HomePageResponse(
            rowPair.mapNotNull { row ->
                val main = (doc.select("div.tab-content.${row.second}")
                    ?: doc.select("div.tab-content.${row.second}.selected"))
                    ?: return@mapNotNull null

                val title = row.first
                val inner = main.select("li") ?: return@mapNotNull null

                HomePageList(
                    title,
                    inner.map {
                        // Get inner div from article
                        val innerBody = it?.selectFirst("a")
                        // Fetch details
                        val link = fixUrlNull(innerBody?.attr("href")) ?: return@map null
                        val image =
                            fixUrlNull(innerBody?.select("img")?.attr("data-original")) ?: ""
                        val name = (innerBody?.selectFirst("h3.title")?.text() ?: innerBody?.text())
                            ?: "<Untitled>"
                        //Log.i(this.name, "Result => (innerBody, image) ${innerBody} / ${image}")
                        MovieSearchResponse(
                            name,
                            link,
                            this.name,
                            TvType.TvSeries,
                            image,
                            year = null,
                            id = null,
                        )
                    }.filterNotNull().distinctBy { c -> c.url })
            }.filter { a -> a.list.isNotEmpty() }
        )
    }

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/search?type=movies&keyword=$query"
        val document = app.get(url).document.getElementsByTag("body")
            .select("div.block.tab-container > div > ul > li") ?: return listOf()

        return document.mapNotNull {
            val innerA = it?.selectFirst("a") ?: return@mapNotNull null
            val link = fixUrlNull(innerA.attr("href")) ?: return@mapNotNull null
            val title = it.select("h3.title")?.text() ?: return@mapNotNull null
            if (title.isEmpty()) {
                return@mapNotNull null
            }
            val year = null
            val imgsrc = innerA.select("img")?.attr("data-original") ?: return@mapNotNull null
            val image = fixUrlNull(imgsrc)
            //Log.i(this.name, "Result => (img movie) $title / $link")
            MovieSearchResponse(
                title,
                link,
                this.name,
                TvType.Movie,
                image,
                year
            )
        }.distinctBy { a -> a.url }
    }

    override suspend fun load(url: String): LoadResponse {
        val body = app.get(url).document
        // Declare vars
        val isDramaDetail = url.contains("/drama-detail/")
        var poster = ""
        var title = ""
        var descript: String? = null
        var year: Int? = null
        var tags: List<String>? = null
        if (isDramaDetail) {
            val main = body.select("div.details")
            val inner = main?.select("div.info")
            // Video details
            poster = fixUrlNull(main?.select("div.img > img")?.attr("src")) ?: ""
            //Log.i(this.name, "Result => (imgLinkCode) ${imgLinkCode}")
            title = inner?.select("h1")?.firstOrNull()?.text() ?: ""
            //Log.i(this.name, "Result => (year) ${title.substring(title.length - 5)}")
            descript = inner?.text()

            inner?.select("p")?.forEach { p ->
                val caption =
                    p?.selectFirst("span")?.text()?.trim()?.lowercase()?.removeSuffix(":")?.trim()
                        ?: return@forEach
                when (caption) {
                    "genre" -> {
                        tags = p.select("a")?.mapNotNull { it?.text()?.trim() }
                    }
                    "released" -> {
                        year = p.select("a")?.text()?.trim()?.toIntOrNull()
                    }
                }
            }
        } else {
            poster = body.select("meta[itemprop=\"image\"]")?.attr("content") ?: ""
            title = body.selectFirst("div.block.watch-drama")?.selectFirst("h1")
                ?.text() ?: ""
            year = null
            descript = body.select("meta[name=\"description\"]")?.attr("content")
        }
        //Fallback year from title
        if (year == null) {
            year = if (title.length > 5) {
                title.replace(")", "").replace("(", "").substring(title.length - 5)
                    .trim().trimEnd(')').toIntOrNull()
            } else {
                null
            }
        }

        // Episodes Links
        //Log.i(this.name, "Result => (all eps) ${body.select("ul.list-episode-item-2.all-episode > li")}")
        val episodeList = body.select("ul.list-episode-item-2.all-episode > li")?.mapNotNull { ep ->
            //Log.i(this.name, "Result => (epA) ${ep.select("a")}")
            val innerA = ep.select("a") ?: return@mapNotNull null
            //Log.i(this.name, "Result => (innerA) ${fixUrlNull(innerA.attr("href"))}")
            val epLink = fixUrlNull(innerA.attr("href")) ?: return@mapNotNull null

            val regex = "(?<=episode-).*?(?=.html)".toRegex()
            val count = regex.find(epLink, mainUrl.length)?.value?.toIntOrNull() ?: 0
            //Log.i(this.name, "Result => $epLink (regexYear) ${count}")
            Episode(
                name = null,
                season = null,
                episode = count,
                data = epLink,
                posterUrl = poster,
                date = null
            )
        } ?: listOf()
        //If there's only 1 episode, consider it a movie.
        if (episodeList.size == 1) {
            //Clean title
            title = title.trim().removeSuffix("Episode 1")
            val streamlink = getServerLinks(episodeList[0].data)
            //Log.i(this.name, "Result => (streamlink) $streamlink")
            return MovieLoadResponse(
                name = title,
                url = url,
                apiName = this.name,
                type = TvType.Movie,
                dataUrl = streamlink,
                posterUrl = poster,
                year = year,
                plot = descript,
                tags = tags
            )
        }
        return TvSeriesLoadResponse(
            name = title,
            url = url,
            apiName = this.name,
            type = TvType.AsianDrama,
            episodes = episodeList.reversed(),
            posterUrl = poster,
            year = year,
            plot = descript,
            tags = tags
        )
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        val links = if (data.startsWith(mainUrl)) {
            getServerLinks(data)
        } else {
            data
        }
        var count = 0
        mapper.readValue<List<String>>(links).apmap { item ->
            count++
            val url = fixUrl(item.trim())
            //Log.i(this.name, "Result => (url) $url")
            when {
                url.startsWith("https://asianembed.io") || url.startsWith("https://asianload.io") -> {
                    val iv = "9262859232435825"
                    val secretKey = "93422192433952489752342908585752"
                    extractVidstream(url, this.name, callback, iv, secretKey, secretKey,
                        isUsingAdaptiveKeys = false,
                        isUsingAdaptiveData = false
                    )
                    AsianEmbedHelper.getUrls(url, callback)
                }
                url.startsWith("https://embedsito.com") -> {
                    val extractor = XStreamCdn()
                    extractor.domainUrl = "embedsito.com"
                    extractor.getSafeUrl(url)?.apmap { link ->
                        callback.invoke(link)
                    }
                }
                else -> {
                    loadExtractor(url, mainUrl, callback)
                }
            }
        }
        return count > 0
    }

    private suspend fun getServerLinks(url: String): String {
        val moviedoc = app.get(url, referer = mainUrl).document
        return moviedoc.select("div.anime_muti_link > ul > li")
            ?.mapNotNull {
                fixUrlNull(it?.attr("data-video")) ?: return@mapNotNull null
            }?.toJson() ?: ""
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/mvvm/ArchComponentExt.kt
================================================
package com.lagradost.cloudstream3.mvvm

import android.util.Log
import androidx.lifecycle.LifecycleOwner
import androidx.lifecycle.LiveData
import com.bumptech.glide.load.HttpException
import com.lagradost.cloudstream3.ErrorLoadingException
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext
import java.net.SocketTimeoutException
import java.net.UnknownHostException
import javax.net.ssl.SSLHandshakeException

fun <T> LifecycleOwner.observe(liveData: LiveData<T>, action: (t: T) -> Unit) {
    liveData.observe(this) { it?.let { t -> action(t) } }
}

fun <T> LifecycleOwner.observeDirectly(liveData: LiveData<T>, action: (t: T) -> Unit) {
    liveData.observe(this) { it?.let { t -> action(t) } }
    val currentValue = liveData.value
    if (currentValue != null)
        action(currentValue)
}

sealed class Resource<out T> {
    data class Success<out T>(val value: T) : Resource<T>()
    data class Failure(
        val isNetworkError: Boolean,
        val errorCode: Int?,
        val errorResponse: Any?, //ResponseBody
        val errorString: String,
    ) : Resource<Nothing>()

    data class Loading(val url: String? = null) : Resource<Nothing>()
}

fun logError(throwable: Throwable) {
    Log.d("ApiError", "-------------------------------------------------------------------")
    Log.d("ApiError", "safeApiCall: " + throwable.localizedMessage)
    Log.d("ApiError", "safeApiCall: " + throwable.message)
    throwable.printStackTrace()
    Log.d("ApiError", "-------------------------------------------------------------------")
}

fun <T> normalSafeApiCall(apiCall: () -> T): T? {
    return try {
        apiCall.invoke()
    } catch (throwable: Throwable) {
        logError(throwable)
        return null
    }
}

suspend fun <T> suspendSafeApiCall(apiCall: suspend () -> T): T? {
    return try {
        apiCall.invoke()
    } catch (throwable: Throwable) {
        logError(throwable)
        return null
    }
}

fun <T> safeFail(throwable: Throwable): Resource<T> {
    val stackTraceMsg = (throwable.localizedMessage ?: "") + "\n\n" + throwable.stackTrace.joinToString(
        separator = "\n"
    ) {
        "${it.fileName} ${it.lineNumber}"
    }
    return Resource.Failure(false, null, null, stackTraceMsg)
}

suspend fun <T> safeApiCall(
    apiCall: suspend () -> T,
): Resource<T> {
    return withContext(Dispatchers.IO) {
        try {
            Resource.Success(apiCall.invoke())
        } catch (throwable: Throwable) {
            logError(throwable)
            when (throwable) {
                is NullPointerException -> {
                    for (line in throwable.stackTrace) {
                        if (line?.fileName?.endsWith("provider.kt", ignoreCase = true) == true) {
                            return@withContext Resource.Failure(
                                false,
                                null,
                                null,
                                "NullPointerException at ${line.fileName} ${line.lineNumber}\nSite might have updated or added Cloudflare/DDOS protection"
                            )
                        }
                    }
                    safeFail(throwable)
                }
                is SocketTimeoutException -> {
                    Resource.Failure(true, null, null, "Connection Timeout\nPlease try again later.")
                }
                is HttpException -> {
                    Resource.Failure(false, throwable.statusCode, null, throwable.message ?: "HttpException")
                }
                is UnknownHostException -> {
                    Resource.Failure(true, null, null, "Cannot connect to server, try again later.")
                }
                is ErrorLoadingException -> {
                    Resource.Failure(true, null, null, throwable.message ?: "Error loading, try again later.")
                }
                is NotImplementedError -> {
                    Resource.Failure(false, null, null, "This operation is not implemented.")
                }
                is SSLHandshakeException -> {
                    Resource.Failure(
                        true,
                        null,
                        null,
                        (throwable.message ?: "SSLHandshakeException") + "\nTry again later."
                    )
                }
                else -> safeFail(throwable)
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/network/DdosGuardKiller.kt
================================================
package com.lagradost.cloudstream3.network

import androidx.annotation.AnyThread
import com.lagradost.cloudstream3.USER_AGENT
import com.lagradost.cloudstream3.app
import com.lagradost.nicehttp.Requests.Companion.await
import com.lagradost.nicehttp.getCookies
import kotlinx.coroutines.runBlocking
import okhttp3.Headers
import okhttp3.Headers.Companion.toHeaders
import okhttp3.Interceptor
import okhttp3.Request
import okhttp3.Response

/**
 * @param alwaysBypass will pre-emptively fetch ddos guard cookies if true.
 * If false it will only try to get cookies when a request returns 403
 * */
// As seen in https://github.com/anime-dl/anime-downloader/blob/master/anime_downloader/sites/erairaws.py
@AnyThread
class DdosGuardKiller(private val alwaysBypass: Boolean) : Interceptor {
    val savedCookiesMap = mutableMapOf<String, Map<String, String>>()

    private var ddosBypassPath: String? = null

    override fun intercept(chain: Interceptor.Chain): Response = runBlocking {
        val request = chain.request()
        if (alwaysBypass) return@runBlocking bypassDdosGuard(request)

        val response = chain.proceed(request)
        return@runBlocking if (response.code == 403) {
            bypassDdosGuard(request)
        } else response
    }

    private suspend fun bypassDdosGuard(request: Request): Response {
        ddosBypassPath = ddosBypassPath ?: Regex("'(.*?)'").find(
            app.get(
                "https://check.ddos-guard.net/check.js"
            ).text
        )?.groupValues?.get(1)

        val cookies =
            savedCookiesMap[request.url.host]
            // If no cookies are found fetch and save em.
                ?: (request.url.scheme + "://" + request.url.host + (ddosBypassPath ?: "")).let {
                    app.get(it, cacheTime = 0).cookies.also { cookies ->
                        savedCookiesMap[request.url.host] = cookies
                    }
                }

        val headers = getHeaders(request.headers.toMap(), cookies + request.cookies)
        return app.baseClient.newCall(
            request.newBuilder()
                .headers(headers)
                .build()
        ).await()
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/network/DohProviders.kt
================================================
package com.lagradost.cloudstream3.network

import okhttp3.HttpUrl.Companion.toHttpUrl
import okhttp3.OkHttpClient
import okhttp3.dnsoverhttps.DnsOverHttps
import java.net.InetAddress

/**
 * Based on https://github.com/tachiyomiorg/tachiyomi/blob/master/app/src/main/java/eu/kanade/tachiyomi/network/DohProviders.kt
 */

fun OkHttpClient.Builder.addGenericDns(url: String, ips: List<String>) = dns(
    DnsOverHttps
        .Builder()
        .client(build())
        .url(url.toHttpUrl())
        .bootstrapDnsHosts(
            ips.map { InetAddress.getByName(it) }
        )
        .build()
)

fun OkHttpClient.Builder.addGoogleDns() = (
        addGenericDns(
            "https://dns.google/dns-query",
            listOf(
                "8.8.4.4",
                "8.8.8.8"
            )
        ))

fun OkHttpClient.Builder.addCloudFlareDns() = (
        addGenericDns(
            "https://cloudflare-dns.com/dns-query",
            // https://www.cloudflare.com/ips/
            listOf(
                "1.1.1.1",
                "1.0.0.1",
                "2606:4700:4700::1111",
                "2606:4700:4700::1001"
            )
        ))

// Commented out as it doesn't work
//fun OkHttpClient.Builder.addOpenDns() = (
//        addGenericDns(
//            "https://doh.opendns.com/dns-query",
//            // https://support.opendns.com/hc/en-us/articles/360038086532-Using-DNS-over-HTTPS-DoH-with-OpenDNS
//            listOf(
//                "208.67.222.222",
//                "208.67.220.220",
//                "2620:119:35::35",
//                "2620:119:53::53",
//            )
//        ))


fun OkHttpClient.Builder.addAdGuardDns() = (
        addGenericDns(
            "https://dns.adguard.com/dns-query",
            // https://github.com/AdguardTeam/AdGuardDNS
            listOf(
                // "Non-filtering"
                "94.140.14.140",
                "94.140.14.141",
            )
        ))


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/network/RequestsHelper.kt
================================================
package com.lagradost.cloudstream3.network

import android.content.Context
import androidx.preference.PreferenceManager
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.USER_AGENT
import com.lagradost.nicehttp.Requests
import com.lagradost.nicehttp.getCookies
import com.lagradost.nicehttp.ignoreAllSSLErrors
import okhttp3.Cache
import okhttp3.Headers
import okhttp3.Headers.Companion.toHeaders
import okhttp3.OkHttpClient
import okhttp3.Request
import java.io.File
import java.util.concurrent.TimeUnit


fun Requests.initClient(context: Context): OkHttpClient {
    val settingsManager = PreferenceManager.getDefaultSharedPreferences(context)
    val dns = settingsManager.getInt(context.getString(R.string.dns_pref), 0)
    baseClient = OkHttpClient.Builder()
        .followRedirects(true)
        .followSslRedirects(true)
        .ignoreAllSSLErrors()
        .cache(
            // Note that you need to add a ResponseInterceptor to make this 100% active.
            // The server response dictates if and when stuff should be cached.
            Cache(
                directory = File(context.cacheDir, "http_cache"),
                maxSize = 50L * 1024L * 1024L // 50 MiB
            )
        ).apply {
            when (dns) {
                1 -> addGoogleDns()
                2 -> addCloudFlareDns()
//                3 -> addOpenDns()
                4 -> addAdGuardDns()
            }
        }
        // Needs to be build as otherwise the other builders will change this object
        .build()
    return baseClient
}

val Request.cookies: Map<String, String>
    get() {
        return this.headers.getCookies("Cookie")
    }

private val DEFAULT_HEADERS = mapOf("user-agent" to USER_AGENT)

/**
 * Set headers > Set cookies > Default headers > Default Cookies
 * TODO REMOVE AND REPLACE WITH NICEHTTP
 */
fun getHeaders(
    headers: Map<String, String>,
    cookie: Map<String, String>
): Headers {
    val cookieMap =
        if (cookie.isNotEmpty()) mapOf(
            "Cookie" to cookie.entries.joinToString(" ") {
                "${it.key}=${it.value};"
            }) else mapOf()
    val tempHeaders = (DEFAULT_HEADERS + headers + cookieMap)
    return tempHeaders.toHeaders()
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/network/WebViewResolver.kt
================================================
package com.lagradost.cloudstream3.network

import android.annotation.SuppressLint
import android.net.http.SslError
import android.webkit.*
import com.lagradost.cloudstream3.AcraApplication
import com.lagradost.cloudstream3.USER_AGENT
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.Coroutines.main
import com.lagradost.nicehttp.requestCreator
import kotlinx.coroutines.delay
import kotlinx.coroutines.runBlocking
import okhttp3.Interceptor
import okhttp3.Request
import okhttp3.Response
import java.net.URI
import java.util.concurrent.TimeUnit

/**
 * When used as Interceptor additionalUrls cannot be returned, use WebViewResolver(...).resolveUsingWebView(...)
 * @param interceptUrl will stop the WebView when reaching this url.
 * @param additionalUrls this will make resolveUsingWebView also return all other requests matching the list of Regex.
 * */
class WebViewResolver(val interceptUrl: Regex, val additionalUrls: List<Regex> = emptyList()) :
    Interceptor {

    override fun intercept(chain: Interceptor.Chain): Response {
        val request = chain.request()
        return runBlocking {
            val fixedRequest = resolveUsingWebView(request).first
            return@runBlocking chain.proceed(fixedRequest ?: request)
        }
    }

    /**
     * @param requestCallBack asynchronously return matched requests by either interceptUrl or additionalUrls. If true, destroy WebView.
     * @return the final request (by interceptUrl) and all the collected urls (by additionalUrls).
     * */
    @SuppressLint("SetJavaScriptEnabled")
    suspend fun resolveUsingWebView(
        request: Request,
        requestCallBack: (Request) -> Boolean = { false }
    ): Pair<Request?, List<Request>> {
        val url = request.url.toString()
        val headers = request.headers
        println("Initial web-view request: $url")
        var webView: WebView? = null

        fun destroyWebView() {
            main {
                webView?.stopLoading()
                webView?.destroy()
                webView = null
                println("Destroyed webview")
            }
        }

        var fixedRequest: Request? = null
        val extraRequestList = mutableListOf<Request>()

        main {
            // Useful for debugging
//            WebView.setWebContentsDebuggingEnabled(true)
            try {
                webView = WebView(
                    AcraApplication.context
                        ?: throw RuntimeException("No base context in WebViewResolver")
                ).apply {
                    // Bare minimum to bypass captcha
                    settings.javaScriptEnabled = true
                    settings.domStorageEnabled = true
                    settings.userAgentString = USER_AGENT
                    // Blocks unnecessary images, remove if captcha fucks.
                    settings.blockNetworkImage = true
                }

                webView?.webViewClient = object : WebViewClient() {
                    override fun shouldInterceptRequest(
                        view: WebView,
                        request: WebResourceRequest
                    ): WebResourceResponse? = runBlocking {
                        val webViewUrl = request.url.toString()
//                    println("Loading WebView URL: $webViewUrl")

                        if (interceptUrl.containsMatchIn(webViewUrl)) {
                            fixedRequest = request.toRequest().also {
                                if (requestCallBack(it)) destroyWebView()
                            }
                            println("Web-view request finished: $webViewUrl")
                            destroyWebView()
                            return@runBlocking null
                        }

                        if (additionalUrls.any { it.containsMatchIn(webViewUrl) }) {
                            extraRequestList.add(request.toRequest().also {
                                if (requestCallBack(it)) destroyWebView()
                            })
                        }

                        // Suppress image requests as we don't display them anywhere
                        // Less data, low chance of causing issues.
                        // blockNetworkImage also does this job but i will keep it for the future.
                        val blacklistedFiles = listOf(
                            ".jpg",
                            ".png",
                            ".webp",
                            ".mpg",
                            ".mpeg",
                            ".jpeg",
                            ".webm",
                            ".mp4",
                            ".mp3",
                            ".gifv",
                            ".flv",
                            ".asf",
                            ".mov",
                            ".mng",
                            ".mkv",
                            ".ogg",
                            ".avi",
                            ".wav",
                            ".woff2",
                            ".woff",
                            ".ttf",
                            ".css",
                            ".vtt",
                            ".srt",
                            ".ts",
                            ".gif",
                            // Warning, this might fuck some future sites, but it's used to make Sflix work.
                            "wss://"
                        )

                        /** NOTE!  request.requestHeaders is not perfect!
                         *  They don't contain all the headers the browser actually gives.
                         *  Overriding with okhttp might fuck up otherwise working requests,
                         *  e.g the recaptcha request.
                         * **/

                        return@runBlocking try {
                            when {
                                blacklistedFiles.any { URI(webViewUrl).path.contains(it) } || webViewUrl.endsWith(
                                    "/favicon.ico"
                                ) -> WebResourceResponse(
                                    "image/png",
                                    null,
                                    null
                                )

                                webViewUrl.contains("recaptcha") -> super.shouldInterceptRequest(
                                    view,
                                    request
                                )

                                request.method == "GET" -> app.get(
                                    webViewUrl,
                                    headers = request.requestHeaders
                                ).okhttpResponse.toWebResourceResponse()

                                request.method == "POST" -> app.post(
                                    webViewUrl,
                                    headers = request.requestHeaders
                                ).okhttpResponse.toWebResourceResponse()
                                else -> return@runBlocking super.shouldInterceptRequest(
                                    view,
                                    request
                                )
                            }
                        } catch (e: Exception) {
                            null
                        }
                    }

                    override fun onReceivedSslError(
                        view: WebView?,
                        handler: SslErrorHandler?,
                        error: SslError?
                    ) {
                        handler?.proceed() // Ignore ssl issues
                    }
                }
                webView?.loadUrl(url, headers.toMap())
            } catch (e: Exception) {
                logError(e)
            }
        }

        var loop = 0
        // Timeouts after this amount, 60s
        val totalTime = 60000L

        val delayTime = 100L

        // A bit sloppy, but couldn't find a better way
        while (loop < totalTime / delayTime) {
            if (fixedRequest != null) return fixedRequest to extraRequestList
            delay(delayTime)
            loop += 1
        }

        println("Web-view timeout after ${totalTime / 1000}s")
        destroyWebView()
        return null to extraRequestList
    }

    fun WebResourceRequest.toRequest(): Request {
        val webViewUrl = this.url.toString()

        return requestCreator(
            this.method,
            webViewUrl,
            this.requestHeaders,
        )
    }

    fun Response.toWebResourceResponse(): WebResourceResponse {
        val contentTypeValue = this.header("Content-Type")
        // 1. contentType. 2. charset
        val typeRegex = Regex("""(.*);(?:.*charset=(.*)(?:|;)|)""")
        return if (contentTypeValue != null) {
            val found = typeRegex.find(contentTypeValue)
            val contentType = found?.groupValues?.getOrNull(1)?.ifBlank { null } ?: contentTypeValue
            val charset = found?.groupValues?.getOrNull(2)?.ifBlank { null }
            WebResourceResponse(contentType, charset, this.body?.byteStream())
        } else {
            WebResourceResponse("application/octet-stream", null, this.body?.byteStream())
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/receivers/VideoDownloadRestartReceiver.kt
================================================
package com.lagradost.cloudstream3.receivers

import android.content.BroadcastReceiver
import android.content.Context
import android.content.Intent
import android.util.Log

class VideoDownloadRestartReceiver : BroadcastReceiver() {
    override fun onReceive(context: Context?, intent: Intent?) {
        Log.i("Broadcast Listened", "Service tried to stop")

//        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
//            context?.startForegroundService(Intent(context, VideoDownloadKeepAliveService::class.java).putExtra(START_VALUE_KEY, RESTART_ALL_DOWNLOADS_AND_QUEUE))
//        } else {
//            context?.startService(Intent(context, VideoDownloadKeepAliveService::class.java).putExtra(START_VALUE_KEY, RESTART_ALL_DOWNLOADS_AND_QUEUE))
//        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/services/VideoDownloadService.kt
================================================
package com.lagradost.cloudstream3.services

import android.app.IntentService
import android.content.Intent
import com.lagradost.cloudstream3.utils.VideoDownloadManager

class VideoDownloadService : IntentService("VideoDownloadService") {
    override fun onHandleIntent(intent: Intent?) {
        if (intent != null) {
            val id = intent.getIntExtra("id", -1)
            val type = intent.getStringExtra("type")
            if (id != -1 && type != null) {
                val state = when (type) {
                    "resume" -> VideoDownloadManager.DownloadActionType.Resume
                    "pause" -> VideoDownloadManager.DownloadActionType.Pause
                    "stop" -> VideoDownloadManager.DownloadActionType.Stop
                    else -> return
                }
                VideoDownloadManager.downloadEvent.invoke(Pair(id, state))
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/syncproviders/AccountManager.kt
================================================
package com.lagradost.cloudstream3.syncproviders

import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.removeKeys
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey

abstract class AccountManager(private val defIndex: Int) : OAuth2API {
    var accountIndex = defIndex
    protected val accountId get() = "${idPrefix}_account_$accountIndex"
    private val accountActiveKey get() = "${idPrefix}_active"

    // int array of all accounts indexes
    private val accountsKey get() = "${idPrefix}_accounts"

    protected fun removeAccountKeys() {
        removeKeys(accountId)
        val accounts = getAccounts()?.toMutableList() ?: mutableListOf()
        accounts.remove(accountIndex)
        setKey(accountsKey, accounts.toIntArray())

        init()
    }

    fun getAccounts(): IntArray? {
        return getKey(accountsKey, intArrayOf())
    }

    fun init() {
        accountIndex = getKey(accountActiveKey, defIndex)!!
        val accounts = getAccounts()
        if (accounts?.isNotEmpty() == true && this.loginInfo() == null) {
            accountIndex = accounts.first()
        }
    }

    protected fun switchToNewAccount() {
        val accounts = getAccounts()
        accountIndex = (accounts?.maxOrNull() ?: 0) + 1
    }

    protected fun registerAccount() {
        setKey(accountActiveKey, accountIndex)
        val accounts = getAccounts()?.toMutableList() ?: mutableListOf()
        if (!accounts.contains(accountIndex)) {
            accounts.add(accountIndex)
        }

        setKey(accountsKey, accounts.toIntArray())
    }

    fun changeAccount(index: Int) {
        accountIndex = index
        setKey(accountActiveKey, index)
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/syncproviders/OAuth2API.kt
================================================
package com.lagradost.cloudstream3.syncproviders

import com.lagradost.cloudstream3.syncproviders.providers.AniListApi
import com.lagradost.cloudstream3.syncproviders.providers.MALApi
import java.util.concurrent.TimeUnit

interface OAuth2API {
    val key: String
    val name: String
    val redirectUrl: String

    // don't change this as all keys depend on it
    val idPrefix: String

    suspend fun handleRedirect(url: String) : Boolean
    fun authenticate()

    fun loginInfo(): LoginInfo?
    fun logOut()

    class LoginInfo(
        val profilePicture: String?,
        val name: String?,

        val accountIndex: Int,
    )

    companion object {
        val malApi = MALApi(0)
        val aniListApi = AniListApi(0)

        // used to login via app intent
        val OAuth2Apis
            get() = listOf<OAuth2API>(
                malApi, aniListApi
            )

        // this needs init with context and can be accessed in settings
        val OAuth2accountApis
            get() = listOf<AccountManager>(
                malApi, aniListApi
            )

        // used for active syncing
        val SyncApis
            get() = listOf(
                SyncRepo(malApi), SyncRepo(aniListApi)
            )

        const val appString = "cloudstreamapp"

        val unixTime: Long
            get() = System.currentTimeMillis() / 1000L

        const val maxStale = 60 * 10

        fun secondsToReadable(seconds: Int, completedValue: String): String {
            var secondsLong = seconds.toLong()
            val days = TimeUnit.SECONDS
                .toDays(secondsLong)
            secondsLong -= TimeUnit.DAYS.toSeconds(days)

            val hours = TimeUnit.SECONDS
                .toHours(secondsLong)
            secondsLong -= TimeUnit.HOURS.toSeconds(hours)

            val minutes = TimeUnit.SECONDS
                .toMinutes(secondsLong)
            secondsLong -= TimeUnit.MINUTES.toSeconds(minutes)
            if (minutes < 0) {
                return completedValue
            }
            //println("$days $hours $minutes")
            return "${if (days != 0L) "$days" + "d " else ""}${if (hours != 0L) "$hours" + "h " else ""}${minutes}m"
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/syncproviders/SyncAPI.kt
================================================
package com.lagradost.cloudstream3.syncproviders

import com.lagradost.cloudstream3.*

interface SyncAPI : OAuth2API {
    val icon: Int
    val mainUrl: String

    /**
    -1 -> None
    0 -> Watching
    1 -> Completed
    2 -> OnHold
    3 -> Dropped
    4 -> PlanToWatch
    5 -> ReWatching
     */
    suspend fun score(id: String, status: SyncStatus): Boolean

    suspend fun getStatus(id: String): SyncStatus?

    suspend fun getResult(id: String): SyncResult?

    suspend fun search(name: String): List<SyncSearchResult>?

    fun getIdFromUrl(url : String) : String

    data class SyncSearchResult(
        override val name: String,
        override val apiName: String,
        var syncId: String,
        override val url: String,
        override var posterUrl: String?,
        override var type: TvType? = null,
        override var quality: SearchQuality? = null,
        override var posterHeaders: Map<String, String>? = null,
        override var id: Int? = null,
    ) : SearchResponse

    data class SyncNextAiring(
        val episode: Int,
        val unixTime: Long,
    )

    data class SyncStatus(
        val status: Int,
        /** 1-10 */
        val score: Int?,
        val watchedEpisodes: Int?,
        var isFavorite: Boolean? = null,
        var maxEpisodes : Int? = null,
    )

    data class SyncResult(
        /**Used to verify*/
        var id: String,

        var totalEpisodes: Int? = null,

        var title: String? = null,
        /**1-1000*/
        var publicScore: Int? = null,
        /**In minutes*/
        var duration: Int? = null,
        var synopsis: String? = null,
        var airStatus: ShowStatus? = null,
        var nextAiring: SyncNextAiring? = null,
        var studio: List<String>? = null,
        var genres: List<String>? = null,
        var synonyms: List<String>? = null,
        var trailerUrl: String? = null,
        var isAdult : Boolean? = null,
        var posterUrl: String? = null,
        var backgroundPosterUrl : String? = null,

        /** In unixtime */
        var startDate: Long? = null,
        /** In unixtime */
        var endDate: Long? = null,
        var recommendations: List<SyncSearchResult>? = null,
        var nextSeason: SyncSearchResult? = null,
        var prevSeason: SyncSearchResult? = null,
        var actors: List<ActorData>? = null,
    )
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/syncproviders/SyncRepo.kt
================================================
package com.lagradost.cloudstream3.syncproviders

import com.lagradost.cloudstream3.ErrorLoadingException
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.normalSafeApiCall
import com.lagradost.cloudstream3.mvvm.safeApiCall

class SyncRepo(private val repo: SyncAPI) {
    val idPrefix = repo.idPrefix
    val name = repo.name
    val icon = repo.icon
    val mainUrl = repo.mainUrl

    suspend fun score(id: String, status: SyncAPI.SyncStatus): Resource<Boolean> {
        return safeApiCall { repo.score(id, status) }
    }

    suspend fun getStatus(id : String) : Resource<SyncAPI.SyncStatus>  {
        return safeApiCall { repo.getStatus(id) ?: throw ErrorLoadingException("No data") }
    }

    suspend fun getResult(id : String) : Resource<SyncAPI.SyncResult>  {
        return safeApiCall { repo.getResult(id) ?: throw ErrorLoadingException("No data") }
    }

    suspend fun search(query : String) : Resource<List<SyncAPI.SyncSearchResult>> {
        return safeApiCall { repo.search(query) ?: throw ErrorLoadingException() }
    }

    fun hasAccount() : Boolean {
        return normalSafeApiCall { repo.loginInfo() != null } ?: false
    }

    fun getIdFromUrl(url : String) : String = repo.getIdFromUrl(url)
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/syncproviders/providers/AniListApi.kt
================================================
package com.lagradost.cloudstream3.syncproviders.providers

import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.databind.DeserializationFeature
import com.fasterxml.jackson.databind.json.JsonMapper
import com.fasterxml.jackson.module.kotlin.KotlinModule
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.getKeys
import com.lagradost.cloudstream3.AcraApplication.Companion.openBrowser
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.syncproviders.AccountManager
import com.lagradost.cloudstream3.syncproviders.OAuth2API
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.appString
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.maxStale
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.unixTime
import com.lagradost.cloudstream3.syncproviders.SyncAPI
import com.lagradost.cloudstream3.utils.AppUtils.splitQuery
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.AppUtils.tryParseJson
import com.lagradost.cloudstream3.utils.Coroutines.ioSafe
import com.lagradost.cloudstream3.utils.DataStore.toKotlinObject
import java.net.URL
import java.util.*

class AniListApi(index: Int) : AccountManager(index), SyncAPI {
    override var name = "AniList"
    override val key = "6871"
    override val redirectUrl = "anilistlogin"
    override val idPrefix = "anilist"
    override var mainUrl = "https://anilist.co"
    override val icon = R.drawable.ic_anilist_icon

    override fun loginInfo(): OAuth2API.LoginInfo? {
        // context.getUser(true)?.
        getKey<AniListUser>(accountId, ANILIST_USER_KEY)?.let { user ->
            return OAuth2API.LoginInfo(
                profilePicture = user.picture,
                name = user.name,
                accountIndex = accountIndex
            )
        }
        return null
    }

    override fun logOut() {
        removeAccountKeys()
    }

    override fun authenticate() {
        val request = "https://anilist.co/api/v2/oauth/authorize?client_id=$key&response_type=token"
        openBrowser(request)
    }

    override suspend fun handleRedirect(url: String): Boolean {
        val sanitizer =
            splitQuery(URL(url.replace(appString, "https").replace("/#", "?"))) // FIX ERROR
        val token = sanitizer["access_token"]!!
        val expiresIn = sanitizer["expires_in"]!!

        val endTime = unixTime + expiresIn.toLong()

        switchToNewAccount()
        setKey(accountId, ANILIST_UNIXTIME_KEY, endTime)
        setKey(accountId, ANILIST_TOKEN_KEY, token)
        setKey(ANILIST_SHOULD_UPDATE_LIST, true)
        val user = getUser()
        return user != null
    }

    override fun getIdFromUrl(url: String): String {
        return url.removePrefix("$mainUrl/anime/").removeSuffix("/")
    }

    private fun getUrlFromId(id: Int): String {
        return "$mainUrl/anime/$id"
    }

    override suspend fun search(name: String): List<SyncAPI.SyncSearchResult>? {
        val data = searchShows(name) ?: return null
        return data.data?.Page?.media?.map {
            SyncAPI.SyncSearchResult(
                it.title.romaji ?: return null,
                this.name,
                it.id.toString(),
                getUrlFromId(it.id),
                it.bannerImage
            )
        }
    }

    override suspend fun getResult(id: String): SyncAPI.SyncResult? {
        val internalId = (Regex("anilist\\.co/anime/(\\d*)").find(id)?.groupValues?.getOrNull(1)
            ?: id).toIntOrNull() ?: return null
        val season = getSeason(internalId).data.Media

        return SyncAPI.SyncResult(
            season.id.toString(),
            nextAiring = season.nextAiringEpisode?.let {
                SyncAPI.SyncNextAiring(
                    it.episode ?: return@let null,
                    (it.timeUntilAiring ?: return@let null) + unixTime
                )
            },
            title = season.title?.userPreferred,
            synonyms = season.synonyms,
            isAdult = season.isAdult,
            totalEpisodes = season.episodes,
            synopsis = season.description,
            actors = season.characters?.edges?.mapNotNull { edge ->
                val node = edge.node ?: return@mapNotNull null
                ActorData(
                    actor = Actor(
                        name = node.name?.userPreferred ?: node.name?.full ?: node.name?.native
                        ?: return@mapNotNull null,
                        image = node.image?.large ?: node.image?.medium
                    ),
                    role = when (edge.role) {
                        "MAIN" -> ActorRole.Main
                        "SUPPORTING" -> ActorRole.Supporting
                        "BACKGROUND" -> ActorRole.Background
                        else -> null
                    },
                    voiceActor = edge.voiceActors?.firstNotNullOfOrNull { staff ->
                        Actor(
                            name = staff.name?.userPreferred ?: staff.name?.full
                            ?: staff.name?.native
                            ?: return@mapNotNull null,
                            image = staff.image?.large ?: staff.image?.medium
                        )
                    }
                )
            },
            publicScore = season.averageScore?.times(100),
            recommendations = season.recommendations?.edges?.mapNotNull { rec ->
                val recMedia = rec.node.mediaRecommendation
                SyncAPI.SyncSearchResult(
                    name = recMedia.title?.userPreferred ?: return@mapNotNull null,
                    this.name,
                    recMedia.id?.toString() ?: return@mapNotNull null,
                    getUrlFromId(recMedia.id),
                    recMedia.coverImage?.large ?: recMedia.coverImage?.medium
                )
            }
            //TODO REST
        )
    }

    override suspend fun getStatus(id: String): SyncAPI.SyncStatus? {
        val internalId = id.toIntOrNull() ?: return null
        val data = getDataAboutId(internalId) ?: return null

        return SyncAPI.SyncStatus(
            score = data.score,
            watchedEpisodes = data.progress,
            status = data.type?.value ?: return null,
            isFavorite = data.isFavourite,
            maxEpisodes = data.episodes,
        )
    }

    override suspend fun score(id: String, status: SyncAPI.SyncStatus): Boolean {
        return postDataAboutId(
            id.toIntOrNull() ?: return false,
            fromIntToAnimeStatus(status.status),
            status.score,
            status.watchedEpisodes
        )
    }

    companion object {
        private val mapper = JsonMapper.builder().addModule(KotlinModule())
            .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false).build()!!

        private val aniListStatusString =
            arrayOf("CURRENT", "COMPLETED", "PAUSED", "DROPPED", "PLANNING", "REPEATING")

        const val ANILIST_UNIXTIME_KEY: String = "anilist_unixtime" // When token expires
        const val ANILIST_TOKEN_KEY: String = "anilist_token" // anilist token for api
        const val ANILIST_USER_KEY: String = "anilist_user" // user data like profile
        const val ANILIST_CACHED_LIST: String = "anilist_cached_list"
        const val ANILIST_SHOULD_UPDATE_LIST: String = "anilist_should_update_list"

        private fun fixName(name: String): String {
            return name.lowercase(Locale.ROOT).replace(" ", "")
                .replace("[^a-zA-Z0-9]".toRegex(), "")
        }

        private suspend fun searchShows(name: String): GetSearchRoot? {
            try {
                val query = """
                query (${"$"}id: Int, ${"$"}page: Int, ${"$"}search: String, ${"$"}type: MediaType) {
                    Page (page: ${"$"}page, perPage: 10) {
                        media (id: ${"$"}id, search: ${"$"}search, type: ${"$"}type) {
                            id
                            idMal
                            seasonYear
                            startDate { year month day }
                            title {
                                romaji
                            }
                            averageScore
                            meanScore
                            nextAiringEpisode {
                                timeUntilAiring
                                episode
                            }
                            trailer { id site thumbnail }
                            bannerImage
                            recommendations {
                                nodes {
                                    id
                                    mediaRecommendation {
                                        id
                                        title {
                                            english
                                            romaji
                                        }
                                        idMal
                                        coverImage { medium large }
                                        averageScore
                                    }
                                }
                            }
                            relations {
                                edges {
                                    id
                                    relationType(version: 2)
                                    node {
                                        format
                                        id
                                        idMal
                                        coverImage { medium large }
                                        averageScore
                                        title {
                                            english
                                            romaji
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                """
                val data =
                    mapOf(
                        "query" to query,
                        "variables" to
                                mapOf(
                                    "search" to name,
                                    "page" to 1,
                                    "type" to "ANIME"
                                ).toJson()
                    )

                val res = app.post(
                    "https://graphql.anilist.co/",
                    //headers = mapOf(),
                    data = data,//(if (vars == null) mapOf("query" to q) else mapOf("query" to q, "variables" to vars))
                    timeout = 5000 // REASONABLE TIMEOUT
                ).text.replace("\\", "")
                return res.toKotlinObject()
            } catch (e: Exception) {
                logError(e)
            }
            return null
        }

        // Should use https://gist.github.com/purplepinapples/5dc60f15f2837bf1cea71b089cfeaa0a
        suspend fun getShowId(malId: String?, name: String, year: Int?): GetSearchMedia? {
            // Strips these from the name
            val blackList = listOf(
                "TV Dubbed",
                "(Dub)",
                "Subbed",
                "(TV)",
                "(Uncensored)",
                "(Censored)",
                "(\\d+)" // year
            )
            val blackListRegex =
                Regex(
                    """ (${
                        blackList.joinToString(separator = "|").replace("(", "\\(")
                            .replace(")", "\\)")
                    })"""
                )
            //println("NAME $name NEW NAME ${name.replace(blackListRegex, "")}")
            val shows = searchShows(name.replace(blackListRegex, ""))

            shows?.data?.Page?.media?.find {
                malId ?: "NONE" == it.idMal.toString()
            }?.let { return it }

            val filtered =
                shows?.data?.Page?.media?.filter {
                    (
                            it.startDate.year ?: year.toString() == year.toString()
                                    || year == null
                            )
                }
            filtered?.forEach {
                it.title.romaji?.let { romaji ->
                    if (fixName(romaji) == fixName(name)) return it
                }
            }

            return filtered?.firstOrNull()
        }

        // Changing names of these will show up in UI
        enum class AniListStatusType(var value: Int) {
            Watching(0),
            Completed(1),
            Paused(2),
            Dropped(3),
            Planning(4),
            ReWatching(5),
            None(-1)
        }

        fun fromIntToAnimeStatus(inp: Int): AniListStatusType {//= AniListStatusType.values().first { it.value == inp }
            return when (inp) {
                -1 -> AniListStatusType.None
                0 -> AniListStatusType.Watching
                1 -> AniListStatusType.Completed
                2 -> AniListStatusType.Paused
                3 -> AniListStatusType.Dropped
                4 -> AniListStatusType.Planning
                5 -> AniListStatusType.ReWatching
                else -> AniListStatusType.None
            }
        }

        fun convertAnilistStringToStatus(string: String): AniListStatusType {
            return fromIntToAnimeStatus(aniListStatusString.indexOf(string))
        }

        private suspend fun getSeason(id: Int): SeasonResponse {
            val q = """
               query (${'$'}id: Int = $id) {
                   Media (id: ${'$'}id, type: ANIME) {
                       id
                       idMal
                       coverImage {
                           extraLarge
                           large
                           medium
                           color
                       }
                       title {
                           romaji
                           english
                           native
                           userPreferred
                       }
                       duration
                       episodes
                       genres
                       synonyms
                       averageScore
                       isAdult
                       description(asHtml: false)
                       characters(sort: ROLE page: 1 perPage: 20) {
                           edges {
                               role
                               voiceActors {
                                   name {
                                       userPreferred
                                       full
                                       native
                                   }
                                   age
                                   image {
                                       large
                                       medium
                                   }
                               }
                               node {
                                   name {
                                       userPreferred
                                       full
                                       native
                                   }
                                   age
                                   image {
                                       large
                                       medium
                                   }
                               }
                           }
                       }
                       trailer {
                           id
                           site
                           thumbnail
                       }
                       relations {
                           edges {
                                id
                                relationType(version: 2)
                                node {
                                     id
                                     coverImage {
                                         extraLarge
                                         large
                                         medium
                                         color
                                     }
                                }
                           }
                       }
                       recommendations {
                           edges {
                               node {
                                   mediaRecommendation {
                                       id
                                       coverImage {
                                           extraLarge
                                           large
                                           medium
                                           color
                                       }
                                       title {
                                           romaji
                                           english
                                           native
                                           userPreferred
                                       }
                                   }
                               }
                           }
                       }
                       nextAiringEpisode {
                           timeUntilAiring
                           episode
                       }
                       format
                   }
               }
        """
            val data = app.post(
                "https://graphql.anilist.co",
                data = mapOf("query" to q),
                cacheTime = 0,
            ).text

            return tryParseJson(data) ?: throw ErrorLoadingException("Error parsing $data")
        }
    }

    fun initGetUser() {
        if (getAuth() == null) return
        ioSafe {
            getUser()
        }
    }

    private fun checkToken(): Boolean {
        return unixTime > getKey(
            accountId,
            ANILIST_UNIXTIME_KEY, 0L
        )!!
    }

    private suspend fun getDataAboutId(id: Int): AniListTitleHolder? {
        val q =
            """query (${'$'}id: Int = $id) { # Define which variables will be used in the query (id)
                Media (id: ${'$'}id, type: ANIME) { # Insert our variables into the query arguments (id) (type: ANIME is hard-coded in the query)
                    id
                    episodes
                    isFavourite
                    mediaListEntry {
                        progress
                        status
                        score (format: POINT_10)
                    }
                    title {
                        english
                        romaji
                    }
                }
            }"""

        val data = postApi(q, true)
        val d = mapper.readValue<GetDataRoot>(data ?: return null)

        val main = d.data?.Media
        if (main?.mediaListEntry != null) {
            return AniListTitleHolder(
                title = main.title,
                id = id,
                isFavourite = main.isFavourite,
                progress = main.mediaListEntry.progress,
                episodes = main.episodes,
                score = main.mediaListEntry.score,
                type = fromIntToAnimeStatus(aniListStatusString.indexOf(main.mediaListEntry.status)),
            )
        } else {
            return AniListTitleHolder(
                title = main?.title,
                id = id,
                isFavourite = main?.isFavourite,
                progress = 0,
                episodes = main?.episodes,
                score = 0,
                type = AniListStatusType.None,
            )
        }

    }

    private fun getAuth(): String? {
        return getKey(
            accountId,
            ANILIST_TOKEN_KEY
        )
    }

    private suspend fun postApi(q: String, cache: Boolean = false): String? {
        return if (!checkToken()) {
            app.post(
                "https://graphql.anilist.co/",
                headers = mapOf(
                    "Authorization" to "Bearer " + (getAuth() ?: return null),
                    if (cache) "Cache-Control" to "max-stale=$maxStale" else "Cache-Control" to "no-cache"
                ),
                cacheTime = 0,
                data = mapOf("query" to q),//(if (vars == null) mapOf("query" to q) else mapOf("query" to q, "variables" to vars))
                timeout = 5 // REASONABLE TIMEOUT
            ).text.replace("\\/", "/")
        } else {
            null
        }
    }

    data class MediaRecommendation(
        @JsonProperty("id") val id: Int,
        @JsonProperty("title") val title: Title?,
        @JsonProperty("idMal") val idMal: Int?,
        @JsonProperty("coverImage") val coverImage: CoverImage?,
        @JsonProperty("averageScore") val averageScore: Int?
    )

    data class FullAnilistList(
        @JsonProperty("data") val data: Data?
    )

    data class CompletedAt(
        @JsonProperty("year") val year: Int,
        @JsonProperty("month") val month: Int,
        @JsonProperty("day") val day: Int
    )

    data class StartedAt(
        @JsonProperty("year") val year: String?,
        @JsonProperty("month") val month: String?,
        @JsonProperty("day") val day: String?
    )

    data class Title(
        @JsonProperty("english") val english: String?,
        @JsonProperty("romaji") val romaji: String?
    )

    data class CoverImage(
        @JsonProperty("medium") val medium: String?,
        @JsonProperty("large") val large: String?
    )

    data class Media(
        @JsonProperty("id") val id: Int,
        @JsonProperty("idMal") val idMal: Int?,
        @JsonProperty("season") val season: String?,
        @JsonProperty("seasonYear") val seasonYear: Int,
        @JsonProperty("format") val format: String?,
        //@JsonProperty("source") val source: String,
        @JsonProperty("episodes") val episodes: Int,
        @JsonProperty("title") val title: Title,
        //@JsonProperty("description") val description: String,
        @JsonProperty("coverImage") val coverImage: CoverImage,
        @JsonProperty("synonyms") val synonyms: List<String>,
        @JsonProperty("nextAiringEpisode") val nextAiringEpisode: SeasonNextAiringEpisode?,
    )

    data class Entries(
        @JsonProperty("status") val status: String?,
        @JsonProperty("completedAt") val completedAt: CompletedAt,
        @JsonProperty("startedAt") val startedAt: StartedAt,
        @JsonProperty("updatedAt") val updatedAt: Int,
        @JsonProperty("progress") val progress: Int,
        @JsonProperty("score") val score: Int,
        @JsonProperty("private") val private: Boolean,
        @JsonProperty("media") val media: Media
    )

    data class Lists(
        @JsonProperty("status") val status: String?,
        @JsonProperty("entries") val entries: List<Entries>
    )

    data class MediaListCollection(
        @JsonProperty("lists") val lists: List<Lists>
    )

    data class Data(
        @JsonProperty("MediaListCollection") val MediaListCollection: MediaListCollection
    )

    fun getAnilistListCached(): Array<Lists>? {
        return getKey(ANILIST_CACHED_LIST) as? Array<Lists>
    }

    suspend fun getAnilistAnimeListSmart(): Array<Lists>? {
        if (getAuth() == null) return null

        if (checkToken()) return null
        return if (getKey(ANILIST_SHOULD_UPDATE_LIST, true) == true) {
            val list = getFullAnilistList()?.data?.MediaListCollection?.lists?.toTypedArray()
            if (list != null) {
                setKey(ANILIST_CACHED_LIST, list)
                setKey(ANILIST_SHOULD_UPDATE_LIST, false)
            }
            list
        } else {
            getAnilistListCached()
        }
    }

    private suspend fun getFullAnilistList(): FullAnilistList? {
        var userID: Int? = null
        /** WARNING ASSUMES ONE USER! **/
        getKeys(ANILIST_USER_KEY)?.forEach { key ->
            getKey<AniListUser>(key, null)?.let {
                userID = it.id
            }
        }

        val fixedUserID = userID ?: return null
        val mediaType = "ANIME"

        val query = """
                query (${'$'}userID: Int = $fixedUserID, ${'$'}MEDIA: MediaType = $mediaType) {
                    MediaListCollection (userId: ${'$'}userID, type: ${'$'}MEDIA) { 
                        lists {
                            status
                            entries
                            {
                                status
                                completedAt { year month day }
                                startedAt { year month day }
                                updatedAt
                                progress
                                score
                                private
                                media
                                {
                                    id
                                    idMal
                                    season
                                    seasonYear
                                    format
                                    episodes
                                    chapters
                                    title
                                    {
                                        english
                                        romaji
                                    }
                                    coverImage { medium }
                                    synonyms
                                    nextAiringEpisode {
                                        timeUntilAiring
                                        episode
                                    }
                                }
                            }
                        }
                    }
                    }
            """
        val text = postApi(query)
        return text?.toKotlinObject()
    }

    suspend fun toggleLike(id: Int): Boolean {
        val q = """mutation (${'$'}animeId: Int = $id) {
				ToggleFavourite (animeId: ${'$'}animeId) {
					anime {
						nodes {
							id
							title {
								romaji
							}
						}
					}
				}
			}"""
        val data = postApi(q)
        return data != ""
    }

    private suspend fun postDataAboutId(
        id: Int,
        type: AniListStatusType,
        score: Int?,
        progress: Int?
    ): Boolean {
        val q =
            """mutation (${'$'}id: Int = $id, ${'$'}status: MediaListStatus = ${
                aniListStatusString[maxOf(
                    0,
                    type.value
                )]
            }, ${if (score != null) "${'$'}scoreRaw: Int = ${score * 10}" else ""} , ${if (progress != null) "${'$'}progress: Int = $progress" else ""}) {
                SaveMediaListEntry (mediaId: ${'$'}id, status: ${'$'}status, scoreRaw: ${'$'}scoreRaw, progress: ${'$'}progress) {
                    id
                    status
                    progress
                    score
                }
                }"""
        val data = postApi(q)
        return data != ""
    }

    private suspend fun getUser(setSettings: Boolean = true): AniListUser? {
        val q = """
				{
  					Viewer {
    					id
    					name
						avatar {
							large
						}
                        favourites {
                            anime {
                                nodes {
                                    id
                                }
                            }
                        }
  					}
				}"""
        val data = postApi(q)
        if (data.isNullOrBlank()) return null
        val userData = mapper.readValue<AniListRoot>(data)
        val u = userData.data?.Viewer
        val user = AniListUser(
            u?.id,
            u?.name,
            u?.avatar?.large,
        )
        if (setSettings) {
            setKey(accountId, ANILIST_USER_KEY, user)
            registerAccount()
        }
        /* // TODO FIX FAVS
        for(i in u.favourites.anime.nodes) {
            println("FFAV:" + i.id)
        }*/
        return user
    }

    suspend fun getAllSeasons(id: Int): List<SeasonResponse?> {
        val seasons = mutableListOf<SeasonResponse?>()
        suspend fun getSeasonRecursive(id: Int) {
            val season = getSeason(id)
            seasons.add(season)
            if (season.data.Media.format?.startsWith("TV") == true) {
                season.data.Media.relations?.edges?.forEach {
                    if (it.node?.format != null) {
                        if (it.relationType == "SEQUEL" && it.node.format.startsWith("TV")) {
                            getSeasonRecursive(it.node.id)
                            return@forEach
                        }
                    }
                }
            }
        }
        getSeasonRecursive(id)
        return seasons.toList()
    }

    data class SeasonResponse(
        @JsonProperty("data") val data: SeasonData,
    )

    data class SeasonData(
        @JsonProperty("Media") val Media: SeasonMedia,
    )

    data class SeasonMedia(
        @JsonProperty("id") val id: Int?,
        @JsonProperty("title") val title: MediaTitle?,
        @JsonProperty("idMal") val idMal: Int?,
        @JsonProperty("format") val format: String?,
        @JsonProperty("nextAiringEpisode") val nextAiringEpisode: SeasonNextAiringEpisode?,
        @JsonProperty("relations") val relations: SeasonEdges?,
        @JsonProperty("coverImage") val coverImage: MediaCoverImage?,
        @JsonProperty("duration") val duration: Int?,
        @JsonProperty("episodes") val episodes: Int?,
        @JsonProperty("genres") val genres: List<String>?,
        @JsonProperty("synonyms") val synonyms: List<String>?,
        @JsonProperty("averageScore") val averageScore: Int?,
        @JsonProperty("isAdult") val isAdult: Boolean?,
        @JsonProperty("trailer") val trailer: MediaTrailer?,
        @JsonProperty("description") val description: String?,
        @JsonProperty("characters") val characters: CharacterConnection?,
        @JsonProperty("recommendations") val recommendations: RecommendationConnection?,
    )

    data class RecommendationConnection(
        @JsonProperty("edges") val edges: List<RecommendationEdge> = emptyList(),
        @JsonProperty("nodes") val nodes: List<Recommendation> = emptyList(),
        //@JsonProperty("pageInfo") val pageInfo: PageInfo,
    )

    data class RecommendationEdge(
        //@JsonProperty("rating") val rating: Int,
        @JsonProperty("node") val node: Recommendation,
    )

    data class Recommendation(
        @JsonProperty("mediaRecommendation") val mediaRecommendation: SeasonMedia,
    )

    data class CharacterName(
        @JsonProperty("name") val first: String?,
        @JsonProperty("middle") val middle: String?,
        @JsonProperty("last") val last: String?,
        @JsonProperty("full") val full: String?,
        @JsonProperty("native") val native: String?,
        @JsonProperty("alternative") val alternative: List<String>?,
        @JsonProperty("alternativeSpoiler") val alternativeSpoiler: List<String>?,
        @JsonProperty("userPreferred") val userPreferred: String?,
    )

    data class CharacterImage(
        @JsonProperty("large") val large: String?,
        @JsonProperty("medium") val medium: String?,
    )

    data class Character(
        @JsonProperty("name") val name: CharacterName?,
        @JsonProperty("age") val age: String?,
        @JsonProperty("image") val image: CharacterImage?,
    )

    data class CharacterEdge(
        @JsonProperty("id") val id: Int?,
        /**
        MAIN
        A primary character role in the media

        SUPPORTING
        A supporting character role in the media

        BACKGROUND
        A background character in the media
         */
        @JsonProperty("role") val role: String?,
        @JsonProperty("name") val name: String?,
        @JsonProperty("voiceActors") val voiceActors: List<Staff>?,
        @JsonProperty("favouriteOrder") val favouriteOrder: Int?,
        @JsonProperty("media") val media: List<SeasonMedia>?,
        @JsonProperty("node") val node: Character?,
    )

    data class StaffImage(
        @JsonProperty("large") val large: String?,
        @JsonProperty("medium") val medium: String?,
    )

    data class StaffName(
        @JsonProperty("name") val first: String?,
        @JsonProperty("middle") val middle: String?,
        @JsonProperty("last") val last: String?,
        @JsonProperty("full") val full: String?,
        @JsonProperty("native") val native: String?,
        @JsonProperty("alternative") val alternative: List<String>?,
        @JsonProperty("userPreferred") val userPreferred: String?,
    )

    data class Staff(
        @JsonProperty("image") val image: StaffImage?,
        @JsonProperty("name") val name: StaffName?,
        @JsonProperty("age") val age: Int?,
    )

    data class CharacterConnection(
        @JsonProperty("edges") val edges: List<CharacterEdge>?,
        @JsonProperty("nodes") val nodes: List<Character>?,
        //@JsonProperty("pageInfo")  pageInfo: PageInfo
    )

    data class MediaTrailer(
        @JsonProperty("id") val id: String?,
        @JsonProperty("site") val site: String?,
        @JsonProperty("thumbnail") val thumbnail: String?,
    )

    data class MediaCoverImage(
        @JsonProperty("extraLarge") val extraLarge: String?,
        @JsonProperty("large") val large: String?,
        @JsonProperty("medium") val medium: String?,
        @JsonProperty("color") val color: String?,
    )

    data class SeasonNextAiringEpisode(
        @JsonProperty("episode") val episode: Int?,
        @JsonProperty("timeUntilAiring") val timeUntilAiring: Int?,
    )

    data class SeasonEdges(
        @JsonProperty("edges") val edges: List<SeasonEdge>?,
    )

    data class SeasonEdge(
        @JsonProperty("id") val id: Int?,
        @JsonProperty("relationType") val relationType: String?,
        @JsonProperty("node") val node: SeasonNode?,
    )

    data class AniListFavoritesMediaConnection(
        @JsonProperty("nodes") val nodes: List<LikeNode>,
    )

    data class AniListFavourites(
        @JsonProperty("anime") val anime: AniListFavoritesMediaConnection,
    )

    data class MediaTitle(
        @JsonProperty("romaji") val romaji: String?,
        @JsonProperty("english") val english: String?,
        @JsonProperty("native") val native: String?,
        @JsonProperty("userPreferred") val userPreferred: String?,
    )

    data class SeasonNode(
        @JsonProperty("id") val id: Int,
        @JsonProperty("format") val format: String?,
        @JsonProperty("title") val title: Title?,
        @JsonProperty("idMal") val idMal: Int?,
        @JsonProperty("coverImage") val coverImage: CoverImage?,
        @JsonProperty("averageScore") val averageScore: Int?
//        @JsonProperty("nextAiringEpisode") val nextAiringEpisode: SeasonNextAiringEpisode?,
    )

    data class AniListAvatar(
        @JsonProperty("large") val large: String?,
    )

    data class AniListViewer(
        @JsonProperty("id") val id: Int?,
        @JsonProperty("name") val name: String?,
        @JsonProperty("avatar") val avatar: AniListAvatar?,
        @JsonProperty("favourites") val favourites: AniListFavourites?,
    )

    data class AniListData(
        @JsonProperty("Viewer") val Viewer: AniListViewer?,
    )

    data class AniListRoot(
        @JsonProperty("data") val data: AniListData?,
    )

    data class AniListUser(
        @JsonProperty("id") val id: Int?,
        @JsonProperty("name") val name: String?,
        @JsonProperty("picture") val picture: String?,
    )

    data class LikeNode(
        @JsonProperty("id") val id: Int?,
        //@JsonProperty("idMal") public int idMal;
    )

    data class LikePageInfo(
        @JsonProperty("total") val total: Int?,
        @JsonProperty("currentPage") val currentPage: Int?,
        @JsonProperty("lastPage") val lastPage: Int?,
        @JsonProperty("perPage") val perPage: Int?,
        @JsonProperty("hasNextPage") val hasNextPage: Boolean?,
    )

    data class LikeAnime(
        @JsonProperty("nodes") val nodes: List<LikeNode>?,
        @JsonProperty("pageInfo") val pageInfo: LikePageInfo?,
    )

    data class LikeFavourites(
        @JsonProperty("anime") val anime: LikeAnime?,
    )

    data class LikeViewer(
        @JsonProperty("favourites") val favourites: LikeFavourites?,
    )

    data class LikeData(
        @JsonProperty("Viewer") val Viewer: LikeViewer?,
    )

    data class LikeRoot(
        @JsonProperty("data") val data: LikeData?,
    )

    data class AniListTitleHolder(
        @JsonProperty("title") val title: Title?,
        @JsonProperty("isFavourite") val isFavourite: Boolean?,
        @JsonProperty("id") val id: Int?,
        @JsonProperty("progress") val progress: Int?,
        @JsonProperty("episodes") val episodes: Int?,
        @JsonProperty("score") val score: Int?,
        @JsonProperty("type") val type: AniListStatusType?,
    )

    data class GetDataMediaListEntry(
        @JsonProperty("progress") val progress: Int?,
        @JsonProperty("status") val status: String?,
        @JsonProperty("score") val score: Int?,
    )

    data class Nodes(
        @JsonProperty("id") val id: Int?,
        @JsonProperty("mediaRecommendation") val mediaRecommendation: MediaRecommendation?
    )

    data class GetDataMedia(
        @JsonProperty("isFavourite") val isFavourite: Boolean?,
        @JsonProperty("episodes") val episodes: Int?,
        @JsonProperty("title") val title: Title?,
        @JsonProperty("mediaListEntry") val mediaListEntry: GetDataMediaListEntry?
    )

    data class Recommendations(
        @JsonProperty("nodes") val nodes: List<Nodes>?
    )

    data class GetDataData(
        @JsonProperty("Media") val Media: GetDataMedia?,
    )

    data class GetDataRoot(
        @JsonProperty("data") val data: GetDataData?,
    )

    data class GetSearchTitle(
        @JsonProperty("romaji") val romaji: String?,
    )

    data class TrailerObject(
        @JsonProperty("id") val id: String?,
        @JsonProperty("thumbnail") val thumbnail: String?,
        @JsonProperty("site") val site: String?,
    )

    data class GetSearchMedia(
        @JsonProperty("id") val id: Int,
        @JsonProperty("idMal") val idMal: Int?,
        @JsonProperty("seasonYear") val seasonYear: Int,
        @JsonProperty("title") val title: GetSearchTitle,
        @JsonProperty("startDate") val startDate: StartedAt,
        @JsonProperty("averageScore") val averageScore: Int?,
        @JsonProperty("meanScore") val meanScore: Int?,
        @JsonProperty("bannerImage") val bannerImage: String?,
        @JsonProperty("trailer") val trailer: TrailerObject?,
        @JsonProperty("nextAiringEpisode") val nextAiringEpisode: SeasonNextAiringEpisode?,
        @JsonProperty("recommendations") val recommendations: Recommendations?,
        @JsonProperty("relations") val relations: SeasonEdges?
    )

    data class GetSearchPage(
        @JsonProperty("Page") val Page: GetSearchData?,
    )

    data class GetSearchData(
        @JsonProperty("media") val media: List<GetSearchMedia>?,
    )

    data class GetSearchRoot(
        @JsonProperty("data") val data: GetSearchPage?,
    )
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/syncproviders/providers/DropboxApi.kt
================================================
package com.lagradost.cloudstream3.syncproviders.providers

import com.lagradost.cloudstream3.syncproviders.OAuth2API

//TODO dropbox sync
class Dropbox : OAuth2API {
    override val idPrefix = "dropbox"
    override var name = "Dropbox"
    override val key = "zlqsamadlwydvb2"
    override val redirectUrl = "dropboxlogin"

    override fun authenticate() {
        TODO("Not yet implemented")
    }

    override suspend fun handleRedirect(url: String): Boolean {
        TODO("Not yet implemented")
    }

    override fun logOut() {
        TODO("Not yet implemented")
    }

    override fun loginInfo(): OAuth2API.LoginInfo? {
        TODO("Not yet implemented")
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/syncproviders/providers/MALApi.kt
================================================
package com.lagradost.cloudstream3.syncproviders.providers

import android.util.Base64
import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.databind.DeserializationFeature
import com.fasterxml.jackson.databind.json.JsonMapper
import com.fasterxml.jackson.module.kotlin.KotlinModule
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.openBrowser
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ShowStatus
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.syncproviders.AccountManager
import com.lagradost.cloudstream3.syncproviders.OAuth2API
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.appString
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.secondsToReadable
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.unixTime
import com.lagradost.cloudstream3.syncproviders.SyncAPI
import com.lagradost.cloudstream3.utils.AppUtils.splitQuery
import com.lagradost.cloudstream3.utils.DataStore.toKotlinObject
import java.net.URL
import java.security.SecureRandom
import java.text.ParseException
import java.text.SimpleDateFormat
import java.util.*

/** max 100 via https://myanimelist.net/apiconfig/references/api/v2#tag/anime */
const val MAL_MAX_SEARCH_LIMIT = 25

class MALApi(index: Int) : AccountManager(index), SyncAPI {
    override var name = "MAL"
    override val key = "1714d6f2f4f7cc19644384f8c4629910"
    override val redirectUrl = "mallogin"
    override val idPrefix = "mal"
    override var mainUrl = "https://myanimelist.net"
    override val icon = R.drawable.mal_logo

    override fun logOut() {
        removeAccountKeys()
    }

    override fun loginInfo(): OAuth2API.LoginInfo? {
        //getMalUser(true)?
        getKey<MalUser>(accountId, MAL_USER_KEY)?.let { user ->
            return OAuth2API.LoginInfo(
                profilePicture = user.picture,
                name = user.name,
                accountIndex = accountIndex
            )
        }
        return null
    }

    private fun getAuth(): String? {
        return getKey(
            accountId,
            MAL_TOKEN_KEY
        )
    }

    override suspend fun search(name: String): List<SyncAPI.SyncSearchResult> {
        val url = "https://api.myanimelist.net/v2/anime?q=$name&limit=$MAL_MAX_SEARCH_LIMIT"
        val auth = getAuth() ?: return emptyList()
        val res = app.get(
            url, headers = mapOf(
                "Authorization" to "Bearer $auth",
            ), cacheTime = 0
        ).text
        return mapper.readValue<MalSearch>(res).data.map {
            val node = it.node
            SyncAPI.SyncSearchResult(
                node.title,
                this.name,
                node.id.toString(),
                "$mainUrl/anime/${node.id}/",
                node.main_picture?.large ?: node.main_picture?.medium
            )
        }
    }

    override fun getIdFromUrl(url: String): String {
        return Regex("""/anime/((.*)/|(.*))""").find(url)!!.groupValues.first()
    }

    override suspend fun score(id: String, status: SyncAPI.SyncStatus): Boolean {
        return setScoreRequest(
            id.toIntOrNull() ?: return false,
            fromIntToAnimeStatus(status.status),
            status.score,
            status.watchedEpisodes
        )
    }

    data class MalAnime(
        @JsonProperty("id") val id: Int?,
        @JsonProperty("title") val title: String?,
        @JsonProperty("main_picture") val mainPicture: MainPicture?,
        @JsonProperty("alternative_titles") val alternativeTitles: AlternativeTitles?,
        @JsonProperty("start_date") val startDate: String?,
        @JsonProperty("end_date") val endDate: String?,
        @JsonProperty("synopsis") val synopsis: String?,
        @JsonProperty("mean") val mean: Double?,
        @JsonProperty("rank") val rank: Int?,
        @JsonProperty("popularity") val popularity: Int?,
        @JsonProperty("num_list_users") val numListUsers: Int?,
        @JsonProperty("num_scoring_users") val numScoringUsers: Int?,
        @JsonProperty("nsfw") val nsfw: String?,
        @JsonProperty("created_at") val createdAt: String?,
        @JsonProperty("updated_at") val updatedAt: String?,
        @JsonProperty("media_type") val mediaType: String?,
        @JsonProperty("status") val status: String?,
        @JsonProperty("genres") val genres: ArrayList<Genres>?,
        @JsonProperty("my_list_status") val myListStatus: MyListStatus?,
        @JsonProperty("num_episodes") val numEpisodes: Int?,
        @JsonProperty("start_season") val startSeason: StartSeason?,
        @JsonProperty("broadcast") val broadcast: Broadcast?,
        @JsonProperty("source") val source: String?,
        @JsonProperty("average_episode_duration") val averageEpisodeDuration: Int?,
        @JsonProperty("rating") val rating: String?,
        @JsonProperty("pictures") val pictures: ArrayList<MainPicture>?,
        @JsonProperty("background") val background: String?,
        @JsonProperty("related_anime") val relatedAnime: ArrayList<RelatedAnime>?,
        @JsonProperty("related_manga") val relatedManga: ArrayList<String>?,
        @JsonProperty("recommendations") val recommendations: ArrayList<Recommendations>?,
        @JsonProperty("studios") val studios: ArrayList<Studios>?,
        @JsonProperty("statistics") val statistics: Statistics?,
    )

    data class Recommendations(
        @JsonProperty("node") val node: Node? = null,
        @JsonProperty("num_recommendations") val numRecommendations: Int? = null
    )

    data class Studios(
        @JsonProperty("id") val id: Int? = null,
        @JsonProperty("name") val name: String? = null
    )

    data class MyListStatus(
        @JsonProperty("status") val status: String? = null,
        @JsonProperty("score") val score: Int? = null,
        @JsonProperty("num_episodes_watched") val numEpisodesWatched: Int? = null,
        @JsonProperty("is_rewatching") val isRewatching: Boolean? = null,
        @JsonProperty("updated_at") val updatedAt: String? = null
    )

    data class RelatedAnime(
        @JsonProperty("node") val node: Node? = null,
        @JsonProperty("relation_type") val relationType: String? = null,
        @JsonProperty("relation_type_formatted") val relationTypeFormatted: String? = null
    )

    data class Status(
        @JsonProperty("watching") val watching: String? = null,
        @JsonProperty("completed") val completed: String? = null,
        @JsonProperty("on_hold") val onHold: String? = null,
        @JsonProperty("dropped") val dropped: String? = null,
        @JsonProperty("plan_to_watch") val planToWatch: String? = null
    )

    data class Statistics(
        @JsonProperty("status") val status: Status? = null,
        @JsonProperty("num_list_users") val numListUsers: Int? = null
    )

    private fun parseDate(string: String?): Long? {
        return try {
            SimpleDateFormat("yyyy-MM-dd")?.parse(string ?: return null)?.time
        } catch (e: Exception) {
            null
        }
    }

    private fun toSearchResult(node: Node?): SyncAPI.SyncSearchResult? {
        return SyncAPI.SyncSearchResult(
            name = node?.title ?: return null,
            apiName = this.name,
            syncId = node.id.toString(),
            url = "https://myanimelist.net/anime/${node.id}",
            posterUrl = node.main_picture?.large
        )
    }

    override suspend fun getResult(id: String): SyncAPI.SyncResult? {
        val internalId = id.toIntOrNull() ?: return null
        val url =
            "https://api.myanimelist.net/v2/anime/$internalId?fields=id,title,main_picture,alternative_titles,start_date,end_date,synopsis,mean,rank,popularity,num_list_users,num_scoring_users,nsfw,created_at,updated_at,media_type,status,genres,my_list_status,num_episodes,start_season,broadcast,source,average_episode_duration,rating,pictures,background,related_anime,related_manga,recommendations,studios,statistics"
        val res = app.get(
            url, headers = mapOf(
                "Authorization" to "Bearer " + (getAuth() ?: return null)
            )
        ).text
        return mapper.readValue<MalAnime>(res).let { malAnime ->
            SyncAPI.SyncResult(
                id = malAnime.id?.toString()!!,
                totalEpisodes = malAnime.numEpisodes,
                title = malAnime.title,
                publicScore = malAnime.mean?.toFloat()?.times(1000)?.toInt(),
                duration = malAnime.averageEpisodeDuration,
                synopsis = malAnime.synopsis,
                airStatus = when (malAnime.status) {
                    "finished_airing" -> ShowStatus.Completed
                    "airing" -> ShowStatus.Ongoing
                    else -> null
                },
                nextAiring = null,
                studio = malAnime.studios?.mapNotNull { it.name },
                genres = malAnime.genres?.map { it.name },
                trailerUrl = null,
                startDate = parseDate(malAnime.startDate),
                endDate = parseDate(malAnime.endDate),
                recommendations = malAnime.recommendations?.mapNotNull { rec ->
                    val node = rec.node ?: return@mapNotNull null
                    toSearchResult(node)
                },
                nextSeason = malAnime.relatedAnime?.firstOrNull {
                    return@firstOrNull it.relationType == "sequel"
                }?.let { toSearchResult(it.node) },
                prevSeason = malAnime.relatedAnime?.firstOrNull {
                    return@firstOrNull it.relationType == "prequel"
                }?.let { toSearchResult(it.node) },
                actors = null,
            )
        }
    }

    override suspend fun getStatus(id: String): SyncAPI.SyncStatus? {
        val internalId = id.toIntOrNull() ?: return null

        val data =
            getDataAboutMalId(internalId)?.my_list_status //?: throw ErrorLoadingException("No my_list_status")
        return SyncAPI.SyncStatus(
            score = data?.score,
            status = malStatusAsString.indexOf(data?.status),
            isFavorite = null,
            watchedEpisodes = data?.num_episodes_watched,
        )
    }

    companion object {
        private val malStatusAsString =
            arrayOf("watching", "completed", "on_hold", "dropped", "plan_to_watch")

        const val MAL_USER_KEY: String = "mal_user" // user data like profile
        const val MAL_CACHED_LIST: String = "mal_cached_list"
        const val MAL_SHOULD_UPDATE_LIST: String = "mal_should_update_list"
        const val MAL_UNIXTIME_KEY: String = "mal_unixtime" // When token expires
        const val MAL_REFRESH_TOKEN_KEY: String = "mal_refresh_token" // refresh token
        const val MAL_TOKEN_KEY: String = "mal_token" // anilist token for api
    }

    override suspend fun handleRedirect(url: String): Boolean {
        val sanitizer =
            splitQuery(URL(url.replace(appString, "https").replace("/#", "?"))) // FIX ERROR
        val state = sanitizer["state"]!!
        if (state == "RequestID$requestId") {
            val currentCode = sanitizer["code"]!!

            val res = app.post(
                "https://myanimelist.net/v1/oauth2/token",
                data = mapOf(
                    "client_id" to key,
                    "code" to currentCode,
                    "code_verifier" to codeVerifier,
                    "grant_type" to "authorization_code"
                )
            ).text

            if (res.isNotBlank()) {
                switchToNewAccount()
                storeToken(res)
                val user = getMalUser()
                setKey(MAL_SHOULD_UPDATE_LIST, true)
                return user != null
            }
        }
        return false
    }

    override fun authenticate() {
        // It is recommended to use a URL-safe string as code_verifier.
        // See section 4 of RFC 7636 for more details.

        val secureRandom = SecureRandom()
        val codeVerifierBytes = ByteArray(96) // base64 has 6bit per char; (8/6)*96 = 128
        secureRandom.nextBytes(codeVerifierBytes)
        codeVerifier =
            Base64.encodeToString(codeVerifierBytes, Base64.DEFAULT).trimEnd('=').replace("+", "-")
                .replace("/", "_").replace("\n", "")
        val codeChallenge = codeVerifier
        val request =
            "https://myanimelist.net/v1/oauth2/authorize?response_type=code&client_id=$key&code_challenge=$codeChallenge&state=RequestID$requestId"
        openBrowser(request)
    }

    private val mapper = JsonMapper.builder().addModule(KotlinModule())
        .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false).build()!!

    private var requestId = 0
    private var codeVerifier = ""

    private fun storeToken(response: String) {
        try {
            if (response != "") {
                val token = mapper.readValue<ResponseToken>(response)
                setKey(accountId, MAL_UNIXTIME_KEY, (token.expires_in + unixTime))
                setKey(accountId, MAL_REFRESH_TOKEN_KEY, token.refresh_token)
                setKey(accountId, MAL_TOKEN_KEY, token.access_token)
            }
        } catch (e: Exception) {
            e.printStackTrace()
        }
    }

    private suspend fun refreshToken() {
        try {
            val res = app.post(
                "https://myanimelist.net/v1/oauth2/token",
                data = mapOf(
                    "client_id" to key,
                    "grant_type" to "refresh_token",
                    "refresh_token" to getKey(
                        accountId,
                        MAL_REFRESH_TOKEN_KEY
                    )!!
                )
            ).text
            storeToken(res)
        } catch (e: Exception) {
            e.printStackTrace()
        }
    }

    private val allTitles = hashMapOf<Int, MalTitleHolder>()

    data class MalList(
        @JsonProperty("data") val data: List<Data>,
        @JsonProperty("paging") val paging: Paging
    )

    data class MainPicture(
        @JsonProperty("medium") val medium: String,
        @JsonProperty("large") val large: String
    )

    data class Node(
        @JsonProperty("id") val id: Int,
        @JsonProperty("title") val title: String,
        @JsonProperty("main_picture") val main_picture: MainPicture?,
        @JsonProperty("alternative_titles") val alternative_titles: AlternativeTitles?,
        @JsonProperty("media_type") val media_type: String?,
        @JsonProperty("num_episodes") val num_episodes: Int?,
        @JsonProperty("status") val status: String?,
        @JsonProperty("start_date") val start_date: String?,
        @JsonProperty("end_date") val end_date: String?,
        @JsonProperty("average_episode_duration") val average_episode_duration: Int?,
        @JsonProperty("synopsis") val synopsis: String?,
        @JsonProperty("mean") val mean: Double?,
        @JsonProperty("genres") val genres: List<Genres>?,
        @JsonProperty("rank") val rank: Int?,
        @JsonProperty("popularity") val popularity: Int?,
        @JsonProperty("num_list_users") val num_list_users: Int?,
        @JsonProperty("num_favorites") val num_favorites: Int?,
        @JsonProperty("num_scoring_users") val num_scoring_users: Int?,
        @JsonProperty("start_season") val start_season: StartSeason?,
        @JsonProperty("broadcast") val broadcast: Broadcast?,
        @JsonProperty("nsfw") val nsfw: String?,
        @JsonProperty("created_at") val created_at: String?,
        @JsonProperty("updated_at") val updated_at: String?
    )

    data class ListStatus(
        @JsonProperty("status") val status: String?,
        @JsonProperty("score") val score: Int,
        @JsonProperty("num_episodes_watched") val num_episodes_watched: Int,
        @JsonProperty("is_rewatching") val is_rewatching: Boolean,
        @JsonProperty("updated_at") val updated_at: String,
    )

    data class Data(
        @JsonProperty("node") val node: Node,
        @JsonProperty("list_status") val list_status: ListStatus?,
    )

    data class Paging(
        @JsonProperty("next") val next: String?
    )

    data class AlternativeTitles(
        @JsonProperty("synonyms") val synonyms: List<String>,
        @JsonProperty("en") val en: String,
        @JsonProperty("ja") val ja: String
    )

    data class Genres(
        @JsonProperty("id") val id: Int,
        @JsonProperty("name") val name: String
    )

    data class StartSeason(
        @JsonProperty("year") val year: Int,
        @JsonProperty("season") val season: String
    )

    data class Broadcast(
        @JsonProperty("day_of_the_week") val day_of_the_week: String?,
        @JsonProperty("start_time") val start_time: String?
    )

    private fun getMalAnimeListCached(): Array<Data>? {
        return getKey(MAL_CACHED_LIST) as? Array<Data>
    }

    suspend fun getMalAnimeListSmart(): Array<Data>? {
        if (getAuth() == null) return null
        return if (getKey(MAL_SHOULD_UPDATE_LIST, true) == true) {
            val list = getMalAnimeList()
            setKey(MAL_CACHED_LIST, list)
            setKey(MAL_SHOULD_UPDATE_LIST, false)
            list
        } else {
            getMalAnimeListCached()
        }
    }

    private suspend fun getMalAnimeList(): Array<Data> {
        checkMalToken()
        var offset = 0
        val fullList = mutableListOf<Data>()
        val offsetRegex = Regex("""offset=(\d+)""")
        while (true) {
            val data: MalList = getMalAnimeListSlice(offset) ?: break
            fullList.addAll(data.data)
            offset =
                data.paging.next?.let { offsetRegex.find(it)?.groupValues?.get(1)?.toInt() }
                    ?: break
        }
        return fullList.toTypedArray()
    }

    fun convertToStatus(string: String): MalStatusType {
        return fromIntToAnimeStatus(malStatusAsString.indexOf(string))
    }

    private suspend fun getMalAnimeListSlice(offset: Int = 0): MalList? {
        val user = "@me"
        val auth = getAuth() ?: return null
        // Very lackluster docs
        // https://myanimelist.net/apiconfig/references/api/v2#operation/users_user_id_animelist_get
        val url =
            "https://api.myanimelist.net/v2/users/$user/animelist?fields=list_status,num_episodes,media_type,status,start_date,end_date,synopsis,alternative_titles,mean,genres,rank,num_list_users,nsfw,average_episode_duration,num_favorites,popularity,num_scoring_users,start_season,favorites_info,broadcast,created_at,updated_at&nsfw=1&limit=100&offset=$offset"
        val res = app.get(
            url, headers = mapOf(
                "Authorization" to "Bearer $auth",
            ), cacheTime = 0
        ).text
        return res.toKotlinObject()
    }

    private suspend fun getDataAboutMalId(id: Int): SmallMalAnime? {
        // https://myanimelist.net/apiconfig/references/api/v2#operation/anime_anime_id_get
        val url =
            "https://api.myanimelist.net/v2/anime/$id?fields=id,title,num_episodes,my_list_status"
        val res = app.get(
            url, headers = mapOf(
                "Authorization" to "Bearer " + (getAuth() ?: return null)
            ), cacheTime = 0
        ).text

        return mapper.readValue<SmallMalAnime>(res)
    }

    suspend fun setAllMalData() {
        val user = "@me"
        var isDone = false
        var index = 0
        allTitles.clear()
        checkMalToken()
        while (!isDone) {
            val res = app.get(
                "https://api.myanimelist.net/v2/users/$user/animelist?fields=list_status&limit=1000&offset=${index * 1000}",
                headers = mapOf(
                    "Authorization" to "Bearer " + (getAuth() ?: return)
                ), cacheTime = 0
            ).text
            val values = mapper.readValue<MalRoot>(res)
            val titles =
                values.data.map { MalTitleHolder(it.list_status, it.node.id, it.node.title) }
            for (t in titles) {
                allTitles[t.id] = t
            }
            isDone = titles.size < 1000
            index++
        }
    }

    fun convertJapanTimeToTimeRemaining(date: String, endDate: String? = null): String? {
        // No time remaining if the show has already ended
        try {
            endDate?.let {
                if (SimpleDateFormat("yyyy-MM-dd").parse(it).time < System.currentTimeMillis()) return@convertJapanTimeToTimeRemaining null
            }
        } catch (e: ParseException) {
            logError(e)
        }

        // Unparseable date: "2021 7 4 other null"
        // Weekday: other, date: null
        if (date.contains("null") || date.contains("other")) {
            return null
        }

        val currentDate = Calendar.getInstance()
        val currentMonth = currentDate.get(Calendar.MONTH) + 1
        val currentWeek = currentDate.get(Calendar.WEEK_OF_MONTH)
        val currentYear = currentDate.get(Calendar.YEAR)

        val dateFormat = SimpleDateFormat("yyyy MM W EEEE HH:mm")
        dateFormat.timeZone = TimeZone.getTimeZone("Japan")
        val parsedDate =
            dateFormat.parse("$currentYear $currentMonth $currentWeek $date") ?: return null
        val timeDiff = (parsedDate.time - System.currentTimeMillis()) / 1000

        // if it has already aired this week add a week to the timer
        val updatedTimeDiff =
            if (timeDiff > -60 * 60 * 24 * 7 && timeDiff < 0) timeDiff + 60 * 60 * 24 * 7 else timeDiff
        return secondsToReadable(updatedTimeDiff.toInt(), "Now")

    }

    private suspend fun checkMalToken() {
        if (unixTime > getKey(
                accountId,
                MAL_UNIXTIME_KEY
            ) ?: 0L
        ) {
            refreshToken()
        }
    }

    private suspend fun getMalUser(setSettings: Boolean = true): MalUser? {
        checkMalToken()
        val res = app.get(
            "https://api.myanimelist.net/v2/users/@me",
            headers = mapOf(
                "Authorization" to "Bearer " + (getAuth() ?: return null)
            ), cacheTime = 0
        ).text

        val user = mapper.readValue<MalUser>(res)
        if (setSettings) {
            setKey(accountId, MAL_USER_KEY, user)
            registerAccount()
        }
        return user
    }

    enum class MalStatusType(var value: Int) {
        Watching(0),
        Completed(1),
        OnHold(2),
        Dropped(3),
        PlanToWatch(4),
        None(-1)
    }

    private fun fromIntToAnimeStatus(inp: Int): MalStatusType {//= AniListStatusType.values().first { it.value == inp }
        return when (inp) {
            -1 -> MalStatusType.None
            0 -> MalStatusType.Watching
            1 -> MalStatusType.Completed
            2 -> MalStatusType.OnHold
            3 -> MalStatusType.Dropped
            4 -> MalStatusType.PlanToWatch
            5 -> MalStatusType.Watching
            else -> MalStatusType.None
        }
    }

    private suspend fun setScoreRequest(
        id: Int,
        status: MalStatusType? = null,
        score: Int? = null,
        num_watched_episodes: Int? = null,
    ): Boolean {
        val res = setScoreRequest(
            id,
            if (status == null) null else malStatusAsString[maxOf(0, status.value)],
            score,
            num_watched_episodes
        )

        return if (res.isNullOrBlank()) {
            false
        } else {
            val malStatus = mapper.readValue<MalStatus>(res)
            if (allTitles.containsKey(id)) {
                val currentTitle = allTitles[id]!!
                allTitles[id] = MalTitleHolder(malStatus, id, currentTitle.name)
            } else {
                allTitles[id] = MalTitleHolder(malStatus, id, "")
            }
            true
        }
    }

    private suspend fun setScoreRequest(
        id: Int,
        status: String? = null,
        score: Int? = null,
        num_watched_episodes: Int? = null,
    ): String? {
        val data = mapOf(
            "status" to status,
            "score" to score?.toString(),
            "num_watched_episodes" to num_watched_episodes?.toString()
        ).filter { it.value != null } as Map<String, String>

        return app.put(
            "https://api.myanimelist.net/v2/anime/$id/my_list_status",
            headers = mapOf(
                "Authorization" to "Bearer " + (getAuth() ?: return null)
            ),
            data = data
        ).text
    }


    data class ResponseToken(
        @JsonProperty("token_type") val token_type: String,
        @JsonProperty("expires_in") val expires_in: Int,
        @JsonProperty("access_token") val access_token: String,
        @JsonProperty("refresh_token") val refresh_token: String,
    )

    data class MalRoot(
        @JsonProperty("data") val data: List<MalDatum>,
    )

    data class MalDatum(
        @JsonProperty("node") val node: MalNode,
        @JsonProperty("list_status") val list_status: MalStatus,
    )

    data class MalNode(
        @JsonProperty("id") val id: Int,
        @JsonProperty("title") val title: String,
        /*
        also, but not used
        main_picture ->
            public string medium;
			public string large;
         */
    )

    data class MalStatus(
        @JsonProperty("status") val status: String,
        @JsonProperty("score") val score: Int,
        @JsonProperty("num_episodes_watched") val num_episodes_watched: Int,
        @JsonProperty("is_rewatching") val is_rewatching: Boolean,
        @JsonProperty("updated_at") val updated_at: String,
    )

    data class MalUser(
        @JsonProperty("id") val id: Int,
        @JsonProperty("name") val name: String,
        @JsonProperty("location") val location: String,
        @JsonProperty("joined_at") val joined_at: String,
        @JsonProperty("picture") val picture: String?,
    )

    data class MalMainPicture(
        @JsonProperty("large") val large: String?,
        @JsonProperty("medium") val medium: String?,
    )

    // Used for getDataAboutId()
    data class SmallMalAnime(
        @JsonProperty("id") val id: Int,
        @JsonProperty("title") val title: String?,
        @JsonProperty("num_episodes") val num_episodes: Int,
        @JsonProperty("my_list_status") val my_list_status: MalStatus?,
        @JsonProperty("main_picture") val main_picture: MalMainPicture?,
    )

    data class MalSearchNode(
        @JsonProperty("node") val node: Node,
    )

    data class MalSearch(
        @JsonProperty("data") val data: List<MalSearchNode>,
        //paging
    )

    data class MalTitleHolder(
        val status: MalStatus,
        val id: Int,
        val name: String,
    )
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/torrentproviders/NyaaProvider.kt
================================================
package com.lagradost.cloudstream3.torrentproviders

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import org.jsoup.Jsoup

class NyaaProvider : MainAPI() {
    override var name = "Nyaa"
    override val hasChromecastSupport = false

    override var mainUrl = "https://nyaa.si"
    override val supportedTypes = setOf(TvType.Torrent)
    override val vpnStatus = VPNStatus.Torrent
    override val instantLinkLoading = true

    override suspend fun search(query: String): List<SearchResponse> {
        val url = "$mainUrl/?f=0&c=0_0&q=$query&s=seeders&o=desc"
        val response = app.get(url).text
        val document = Jsoup.parse(response)

        val returnValues = ArrayList<SearchResponse>()
        val elements = document.select("table > tbody > tr")
        for (element in elements) {
            val tds = element.select("> td")
            if (tds.size < 2) continue
            val type = tds[0].select("> a").attr("title")
            val titleHeader = tds[1].select("> a").last()
            val href = titleHeader!!.attr("href")
            val title = titleHeader.text()
            if (title.contains("[Batch]") || !type.contains("Anime")) continue
            returnValues.add(TorrentSearchResponse(title, fixUrl(href), this.name, TvType.Torrent, null))
        }

        return returnValues
    }

    override suspend fun load(url: String): LoadResponse {
        val response = app.get(url).text
        val document = Jsoup.parse(response)
        val title = document.selectFirst("h3.panel-title")!!.text()
        val description = document.selectFirst("div#torrent-description")!!.text()
        val downloadLinks = document.select("div.panel-footer > a")
        val magnet = downloadLinks[1].attr("href")
        val torrent = downloadLinks[0].attr("href")

        return TorrentLoadResponse(title, url, this.name, magnet, fixUrl(torrent), description)
    }

    override suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        if (isCasting) return false
        callback.invoke(ExtractorLink(this.name, this.name, data, "", Qualities.Unknown.value))
        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/APIRepository.kt
================================================
package com.lagradost.cloudstream3.ui

import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.utils.ExtractorLink

class APIRepository(val api: MainAPI) {
    companion object {
        var dubStatusActive = HashSet<DubStatus>()

        val noneApi = object : MainAPI() {
            override var name = "None"
            override val supportedTypes = emptySet<TvType>()
            override val lang = ""
        }
        val randomApi = object : MainAPI() {
            override var name = "Random"
            override val supportedTypes = emptySet<TvType>()
            override val lang = ""
        }

        fun isInvalidData(data: String): Boolean {
            return data.isEmpty() || data == "[]" || data == "about:blank"
        }
    }

    val hasMainPage = api.hasMainPage
    val name = api.name
    val mainUrl = api.mainUrl
    val hasQuickSearch = api.hasQuickSearch

    suspend fun load(url: String): Resource<LoadResponse> {
        if (isInvalidData(url)) throw ErrorLoadingException()

        return safeApiCall {
            api.load(api.fixUrl(url)) ?: throw ErrorLoadingException()
        }
    }

    suspend fun search(query: String): Resource<List<SearchResponse>> {
        if (query.isEmpty())
            return Resource.Success(emptyList())

        return safeApiCall {
            return@safeApiCall (api.search(query)
                ?: throw ErrorLoadingException())
//                .filter { typesActive.contains(it.type) }
                .toList()
        }
    }

    suspend fun quickSearch(query: String): Resource<List<SearchResponse>> {
        if (query.isEmpty())
            return Resource.Success(emptyList())

        return safeApiCall {
            api.quickSearch(query) ?: throw ErrorLoadingException()
        }
    }

    suspend fun getMainPage(): Resource<HomePageResponse?> {
        return safeApiCall {
            api.getMainPage() ?: throw ErrorLoadingException()
        }
    }

    suspend fun extractorVerifierJob(extractorData: String?) {
        safeApiCall {
            api.extractorVerifierJob(extractorData)
        }
    }

    suspend fun loadLinks(
        data: String,
        isCasting: Boolean,
        subtitleCallback: (SubtitleFile) -> Unit,
        callback: (ExtractorLink) -> Unit
    ): Boolean {
        if (isInvalidData(data)) return false // this makes providers cleaner
        return try {
            api.loadLinks(data, isCasting, subtitleCallback, callback)
        } catch (throwable: Throwable) {
            logError(throwable)
            return false
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/AutofitRecyclerView.kt
================================================
package com.lagradost.cloudstream3.ui

import android.content.Context
import android.util.AttributeSet
import android.view.View
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.RecyclerView
import kotlin.math.abs

class GrdLayoutManager(val context: Context, _spanCount: Int) : GridLayoutManager(context, _spanCount) {
    override fun onFocusSearchFailed(
        focused: View,
        focusDirection: Int,
        recycler: RecyclerView.Recycler,
        state: RecyclerView.State
    ): View? {
        return try {
            val fromPos = getPosition(focused)
            val nextPos = getNextViewPos(fromPos, focusDirection)
            findViewByPosition(nextPos)
        } catch (e: Exception) {
            null
        }
    }

    override fun onRequestChildFocus(
        parent: RecyclerView,
        state: RecyclerView.State,
        child: View,
        focused: View?
    ): Boolean {
        // android.widget.FrameLayout$LayoutParams cannot be cast to androidx.recyclerview.widget.RecyclerView$LayoutParams
        return try {
            val pos = maxOf(0, getPosition(focused!!) - 2)
            parent.scrollToPosition(pos)
            super.onRequestChildFocus(parent, state, child, focused)
        } catch (e: Exception){
            false
        }
    }

    // Allows moving right and left with focus https://gist.github.com/vganin/8930b41f55820ec49e4d
    override fun onInterceptFocusSearch(focused: View, direction: Int): View? {
        return try {
            val fromPos = getPosition(focused)
            val nextPos = getNextViewPos(fromPos, direction)
            findViewByPosition(nextPos)
        } catch (e: Exception) {
            null
        }
    }

    private fun getNextViewPos(fromPos: Int, direction: Int): Int {
        val offset = calcOffsetToNextView(direction)

        if (hitBorder(fromPos, offset)) {
            return fromPos
        }

        return fromPos + offset
    }

    private fun calcOffsetToNextView(direction: Int): Int {
        val spanCount = this.spanCount
        val orientation = this.orientation

        if (orientation == VERTICAL) {
            when (direction) {
                View.FOCUS_DOWN -> {
                    return spanCount
                }
                View.FOCUS_UP -> {
                    return -spanCount
                }
                View.FOCUS_RIGHT -> {
                    return 1
                }
                View.FOCUS_LEFT -> {
                    return -1
                }
            }
        } else if (orientation == HORIZONTAL) {
            when (direction) {
                View.FOCUS_DOWN -> {
                    return 1
                }
                View.FOCUS_UP -> {
                    return -1
                }
                View.FOCUS_RIGHT -> {
                    return spanCount
                }
                View.FOCUS_LEFT -> {
                    return -spanCount
                }
            }
        }
        return 0
    }

    private fun hitBorder(from: Int, offset: Int): Boolean {
        val spanCount = spanCount

        return if (abs(offset) == 1) {
            val spanIndex = from % spanCount
            val newSpanIndex = spanIndex + offset
            newSpanIndex < 0 || newSpanIndex >= spanCount
        } else {
            val newPos = from + offset
            newPos in spanCount..-1
        }
    }
}

// https://riptutorial.com/android/example/4810/gridlayoutmanager-with-dynamic-span-count
class AutofitRecyclerView @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null) :
    RecyclerView(context, attrs) {

    private val manager = GrdLayoutManager(context, 2) // THIS CONTROLS SPANS

    private var columnWidth = -1

    var spanCount = 0
        set(value) {
            field = value
            if (value > 0) {
                manager.spanCount = value
            }
        }

    val itemWidth: Int
        get() = measuredWidth / manager.spanCount

    init {
        if (attrs != null) {
            val attrsArray = intArrayOf(android.R.attr.columnWidth)
            val array = context.obtainStyledAttributes(attrs, attrsArray)
            columnWidth = array.getDimensionPixelSize(0, -1)
            array.recycle()
        }

        layoutManager = manager
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/ControllerActivity.kt
================================================
package com.lagradost.cloudstream3.ui

import android.os.Bundle
import android.util.Log
import android.view.Menu
import android.view.View.*
import android.widget.*
import androidx.appcompat.app.AlertDialog
import com.fasterxml.jackson.databind.DeserializationFeature
import com.fasterxml.jackson.databind.json.JsonMapper
import com.fasterxml.jackson.module.kotlin.KotlinModule
import com.google.android.gms.cast.MediaQueueItem
import com.google.android.gms.cast.MediaSeekOptions
import com.google.android.gms.cast.MediaStatus.REPEAT_MODE_REPEAT_OFF
import com.google.android.gms.cast.MediaTrack
import com.google.android.gms.cast.TextTrackStyle
import com.google.android.gms.cast.framework.CastButtonFactory
import com.google.android.gms.cast.framework.CastSession
import com.google.android.gms.cast.framework.media.RemoteMediaClient
import com.google.android.gms.cast.framework.media.uicontroller.UIController
import com.google.android.gms.cast.framework.media.widget.ExpandedControllerActivity
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.sortSubs
import com.lagradost.cloudstream3.sortUrls
import com.lagradost.cloudstream3.ui.player.RepoLinkGenerator
import com.lagradost.cloudstream3.ui.player.SubtitleData
import com.lagradost.cloudstream3.ui.result.ResultEpisode
import com.lagradost.cloudstream3.ui.subtitles.ChromecastSubtitlesFragment
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.CastHelper.awaitLinks
import com.lagradost.cloudstream3.utils.CastHelper.getMediaInfo
import com.lagradost.cloudstream3.utils.Coroutines.ioSafe
import com.lagradost.cloudstream3.utils.DataStore.toKotlinObject
import com.lagradost.cloudstream3.utils.DataStoreHelper
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.UIHelper.dismissSafe
import org.json.JSONObject

/*class SkipOpController(val view: ImageView) : UIController() {
    init {
        view.setImageResource(R.drawable.exo_controls_fastforward)
        view.setOnClickListener {
            remoteMediaClient?.let {
                val options = MediaSeekOptions.Builder()
                    .setPosition(it.approximateStreamPosition + 85000)
                it.seek(options.build())
            }
        }
    }
}*/

private fun RemoteMediaClient.getItemIndex(): Int? {
    return try {
        val index = this.mediaQueue.itemIds.indexOf(this.currentItem?.itemId ?: 0)
        if (index < 0) null else index
    } catch (e: Exception) {
        null
    }
}

class SkipNextEpisodeController(val view: ImageView) : UIController() {
    init {
        view.setImageResource(R.drawable.ic_baseline_skip_next_24)
        view.setOnClickListener {
            remoteMediaClient?.let {
                it.queueNext(JSONObject())
                view.visibility = GONE // TO PREVENT MULTI CLICK
            }
        }
    }

    override fun onMediaStatusUpdated() {
        super.onMediaStatusUpdated()
        view.visibility = GONE
        val currentIdIndex = remoteMediaClient?.getItemIndex() ?: return
        val itemCount = remoteMediaClient?.mediaQueue?.itemCount ?: return
        if (itemCount - currentIdIndex > 1 && remoteMediaClient?.isLoadingNextItem == false) {
            view.visibility = VISIBLE
        }
    }
}

data class MetadataHolder(
    val apiName: String,
    val isMovie: Boolean,
    val title: String?,
    val poster: String?,
    val currentEpisodeIndex: Int,
    val episodes: List<ResultEpisode>,
    val currentLinks: List<ExtractorLink>,
    val currentSubtitles: List<SubtitleData>
)

class SelectSourceController(val view: ImageView, val activity: ControllerActivity) :
    UIController() {
    private val mapper: JsonMapper = JsonMapper.builder().addModule(KotlinModule())
        .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false).build()

    init {
        view.setImageResource(R.drawable.ic_baseline_playlist_play_24)
        view.setOnClickListener {
            //  lateinit var dialog: AlertDialog
            val holder = getCurrentMetaData()

            if (holder != null) {
                val items = holder.currentLinks
                if (items.isNotEmpty() && remoteMediaClient?.currentItem != null) {
                    val subTracks =
                        remoteMediaClient?.mediaInfo?.mediaTracks?.filter { it.type == MediaTrack.TYPE_TEXT }
                            ?: ArrayList()

                    val bottomSheetDialogBuilder =
                        AlertDialog.Builder(view.context, R.style.AlertDialogCustomBlack)
                    bottomSheetDialogBuilder.setView(R.layout.sort_bottom_sheet)
                    val bottomSheetDialog = bottomSheetDialogBuilder.create()
                    bottomSheetDialog.show()
                    //  bottomSheetDialog.setContentView(R.layout.sort_bottom_sheet)
                    val providerList =
                        bottomSheetDialog.findViewById<ListView>(R.id.sort_providers)!!
                    val subtitleList =
                        bottomSheetDialog.findViewById<ListView>(R.id.sort_subtitles)!!
                    if (subTracks.isEmpty()) {
                        bottomSheetDialog.findViewById<LinearLayout>(R.id.sort_subtitles_holder)?.visibility =
                            GONE
                    } else {
                        val arrayAdapter =
                            ArrayAdapter<String>(view.context, R.layout.sort_bottom_single_choice)
                        arrayAdapter.add(view.context.getString(R.string.no_subtitles))
                        arrayAdapter.addAll(subTracks.mapNotNull { it.name })

                        subtitleList.choiceMode = AbsListView.CHOICE_MODE_SINGLE
                        subtitleList.adapter = arrayAdapter

                        val currentTracks = remoteMediaClient?.mediaStatus?.activeTrackIds

                        val subtitleIndex =
                            if (currentTracks == null) 0 else subTracks.map { it.id }
                                .indexOfFirst { currentTracks.contains(it) } + 1

                        subtitleList.setSelection(subtitleIndex)
                        subtitleList.setItemChecked(subtitleIndex, true)

                        subtitleList.setOnItemClickListener { _, _, which, _ ->
                            if (which == 0) {
                                remoteMediaClient?.setActiveMediaTracks(longArrayOf()) // NO SUBS
                            } else {
                                ChromecastSubtitlesFragment.getCurrentSavedStyle().apply {
                                    val font = TextTrackStyle()
                                    font.fontFamily = fontFamily ?: "Google Sans"
                                    fontGenericFamily?.let {
                                        font.fontGenericFamily = it
                                    }
                                    font.windowColor = windowColor
                                    font.backgroundColor = backgroundColor

                                    font.edgeColor = edgeColor
                                    font.edgeType = edgeType
                                    font.foregroundColor = foregroundColor
                                    font.fontScale = fontScale

                                    remoteMediaClient?.setTextTrackStyle(font)
                                }

                                remoteMediaClient?.setActiveMediaTracks(longArrayOf(subTracks[which - 1].id))
                                    ?.setResultCallback {
                                        if (!it.status.isSuccess) {
                                            Log.e(
                                                "CHROMECAST", "Failed with status code:" +
                                                        it.status.statusCode + " > " + it.status.statusMessage
                                            )
                                        }
                                    }
                            }
                            bottomSheetDialog.dismissSafe(activity)
                        }
                    }

                    //https://developers.google.com/cast/docs/reference/web_receiver/cast.framework.messages.MediaInformation
                    val contentUrl = (remoteMediaClient?.currentItem?.media?.contentUrl
                        ?: remoteMediaClient?.currentItem?.media?.contentId)

                    val sortingMethods = items.map { "${it.name} ${Qualities.getStringByInt(it.quality)}" }.toTypedArray()
                    val sotringIndex = items.indexOfFirst { it.url == contentUrl }

                    val arrayAdapter =
                        ArrayAdapter<String>(view.context, R.layout.sort_bottom_single_choice)
                    arrayAdapter.addAll(sortingMethods.toMutableList())

                    providerList.choiceMode = AbsListView.CHOICE_MODE_SINGLE
                    providerList.adapter = arrayAdapter
                    providerList.setSelection(sotringIndex)
                    providerList.setItemChecked(sotringIndex, true)

                    providerList.setOnItemClickListener { _, _, which, _ ->
                        val epData = holder.episodes[holder.currentEpisodeIndex]

                        fun loadMirror(index: Int) {
                            if (holder.currentLinks.size <= index) return

                            val mediaItem = getMediaInfo(
                                epData,
                                holder,
                                index,
                                remoteMediaClient?.mediaInfo?.customData,
                                holder.currentSubtitles,
                            )

                            val startAt = remoteMediaClient?.approximateStreamPosition ?: 0

                            //remoteMediaClient.load(mediaItem, true, startAt)
                            try { // THIS IS VERY IMPORTANT BECAUSE WE NEVER WANT TO AUTOLOAD THE NEXT EPISODE
                                val currentIdIndex = remoteMediaClient?.getItemIndex()

                                val nextId = remoteMediaClient?.mediaQueue?.itemIds?.get(
                                    currentIdIndex?.plus(1) ?: 0
                                )
                                if (currentIdIndex == null && nextId != null) {
                                    awaitLinks(
                                        remoteMediaClient?.queueInsertAndPlayItem(
                                            MediaQueueItem.Builder(mediaItem).build(),
                                            nextId,
                                            startAt,
                                            JSONObject()
                                        )
                                    ) {
                                        loadMirror(index + 1)
                                    }
                                } else {
                                    awaitLinks(remoteMediaClient?.load(mediaItem, true, startAt)) {
                                        loadMirror(index + 1)
                                    }
                                }
                            } catch (e: Exception) {
                                awaitLinks(remoteMediaClient?.load(mediaItem, true, startAt)) {
                                    loadMirror(index + 1)
                                }
                            }
                        }
                        loadMirror(which)

                        bottomSheetDialog.dismissSafe(activity)
                    }
                }
            }
        }
    }

    private fun getCurrentMetaData(): MetadataHolder? {
        return try {
            val data = remoteMediaClient?.mediaInfo?.customData?.toString()
            data?.toKotlinObject()
        } catch (e: Exception) {
            null
        }
    }

    var isLoadingMore = false

    override fun onMediaStatusUpdated() {
        super.onMediaStatusUpdated()
        val meta = getCurrentMetaData()

        view.visibility = if ((meta?.currentLinks?.size
                ?: 0) > 1
        ) VISIBLE else INVISIBLE
        try {
            if (meta != null && meta.episodes.size > meta.currentEpisodeIndex + 1) {
                val currentIdIndex = remoteMediaClient?.getItemIndex() ?: return
                val itemCount = remoteMediaClient?.mediaQueue?.itemCount
                val index = meta.currentEpisodeIndex + 1
                val epData = meta.episodes[index]

                try {
                    val currentDuration = remoteMediaClient?.streamDuration
                    val currentPosition = remoteMediaClient?.approximateStreamPosition
                    if (currentDuration != null && currentPosition != null)
                        DataStoreHelper.setViewPos(epData.id, currentPosition, currentDuration)
                } catch (e : Exception) {
                    logError(e)
                }

                if (itemCount != null && itemCount - currentIdIndex == 1 && !isLoadingMore) {
                    isLoadingMore = true
                    ioSafe {
                        val currentLinks = mutableSetOf<ExtractorLink>()
                        val currentSubs = mutableSetOf<SubtitleData>()

                        val generator = RepoLinkGenerator(listOf(epData))

                        val isSuccessful = safeApiCall {
                            generator.generateLinks(clearCache = false, isCasting = true,
                                callback = {
                                    it.first?.let { link ->
                                        currentLinks.add(link)
                                    }
                                }, subtitleCallback = {
                                    currentSubs.add(it)
                                })
                        }

                        val sortedLinks = sortUrls(currentLinks)
                        val sortedSubs = sortSubs(currentSubs)
                        if (isSuccessful == Resource.Success(true)) {
                            if (currentLinks.isNotEmpty()) {
                                val jsonCopy = meta.copy(
                                    currentLinks = sortedLinks,
                                    currentSubtitles = sortedSubs,
                                    currentEpisodeIndex = index
                                )

                                val done =
                                    JSONObject(jsonCopy.toJson())

                                val mediaInfo = getMediaInfo(
                                    epData,
                                    jsonCopy,
                                    0,
                                    done,
                                    sortedSubs
                                )

                                /*fun loadIndex(index: Int) {
                                    println("LOAD INDEX::::: $index")
                                    if (meta.currentLinks.size <= index) return
                                    val info = getMediaInfo(
                                        epData,
                                        meta,
                                        index,
                                        done)
                                    awaitLinks(remoteMediaClient?.load(info, true, 0)) {
                                        loadIndex(index + 1)
                                    }
                                }*/
                                activity.runOnUiThread {
                                    awaitLinks(
                                        remoteMediaClient?.queueAppendItem(
                                            MediaQueueItem.Builder(mediaInfo).build(),
                                            JSONObject()
                                        )
                                    ) {
                                        println("FAILED TO LOAD NEXT ITEM")
                                        //  loadIndex(1)
                                    }
                                    isLoadingMore = false
                                }
                            }

                        }
                    }
                }
            }
        } catch (e: Exception) {
            println(e)
        }
    }

    override fun onSessionConnected(castSession: CastSession?) {
        castSession?.let {
            super.onSessionConnected(it)
        }
        remoteMediaClient?.queueSetRepeatMode(REPEAT_MODE_REPEAT_OFF, JSONObject())
    }
}

class SkipTimeController(val view: ImageView, forwards: Boolean) : UIController() {
    init {
        //val settingsManager = PreferenceManager.getDefaultSharedPreferences()
        //val time = settingsManager?.getInt("chromecast_tap_time", 30) ?: 30
        val time = 30
        //view.setImageResource(if (forwards) R.drawable.netflix_skip_forward else R.drawable.netflix_skip_back)
        view.setImageResource(if (forwards) R.drawable.go_forward_30 else R.drawable.go_back_30)
        view.setOnClickListener {
            remoteMediaClient?.let {
                val options = MediaSeekOptions.Builder()
                    .setPosition(it.approximateStreamPosition + time * 1000 * if (forwards) 1 else -1)
                it.seek(options.build())
            }
        }
    }
}

class ControllerActivity : ExpandedControllerActivity() {
    override fun onCreateOptionsMenu(menu: Menu): Boolean {
        super.onCreateOptionsMenu(menu)
        menuInflater.inflate(R.menu.cast_expanded_controller_menu, menu)
        CastButtonFactory.setUpMediaRouteButton(this, menu, R.id.media_route_menu_item)
        return true
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        val sourcesButton: ImageView = getButtonImageViewAt(0)
        val skipBackButton: ImageView = getButtonImageViewAt(1)
        val skipForwardButton: ImageView = getButtonImageViewAt(2)
        val skipOpButton: ImageView = getButtonImageViewAt(3)
        uiMediaController.bindViewToUIController(
            sourcesButton,
            SelectSourceController(sourcesButton, this)
        )
        uiMediaController.bindViewToUIController(
            skipBackButton,
            SkipTimeController(skipBackButton, false)
        )
        uiMediaController.bindViewToUIController(
            skipForwardButton,
            SkipTimeController(skipForwardButton, true)
        )
        uiMediaController.bindViewToUIController(
            skipOpButton,
            SkipNextEpisodeController(skipOpButton)
        )
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/MiniControllerFragment.kt
================================================
package com.lagradost.cloudstream3.ui

import android.content.Context
import android.os.Bundle
import android.util.AttributeSet
import android.view.View
import android.widget.LinearLayout
import android.widget.ProgressBar
import android.widget.RelativeLayout
import com.google.android.gms.cast.framework.media.widget.MiniControllerFragment
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.utils.UIHelper.adjustAlpha
import com.lagradost.cloudstream3.utils.UIHelper.colorFromAttribute
import com.lagradost.cloudstream3.utils.UIHelper.toPx


class MyMiniControllerFragment : MiniControllerFragment() {
    var currentColor: Int = 0

    // I KNOW, KINDA SPAGHETTI SOLUTION, BUT IT WORKS
    override fun onInflate(context: Context, attributeSet: AttributeSet, bundle: Bundle?) {
        val obtainStyledAttributes = context.obtainStyledAttributes(attributeSet, R.styleable.CustomCast, 0, 0)
        if (obtainStyledAttributes.hasValue(R.styleable.CustomCast_customCastBackgroundColor)) {
            currentColor = obtainStyledAttributes.getColor(R.styleable.CustomCast_customCastBackgroundColor, 0)
        }
        obtainStyledAttributes.recycle()
        super.onInflate(context, attributeSet, bundle)
    }


    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        // SEE https://github.com/dandar3/android-google-play-services-cast-framework/blob/master/res/layout/cast_mini_controller.xml
        try {
            val progressBar: ProgressBar? = view.findViewById(R.id.progressBar)
            val containerAll: LinearLayout? = view.findViewById(R.id.container_all)
            val containerCurrent: RelativeLayout? = view.findViewById(R.id.container_current)

            context?.let { ctx ->
                progressBar?.setBackgroundColor(adjustAlpha(ctx.colorFromAttribute(R.attr.colorPrimary), 0.35f))
                val params = RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, 2.toPx)

                progressBar?.layoutParams = params

                if (currentColor != 0) {
                    containerCurrent?.setBackgroundColor(currentColor)
                }
            }
            val child = containerAll?.getChildAt(0)
            child?.alpha = 0f // REMOVE GRADIENT

        } catch (e: Exception) {
            // JUST IN CASE
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/WatchType.kt
================================================
package com.lagradost.cloudstream3.ui

import androidx.annotation.DrawableRes
import androidx.annotation.StringRes
import com.lagradost.cloudstream3.R

enum class WatchType(val internalId: Int, @StringRes val stringRes: Int, @DrawableRes val iconRes: Int) {
    // FIX ICONS
    WATCHING(0, R.string.type_watching, R.drawable.ic_baseline_remove_red_eye_24),
    COMPLETED(1, R.string.type_completed, R.drawable.ic_baseline_check_24),
    ONHOLD(2, R.string.type_on_hold, R.drawable.ic_baseline_pause_24),
    DROPPED(3, R.string.type_dropped, R.drawable.ic_baseline_close_24),
    PLANTOWATCH(4, R.string.type_plan_to_watch, R.drawable.ic_baseline_close_24),
    NONE(5, R.string.type_none, R.drawable.ic_baseline_remove_red_eye_24);

    companion object {
        fun fromInternalId(id: Int?) = values().find { value -> value.internalId == id } ?: NONE
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/download/DownloadButtonSetup.kt
================================================
package com.lagradost.cloudstream3.ui.download

import android.app.Activity
import android.content.DialogInterface
import android.widget.Toast
import androidx.appcompat.app.AlertDialog
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.CommonActivity.showToast
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.ui.player.DownloadFileGenerator
import com.lagradost.cloudstream3.ui.player.GeneratorPlayer
import com.lagradost.cloudstream3.utils.AppUtils.getNameFull
import com.lagradost.cloudstream3.utils.DOWNLOAD_HEADER_CACHE
import com.lagradost.cloudstream3.utils.ExtractorUri
import com.lagradost.cloudstream3.utils.UIHelper.navigate
import com.lagradost.cloudstream3.utils.VideoDownloadHelper
import com.lagradost.cloudstream3.utils.VideoDownloadManager

object DownloadButtonSetup {
    fun handleDownloadClick(activity: Activity?, headerName: String?, click: DownloadClickEvent) {
        val id = click.data.id
        if (click.data !is VideoDownloadHelper.DownloadEpisodeCached) return
        when (click.action) {
            DOWNLOAD_ACTION_DELETE_FILE -> {
                activity?.let { ctx ->
                    val builder: AlertDialog.Builder = AlertDialog.Builder(ctx)
                    val dialogClickListener =
                        DialogInterface.OnClickListener { _, which ->
                            when (which) {
                                DialogInterface.BUTTON_POSITIVE -> {
                                    VideoDownloadManager.deleteFileAndUpdateSettings(ctx, id)
                                }
                                DialogInterface.BUTTON_NEGATIVE -> {
                                }
                            }
                        }

                    try {
                        builder.setTitle(R.string.delete_file)
                            .setMessage(
                                ctx.getString(R.string.delete_message).format(
                                    ctx.getNameFull(
                                        click.data.name,
                                        click.data.episode,
                                        click.data.season
                                    )
                                )
                            )
                            .setPositiveButton(R.string.delete, dialogClickListener)
                            .setNegativeButton(R.string.cancel, dialogClickListener)
                            .show()
                    } catch (e: Exception) {
                        logError(e)
                        // ye you somehow fucked up formatting did you?
                    }
                }
            }
            DOWNLOAD_ACTION_PAUSE_DOWNLOAD -> {
                VideoDownloadManager.downloadEvent.invoke(
                    Pair(click.data.id, VideoDownloadManager.DownloadActionType.Pause)
                )
            }
            DOWNLOAD_ACTION_RESUME_DOWNLOAD -> {
                activity?.let { ctx ->
                    if (VideoDownloadManager.downloadStatus.containsKey(id) && VideoDownloadManager.downloadStatus[id] == VideoDownloadManager.DownloadType.IsPaused) {
                        VideoDownloadManager.downloadEvent.invoke(
                            Pair(click.data.id, VideoDownloadManager.DownloadActionType.Resume)
                        )
                    } else {
                        val pkg = VideoDownloadManager.getDownloadResumePackage(ctx, id)
                        if (pkg != null) {
                            VideoDownloadManager.downloadFromResumeUsingWorker(ctx, pkg)
                        } else {
                            VideoDownloadManager.downloadEvent.invoke(
                                Pair(click.data.id, VideoDownloadManager.DownloadActionType.Resume)
                            )
                        }
                    }
                }
            }
            DOWNLOAD_ACTION_LONG_CLICK -> {
                activity?.let { act ->
                    val length =
                        VideoDownloadManager.getDownloadFileInfoAndUpdateSettings(
                            act,
                            click.data.id
                        )?.fileLength
                            ?: 0
                    if (length > 0) {
                        showToast(act, R.string.delete, Toast.LENGTH_LONG)
                    } else {
                        showToast(act, R.string.download, Toast.LENGTH_LONG)
                    }
                }
            }
            DOWNLOAD_ACTION_PLAY_FILE -> {
                activity?.let { act ->
                    val info =
                        VideoDownloadManager.getDownloadFileInfoAndUpdateSettings(
                            act,
                            click.data.id
                        ) ?: return
                    val keyInfo = getKey<VideoDownloadManager.DownloadedFileInfo>(
                        VideoDownloadManager.KEY_DOWNLOAD_INFO,
                        click.data.id.toString()
                    ) ?: return
                    val parent = getKey<VideoDownloadHelper.DownloadHeaderCached>(
                        DOWNLOAD_HEADER_CACHE,
                        click.data.parentId.toString()
                    ) ?: return

                    act.navigate(
                        R.id.global_to_navigation_player, GeneratorPlayer.newInstance(
                            DownloadFileGenerator(
                                listOf(
                                    ExtractorUri(
                                        uri = info.path,

                                        id = click.data.id,
                                        parentId = click.data.parentId,
                                        name = act.getString(R.string.downloaded_file), //click.data.name ?: keyInfo.displayName
                                        season = click.data.season,
                                        episode = click.data.episode,
                                        headerName = parent.name,
                                        tvType = parent.type,

                                        basePath = keyInfo.basePath,
                                        displayName = keyInfo.displayName,
                                        relativePath = keyInfo.relativePath,
                                    )
                                )
                            )
                        )
                        //R.id.global_to_navigation_player, PlayerFragment.newInstance(
                        //    UriData(
                        //        info.path.toString(),
                        //        keyInfo.basePath,
                        //        keyInfo.relativePath,
                        //        keyInfo.displayName,
                        //        click.data.parentId,
                        //        click.data.id,
                        //        headerName ?: "null",
                        //        if (click.data.episode <= 0) null else click.data.episode,
                        //        click.data.season
                        //    ),
                        //    getViewPos(click.data.id)?.position ?: 0
                        //)
                    )
                }
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/download/DownloadButtonViewHolder.kt
================================================
package com.lagradost.cloudstream3.ui.download

interface DownloadButtonViewHolder {
    var downloadButton : EasyDownloadButton
    fun reattachDownloadButton()
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/download/DownloadChildAdapter.kt
================================================
package com.lagradost.cloudstream3.ui.download

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageView
import android.widget.TextView
import androidx.cardview.widget.CardView
import androidx.core.widget.ContentLoadingProgressBar
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.utils.AppUtils.getNameFull
import com.lagradost.cloudstream3.utils.DataStoreHelper.fixVisual
import com.lagradost.cloudstream3.utils.DataStoreHelper.getViewPos
import com.lagradost.cloudstream3.utils.VideoDownloadHelper
import kotlinx.android.synthetic.main.download_child_episode.view.*
import java.util.*

const val DOWNLOAD_ACTION_PLAY_FILE = 0
const val DOWNLOAD_ACTION_DELETE_FILE = 1
const val DOWNLOAD_ACTION_RESUME_DOWNLOAD = 2
const val DOWNLOAD_ACTION_PAUSE_DOWNLOAD = 3
const val DOWNLOAD_ACTION_DOWNLOAD = 4
const val DOWNLOAD_ACTION_LONG_CLICK = 5

data class VisualDownloadChildCached(
    val currentBytes: Long,
    val totalBytes: Long,
    val data: VideoDownloadHelper.DownloadEpisodeCached,
)

data class DownloadClickEvent(val action: Int, val data: EasyDownloadButton.IMinimumData)

class DownloadChildAdapter(
    var cardList: List<VisualDownloadChildCached>,
    private val clickCallback: (DownloadClickEvent) -> Unit,
) : RecyclerView.Adapter<RecyclerView.ViewHolder>() {

    private val mBoundViewHolders: HashSet<DownloadButtonViewHolder> = HashSet()
    private fun getAllBoundViewHolders(): Set<DownloadButtonViewHolder?>? {
        return Collections.unmodifiableSet(mBoundViewHolders)
    }

    fun killAdapter() {
        getAllBoundViewHolders()?.forEach { view ->
            view?.downloadButton?.dispose()
        }
    }

    override fun onViewDetachedFromWindow(holder: RecyclerView.ViewHolder) {
        if (holder is DownloadButtonViewHolder) {
            holder.downloadButton.dispose()
        }
    }

    override fun onViewRecycled(holder: RecyclerView.ViewHolder) {
        if (holder is DownloadButtonViewHolder) {
            holder.downloadButton.dispose()
            mBoundViewHolders.remove(holder)
        }
    }

    override fun onViewAttachedToWindow(holder: RecyclerView.ViewHolder) {
        if (holder is DownloadButtonViewHolder) {
            holder.reattachDownloadButton()
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
        return DownloadChildViewHolder(
            LayoutInflater.from(parent.context).inflate(R.layout.download_child_episode, parent, false),
            clickCallback
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is DownloadChildViewHolder -> {
                holder.bind(cardList[position])
                mBoundViewHolders.add(holder)
            }
        }
    }

    override fun getItemCount(): Int {
        return cardList.size
    }

    class DownloadChildViewHolder
    constructor(
        itemView: View,
        private val clickCallback: (DownloadClickEvent) -> Unit,
    ) : RecyclerView.ViewHolder(itemView), DownloadButtonViewHolder {
        override var downloadButton = EasyDownloadButton()

        private val title: TextView = itemView.download_child_episode_text
        private val extraInfo: TextView = itemView.download_child_episode_text_extra
        private val holder: CardView = itemView.download_child_episode_holder
        private val progressBar: ContentLoadingProgressBar = itemView.download_child_episode_progress
        private val progressBarDownload: ContentLoadingProgressBar = itemView.download_child_episode_progress_downloaded
        private val downloadImage: ImageView = itemView.download_child_episode_download

        private var localCard: VisualDownloadChildCached? = null

        fun bind(card: VisualDownloadChildCached) {
            localCard = card
            val d = card.data

            val posDur = getViewPos(d.id)
            if (posDur != null) {
                val visualPos = posDur.fixVisual()
                progressBar.max = (visualPos.duration / 1000).toInt()
                progressBar.progress = (visualPos.position / 1000).toInt()
                progressBar.visibility = View.VISIBLE
            } else {
                progressBar.visibility = View.GONE
            }

            title.text = title.context.getNameFull(d.name, d.episode, d.season)
            title.isSelected = true // is needed for text repeating

            downloadButton.setUpButton(
                card.currentBytes,
                card.totalBytes,
                progressBarDownload,
                downloadImage,
                extraInfo,
                card.data,
                clickCallback
            )

            holder.setOnClickListener {
                clickCallback.invoke(DownloadClickEvent(DOWNLOAD_ACTION_PLAY_FILE, d))
            }
        }

        override fun reattachDownloadButton() {
            downloadButton.dispose()
            val card = localCard
            if (card != null) {
                downloadButton.setUpButton(
                    card.currentBytes,
                    card.totalBytes,
                    progressBarDownload,
                    downloadImage,
                    extraInfo,
                    card.data,
                    clickCallback
                )
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/download/DownloadChildFragment.kt
================================================
package com.lagradost.cloudstream3.ui.download

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ui.download.DownloadButtonSetup.handleDownloadClick
import com.lagradost.cloudstream3.utils.Coroutines.main
import com.lagradost.cloudstream3.utils.DataStore.getKey
import com.lagradost.cloudstream3.utils.DataStore.getKeys
import com.lagradost.cloudstream3.utils.UIHelper.fixPaddingStatusbar
import com.lagradost.cloudstream3.utils.VideoDownloadHelper
import com.lagradost.cloudstream3.utils.VideoDownloadManager
import kotlinx.android.synthetic.main.fragment_child_downloads.*
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext

class DownloadChildFragment : Fragment() {
    companion object {
        fun newInstance(headerName: String, folder: String) : Bundle {
            return Bundle().apply {
                putString("folder", folder)
                putString("name", headerName)
            }
        }
    }

    override fun onDestroyView() {
        (download_child_list?.adapter as DownloadChildAdapter?)?.killAdapter()
        super.onDestroyView()
    }

    override fun onDestroy() {
        downloadDeleteEventListener?.let { VideoDownloadManager.downloadDeleteEvent -= it }
        super.onDestroy()
    }

    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
        return inflater.inflate(R.layout.fragment_child_downloads, container, false)
    }

    private fun updateList(folder: String) = main {
        context?.let { ctx ->
            val data = withContext(Dispatchers.IO) { ctx.getKeys(folder) }
            val eps = withContext(Dispatchers.IO) {
                data.mapNotNull { key ->
                    context?.getKey<VideoDownloadHelper.DownloadEpisodeCached>(key)
                }.mapNotNull {
                    val info = VideoDownloadManager.getDownloadFileInfoAndUpdateSettings(ctx, it.id)
                        ?: return@mapNotNull null
                    VisualDownloadChildCached(info.fileLength, info.totalBytes, it)
                }
            }.sortedBy { it.data.episode + (it.data.season?: 0)*100000 }
            if (eps.isEmpty()) {
                activity?.onBackPressed()
                return@main
            }

            (download_child_list?.adapter as DownloadChildAdapter? ?: return@main).cardList = eps
            download_child_list?.adapter?.notifyDataSetChanged()
        }
    }

    private var downloadDeleteEventListener: ((Int) -> Unit)? = null

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        val folder = arguments?.getString("folder")
        val name = arguments?.getString("name")
        if (folder == null) {
            activity?.onBackPressed() // TODO FIX
            return
        }
        context?.fixPaddingStatusbar(download_child_root)

        download_child_toolbar.title = name
        download_child_toolbar.setNavigationIcon(R.drawable.ic_baseline_arrow_back_24)
        download_child_toolbar.setNavigationOnClickListener {
            activity?.onBackPressed()
        }

        val adapter: RecyclerView.Adapter<RecyclerView.ViewHolder> =
            DownloadChildAdapter(
                ArrayList(),
            ) { click ->
                handleDownloadClick(activity, name, click)
            }

        downloadDeleteEventListener = { id: Int ->
            val list = (download_child_list?.adapter as DownloadChildAdapter?)?.cardList
            if (list != null) {
                if (list.any { it.data.id == id }) {
                    updateList(folder)
                }
            }
        }

        downloadDeleteEventListener?.let { VideoDownloadManager.downloadDeleteEvent += it }

        download_child_list.adapter = adapter
        download_child_list.layoutManager = GridLayoutManager(context, 1)

        updateList(folder)
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/download/DownloadFragment.kt
================================================
package com.lagradost.cloudstream3.ui.download

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.LinearLayout
import androidx.appcompat.app.AppCompatActivity
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.lifecycle.ViewModelProvider
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.isMovieType
import com.lagradost.cloudstream3.mvvm.observe
import com.lagradost.cloudstream3.ui.download.DownloadButtonSetup.handleDownloadClick
import com.lagradost.cloudstream3.utils.AppUtils.loadResult
import com.lagradost.cloudstream3.utils.Coroutines.main
import com.lagradost.cloudstream3.utils.DOWNLOAD_EPISODE_CACHE
import com.lagradost.cloudstream3.utils.DataStore
import com.lagradost.cloudstream3.utils.UIHelper.fixPaddingStatusbar
import com.lagradost.cloudstream3.utils.UIHelper.hideKeyboard
import com.lagradost.cloudstream3.utils.UIHelper.navigate
import com.lagradost.cloudstream3.utils.VideoDownloadHelper
import com.lagradost.cloudstream3.utils.VideoDownloadManager
import kotlinx.android.synthetic.main.fragment_downloads.*

const val DOWNLOAD_NAVIGATE_TO = "downloadpage"

class DownloadFragment : Fragment() {
    private lateinit var downloadsViewModel: DownloadViewModel

    private fun getBytesAsText(bytes: Long): String {
        return "%.1f".format(bytes / 1000000000f)
    }

    private fun View.setLayoutWidth(weight: Long) {
        val param = LinearLayout.LayoutParams(
            0,
            LinearLayout.LayoutParams.MATCH_PARENT,
            maxOf((weight / 1000000000f), 0.1f) // 100mb
        )
        this.layoutParams = param
    }

    private fun setList(list: List<VisualDownloadHeaderCached>) {
        main {
            (download_list?.adapter as DownloadHeaderAdapter?)?.cardList = list
            download_list?.adapter?.notifyDataSetChanged()
        }
    }

    override fun onDestroyView() {
        (download_list?.adapter as DownloadHeaderAdapter?)?.killAdapter()
        super.onDestroyView()
    }

    override fun onDestroy() {
        if (downloadDeleteEventListener != null) {
            VideoDownloadManager.downloadDeleteEvent -= downloadDeleteEventListener!!
            downloadDeleteEventListener = null
        }
        super.onDestroy()
    }

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        downloadsViewModel =
            ViewModelProvider(this).get(DownloadViewModel::class.java)
        observe(downloadsViewModel.noDownloadsText) {
            text_no_downloads.text = it
        }
        observe(downloadsViewModel.headerCards) {
            setList(it)
            download_loading.isVisible = false
        }
        observe(downloadsViewModel.availableBytes) {
            download_free_txt?.text =
                getString(R.string.storage_size_format).format(
                    getString(R.string.free_storage),
                    getBytesAsText(it)
                )
            download_free?.setLayoutWidth(it)
        }
        observe(downloadsViewModel.usedBytes) {
            download_used_txt?.text =
                getString(R.string.storage_size_format).format(
                    getString(R.string.used_storage),
                    getBytesAsText(it)
                )
            download_used?.setLayoutWidth(it)
        }
        observe(downloadsViewModel.downloadBytes) {
            download_app_txt?.text =
                getString(R.string.storage_size_format).format(
                    getString(R.string.app_storage),
                    getBytesAsText(it)
                )
            download_app?.setLayoutWidth(it)
            download_storage_appbar?.visibility = View.VISIBLE
        }
        return inflater.inflate(R.layout.fragment_downloads, container, false)
    }

    private var downloadDeleteEventListener: ((Int) -> Unit)? = null

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        hideKeyboard()

        val adapter: RecyclerView.Adapter<RecyclerView.ViewHolder> =
            DownloadHeaderAdapter(
                ArrayList(),
                { click ->
                    when (click.action) {
                        0 -> {
                            if (click.data.type.isMovieType()) {
                                //wont be called
                            } else {
                                val folder = DataStore.getFolderName(
                                    DOWNLOAD_EPISODE_CACHE,
                                    click.data.id.toString()
                                )
                                activity?.navigate(
                                    R.id.action_navigation_downloads_to_navigation_download_child,
                                    DownloadChildFragment.newInstance(click.data.name, folder)
                                )
                            }
                        }
                        1 -> {
                            (activity as AppCompatActivity?)?.loadResult(
                                click.data.url,
                                click.data.apiName
                            )
                        }
                    }

                },
                { downloadClickEvent ->
                    if (downloadClickEvent.data !is VideoDownloadHelper.DownloadEpisodeCached) return@DownloadHeaderAdapter
                    handleDownloadClick(activity, downloadClickEvent.data.name, downloadClickEvent)
                    if (downloadClickEvent.action == DOWNLOAD_ACTION_DELETE_FILE) {
                        context?.let { ctx ->
                            downloadsViewModel.updateList(ctx)
                        }
                    }
                }
            )

        downloadDeleteEventListener = { id ->
            val list = (download_list?.adapter as DownloadHeaderAdapter?)?.cardList
            if (list != null) {
                if (list.any { it.data.id == id }) {
                    context?.let { ctx ->
                        setList(ArrayList())
                        downloadsViewModel.updateList(ctx)
                    }
                }
            }
        }

        downloadDeleteEventListener?.let { VideoDownloadManager.downloadDeleteEvent += it }

        download_list.adapter = adapter
        download_list.layoutManager = GridLayoutManager(context, 1)
        downloadsViewModel.updateList(requireContext())

        context?.fixPaddingStatusbar(download_root)
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/download/DownloadHeaderAdapter.kt
================================================
package com.lagradost.cloudstream3.ui.download

import android.annotation.SuppressLint
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageView
import android.widget.TextView
import androidx.cardview.widget.CardView
import androidx.core.widget.ContentLoadingProgressBar
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.UIHelper.setImage
import com.lagradost.cloudstream3.utils.VideoDownloadHelper
import kotlinx.android.synthetic.main.download_header_episode.view.*
import java.util.*

data class VisualDownloadHeaderCached(
    val currentOngoingDownloads: Int,
    val totalDownloads: Int,
    val totalBytes: Long,
    val currentBytes: Long,
    val data: VideoDownloadHelper.DownloadHeaderCached,
    val child: VideoDownloadHelper.DownloadEpisodeCached?,
)

data class DownloadHeaderClickEvent(val action: Int, val data: VideoDownloadHelper.DownloadHeaderCached)

class DownloadHeaderAdapter(
    var cardList: List<VisualDownloadHeaderCached>,
    private val clickCallback: (DownloadHeaderClickEvent) -> Unit,
    private val movieClickCallback: (DownloadClickEvent) -> Unit,
) : RecyclerView.Adapter<RecyclerView.ViewHolder>() {

    private val mBoundViewHolders: HashSet<DownloadButtonViewHolder> = HashSet()
    private fun getAllBoundViewHolders(): Set<DownloadButtonViewHolder?>? {
        return Collections.unmodifiableSet(mBoundViewHolders)
    }

    fun killAdapter() {
        getAllBoundViewHolders()?.forEach { view ->
            view?.downloadButton?.dispose()
        }
    }

    override fun onViewDetachedFromWindow(holder: RecyclerView.ViewHolder) {
        if (holder is DownloadButtonViewHolder) {
            holder.downloadButton.dispose()
        }
    }

    override fun onViewRecycled(holder: RecyclerView.ViewHolder) {
        if (holder is DownloadButtonViewHolder) {
            holder.downloadButton.dispose()
            mBoundViewHolders.remove(holder)
        }
    }

    override fun onViewAttachedToWindow(holder: RecyclerView.ViewHolder) {
        if (holder is DownloadButtonViewHolder) {
            holder.reattachDownloadButton()
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
        return DownloadHeaderViewHolder(
            LayoutInflater.from(parent.context).inflate(R.layout.download_header_episode, parent, false),
            clickCallback,
            movieClickCallback
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is DownloadHeaderViewHolder -> {
                holder.bind(cardList[position])
                mBoundViewHolders.add(holder)
            }
        }
    }

    override fun getItemCount(): Int {
        return cardList.size
    }

    class DownloadHeaderViewHolder
    constructor(
        itemView: View,
        private val clickCallback: (DownloadHeaderClickEvent) -> Unit,
        private val movieClickCallback: (DownloadClickEvent) -> Unit,
    ) : RecyclerView.ViewHolder(itemView), DownloadButtonViewHolder {
        override var downloadButton = EasyDownloadButton()

        private val poster: ImageView? = itemView.download_header_poster
        private val title: TextView = itemView.download_header_title
        private val extraInfo: TextView = itemView.download_header_info
        private val holder: CardView = itemView.episode_holder

        private val downloadBar: ContentLoadingProgressBar = itemView.download_header_progress_downloaded
        private val downloadImage: ImageView = itemView.download_header_episode_download
        private val normalImage: ImageView = itemView.download_header_goto_child
        private var localCard: VisualDownloadHeaderCached? = null

        @SuppressLint("SetTextI18n")
        fun bind(card: VisualDownloadHeaderCached) {
            localCard = card
            val d = card.data

            poster?.setImage(d.poster)
            poster?.setOnClickListener {
                clickCallback.invoke(DownloadHeaderClickEvent(1, d))
            }

            title.text = d.name
            val mbString = "%.1f".format(card.totalBytes / 1000000f)

            //val isMovie = d.type.isMovieType()
            if (card.child != null) {
                downloadBar.visibility = View.VISIBLE
                downloadImage.visibility = View.VISIBLE
                normalImage.visibility = View.GONE
                /*setUpButton(
                    card.currentBytes,
                    card.totalBytes,
                    downloadBar,
                    downloadImage,
                    extraInfo,
                    card.child,
                    movieClickCallback
                )*/

                holder.setOnClickListener {
                    movieClickCallback.invoke(DownloadClickEvent(DOWNLOAD_ACTION_PLAY_FILE, card.child))
                }
            } else {
                downloadBar.visibility = View.GONE
                downloadImage.visibility = View.GONE
                normalImage.visibility = View.VISIBLE

                try {
                    extraInfo.text =
                        extraInfo.context.getString(R.string.extra_info_format).format(
                            card.totalDownloads,
                            if (card.totalDownloads == 1) extraInfo.context.getString(R.string.episode) else extraInfo.context.getString(
                                R.string.episodes
                            ),
                            mbString
                        )
                } catch (e : Exception) {
                    // you probably formatted incorrectly
                    extraInfo.text = "Error"
                    logError(e)
                }


                holder.setOnClickListener {
                    clickCallback.invoke(DownloadHeaderClickEvent(0, d))
                }
            }
        }

        override fun reattachDownloadButton() {
            downloadButton.dispose()
            val card = localCard
            if (card?.child != null) {
                downloadButton.setUpButton(
                    card.currentBytes,
                    card.totalBytes,
                    downloadBar,
                    downloadImage,
                    extraInfo,
                    card.child,
                    movieClickCallback
                )
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/download/DownloadViewModel.kt
================================================
package com.lagradost.cloudstream3.ui.download

import android.content.Context
import android.os.Environment
import android.os.StatFs
import androidx.lifecycle.LiveData
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.lagradost.cloudstream3.isMovieType
import com.lagradost.cloudstream3.utils.DOWNLOAD_EPISODE_CACHE
import com.lagradost.cloudstream3.utils.DOWNLOAD_HEADER_CACHE
import com.lagradost.cloudstream3.utils.DataStore.getFolderName
import com.lagradost.cloudstream3.utils.DataStore.getKey
import com.lagradost.cloudstream3.utils.DataStore.getKeys
import com.lagradost.cloudstream3.utils.VideoDownloadHelper
import com.lagradost.cloudstream3.utils.VideoDownloadManager
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext

class DownloadViewModel : ViewModel() {
    private val _noDownloadsText = MutableLiveData<String>().apply {
        value = ""
    }
    val noDownloadsText: LiveData<String> = _noDownloadsText

    private val _headerCards =
        MutableLiveData<List<VisualDownloadHeaderCached>>().apply { listOf<VisualDownloadHeaderCached>() }
    val headerCards: LiveData<List<VisualDownloadHeaderCached>> = _headerCards

    private val _usedBytes = MutableLiveData<Long>()
    private val _availableBytes = MutableLiveData<Long>()
    private val _downloadBytes = MutableLiveData<Long>()

    val usedBytes: LiveData<Long> = _usedBytes
    val availableBytes: LiveData<Long> = _availableBytes
    val downloadBytes: LiveData<Long> = _downloadBytes

    fun updateList(context: Context) = viewModelScope.launch {
        val children = withContext(Dispatchers.IO) {
            val headers = context.getKeys(DOWNLOAD_EPISODE_CACHE)
            headers.mapNotNull { context.getKey<VideoDownloadHelper.DownloadEpisodeCached>(it) }
                .distinctBy { it.id } // Remove duplicates
        }

        // parentId : bytes
        val totalBytesUsedByChild = HashMap<Int, Long>()
        // parentId : bytes
        val currentBytesUsedByChild = HashMap<Int, Long>()
        // parentId : downloadsCount
        val totalDownloads = HashMap<Int, Int>()


        // Gets all children downloads
        withContext(Dispatchers.IO) {
            for (c in children) {
                val childFile = VideoDownloadManager.getDownloadFileInfoAndUpdateSettings(context, c.id) ?: continue

                if (childFile.fileLength <= 1) continue
                val len = childFile.totalBytes
                val flen = childFile.fileLength

                totalBytesUsedByChild[c.parentId] = totalBytesUsedByChild[c.parentId]?.plus(len) ?: len
                currentBytesUsedByChild[c.parentId] = currentBytesUsedByChild[c.parentId]?.plus(flen) ?: flen
                totalDownloads[c.parentId] = totalDownloads[c.parentId]?.plus(1) ?: 1
            }
        }

        val cached = withContext(Dispatchers.IO) { // wont fetch useless keys
            totalDownloads.entries.filter { it.value > 0 }.mapNotNull {
                context.getKey<VideoDownloadHelper.DownloadHeaderCached>(
                    DOWNLOAD_HEADER_CACHE,
                    it.key.toString()
                )
            }
        }

        val visual = withContext(Dispatchers.IO) {
            cached.mapNotNull { // TODO FIX
                val downloads = totalDownloads[it.id] ?: 0
                val bytes = totalBytesUsedByChild[it.id] ?: 0
                val currentBytes = currentBytesUsedByChild[it.id] ?: 0
                if (bytes <= 0 || downloads <= 0) return@mapNotNull null
                val movieEpisode =
                    if (!it.type.isMovieType()) null
                    else context.getKey<VideoDownloadHelper.DownloadEpisodeCached>(
                        DOWNLOAD_EPISODE_CACHE,
                        getFolderName(it.id.toString(), it.id.toString())
                    )
                VisualDownloadHeaderCached(
                    0,
                    downloads,
                    bytes,
                    currentBytes,
                    it,
                    movieEpisode
                )
            }.sortedBy {
                (it.child?.episode ?: 0) + (it.child?.season?.times(10000) ?: 0)
            } // episode sorting by episode, lowest to highest
        }

        val stat = StatFs(Environment.getExternalStorageDirectory().path)

        val localBytesAvailable = stat.availableBytes//stat.blockSizeLong * stat.blockCountLong
        val localTotalBytes = stat.blockSizeLong * stat.blockCountLong
        val localDownloadedBytes = visual.sumOf { it.totalBytes }

        _usedBytes.postValue(localTotalBytes - localBytesAvailable - localDownloadedBytes)
        _availableBytes.postValue(localBytesAvailable)
        _downloadBytes.postValue(localDownloadedBytes)

        _headerCards.postValue(visual)
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/download/EasyDownloadButton.kt
================================================
package com.lagradost.cloudstream3.ui.download

import android.animation.ObjectAnimator
import android.view.View
import android.view.animation.DecelerateInterpolator
import android.widget.ImageView
import android.widget.TextView
import androidx.core.view.isGone
import androidx.core.view.isVisible
import androidx.core.widget.ContentLoadingProgressBar
import com.google.android.material.button.MaterialButton
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.utils.Coroutines
import com.lagradost.cloudstream3.utils.IDisposable
import com.lagradost.cloudstream3.utils.UIHelper.popupMenuNoIcons
import com.lagradost.cloudstream3.utils.VideoDownloadManager

class EasyDownloadButton : IDisposable {
    interface IMinimumData {
        val id: Int
    }

    override fun dispose() {
        try {
            downloadProgressEventListener?.let { VideoDownloadManager.downloadProgressEvent -= it }
            downloadStatusEventListener?.let { VideoDownloadManager.downloadStatusEvent -= it }
        } catch (e: Exception) {
            e.printStackTrace()
        }
    }

    private var downloadProgressEventListener: ((Triple<Int, Long, Long>) -> Unit)? = null
    private var downloadStatusEventListener: ((Pair<Int, VideoDownloadManager.DownloadType>) -> Unit)? =
        null

    fun setUpMaterialButton(
        setupCurrentBytes: Long?,
        setupTotalBytes: Long?,
        progressBar: ContentLoadingProgressBar,
        downloadButton: MaterialButton,
        textView: TextView?,
        data: IMinimumData,
        clickCallback: (DownloadClickEvent) -> Unit,
    ) {
        setUpDownloadButton(
            setupCurrentBytes,
            setupTotalBytes,
            progressBar,
            textView,
            data,
            downloadButton,
            {
                downloadButton.setIconResource(it.first)
                downloadButton.text = it.second
            },
            clickCallback
        )
    }

    fun setUpMoreButton(
        setupCurrentBytes: Long?,
        setupTotalBytes: Long?,
        progressBar: ContentLoadingProgressBar,
        downloadImage: ImageView,
        textView: TextView?,
        textViewProgress: TextView?,
        clickableView: View,
        isTextPercentage: Boolean,
        data: IMinimumData,
        clickCallback: (DownloadClickEvent) -> Unit,
    ) {
        setUpDownloadButton(
            setupCurrentBytes,
            setupTotalBytes,
            progressBar,
            textViewProgress,
            data,
            clickableView,
            { (image, text) ->
                downloadImage.isVisible = textViewProgress?.isGone ?: true
                downloadImage.setImageResource(image)
                textView?.text = text
            },
            clickCallback, isTextPercentage
        )
    }

    fun setUpButton(
        setupCurrentBytes: Long?,
        setupTotalBytes: Long?,
        progressBar: ContentLoadingProgressBar,
        downloadImage: ImageView,
        textView: TextView?,
        data: IMinimumData,
        clickCallback: (DownloadClickEvent) -> Unit,
    ) {
        setUpDownloadButton(
            setupCurrentBytes,
            setupTotalBytes,
            progressBar,
            textView,
            data,
            downloadImage,
            {
                downloadImage.setImageResource(it.first)
            },
            clickCallback
        )
    }

    private fun setUpDownloadButton(
        setupCurrentBytes: Long?,
        setupTotalBytes: Long?,
        progressBar: ContentLoadingProgressBar,
        textView: TextView?,
        data: IMinimumData,
        downloadView: View,
        downloadImageChangeCallback: (Pair<Int, String>) -> Unit,
        clickCallback: (DownloadClickEvent) -> Unit,
        isTextPercentage: Boolean = false
    ) {
        var lastState: VideoDownloadManager.DownloadType? = null
        var currentBytes = setupCurrentBytes ?: 0
        var totalBytes = setupTotalBytes ?: 0
        var needImageUpdate = true

        fun changeDownloadImage(state: VideoDownloadManager.DownloadType) {
            lastState = state
            if (currentBytes <= 0) needImageUpdate = true
            val img = if (currentBytes > 0) {
                when (state) {
                    VideoDownloadManager.DownloadType.IsPaused -> Pair(
                        R.drawable.ic_baseline_play_arrow_24,
                        R.string.download_paused
                    )
                    VideoDownloadManager.DownloadType.IsDownloading -> Pair(
                        R.drawable.netflix_pause,
                        R.string.downloading
                    )
                    else -> Pair(R.drawable.ic_baseline_delete_outline_24, R.string.downloaded)
                }
            } else {
                Pair(R.drawable.netflix_download, R.string.download)
            }
            downloadImageChangeCallback.invoke(
                Pair(
                    img.first,
                    downloadView.context.getString(img.second)
                )
            )
        }

        fun fixDownloadedBytes(setCurrentBytes: Long, setTotalBytes: Long, animate: Boolean) {
            currentBytes = setCurrentBytes
            totalBytes = setTotalBytes

            if (currentBytes == 0L) {
                changeDownloadImage(VideoDownloadManager.DownloadType.IsStopped)
                textView?.visibility = View.GONE
                progressBar.visibility = View.GONE
            } else {
                if (lastState == VideoDownloadManager.DownloadType.IsStopped) {
                    changeDownloadImage(VideoDownloadManager.getDownloadState(data.id))
                }
                textView?.visibility = View.VISIBLE
                progressBar.visibility = View.VISIBLE
                val currentMbString = "%.1f".format(setCurrentBytes / 1000000f)
                val totalMbString = "%.1f".format(setTotalBytes / 1000000f)

                textView?.text =
                    if (isTextPercentage) "%d%%".format(setCurrentBytes * 100L / setTotalBytes) else
                        textView?.context?.getString(R.string.download_size_format)
                            ?.format(currentMbString, totalMbString)

                progressBar.let { bar ->
                    bar.max = (setTotalBytes / 1000).toInt()

                    if (animate) {
                        val animation: ObjectAnimator = ObjectAnimator.ofInt(
                            bar,
                            "progress",
                            bar.progress,
                            (setCurrentBytes / 1000).toInt()
                        )
                        animation.duration = 500
                        animation.setAutoCancel(true)
                        animation.interpolator = DecelerateInterpolator()
                        animation.start()
                    } else {
                        bar.progress = (setCurrentBytes / 1000).toInt()
                    }
                }
            }
        }

        fixDownloadedBytes(currentBytes, totalBytes, false)
        changeDownloadImage(VideoDownloadManager.getDownloadState(data.id))

        downloadProgressEventListener = { downloadData: Triple<Int, Long, Long> ->
            if (data.id == downloadData.first) {
                if (downloadData.second != currentBytes || downloadData.third != totalBytes) { // TO PREVENT WASTING UI TIME
                    Coroutines.runOnMainThread {
                        fixDownloadedBytes(downloadData.second, downloadData.third, true)
                        changeDownloadImage(VideoDownloadManager.getDownloadState(data.id))
                    }
                }
            }
        }

        downloadStatusEventListener =
            { downloadData: Pair<Int, VideoDownloadManager.DownloadType> ->
                if (data.id == downloadData.first) {
                    if (lastState != downloadData.second || needImageUpdate) { // TO PREVENT WASTING UI TIME
                        Coroutines.runOnMainThread {
                            changeDownloadImage(downloadData.second)
                        }
                    }
                }
            }

        downloadProgressEventListener?.let { VideoDownloadManager.downloadProgressEvent += it }
        downloadStatusEventListener?.let { VideoDownloadManager.downloadStatusEvent += it }

        downloadView.setOnClickListener {
            if (currentBytes <= 0) {
                clickCallback.invoke(DownloadClickEvent(DOWNLOAD_ACTION_DOWNLOAD, data))
            } else {
                val list = arrayListOf(
                    Pair(DOWNLOAD_ACTION_PLAY_FILE, R.string.popup_play_file),
                    Pair(DOWNLOAD_ACTION_DELETE_FILE, R.string.popup_delete_file),
                )

                // DON'T RESUME A DOWNLOADED FILE lastState != VideoDownloadManager.DownloadType.IsDone &&
                if ((currentBytes * 100 / totalBytes) < 98) {
                    list.add(
                        if (lastState == VideoDownloadManager.DownloadType.IsDownloading)
                            Pair(DOWNLOAD_ACTION_PAUSE_DOWNLOAD, R.string.popup_pause_download)
                        else
                            Pair(DOWNLOAD_ACTION_RESUME_DOWNLOAD, R.string.popup_resume_download)
                    )
                }

                it.popupMenuNoIcons(
                    list
                ) {
                    clickCallback.invoke(DownloadClickEvent(itemId, data))
                }
            }
        }

        downloadView.setOnLongClickListener {
            clickCallback.invoke(DownloadClickEvent(DOWNLOAD_ACTION_LONG_CLICK, data))
            return@setOnLongClickListener true
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/home/HomeChildItemAdapter.kt
================================================
package com.lagradost.cloudstream3.ui.home

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.SearchResponse
import com.lagradost.cloudstream3.ui.search.SearchClickCallback
import com.lagradost.cloudstream3.ui.search.SearchResponseDiffCallback
import com.lagradost.cloudstream3.ui.search.SearchResultBuilder
import com.lagradost.cloudstream3.utils.UIHelper.IsBottomLayout
import kotlinx.android.synthetic.main.home_result_grid.view.*

class HomeChildItemAdapter(
    val cardList: MutableList<SearchResponse>,
    private val overrideLayout : Int? = null,
    private val nextFocusUp: Int? = null,
    private val nextFocusDown: Int? = null,
    private val clickCallback: (SearchClickCallback) -> Unit,
) :
    RecyclerView.Adapter<RecyclerView.ViewHolder>() {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
        val layout = overrideLayout ?: if(parent.context.IsBottomLayout()) R.layout.home_result_grid_expanded else R.layout.home_result_grid

        return CardViewHolder(
            LayoutInflater.from(parent.context).inflate(layout, parent, false),
            clickCallback,
            itemCount,
            nextFocusUp,
            nextFocusDown
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is CardViewHolder -> {
                holder.bind(cardList[position], position)
            }
        }
    }

    override fun getItemCount(): Int {
        return cardList.size
    }

    override fun getItemId(position: Int): Long {
        return (cardList[position].id ?: position).toLong()
    }

    fun updateList(newList: List<SearchResponse>) {
        val diffResult = DiffUtil.calculateDiff(
            SearchResponseDiffCallback(this.cardList, newList)
        )

        cardList.clear()
        cardList.addAll(newList)

        diffResult.dispatchUpdatesTo(this)
    }

    class CardViewHolder
    constructor(
        itemView: View,
        private val clickCallback: (SearchClickCallback) -> Unit,
        private val itemCount: Int,
        private val nextFocusUp: Int? = null,
        private val nextFocusDown: Int? = null,
    ) :
        RecyclerView.ViewHolder(itemView) {

        fun bind(card: SearchResponse, position: Int) {

            // TV focus fixing
            val nextFocusBehavior = when (position) {
                0 -> true
                itemCount - 1 -> false
                else -> null
            }

            SearchResultBuilder.bind(
                clickCallback,
                card,
                position,
                itemView,
                nextFocusBehavior,
                nextFocusUp,
                nextFocusDown
            )
            itemView.tag = position

            if (position == 0) { // to fix tv
                itemView.background_card?.nextFocusLeftId = R.id.nav_rail_view
            }
            //val ani = ScaleAnimation(0.9f, 1.0f, 0.9f, 1f)
            //ani.fillAfter = true
            //ani.duration = 200
            //itemView.startAnimation(ani)
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/home/HomeFragment.kt
================================================
package com.lagradost.cloudstream3.ui.home

import android.annotation.SuppressLint
import android.app.Activity
import android.content.Context
import android.content.Intent
import android.content.res.Configuration
import android.net.Uri
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.*
import androidx.appcompat.widget.SearchView
import androidx.core.view.isVisible
import androidx.core.widget.NestedScrollView
import androidx.fragment.app.Fragment
import androidx.fragment.app.activityViewModels
import androidx.preference.PreferenceManager
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.LinearSnapHelper
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.bottomsheet.BottomSheetDialog
import com.google.android.material.button.MaterialButton
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.apis
import com.lagradost.cloudstream3.APIHolder.filterProviderByPreferredMedia
import com.lagradost.cloudstream3.APIHolder.getApiFromNameNull
import com.lagradost.cloudstream3.APIHolder.getApiProviderLangSettings
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.observe
import com.lagradost.cloudstream3.syncproviders.OAuth2API
import com.lagradost.cloudstream3.ui.APIRepository.Companion.noneApi
import com.lagradost.cloudstream3.ui.APIRepository.Companion.randomApi
import com.lagradost.cloudstream3.ui.AutofitRecyclerView
import com.lagradost.cloudstream3.ui.WatchType
import com.lagradost.cloudstream3.ui.quicksearch.QuickSearchFragment
import com.lagradost.cloudstream3.ui.result.START_ACTION_RESUME_LATEST
import com.lagradost.cloudstream3.ui.search.*
import com.lagradost.cloudstream3.ui.search.SearchFragment.Companion.filterSearchResponse
import com.lagradost.cloudstream3.ui.search.SearchHelper.handleSearchClickCallback
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTrueTvSettings
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTvSettings
import com.lagradost.cloudstream3.utils.AppUtils.loadSearchResult
import com.lagradost.cloudstream3.utils.DataStore.getKey
import com.lagradost.cloudstream3.utils.DataStore.setKey
import com.lagradost.cloudstream3.utils.DataStoreHelper
import com.lagradost.cloudstream3.utils.DataStoreHelper.removeLastWatched
import com.lagradost.cloudstream3.utils.DataStoreHelper.setResultWatchState
import com.lagradost.cloudstream3.utils.Event
import com.lagradost.cloudstream3.utils.HOMEPAGE_API
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showOptionSelectStringRes
import com.lagradost.cloudstream3.utils.SubtitleHelper.getFlagFromIso
import com.lagradost.cloudstream3.utils.UIHelper.dismissSafe
import com.lagradost.cloudstream3.utils.UIHelper.fixPaddingStatusbar
import com.lagradost.cloudstream3.utils.UIHelper.fixPaddingStatusbarView
import com.lagradost.cloudstream3.utils.UIHelper.getSpanCount
import com.lagradost.cloudstream3.utils.UIHelper.popupMenuNoIconsAndNoStringRes
import com.lagradost.cloudstream3.utils.UIHelper.setImage
import com.lagradost.cloudstream3.utils.UIHelper.setImageBlur
import com.lagradost.cloudstream3.widget.CenterZoomLayoutManager
import kotlinx.android.synthetic.main.fragment_home.*
import kotlinx.android.synthetic.main.fragment_home.home_api_fab
import kotlinx.android.synthetic.main.fragment_home.home_bookmarked_child_recyclerview
import kotlinx.android.synthetic.main.fragment_home.home_bookmarked_holder
import kotlinx.android.synthetic.main.fragment_home.home_change_api_loading
import kotlinx.android.synthetic.main.fragment_home.home_loaded
import kotlinx.android.synthetic.main.fragment_home.home_loading
import kotlinx.android.synthetic.main.fragment_home.home_loading_error
import kotlinx.android.synthetic.main.fragment_home.home_loading_shimmer
import kotlinx.android.synthetic.main.fragment_home.home_loading_statusbar
import kotlinx.android.synthetic.main.fragment_home.home_main_poster_recyclerview
import kotlinx.android.synthetic.main.fragment_home.home_master_recycler
import kotlinx.android.synthetic.main.fragment_home.home_plan_to_watch_btt
import kotlinx.android.synthetic.main.fragment_home.home_provider_meta_info
import kotlinx.android.synthetic.main.fragment_home.home_provider_name
import kotlinx.android.synthetic.main.fragment_home.home_reload_connection_open_in_browser
import kotlinx.android.synthetic.main.fragment_home.home_reload_connectionerror
import kotlinx.android.synthetic.main.fragment_home.home_statusbar
import kotlinx.android.synthetic.main.fragment_home.home_type_completed_btt
import kotlinx.android.synthetic.main.fragment_home.home_type_dropped_btt
import kotlinx.android.synthetic.main.fragment_home.home_type_on_hold_btt
import kotlinx.android.synthetic.main.fragment_home.home_type_watching_btt
import kotlinx.android.synthetic.main.fragment_home.home_watch_child_recyclerview
import kotlinx.android.synthetic.main.fragment_home.home_watch_holder
import kotlinx.android.synthetic.main.fragment_home.home_watch_parent_item_title
import kotlinx.android.synthetic.main.fragment_home.result_error_text
import kotlinx.android.synthetic.main.fragment_home_tv.*
import java.util.*

const val HOME_BOOKMARK_VALUE_LIST = "home_bookmarked_last_list"
const val HOME_PREF_HOMEPAGE = "home_pref_homepage"

class HomeFragment : Fragment() {
    companion object {
        val configEvent = Event<Int>()
        var currentSpan = 1
        val listHomepageItems = mutableListOf<SearchResponse>()

        private val errorProfilePics = listOf(
            R.drawable.monke_benene,
            R.drawable.monke_burrito,
            R.drawable.monke_coco,
            R.drawable.monke_cookie,
            R.drawable.monke_flusdered,
            R.drawable.monke_funny,
            R.drawable.monke_like,
            R.drawable.monke_party,
            R.drawable.monke_sob,
            R.drawable.monke_drink,
        )

        val errorProfilePic = errorProfilePics.random()

        fun Activity.loadHomepageList(item: HomePageList) {
            val context = this
            val bottomSheetDialogBuilder = BottomSheetDialog(context)
            bottomSheetDialogBuilder.setContentView(R.layout.home_episodes_expanded)
            val title = bottomSheetDialogBuilder.findViewById<TextView>(R.id.home_expanded_text)!!
            title.text = item.name
            val recycle =
                bottomSheetDialogBuilder.findViewById<AutofitRecyclerView>(R.id.home_expanded_recycler)!!
            val titleHolder =
                bottomSheetDialogBuilder.findViewById<FrameLayout>(R.id.home_expanded_drag_down)!!

            titleHolder.setOnClickListener {
                bottomSheetDialogBuilder.dismissSafe(this)
            }

            // Span settings
            recycle.spanCount = currentSpan

            recycle.adapter = SearchAdapter(item.list.toMutableList(), recycle) { callback ->
                handleSearchClickCallback(this, callback)
                if (callback.action == SEARCH_ACTION_LOAD || callback.action == SEARCH_ACTION_PLAY_FILE) {
                    bottomSheetDialogBuilder.dismissSafe(this)
                }
            }

            val spanListener = { span: Int ->
                recycle.spanCount = span
                //(recycle.adapter as SearchAdapter).notifyDataSetChanged()
            }

            configEvent += spanListener

            bottomSheetDialogBuilder.setOnDismissListener {
                configEvent -= spanListener
            }

            //(recycle.adapter as SearchAdapter).notifyDataSetChanged()

            bottomSheetDialogBuilder.show()
        }

        fun getPairList(
            anime: MaterialButton?,
            cartoons: MaterialButton?,
            tvs: MaterialButton?,
            docs: MaterialButton?,
            movies: MaterialButton?,
            asian: MaterialButton?,
        ): List<Pair<MaterialButton?, List<TvType>>> {
            return listOf(
                Pair(anime, listOf(TvType.Anime, TvType.OVA, TvType.AnimeMovie)),
                Pair(cartoons, listOf(TvType.Cartoon)),
                Pair(tvs, listOf(TvType.TvSeries)),
                Pair(docs, listOf(TvType.Documentary)),
                Pair(movies, listOf(TvType.Movie, TvType.Torrent)),
                Pair(asian, listOf(TvType.AsianDrama)),
            )
        }

        fun Context.selectHomepage(selectedApiName: String?, callback: (String) -> Unit) {
            val validAPIs = filterProviderByPreferredMedia().toMutableList()

            validAPIs.add(0, randomApi)
            validAPIs.add(0, noneApi)
            //val builder: AlertDialog.Builder = AlertDialog.Builder(this)
            //builder.setView(R.layout.home_select_mainpage)
            val builder =
                BottomSheetDialog(this)

            builder.setContentView(R.layout.home_select_mainpage)
            builder.show()
            builder.let { dialog ->
                val isMultiLang = getApiProviderLangSettings().size > 1
                //dialog.window?.setGravity(Gravity.BOTTOM)

                var currentApiName = selectedApiName

                var currentValidApis: MutableList<MainAPI> = mutableListOf()
                val preSelectedTypes = this.getKey<List<String>>(HOME_PREF_HOMEPAGE)
                    ?.mapNotNull { listName -> TvType.values().firstOrNull { it.name == listName } }
                    ?.toMutableList()
                    ?: mutableListOf(TvType.Movie, TvType.TvSeries)

                val anime = dialog.findViewById<MaterialButton>(R.id.home_select_anime)
                val cartoons = dialog.findViewById<MaterialButton>(R.id.home_select_cartoons)
                val tvs = dialog.findViewById<MaterialButton>(R.id.home_select_tv_series)
                val docs = dialog.findViewById<MaterialButton>(R.id.home_select_documentaries)
                val movies = dialog.findViewById<MaterialButton>(R.id.home_select_movies)
                val asian = dialog.findViewById<MaterialButton>(R.id.home_select_asian)
                val cancelBtt = dialog.findViewById<MaterialButton>(R.id.cancel_btt)
                val applyBtt = dialog.findViewById<MaterialButton>(R.id.apply_btt)

                val pairList = getPairList(anime, cartoons, tvs, docs, movies, asian)

                cancelBtt?.setOnClickListener {
                    dialog.dismissSafe()
                }

                applyBtt?.setOnClickListener {
                    if (currentApiName != selectedApiName) {
                        currentApiName?.let(callback)
                    }
                    dialog.dismissSafe()
                }

                val listView = dialog.findViewById<ListView>(R.id.listview1)
                val arrayAdapter = ArrayAdapter<String>(this, R.layout.sort_bottom_single_choice)
                listView?.adapter = arrayAdapter
                listView?.choiceMode = AbsListView.CHOICE_MODE_SINGLE

                listView?.setOnItemClickListener { _, _, i, _ ->
                    if (!currentValidApis.isNullOrEmpty()) {
                        currentApiName = currentValidApis[i].name
                        //to switch to apply simply remove this
                        currentApiName?.let(callback)
                        dialog.dismissSafe()
                    }
                }

                fun updateList() {
                    this.setKey(HOME_PREF_HOMEPAGE, preSelectedTypes)

                    arrayAdapter.clear()
                    currentValidApis = validAPIs.filter { api ->
                        api.hasMainPage && api.supportedTypes.any {
                            preSelectedTypes.contains(it)
                        }
                    }.sortedBy { it.name.lowercase() }.toMutableList()
                    currentValidApis.addAll(0, validAPIs.subList(0, 2))

                    val names =
                        currentValidApis.map { if (isMultiLang) "${getFlagFromIso(it.lang)?.plus(" ") ?: ""}${it.name}" else it.name }
                    val index = currentValidApis.map { it.name }.indexOf(currentApiName)
                    listView?.setItemChecked(index, true)
                    arrayAdapter.addAll(names)
                    arrayAdapter.notifyDataSetChanged()
                }

                for ((button, validTypes) in pairList) {
                    val isValid =
                        validAPIs.any { api -> validTypes.any { api.supportedTypes.contains(it) } }
                    button?.isVisible = isValid
                    if (isValid) {
                        fun buttonContains(): Boolean {
                            return preSelectedTypes.any { validTypes.contains(it) }
                        }

                        button?.isSelected = buttonContains()
                        button?.setOnClickListener {
                            preSelectedTypes.clear()
                            preSelectedTypes.addAll(validTypes)
                            for ((otherButton, _) in pairList) {
                                otherButton?.isSelected = false
                            }
                            button.isSelected = true
                            updateList()
                        }

                        button?.setOnLongClickListener {
                            if (!buttonContains()) {
                                button.isSelected = true
                                preSelectedTypes.addAll(validTypes)
                            } else {
                                button.isSelected = false
                                preSelectedTypes.removeAll(validTypes)
                            }
                            updateList()
                            return@setOnLongClickListener true
                        }
                    }
                }
                updateList()
            }
        }
    }

    private val homeViewModel: HomeViewModel by activityViewModels()

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        //homeViewModel =
        //     ViewModelProvider(this).get(HomeViewModel::class.java)
        val layout =
            if (context?.isTvSettings() == true) R.layout.fragment_home_tv else R.layout.fragment_home
        return inflater.inflate(layout, container, false)
    }

    private var currentHomePage: HomePageResponse? = null

    private fun toggleMainVisibility(visible: Boolean) {
        home_main_holder?.isVisible = visible
        home_main_poster_recyclerview?.isVisible = visible
    }

    private fun fixGrid() {
        activity?.getSpanCount()?.let {
            currentSpan = it
        }
        configEvent.invoke(currentSpan)
    }

    private val apiChangeClickListener = View.OnClickListener { view ->
        view.context.selectHomepage(currentApiName) { api ->
            homeViewModel.loadAndCancel(api)
        }
        /*val validAPIs = view.context?.filterProviderByPreferredMedia()?.toMutableList() ?: mutableListOf()

        validAPIs.add(0, randomApi)
        validAPIs.add(0, noneApi)
        view.popupMenuNoIconsAndNoStringRes(validAPIs.mapIndexed { index, api -> Pair(index, api.name) }) {
            homeViewModel.loadAndCancel(validAPIs[itemId].name)
        }*/
    }

    override fun onConfigurationChanged(newConfig: Configuration) {
        super.onConfigurationChanged(newConfig)
        fixGrid()
    }

    override fun onResume() {
        super.onResume()
        reloadStored()
    }
/*
    override fun onStop() {
        backEvent -= ::handleBack
        super.onStop()
    }*/

    private fun reloadStored() {
        homeViewModel.loadResumeWatching()
        val list = EnumSet.noneOf(WatchType::class.java)
        getKey<IntArray>(HOME_BOOKMARK_VALUE_LIST)?.map { WatchType.fromInternalId(it) }?.let {
            list.addAll(it)
        }
        homeViewModel.loadStoredData(list)
    }

    /*private fun handleBack(poppedFragment: Boolean) {
        if (poppedFragment) {
            reloadStored()
        }
    }*/

    private fun focusCallback(card: SearchResponse) {
        home_focus_text?.text = card.name
        home_blur_poster?.setImageBlur(card.posterUrl, 50)
    }

    private fun homeHandleSearch(callback: SearchClickCallback) {
        if (callback.action == SEARCH_ACTION_FOCUSED) {
            focusCallback(callback.card)
        } else {
            handleSearchClickCallback(activity, callback)
        }
    }

    private var currentApiName: String? = null
    private var toggleRandomButton = false

    @SuppressLint("SetTextI18n")
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        fixGrid()

        home_change_api?.setOnClickListener(apiChangeClickListener)
        home_change_api_loading?.setOnClickListener(apiChangeClickListener)
        home_api_fab?.setOnClickListener(apiChangeClickListener)
        home_random?.setOnClickListener {
            if (listHomepageItems.isNotEmpty()) {
                activity.loadSearchResult(listHomepageItems.random())
            }
        }

        //Disable Random button, if its toggled off on settings
        context?.let {
            val settingsManager = PreferenceManager.getDefaultSharedPreferences(it)
            toggleRandomButton =
                settingsManager.getBoolean(getString(R.string.random_button_key), false)
            home_random?.isVisible = toggleRandomButton
            if (!toggleRandomButton) {
                home_random?.visibility = View.GONE
            }
        }

        observe(homeViewModel.apiName) { apiName ->
            currentApiName = apiName
            setKey(HOMEPAGE_API, apiName)
            home_api_fab?.text = apiName
            home_provider_name?.text = apiName
            try {
                home_search?.queryHint = getString(R.string.search_hint_site).format(apiName)
            } catch (e: Exception) {
                logError(e)
            }
            home_provider_meta_info?.isVisible = false

            getApiFromNameNull(apiName)?.let { currentApi ->
                val typeChoices = listOf(
                    Pair(R.string.movies, listOf(TvType.Movie)),
                    Pair(R.string.tv_series, listOf(TvType.TvSeries)),
                    Pair(R.string.documentaries, listOf(TvType.Documentary)),
                    Pair(R.string.cartoons, listOf(TvType.Cartoon)),
                    Pair(R.string.anime, listOf(TvType.Anime, TvType.OVA, TvType.AnimeMovie)),
                    Pair(R.string.torrent, listOf(TvType.Torrent)),
                    Pair(R.string.asian_drama, listOf(TvType.AsianDrama)),
                ).filter { item -> currentApi.supportedTypes.any { type -> item.second.contains(type) } }
                home_provider_meta_info?.text =
                    typeChoices.joinToString(separator = ", ") { getString(it.first) }
                home_provider_meta_info?.isVisible = true
            }
        }

        observe(homeViewModel.randomItems) { items ->
            if (items.isNullOrEmpty()) {
                toggleMainVisibility(false)
            } else {
                val tempAdapter = home_main_poster_recyclerview.adapter as HomeChildItemAdapter?
                // no need to reload if it has the same data
                if (tempAdapter != null && tempAdapter.cardList == items) {
                    toggleMainVisibility(true)
                    return@observe
                }

                val randomSize = items.size
                home_main_poster_recyclerview?.adapter =
                    HomeChildItemAdapter(
                        items.toMutableList(),
                        R.layout.home_result_big_grid,
                        nextFocusUp = home_main_poster_recyclerview.nextFocusUpId,
                        nextFocusDown = home_main_poster_recyclerview.nextFocusDownId
                    ) { callback ->
                        homeHandleSearch(callback)
                    }
                if (context?.isTvSettings() == false) {
                    home_main_poster_recyclerview?.post {
                        (home_main_poster_recyclerview?.layoutManager as CenterZoomLayoutManager?)?.let { manager ->
                            manager.updateSize(forceUpdate = true)
                            if (randomSize > 2) {
                                manager.scrollToPosition(randomSize / 2)
                                manager.snap { dx ->
                                    home_main_poster_recyclerview?.post {
                                        // this is the best I can do, fuck android for not including instant scroll
                                        home_main_poster_recyclerview?.smoothScrollBy(dx, 0)
                                    }
                                }
                            }
                        }
                    }
                } else {
                    items.firstOrNull()?.let {
                        focusCallback(it)
                    }
                }
                toggleMainVisibility(true)
            }
        }

        home_search?.setOnQueryTextListener(object : SearchView.OnQueryTextListener {
            override fun onQueryTextSubmit(query: String): Boolean {
                QuickSearchFragment.pushSearch(activity, query, currentApiName?.let { arrayOf(it) })

                return true
            }

            override fun onQueryTextChange(newText: String): Boolean {
                //searchViewModel.quickSearch(newText)
                return true
            }
        })

        observe(homeViewModel.page) { data ->
            when (data) {
                is Resource.Success -> {
                    home_loading_shimmer?.stopShimmer()

                    val d = data.value
                    listHomepageItems.clear()

                    currentHomePage = d
                    (home_master_recycler?.adapter as? ParentItemAdapter?)?.updateList(
                        d?.items?.mapNotNull {
                            try {
                                listHomepageItems.addAll(it.list.filterSearchResponse())
                                HomePageList(it.name, it.list.filterSearchResponse())
                            } catch (e: Exception) {
                                logError(e)
                                null
                            }
                        } ?: listOf())

                    home_loading?.isVisible = false
                    home_loading_error?.isVisible = false
                    home_loaded?.isVisible = true
                    if (toggleRandomButton) {
                        home_random?.isVisible = listHomepageItems.isNotEmpty()
                    }
                }
                is Resource.Failure -> {
                    home_loading_shimmer?.stopShimmer()

                    result_error_text.text = data.errorString

                    home_reload_connectionerror.setOnClickListener(apiChangeClickListener)

                    home_reload_connection_open_in_browser.setOnClickListener { view ->
                        val validAPIs = apis//.filter { api -> api.hasMainPage }

                        view.popupMenuNoIconsAndNoStringRes(validAPIs.mapIndexed { index, api ->
                            Pair(
                                index,
                                api.name
                            )
                        }) {
                            try {
                                val i = Intent(Intent.ACTION_VIEW)
                                i.data = Uri.parse(validAPIs[itemId].mainUrl)
                                startActivity(i)
                            } catch (e: Exception) {
                                logError(e)
                            }
                        }
                    }

                    home_loading?.isVisible = false
                    home_loading_error?.isVisible = true
                    home_loaded?.isVisible = false
                }
                is Resource.Loading -> {
                    (home_master_recycler?.adapter as? ParentItemAdapter?)?.updateList(listOf())
                    home_loading_shimmer?.startShimmer()
                    home_loading?.isVisible = true
                    home_loading_error?.isVisible = false
                    home_loaded?.isVisible = false
                }
            }
        }

        val adapter: RecyclerView.Adapter<RecyclerView.ViewHolder> =
            ParentItemAdapter(mutableListOf(), { callback ->
                homeHandleSearch(callback)
            }, { item ->
                activity?.loadHomepageList(item)
            })

        val toggleList = listOf(
            Pair(home_type_watching_btt, WatchType.WATCHING),
            Pair(home_type_completed_btt, WatchType.COMPLETED),
            Pair(home_type_dropped_btt, WatchType.DROPPED),
            Pair(home_type_on_hold_btt, WatchType.ONHOLD),
            Pair(home_plan_to_watch_btt, WatchType.PLANTOWATCH),
        )

        for (item in toggleList) {
            val watch = item.second
            item.first?.setOnClickListener {
                homeViewModel.loadStoredData(EnumSet.of(watch))
            }

            item.first?.setOnLongClickListener { itemView ->
                val list = EnumSet.noneOf(WatchType::class.java)
                itemView.context.getKey<IntArray>(HOME_BOOKMARK_VALUE_LIST)
                    ?.map { WatchType.fromInternalId(it) }?.let {
                        list.addAll(it)
                    }

                if (list.contains(watch)) {
                    list.remove(watch)
                } else {
                    list.add(watch)
                }
                homeViewModel.loadStoredData(list)
                return@setOnLongClickListener true
            }
        }

        observe(homeViewModel.availableWatchStatusTypes) { availableWatchStatusTypes ->
            context?.setKey(
                HOME_BOOKMARK_VALUE_LIST,
                availableWatchStatusTypes.first.map { it.internalId }.toIntArray()
            )

            for (item in toggleList) {
                val watch = item.second
                item.first?.apply {
                    isVisible = availableWatchStatusTypes.second.contains(watch)
                    isSelected = availableWatchStatusTypes.first.contains(watch)
                }
            }

            /*home_bookmark_select?.setOnClickListener {
                it.popupMenuNoIcons(availableWatchStatusTypes.second.map { type ->
                    Pair(
                        type.internalId,
                        type.stringRes
                    )
                }) {
                    homeViewModel.loadStoredData(it.context, WatchType.fromInternalId(this.itemId))
                }
            }
            home_bookmarked_parent_item_title?.text = getString(availableWatchStatusTypes.first.stringRes)*/
        }

        observe(homeViewModel.bookmarks) { (isVis, bookmarks) ->
            home_bookmarked_holder.isVisible = isVis

            (home_bookmarked_child_recyclerview?.adapter as? HomeChildItemAdapter?)?.updateList(
                bookmarks
            )

            home_bookmarked_child_more_info?.setOnClickListener {
                activity?.loadHomepageList(
                    HomePageList(
                        getString(R.string.error_bookmarks_text), //home_bookmarked_parent_item_title?.text?.toString() ?: getString(R.string.error_bookmarks_text),
                        bookmarks
                    )
                )
            }
        }

        observe(homeViewModel.resumeWatching) { resumeWatching ->
            home_watch_holder?.isVisible = resumeWatching.isNotEmpty()
            (home_watch_child_recyclerview?.adapter as? HomeChildItemAdapter?)?.updateList(
                resumeWatching
            )

            //if (context?.isTvSettings() == true) {
            //    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            //        context?.addProgramsToContinueWatching(resumeWatching.mapNotNull { it as? DataStoreHelper.ResumeWatchingResult })
            //    }
            //}

            home_watch_child_more_info?.setOnClickListener {
                activity?.loadHomepageList(
                    HomePageList(
                        home_watch_parent_item_title?.text?.toString()
                            ?: getString(R.string.continue_watching),
                        resumeWatching
                    )
                )
            }
        }

        home_bookmarked_child_recyclerview.adapter = HomeChildItemAdapter(
            ArrayList(),
            nextFocusUp = home_bookmarked_child_recyclerview?.nextFocusUpId,
            nextFocusDown = home_bookmarked_child_recyclerview?.nextFocusDownId
        ) { callback ->
            if (callback.action == SEARCH_ACTION_SHOW_METADATA) {
                activity?.showOptionSelectStringRes(
                    callback.view,
                    callback.card.posterUrl,
                    listOf(
                        R.string.action_open_watching,
                        R.string.action_remove_from_bookmarks,
                    ),
                    listOf(
                        R.string.action_open_play,
                        R.string.action_open_watching,
                        R.string.action_remove_from_bookmarks
                    )
                ) { (isTv, actionId) ->
                    fun play() {
                        activity.loadSearchResult(callback.card, START_ACTION_RESUME_LATEST)
                        reloadStored()
                    }

                    fun remove() {
                        setResultWatchState(callback.card.id, WatchType.NONE.internalId)
                        reloadStored()
                    }

                    fun info() {
                        handleSearchClickCallback(
                            activity,
                            SearchClickCallback(
                                SEARCH_ACTION_LOAD,
                                callback.view,
                                -1,
                                callback.card
                            )
                        )
                        reloadStored()
                    }

                    if (isTv) {
                        when (actionId) {
                            0 -> {
                                play()
                            }
                            1 -> {
                                info()
                            }
                            2 -> {
                                remove()
                            }
                        }
                    } else {
                        when (actionId) {
                            0 -> {
                                info()
                            }
                            1 -> {
                                remove()
                            }
                        }
                    }
                }
            } else {
                homeHandleSearch(callback)
            }
        }

        home_watch_child_recyclerview?.adapter = HomeChildItemAdapter(
            ArrayList(),
            nextFocusUp = home_watch_child_recyclerview?.nextFocusUpId,
            nextFocusDown = home_watch_child_recyclerview?.nextFocusDownId
        ) { callback ->
            if (callback.action == SEARCH_ACTION_SHOW_METADATA) {
                activity?.showOptionSelectStringRes(
                    callback.view,
                    callback.card.posterUrl,
                    listOf(
                        R.string.action_open_watching,
                        R.string.action_remove_watching
                    ),
                    listOf(
                        R.string.action_open_play,
                        R.string.action_open_watching,
                        R.string.action_remove_watching
                    )
                ) { (isTv, actionId) ->
                    fun play() {
                        activity.loadSearchResult(callback.card, START_ACTION_RESUME_LATEST)
                        reloadStored()
                    }

                    fun remove() {
                        val card = callback.card
                        if (card is DataStoreHelper.ResumeWatchingResult) {
                            removeLastWatched(card.parentId)
                            reloadStored()
                        }
                    }

                    fun info() {
                        handleSearchClickCallback(
                            activity,
                            SearchClickCallback(
                                SEARCH_ACTION_LOAD,
                                callback.view,
                                -1,
                                callback.card
                            )
                        )
                        reloadStored()
                    }

                    if (isTv) {
                        when (actionId) {
                            0 -> {
                                play()
                            }
                            1 -> {
                                info()
                            }
                            2 -> {
                                remove()
                            }
                        }
                    } else {
                        when (actionId) {
                            0 -> {
                                info()
                            }
                            1 -> {
                                remove()
                            }
                        }
                    }

                }
            } else {
                homeHandleSearch(callback)
            }
        }

        context?.fixPaddingStatusbarView(home_statusbar)
        context?.fixPaddingStatusbar(home_loading_statusbar)


        home_master_recycler.adapter = adapter
        home_master_recycler.layoutManager = GridLayoutManager(context, 1)

        if (context?.isTvSettings() == false) {
            LinearSnapHelper().attachToRecyclerView(home_main_poster_recyclerview) // snap
            val centerLayoutManager =
                CenterZoomLayoutManager(context, LinearLayoutManager.HORIZONTAL, false)
            centerLayoutManager.setOnSizeListener { index ->
                (home_main_poster_recyclerview?.adapter as HomeChildItemAdapter?)?.cardList?.get(
                    index
                )?.let { random ->
                    home_main_play?.setOnClickListener {
                        activity.loadSearchResult(random, START_ACTION_RESUME_LATEST)
                    }
                    home_main_info?.setOnClickListener {
                        activity.loadSearchResult(random)
                    }

                    home_main_text?.text =
                        random.name + if (random is AnimeSearchResponse && !random.dubStatus.isNullOrEmpty()) {
                            random.dubStatus?.joinToString(
                                prefix = " â€¢ ",
                                separator = " | "
                            ) { it.name }
                        } else ""
                }
            }
            home_main_poster_recyclerview?.layoutManager = centerLayoutManager  // scale
        }

        reloadStored()
        val apiName = context?.getKey<String>(HOMEPAGE_API)
        if (homeViewModel.apiName.value != apiName || apiName == null) {
            //println("Caught home: " + homeViewModel.apiName.value + " at " + apiName)
            homeViewModel.loadAndCancel(apiName)
        }

        home_loaded.setOnScrollChangeListener(NestedScrollView.OnScrollChangeListener { view, _, scrollY, _, oldScrollY ->
            val dy = scrollY - oldScrollY
            if (dy > 0) { //check for scroll down
                home_api_fab?.shrink() // hide
                home_random?.shrink()
            } else if (dy < -5) {
                if (view?.context?.isTvSettings() == false) {
                    home_api_fab?.extend() // show
                    home_random?.extend()
                }
            }
        })

        // nice profile pic on homepage
        home_profile_picture_holder?.isVisible = false
        context?.let { ctx ->
            // just in case
            if (ctx.isTvSettings()) {
                home_api_fab?.isVisible = false
                home_change_api?.isVisible = true
                if (ctx.isTrueTvSettings()) {
                    home_change_api_loading?.isVisible = true
                    home_change_api_loading?.isFocusable = true
                    home_change_api_loading?.isFocusableInTouchMode = true
                    home_change_api?.isFocusable = true
                    home_change_api?.isFocusableInTouchMode = true
                }
                // home_bookmark_select?.isFocusable = true
                // home_bookmark_select?.isFocusableInTouchMode = true
            } else {
                home_api_fab?.isVisible = true
                home_change_api?.isVisible = false
                home_change_api_loading?.isVisible = false
            }

            for (syncApi in OAuth2API.OAuth2Apis) {
                val login = syncApi.loginInfo()
                val pic = login?.profilePicture
                if (home_profile_picture?.setImage(
                        pic,
                        errorImageDrawable = errorProfilePic
                    ) == true
                ) {
                    home_profile_picture_holder?.isVisible = true
                    break
                }
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/home/HomeParentItemAdapter.kt
================================================
package com.lagradost.cloudstream3.ui.home

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.FrameLayout
import android.widget.TextView
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.HomePageList
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ui.search.SearchClickCallback
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTvSettings
import kotlinx.android.synthetic.main.homepage_parent.view.*

class ParentItemAdapter(
    private var items: MutableList<HomePageList>,
    private val clickCallback: (SearchClickCallback) -> Unit,
    private val moreInfoClickCallback: (HomePageList) -> Unit,
) : RecyclerView.Adapter<RecyclerView.ViewHolder>() {
    override fun onCreateViewHolder(parent: ViewGroup, i: Int): ParentViewHolder {
        val layout =
            if (parent.context.isTvSettings()) R.layout.homepage_parent_tv else R.layout.homepage_parent
        return ParentViewHolder(
            LayoutInflater.from(parent.context).inflate(layout, parent, false),
            clickCallback,
            moreInfoClickCallback
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is ParentViewHolder -> {
                holder.bind(items[position])
            }
        }
    }

    override fun getItemCount(): Int {
        return items.size
    }

    override fun getItemId(position: Int): Long {
        return items[position].name.hashCode().toLong()
    }

    fun updateList(newList: List<HomePageList>) {
        // this moves all bad results to the bottom
        val endList = mutableListOf<HomePageList>()
        val newFilteredList = mutableListOf<HomePageList>()
        for (item in newList) {
            if (item.list.isEmpty()) {
                endList.add(item)
            } else {
                newFilteredList.add(item)
            }
        }
        newFilteredList.addAll(endList)

        val diffResult = DiffUtil.calculateDiff(
            SearchDiffCallback(this.items, newFilteredList)
        )

        items.clear()
        items.addAll(newFilteredList)

        diffResult.dispatchUpdatesTo(this)
    }

    class ParentViewHolder
    constructor(
        itemView: View,
        private val clickCallback: (SearchClickCallback) -> Unit,
        private val moreInfoClickCallback: (HomePageList) -> Unit
    ) :
        RecyclerView.ViewHolder(itemView) {
        val title: TextView = itemView.home_parent_item_title
        val recyclerView: RecyclerView = itemView.home_child_recyclerview
        private val moreInfo: FrameLayout? = itemView.home_child_more_info
        fun bind(info: HomePageList) {
            title.text = info.name
            recyclerView.adapter = HomeChildItemAdapter(
                info.list.toMutableList(),
                clickCallback = clickCallback,
                nextFocusUp = recyclerView.nextFocusUpId,
                nextFocusDown = recyclerView.nextFocusDownId
            )
            //(recyclerView.adapter as HomeChildItemAdapter).notifyDataSetChanged()

            moreInfo?.setOnClickListener {
                moreInfoClickCallback.invoke(info)
            }
        }
    }
}

class SearchDiffCallback(
    private val oldList: List<HomePageList>,
    private val newList: List<HomePageList>
) :
    DiffUtil.Callback() {
    override fun areItemsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition].name == newList[newItemPosition].name

    override fun getOldListSize() = oldList.size

    override fun getNewListSize() = newList.size

    override fun areContentsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition] == newList[newItemPosition]
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/home/HomeViewModel.kt
================================================
package com.lagradost.cloudstream3.ui.home

import androidx.lifecycle.LiveData
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.lagradost.cloudstream3.APIHolder.apis
import com.lagradost.cloudstream3.APIHolder.filterProviderByPreferredMedia
import com.lagradost.cloudstream3.APIHolder.getApiFromNameNull
import com.lagradost.cloudstream3.AcraApplication.Companion.context
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.HomePageResponse
import com.lagradost.cloudstream3.MainAPI
import com.lagradost.cloudstream3.SearchResponse
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.ui.APIRepository
import com.lagradost.cloudstream3.ui.APIRepository.Companion.noneApi
import com.lagradost.cloudstream3.ui.APIRepository.Companion.randomApi
import com.lagradost.cloudstream3.ui.WatchType
import com.lagradost.cloudstream3.utils.DOWNLOAD_HEADER_CACHE
import com.lagradost.cloudstream3.utils.DataStoreHelper
import com.lagradost.cloudstream3.utils.DataStoreHelper.getAllResumeStateIds
import com.lagradost.cloudstream3.utils.DataStoreHelper.getAllWatchStateIds
import com.lagradost.cloudstream3.utils.DataStoreHelper.getBookmarkedData
import com.lagradost.cloudstream3.utils.DataStoreHelper.getLastWatched
import com.lagradost.cloudstream3.utils.DataStoreHelper.getResultWatchState
import com.lagradost.cloudstream3.utils.DataStoreHelper.getViewPos
import com.lagradost.cloudstream3.utils.HOMEPAGE_API
import com.lagradost.cloudstream3.utils.VideoDownloadHelper
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.Job
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext
import java.util.*

class HomeViewModel : ViewModel() {
    private var repo: APIRepository? = null

    private val _apiName = MutableLiveData<String>()
    val apiName: LiveData<String> = _apiName

    private val _page = MutableLiveData<Resource<HomePageResponse?>>()
    val page: LiveData<Resource<HomePageResponse?>> = _page

    private val _randomItems = MutableLiveData<List<SearchResponse>?>(null)
    val randomItems: LiveData<List<SearchResponse>?> = _randomItems

    private fun autoloadRepo(): APIRepository {
        return APIRepository(apis.first { it.hasMainPage })
    }

    private val _availableWatchStatusTypes = MutableLiveData<Pair<EnumSet<WatchType>, EnumSet<WatchType>>>()
    val availableWatchStatusTypes: LiveData<Pair<EnumSet<WatchType>, EnumSet<WatchType>>> = _availableWatchStatusTypes
    private val _bookmarks = MutableLiveData<Pair<Boolean, List<SearchResponse>>>()
    val bookmarks: LiveData<Pair<Boolean, List<SearchResponse>>> = _bookmarks

    private val _resumeWatching = MutableLiveData<List<SearchResponse>>()
    val resumeWatching: LiveData<List<SearchResponse>> = _resumeWatching

    fun loadResumeWatching() = viewModelScope.launch {
        val resumeWatching = withContext(Dispatchers.IO) {
            getAllResumeStateIds()?.mapNotNull { id ->
                getLastWatched(id)
            }?.sortedBy { -it.updateTime }
        }

        // val resumeWatchingResult = ArrayList<DataStoreHelper.ResumeWatchingResult>()

        val resumeWatchingResult = withContext(Dispatchers.IO) {
            resumeWatching?.map { resume ->
                val data = getKey<VideoDownloadHelper.DownloadHeaderCached>(
                    DOWNLOAD_HEADER_CACHE,
                    resume.parentId.toString()
                ) ?: return@map null
                val watchPos = getViewPos(resume.episodeId)
                DataStoreHelper.ResumeWatchingResult(
                    data.name,
                    data.url,
                    data.apiName,
                    data.type,
                    data.poster,
                    watchPos,
                    resume.episodeId,
                    resume.parentId,
                    resume.episode,
                    resume.season,
                    resume.isFromDownload
                )
            }?.filterNotNull()
        }
        resumeWatchingResult?.let {
            _resumeWatching.postValue(it)
        }
    }

    fun loadStoredData(preferredWatchStatus: EnumSet<WatchType>?) = viewModelScope.launch {
        val watchStatusIds = withContext(Dispatchers.IO) {
            getAllWatchStateIds()?.map { id ->
                Pair(id, getResultWatchState(id))
            }
        }?.distinctBy { it.first } ?: return@launch

        val length = WatchType.values().size
        val currentWatchTypes = EnumSet.noneOf(WatchType::class.java)

        for (watch in watchStatusIds) {
            currentWatchTypes.add(watch.second)
            if (currentWatchTypes.size >= length) {
                break
            }
        }

        currentWatchTypes.remove(WatchType.NONE)

        if (currentWatchTypes.size <= 0) {
            _bookmarks.postValue(Pair(false, ArrayList()))
            return@launch
        }

        val watchPrefNotNull = preferredWatchStatus ?: EnumSet.of(currentWatchTypes.first())
        //if (currentWatchTypes.any { watchPrefNotNull.contains(it) }) watchPrefNotNull else listOf(currentWatchTypes.first())

        _availableWatchStatusTypes.postValue(
            Pair(
                watchPrefNotNull,
                currentWatchTypes,
            )
        )

        val list = withContext(Dispatchers.IO) {
            watchStatusIds.filter { watchPrefNotNull.contains(it.second) }
                .mapNotNull { getBookmarkedData(it.first) }
                .sortedBy { -it.latestUpdatedTime }
        }
        _bookmarks.postValue(Pair(true, list))
    }

    private var onGoingLoad: Job? = null
    private fun loadAndCancel(api: MainAPI?) {
        onGoingLoad?.cancel()
        onGoingLoad = load(api)
    }

    private fun load(api: MainAPI?) = viewModelScope.launch {
        repo = if (api != null) {
            APIRepository(api)
        } else {
            autoloadRepo()
        }

        _apiName.postValue(repo?.name)
        _randomItems.postValue(listOf())

        if (repo?.hasMainPage == true) {
            _page.postValue(Resource.Loading())

            val data = repo?.getMainPage()
            when (data) {
                is Resource.Success -> {
                    try {
                        val home = data.value
                        if (home?.items?.isNullOrEmpty() == false) {
                            val currentList =
                                home.items.shuffled().filter { !it.list.isNullOrEmpty() }.flatMap { it.list }
                                    .distinctBy { it.url }
                                    .toList()

                            if (!currentList.isNullOrEmpty()) {
                                val randomItems = currentList.shuffled()

                                _randomItems.postValue(randomItems)
                            }
                        }
                    } catch (e : Exception) {
                        _randomItems.postValue(emptyList())
                        logError(e)
                    }
                }
                else -> Unit
            }
            data?.let {
                _page.postValue(it)
            }
        } else {
            _page.postValue(Resource.Success(HomePageResponse(emptyList())))
        }
    }

    fun loadAndCancel(preferredApiName: String?) = viewModelScope.launch {
        val api = getApiFromNameNull(preferredApiName)
        if (preferredApiName == noneApi.name)
            loadAndCancel(noneApi)
        else if (preferredApiName == randomApi.name || api == null) {
            val validAPIs = context?.filterProviderByPreferredMedia()
            if(validAPIs.isNullOrEmpty()) {
                loadAndCancel(noneApi)
            } else {
                val apiRandom = validAPIs.random()
                loadAndCancel(apiRandom)
                setKey(HOMEPAGE_API, apiRandom.name)
            }
        } else {
            loadAndCancel(api)
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/AbstractPlayerFragment.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.annotation.SuppressLint
import android.content.*
import android.graphics.drawable.AnimatedImageDrawable
import android.graphics.drawable.AnimatedVectorDrawable
import android.media.metrics.PlaybackErrorEvent
import android.os.Build
import android.os.Bundle
import android.support.v4.media.session.MediaSessionCompat
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.view.WindowManager
import android.widget.Toast
import androidx.annotation.LayoutRes
import androidx.annotation.StringRes
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.media.session.MediaButtonReceiver
import androidx.preference.PreferenceManager
import androidx.vectordrawable.graphics.drawable.AnimatedVectorDrawableCompat
import com.google.android.exoplayer2.ExoPlayer
import com.google.android.exoplayer2.PlaybackException
import com.google.android.exoplayer2.ext.mediasession.MediaSessionConnector
import com.google.android.exoplayer2.ui.AspectRatioFrameLayout
import com.google.android.exoplayer2.ui.SubtitleView
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.CommonActivity.canEnterPipMode
import com.lagradost.cloudstream3.CommonActivity.isInPIPMode
import com.lagradost.cloudstream3.CommonActivity.keyEventListener
import com.lagradost.cloudstream3.CommonActivity.playerEventListener
import com.lagradost.cloudstream3.CommonActivity.showToast
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.ui.subtitles.SaveCaptionStyle
import com.lagradost.cloudstream3.ui.subtitles.SubtitlesFragment
import com.lagradost.cloudstream3.utils.AppUtils
import com.lagradost.cloudstream3.utils.AppUtils.requestLocalAudioFocus
import com.lagradost.cloudstream3.utils.UIHelper
import com.lagradost.cloudstream3.utils.UIHelper.hideSystemUI
import kotlinx.android.synthetic.main.fragment_player.*
import kotlinx.android.synthetic.main.player_custom_layout.*

enum class PlayerResize(@StringRes val nameRes: Int) {
    Fit(R.string.resize_fit),
    Fill(R.string.resize_fill),
    Zoom(R.string.resize_zoom),
}

// when the player should switch skip op to next episode
const val SKIP_OP_VIDEO_PERCENTAGE = 50

// when the player should preload the next episode for faster loading
const val PRELOAD_NEXT_EPISODE_PERCENTAGE = 80

// when the player should mark the episode as watched and resume watching the next
const val NEXT_WATCH_EPISODE_PERCENTAGE = 90

// when the player should sync the progress of "watched", TODO MAKE SETTING
const val UPDATE_SYNC_PROGRESS_PERCENTAGE = 80

abstract class AbstractPlayerFragment(
    val player: IPlayer = CS3IPlayer()
) : Fragment() {
    var resizeMode: Int = 0
    var subStyle: SaveCaptionStyle? = null
    var subView: SubtitleView? = null
    var isBuffering = true

    @LayoutRes
    protected var layout: Int = R.layout.fragment_player

    open fun nextEpisode() {
        throw NotImplementedError()
    }

    open fun prevEpisode() {
        throw NotImplementedError()
    }

    open fun playerPositionChanged(posDur: Pair<Long, Long>) {
        throw NotImplementedError()
    }

    open fun playerDimensionsLoaded(widthHeight: Pair<Int, Int>) {
        throw NotImplementedError()
    }

    open fun subtitlesChanged() {
        throw NotImplementedError()
    }

    open fun embeddedSubtitlesFetched(subtitles: List<SubtitleData>) {
        throw NotImplementedError()
    }

    open fun exitedPipMode() {
        throw NotImplementedError()
    }

    private fun keepScreenOn(on: Boolean) {
        if (on) {
            activity?.window?.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
        } else {
            activity?.window?.clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
        }
    }

    private fun updateIsPlaying(playing: Pair<CSPlayerLoading, CSPlayerLoading>) {
        val (wasPlaying, isPlaying) = playing
        val isPlayingRightNow = CSPlayerLoading.IsPlaying == isPlaying
        val isPausedRightNow = CSPlayerLoading.IsPaused == isPlaying

        keepScreenOn(!isPausedRightNow)

        isBuffering = CSPlayerLoading.IsBuffering == isPlaying
        if (isBuffering) {
            player_pause_play_holder_holder?.isVisible = false
            player_buffering?.isVisible = true
        } else {
            player_pause_play_holder_holder?.isVisible = true
            player_buffering?.isVisible = false

            if (wasPlaying != isPlaying) {
                player_pause_play?.setImageResource(if (isPlayingRightNow) R.drawable.play_to_pause else R.drawable.pause_to_play)
                val drawable = player_pause_play?.drawable

                var startedAnimation = false
                if (Build.VERSION.SDK_INT > Build.VERSION_CODES.P) {
                    if (drawable is AnimatedImageDrawable) {
                        drawable.start()
                        startedAnimation = true
                    }
                }

                if (drawable is AnimatedVectorDrawable) {
                    drawable.start()
                    startedAnimation = true
                }

                if (drawable is AnimatedVectorDrawableCompat) {
                    drawable.start()
                    startedAnimation = true
                }

                // somehow the phone is wacked
                if (!startedAnimation) {
                    player_pause_play?.setImageResource(if (isPlayingRightNow) R.drawable.netflix_pause else R.drawable.netflix_play)
                }
            } else {
                player_pause_play?.setImageResource(if (isPlayingRightNow) R.drawable.netflix_pause else R.drawable.netflix_play)
            }
        }

        canEnterPipMode = isPlayingRightNow
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O && isInPIPMode) {
            activity?.let { act ->
                PlayerPipHelper.updatePIPModeActions(act, isPlayingRightNow)
            }
        }
    }

    private var pipReceiver: BroadcastReceiver? = null
    override fun onPictureInPictureModeChanged(isInPictureInPictureMode: Boolean) {
        try {
            isInPIPMode = isInPictureInPictureMode
            if (isInPictureInPictureMode) {
                // Hide the full-screen UI (controls, etc.) while in picture-in-picture mode.
                player_holder?.alpha = 0f
                pipReceiver = object : BroadcastReceiver() {
                    override fun onReceive(
                        context: Context,
                        intent: Intent,
                    ) {
                        if (ACTION_MEDIA_CONTROL != intent.action) {
                            return
                        }
                        player.handleEvent(
                            CSPlayerEvent.values()[intent.getIntExtra(
                                EXTRA_CONTROL_TYPE,
                                0
                            )]
                        )
                    }
                }
                val filter = IntentFilter()
                filter.addAction(
                    ACTION_MEDIA_CONTROL
                )
                activity?.registerReceiver(pipReceiver, filter)
                val isPlaying = player.getIsPlaying()
                val isPlayingValue =
                    if (isPlaying) CSPlayerLoading.IsPlaying else CSPlayerLoading.IsPaused
                updateIsPlaying(Pair(isPlayingValue, isPlayingValue))
            } else {
                // Restore the full-screen UI.
                player_holder?.alpha = 1f
                exitedPipMode()
                pipReceiver?.let {
                    activity?.unregisterReceiver(it)
                }
                activity?.hideSystemUI()
                this.view?.let { UIHelper.hideKeyboard(it) }
            }
        } catch (e: Exception) {
            logError(e)
        }
    }

    open fun nextMirror() {
        throw NotImplementedError()
    }

    private fun playerError(exception: Exception) {
        val ctx = context ?: return
        when (exception) {
            is PlaybackException -> {
                val msg = exception.message ?: ""
                val errorName = exception.errorCodeName
                when (val code = exception.errorCode) {
                    PlaybackException.ERROR_CODE_IO_FILE_NOT_FOUND, PlaybackException.ERROR_CODE_PARSING_CONTAINER_UNSUPPORTED, PlaybackException.ERROR_CODE_IO_NO_PERMISSION, PlaybackException.ERROR_CODE_IO_UNSPECIFIED -> {
                        showToast(
                            activity,
                            "${ctx.getString(R.string.source_error)}\n$errorName ($code)\n$msg",
                            Toast.LENGTH_SHORT
                        )
                        nextMirror()
                    }
                    PlaybackException.ERROR_CODE_REMOTE_ERROR, PlaybackException.ERROR_CODE_IO_BAD_HTTP_STATUS, PlaybackException.ERROR_CODE_TIMEOUT, PlaybackException.ERROR_CODE_IO_NETWORK_CONNECTION_FAILED, PlaybackException.ERROR_CODE_IO_INVALID_HTTP_CONTENT_TYPE -> {
                        showToast(
                            activity,
                            "${ctx.getString(R.string.remote_error)}\n$errorName ($code)\n$msg",
                            Toast.LENGTH_SHORT
                        )
                        nextMirror()
                    }
                    PlaybackException.ERROR_CODE_DECODING_FAILED, PlaybackErrorEvent.ERROR_AUDIO_TRACK_INIT_FAILED, PlaybackErrorEvent.ERROR_AUDIO_TRACK_OTHER, PlaybackException.ERROR_CODE_AUDIO_TRACK_WRITE_FAILED, PlaybackException.ERROR_CODE_DECODER_INIT_FAILED, PlaybackException.ERROR_CODE_DECODER_QUERY_FAILED -> {
                        showToast(
                            activity,
                            "${ctx.getString(R.string.render_error)}\n$errorName ($code)\n$msg",
                            Toast.LENGTH_SHORT
                        )
                        nextMirror()
                    }
                    else -> {
                        showToast(
                            activity,
                            "${ctx.getString(R.string.unexpected_error)}\n$errorName ($code)\n$msg",
                            Toast.LENGTH_SHORT
                        )
                    }
                }
            }
            is InvalidFileException -> {
                showToast(
                    activity,
                    "${ctx.getString(R.string.source_error)}\n${exception.message}",
                    Toast.LENGTH_SHORT
                )
                nextMirror()
            }
            else -> {
                showToast(activity, exception.message, Toast.LENGTH_SHORT)
            }
        }
    }

    private fun requestAudioFocus() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            activity?.requestLocalAudioFocus(AppUtils.getFocusRequest())
        }
    }

    private fun onSubStyleChanged(style: SaveCaptionStyle) {
        if (player is CS3IPlayer) {
            player.updateSubtitleStyle(style)
        }
    }

    private fun playerUpdated(player: Any?) {
        if (player is ExoPlayer) {
            context?.let { ctx ->
                val mediaButtonReceiver = ComponentName(ctx, MediaButtonReceiver::class.java)
                MediaSessionCompat(ctx, "Player", mediaButtonReceiver, null).let { media ->
                    //media.setCallback(mMediaSessionCallback)
                    //media.setFlags(MediaSessionCompat.FLAG_HANDLES_MEDIA_BUTTONS or MediaSessionCompat.FLAG_HANDLES_TRANSPORT_CONTROLS)
                    val mediaSessionConnector = MediaSessionConnector(media)
                    mediaSessionConnector.setPlayer(player)
                    media.isActive = true
                    mMediaSessionCompat = media
                }
            }

            player_view?.player = player
            player_view?.performClick()
        }
    }

    private var mediaSessionConnector: MediaSessionConnector? = null
    private var mMediaSessionCompat: MediaSessionCompat? = null

    // this can be used in the future for players other than exoplayer
    //private val mMediaSessionCallback: MediaSessionCompat.Callback = object : MediaSessionCompat.Callback() {
    //    override fun onMediaButtonEvent(mediaButtonEvent: Intent): Boolean {
    //        val keyEvent = mediaButtonEvent.getParcelableExtra(Intent.EXTRA_KEY_EVENT) as KeyEvent?
    //        if (keyEvent != null) {
    //            if (keyEvent.action == KeyEvent.ACTION_DOWN) { // NO DOUBLE SKIP
    //                val consumed = when (keyEvent.keyCode) {
    //                    KeyEvent.KEYCODE_MEDIA_PAUSE -> callOnPause()
    //                    KeyEvent.KEYCODE_MEDIA_PLAY -> callOnPlay()
    //                    KeyEvent.KEYCODE_MEDIA_STOP -> callOnStop()
    //                    KeyEvent.KEYCODE_MEDIA_NEXT -> callOnNext()
    //                    else -> false
    //                }
    //                if (consumed) return true
    //            }
    //        }
    //
    //        return super.onMediaButtonEvent(mediaButtonEvent)
    //    }
    //}


    @SuppressLint("SetTextI18n")
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        resizeMode = getKey(RESIZE_MODE_KEY) ?: 0
        resize(resizeMode, false)

        player.initCallbacks(
            playerUpdated = ::playerUpdated,
            updateIsPlaying = ::updateIsPlaying,
            playerError = ::playerError,
            requestAutoFocus = ::requestAudioFocus,
            nextEpisode = ::nextEpisode,
            prevEpisode = ::prevEpisode,
            playerPositionChanged = ::playerPositionChanged,
            playerDimensionsLoaded = ::playerDimensionsLoaded,
            requestedListeningPercentages = listOf(
                SKIP_OP_VIDEO_PERCENTAGE,
                PRELOAD_NEXT_EPISODE_PERCENTAGE,
                NEXT_WATCH_EPISODE_PERCENTAGE,
                UPDATE_SYNC_PROGRESS_PERCENTAGE,
            ),
            subtitlesUpdates = ::subtitlesChanged,
            embeddedSubtitlesFetched = ::embeddedSubtitlesFetched,
        )

        if (player is CS3IPlayer) {
            subView = player_view?.findViewById(R.id.exo_subtitles)
            subStyle = SubtitlesFragment.getCurrentSavedStyle()
            player.initSubtitles(subView, subtitle_holder, subStyle)
            SubtitlesFragment.applyStyleEvent += ::onSubStyleChanged

            try {
                context?.let { ctx ->
                    val settingsManager = PreferenceManager.getDefaultSharedPreferences(
                        ctx
                    )

                    val currentPrefCacheSize =
                        settingsManager.getInt(getString(R.string.video_buffer_size_key), 0)
                    val currentPrefDiskSize =
                        settingsManager.getInt(getString(R.string.video_buffer_disk_key), 0)
                    val currentPrefBufferSec =
                        settingsManager.getInt(getString(R.string.video_buffer_length_key), 0)

                    player.cacheSize = currentPrefCacheSize * 1024L * 1024L
                    player.simpleCacheSize = currentPrefDiskSize * 1024L * 1024L
                    player.videoBufferMs = currentPrefBufferSec * 1000L
                }
            } catch (e: Exception) {
                logError(e)
            }
        }

        /*context?.let { ctx ->
            player.loadPlayer(
                ctx,
                false,
                ExtractorLink(
                    "idk",
                    "bunny",
                    "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                    "",
                    Qualities.P720.value,
                    false
                ),
            )
        }*/
    }

    override fun onDestroy() {
        playerEventListener = null
        keyEventListener = null
        SubtitlesFragment.applyStyleEvent -= ::onSubStyleChanged

        keepScreenOn(false)
        super.onDestroy()
    }

    fun nextResize() {
        resizeMode = (resizeMode + 1) % PlayerResize.values().size
        resize(resizeMode, true)
    }

    fun resize(resize: Int, showToast: Boolean) {
        resize(PlayerResize.values()[resize], showToast)
    }

    fun resize(resize: PlayerResize, showToast: Boolean) {
        setKey(RESIZE_MODE_KEY, resize.ordinal)
        val type = when (resize) {
            PlayerResize.Fill -> AspectRatioFrameLayout.RESIZE_MODE_FILL
            PlayerResize.Fit -> AspectRatioFrameLayout.RESIZE_MODE_FIT
            PlayerResize.Zoom -> AspectRatioFrameLayout.RESIZE_MODE_ZOOM
        }
        player_view?.resizeMode = type

        if (showToast)
            showToast(activity, resize.nameRes, Toast.LENGTH_SHORT)
    }

    override fun onStop() {
        player.onStop()
        super.onStop()
    }

    override fun onResume() {
        context?.let { ctx ->
            player.onResume(ctx)
        }

        super.onResume()
    }

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        return inflater.inflate(layout, container, false)
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/CS3IPlayer.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.content.Context
import android.net.Uri
import android.os.Handler
import android.os.Looper
import android.util.Log
import android.widget.FrameLayout
import com.google.android.exoplayer2.*
import com.google.android.exoplayer2.database.StandaloneDatabaseProvider
import com.google.android.exoplayer2.ext.okhttp.OkHttpDataSource
import com.google.android.exoplayer2.source.DefaultMediaSourceFactory
import com.google.android.exoplayer2.source.MergingMediaSource
import com.google.android.exoplayer2.source.SingleSampleMediaSource
import com.google.android.exoplayer2.text.TextRenderer
import com.google.android.exoplayer2.trackselection.DefaultTrackSelector
import com.google.android.exoplayer2.trackselection.TrackSelector
import com.google.android.exoplayer2.ui.SubtitleView
import com.google.android.exoplayer2.upstream.DataSource
import com.google.android.exoplayer2.upstream.DefaultDataSourceFactory
import com.google.android.exoplayer2.upstream.DefaultHttpDataSource
import com.google.android.exoplayer2.upstream.cache.CacheDataSource
import com.google.android.exoplayer2.upstream.cache.LeastRecentlyUsedCacheEvictor
import com.google.android.exoplayer2.upstream.cache.SimpleCache
import com.google.android.exoplayer2.util.MimeTypes
import com.lagradost.cloudstream3.APIHolder.getApiFromName
import com.lagradost.cloudstream3.USER_AGENT
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.normalSafeApiCall
import com.lagradost.cloudstream3.ui.subtitles.SaveCaptionStyle
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.ExtractorUri
import com.lagradost.cloudstream3.utils.SubtitleHelper.fromTwoLettersToLanguage
import java.io.File
import javax.net.ssl.HttpsURLConnection
import javax.net.ssl.SSLContext
import javax.net.ssl.SSLSession

const val TAG = "CS3ExoPlayer"

/** Cache */

class CS3IPlayer : IPlayer {
    private var isPlaying = false
    private var exoPlayer: ExoPlayer? = null
    var cacheSize = 0L
    var simpleCacheSize = 0L
    var videoBufferMs = 0L

    private val seekActionTime = 30000L

    private var ignoreSSL: Boolean = true
    private var playBackSpeed: Float = 1.0f

    private var lastMuteVolume: Float = 1.0f

    private var currentLink: ExtractorLink? = null
    private var currentDownloadedFile: ExtractorUri? = null
    private var hasUsedFirstRender = false

    private var currentWindow: Int = 0
    private var playbackPosition: Long = 0

    private val subtitleHelper = PlayerSubtitleHelper()

    override fun getDuration(): Long? = exoPlayer?.duration
    override fun getPosition(): Long? = exoPlayer?.currentPosition
    override fun getIsPlaying(): Boolean = isPlaying
    override fun getPlaybackSpeed(): Float = playBackSpeed

    /**
     * Tracks reported to be used by exoplayer, since sometimes it has a mind of it's own when selecting subs.
     * String = lowercase language as set by .setLanguage("_$langId")
     * Boolean = if it's active
     * */
    private var exoPlayerSelectedTracks = listOf<Pair<String, Boolean>>()

    /** isPlaying */
    private var updateIsPlaying: ((Pair<CSPlayerLoading, CSPlayerLoading>) -> Unit)? = null
    private var requestAutoFocus: (() -> Unit)? = null
    private var playerError: ((Exception) -> Unit)? = null
    private var subtitlesUpdates: (() -> Unit)? = null

    /** width x height */
    private var playerDimensionsLoaded: ((Pair<Int, Int>) -> Unit)? = null

    /** used for playerPositionChanged */
    private var requestedListeningPercentages: List<Int>? = null

    /** Fired when seeking the player or on requestedListeningPercentages,
     * used to make things appear on que
     * position, duration */
    private var playerPositionChanged: ((Pair<Long, Long>) -> Unit)? = null

    private var nextEpisode: (() -> Unit)? = null
    private var prevEpisode: (() -> Unit)? = null

    private var playerUpdated: ((Any?) -> Unit)? = null
    private var embeddedSubtitlesFetched: ((List<SubtitleData>) -> Unit)? = null

    override fun initCallbacks(
        playerUpdated: (Any?) -> Unit,
        updateIsPlaying: ((Pair<CSPlayerLoading, CSPlayerLoading>) -> Unit)?,
        requestAutoFocus: (() -> Unit)?,
        playerError: ((Exception) -> Unit)?,
        playerDimensionsLoaded: ((Pair<Int, Int>) -> Unit)?,
        requestedListeningPercentages: List<Int>?,
        playerPositionChanged: ((Pair<Long, Long>) -> Unit)?,
        nextEpisode: (() -> Unit)?,
        prevEpisode: (() -> Unit)?,
        subtitlesUpdates: (() -> Unit)?,
        embeddedSubtitlesFetched: ((List<SubtitleData>) -> Unit)?,
    ) {
        this.playerUpdated = playerUpdated
        this.updateIsPlaying = updateIsPlaying
        this.requestAutoFocus = requestAutoFocus
        this.playerError = playerError
        this.playerDimensionsLoaded = playerDimensionsLoaded
        this.requestedListeningPercentages = requestedListeningPercentages
        this.playerPositionChanged = playerPositionChanged
        this.nextEpisode = nextEpisode
        this.prevEpisode = prevEpisode
        this.subtitlesUpdates = subtitlesUpdates
        this.embeddedSubtitlesFetched = embeddedSubtitlesFetched
    }

    // I know, this is not a perfect solution, however it works for fixing subs
    private fun reloadSubs() {
        exoPlayer?.applicationLooper?.let {
            try {
                Handler(it).post {
                    try {
                        seekTime(1L)
                    } catch (e: Exception) {
                        logError(e)
                    }
                }
            } catch (e: Exception) {
                logError(e)
            }
        }
    }

    fun initSubtitles(subView: SubtitleView?, subHolder: FrameLayout?, style: SaveCaptionStyle?) {
        subtitleHelper.initSubtitles(subView, subHolder, style)
    }

    override fun loadPlayer(
        context: Context,
        sameEpisode: Boolean,
        link: ExtractorLink?,
        data: ExtractorUri?,
        startPosition: Long?,
        subtitles: Set<SubtitleData>,
        subtitle: SubtitleData?
    ) {
        Log.i(TAG, "loadPlayer")
        if (sameEpisode) {
            saveData()
        } else {
            currentSubtitles = subtitle
            playbackPosition = 0
        }

        startPosition?.let {
            playbackPosition = it
        }

        // we want autoplay because of TV and UX
        isPlaying = true

        // release the current exoplayer and cache
        releasePlayer()
        if (link != null) {
            loadOnlinePlayer(context, link)
        } else if (data != null) {
            loadOfflinePlayer(context, data)
        }
    }

    override fun setActiveSubtitles(subtitles: Set<SubtitleData>) {
        Log.i(TAG, "setActiveSubtitles ${subtitles.size}")
        subtitleHelper.setAllSubtitles(subtitles)
    }

    var currentSubtitles: SubtitleData? = null
    override fun setPreferredSubtitles(subtitle: SubtitleData?): Boolean {
        Log.i(TAG, "setPreferredSubtitles init $subtitle")
        currentSubtitles = subtitle
        return (exoPlayer?.trackSelector as? DefaultTrackSelector?)?.let { trackSelector ->
            val name = subtitle?.name
            if (name.isNullOrBlank()) {
                trackSelector.setParameters(
                    trackSelector.buildUponParameters()
                        .setPreferredTextLanguage(null)
                )
            } else {
                when (subtitleHelper.subtitleStatus(subtitle)) {
                    SubtitleStatus.REQUIRES_RELOAD -> {
                        Log.i(TAG, "setPreferredSubtitles REQUIRES_RELOAD")
                        return@let true
                        // reloadPlayer(context)
                    }
                    SubtitleStatus.IS_ACTIVE -> {
                        Log.i(TAG, "setPreferredSubtitles IS_ACTIVE")

                        trackSelector.setParameters(
                            trackSelector.buildUponParameters()
                                .apply {
                                    if (subtitle.origin == SubtitleOrigin.EMBEDDED_IN_VIDEO)
                                    // The real Language (two letter) is in the url
                                    // No underscore as the .url is the actual exoplayer designated language
                                        setPreferredTextLanguage(subtitle.url)
                                    else
                                        setPreferredTextLanguage("_$name")
                                }
                        )

                        // ugliest code I have written, it seeks 1ms to *update* the subtitles
                        //exoPlayer?.applicationLooper?.let {
                        //    Handler(it).postDelayed({
                        //        seekTime(1L)
                        //    }, 1)
                        //}
                    }
                    SubtitleStatus.NOT_FOUND -> {
                        // not found
                        Log.i(TAG, "setPreferredSubtitles NOT_FOUND")
                        return@let true
                    }
                }
            }
            return false
        } ?: false
    }

    var currentSubtitleOffset: Long = 0

    override fun setSubtitleOffset(offset: Long) {
        currentSubtitleOffset = offset
        currentTextRenderer?.setRenderOffsetMs(offset)
    }

    override fun getSubtitleOffset(): Long {
        return currentSubtitleOffset //currentTextRenderer?.getRenderOffsetMs() ?: currentSubtitleOffset
    }

    override fun getCurrentPreferredSubtitle(): SubtitleData? {
        return subtitleHelper.getAllSubtitles().firstOrNull { sub ->
            exoPlayerSelectedTracks.any {
                // When embedded the real language is in .url as the real name is a two letter code
                val realName =
                    if (sub.origin == SubtitleOrigin.EMBEDDED_IN_VIDEO) sub.url else sub.name

                // The replace is needed as exoplayer translates _ to -
                // Also we prefix the languages with _
                it.second && it.first.replace("-", "").equals(
                    realName.replace("-", ""),
                    ignoreCase = true
                )
            }
        }
    }

    override fun updateSubtitleStyle(style: SaveCaptionStyle) {
        subtitleHelper.setSubStyle(style)
    }

    private fun saveData() {
        Log.i(TAG, "saveData")
        updatedTime()

        exoPlayer?.let { exo ->
            playbackPosition = exo.currentPosition
            currentWindow = exo.currentWindowIndex
            isPlaying = exo.isPlaying
        }
    }

    private fun releasePlayer(saveTime: Boolean = true) {
        Log.i(TAG, "releasePlayer")

        if (saveTime)
            updatedTime()

        exoPlayer?.release()
        //simpleCache?.release()
        currentTextRenderer = null

        exoPlayer = null
        //simpleCache = null
    }

    override fun onStop() {
        Log.i(TAG, "onStop")

        saveData()
        exoPlayer?.pause()
        releasePlayer()
    }

    override fun onPause() {
        Log.i(TAG, "onPause")
        saveData()
        exoPlayer?.pause()
        releasePlayer()
    }

    override fun onResume(context: Context) {
        if (exoPlayer == null)
            reloadPlayer(context)
    }

    override fun release() {
        releasePlayer()
    }

    override fun setPlaybackSpeed(speed: Float) {
        exoPlayer?.setPlaybackSpeed(speed)
        playBackSpeed = speed
    }

    companion object {
        private var simpleCache: SimpleCache? = null

        var requestSubtitleUpdate: (() -> Unit)? = null

        private fun createOnlineSource(link: ExtractorLink): DataSource.Factory {
            val provider = getApiFromName(link.source)
            val interceptor = provider.getVideoInterceptor(link)

            val source = if (interceptor == null) {
                DefaultHttpDataSource.Factory() //TODO USE app.baseClient
                    .setUserAgent(USER_AGENT)
                    .setAllowCrossProtocolRedirects(true)   //https://stackoverflow.com/questions/69040127/error-code-io-bad-http-status-exoplayer-android
            } else {
                val client = app.baseClient.newBuilder()
                    .addInterceptor(interceptor)
                    .build()
                OkHttpDataSource.Factory(client).setUserAgent(USER_AGENT)
            }

            val headers = mapOf(
                "referer" to link.referer,
                "accept" to "*/*",
                "sec-ch-ua" to "\"Chromium\";v=\"91\", \" Not;A Brand\";v=\"99\"",
                "sec-ch-ua-mobile" to "?0",
                "sec-fetch-user" to "?1",
                "sec-fetch-mode" to "navigate",
                "sec-fetch-dest" to "video"
            ) + link.headers // Adds the headers from the provider, e.g Authorization

            return source.apply {
                setDefaultRequestProperties(headers)
            }
        }

        private fun Context.createOfflineSource(): DataSource.Factory {
            return DefaultDataSourceFactory(this, USER_AGENT)
        }

        /*private fun getSubSources(
            onlineSourceFactory: DataSource.Factory?,
            offlineSourceFactory: DataSource.Factory?,
            subHelper: PlayerSubtitleHelper,
        ): Pair<List<SingleSampleMediaSource>, List<SubtitleData>> {
            val activeSubtitles = ArrayList<SubtitleData>()
            val subSources = subHelper.getAllSubtitles().mapNotNull { sub ->
                val subConfig = MediaItem.SubtitleConfiguration.Builder(Uri.parse(sub.url))
                    .setMimeType(sub.mimeType)
                    .setLanguage("_${sub.name}")
                    .setSelectionFlags(C.SELECTION_FLAG_DEFAULT)
                    .build()
                when (sub.origin) {
                    SubtitleOrigin.DOWNLOADED_FILE -> {
                        if (offlineSourceFactory != null) {
                            activeSubtitles.add(sub)
                            SingleSampleMediaSource.Factory(offlineSourceFactory)
                                .createMediaSource(subConfig, C.TIME_UNSET)
                        } else {
                            null
                        }
                    }
                    SubtitleOrigin.URL -> {
                        if (onlineSourceFactory != null) {
                            activeSubtitles.add(sub)
                            SingleSampleMediaSource.Factory(onlineSourceFactory)
                                .createMediaSource(subConfig, C.TIME_UNSET)
                        } else {
                            null
                        }
                    }
                    SubtitleOrigin.OPEN_SUBTITLES -> {
                        // TODO
                        throw NotImplementedError()
                    }
                }
            }
            println("SUBSRC: ${subSources.size} activeSubtitles : ${activeSubtitles.size} of ${subHelper.getAllSubtitles().size} ")
            return Pair(subSources, activeSubtitles)
        }*/

        private fun getCache(context: Context, cacheSize: Long): SimpleCache? {
            return try {
                val databaseProvider = StandaloneDatabaseProvider(context)
                SimpleCache(
                    File(
                        context.cacheDir, "exoplayer"
                    ).also { it.deleteOnExit() }, // Ensures always fresh file
                    LeastRecentlyUsedCacheEvictor(cacheSize),
                    databaseProvider
                )
            } catch (e: Exception) {
                logError(e)
                null
            }
        }

        private fun getMediaItemBuilder(mimeType: String):
                MediaItem.Builder {
            return MediaItem.Builder()
                //Replace needed for android 6.0.0  https://github.com/google/ExoPlayer/issues/5983
                .setMimeType(mimeType)
        }

        private fun getMediaItem(mimeType: String, uri: Uri): MediaItem {
            return getMediaItemBuilder(mimeType).setUri(uri).build()
        }

        private fun getMediaItem(mimeType: String, url: String): MediaItem {
            return getMediaItemBuilder(mimeType).setUri(url).build()
        }

        private fun getTrackSelector(context: Context): TrackSelector {
            val trackSelector = DefaultTrackSelector(context)
            trackSelector.parameters = DefaultTrackSelector.ParametersBuilder(context)
                // .setRendererDisabled(C.TRACK_TYPE_VIDEO, true)
                .setRendererDisabled(C.TRACK_TYPE_TEXT, true)
                .setDisabledTextTrackSelectionFlags(C.TRACK_TYPE_TEXT)
                .clearSelectionOverrides()
                .build()
            return trackSelector
        }

        var currentTextRenderer: CustomTextRenderer? = null

        private fun buildExoPlayer(
            context: Context,
            mediaItem: MediaItem,
            subSources: List<SingleSampleMediaSource>,
            currentWindow: Int,
            playbackPosition: Long,
            playBackSpeed: Float,
            subtitleOffset: Long,
            cacheSize: Long,
            videoBufferMs: Long,
            playWhenReady: Boolean = true,
            cacheFactory: CacheDataSource.Factory? = null,
            trackSelector: TrackSelector? = null,
        ): ExoPlayer {
            val exoPlayerBuilder =
                ExoPlayer.Builder(context)
                    .setRenderersFactory { eventHandler, videoRendererEventListener, audioRendererEventListener, textRendererOutput, metadataRendererOutput ->
                        DefaultRenderersFactory(context).createRenderers(
                            eventHandler,
                            videoRendererEventListener,
                            audioRendererEventListener,
                            textRendererOutput,
                            metadataRendererOutput
                        ).map {
                            if (it is TextRenderer) {
                                currentTextRenderer = CustomTextRenderer(
                                    subtitleOffset,
                                    textRendererOutput,
                                    eventHandler.looper,
                                    CustomSubtitleDecoderFactory()
                                )
                                currentTextRenderer!!
                            } else it
                        }.toTypedArray()
                    }
                    .setTrackSelector(trackSelector ?: getTrackSelector(context))
                    .setLoadControl(
                        DefaultLoadControl.Builder()
                            .setTargetBufferBytes(
                                if (cacheSize <= 0) {
                                    DefaultLoadControl.DEFAULT_TARGET_BUFFER_BYTES
                                } else {
                                    if (cacheSize > Int.MAX_VALUE) Int.MAX_VALUE else cacheSize.toInt()
                                }
                            )
                            .setBufferDurationsMs(
                                DefaultLoadControl.DEFAULT_MIN_BUFFER_MS,
                                if (videoBufferMs <= 0) {
                                    DefaultLoadControl.DEFAULT_MAX_BUFFER_MS
                                } else {
                                    videoBufferMs.toInt()
                                },
                                DefaultLoadControl.DEFAULT_BUFFER_FOR_PLAYBACK_MS,
                                DefaultLoadControl.DEFAULT_BUFFER_FOR_PLAYBACK_AFTER_REBUFFER_MS
                            ).build()
                    )

            val videoMediaSource =
                (if (cacheFactory == null) DefaultMediaSourceFactory(context) else DefaultMediaSourceFactory(
                    cacheFactory
                )).createMediaSource(
                    mediaItem
                )

            return exoPlayerBuilder.build().apply {
                setPlayWhenReady(playWhenReady)
                seekTo(currentWindow, playbackPosition)
                setMediaSource(
                    MergingMediaSource(
                        videoMediaSource, *subSources.toTypedArray()
                    ),
                    playbackPosition
                )
                setHandleAudioBecomingNoisy(true)
                setPlaybackSpeed(playBackSpeed)

            }
        }
    }

    fun updatedTime() {
        val position = exoPlayer?.currentPosition
        val duration = exoPlayer?.contentDuration
        if (duration != null && position != null) {
            playerPositionChanged?.invoke(Pair(position, duration))
        }
    }

    override fun seekTime(time: Long) {
        exoPlayer?.seekTime(time)
    }

    override fun seekTo(time: Long) {
        updatedTime()
        exoPlayer?.seekTo(time)
    }

    private fun ExoPlayer.seekTime(time: Long) {
        updatedTime()
        seekTo(currentPosition + time)
    }

    override fun handleEvent(event: CSPlayerEvent) {
        Log.i(TAG, "handleEvent ${event.name}")
        try {
            exoPlayer?.apply {
                when (event) {
                    CSPlayerEvent.Play -> {
                        play()
                    }
                    CSPlayerEvent.Pause -> {
                        pause()
                    }
                    CSPlayerEvent.ToggleMute -> {
                        if (volume <= 0) {
                            //is muted
                            volume = lastMuteVolume
                        } else {
                            // is not muted
                            lastMuteVolume = volume
                            volume = 0f
                        }
                    }
                    CSPlayerEvent.PlayPauseToggle -> {
                        if (isPlaying) {
                            pause()
                        } else {
                            play()
                        }
                    }
                    CSPlayerEvent.SeekForward -> seekTime(seekActionTime)
                    CSPlayerEvent.SeekBack -> seekTime(-seekActionTime)
                    CSPlayerEvent.NextEpisode -> nextEpisode?.invoke()
                    CSPlayerEvent.PrevEpisode -> prevEpisode?.invoke()
                }
            }
        } catch (e: Exception) {
            Log.e(TAG, "handleEvent error", e)
            playerError?.invoke(e)
        }
    }

    private fun loadExo(
        context: Context,
        mediaItem: MediaItem,
        subSources: List<SingleSampleMediaSource>,
        cacheFactory: CacheDataSource.Factory? = null
    ) {
        Log.i(TAG, "loadExo")
        try {
            hasUsedFirstRender = false

            // ye this has to be a val for whatever reason
            // this makes no sense
            exoPlayer = buildExoPlayer(
                context,
                mediaItem,
                subSources,
                currentWindow,
                playbackPosition,
                playBackSpeed,
                cacheSize = cacheSize,
                videoBufferMs = videoBufferMs,
                playWhenReady = isPlaying, // this keep the current state of the player
                cacheFactory = cacheFactory,
                subtitleOffset = currentSubtitleOffset
            )

            requestSubtitleUpdate = ::reloadSubs

            playerUpdated?.invoke(exoPlayer)
            exoPlayer?.prepare()

            exoPlayer?.let { exo ->
                updateIsPlaying?.invoke(
                    Pair(
                        CSPlayerLoading.IsBuffering,
                        CSPlayerLoading.IsBuffering
                    )
                )
                isPlaying = exo.isPlaying
            }
            exoPlayer?.addListener(object : Player.Listener {
                /**
                 * Records the current used subtitle/track. Needed as exoplayer seems to have loose track language selection.
                 * */
                override fun onTracksInfoChanged(tracksInfo: TracksInfo) {
                    fun Format.isSubtitle(): Boolean {
                        return this.sampleMimeType?.contains("video/") == false &&
                                this.sampleMimeType?.contains("audio/") == false
                    }

                    normalSafeApiCall {
                        exoPlayerSelectedTracks =
                            tracksInfo.trackGroupInfos.mapNotNull {
                                val format = it.trackGroup.getFormat(0)
                                if (format.isSubtitle())
                                    format.language?.let { lang -> lang to it.isSelected }
                                else null
                            }

                        val exoPlayerReportedTracks = tracksInfo.trackGroupInfos.mapNotNull {
                            // Filter out unsupported tracks
                            if (it.isSupported)
                                it.trackGroup.getFormat(0)
                            else
                                null
                        }.mapNotNull {
                            // Filter out non subs, already used subs and subs without languages
                            if (!it.isSubtitle() ||
                                // Anything starting with - is not embedded
                                it.language?.startsWith("-") == true ||
                                it.language == null
                            ) return@mapNotNull null
                            return@mapNotNull SubtitleData(
                                // Nicer looking displayed names
                                fromTwoLettersToLanguage(it.language!!) ?: it.language!!,
                                // See setPreferredTextLanguage
                                it.language!!,
                                SubtitleOrigin.EMBEDDED_IN_VIDEO,
                                it.sampleMimeType ?: MimeTypes.APPLICATION_SUBRIP
                            )
                        }

                        embeddedSubtitlesFetched?.invoke(exoPlayerReportedTracks)
                        subtitlesUpdates?.invoke()
                    }
                    super.onTracksInfoChanged(tracksInfo)
                }

                override fun onPlayerStateChanged(playWhenReady: Boolean, playbackState: Int) {
                    exoPlayer?.let { exo ->
                        updateIsPlaying?.invoke(
                            Pair(
                                if (isPlaying) CSPlayerLoading.IsPlaying else CSPlayerLoading.IsPaused,
                                if (playbackState == Player.STATE_BUFFERING) CSPlayerLoading.IsBuffering else if (exo.isPlaying) CSPlayerLoading.IsPlaying else CSPlayerLoading.IsPaused
                            )
                        )
                        isPlaying = exo.isPlaying
                    }

                    if (playWhenReady) {
                        when (playbackState) {
                            Player.STATE_READY -> {
                                requestAutoFocus?.invoke()
                            }
                            Player.STATE_ENDED -> {
                                handleEvent(CSPlayerEvent.NextEpisode)
                            }
                            Player.STATE_BUFFERING -> {
                                updatedTime()
                            }
                            Player.STATE_IDLE -> {
                                // IDLE
                            }
                            else -> Unit
                        }
                    }
                }

                override fun onPlayerError(error: PlaybackException) {
                    playerError?.invoke(error)

                    super.onPlayerError(error)
                }

                //override fun onCues(cues: MutableList<Cue>) {
                //    super.onCues(cues.map { cue -> cue.buildUpon().setText("Hello world").setSize(Cue.DIMEN_UNSET).build() })
                //}

                override fun onRenderedFirstFrame() {
                    updatedTime()

                    if (!hasUsedFirstRender) { // this insures that we only call this once per player load
                        Log.i(TAG, "Rendered first frame")

                        val invalid = exoPlayer?.duration?.let { duration ->
                            // Only errors short playback when not playing downloaded files
                            duration < 20_000L && currentDownloadedFile == null
                        } ?: false
                        if (invalid) {
                            releasePlayer(saveTime = false)
                            playerError?.invoke(InvalidFileException("Too short playback"))
                            return
                        }

                        setPreferredSubtitles(currentSubtitles)
                        hasUsedFirstRender = true
                        val format = exoPlayer?.videoFormat
                        val width = format?.width
                        val height = format?.height
                        if (height != null && width != null) {
                            playerDimensionsLoaded?.invoke(Pair(width, height))
                            updatedTime()
                            exoPlayer?.apply {
                                requestedListeningPercentages?.forEach { percentage ->
                                    createMessage { _, _ ->
                                        updatedTime()
                                    }
                                        .setLooper(Looper.getMainLooper())
                                        .setPosition( /* positionMs= */contentDuration * percentage / 100)
                                        //   .setPayload(customPayloadData)
                                        .setDeleteAfterDelivery(false)
                                        .send()
                                }
                            }
                        }
                    }
                    super.onRenderedFirstFrame()
                }
            })
        } catch (e: Exception) {
            Log.e(TAG, "loadExo error", e)
            playerError?.invoke(e)
        }
    }

    private fun loadOfflinePlayer(context: Context, data: ExtractorUri) {
        Log.i(TAG, "loadOfflinePlayer")
        try {
            currentDownloadedFile = data

            val mediaItem = getMediaItem(MimeTypes.VIDEO_MP4, data.uri)
            val offlineSourceFactory = context.createOfflineSource()

            val (subSources, activeSubtitles) = getSubSources(
                onlineSourceFactory = offlineSourceFactory,
                offlineSourceFactory = offlineSourceFactory,
                subtitleHelper,
            )

            subtitleHelper.setActiveSubtitles(activeSubtitles.toSet())
            loadExo(context, mediaItem, subSources)
        } catch (e: Exception) {
            Log.e(TAG, "loadOfflinePlayer error", e)
            playerError?.invoke(e)
        }
    }

    private fun getSubSources(
        onlineSourceFactory: DataSource.Factory?,
        offlineSourceFactory: DataSource.Factory?,
        subHelper: PlayerSubtitleHelper,
    ): Pair<List<SingleSampleMediaSource>, List<SubtitleData>> {
        val activeSubtitles = ArrayList<SubtitleData>()
        val subSources = subHelper.getAllSubtitles().mapNotNull { sub ->
            val subConfig = MediaItem.SubtitleConfiguration.Builder(Uri.parse(sub.url))
                .setMimeType(sub.mimeType)
                .setLanguage("_${sub.name}")
                .setSelectionFlags(C.SELECTION_FLAG_DEFAULT)
                .build()
            when (sub.origin) {
                SubtitleOrigin.DOWNLOADED_FILE -> {
                    if (offlineSourceFactory != null) {
                        activeSubtitles.add(sub)
                        SingleSampleMediaSource.Factory(offlineSourceFactory)
                            .createMediaSource(subConfig, C.TIME_UNSET)
                    } else {
                        null
                    }
                }
                SubtitleOrigin.URL -> {
                    if (onlineSourceFactory != null) {
                        activeSubtitles.add(sub)
                        SingleSampleMediaSource.Factory(onlineSourceFactory)
                            .createMediaSource(subConfig, C.TIME_UNSET)
                    } else {
                        null
                    }
                }
                SubtitleOrigin.OPEN_SUBTITLES -> {
                    // TODO
                    throw NotImplementedError()
                }
                SubtitleOrigin.EMBEDDED_IN_VIDEO -> {
                    if (offlineSourceFactory != null) {
                        activeSubtitles.add(sub)
                        SingleSampleMediaSource.Factory(offlineSourceFactory)
                            .createMediaSource(subConfig, C.TIME_UNSET)
                    } else {
                        null
                    }
                }
            }
        }
        return Pair(subSources, activeSubtitles)
    }

    private fun loadOnlinePlayer(context: Context, link: ExtractorLink) {
        Log.i(TAG, "loadOnlinePlayer")
        try {
            currentLink = link

            if (ignoreSSL) {
                // Disables ssl check
                val sslContext: SSLContext = SSLContext.getInstance("TLS")
                sslContext.init(null, arrayOf(SSLTrustManager()), java.security.SecureRandom())
                sslContext.createSSLEngine()
                HttpsURLConnection.setDefaultHostnameVerifier { _: String, _: SSLSession ->
                    true
                }
                HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.socketFactory)
            }

            val mime = if (link.isM3u8) {
                MimeTypes.APPLICATION_M3U8
            } else {
                MimeTypes.VIDEO_MP4
            }
            val mediaItem = getMediaItem(mime, link.url)

            val onlineSourceFactory = createOnlineSource(link)
            val offlineSourceFactory = context.createOfflineSource()

            val (subSources, activeSubtitles) = getSubSources(
                onlineSourceFactory = onlineSourceFactory,
                offlineSourceFactory = offlineSourceFactory,
                subtitleHelper
            )

            subtitleHelper.setActiveSubtitles(activeSubtitles.toSet())

            if (simpleCache == null)
                simpleCache = getCache(context, simpleCacheSize)

            val cacheFactory = CacheDataSource.Factory().apply {
                simpleCache?.let { setCache(it) }
                setUpstreamDataSourceFactory(onlineSourceFactory)
            }

            loadExo(context, mediaItem, subSources, cacheFactory)
        } catch (e: Exception) {
            Log.e(TAG, "loadOnlinePlayer error", e)
            playerError?.invoke(e)
        }
    }

    override fun reloadPlayer(context: Context) {
        Log.i(TAG, "reloadPlayer")

        exoPlayer?.release()
        currentLink?.let {
            loadOnlinePlayer(context, it)
        } ?: currentDownloadedFile?.let {
            loadOfflinePlayer(context, it)
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/CustomSubtitleDecoderFactory.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.util.Log
import com.google.android.exoplayer2.Format
import com.google.android.exoplayer2.text.SubtitleDecoder
import com.google.android.exoplayer2.text.SubtitleDecoderFactory
import com.google.android.exoplayer2.text.SubtitleInputBuffer
import com.google.android.exoplayer2.text.SubtitleOutputBuffer
import com.google.android.exoplayer2.text.ssa.SsaDecoder
import com.google.android.exoplayer2.text.subrip.SubripDecoder
import com.google.android.exoplayer2.text.ttml.TtmlDecoder
import com.google.android.exoplayer2.text.webvtt.WebvttDecoder
import com.google.android.exoplayer2.util.MimeTypes
import com.lagradost.cloudstream3.mvvm.logError
import java.nio.ByteBuffer


class CustomDecoder : SubtitleDecoder {
    companion object {
        private const val TAG = "CustomDecoder"
        var regexSubtitlesToRemoveCaptions = false
        val bloatRegex =
            listOf(
                Regex(
                    """Support\s+us\s+and\s+become\s+VIP\s+member\s+to\s+remove\s+all\s+ads\s+from\s+(www\.|)OpenSubtitles(\.org|)""",
                    RegexOption.IGNORE_CASE
                ),
                Regex(
                    """Please\s+rate\s+this\s+subtitle\s+at\s+.*\s+Help\s+other\s+users\s+to\s+choose\s+the\s+best\s+subtitles""",
                    RegexOption.IGNORE_CASE
                ),
                Regex(
                    """Contact\s(www\.|)OpenSubtitles(\.org|)\s+today""",
                    RegexOption.IGNORE_CASE
                ),
                Regex(
                    """Advertise\s+your\s+product\s+or\s+brand\s+here""",
                    RegexOption.IGNORE_CASE
                ),
            )
        val captionRegex = listOf(Regex("""(-\s?|)[\[({][\w\d\s]*?[])}]\s*"""))

        fun trimStr(string: String): String {
            return string.trimStart().trim('\uFEFF', '\u200B').replace(
                Regex("[\u00A0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u205F]"),
                " "
            )
        }
    }

    private var realDecoder: SubtitleDecoder? = null

    override fun getName(): String {
        return realDecoder?.name ?: this::class.java.name
    }

    override fun dequeueInputBuffer(): SubtitleInputBuffer {
        Log.i(TAG, "dequeueInputBuffer")
        return realDecoder?.dequeueInputBuffer() ?: SubtitleInputBuffer()
    }

    override fun queueInputBuffer(inputBuffer: SubtitleInputBuffer) {
        Log.i(TAG, "queueInputBuffer")
        try {
            if (realDecoder == null) {
                inputBuffer.data?.let { data ->
                    // this way we read the subtitle file and decide what decoder to use instead of relying on mimetype

                    val pos = data.position()
                    data.position(0)
                    val arr = ByteArray(minOf(data.remaining(), 100))
                    data.get(arr)
                    data.position(pos)

                    //https://emptycharacter.com/
                    //https://www.fileformat.info/info/unicode/char/200b/index.htm
                    val str = trimStr(arr.decodeToString())
                    Log.i(TAG, "Got data from queueInputBuffer")
                    Log.i(TAG, "first string is >>>$str<<<")
                    if (str.isNotEmpty()) {
                        //https://github.com/LagradOst/CloudStream-2/blob/ddd774ee66810137ff7bd65dae70bcf3ba2d2489/CloudStreamForms/CloudStreamForms/Script/MainChrome.cs#L388
                        realDecoder = when {
                            str.startsWith("WEBVTT", ignoreCase = true) -> WebvttDecoder()
                            str.startsWith("<?xml version=\"", ignoreCase = true) -> TtmlDecoder()
                            (str.startsWith(
                                "[Script Info]",
                                ignoreCase = true
                            ) || str.startsWith("Title:", ignoreCase = true)) -> SsaDecoder()
                            str.startsWith("1", ignoreCase = true) -> SubripDecoder()
                            else -> null
                        }
                        Log.i(
                            TAG,
                            "Decoder selected: $realDecoder"
                        )
                        val decoder = realDecoder
                        if (decoder != null) {
                            decoder.dequeueInputBuffer()?.let { buff ->
                                if (regexSubtitlesToRemoveCaptions && decoder::class.java != SsaDecoder::class.java) {
                                    try {
                                        data.position(0)
                                        val fullDataArr = ByteArray(data.remaining())
                                        data.get(fullDataArr)
                                        var fullStr = trimStr(fullDataArr.decodeToString())

                                        bloatRegex.forEach { rgx ->
                                            fullStr = fullStr.replace(rgx, "\n")
                                        }
                                        captionRegex.forEach { rgx ->
                                            fullStr = fullStr.replace(rgx, "\n")
                                        }
                                        fullStr.replace(Regex("(\r\n|\r|\n){2,}"), "\n")

                                        buff.data = ByteBuffer.wrap(fullStr.toByteArray())
                                    } catch (e: Exception) {
                                        data.position(pos)
                                        buff.data = data
                                    }
                                } else {
                                    buff.data = data
                                }
                                decoder.queueInputBuffer(buff)
                            }
                            CS3IPlayer.requestSubtitleUpdate?.invoke()
                        }
                    }
                }
            } else {
                realDecoder?.queueInputBuffer(inputBuffer)
            }
        } catch (e: Exception) {
            logError(e)
        }
    }

    override fun dequeueOutputBuffer(): SubtitleOutputBuffer? {
        return realDecoder?.dequeueOutputBuffer()
    }

    override fun flush() {
        realDecoder?.flush()
    }

    override fun release() {
        realDecoder?.release()
    }

    override fun setPositionUs(positionUs: Long) {
        realDecoder?.setPositionUs(positionUs)
    }
}

/** See https://github.com/google/ExoPlayer/blob/release-v2/library/core/src/main/java/com/google/android/exoplayer2/text/SubtitleDecoderFactory.java */
class CustomSubtitleDecoderFactory : SubtitleDecoderFactory {
    override fun supportsFormat(format: Format): Boolean {
//        return SubtitleDecoderFactory.DEFAULT.supportsFormat(format)
        return listOf(
            MimeTypes.TEXT_VTT,
            MimeTypes.TEXT_SSA,
            MimeTypes.APPLICATION_TTML,
            MimeTypes.APPLICATION_MP4VTT,
            MimeTypes.APPLICATION_SUBRIP,
            //MimeTypes.APPLICATION_TX3G,
            //MimeTypes.APPLICATION_CEA608,
            //MimeTypes.APPLICATION_MP4CEA608,
            //MimeTypes.APPLICATION_CEA708,
            //MimeTypes.APPLICATION_DVBSUBS,
            //MimeTypes.APPLICATION_PGS,
            //MimeTypes.TEXT_EXOPLAYER_CUES
        ).contains(format.sampleMimeType)
    }

    override fun createDecoder(format: Format): SubtitleDecoder {
        return CustomDecoder()
        //return when (val mimeType = format.sampleMimeType) {
        //    MimeTypes.TEXT_VTT -> WebvttDecoder()
        //    MimeTypes.TEXT_SSA -> SsaDecoder(format.initializationData)
        //    MimeTypes.APPLICATION_MP4VTT -> Mp4WebvttDecoder()
        //    MimeTypes.APPLICATION_TTML -> TtmlDecoder()
        //    MimeTypes.APPLICATION_SUBRIP -> SubripDecoder()
        //    MimeTypes.APPLICATION_TX3G -> Tx3gDecoder(format.initializationData)
        //    MimeTypes.APPLICATION_CEA608, MimeTypes.APPLICATION_MP4CEA608 -> return Cea608Decoder(
        //        mimeType,
        //        format.accessibilityChannel,
        //        Cea608Decoder.MIN_DATA_CHANNEL_TIMEOUT_MS
        //    )
        //    MimeTypes.APPLICATION_CEA708 -> Cea708Decoder(
        //        format.accessibilityChannel,
        //        format.initializationData
        //    )
        //    MimeTypes.APPLICATION_DVBSUBS -> DvbDecoder(format.initializationData)
        //    MimeTypes.APPLICATION_PGS -> PgsDecoder()
        //    MimeTypes.TEXT_EXOPLAYER_CUES -> ExoplayerCuesDecoder()
        //    // Default WebVttDecoder
        //    else -> WebvttDecoder()
        //}
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/CustomTextRenderer.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.os.Looper
import com.google.android.exoplayer2.text.SubtitleDecoderFactory
import com.google.android.exoplayer2.text.TextOutput

class CustomTextRenderer(
    offset: Long,
    output: TextOutput?,
    outputLooper: Looper?,
    decoderFactory: SubtitleDecoderFactory = SubtitleDecoderFactory.DEFAULT
) : NonFinalTextRenderer(output, outputLooper, decoderFactory) {
    private var offsetPositionUs: Long = 0L

    init {
        setRenderOffsetMs(offset)
    }

    fun setRenderOffsetMs(offset : Long) {
        offsetPositionUs = offset * 1000L
    }

    fun getRenderOffsetMs() : Long {
        return offsetPositionUs / 1000L
    }

    override fun render( positionUs: Long,  elapsedRealtimeUs: Long) {
        super.render(positionUs + offsetPositionUs, elapsedRealtimeUs + offsetPositionUs)
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/DownloadedPlayerActivity.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.os.Bundle
import android.util.Log
import android.view.KeyEvent
import androidx.appcompat.app.AppCompatActivity
import com.hippo.unifile.UniFile
import com.lagradost.cloudstream3.CommonActivity
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.utils.ExtractorUri
import com.lagradost.cloudstream3.utils.UIHelper.navigate

const val DTAG = "PlayerActivity"

class DownloadedPlayerActivity : AppCompatActivity() {
    override fun dispatchKeyEvent(event: KeyEvent?): Boolean {
        CommonActivity.dispatchKeyEvent(this, event)?.let {
            return it
        }
        return super.dispatchKeyEvent(event)
    }

    override fun onKeyDown(keyCode: Int, event: KeyEvent?): Boolean {
        CommonActivity.onKeyDown(this, keyCode, event)

        return super.onKeyDown(keyCode, event)
    }

    override fun onUserLeaveHint() {
        super.onUserLeaveHint()
        CommonActivity.onUserLeaveHint(this)
    }

    override fun onBackPressed() {
        finish()
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        Log.i(DTAG, "onCreate")

        CommonActivity.loadThemes(this)
        super.onCreate(savedInstanceState)
        CommonActivity.init(this)

        setContentView(R.layout.empty_layout)

        val data = intent.data
        if (data == null) {
            finish()
            return
        }

        if (data.scheme == "content") {
            val name = UniFile.fromUri(this, data).name
            this.navigate(
                R.id.global_to_navigation_player, GeneratorPlayer.newInstance(
                    DownloadFileGenerator(
                        listOf(
                            ExtractorUri(
                                uri = data,
                                name = name ?: getString(R.string.downloaded_file)
                            )
                        )
                    )
                )
            )
        }

        // Legacy code, seems to work perfectly fine without it

//        } else {
//            val uri = getUri(intent.data)
//            if (uri == null) {
//                finish()
//                return
//            }
//            val path = uri.path
//            // Because it doesn't get the path when it's downloaded, I have no idea
//            val realPath = if (File(
//                    intent.data?.path?.removePrefix("/file") ?: "NONE"
//                ).exists()
//            ) intent.data?.path?.removePrefix("/file") else path
//
//            if (realPath == null) {
//                finish()
//                return
//            }
//
//            val name = try {
//                File(realPath).name
//            } catch (e: Exception) {
//                "NULL"
//            }
//
//            val tryUri = try {
//                AppUtils.getVideoContentUri(this, realPath) ?: uri
//            } catch (e: Exception) {
//                logError(e)
//                uri
//            }
//
//            setContentView(R.layout.empty_layout)
//            Log.i(DTAG, "navigating")
//
//            //TODO add relative path for subs
//            this.navigate(
//                R.id.global_to_navigation_player, GeneratorPlayer.newInstance(
//                    DownloadFileGenerator(listOf(ExtractorUri(uri = tryUri, name = name)))
//                )
//            )
//        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/DownloadFileGenerator.kt
================================================
package com.lagradost.cloudstream3.ui.player

import com.lagradost.cloudstream3.AcraApplication.Companion.context
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ui.player.PlayerSubtitleHelper.Companion.toSubtitleMimeType
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.ExtractorUri
import com.lagradost.cloudstream3.utils.VideoDownloadManager
import kotlin.math.max
import kotlin.math.min

class DownloadFileGenerator(
    private val episodes: List<ExtractorUri>,
    private var currentIndex: Int = 0
) : IGenerator {
    override val hasCache = false

    override fun hasNext(): Boolean {
        return currentIndex < episodes.size - 1
    }

    override fun hasPrev(): Boolean {
        return currentIndex > 0
    }

    override fun next() {
        if (hasNext())
            currentIndex++
    }

    override fun prev() {
        if (hasPrev())
            currentIndex--
    }

    override fun goto(index: Int) {
        // clamps value
        currentIndex = min(episodes.size - 1, max(0, index))
    }

    override fun getCurrentId(): Int? {
        return episodes[currentIndex].id
    }

    override fun getCurrent(offset: Int): Any? {
        return episodes.getOrNull(currentIndex + offset)
    }

    override suspend fun generateLinks(
        clearCache: Boolean,
        isCasting: Boolean,
        callback: (Pair<ExtractorLink?, ExtractorUri?>) -> Unit,
        subtitleCallback: (SubtitleData) -> Unit,
        offset: Int,
    ): Boolean {
        val meta = episodes[currentIndex + offset]
        callback(Pair(null, meta))

        context?.let { ctx ->
            val relative = meta.relativePath
            val display = meta.displayName

            if (display == null || relative == null) {
                return@let
            }
            VideoDownloadManager.getFolder(ctx, relative, meta.basePath)
                ?.forEach { file ->
                    val name = display.removeSuffix(".mp4")
                    if (file.first != meta.displayName && file.first.startsWith(name)) {
                        val realName = file.first.removePrefix(name)
                            .removeSuffix(".vtt")
                            .removeSuffix(".srt")
                            .removeSuffix(".txt")
                            .trim()
                            .removePrefix("(")
                            .removeSuffix(")")

                        subtitleCallback(
                            SubtitleData(
                                realName.ifBlank { ctx.getString(R.string.default_subtitles) },
                                file.second.toString(),
                                SubtitleOrigin.DOWNLOADED_FILE,
                                name.toSubtitleMimeType()
                            )
                        )
                    }
                }
        }

        return true
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/FullScreenPlayer.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.animation.ObjectAnimator
import android.annotation.SuppressLint
import android.content.Context
import android.content.pm.ActivityInfo
import android.content.res.ColorStateList
import android.content.res.Resources
import android.graphics.Color
import android.media.AudioManager
import android.os.Build
import android.os.Bundle
import android.provider.Settings
import android.text.Editable
import android.util.DisplayMetrics
import android.view.KeyEvent
import android.view.MotionEvent
import android.view.View
import android.view.WindowManager
import android.view.WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES
import android.view.animation.AlphaAnimation
import android.view.animation.Animation
import android.view.animation.AnimationUtils
import android.widget.EditText
import android.widget.ImageView
import android.widget.TextView
import androidx.appcompat.app.AlertDialog
import androidx.core.graphics.blue
import androidx.core.graphics.green
import androidx.core.graphics.red
import androidx.core.view.isGone
import androidx.core.view.isVisible
import androidx.core.widget.doOnTextChanged
import androidx.preference.PreferenceManager
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.CommonActivity.keyEventListener
import com.lagradost.cloudstream3.CommonActivity.playerEventListener
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showDialog
import com.lagradost.cloudstream3.utils.UIHelper.colorFromAttribute
import com.lagradost.cloudstream3.utils.UIHelper.dismissSafe
import com.lagradost.cloudstream3.utils.UIHelper.getNavigationBarHeight
import com.lagradost.cloudstream3.utils.UIHelper.getStatusBarHeight
import com.lagradost.cloudstream3.utils.UIHelper.hideSystemUI
import com.lagradost.cloudstream3.utils.UIHelper.popCurrentPage
import com.lagradost.cloudstream3.utils.UIHelper.showSystemUI
import com.lagradost.cloudstream3.utils.UIHelper.toPx
import com.lagradost.cloudstream3.utils.Vector2
import kotlinx.android.synthetic.main.player_custom_layout.*
import kotlin.math.*

const val MINIMUM_SEEK_TIME = 7000L         // when swipe seeking
const val MINIMUM_VERTICAL_SWIPE = 2.0f     // in percentage
const val MINIMUM_HORIZONTAL_SWIPE = 2.0f   // in percentage
const val VERTICAL_MULTIPLIER = 2.0f
const val HORIZONTAL_MULTIPLIER = 2.0f
const val DOUBLE_TAB_MAXIMUM_HOLD_TIME = 200L
const val DOUBLE_TAB_MINIMUM_TIME_BETWEEN = 200L    // this also affects the UI show response time
const val DOUBLE_TAB_PAUSE_PERCENTAGE = 0.15        // in both directions

// All the UI Logic for the player
open class FullScreenPlayer : AbstractPlayerFragment() {
    // state of player UI
    protected var isShowing = false
    protected var isLocked = false

    // options for player
    protected var currentPrefQuality =
        Qualities.P2160.value // preferred maximum quality, used for ppl w bad internet or on cell
    protected var fastForwardTime = 10000L
    protected var swipeHorizontalEnabled = false
    protected var swipeVerticalEnabled = false
    protected var playBackSpeedEnabled = false
    protected var playerResizeEnabled = false
    protected var doubleTapEnabled = false
    protected var doubleTapPauseEnabled = true

    protected var subtitleDelay
        set(value) = try {
            player.setSubtitleOffset(-value)
        } catch (e: Exception) {
            logError(e)
        }
        get() = try {
            -player.getSubtitleOffset()
        } catch (e: Exception) {
            logError(e)
            0L
        }

    //private var useSystemBrightness = false
    protected var useTrueSystemBrightness = true
    private val fullscreenNotch = true //TODO SETTING

    protected val displayMetrics: DisplayMetrics = Resources.getSystem().displayMetrics

    // screenWidth and screenHeight does always
    // refer to the screen while in landscape mode
    private val screenWidth: Int
        get() {
            return max(displayMetrics.widthPixels, displayMetrics.heightPixels)
        }
    private val screenHeight: Int
        get() {
            return min(displayMetrics.widthPixels, displayMetrics.heightPixels)
        }

    private var statusBarHeight: Int? = null
    private var navigationBarHeight: Int? = null

    private val brightnessIcons = listOf(
        R.drawable.sun_1,
        R.drawable.sun_2,
        R.drawable.sun_3,
        R.drawable.sun_4,
        R.drawable.sun_5,
        R.drawable.sun_6,
        //R.drawable.sun_7,
        // R.drawable.ic_baseline_brightness_1_24,
        // R.drawable.ic_baseline_brightness_2_24,
        // R.drawable.ic_baseline_brightness_3_24,
        // R.drawable.ic_baseline_brightness_4_24,
        // R.drawable.ic_baseline_brightness_5_24,
        // R.drawable.ic_baseline_brightness_6_24,
        // R.drawable.ic_baseline_brightness_7_24,
    )

    private val volumeIcons = listOf(
        R.drawable.ic_baseline_volume_mute_24,
        R.drawable.ic_baseline_volume_down_24,
        R.drawable.ic_baseline_volume_up_24,
    )

    open fun showMirrorsDialogue() {
        throw NotImplementedError()
    }

    /** Returns false if the touch is on the status bar or navigation bar*/
    private fun isValidTouch(rawX: Float, rawY: Float): Boolean {
        val statusHeight = statusBarHeight ?: 0
        // val navHeight = navigationBarHeight ?: 0
        // nav height is removed because screenWidth already takes into account that
        return rawY > statusHeight && rawX < screenWidth //- navHeight
    }

    override fun exitedPipMode() {
        animateLayoutChanges()
    }

    private fun animateLayoutChanges() {
        if (isShowing) {
            updateUIVisibility()
        } else {
            player_holder?.postDelayed({ updateUIVisibility() }, 200)
        }

        val titleMove = if (isShowing) 0f else -50.toPx.toFloat()
        player_video_title?.let {
            ObjectAnimator.ofFloat(it, "translationY", titleMove).apply {
                duration = 200
                start()
            }
        }
        player_video_title_rez?.let {
            ObjectAnimator.ofFloat(it, "translationY", titleMove).apply {
                duration = 200
                start()
            }
        }
        val playerBarMove = if (isShowing) 0f else 50.toPx.toFloat()
        bottom_player_bar?.let {
            ObjectAnimator.ofFloat(it, "translationY", playerBarMove).apply {
                duration = 200
                start()
            }
        }

        val fadeTo = if (isShowing) 1f else 0f
        val fadeAnimation = AlphaAnimation(1f - fadeTo, fadeTo)

        fadeAnimation.duration = 100
        fadeAnimation.fillAfter = true

        val sView = subView
        val sStyle = subStyle
        if (sView != null && sStyle != null) {
            val move = if (isShowing) -((bottom_player_bar?.height?.toFloat()
                ?: 0f) + 40.toPx) else -sStyle.elevation.toPx.toFloat()
            ObjectAnimator.ofFloat(sView, "translationY", move).apply {
                duration = 200
                start()
            }
        }

        if (!isLocked) {
            player_ffwd_holder?.alpha = 1f
            player_rew_holder?.alpha = 1f
            // player_pause_play_holder?.alpha = 1f

            shadow_overlay?.startAnimation(fadeAnimation)
            player_ffwd_holder?.startAnimation(fadeAnimation)
            player_rew_holder?.startAnimation(fadeAnimation)
            player_pause_play?.startAnimation(fadeAnimation)

            /*if (isBuffering) {
                    player_pause_play?.isVisible = false
                    player_pause_play_holder?.isVisible = false
                } else {
                    player_pause_play?.isVisible = true
                    player_pause_play_holder?.startAnimation(fadeAnimation)
                    player_pause_play?.startAnimation(fadeAnimation)
                }*/
            //player_buffering?.startAnimation(fadeAnimation)
        }

        bottom_player_bar?.startAnimation(fadeAnimation)
        player_top_holder?.startAnimation(fadeAnimation)
    }

    override fun subtitlesChanged() {
        player_subtitle_offset_btt?.isGone = player.getCurrentPreferredSubtitle() == null
    }

    override fun onResume() {
        activity?.hideSystemUI()
        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P && fullscreenNotch) {
            val params = activity?.window?.attributes
            params?.layoutInDisplayCutoutMode = LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES
            activity?.window?.attributes = params
        }

        super.onResume()
    }

    override fun onDestroy() {
        activity?.showSystemUI()
        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_USER

        // simply resets brightness and notch settings that might have been overridden
        val lp = activity?.window?.attributes
        lp?.screenBrightness = WindowManager.LayoutParams.BRIGHTNESS_OVERRIDE_NONE
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
            lp?.layoutInDisplayCutoutMode =
                WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_DEFAULT
        }
        activity?.window?.attributes = lp
        super.onDestroy()
    }

    private fun setPlayBackSpeed(speed: Float) {
        try {
            setKey(PLAYBACK_SPEED_KEY, speed)
            player_speed_btt?.text =
                getString(R.string.player_speed_text_format).format(speed)
                    .replace(".0x", "x")
        } catch (e: Exception) {
            // the format string was wrong
            logError(e)
        }

        player.setPlaybackSpeed(speed)
    }

    private fun skipOp() {
        player.seekTime(85000) // skip 85s
    }

    private fun showSubtitleOffsetDialog() {
        context?.let { ctx ->
            val builder =
                AlertDialog.Builder(ctx, R.style.AlertDialogCustom)
                    .setView(R.layout.subtitle_offset)
            val dialog = builder.create()
            dialog.show()

            val beforeOffset = subtitleDelay

            val applyButton = dialog.findViewById<TextView>(R.id.apply_btt)!!
            val cancelButton = dialog.findViewById<TextView>(R.id.cancel_btt)!!
            val input = dialog.findViewById<EditText>(R.id.subtitle_offset_input)!!
            val sub = dialog.findViewById<ImageView>(R.id.subtitle_offset_subtract)!!
            val add = dialog.findViewById<ImageView>(R.id.subtitle_offset_add)!!
            val subTitle = dialog.findViewById<TextView>(R.id.subtitle_offset_sub_title)!!

            input.doOnTextChanged { text, _, _, _ ->
                text?.toString()?.toLongOrNull()?.let {
                    subtitleDelay = it
                    when {
                        it > 0L -> {
                            context?.getString(R.string.subtitle_offset_extra_hint_later_format)
                                ?.format(it)
                        }
                        it < 0L -> {
                            context?.getString(R.string.subtitle_offset_extra_hint_before_format)
                                ?.format(-it)
                        }
                        it == 0L -> {
                            context?.getString(R.string.subtitle_offset_extra_hint_none_format)
                        }
                        else -> {
                            null
                        }
                    }?.let { str ->
                        subTitle.text = str
                    }
                }
            }
            input.text = Editable.Factory.getInstance()?.newEditable(beforeOffset.toString())

            val buttonChange = 100L

            fun changeBy(by: Long) {
                val current = (input.text?.toString()?.toLongOrNull() ?: 0) + by
                input.text = Editable.Factory.getInstance()?.newEditable(current.toString())
            }

            add.setOnClickListener {
                changeBy(buttonChange)
            }

            sub.setOnClickListener {
                changeBy(-buttonChange)
            }

            dialog.setOnDismissListener {
                activity?.hideSystemUI()
            }
            applyButton.setOnClickListener {
                dialog.dismissSafe(activity)
                player.seekTime(1L)
            }
            cancelButton.setOnClickListener {
                subtitleDelay = beforeOffset
                dialog.dismissSafe(activity)
            }
        }
    }

    private fun showSpeedDialog() {
        val speedsText =
            listOf(
                "0.5x",
                "0.75x",
                "0.85x",
                "1x",
                "1.15x",
                "1.25x",
                "1.4x",
                "1.5x",
                "1.75x",
                "2x"
            )
        val speedsNumbers =
            listOf(0.5f, 0.75f, 0.85f, 1f, 1.15f, 1.25f, 1.4f, 1.5f, 1.75f, 2f)
        val speedIndex = speedsNumbers.indexOf(player.getPlaybackSpeed())

        activity?.let { act ->
            act.showDialog(
                speedsText,
                speedIndex,
                act.getString(R.string.player_speed),
                false,
                {
                    activity?.hideSystemUI()
                }) { index ->
                activity?.hideSystemUI()
                setPlayBackSpeed(speedsNumbers[index])
            }
        }
    }

    fun resetRewindText() {
        exo_rew_text?.text =
            getString(R.string.rew_text_regular_format).format(fastForwardTime / 1000)
    }

    fun resetFastForwardText() {
        exo_ffwd_text?.text =
            getString(R.string.ffw_text_regular_format).format(fastForwardTime / 1000)
    }

    private fun rewind() {
        try {
            player_center_menu?.isGone = false
            player_rew_holder?.alpha = 1f

            val rotateLeft = AnimationUtils.loadAnimation(context, R.anim.rotate_left)
            exo_rew?.startAnimation(rotateLeft)

            val goLeft = AnimationUtils.loadAnimation(context, R.anim.go_left)
            goLeft.setAnimationListener(object : Animation.AnimationListener {
                override fun onAnimationStart(animation: Animation?) {}

                override fun onAnimationRepeat(animation: Animation?) {}

                override fun onAnimationEnd(animation: Animation?) {
                    exo_rew_text?.post {
                        resetRewindText()
                        player_center_menu?.isGone = !isShowing
                        player_rew_holder?.alpha = if (isShowing) 1f else 0f
                    }
                }
            })
            exo_rew_text?.startAnimation(goLeft)
            exo_rew_text?.text = getString(R.string.rew_text_format).format(fastForwardTime / 1000)
            player.seekTime(-fastForwardTime)
        } catch (e: Exception) {
            logError(e)
        }
    }

    private fun fastForward() {
        try {
            player_center_menu?.isGone = false
            player_ffwd_holder?.alpha = 1f

            val rotateRight = AnimationUtils.loadAnimation(context, R.anim.rotate_right)
            exo_ffwd?.startAnimation(rotateRight)

            val goRight = AnimationUtils.loadAnimation(context, R.anim.go_right)
            goRight.setAnimationListener(object : Animation.AnimationListener {
                override fun onAnimationStart(animation: Animation?) {}

                override fun onAnimationRepeat(animation: Animation?) {}

                override fun onAnimationEnd(animation: Animation?) {
                    exo_ffwd_text?.post {
                        resetFastForwardText()
                        player_center_menu?.isGone = !isShowing
                        player_ffwd_holder?.alpha = if (isShowing) 1f else 0f
                    }
                }
            })
            exo_ffwd_text?.startAnimation(goRight)
            exo_ffwd_text?.text = getString(R.string.ffw_text_format).format(fastForwardTime / 1000)
            player.seekTime(fastForwardTime)
        } catch (e: Exception) {
            logError(e)
        }
    }

    private fun onClickChange() {
        isShowing = !isShowing
        if (isShowing) {
            autoHide()
        }
        activity?.hideSystemUI()
        animateLayoutChanges()
        player_pause_play?.requestFocus()
    }

    private fun toggleLock() {
        if (!isShowing) {
            onClickChange()
        }

        isLocked = !isLocked
        if (isLocked && isShowing) {
            player_holder?.postDelayed({
                if (isLocked && isShowing) {
                    onClickChange()
                }
            }, 200)
        }

        val fadeTo = if (isLocked) 0f else 1f

        val fadeAnimation = AlphaAnimation(player_video_title.alpha, fadeTo).apply {
            duration = 100
            fillAfter = true
        }

        updateUIVisibility()
        // MENUS
        //centerMenu.startAnimation(fadeAnimation)
        player_pause_play?.startAnimation(fadeAnimation)
        player_ffwd_holder?.startAnimation(fadeAnimation)
        player_rew_holder?.startAnimation(fadeAnimation)
        //player_media_route_button?.startAnimation(fadeAnimation)
        //video_bar.startAnimation(fadeAnimation)

        //TITLE
        player_video_title_rez?.startAnimation(fadeAnimation)
        player_episode_filler?.startAnimation(fadeAnimation)
        player_video_title?.startAnimation(fadeAnimation)
        player_top_holder?.startAnimation(fadeAnimation)
        // BOTTOM
        player_lock_holder?.startAnimation(fadeAnimation)
        //player_go_back_holder?.startAnimation(fadeAnimation)

        shadow_overlay?.startAnimation(fadeAnimation)

        updateLockUI()
    }

    private fun updateUIVisibility() {
        val isGone = isLocked || !isShowing
        var togglePlayerTitleGone = isGone
        context?.let {
            val settingsManager = PreferenceManager.getDefaultSharedPreferences(it)
            val limitTitle = settingsManager.getInt(getString(R.string.prefer_limit_title_key), 0)
            if (limitTitle < 0) {
                togglePlayerTitleGone = true
            }
        }
        player_lock_holder?.isGone = isGone
        player_video_bar?.isGone = isGone
        player_pause_play_holder?.isGone = isGone
        player_pause_play?.isGone = isGone
        //player_buffering?.isGone = isGone
        player_top_holder?.isGone = isGone
        player_video_title?.isGone = togglePlayerTitleGone
        player_video_title_rez?.isGone = isGone
        player_episode_filler?.isGone = isGone
        player_center_menu?.isGone = isGone
        player_lock?.isGone = !isShowing
        //player_media_route_button?.isClickable = !isGone
        player_go_back_holder?.isGone = isGone
    }

    private fun updateLockUI() {
        player_lock?.setIconResource(if (isLocked) R.drawable.video_locked else R.drawable.video_unlocked)
        if (layout == R.layout.fragment_player) {
            val color = if (isLocked) context?.colorFromAttribute(R.attr.colorPrimary)
            else Color.WHITE
            if (color != null) {
                player_lock?.setTextColor(color)
                player_lock?.iconTint = ColorStateList.valueOf(color)
                player_lock?.rippleColor =
                    ColorStateList.valueOf(Color.argb(50, color.red, color.green, color.blue))
            }
        }
    }

    private var currentTapIndex = 0
    protected fun autoHide() {
        currentTapIndex++
        val index = currentTapIndex
        player_holder?.postDelayed({
            if (!isCurrentTouchValid && isShowing && index == currentTapIndex && player.getIsPlaying()) {
                onClickChange()
            }
        }, 2000)
    }

    // this is used because you don't want to hide UI when double tap seeking
    private var currentDoubleTapIndex = 0
    private fun toggleShowDelayed() {
        if (doubleTapEnabled || doubleTapPauseEnabled) {
            val index = currentDoubleTapIndex
            player_holder?.postDelayed({
                if (index == currentDoubleTapIndex) {
                    onClickChange()
                }
            }, DOUBLE_TAB_MINIMUM_TIME_BETWEEN)
        } else {
            onClickChange()
        }
    }

    private var isCurrentTouchValid = false
    private var currentTouchStart: Vector2? = null
    private var currentTouchLast: Vector2? = null
    private var currentTouchAction: TouchAction? = null
    private var currentLastTouchAction: TouchAction? = null
    private var currentTouchStartPlayerTime: Long? =
        null // the time in the player when you first click
    private var currentTouchStartTime: Long? = null // the system time when you first click
    private var currentLastTouchEndTime: Long = 0 // the system time when you released your finger
    private var currentClickCount: Int =
        0 // amount of times you have double clicked, will reset when other action is taken

    // requested volume and brightness is used to make swiping smoother
    // to make it not jump between values,
    // this value is within the range [0,1]
    private var currentRequestedVolume: Float = 0.0f
    private var currentRequestedBrightness: Float = 1.0f

    enum class TouchAction {
        Brightness,
        Volume,
        Time,
    }

    companion object {
        private fun forceLetters(inp: Long, letters: Int = 2): String {
            val added: Int = letters - inp.toString().length
            return if (added > 0) {
                "0".repeat(added) + inp.toString()
            } else {
                inp.toString()
            }
        }

        private fun convertTimeToString(sec: Long): String {
            val rsec = sec % 60L
            val min = ceil((sec - rsec) / 60.0).toInt()
            val rmin = min % 60L
            val h = ceil((min - rmin) / 60.0).toLong()
            //int rh = h;// h % 24;
            return (if (h > 0) forceLetters(h) + ":" else "") + (if (rmin >= 0 || h >= 0) forceLetters(
                rmin
            ) + ":" else "") + forceLetters(
                rsec
            )
        }
    }

    private fun calculateNewTime(
        startTime: Long?,
        touchStart: Vector2?,
        touchEnd: Vector2?
    ): Long? {
        if (touchStart == null || touchEnd == null || startTime == null) return null
        val diffX = (touchEnd.x - touchStart.x) * HORIZONTAL_MULTIPLIER / screenWidth.toFloat()
        val duration = player.getDuration() ?: return null
        return max(
            min(
                startTime + ((duration * (diffX * diffX)) * (if (diffX < 0) -1 else 1)).toLong(),
                duration
            ), 0
        )
    }

    private fun getBrightness(): Float? {
        return if (useTrueSystemBrightness) {
            try {
                Settings.System.getInt(
                    context?.contentResolver,
                    Settings.System.SCREEN_BRIGHTNESS
                ) / 255f
            } catch (e: Exception) {
                // because true system brightness requires
                // permission, this is a lazy way to check
                // as it will throw an error if we do not have it
                useTrueSystemBrightness = false
                return getBrightness()
            }
        } else {
            try {
                activity?.window?.attributes?.screenBrightness
            } catch (e: Exception) {
                logError(e)
                null
            }
        }
    }

    private fun setBrightness(brightness: Float) {
        if (useTrueSystemBrightness) {
            try {
                Settings.System.putInt(
                    context?.contentResolver,
                    Settings.System.SCREEN_BRIGHTNESS_MODE,
                    Settings.System.SCREEN_BRIGHTNESS_MODE_MANUAL
                )

                Settings.System.putInt(
                    context?.contentResolver,
                    Settings.System.SCREEN_BRIGHTNESS, (brightness * 255).toInt()
                )
            } catch (e: Exception) {
                useTrueSystemBrightness = false
                setBrightness(brightness)
            }
        } else {
            try {
                val lp = activity?.window?.attributes
                lp?.screenBrightness = brightness
                activity?.window?.attributes = lp
            } catch (e: Exception) {
                logError(e)
            }
        }
    }

    @SuppressLint("SetTextI18n")
    private fun handleMotionEvent(view: View?, event: MotionEvent?): Boolean {
        if (event == null || view == null) return false
        val currentTouch = Vector2(event.x, event.y)
        val startTouch = currentTouchStart

        when (event.action) {
            MotionEvent.ACTION_DOWN -> {
                // validates if the touch is inside of the player area
                isCurrentTouchValid = isValidTouch(currentTouch.x, currentTouch.y)
                if (isCurrentTouchValid) {
                    currentTouchStartTime = System.currentTimeMillis()
                    currentTouchStart = currentTouch
                    currentTouchLast = currentTouch
                    currentTouchStartPlayerTime = player.getPosition()

                    getBrightness()?.let {
                        currentRequestedBrightness = it
                    }
                    (activity?.getSystemService(Context.AUDIO_SERVICE) as? AudioManager)?.let { audioManager ->
                        val currentVolume =
                            audioManager.getStreamVolume(AudioManager.STREAM_MUSIC)
                        val maxVolume =
                            audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC)

                        currentRequestedVolume = currentVolume.toFloat() / maxVolume.toFloat()
                    }
                }
            }
            MotionEvent.ACTION_UP -> {
                if (isCurrentTouchValid && !isLocked) {
                    // seek time
                    if (swipeHorizontalEnabled && currentTouchAction == TouchAction.Time) {
                        val startTime = currentTouchStartPlayerTime
                        if (startTime != null) {
                            calculateNewTime(startTime, startTouch, currentTouch)?.let { seekTo ->
                                if (abs(seekTo - startTime) > MINIMUM_SEEK_TIME) {
                                    player.seekTo(seekTo)
                                }
                            }
                        }
                    }
                }

                // see if click is eligible for seek 10s
                val holdTime = currentTouchStartTime?.minus(System.currentTimeMillis())
                if (isCurrentTouchValid // is valid
                    && currentTouchAction == null // no other action like swiping is taking place
                    && currentLastTouchAction == null // last action was none, this prevents mis input random seek
                    && holdTime != null
                    && holdTime < DOUBLE_TAB_MAXIMUM_HOLD_TIME // it is a click not a long hold
                ) {
                    if (!isLocked
                        && (System.currentTimeMillis() - currentLastTouchEndTime) < DOUBLE_TAB_MINIMUM_TIME_BETWEEN // the time since the last action is short
                    ) {
                        currentClickCount++

                        if (currentClickCount >= 1) { // have double clicked
                            currentDoubleTapIndex++
                            if (doubleTapPauseEnabled) { // you can pause if your tap is in the middle of the screen
                                when {
                                    currentTouch.x < screenWidth / 2 - (DOUBLE_TAB_PAUSE_PERCENTAGE * screenWidth) -> {
                                        if (doubleTapEnabled)
                                            rewind()
                                    }
                                    currentTouch.x > screenWidth / 2 + (DOUBLE_TAB_PAUSE_PERCENTAGE * screenWidth) -> {
                                        if (doubleTapEnabled)
                                            fastForward()
                                    }
                                    else -> {
                                        player.handleEvent(CSPlayerEvent.PlayPauseToggle)
                                    }
                                }
                            } else if (doubleTapEnabled) {
                                if (currentTouch.x < screenWidth / 2) {
                                    rewind()
                                } else {
                                    fastForward()
                                }
                            }
                        }
                    } else {
                        // is a valid click but not fast enough for seek
                        currentClickCount = 0
                        toggleShowDelayed()
                        //onClickChange()
                    }
                } else {
                    currentClickCount = 0
                }

                // call auto hide as it wont hide when you have your finger down
                autoHide()

                // reset variables
                isCurrentTouchValid = false
                currentTouchStart = null
                currentLastTouchAction = currentTouchAction
                currentTouchAction = null
                currentTouchStartPlayerTime = null
                currentTouchLast = null
                currentTouchStartTime = null

                // resets UI
                player_time_text?.isVisible = false
                player_progressbar_left_holder?.isVisible = false
                player_progressbar_right_holder?.isVisible = false
                currentLastTouchEndTime = System.currentTimeMillis()
            }
            MotionEvent.ACTION_MOVE -> {
                // if current touch is valid
                if (startTouch != null && isCurrentTouchValid && !isLocked) {
                    // action is unassigned and can therefore be assigned
                    if (currentTouchAction == null) {
                        val diffFromStart = startTouch - currentTouch

                        if (swipeVerticalEnabled) {
                            if (abs(diffFromStart.y * 100 / screenHeight) > MINIMUM_VERTICAL_SWIPE) {
                                // left = Brightness, right = Volume, but the UI is reversed to show the UI better
                                currentTouchAction = if (startTouch.x < screenWidth / 2) {
                                    // hide the UI if you hold brightness to show screen better, better UX
                                    if (isShowing) {
                                        isShowing = false
                                        animateLayoutChanges()
                                    }

                                    TouchAction.Brightness
                                } else {
                                    TouchAction.Volume
                                }
                            }
                        }
                        if (swipeHorizontalEnabled) {
                            if (abs(diffFromStart.x * 100 / screenHeight) > MINIMUM_HORIZONTAL_SWIPE) {
                                currentTouchAction = TouchAction.Time
                            }
                        }
                    }

                    // display action
                    val lastTouch = currentTouchLast
                    if (lastTouch != null) {
                        val diffFromLast = lastTouch - currentTouch
                        val verticalAddition =
                            diffFromLast.y * VERTICAL_MULTIPLIER / screenHeight.toFloat()

                        // update UI
                        player_time_text?.isVisible = false
                        player_progressbar_left_holder?.isVisible = false
                        player_progressbar_right_holder?.isVisible = false

                        when (currentTouchAction) {
                            TouchAction.Time -> {
                                // this simply updates UI as the seek logic happens on release
                                // startTime is rounded to make the UI sync in a nice way
                                val startTime =
                                    currentTouchStartPlayerTime?.div(1000L)?.times(1000L)
                                if (startTime != null) {
                                    calculateNewTime(
                                        startTime,
                                        startTouch,
                                        currentTouch
                                    )?.let { newMs ->
                                        val skipMs = newMs - startTime
                                        player_time_text?.text =
                                            "${convertTimeToString(newMs / 1000)} [${
                                                (if (abs(skipMs) < 1000) "" else (if (skipMs > 0) "+" else "-"))
                                            }${convertTimeToString(abs(skipMs / 1000))}]"
                                        player_time_text?.isVisible = true
                                    }
                                }
                            }
                            TouchAction.Brightness -> {
                                player_progressbar_right_holder?.isVisible = true
                                val lastRequested = currentRequestedBrightness
                                currentRequestedBrightness =
                                    min(
                                        1.0f,
                                        max(currentRequestedBrightness + verticalAddition, 0.0f)
                                    )

                                // this is to not spam request it, just in case it fucks over someone
                                if (lastRequested != currentRequestedBrightness)
                                    setBrightness(currentRequestedBrightness)

                                // max is set high to make it smooth
                                player_progressbar_right?.max = 100_000
                                player_progressbar_right?.progress =
                                    max(2_000, (currentRequestedBrightness * 100_000f).toInt())

                                player_progressbar_right_icon?.setImageResource(
                                    brightnessIcons[min( // clamp the value just in case
                                        brightnessIcons.size - 1,
                                        max(
                                            0,
                                            round(currentRequestedBrightness * (brightnessIcons.size - 1)).toInt()
                                        )
                                    )]
                                )
                            }
                            TouchAction.Volume -> {
                                (activity?.getSystemService(Context.AUDIO_SERVICE) as? AudioManager)?.let { audioManager ->
                                    player_progressbar_left_holder?.isVisible = true
                                    val maxVolume =
                                        audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC)
                                    val currentVolume =
                                        audioManager.getStreamVolume(AudioManager.STREAM_MUSIC)

                                    // clamps volume and adds swipe
                                    currentRequestedVolume =
                                        min(
                                            1.0f,
                                            max(currentRequestedVolume + verticalAddition, 0.0f)
                                        )

                                    // max is set high to make it smooth
                                    player_progressbar_left?.max = 100_000
                                    player_progressbar_left?.progress =
                                        max(2_000, (currentRequestedVolume * 100_000f).toInt())

                                    player_progressbar_left_icon?.setImageResource(
                                        volumeIcons[min( // clamp the value just in case
                                            volumeIcons.size - 1,
                                            max(
                                                0,
                                                round(currentRequestedVolume * (volumeIcons.size - 1)).toInt()
                                            )
                                        )]
                                    )

                                    // this is used instead of set volume because old devices does not support it
                                    val desiredVolume =
                                        round(currentRequestedVolume * maxVolume).toInt()
                                    if (desiredVolume != currentVolume) {
                                        val newVolumeAdjusted =
                                            if (desiredVolume < currentVolume) AudioManager.ADJUST_LOWER else AudioManager.ADJUST_RAISE

                                        audioManager.adjustStreamVolume(
                                            AudioManager.STREAM_MUSIC,
                                            newVolumeAdjusted,
                                            0
                                        )
                                    }
                                }
                            }
                            else -> Unit
                        }
                    }
                }
            }
        }
        currentTouchLast = currentTouch
        return true
    }

    private fun handleKeyEvent(event: KeyEvent, hasNavigated: Boolean): Boolean {
        if (hasNavigated) {
            autoHide()
        } else {
            event.keyCode.let { keyCode ->
                when (event.action) {
                    KeyEvent.ACTION_DOWN -> {
                        when (keyCode) {
                            KeyEvent.KEYCODE_DPAD_CENTER -> {
                                if (!isShowing) {
                                    if (!isLocked) player.handleEvent(CSPlayerEvent.PlayPauseToggle)
                                    onClickChange()
                                    return true
                                }
                            }
                            KeyEvent.KEYCODE_DPAD_UP -> {
                                if (!isShowing) {
                                    onClickChange()
                                    return true
                                }
                            }
                            KeyEvent.KEYCODE_DPAD_LEFT -> {
                                if (!isShowing && !isLocked) {
                                    player.seekTime(-10000L)
                                    return true
                                } else if (player_pause_play?.isFocused == true) {
                                    player.seekTime(-30000L)
                                    return true
                                }
                            }
                            KeyEvent.KEYCODE_DPAD_RIGHT -> {
                                if (!isShowing && !isLocked) {
                                    player.seekTime(10000L)
                                    return true
                                } else if (player_pause_play?.isFocused == true) {
                                    player.seekTime(30000L)
                                    return true
                                }
                            }
                        }
                    }
                }

                when (keyCode) {
                    // don't allow dpad move when hidden

                    KeyEvent.KEYCODE_DPAD_DOWN,
                    KeyEvent.KEYCODE_DPAD_UP,
                    KeyEvent.KEYCODE_DPAD_DOWN_LEFT,
                    KeyEvent.KEYCODE_DPAD_DOWN_RIGHT,
                    KeyEvent.KEYCODE_DPAD_UP_LEFT,
                    KeyEvent.KEYCODE_DPAD_UP_RIGHT -> {
                        if (!isShowing) {
                            return true
                        } else {
                            autoHide()
                        }
                    }

                    // netflix capture back and hide ~monke
                    KeyEvent.KEYCODE_BACK -> {
                        if (isShowing) {
                            onClickChange()
                            return true
                        }
                    }
                }
            }
        }

        return false
    }

    protected fun uiReset() {
        isLocked = false
        isShowing = false

        // if nothing has loaded these buttons should not be visible
        player_skip_episode?.isVisible = false
        player_skip_op?.isVisible = false

        updateLockUI()
        updateUIVisibility()
        animateLayoutChanges()
        resetFastForwardText()
        resetRewindText()
    }

    @SuppressLint("ClickableViewAccessibility")
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        // init variables
        setPlayBackSpeed(getKey(PLAYBACK_SPEED_KEY) ?: 1.0f)

        // handle tv controls
        playerEventListener = { eventType ->
            when (eventType) {
                PlayerEventType.Lock -> {
                    toggleLock()
                }
                PlayerEventType.NextEpisode -> {
                    player.handleEvent(CSPlayerEvent.NextEpisode)
                }
                PlayerEventType.Pause -> {
                    player.handleEvent(CSPlayerEvent.Pause)
                }
                PlayerEventType.PlayPauseToggle -> {
                    player.handleEvent(CSPlayerEvent.PlayPauseToggle)
                }
                PlayerEventType.Play -> {
                    player.handleEvent(CSPlayerEvent.Play)
                }
                PlayerEventType.Resize -> {
                    nextResize()
                }
                PlayerEventType.PrevEpisode -> {
                    player.handleEvent(CSPlayerEvent.PrevEpisode)
                }
                PlayerEventType.SeekForward -> {
                    player.handleEvent(CSPlayerEvent.SeekForward)
                }
                PlayerEventType.ShowSpeed -> {
                    showSpeedDialog()
                }
                PlayerEventType.SeekBack -> {
                    player.handleEvent(CSPlayerEvent.SeekBack)
                }
                PlayerEventType.ToggleMute -> {
                    player.handleEvent(CSPlayerEvent.ToggleMute)
                }
                PlayerEventType.ToggleHide -> {
                    onClickChange()
                }
                PlayerEventType.ShowMirrors -> {
                    showMirrorsDialogue()
                }
            }
        }

        // handle tv controls directly based on player state
        keyEventListener = { eventNav ->
            val (event, hasNavigated) = eventNav
            if (event != null)
                handleKeyEvent(event, hasNavigated)
            else false
        }

        try {
            context?.let { ctx ->
                val settingsManager = PreferenceManager.getDefaultSharedPreferences(ctx)

                fastForwardTime =
                    settingsManager.getInt(ctx.getString(R.string.double_tap_seek_time_key), 10)
                        .toLong() * 1000L

                navigationBarHeight = ctx.getNavigationBarHeight()
                statusBarHeight = ctx.getStatusBarHeight()

                swipeHorizontalEnabled =
                    settingsManager.getBoolean(ctx.getString(R.string.swipe_enabled_key), true)
                swipeVerticalEnabled =
                    settingsManager.getBoolean(
                        ctx.getString(R.string.swipe_vertical_enabled_key),
                        true
                    )
                playBackSpeedEnabled = settingsManager.getBoolean(
                    ctx.getString(R.string.playback_speed_enabled_key),
                    false
                )
                playerResizeEnabled =
                    settingsManager.getBoolean(
                        ctx.getString(R.string.player_resize_enabled_key),
                        true
                    )
                doubleTapEnabled =
                    settingsManager.getBoolean(
                        ctx.getString(R.string.double_tap_enabled_key),
                        false
                    )

                doubleTapPauseEnabled =
                    settingsManager.getBoolean(
                        ctx.getString(R.string.double_tap_pause_enabled_key),
                        false
                    )

                currentPrefQuality = settingsManager.getInt(
                    ctx.getString(R.string.quality_pref_key),
                    currentPrefQuality
                )
                // useSystemBrightness =
                //    settingsManager.getBoolean(ctx.getString(R.string.use_system_brightness_key), false)
            }

            player_speed_btt?.isVisible = playBackSpeedEnabled
            player_resize_btt?.isVisible = playerResizeEnabled
        } catch (e: Exception) {
            logError(e)
        }

        player_pause_play?.setOnClickListener {
            autoHide()
            player.handleEvent(CSPlayerEvent.PlayPauseToggle)
        }

        // init clicks
        player_resize_btt?.setOnClickListener {
            autoHide()
            nextResize()
        }

        player_speed_btt?.setOnClickListener {
            autoHide()
            showSpeedDialog()
        }

        player_skip_op?.setOnClickListener {
            autoHide()
            skipOp()
        }

        player_skip_episode?.setOnClickListener {
            autoHide()
            player.handleEvent(CSPlayerEvent.NextEpisode)
        }

        player_lock?.setOnClickListener {
            autoHide()
            toggleLock()
        }

        player_subtitle_offset_btt?.setOnClickListener {
            showSubtitleOffsetDialog()
        }

        exo_rew?.setOnClickListener {
            autoHide()
            rewind()
        }

        exo_ffwd?.setOnClickListener {
            autoHide()
            fastForward()
        }

        player_go_back?.setOnClickListener {
            activity?.popCurrentPage()
        }

        player_sources_btt?.setOnClickListener {
            showMirrorsDialogue()
        }

        // it is !not! a bug that you cant touch the right side, it does not register inputs on navbar or status bar
        player_holder?.setOnTouchListener { callView, event ->
            return@setOnTouchListener handleMotionEvent(callView, event)
        }

        exo_progress?.setOnTouchListener { _, event ->
            // this makes the bar not disappear when sliding
            when (event.action) {
                MotionEvent.ACTION_DOWN -> {
                    currentTapIndex++
                }
                MotionEvent.ACTION_MOVE -> {
                    currentTapIndex++
                }
                MotionEvent.ACTION_UP, MotionEvent.ACTION_CANCEL, MotionEvent.ACTION_BUTTON_RELEASE -> {
                    autoHide()
                }
            }
            return@setOnTouchListener false
        }
        // init UI
        try {
            uiReset()

            // init chromecast UI
            // removed due to having no use and bugging
            //activity?.let {
            //    if (it.isCastApiAvailable()) {
            //        try {
            //            CastButtonFactory.setUpMediaRouteButton(it, player_media_route_button)
            //            val castContext = CastContext.getSharedInstance(it.applicationContext)
            //
            //            player_media_route_button?.isGone =
            //                castContext.castState == CastState.NO_DEVICES_AVAILABLE
            //            castContext.addCastStateListener { state ->
            //                player_media_route_button?.isGone =
            //                    state == CastState.NO_DEVICES_AVAILABLE
            //            }
            //        } catch (e: Exception) {
            //            logError(e)
            //        }
            //    } else {
            //        // if cast is not possible hide UI
            //        player_media_route_button?.isGone = true
            //    }
            //}
        } catch (e: Exception) {
            logError(e)
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/GeneratorPlayer.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.annotation.SuppressLint
import android.content.Intent
import android.os.Bundle
import android.util.Log
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.*
import androidx.activity.result.contract.ActivityResultContracts
import androidx.appcompat.app.AlertDialog
import androidx.core.view.isGone
import androidx.core.view.isVisible
import androidx.lifecycle.ViewModelProvider
import androidx.preference.PreferenceManager
import com.google.android.exoplayer2.util.MimeTypes
import com.google.android.material.button.MaterialButton
import com.hippo.unifile.UniFile
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.getApiFromNameNull
import com.lagradost.cloudstream3.CommonActivity.showToast
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.normalSafeApiCall
import com.lagradost.cloudstream3.mvvm.observe
import com.lagradost.cloudstream3.ui.player.PlayerSubtitleHelper.Companion.toSubtitleMimeType
import com.lagradost.cloudstream3.ui.result.ResultEpisode
import com.lagradost.cloudstream3.ui.result.ResultFragment
import com.lagradost.cloudstream3.ui.result.SyncViewModel
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTvSettings
import com.lagradost.cloudstream3.ui.subtitles.SubtitlesFragment
import com.lagradost.cloudstream3.utils.*
import com.lagradost.cloudstream3.utils.Coroutines.ioSafe
import com.lagradost.cloudstream3.utils.UIHelper.dismissSafe
import com.lagradost.cloudstream3.utils.UIHelper.hideSystemUI
import com.lagradost.cloudstream3.utils.UIHelper.popCurrentPage
import kotlinx.android.synthetic.main.fragment_player.*
import kotlinx.android.synthetic.main.player_custom_layout.*
import kotlinx.coroutines.Job

class GeneratorPlayer : FullScreenPlayer() {
    companion object {
        private var lastUsedGenerator: IGenerator? = null
        fun newInstance(generator: IGenerator, syncData: HashMap<String, String>? = null): Bundle {
            Log.i(TAG, "newInstance = $syncData")
            lastUsedGenerator = generator
            return Bundle().apply {
                if (syncData != null)
                    putSerializable("syncData", syncData)
            }
        }
    }

    private var titleRez = 3
    private var limitTitle = 0

    private lateinit var viewModel: PlayerGeneratorViewModel //by activityViewModels()
    private lateinit var sync: SyncViewModel
    private var currentLinks: Set<Pair<ExtractorLink?, ExtractorUri?>> = setOf()
    private var currentSubs: Set<SubtitleData> = setOf()

    private var currentSelectedLink: Pair<ExtractorLink?, ExtractorUri?>? = null
    private var currentSelectedSubtitles: SubtitleData? = null
    private var currentMeta: Any? = null
    private var nextMeta: Any? = null
    private var isActive: Boolean = false
    private var isNextEpisode: Boolean = false // this is used to reset the watch time

    private var preferredAutoSelectSubtitles: String? = null // null means do nothing, "" means none

    private fun startLoading() {
        player.release()
        currentSelectedSubtitles = null
        isActive = false
        overlay_loading_skip_button?.isVisible = false
        player_loading_overlay?.isVisible = true
    }

    private fun setSubtitles(sub: SubtitleData?): Boolean {
        currentSelectedSubtitles = sub
        return player.setPreferredSubtitles(sub)
    }

    override fun embeddedSubtitlesFetched(subtitles: List<SubtitleData>) {
        viewModel.addSubtitles(subtitles.toSet())
    }

    private fun noSubtitles(): Boolean {
        return setSubtitles(null)
    }

    private fun getPos(): Long {
        val durPos = DataStoreHelper.getViewPos(viewModel.getId()) ?: return 0L
        if (durPos.duration == 0L) return 0L
        if (durPos.position * 100L / durPos.duration > 95L) {
            return 0L
        }
        return durPos.position
    }

    var currentVerifyLink: Job? = null

    private fun loadExtractorJob(extractorLink: ExtractorLink?) {
        currentVerifyLink?.cancel()
        extractorLink?.let {
            currentVerifyLink = ioSafe {
                if (it.extractorData != null) {
                    getApiFromNameNull(it.source)?.extractorVerifierJob(it.extractorData)
                }
            }
        }
    }

    private fun loadLink(link: Pair<ExtractorLink?, ExtractorUri?>?, sameEpisode: Boolean) {
        if (link == null) return

        // manage UI
        player_loading_overlay?.isVisible = false
        uiReset()
        currentSelectedLink = link
        currentMeta = viewModel.getMeta()
        nextMeta = viewModel.getNextMeta()
        isActive = true
        setPlayerDimen(null)
        setTitle()

        loadExtractorJob(link.first)
        // load player
        context?.let { ctx ->
            val (url, uri) = link
            player.loadPlayer(
                ctx,
                sameEpisode,
                url,
                uri,
                startPosition = if (sameEpisode) null else {
                    if (isNextEpisode) 0L else getPos()
                },
                currentSubs,
                (if (sameEpisode) currentSelectedSubtitles else null) ?: getAutoSelectSubtitle(
                    currentSubs,
                    settings = true,
                    downloads = true
                ),
            )
        }
    }

    private fun sortLinks(useQualitySettings: Boolean = true): List<Pair<ExtractorLink?, ExtractorUri?>> {
        return currentLinks.sortedBy {
            val (linkData, _) = it
            var quality = linkData?.quality ?: Qualities.Unknown.value

            // we set all qualities above current max as reverse
            if (useQualitySettings && quality > currentPrefQuality) {
                quality = currentPrefQuality - quality - 1
            }
            // negative because we want to sort highest quality first
            -(quality)
        }
    }

    private fun openSubPicker() {
        try {
            subsPathPicker.launch(
                arrayOf(
                    "text/plain",
                    "text/str",
                    "application/octet-stream",
                    MimeTypes.TEXT_UNKNOWN,
                    MimeTypes.TEXT_VTT,
                    MimeTypes.TEXT_SSA,
                    MimeTypes.APPLICATION_TTML,
                    MimeTypes.APPLICATION_MP4VTT,
                    MimeTypes.APPLICATION_SUBRIP,
                )
            )
        } catch (e: Exception) {
            logError(e)
        }
    }

    // Open file picker
    private val subsPathPicker =
        registerForActivityResult(ActivityResultContracts.OpenDocument()) { uri ->
            normalSafeApiCall {
                // It lies, it can be null if file manager quits.
                if (uri == null) return@normalSafeApiCall
                val ctx = context ?: AcraApplication.context ?: return@normalSafeApiCall
                // RW perms for the path
                val flags = Intent.FLAG_GRANT_READ_URI_PERMISSION or
                        Intent.FLAG_GRANT_WRITE_URI_PERMISSION

                ctx.contentResolver.takePersistableUriPermission(uri, flags)

                val file = UniFile.fromUri(ctx, uri)
                println("Loaded subtitle file. Selected URI path: $uri - Name: ${file.name}")
                // DO NOT REMOVE THE FILE EXTENSION FROM NAME, IT'S NEEDED FOR MIME TYPES
                val name = file.name ?: uri.toString()

                val subtitleData = SubtitleData(
                    name,
                    uri.toString(),
                    SubtitleOrigin.DOWNLOADED_FILE,
                    name.toSubtitleMimeType()
                )

                setSubtitles(subtitleData)

                // this is used instead of observe, because observe is too slow
                val subs = currentSubs.toMutableSet()
                subs.add(subtitleData)
                player.setActiveSubtitles(subs)
                player.reloadPlayer(ctx)

                viewModel.addSubtitles(setOf(subtitleData))

                selectSourceDialog?.dismissSafe()

                showToast(
                    activity,
                    String.format(ctx.getString(R.string.player_loaded_subtitles), name),
                    Toast.LENGTH_LONG
                )
            }
        }

    var selectSourceDialog: AlertDialog? = null
    override fun showMirrorsDialogue() {
        try {
            currentSelectedSubtitles = player.getCurrentPreferredSubtitle()
            context?.let { ctx ->
                val isPlaying = player.getIsPlaying()
                player.handleEvent(CSPlayerEvent.Pause)
                val currentSubtitles = sortSubs(currentSubs)

                val sourceBuilder = AlertDialog.Builder(ctx, R.style.AlertDialogCustomBlack)
                    .setView(R.layout.player_select_source_and_subs)

                val sourceDialog = sourceBuilder.create()
                selectSourceDialog = sourceDialog
                sourceDialog.show()
                val providerList =
                    sourceDialog.findViewById<ListView>(R.id.sort_providers)!!
                val subtitleList =
                    sourceDialog.findViewById<ListView>(R.id.sort_subtitles)!!
                val applyButton =
                    sourceDialog.findViewById<MaterialButton>(R.id.apply_btt)!!
                val cancelButton =
                    sourceDialog.findViewById<MaterialButton>(R.id.cancel_btt)!!

                val footer: TextView =
                    layoutInflater.inflate(R.layout.sort_bottom_footer_add_choice, null) as TextView
                footer.text = ctx.getString(R.string.player_load_subtitles)
                footer.setOnClickListener {
                    openSubPicker()
                }
                subtitleList.addFooterView(footer)

                var sourceIndex = 0
                var startSource = 0

                val sortedUrls = sortLinks(useQualitySettings = false)
                if (sortedUrls.isEmpty()) {
                    sourceDialog.findViewById<LinearLayout>(R.id.sort_sources_holder)?.isGone = true
                } else {
                    startSource = sortedUrls.indexOf(currentSelectedLink)
                    sourceIndex = startSource

                    val sourcesArrayAdapter =
                        ArrayAdapter<String>(ctx, R.layout.sort_bottom_single_choice)

                    sourcesArrayAdapter.addAll(sortedUrls.map { (link, uri) ->
                        val name = link?.name ?: uri?.name ?: "NULL"
                        "$name ${Qualities.getStringByInt(link?.quality)}"
                    })

                    providerList.choiceMode = AbsListView.CHOICE_MODE_SINGLE
                    providerList.adapter = sourcesArrayAdapter
                    providerList.setSelection(sourceIndex)
                    providerList.setItemChecked(sourceIndex, true)

                    providerList.setOnItemClickListener { _, _, which, _ ->
                        sourceIndex = which
                        providerList.setItemChecked(which, true)
                    }
                }

                sourceDialog.setOnDismissListener {
                    if (isPlaying) {
                        player.handleEvent(CSPlayerEvent.Play)
                    }
                    activity?.hideSystemUI()
                    selectSourceDialog = null
                }

                val subtitleIndexStart = currentSubtitles.indexOf(currentSelectedSubtitles) + 1
                var subtitleIndex = subtitleIndexStart

                val subsArrayAdapter =
                    ArrayAdapter<String>(ctx, R.layout.sort_bottom_single_choice)
                subsArrayAdapter.add(getString(R.string.no_subtitles))
                subsArrayAdapter.addAll(currentSubtitles.map { it.name })

                subtitleList.adapter = subsArrayAdapter
                subtitleList.choiceMode = AbsListView.CHOICE_MODE_SINGLE

                subtitleList.setSelection(subtitleIndex)
                subtitleList.setItemChecked(subtitleIndex, true)

                subtitleList.setOnItemClickListener { _, _, which, _ ->
                    subtitleIndex = which
                    subtitleList.setItemChecked(which, true)
                }

                cancelButton.setOnClickListener {
                    sourceDialog.dismissSafe(activity)
                }

                applyButton.setOnClickListener {
                    var init = false
                    if (sourceIndex != startSource) {
                        init = true
                    }
                    if (subtitleIndex != subtitleIndexStart) {
                        init = init || if (subtitleIndex <= 0) {
                            noSubtitles()
                        } else {
                            currentSubtitles.getOrNull(subtitleIndex - 1)?.let {
                                setSubtitles(it)
                            } ?: false
                        }
                    }
                    if (init) {
                        sortedUrls.getOrNull(sourceIndex)?.let {
                            loadLink(it, true)
                        }
                    }
                    sourceDialog.dismissSafe(activity)
                }
            }
        } catch (e: Exception) {
            logError(e)
        }
    }

    private fun noLinksFound() {
        showToast(activity, R.string.no_links_found_toast, Toast.LENGTH_SHORT)
        activity?.popCurrentPage()
    }

    private fun startPlayer() {
        if (isActive) return // we don't want double load when you skip loading

        val links = sortLinks()
        if (links.isEmpty()) {
            noLinksFound()
            return
        }
        loadLink(links.first(), false)
    }

    override fun nextEpisode() {
        isNextEpisode = true
        player.release()
        viewModel.loadLinksNext()
    }

    override fun prevEpisode() {
        isNextEpisode = true
        player.release()
        viewModel.loadLinksPrev()
    }

    override fun nextMirror() {
        val links = sortLinks()
        if (links.isEmpty()) {
            noLinksFound()
            return
        }

        val newIndex = links.indexOf(currentSelectedLink) + 1
        if (newIndex >= links.size) {
            noLinksFound()
            return
        }

        loadLink(links[newIndex], true)
    }

    override fun onDestroy() {
        ResultFragment.updateUI()
        currentVerifyLink?.cancel()
        super.onDestroy()
    }

    var maxEpisodeSet: Int? = null

    override fun playerPositionChanged(posDur: Pair<Long, Long>) {
        val (position, duration) = posDur
        viewModel.getId()?.let {
            DataStoreHelper.setViewPos(it, position, duration)
        }
        val percentage = position * 100L / duration

        val nextEp = percentage >= NEXT_WATCH_EPISODE_PERCENTAGE
        val resumeMeta = if (nextEp) nextMeta else currentMeta
        if (resumeMeta == null && nextEp) {
            // remove last watched as it is the last episode and you have watched too much
            when (val newMeta = currentMeta) {
                is ResultEpisode -> {
                    DataStoreHelper.removeLastWatched(newMeta.parentId)
                }
                is ExtractorUri -> {
                    DataStoreHelper.removeLastWatched(newMeta.parentId)
                }
            }
        } else {
            // save resume
            when (resumeMeta) {
                is ResultEpisode -> {
                    DataStoreHelper.setLastWatched(
                        resumeMeta.parentId,
                        resumeMeta.id,
                        resumeMeta.episode,
                        resumeMeta.season,
                        isFromDownload = false
                    )
                }
                is ExtractorUri -> {
                    DataStoreHelper.setLastWatched(
                        resumeMeta.parentId,
                        resumeMeta.id,
                        resumeMeta.episode,
                        resumeMeta.season,
                        isFromDownload = true
                    )
                }
            }
        }

        var isOpVisible = false
        when (val meta = currentMeta) {
            is ResultEpisode -> {
                if (percentage >= UPDATE_SYNC_PROGRESS_PERCENTAGE && (maxEpisodeSet
                        ?: -1) < meta.episode
                ) {
                    context?.let { ctx ->
                        val settingsManager = PreferenceManager.getDefaultSharedPreferences(ctx)
                        if (settingsManager.getBoolean(
                                ctx.getString(R.string.episode_sync_enabled_key),
                                true
                            )
                        )
                            maxEpisodeSet = meta.episode
                        sync.modifyMaxEpisode(meta.episode)
                    }
                }

                if (meta.tvType.isAnimeOp())
                    isOpVisible = percentage < SKIP_OP_VIDEO_PERCENTAGE
            }
        }
        player_skip_op?.isVisible = isOpVisible
        player_skip_episode?.isVisible = !isOpVisible && viewModel.hasNextEpisode() == true

        if (percentage >= PRELOAD_NEXT_EPISODE_PERCENTAGE) {
            viewModel.preLoadNextLinks()
        }
    }

    private fun getAutoSelectSubtitle(
        subtitles: Set<SubtitleData>,
        settings: Boolean,
        downloads: Boolean
    ): SubtitleData? {
        val langCode = preferredAutoSelectSubtitles ?: return null
        val lang = SubtitleHelper.fromTwoLettersToLanguage(langCode) ?: return null

        if (settings)
            subtitles.firstOrNull { sub ->
                val t = sub.name.replace(Regex("[^A-Za-z]"), " ").trim()
                t == lang || t.startsWith("$lang ")
                        || t == langCode
            }?.let { sub ->
                return sub
            }
        if (downloads) {
            return subtitles.firstOrNull { sub ->
                (sub.origin == SubtitleOrigin.DOWNLOADED_FILE || sub.name == context?.getString(
                    R.string.default_subtitles
                ))
            }
        }
        return null
    }

    private fun autoSelectFromSettings() {
        // auto select subtitle based of settings
        val langCode = preferredAutoSelectSubtitles

        if (!langCode.isNullOrEmpty() && player.getCurrentPreferredSubtitle() == null) {
            getAutoSelectSubtitle(currentSubs, settings = true, downloads = false)?.let { sub ->
                context?.let { ctx ->
                    if (setSubtitles(sub)) {
                        player.reloadPlayer(ctx)
                        player.handleEvent(CSPlayerEvent.Play)
                    }
                }
            }
        }
    }

    private fun autoSelectFromDownloads() {
        if (player.getCurrentPreferredSubtitle() == null) {
            getAutoSelectSubtitle(currentSubs, settings = false, downloads = true)?.let { sub ->
                context?.let { ctx ->
                    if (setSubtitles(sub)) {
                        player.reloadPlayer(ctx)
                        player.handleEvent(CSPlayerEvent.Play)
                    }
                }
            }
        }
    }

    private fun autoSelectSubtitles() {
        normalSafeApiCall {
            autoSelectFromSettings()
            autoSelectFromDownloads()
        }
    }

    @SuppressLint("SetTextI18n")
    fun setTitle() {
        var headerName: String? = null
        var subName: String? = null
        var episode: Int? = null
        var season: Int? = null
        var tvType: TvType? = null

        var isFiller: Boolean? = null
        when (val meta = currentMeta) {
            is ResultEpisode -> {
                isFiller = meta.isFiller
                headerName = meta.headerName
                subName = meta.name
                episode = meta.episode
                season = meta.season
                tvType = meta.tvType
            }
            is ExtractorUri -> {
                headerName = meta.headerName
                subName = meta.name
                episode = meta.episode
                season = meta.season
                tvType = meta.tvType
            }
        }

        //Generate video title
        context?.let { ctx ->
            var playerVideoTitle = if (headerName != null) {
                (headerName +
                        if (tvType.isEpisodeBased() && episode != null)
                            if (season == null)
                                " - ${ctx.getString(R.string.episode)} $episode"
                            else
                                " \"${ctx.getString(R.string.season_short)}${season}:${ctx.getString(R.string.episode_short)}${episode}\""
                        else "") + if (subName.isNullOrBlank() || subName == headerName) "" else " - $subName"
            } else {
                ""
            }

            //Hide title, if set in setting
            if (limitTitle < 0) {
                player_video_title?.visibility = View.GONE
            } else {
                //Truncate video title if it exceeds limit
                val differenceInLength = playerVideoTitle.length - limitTitle
                val margin = 3 //If the difference is smaller than or equal to this value, ignore it
                if (limitTitle > 0 && differenceInLength > margin) {
                    playerVideoTitle = playerVideoTitle.substring(0, limitTitle - 1) + "..."
                }
            }

            player_episode_filler_holder?.isVisible = isFiller ?: false
            player_video_title?.text = playerVideoTitle
        }

    }

    @SuppressLint("SetTextI18n")
    fun setPlayerDimen(widthHeight: Pair<Int, Int>?) {
        val extra = if (widthHeight != null) {
            val (width, height) = widthHeight
            "${width}x${height}"
        } else {
            ""
        }

        val source = currentSelectedLink?.first?.name ?: currentSelectedLink?.second?.name
        ?: "NULL"

        player_video_title_rez?.text = when (titleRez) {
            0 -> ""
            1 -> extra
            2 -> source
            3 -> "$source - $extra"
            else -> ""
        }
    }

    override fun playerDimensionsLoaded(widthHeight: Pair<Int, Int>) {
        setPlayerDimen(widthHeight)
    }

    private fun unwrapBundle(savedInstanceState: Bundle?) {
        Log.i(TAG, "unwrapBundle = $savedInstanceState")
        savedInstanceState?.let { bundle ->
            sync.addSyncs(bundle.getSerializable("syncData") as? HashMap<String, String>?)
        }
    }

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        // this is used instead of layout-television to follow the settings and some TV devices are not classified as TV for some reason
        layout =
            if (context?.isTvSettings() == true) R.layout.fragment_player_tv else R.layout.fragment_player

        viewModel = ViewModelProvider(this)[PlayerGeneratorViewModel::class.java]
        sync = ViewModelProvider(this)[SyncViewModel::class.java]

        viewModel.attachGenerator(lastUsedGenerator)
        unwrapBundle(savedInstanceState)
        unwrapBundle(arguments)

        return super.onCreateView(inflater, container, savedInstanceState)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        context?.let { ctx ->
            val settingsManager = PreferenceManager.getDefaultSharedPreferences(ctx)
            titleRez = settingsManager.getInt(getString(R.string.prefer_limit_title_rez_key), 3)
            limitTitle = settingsManager.getInt(getString(R.string.prefer_limit_title_key), 0)
        }

        unwrapBundle(savedInstanceState)
        unwrapBundle(arguments)

        sync.updateUserData()

        preferredAutoSelectSubtitles = SubtitlesFragment.getAutoSelectLanguageISO639_1()

        if (currentSelectedLink == null) {
            viewModel.loadLinks()
        }

        overlay_loading_skip_button?.setOnClickListener {
            startPlayer()
        }

        player_loading_go_back?.setOnClickListener {
            player.release()
            activity?.popCurrentPage()
        }

        observe(viewModel.loadingLinks) {
            when (it) {
                is Resource.Loading -> {
                    startLoading()
                }
                is Resource.Success -> {
                    // provider returned false
                    //if (it.value != true) {
                    //    showToast(activity, R.string.unexpected_error, Toast.LENGTH_SHORT)
                    //}
                    startPlayer()
                }
                is Resource.Failure -> {
                    showToast(activity, it.errorString, Toast.LENGTH_LONG)
                    startPlayer()
                }
            }
        }

        observe(viewModel.currentLinks) {
            currentLinks = it
            val turnVisible = it.isNotEmpty()
            val wasGone = overlay_loading_skip_button?.isGone == true
            overlay_loading_skip_button?.isVisible = turnVisible
            if (turnVisible && wasGone) {
                overlay_loading_skip_button?.requestFocus()
            }
        }

        observe(viewModel.currentSubs) { set ->
            currentSubs = set
            player.setActiveSubtitles(set)

            autoSelectSubtitles()
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/IGenerator.kt
================================================
package com.lagradost.cloudstream3.ui.player

import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.ExtractorUri

interface IGenerator {
    val hasCache: Boolean

    fun hasNext(): Boolean
    fun hasPrev(): Boolean
    fun next()
    fun prev()
    fun goto(index: Int)

    fun getCurrentId(): Int?                    // this is used to save data or read data about this id
    fun getCurrent(offset : Int = 0): Any?      // this is used to get metadata about the current playing, can return null

    /* not safe, must use try catch */
    suspend fun generateLinks(
        clearCache: Boolean,
        isCasting: Boolean,
        callback: (Pair<ExtractorLink?, ExtractorUri?>) -> Unit,
        subtitleCallback: (SubtitleData) -> Unit,
        offset : Int = 0,
    ): Boolean
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/IPlayer.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.content.Context
import com.lagradost.cloudstream3.ui.subtitles.SaveCaptionStyle
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.ExtractorUri

enum class PlayerEventType(val value: Int) {
    //Stop(-1),
    Pause(0),
    Play(1),
    SeekForward(2),
    SeekBack(3),

    //SkipCurrentChapter(4),
    NextEpisode(5),
    PrevEpisode(5),
    PlayPauseToggle(7),
    ToggleMute(8),
    Lock(9),
    ToggleHide(10),
    ShowSpeed(11),
    ShowMirrors(12),
    Resize(13),
}

enum class CSPlayerEvent(val value: Int) {
    Pause(0),
    Play(1),
    SeekForward(2),
    SeekBack(3),

    //SkipCurrentChapter(4),
    NextEpisode(5),
    PrevEpisode(6),
    PlayPauseToggle(7),
    ToggleMute(8),
}

enum class CSPlayerLoading {
    IsPaused,
    IsPlaying,
    IsBuffering,
    //IsDone,
}

class InvalidFileException(msg : String) : Exception(msg)

//http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4
const val STATE_RESUME_WINDOW = "resumeWindow"
const val STATE_RESUME_POSITION = "resumePosition"
const val STATE_PLAYER_FULLSCREEN = "playerFullscreen"
const val STATE_PLAYER_PLAYING = "playerOnPlay"
const val ACTION_MEDIA_CONTROL = "media_control"
const val EXTRA_CONTROL_TYPE = "control_type"
const val PLAYBACK_SPEED = "playback_speed"
const val RESIZE_MODE_KEY = "resize_mode" // Last used resize mode
const val PLAYBACK_SPEED_KEY = "playback_speed" // Last used playback speed
const val PREFERRED_SUBS_KEY = "preferred_subtitles" // Last used resize mode
//const val PLAYBACK_FASTFORWARD = "playback_fastforward" // Last used resize mode

/** Abstract Exoplayer logic, can be expanded to other players */
interface IPlayer {
    fun getPlaybackSpeed(): Float
    fun setPlaybackSpeed(speed: Float)

    fun getIsPlaying(): Boolean
    fun getDuration(): Long?
    fun getPosition(): Long?

    fun seekTime(time: Long)
    fun seekTo(time: Long)

    fun getSubtitleOffset() : Long // in ms
    fun setSubtitleOffset(offset : Long) // in ms

    fun initCallbacks(
        playerUpdated: (Any?) -> Unit,                              // attach player to view
        updateIsPlaying: ((Pair<CSPlayerLoading, CSPlayerLoading>) -> Unit)? = null, // (wasPlaying, isPlaying)
        requestAutoFocus: (() -> Unit)? = null,                     // current player starts, asking for all other programs to shut the fuck up
        playerError: ((Exception) -> Unit)? = null,                 // player error when rendering or misc, used to display toast or log
        playerDimensionsLoaded: ((Pair<Int, Int>) -> Unit)? = null, // (with, height), for UI
        requestedListeningPercentages: List<Int>? = null,           // this is used to request when the player should report back view percentage
        playerPositionChanged: ((Pair<Long, Long>) -> Unit)? = null,// (position, duration) this is used to update UI based of the current time
        nextEpisode: (() -> Unit)? = null,                          // this is used by the player to load the next episode
        prevEpisode: (() -> Unit)? = null,                          // this is used by the player to load the previous episode
        subtitlesUpdates: (() -> Unit)? = null,                     // callback from player to inform that subtitles have updated in some way
        embeddedSubtitlesFetched: ((List<SubtitleData>) -> Unit)? = null, // callback from player to give all embedded subtitles
    )

    fun updateSubtitleStyle(style: SaveCaptionStyle)
    fun loadPlayer(
        context: Context,
        sameEpisode: Boolean,
        link: ExtractorLink? = null,
        data: ExtractorUri? = null,
        startPosition: Long? = null,
        subtitles : Set<SubtitleData>,
        subtitle : SubtitleData?,
    )

    fun reloadPlayer(context: Context)

    fun setActiveSubtitles(subtitles : Set<SubtitleData>)
    fun setPreferredSubtitles(subtitle : SubtitleData?) : Boolean // returns true if the player requires a reload, null for nothing
    fun getCurrentPreferredSubtitle() : SubtitleData?

    fun handleEvent(event: CSPlayerEvent)

    fun onStop()
    fun onPause()
    fun onResume(context: Context)

    fun release()
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/NonFinalTextRenderer.kt
================================================
/*
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.lagradost.cloudstream3.ui.player

import android.os.Handler
import android.os.Looper
import android.os.Message
import androidx.annotation.IntDef
import com.google.android.exoplayer2.*
import com.google.android.exoplayer2.source.SampleStream.ReadDataResult
import com.google.android.exoplayer2.text.*
import com.google.android.exoplayer2.util.Assertions
import com.google.android.exoplayer2.util.Log
import com.google.android.exoplayer2.util.MimeTypes
import com.google.android.exoplayer2.util.Util

/**
 * A renderer for text.
 *
 *
 * [Subtitle]s are decoded from sample data using [SubtitleDecoder] instances
 * obtained from a [SubtitleDecoderFactory]. The actual rendering of the subtitle [Cue]s
 * is delegated to a [TextOutput].
 */
open class NonFinalTextRenderer @JvmOverloads constructor(
    output: TextOutput?,
    outputLooper: Looper?,
    private val decoderFactory: SubtitleDecoderFactory = SubtitleDecoderFactory.DEFAULT
) :
    BaseRenderer(C.TRACK_TYPE_TEXT), Handler.Callback {
    @MustBeDocumented
    @kotlin.annotation.Retention(AnnotationRetention.SOURCE)
    @IntDef(
        REPLACEMENT_STATE_NONE,
        REPLACEMENT_STATE_SIGNAL_END_OF_STREAM,
        REPLACEMENT_STATE_WAIT_END_OF_STREAM
    )
    private annotation class ReplacementState

    private val outputHandler: Handler? = if (outputLooper == null) null else Util.createHandler(
        outputLooper,  /* callback= */
        this
    )
    private val output: TextOutput = Assertions.checkNotNull(output)
    private val formatHold: FormatHolder = FormatHolder()
    private var inputStreamEnded = false
    private var outputStreamEnded = false
    private var waitingForKeyFrame = false

    @ReplacementState
    private var decoderReplacementState = 0
    private var streamFormat: Format? = null
    private var decoder: SubtitleDecoder? = null
    private var nextInputBuffer: SubtitleInputBuffer? = null
    private var subtitle: SubtitleOutputBuffer? = null
    private var nextSubtitle: SubtitleOutputBuffer? = null
    private var nextSubtitleEventIndex = 0
    private var finalStreamEndPositionUs: Long
    override fun getName(): String {
        return TAG
    }

    @RendererCapabilities.Capabilities
    override fun supportsFormat(format: Format): Int {
        return if (decoderFactory.supportsFormat(format)) {
            RendererCapabilities.create(
                if (format.cryptoType == C.CRYPTO_TYPE_NONE) C.FORMAT_HANDLED else C.FORMAT_UNSUPPORTED_DRM
            )
        } else if (MimeTypes.isText(format.sampleMimeType)) {
            RendererCapabilities.create(C.FORMAT_UNSUPPORTED_SUBTYPE)
        } else {
            RendererCapabilities.create(C.FORMAT_UNSUPPORTED_TYPE)
        }
    }

    /**
     * Sets the position at which to stop rendering the current stream.
     *
     *
     * Must be called after [.setCurrentStreamFinal].
     *
     * @param streamEndPositionUs The position to stop rendering at or [C.LENGTH_UNSET] to
     * render until the end of the current stream.
     */

    override fun onStreamChanged(formats: Array<Format>, startPositionUs: Long, offsetUs: Long) {
        streamFormat = formats[0]
        if (decoder != null) {
            decoderReplacementState = REPLACEMENT_STATE_SIGNAL_END_OF_STREAM
        } else {
            initDecoder()
        }
    }

    override fun onPositionReset(positionUs: Long, joining: Boolean) {
        clearOutput()
        inputStreamEnded = false
        outputStreamEnded = false
        finalStreamEndPositionUs = C.TIME_UNSET
        if (decoderReplacementState != REPLACEMENT_STATE_NONE) {
            replaceDecoder()
        } else {
            releaseBuffers()
            Assertions.checkNotNull(decoder).flush()
        }
    }

    override fun render(positionUs: Long, elapsedRealtimeUs: Long) {
        if (isCurrentStreamFinal
            && finalStreamEndPositionUs != C.TIME_UNSET && positionUs >= finalStreamEndPositionUs
        ) {
            releaseBuffers()
            outputStreamEnded = true
        }
        if (outputStreamEnded) {
            return
        }
        if (nextSubtitle == null) {
            Assertions.checkNotNull(decoder).setPositionUs(positionUs)
            nextSubtitle = try {
                Assertions.checkNotNull(decoder).dequeueOutputBuffer()
            } catch (e: SubtitleDecoderException) {
                handleDecoderError(e)
                return
            }
        }
        if (state != STATE_STARTED) {
            return
        }
        var textRendererNeedsUpdate = false
        if (subtitle != null) {
            // We're iterating through the events in a subtitle. Set textRendererNeedsUpdate if we
            // advance to the next event.
            var subtitleNextEventTimeUs = nextEventTime
            while (subtitleNextEventTimeUs <= positionUs) {
                nextSubtitleEventIndex++
                subtitleNextEventTimeUs = nextEventTime
                textRendererNeedsUpdate = true
            }
        }
        if (nextSubtitle != null) {
            val nextSubtitle = nextSubtitle
            if (nextSubtitle!!.isEndOfStream) {
                if (!textRendererNeedsUpdate && nextEventTime == Long.MAX_VALUE) {
                    if (decoderReplacementState == REPLACEMENT_STATE_WAIT_END_OF_STREAM) {
                        replaceDecoder()
                    } else {
                        releaseBuffers()
                        outputStreamEnded = true
                    }
                }
            } else if (nextSubtitle.timeUs <= positionUs) {
                // Advance to the next subtitle. Sync the next event index and trigger an update.
                if (subtitle != null) {
                    subtitle!!.release()
                }
                nextSubtitleEventIndex = nextSubtitle.getNextEventTimeIndex(positionUs)
                subtitle = nextSubtitle
                this.nextSubtitle = null
                textRendererNeedsUpdate = true
            }
        }
        if (textRendererNeedsUpdate) {
            // If textRendererNeedsUpdate then subtitle must be non-null.
            Assertions.checkNotNull(subtitle)
            // textRendererNeedsUpdate is set and we're playing. Update the renderer.
            updateOutput(subtitle!!.getCues(positionUs))
        }
        if (decoderReplacementState == REPLACEMENT_STATE_WAIT_END_OF_STREAM) {
            return
        }
        try {
            while (!inputStreamEnded) {
                var nextInputBuffer = nextInputBuffer
                if (nextInputBuffer == null) {
                    nextInputBuffer = Assertions.checkNotNull(decoder).dequeueInputBuffer()
                    if (nextInputBuffer == null) {
                        return
                    }
                    this.nextInputBuffer = nextInputBuffer
                }
                if (decoderReplacementState == REPLACEMENT_STATE_SIGNAL_END_OF_STREAM) {
                    nextInputBuffer.setFlags(C.BUFFER_FLAG_END_OF_STREAM)
                    Assertions.checkNotNull(decoder).queueInputBuffer(nextInputBuffer)
                    this.nextInputBuffer = null
                    decoderReplacementState = REPLACEMENT_STATE_WAIT_END_OF_STREAM
                    return
                }
                // Try and read the next subtitle from the source.
                @ReadDataResult val result =
                    readSource(formatHold, nextInputBuffer,  /* readFlags= */0)
                if (result == C.RESULT_BUFFER_READ) {
                    if (nextInputBuffer.isEndOfStream) {
                        inputStreamEnded = true
                        waitingForKeyFrame = false
                    } else {
                        val format = formatHold.format
                            ?: // We haven't received a format yet.
                            return
                        nextInputBuffer.subsampleOffsetUs = format.subsampleOffsetUs
                        nextInputBuffer.flip()
                        waitingForKeyFrame = waitingForKeyFrame and !nextInputBuffer.isKeyFrame
                    }
                    if (!waitingForKeyFrame) {
                        Assertions.checkNotNull(decoder).queueInputBuffer(nextInputBuffer)
                        this.nextInputBuffer = null
                    }
                } else if (result == C.RESULT_NOTHING_READ) {
                    return
                }
            }
        } catch (e: SubtitleDecoderException) {
            handleDecoderError(e)
        }
    }

    override fun onDisabled() {
        streamFormat = null
        finalStreamEndPositionUs = C.TIME_UNSET
        clearOutput()
        releaseDecoder()
    }

    override fun isEnded(): Boolean {
        return outputStreamEnded
    }

    override fun isReady(): Boolean {
        // Don't block playback whilst subtitles are loading.
        // Note: To change this behavior, it will be necessary to consider [Internal: b/12949941].
        return true
    }

    private fun releaseBuffers() {
        nextInputBuffer = null
        nextSubtitleEventIndex = C.INDEX_UNSET
        if (subtitle != null) {
            subtitle!!.release()
            subtitle = null
        }
        if (nextSubtitle != null) {
            nextSubtitle!!.release()
            nextSubtitle = null
        }
    }

    private fun releaseDecoder() {
        releaseBuffers()
        Assertions.checkNotNull(decoder).release()
        decoder = null
        decoderReplacementState = REPLACEMENT_STATE_NONE
    }

    private fun initDecoder() {
        waitingForKeyFrame = true
        decoder = decoderFactory.createDecoder(Assertions.checkNotNull(streamFormat))
    }

    private fun replaceDecoder() {
        releaseDecoder()
        initDecoder()
    }

    private val nextEventTime: Long
        get() {
            if (nextSubtitleEventIndex == C.INDEX_UNSET) {
                return Long.MAX_VALUE
            }
            Assertions.checkNotNull(subtitle)
            return if (nextSubtitleEventIndex >= subtitle!!.eventTimeCount) Long.MAX_VALUE else subtitle!!.getEventTime(
                nextSubtitleEventIndex
            )
        }

    private fun updateOutput(cues: List<Cue>) {
        if (outputHandler != null) {
            outputHandler.obtainMessage(MSG_UPDATE_OUTPUT, cues).sendToTarget()
        } else {
            invokeUpdateOutputInternal(cues)
        }
    }

    private fun clearOutput() {
        updateOutput(emptyList())
    }

    override fun handleMessage(msg: Message): Boolean {
        return when (msg.what) {
            MSG_UPDATE_OUTPUT -> {
                invokeUpdateOutputInternal(msg.obj as List<Cue>)
                true
            }
            else -> throw IllegalStateException()
        }
    }

    private fun invokeUpdateOutputInternal(cues: List<Cue>) {
        output.onCues(cues.map { cue -> cue.buildUpon().setSize(Cue.DIMEN_UNSET).build() }) // this fixes https://github.com/LagradOst/CloudStream-3/issues/717
    }

    /**
     * Called when [.decoder] throws an exception, so it can be logged and playback can
     * continue.
     *
     *
     * Logs `e` and resets state to allow decoding the next sample.
     */
    private fun handleDecoderError(e: SubtitleDecoderException) {
        Log.e(
            TAG,
            "Subtitle decoding failed. streamFormat=$streamFormat", e
        )
        clearOutput()
        replaceDecoder()
    }

    companion object {
        private const val TAG = "TextRenderer"

        /** The decoder does not need to be replaced.  */
        private const val REPLACEMENT_STATE_NONE = 0

        /**
         * The decoder needs to be replaced, but we haven't yet signaled an end of stream to the existing
         * decoder. We need to do so in order to ensure that it outputs any remaining buffers before we
         * release it.
         */
        private const val REPLACEMENT_STATE_SIGNAL_END_OF_STREAM = 1

        /**
         * The decoder needs to be replaced, and we've signaled an end of stream to the existing decoder.
         * We're waiting for the decoder to output an end of stream signal to indicate that it has output
         * any remaining buffers before we release it.
         */
        private const val REPLACEMENT_STATE_WAIT_END_OF_STREAM = 2
        private const val MSG_UPDATE_OUTPUT = 0
    }
    /**
     * @param output The output.
     * @param outputLooper The looper associated with the thread on which the output should be called.
     * If the output makes use of standard Android UI components, then this should normally be the
     * looper associated with the application's main thread, which can be obtained using [     ][android.app.Activity.getMainLooper]. Null may be passed if the output should be called
     * directly on the player's internal rendering thread.
     * @param decoderFactory A factory from which to obtain [SubtitleDecoder] instances.
     */
    /**
     * @param output The output.
     * @param outputLooper The looper associated with the thread on which the output should be called.
     * If the output makes use of standard Android UI components, then this should normally be the
     * looper associated with the application's main thread, which can be obtained using [     ][android.app.Activity.getMainLooper]. Null may be passed if the output should be called
     * directly on the player's internal rendering thread.
     */
    init {
        finalStreamEndPositionUs = C.TIME_UNSET
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/PlayerGeneratorViewModel.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.util.Log
import androidx.lifecycle.LiveData
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.normalSafeApiCall
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.ExtractorUri
import kotlinx.coroutines.Job
import kotlinx.coroutines.launch

class PlayerGeneratorViewModel : ViewModel() {
    companion object {
        val TAG = "PlayViewGen"
    }

    private var generator: IGenerator? = null

    private val _currentLinks = MutableLiveData<Set<Pair<ExtractorLink?, ExtractorUri?>>>(setOf())
    val currentLinks: LiveData<Set<Pair<ExtractorLink?, ExtractorUri?>>> = _currentLinks

    private val _currentSubs = MutableLiveData<Set<SubtitleData>>(setOf())
    val currentSubs: LiveData<Set<SubtitleData>> = _currentSubs

    private val _loadingLinks = MutableLiveData<Resource<Boolean?>>()
    val loadingLinks: LiveData<Resource<Boolean?>> = _loadingLinks

    fun getId(): Int? {
        return generator?.getCurrentId()
    }

    fun loadLinks(episode: Int) {
        generator?.goto(episode)
        loadLinks()
    }

    fun loadLinksPrev() {
        Log.i(TAG, "loadLinksPrev")
        if (generator?.hasPrev() == true) {
            generator?.prev()
            loadLinks()
        }
    }

    fun loadLinksNext() {
        Log.i(TAG, "loadLinksNext")
        if (generator?.hasNext() == true) {
            generator?.next()
            loadLinks()
        }
    }

    fun hasNextEpisode(): Boolean? {
        return generator?.hasNext()
    }

    fun preLoadNextLinks() {
        Log.i(TAG, "preLoadNextLinks")
        currentJob?.cancel()
        currentJob = viewModelScope.launch {
            if (generator?.hasCache == true && generator?.hasNext() == true) {
                safeApiCall {
                    generator?.generateLinks(
                        clearCache = false,
                        isCasting = false,
                        {},
                        {},
                        offset = 1
                    )
                }
            }
        }
    }

    fun getMeta(): Any? {
        return normalSafeApiCall { generator?.getCurrent() }
    }

    fun getNextMeta(): Any? {
        return normalSafeApiCall {
            if (generator?.hasNext() == false) return@normalSafeApiCall null
            generator?.getCurrent(offset = 1)
        }
    }

    fun attachGenerator(newGenerator: IGenerator?) {
        if (generator == null) {
            generator = newGenerator
        }
    }

    /**
     * If duplicate nothing will happen
     * */
    fun addSubtitles(file: Set<SubtitleData>) {
        val currentSubs = _currentSubs.value ?: emptySet()
        // Prevent duplicates
        val allSubs = (currentSubs + file).distinct().toSet()
        // Do not post if there's nothing new
        // Posting will refresh subtitles which will in turn
        // make the subs to english if previously unselected
        if (allSubs != currentSubs)
            _currentSubs.postValue(allSubs)
    }

    private var currentJob: Job? = null

    fun loadLinks(clearCache: Boolean = false, isCasting: Boolean = false) {
        Log.i(TAG, "loadLinks")
        currentJob?.cancel()
        currentJob = viewModelScope.launch {
            val currentLinks = mutableSetOf<Pair<ExtractorLink?, ExtractorUri?>>()
            val currentSubs = mutableSetOf<SubtitleData>()

            // clear old data
            _currentSubs.postValue(currentSubs)
            _currentLinks.postValue(currentLinks)

            // load more data
            _loadingLinks.postValue(Resource.Loading())
            val loadingState = safeApiCall {
                generator?.generateLinks(clearCache = clearCache, isCasting = isCasting, {
                    currentLinks.add(it)
                    _currentLinks.postValue(currentLinks)
                }, {
                    currentSubs.add(it)
                    // _currentSubs.postValue(currentSubs) // this causes ConcurrentModificationException, so fuck it
                })
            }

            _loadingLinks.postValue(loadingState)

            _currentLinks.postValue(currentLinks)
            _currentSubs.postValue(currentSubs)
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/PlayerPipHelper.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.app.Activity
import android.app.PendingIntent
import android.app.PictureInPictureParams
import android.app.RemoteAction
import android.content.Intent
import android.graphics.drawable.Icon
import android.os.Build
import androidx.annotation.RequiresApi
import androidx.annotation.StringRes
import com.lagradost.cloudstream3.R

class PlayerPipHelper {
    companion object {
        private fun getPen(activity: Activity, code: Int): PendingIntent {
            return if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                PendingIntent.getBroadcast(
                    activity,
                    code,
                    Intent("media_control").putExtra("control_type", code),
                    PendingIntent.FLAG_IMMUTABLE
                )
            } else {
                PendingIntent.getBroadcast(
                    activity,
                    code,
                    Intent("media_control").putExtra("control_type", code),
                    0
                )
            }
        }

        @RequiresApi(Build.VERSION_CODES.O)
        private fun getRemoteAction(
            activity: Activity,
            id: Int,
            @StringRes title: Int,
            event: CSPlayerEvent
        ): RemoteAction {
            val text = activity.getString(title)
            return RemoteAction(
                Icon.createWithResource(activity, id),
                text,
                text,
                getPen(activity, event.value)
            )
        }

        @RequiresApi(Build.VERSION_CODES.O)
        fun updatePIPModeActions(activity: Activity, isPlaying: Boolean) {
            val actions: ArrayList<RemoteAction> = ArrayList()
            actions.add(
                getRemoteAction(
                    activity,
                    R.drawable.go_back_30,
                    R.string.go_back_30,
                    CSPlayerEvent.SeekBack
                )
            )

            if (isPlaying) {
                actions.add(
                    getRemoteAction(
                        activity,
                        R.drawable.netflix_pause,
                        R.string.pause,
                        CSPlayerEvent.Pause
                    )
                )
            } else {
                actions.add(
                    getRemoteAction(
                        activity,
                        R.drawable.ic_baseline_play_arrow_24,
                        R.string.pause,
                        CSPlayerEvent.Play
                    )
                )
            }

            actions.add(
                getRemoteAction(
                    activity,
                    R.drawable.go_forward_30,
                    R.string.go_forward_30,
                    CSPlayerEvent.SeekForward
                )
            )
            activity.setPictureInPictureParams(
                PictureInPictureParams.Builder().setActions(actions).build()
            )
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/PlayerSubtitleHelper.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.content.Context
import android.net.Uri
import android.util.TypedValue
import android.view.ViewGroup
import android.widget.FrameLayout
import com.google.android.exoplayer2.ui.SubtitleView
import com.google.android.exoplayer2.util.MimeTypes
import com.hippo.unifile.UniFile
import com.lagradost.cloudstream3.SubtitleFile
import com.lagradost.cloudstream3.ui.subtitles.SaveCaptionStyle
import com.lagradost.cloudstream3.ui.subtitles.SubtitlesFragment.Companion.fromSaveToStyle
import com.lagradost.cloudstream3.utils.UIHelper.toPx

enum class SubtitleStatus {
    IS_ACTIVE,
    REQUIRES_RELOAD,
    NOT_FOUND,
}

enum class SubtitleOrigin {
    URL,
    DOWNLOADED_FILE,
    OPEN_SUBTITLES,
    EMBEDDED_IN_VIDEO
}

/**
 * @param name To be displayed in the player
 * @param url Url for the subtitle, when EMBEDDED_IN_VIDEO this variable is used as the real backend language
 * */
data class SubtitleData(
    val name: String,
    val url: String,
    val origin: SubtitleOrigin,
    val mimeType: String,
)

class PlayerSubtitleHelper {
    private var activeSubtitles: Set<SubtitleData> = emptySet()
    private var allSubtitles: Set<SubtitleData> = emptySet()

    fun getAllSubtitles(): Set<SubtitleData> {
        return allSubtitles
    }

    fun setActiveSubtitles(list: Set<SubtitleData>) {
        activeSubtitles = list
    }

    fun setAllSubtitles(list: Set<SubtitleData>) {
        allSubtitles = list
    }

    private var subStyle: SaveCaptionStyle? = null
    private var subtitleView: SubtitleView? = null

    companion object {
        fun String.toSubtitleMimeType(): String {
            return when {
                endsWith("vtt", true) -> MimeTypes.TEXT_VTT
                endsWith("srt", true) -> MimeTypes.APPLICATION_SUBRIP
                endsWith("xml", true) || endsWith("ttml", true) -> MimeTypes.APPLICATION_TTML
                else -> MimeTypes.APPLICATION_SUBRIP
            }
        }

        private fun getSubtitleMimeType(context: Context, url: String, origin: SubtitleOrigin): String {
            return when (origin) {
                // The url can look like .../document/4294 when the name is EnglishSDH.srt
                SubtitleOrigin.DOWNLOADED_FILE -> {
                    UniFile.fromUri(
                        context,
                        Uri.parse(url)
                    ).name?.toSubtitleMimeType() ?: MimeTypes.APPLICATION_SUBRIP
                }
                SubtitleOrigin.URL -> {
                    return url.toSubtitleMimeType()
                }
                SubtitleOrigin.OPEN_SUBTITLES -> {
                    // TODO
                    throw NotImplementedError()
                }
                SubtitleOrigin.EMBEDDED_IN_VIDEO -> {
                    throw NotImplementedError()
                }
            }
        }

        fun getSubtitleData(subtitleFile: SubtitleFile): SubtitleData {
            return SubtitleData(
                name = subtitleFile.lang,
                url = subtitleFile.url,
                origin = SubtitleOrigin.URL,
                mimeType = subtitleFile.url.toSubtitleMimeType()
            )
        }
    }

    fun subtitleStatus(sub : SubtitleData?): SubtitleStatus {
        if(activeSubtitles.contains(sub)) {
            return SubtitleStatus.IS_ACTIVE
        }
        if(allSubtitles.contains(sub)) {
            return SubtitleStatus.REQUIRES_RELOAD
        }
        return SubtitleStatus.NOT_FOUND
    }

    fun setSubStyle(style: SaveCaptionStyle) {
        subtitleView?.context?.let { ctx ->
            subStyle = style
            subtitleView?.setStyle(ctx.fromSaveToStyle(style))
            subtitleView?.translationY = -style.elevation.toPx.toFloat()
            val size = style.fixedTextSize
            if (size != null) {
                subtitleView?.setFixedTextSize(TypedValue.COMPLEX_UNIT_SP, size)
            } else {
                subtitleView?.setUserDefaultTextSize()
            }
        }
    }

    fun initSubtitles(subView: SubtitleView?, subHolder: FrameLayout?, style: SaveCaptionStyle?) {
        subtitleView = subView
        subView?.let { sView ->
            (sView.parent as ViewGroup?)?.removeView(sView)
            subHolder?.addView(sView)
        }
        style?.let {
            setSubStyle(it)
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/RepoLinkGenerator.kt
================================================
package com.lagradost.cloudstream3.ui.player

import android.util.Log
import com.lagradost.cloudstream3.APIHolder.getApiFromNameNull
import com.lagradost.cloudstream3.ui.APIRepository
import com.lagradost.cloudstream3.ui.result.ResultEpisode
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.ExtractorUri
import kotlin.math.max
import kotlin.math.min

class RepoLinkGenerator(
    private val episodes: List<ResultEpisode>,
    private var currentIndex: Int = 0
) : IGenerator {
    companion object {
        const val TAG = "RepoLink"
        val cache: HashMap<Pair<String, Int>, Pair<MutableSet<ExtractorLink>, MutableSet<SubtitleData>>> = hashMapOf()
    }

    override val hasCache = true

    override fun hasNext(): Boolean {
        return currentIndex < episodes.size - 1
    }

    override fun hasPrev(): Boolean {
        return currentIndex > 0
    }

    override fun next() {
        Log.i(TAG, "next")
        if (hasNext())
            currentIndex++
    }

    override fun prev() {
        Log.i(TAG, "prev")
        if (hasPrev())
            currentIndex--
    }

    override fun goto(index: Int) {
        Log.i(TAG, "goto $index")
        // clamps value
        currentIndex = min(episodes.size - 1, max(0, index))
    }

    override fun getCurrentId(): Int {
        return episodes[currentIndex].id
    }

    override fun getCurrent(offset: Int): Any? {
        return episodes.getOrNull(currentIndex + offset)
    }

    // this is a simple array that is used to instantly load links if they are already loaded
    //var linkCache = Array<Set<ExtractorLink>>(size = episodes.size, init = { setOf() })
    //var subsCache = Array<Set<SubtitleData>>(size = episodes.size, init = { setOf() })

    override suspend fun generateLinks(
        clearCache: Boolean,
        isCasting: Boolean,
        callback: (Pair<ExtractorLink?, ExtractorUri?>) -> Unit,
        subtitleCallback: (SubtitleData) -> Unit,
        offset: Int,
    ): Boolean {
        val index = currentIndex
        val current = episodes.getOrNull(index + offset) ?: return false

        val (currentLinkCache, currentSubsCache) = if (clearCache) {
            Pair(mutableSetOf(), mutableSetOf())
        } else {
            cache[Pair(current.apiName, current.id)] ?: Pair(mutableSetOf(), mutableSetOf())
        }

        //val currentLinkCache = if (clearCache) mutableSetOf() else linkCache[index].toMutableSet()
        //val currentSubsCache = if (clearCache) mutableSetOf() else subsCache[index].toMutableSet()

        val currentLinks = mutableSetOf<String>()       // makes all urls unique
        val currentSubsUrls = mutableSetOf<String>()    // makes all subs urls unique
        val currentSubsNames = mutableSetOf<String>()   // makes all subs names unique

        currentLinkCache.forEach { link ->
            currentLinks.add(link.url)
            callback(Pair(link, null))
        }

        currentSubsCache.forEach { sub ->
            currentSubsUrls.add(sub.url)
            currentSubsNames.add(sub.name)
            subtitleCallback(sub)
        }

        // this stops all execution if links are cached
        // no extra get requests
        if (currentLinkCache.size > 0) {
            return true
        }

        val result = APIRepository(
            getApiFromNameNull(current.apiName) ?: throw Exception("This provider does not exist")
        ).loadLinks(current.data,
            isCasting,
            { file ->
                val correctFile = PlayerSubtitleHelper.getSubtitleData(file)
                if (!currentSubsUrls.contains(correctFile.url)) {
                    currentSubsUrls.add(correctFile.url)

                    // this part makes sure that all names are unique for UX
                    var name = correctFile.name
                    var count = 0
                    while (currentSubsNames.contains(name)) {
                        count++
                        name = "${correctFile.name} $count"
                    }

                    currentSubsNames.add(name)
                    val updatedFile = correctFile.copy(name = name)

                    if (!currentSubsCache.contains(updatedFile)) {
                        subtitleCallback(updatedFile)
                        currentSubsCache.add(updatedFile)
                        //subsCache[index] = currentSubsCache
                    }
                }
            },
            { link ->
                Log.d(TAG, "Loaded ExtractorLink: $link")
                if (!currentLinks.contains(link.url)) {
                    if (!currentLinkCache.contains(link)) {
                        currentLinks.add(link.url)
                        callback(Pair(link, null))
                        currentLinkCache.add(link)
                        //linkCache[index] = currentLinkCache
                    }
                }
            }
        )
        cache[Pair(current.apiName, current.id)] = Pair(currentLinkCache, currentSubsCache)

        return result
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/player/SSLTrustManager.kt
================================================
package com.lagradost.cloudstream3.ui.player

import java.security.cert.X509Certificate
import javax.net.ssl.X509TrustManager

class SSLTrustManager : X509TrustManager {
    override fun checkClientTrusted(p0: Array<out X509Certificate>?, p1: String?) {
    }

    override fun checkServerTrusted(p0: Array<out X509Certificate>?, p1: String?) {
    }

    override fun getAcceptedIssuers(): Array<X509Certificate> {
        return arrayOf()
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/quicksearch/QuickSearchFragment.kt
================================================
package com.lagradost.cloudstream3.ui.quicksearch

import android.app.Activity
import android.content.Context
import android.content.res.Configuration
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.view.WindowManager
import android.widget.ImageView
import androidx.appcompat.widget.SearchView
import androidx.core.view.isGone
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.lifecycle.ViewModelProvider
import androidx.recyclerview.widget.GridLayoutManager
import com.lagradost.cloudstream3.APIHolder.filterProviderByPreferredMedia
import com.lagradost.cloudstream3.APIHolder.getApiFromNameNull
import com.lagradost.cloudstream3.HomePageList
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.observe
import com.lagradost.cloudstream3.ui.home.HomeFragment
import com.lagradost.cloudstream3.ui.home.HomeFragment.Companion.loadHomepageList
import com.lagradost.cloudstream3.ui.home.ParentItemAdapter
import com.lagradost.cloudstream3.ui.search.SearchAdapter
import com.lagradost.cloudstream3.ui.search.SearchClickCallback
import com.lagradost.cloudstream3.ui.search.SearchFragment.Companion.filterSearchResponse
import com.lagradost.cloudstream3.ui.search.SearchHelper
import com.lagradost.cloudstream3.ui.search.SearchViewModel
import com.lagradost.cloudstream3.utils.UIHelper
import com.lagradost.cloudstream3.utils.UIHelper.fixPaddingStatusbar
import com.lagradost.cloudstream3.utils.UIHelper.getSpanCount
import com.lagradost.cloudstream3.utils.UIHelper.navigate
import com.lagradost.cloudstream3.utils.UIHelper.popCurrentPage
import kotlinx.android.synthetic.main.quick_search.*
import java.util.concurrent.locks.ReentrantLock

class QuickSearchFragment : Fragment() {
    companion object {
        const val AUTOSEARCH_KEY = "autosearch"
        const val PROVIDER_KEY = "providers"

        fun pushSearch(
            activity: Activity?,
            autoSearch: String? = null,
            providers: Array<String>? = null
        ) {
            activity.navigate(R.id.global_to_navigation_quick_search, Bundle().apply {
                providers?.let {
                    putStringArray(PROVIDER_KEY, it)
                }
                autoSearch?.let {
                    putString(
                        AUTOSEARCH_KEY,
                        it.trim()
                            .removeSuffix("(DUB)")
                            .removeSuffix("(SUB)")
                            .removeSuffix("(Dub)")
                            .removeSuffix("(Sub)").trim()
                    )
                }
            })
        }

        var clickCallback: ((SearchClickCallback) -> Unit)? = null
    }

    private var providers: Set<String>? = null
    private lateinit var searchViewModel: SearchViewModel

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        activity?.window?.setSoftInputMode(
            WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE
        )
        searchViewModel = ViewModelProvider(this)[SearchViewModel::class.java]

        return inflater.inflate(R.layout.quick_search, container, false)
    }

    override fun onDestroy() {
        super.onDestroy()
        clickCallback = null
    }

    fun search(context: Context?, query: String, isQuickSearch: Boolean): Boolean {
        (providers ?: context?.filterProviderByPreferredMedia(hasHomePageIsRequired = false)
            ?.map { it.name }?.toSet())?.let { active ->
            searchViewModel.searchAndCancel(
                query = query,
                ignoreSettings = false,
                providersActive = active,
                isQuickSearch = isQuickSearch
            )
            return true
        }
        return false
    }

    private fun fixGrid() {
        activity?.getSpanCount()?.let {
            HomeFragment.currentSpan = it
        }
        quick_search_autofit_results.spanCount = HomeFragment.currentSpan
        HomeFragment.currentSpan = HomeFragment.currentSpan
        HomeFragment.configEvent.invoke(HomeFragment.currentSpan)
    }

    override fun onConfigurationChanged(newConfig: Configuration) {
        super.onConfigurationChanged(newConfig)
        fixGrid()
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        context?.fixPaddingStatusbar(quick_search_root)
        fixGrid()

        arguments?.getStringArray(PROVIDER_KEY)?.let {
            providers = it.toSet()
        }

        val isSingleProvider = providers?.size == 1
        val isSingleProviderQuickSearch = if (isSingleProvider) {
            getApiFromNameNull(providers?.first())?.hasQuickSearch ?: false
        } else false

        if (isSingleProvider) {
            quick_search_autofit_results.adapter = activity?.let {
                SearchAdapter(
                    ArrayList(),
                    quick_search_autofit_results,
                ) { callback ->
                    SearchHelper.handleSearchClickCallback(activity, callback)
                }
            }
            try {
                quick_search?.queryHint = getString(R.string.search_hint_site).format(providers?.first())
            } catch (e: Exception) {
                logError(e)
            }
        } else {
            quick_search_master_recycler?.adapter =
                ParentItemAdapter(mutableListOf(), { callback ->
                    SearchHelper.handleSearchClickCallback(activity, callback)
                    //when (callback.action) {
                    //SEARCH_ACTION_LOAD -> {
                    //    clickCallback?.invoke(callback)
                    //}
                    //    else -> SearchHelper.handleSearchClickCallback(activity, callback)
                    //}
                }, { item ->
                    activity?.loadHomepageList(item)
                })
            quick_search_master_recycler?.layoutManager = GridLayoutManager(context, 1)
        }

        quick_search_autofit_results?.isVisible = isSingleProvider
        quick_search_master_recycler?.isGone = isSingleProvider

        val listLock = ReentrantLock()
        observe(searchViewModel.currentSearch) { list ->
            try {
                // https://stackoverflow.com/questions/6866238/concurrent-modification-exception-adding-to-an-arraylist
                listLock.lock()
                (quick_search_master_recycler?.adapter as ParentItemAdapter?)?.apply {
                    updateList(list.map { ongoing ->
                        val ongoingList = HomePageList(
                            ongoing.apiName,
                            if (ongoing.data is Resource.Success) ongoing.data.value.filterSearchResponse() else ArrayList()
                        )
                        ongoingList
                    })
                }
            } catch (e: Exception) {
                logError(e)
            } finally {
                listLock.unlock()
            }
        }

        val searchExitIcon =
            quick_search?.findViewById<ImageView>(androidx.appcompat.R.id.search_close_btn)

        //val searchMagIcon =
        //    quick_search?.findViewById<ImageView>(androidx.appcompat.R.id.search_mag_icon)

        //searchMagIcon?.scaleX = 0.65f
        //searchMagIcon?.scaleY = 0.65f


        quick_search?.setOnQueryTextListener(object : SearchView.OnQueryTextListener {
            override fun onQueryTextSubmit(query: String): Boolean {
                if (search(context, query, false))
                    UIHelper.hideKeyboard(quick_search)
                return true
            }

            override fun onQueryTextChange(newText: String): Boolean {
                if (isSingleProviderQuickSearch)
                    search(context, newText, true)
                return true
            }
        })

        quick_search_loading_bar.alpha = 0f
        observe(searchViewModel.searchResponse) {
            when (it) {
                is Resource.Success -> {
                    it.value.let { data ->
                        println("DATA: $data")
                        (quick_search_autofit_results?.adapter as? SearchAdapter?)?.updateList(
                            data
                        )
                    }
                    searchExitIcon?.alpha = 1f
                    quick_search_loading_bar?.alpha = 0f
                }
                is Resource.Failure -> {
                    // Toast.makeText(activity, "Server error", Toast.LENGTH_LONG).show()
                    searchExitIcon?.alpha = 1f
                    quick_search_loading_bar?.alpha = 0f
                }
                is Resource.Loading -> {
                    searchExitIcon?.alpha = 0f
                    quick_search_loading_bar?.alpha = 1f
                }
            }
        }


        //quick_search.setOnQueryTextFocusChangeListener { _, b ->
        //    if (b) {
        //        // https://stackoverflow.com/questions/12022715/unable-to-show-keyboard-automatically-in-the-searchview
        //        UIHelper.showInputMethod(view.findFocus())
        //    }
        //}

        quick_search_back.setOnClickListener {
            activity?.popCurrentPage()
        }

        arguments?.getString(AUTOSEARCH_KEY)?.let {
            quick_search?.setQuery(it, true)
            arguments?.remove(AUTOSEARCH_KEY)
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/result/ActorAdaptor.kt
================================================
package com.lagradost.cloudstream3.ui.result

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageView
import android.widget.TextView
import androidx.core.view.isVisible
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.ActorData
import com.lagradost.cloudstream3.ActorRole
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.utils.UIHelper.setImage
import kotlinx.android.synthetic.main.cast_item.view.*

class ActorAdaptor() : RecyclerView.Adapter<RecyclerView.ViewHolder>() {
    data class ActorMetaData(
        var isInverted: Boolean,
        val actor: ActorData,
    )

    private val actors: MutableList<ActorMetaData> = mutableListOf()

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
        return CardViewHolder(
            LayoutInflater.from(parent.context).inflate(R.layout.cast_item, parent, false),
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is CardViewHolder -> {
                holder.bind(actors[position].actor, actors[position].isInverted, position) {
                    actors[position].isInverted = !actors[position].isInverted
                    this.notifyItemChanged(position)
                }
            }
        }
    }

    override fun getItemCount(): Int {
        return actors.size
    }

    private fun updateActorList(newList: List<ActorMetaData>) {
        val diffResult = DiffUtil.calculateDiff(
            ActorDiffCallback(this.actors, newList)
        )

        actors.clear()
        actors.addAll(newList)

        diffResult.dispatchUpdatesTo(this)
    }

    fun updateList(newList: List<ActorData>) {
        if (actors.size >= newList.size) {
            updateActorList(newList.mapIndexed { i, data -> actors[i].copy(actor = data) })
        } else {
            updateActorList(newList.mapIndexed { i, data ->
                if (i < actors.size)
                    actors[i].copy(actor = data)
                else ActorMetaData(isInverted = false, actor = data)
            })
        }
    }

    private class CardViewHolder
    constructor(
        itemView: View,
    ) :
        RecyclerView.ViewHolder(itemView) {
        private val actorImage: ImageView = itemView.actor_image
        private val actorName: TextView = itemView.actor_name
        private val actorExtra: TextView = itemView.actor_extra
        private val voiceActorImage: ImageView = itemView.voice_actor_image
        private val voiceActorImageHolder: View = itemView.voice_actor_image_holder
        private val voiceActorName: TextView = itemView.voice_actor_name

        fun bind(actor: ActorData, isInverted: Boolean, position: Int, callback: (Int) -> Unit) {
            val (mainImg, vaImage) = if (!isInverted || actor.voiceActor?.image.isNullOrBlank()) {
                Pair(actor.actor.image, actor.voiceActor?.image)
            } else {
                Pair(actor.voiceActor?.image, actor.actor.image)
            }

            itemView.setOnClickListener {
                callback(position)
            }

            actorImage.setImage(mainImg)

            actorName.text = actor.actor.name
            actor.role?.let {
                actorExtra.context?.getString(
                    when (it) {
                        ActorRole.Main -> {
                            R.string.actor_main
                        }
                        ActorRole.Supporting -> {
                            R.string.actor_supporting
                        }
                        ActorRole.Background -> {
                            R.string.actor_background
                        }
                    }
                )?.let { text ->
                    actorExtra.isVisible = true
                    actorExtra.text = text
                }
            } ?: actor.roleString?.let {
                actorExtra.isVisible = true
                actorExtra.text = it
            } ?: run {
                actorExtra.isVisible = false
            }

            if (actor.voiceActor == null) {
                voiceActorImageHolder.isVisible = false
                voiceActorName.isVisible = false
            } else {
                voiceActorName.text = actor.voiceActor.name
                voiceActorImageHolder.isVisible = voiceActorImage.setImage(vaImage)
            }
        }
    }
}

class ActorDiffCallback(
    private val oldList: List<ActorAdaptor.ActorMetaData>,
    private val newList: List<ActorAdaptor.ActorMetaData>
) :
    DiffUtil.Callback() {
    override fun areItemsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition].actor.actor.name == newList[newItemPosition].actor.actor.name

    override fun getOldListSize() = oldList.size

    override fun getNewListSize() = newList.size

    override fun areContentsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition] == newList[newItemPosition]
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/result/EpisodeAdapter.kt
================================================
package com.lagradost.cloudstream3.ui.result

import android.annotation.SuppressLint
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageView
import android.widget.TextView
import androidx.annotation.LayoutRes
import androidx.core.view.isVisible
import androidx.core.widget.ContentLoadingProgressBar
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.button.MaterialButton
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ui.download.DOWNLOAD_ACTION_DOWNLOAD
import com.lagradost.cloudstream3.ui.download.DownloadButtonViewHolder
import com.lagradost.cloudstream3.ui.download.DownloadClickEvent
import com.lagradost.cloudstream3.ui.download.EasyDownloadButton
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTrueTvSettings
import com.lagradost.cloudstream3.utils.UIHelper.setImage
import com.lagradost.cloudstream3.utils.VideoDownloadHelper
import com.lagradost.cloudstream3.utils.VideoDownloadManager
import kotlinx.android.synthetic.main.result_episode.view.*
import kotlinx.android.synthetic.main.result_episode.view.episode_holder
import kotlinx.android.synthetic.main.result_episode.view.episode_text
import kotlinx.android.synthetic.main.result_episode_large.view.*
import kotlinx.android.synthetic.main.result_episode_large.view.episode_filler
import kotlinx.android.synthetic.main.result_episode_large.view.episode_progress
import kotlinx.android.synthetic.main.result_episode_large.view.result_episode_download
import kotlinx.android.synthetic.main.result_episode_large.view.result_episode_progress_downloaded
import java.util.*

const val ACTION_PLAY_EPISODE_IN_PLAYER = 1
const val ACTION_PLAY_EPISODE_IN_VLC_PLAYER = 2
const val ACTION_PLAY_EPISODE_IN_BROWSER = 3

const val ACTION_CHROME_CAST_EPISODE = 4
const val ACTION_CHROME_CAST_MIRROR = 5

const val ACTION_DOWNLOAD_EPISODE = 6
const val ACTION_DOWNLOAD_MIRROR = 7

const val ACTION_RELOAD_EPISODE = 8
const val ACTION_COPY_LINK = 9

const val ACTION_SHOW_OPTIONS = 10

const val ACTION_CLICK_DEFAULT = 11
const val ACTION_SHOW_TOAST = 12

const val ACTION_DOWNLOAD_EPISODE_SUBTITLE = 13
const val ACTION_DOWNLOAD_EPISODE_SUBTITLE_MIRROR = 14

data class EpisodeClickEvent(val action: Int, val data: ResultEpisode)

class EpisodeAdapter(
    var cardList: List<ResultEpisode>,
    private val hasDownloadSupport: Boolean,
    private val clickCallback: (EpisodeClickEvent) -> Unit,
    private val downloadClickCallback: (DownloadClickEvent) -> Unit,
) : RecyclerView.Adapter<RecyclerView.ViewHolder>() {

    private val mBoundViewHolders: HashSet<DownloadButtonViewHolder> = HashSet()
    private fun getAllBoundViewHolders(): Set<DownloadButtonViewHolder?>? {
        return Collections.unmodifiableSet(mBoundViewHolders)
    }

    fun killAdapter() {
        getAllBoundViewHolders()?.forEach { view ->
            view?.downloadButton?.dispose()
        }
    }

    override fun onViewDetachedFromWindow(holder: RecyclerView.ViewHolder) {
        if (holder is DownloadButtonViewHolder) {
            holder.downloadButton.dispose()
        }
    }

    override fun onViewRecycled(holder: RecyclerView.ViewHolder) {
        if (holder is DownloadButtonViewHolder) {
            holder.downloadButton.dispose()
            mBoundViewHolders.remove(holder)
        }
    }

    override fun onViewAttachedToWindow(holder: RecyclerView.ViewHolder) {
        if (holder is DownloadButtonViewHolder) {
            holder.reattachDownloadButton()
        }
    }

    @LayoutRes
    private var layout: Int = 0
    fun updateLayout() {
        layout =
            if (cardList.filter { it.poster != null }.size >= cardList.size / 2f) // If over half has posters then use the large layout
                R.layout.result_episode_large
            else R.layout.result_episode
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
        /*val layout = if (cardList.filter { it.poster != null }.size >= cardList.size / 2)
            R.layout.result_episode_large
        else R.layout.result_episode*/

        return EpisodeCardViewHolder(
            LayoutInflater.from(parent.context).inflate(layout, parent, false),
            hasDownloadSupport,
            clickCallback,
            downloadClickCallback
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is EpisodeCardViewHolder -> {
                holder.bind(cardList[position])
                mBoundViewHolders.add(holder)
            }
        }
    }

    override fun getItemCount(): Int {
        return cardList.size
    }

    class EpisodeCardViewHolder
    constructor(
        itemView: View,
        private val hasDownloadSupport: Boolean,
        private val clickCallback: (EpisodeClickEvent) -> Unit,
        private val downloadClickCallback: (DownloadClickEvent) -> Unit,
    ) : RecyclerView.ViewHolder(itemView), DownloadButtonViewHolder {
        override var downloadButton = EasyDownloadButton()

        private val episodeText: TextView = itemView.episode_text
        private val episodeFiller: MaterialButton? = itemView.episode_filler
        private val episodeRating: TextView? = itemView.episode_rating
        private val episodeDescript: TextView? = itemView.episode_descript
        private val episodeProgress: ContentLoadingProgressBar? = itemView.episode_progress
        private val episodePoster: ImageView? = itemView.episode_poster

        private val episodeDownloadBar: ContentLoadingProgressBar = itemView.result_episode_progress_downloaded
        private val episodeDownloadImage: ImageView = itemView.result_episode_download

        private val episodeHolder = itemView.episode_holder

        var localCard: ResultEpisode? = null

        @SuppressLint("SetTextI18n")
        fun bind(card: ResultEpisode) {
            localCard = card

            val name = if (card.name == null) "${episodeText.context.getString(R.string.episode)} ${card.episode}" else "${card.episode}. ${card.name}"
            episodeFiller?.isVisible = card.isFiller == true
            episodeText.text = name//if(card.isFiller == true) episodeText.context.getString(R.string.filler).format(name) else name
            episodeText.isSelected = true // is needed for text repeating

            val displayPos = card.getDisplayPosition()
            episodeProgress?.max = (card.duration / 1000).toInt()
            episodeProgress?.progress = (displayPos / 1000).toInt()

            episodeProgress?.visibility = if (displayPos > 0L) View.VISIBLE else View.GONE

            if (card.poster != null) {
                episodePoster?.visibility = View.VISIBLE
                episodePoster?.setImage(card.poster)
            } else {
                episodePoster?.visibility = View.GONE
            }

            if (card.rating != null) {
                episodeRating?.text = episodeRating?.context?.getString(R.string.rated_format)?.format(card.rating.toFloat() / 10f)
            } else {
                episodeRating?.text = ""
            }

            if (card.description != null) {
                episodeDescript?.visibility = View.VISIBLE
                episodeDescript?.text = card.description
            } else {
                episodeDescript?.visibility = View.GONE
            }

            episodePoster?.setOnClickListener {
                clickCallback.invoke(EpisodeClickEvent(ACTION_CLICK_DEFAULT, card))
            }

            episodePoster?.setOnLongClickListener {
                clickCallback.invoke(EpisodeClickEvent(ACTION_SHOW_TOAST, card))
                return@setOnLongClickListener true
            }

            episodeHolder.setOnClickListener {
                clickCallback.invoke(EpisodeClickEvent(ACTION_CLICK_DEFAULT, card))
            }

            if (episodeHolder.context.isTrueTvSettings()) {
                episodeHolder.isFocusable = true
                episodeHolder.isFocusableInTouchMode = true
                episodeHolder.touchscreenBlocksFocus = false
            }

            episodeHolder.setOnLongClickListener {
                clickCallback.invoke(EpisodeClickEvent(ACTION_SHOW_OPTIONS, card))

                return@setOnLongClickListener true
            }

            episodeDownloadImage.isVisible = hasDownloadSupport
            episodeDownloadBar.isVisible = hasDownloadSupport
        }

        override fun reattachDownloadButton() {
            downloadButton.dispose()
            val card = localCard
            if (hasDownloadSupport && card != null) {
                val downloadInfo = VideoDownloadManager.getDownloadFileInfoAndUpdateSettings(itemView.context, card.id)

                downloadButton.setUpButton(
                    downloadInfo?.fileLength, downloadInfo?.totalBytes, episodeDownloadBar, episodeDownloadImage, null,
                    VideoDownloadHelper.DownloadEpisodeCached(
                        card.name,
                        card.poster,
                        card.episode,
                        card.season,
                        card.id,
                        card.parentId,
                        card.rating,
                        card.description,
                        System.currentTimeMillis(),
                    )
                ) {
                    if (it.action == DOWNLOAD_ACTION_DOWNLOAD) {
                        clickCallback.invoke(EpisodeClickEvent(ACTION_DOWNLOAD_EPISODE, card))
                    } else {
                        downloadClickCallback.invoke(it)
                    }
                }
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/result/ImageAdapter.kt
================================================
package com.lagradost.cloudstream3.ui.result

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageView
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTrueTvSettings

/*
class ImageAdapter(context: Context, val resource: Int) : ArrayAdapter<Int>(context, resource) {
    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
        val newConvertView = convertView ?: run {
            val mInflater = context
                .getSystemService(Activity.LAYOUT_INFLATER_SERVICE) as LayoutInflater
            mInflater.inflate(resource, null)
        }
        getItem(position)?.let { (newConvertView as? ImageView?)?.setImageResource(it) }
        return newConvertView
    }
}*/
const val IMAGE_CLICK = 0
const val IMAGE_LONG_CLICK = 1

class ImageAdapter(
    val layout: Int,
    val clickCallback: ((Int) -> Unit)? = null,
    val nextFocusUp: Int? = null,
    val nextFocusDown: Int? = null,
) :
    RecyclerView.Adapter<RecyclerView.ViewHolder>() {
    private val images: MutableList<Int> = mutableListOf()

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
        return ImageViewHolder(
            LayoutInflater.from(parent.context).inflate(layout, parent, false)
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is ImageViewHolder -> {
                holder.bind(images[position], clickCallback, nextFocusUp, nextFocusDown)
            }
        }
    }

    override fun getItemCount(): Int {
        return images.size
    }

    override fun getItemId(position: Int): Long {
        return images[position].toLong()
    }

    fun updateList(newList: List<Int>) {
        val diffResult = DiffUtil.calculateDiff(
            DiffCallback(this.images, newList)
        )

        images.clear()
        images.addAll(newList)

        diffResult.dispatchUpdatesTo(this)
    }

    class ImageViewHolder
    constructor(itemView: View) :
        RecyclerView.ViewHolder(itemView) {
        fun bind(
            img: Int,
            clickCallback: ((Int) -> Unit)?,
            nextFocusUp: Int?,
            nextFocusDown: Int?,
        ) {
            (itemView as? ImageView?)?.apply {
                setImageResource(img)
                if (nextFocusDown != null) {
                    this.nextFocusDownId = nextFocusDown
                }
                if (nextFocusUp != null) {
                    this.nextFocusUpId = nextFocusUp
                }
                if (clickCallback != null) {
                    if (context.isTrueTvSettings()) {
                        isClickable = true
                        isLongClickable = true
                        isFocusable = true
                        isFocusableInTouchMode = true
                    }
                    setOnClickListener {
                        clickCallback.invoke(IMAGE_CLICK)
                    }
                    setOnLongClickListener {
                        clickCallback.invoke(IMAGE_LONG_CLICK)
                        return@setOnLongClickListener true
                    }
                }
            }
        }
    }
}

class DiffCallback<T>(private val oldList: List<T>, private val newList: List<T>) :
    DiffUtil.Callback() {
    override fun areItemsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition] == newList[newItemPosition]

    override fun getOldListSize() = oldList.size

    override fun getNewListSize() = newList.size

    override fun areContentsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition] == newList[newItemPosition]
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/result/ResultViewModel.kt
================================================
package com.lagradost.cloudstream3.ui.result

import android.util.Log
import androidx.lifecycle.LiveData
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.getApiDubstatusSettings
import com.lagradost.cloudstream3.APIHolder.getApiFromNameNull
import com.lagradost.cloudstream3.APIHolder.getApiFromUrlNull
import com.lagradost.cloudstream3.APIHolder.getId
import com.lagradost.cloudstream3.AcraApplication.Companion.context
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.LoadResponse.Companion.addTrailer
import com.lagradost.cloudstream3.animeproviders.GogoanimeProvider
import com.lagradost.cloudstream3.animeproviders.NineAnimeProvider
import com.lagradost.cloudstream3.metaproviders.SyncRedirector
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.safeApiCall
import com.lagradost.cloudstream3.syncproviders.SyncAPI
import com.lagradost.cloudstream3.ui.APIRepository
import com.lagradost.cloudstream3.ui.WatchType
import com.lagradost.cloudstream3.ui.player.IGenerator
import com.lagradost.cloudstream3.ui.player.RepoLinkGenerator
import com.lagradost.cloudstream3.ui.player.SubtitleData
import com.lagradost.cloudstream3.utils.DOWNLOAD_HEADER_CACHE
import com.lagradost.cloudstream3.utils.DataStoreHelper
import com.lagradost.cloudstream3.utils.DataStoreHelper.getBookmarkedData
import com.lagradost.cloudstream3.utils.DataStoreHelper.getResultSeason
import com.lagradost.cloudstream3.utils.DataStoreHelper.getResultWatchState
import com.lagradost.cloudstream3.utils.DataStoreHelper.getViewPos
import com.lagradost.cloudstream3.utils.DataStoreHelper.setBookmarkedData
import com.lagradost.cloudstream3.utils.DataStoreHelper.setDub
import com.lagradost.cloudstream3.utils.DataStoreHelper.setResultSeason
import com.lagradost.cloudstream3.utils.DataStoreHelper.setResultWatchState
import com.lagradost.cloudstream3.utils.ExtractorLink
import com.lagradost.cloudstream3.utils.FillerEpisodeCheck.getFillerEpisodes
import com.lagradost.cloudstream3.utils.VideoDownloadHelper
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext
import kotlin.collections.set

const val EPISODE_RANGE_SIZE = 50
const val EPISODE_RANGE_OVERLOAD = 60

class ResultViewModel : ViewModel() {
    private var repo: APIRepository? = null
    private var generator: IGenerator? = null

    private val _resultResponse: MutableLiveData<Resource<LoadResponse>> = MutableLiveData()
    private val _episodes: MutableLiveData<List<ResultEpisode>> = MutableLiveData()
    private val episodeById: MutableLiveData<HashMap<Int, Int>> =
        MutableLiveData() // lookup by ID to get Index

    private val _publicEpisodes: MutableLiveData<Resource<List<ResultEpisode>>> = MutableLiveData()
    private val _publicEpisodesCount: MutableLiveData<Int> = MutableLiveData() // before the sorting
    private val _rangeOptions: MutableLiveData<List<String>> = MutableLiveData()
    val selectedRange: MutableLiveData<String> = MutableLiveData()
    private val selectedRangeInt: MutableLiveData<Int> = MutableLiveData()
    val rangeOptions: LiveData<List<String>> = _rangeOptions

    val result: LiveData<Resource<LoadResponse>> get() = _resultResponse

    val episodes: LiveData<List<ResultEpisode>> get() = _episodes
    val publicEpisodes: LiveData<Resource<List<ResultEpisode>>> get() = _publicEpisodes
    val publicEpisodesCount: LiveData<Int> get() = _publicEpisodesCount

    val dubStatus: LiveData<DubStatus> get() = _dubStatus
    private val _dubStatus: MutableLiveData<DubStatus> = MutableLiveData()

    private val page: MutableLiveData<LoadResponse> = MutableLiveData()
    val id: MutableLiveData<Int> = MutableLiveData()
    val selectedSeason: MutableLiveData<Int> = MutableLiveData(-2)
    val seasonSelections: MutableLiveData<List<Int?>> = MutableLiveData()

    val dubSubSelections: LiveData<Set<DubStatus>> get() = _dubSubSelections
    private val _dubSubSelections: MutableLiveData<Set<DubStatus>> = MutableLiveData()

    val dubSubEpisodes: LiveData<Map<DubStatus, List<ResultEpisode>>?> get() = _dubSubEpisodes
    private val _dubSubEpisodes: MutableLiveData<Map<DubStatus, List<ResultEpisode>>?> =
        MutableLiveData()

    private val _watchStatus: MutableLiveData<WatchType> = MutableLiveData()
    val watchStatus: LiveData<WatchType> get() = _watchStatus

    fun updateWatchStatus(status: WatchType) = viewModelScope.launch {
        val currentId = id.value ?: return@launch
        _watchStatus.postValue(status)
        val resultPage = page.value

        withContext(Dispatchers.IO) {
            setResultWatchState(currentId, status.internalId)
            if (resultPage != null) {
                val current = getBookmarkedData(currentId)
                val currentTime = System.currentTimeMillis()
                setBookmarkedData(
                    currentId,
                    DataStoreHelper.BookmarkedData(
                        currentId,
                        current?.bookmarkedTime ?: currentTime,
                        currentTime,
                        resultPage.name,
                        resultPage.url,
                        resultPage.apiName,
                        resultPage.type,
                        resultPage.posterUrl,
                        resultPage.year
                    )
                )
            }
        }
    }

    companion object {
        const val TAG = "RVM"
    }

    var lastMeta: SyncAPI.SyncResult? = null
    private fun applyMeta(resp: LoadResponse, meta: SyncAPI.SyncResult?): LoadResponse {
        if (meta == null) return resp
        lastMeta = meta
        return resp.apply {
            Log.i(TAG, "applyMeta")

            duration = duration ?: meta.duration
            rating = rating ?: meta.publicScore
            tags = tags ?: meta.genres
            plot = if (plot.isNullOrBlank()) meta.synopsis else plot
            addTrailer(meta.trailerUrl)
            posterUrl = posterUrl ?: meta.posterUrl ?: meta.backgroundPosterUrl
            actors = actors ?: meta.actors

            val realRecommendations = ArrayList<SearchResponse>()
            val apiNames = listOf(GogoanimeProvider().name, NineAnimeProvider().name)
            meta.recommendations?.forEach { rec ->
                apiNames.forEach { name ->
                    realRecommendations.add(rec.copy(apiName = name))
                }
            }

            recommendations = recommendations?.union(realRecommendations)?.toList()
                ?: realRecommendations
        }
    }

    fun setMeta(meta: SyncAPI.SyncResult) {
        Log.i(TAG, "setMeta")
        (result.value as? Resource.Success<LoadResponse>?)?.value?.let { resp ->
            _resultResponse.postValue(Resource.Success(applyMeta(resp, meta)))
        }
    }

    private fun loadWatchStatus(localId: Int? = null) {
        val currentId = localId ?: id.value ?: return
        val currentWatch = getResultWatchState(currentId)
        _watchStatus.postValue(currentWatch)
    }

    private fun filterEpisodes(list: List<ResultEpisode>?, selection: Int?, range: Int?) {
        if (list == null) return
        val seasonTypes = HashMap<Int?, Boolean>()
        for (i in list) {
            if (!seasonTypes.containsKey(i.season)) {
                seasonTypes[i.season] = true
            }
        }
        val seasons = seasonTypes.toList().map { it.first }.sortedBy { it }
        seasonSelections.postValue(seasons)
        if (seasons.isEmpty()) { // WHAT THE FUCK DID YOU DO????? HOW DID YOU DO THIS
            _publicEpisodes.postValue(Resource.Success(emptyList()))
            return
        }

        val realSelection = if (!seasonTypes.containsKey(selection)) seasons.first() else selection
        val internalId = id.value

        if (internalId != null) setResultSeason(internalId, realSelection)

        selectedSeason.postValue(realSelection ?: -2)

        var currentList = list.filter { it.season == realSelection }
        _publicEpisodesCount.postValue(currentList.size)

        val rangeList = ArrayList<String>()
        for (i in currentList.indices step EPISODE_RANGE_SIZE) {
            if (i + EPISODE_RANGE_SIZE < currentList.size) {
                rangeList.add("${i + 1}-${i + EPISODE_RANGE_SIZE}")
            } else {
                rangeList.add("${i + 1}-${currentList.size}")
            }
        }

        val cRange = range ?: if (selection != null) {
            0
        } else {
            selectedRangeInt.value ?: 0
        }

        val realRange = if (cRange * EPISODE_RANGE_SIZE > currentList.size) {
            currentList.size / EPISODE_RANGE_SIZE
        } else {
            cRange
        }

        if (currentList.size > EPISODE_RANGE_OVERLOAD) {
            currentList = currentList.subList(
                realRange * EPISODE_RANGE_SIZE,
                minOf(currentList.size, (realRange + 1) * EPISODE_RANGE_SIZE)
            )
            _rangeOptions.postValue(rangeList)
            selectedRangeInt.postValue(realRange)
            selectedRange.postValue(rangeList[realRange])
        } else {
            val allRange = "1-${currentList.size}"
            _rangeOptions.postValue(listOf(allRange))
            selectedRangeInt.postValue(0)
            selectedRange.postValue(allRange)
        }

        _publicEpisodes.postValue(Resource.Success(currentList))
    }

    fun changeSeason(selection: Int?) {
        filterEpisodes(_episodes.value, selection, null)
    }

    fun changeRange(range: Int?) {
        filterEpisodes(_episodes.value, null, range)
    }

    fun changeDubStatus(status: DubStatus?) {
        if (status == null) return
        dubSubEpisodes.value?.get(status)?.let { episodes ->
            id.value?.let {
                setDub(it, status)
            }
            _dubStatus.postValue(status!!)
            updateEpisodes(null, episodes, null)
        }
    }

    suspend fun loadEpisode(
        episode: ResultEpisode,
        isCasting: Boolean,
        clearCache: Boolean = false
    ): Resource<Pair<Set<ExtractorLink>, Set<SubtitleData>>> {
        return safeApiCall {
            val index = _episodes.value?.indexOf(episode) ?: episode.index

            val currentLinks = mutableSetOf<ExtractorLink>()
            val currentSubs = mutableSetOf<SubtitleData>()

            generator?.goto(index)
            generator?.generateLinks(clearCache, isCasting, {
                it.first?.let { link ->
                    currentLinks.add(link)
                }
            }, { sub ->
                currentSubs.add(sub)
            })

            return@safeApiCall Pair(
                currentLinks.toSet(),
                currentSubs.toSet()
            )
        }
    }

    fun getGenerator(episode: ResultEpisode): IGenerator? {
        val index = _episodes.value?.indexOf(episode) ?: episode.index

        generator?.goto(index)
        return generator
    }

    private fun updateEpisodes(localId: Int?, list: List<ResultEpisode>, selection: Int?) {
        _episodes.postValue(list)
        generator = RepoLinkGenerator(list)

        val set = HashMap<Int, Int>()
        val range = selectedRangeInt.value

        list.withIndex().forEach { set[it.value.id] = it.index }
        episodeById.postValue(set)

        filterEpisodes(
            list,
            if (selection == -1) getResultSeason(localId ?: id.value ?: return) else selection,
            range
        )
    }

    fun reloadEpisodes() {
        val current = _episodes.value ?: return
        val copy = current.map {
            val posDur = getViewPos(it.id)
            it.copy(position = posDur?.position ?: 0, duration = posDur?.duration ?: 0)
        }
        updateEpisodes(null, copy, selectedSeason.value)
    }

    private fun filterName(name: String?): String? {
        if (name == null) return null
        Regex("[eE]pisode [0-9]*(.*)").find(name)?.groupValues?.get(1)?.let {
            if (it.isEmpty())
                return null
        }
        return name
    }

    fun load(url: String, apiName: String, showFillers: Boolean) = viewModelScope.launch {
        _publicEpisodes.postValue(Resource.Loading())
        _resultResponse.postValue(Resource.Loading(url))

        val api = getApiFromNameNull(apiName) ?: getApiFromUrlNull(url)
        if (api == null) {
            _resultResponse.postValue(
                Resource.Failure(
                    false,
                    null,
                    null,
                    "This provider does not exist"
                )
            )
            return@launch
        }

        val validUrlResource = safeApiCall {
            SyncRedirector.redirect(
                url,
                api.mainUrl.replace(NineAnimeProvider().mainUrl, "9anime")
                    .replace(GogoanimeProvider().mainUrl, "gogoanime")
            )
        }

        if (validUrlResource !is Resource.Success) {
            if (validUrlResource is Resource.Failure) {
                _resultResponse.postValue(validUrlResource)
            }

            return@launch
        }
        val validUrl = validUrlResource.value

        _resultResponse.postValue(Resource.Loading(validUrl))

        _apiName.postValue(apiName)

        repo = APIRepository(api)

        val data = repo?.load(validUrl) ?: return@launch

        _resultResponse.postValue(data)

        when (data) {
            is Resource.Success -> {
                val loadResponse = applyMeta(data.value, lastMeta)
                page.postValue(loadResponse)
                val mainId = loadResponse.getId()
                id.postValue(mainId)
                loadWatchStatus(mainId)

                setKey(
                    DOWNLOAD_HEADER_CACHE,
                    mainId.toString(),
                    VideoDownloadHelper.DownloadHeaderCached(
                        apiName,
                        validUrl,
                        loadResponse.type,
                        loadResponse.name,
                        loadResponse.posterUrl,
                        mainId,
                        System.currentTimeMillis(),
                    )
                )

                when (loadResponse) {
                    is AnimeLoadResponse -> {
                        if (loadResponse.episodes.isEmpty()) {
                            _dubSubEpisodes.postValue(emptyMap())
                            return@launch
                        }

//                      val status = getDub(mainId)
                        val statuses = loadResponse.episodes.map { it.key }

                        // Extremely bruh to have to take in context here, but I'm not sure how to do this in a better way :(
                        val preferDub = context?.getApiDubstatusSettings()
                            ?.contains(DubStatus.Dubbed) == true

                        // 3 statements because there can be only dub even if you do not prefer it.
                        val dubStatus =
                            if (preferDub && statuses.contains(DubStatus.Dubbed)) DubStatus.Dubbed
                            else if (!preferDub && statuses.contains(DubStatus.Subbed)) DubStatus.Subbed
                            else statuses.first()

                        val fillerEpisodes =
                            if (showFillers) safeApiCall { getFillerEpisodes(loadResponse.name) } else null

                        val existingEpisodes = HashSet<Int>()
                        val res = loadResponse.episodes.map { ep ->
                            val episodes = ArrayList<ResultEpisode>()
                            val idIndex = ep.key.id
                            for ((index, i) in ep.value.withIndex()) {
                                val episode = i.episode ?: (index + 1)
                                val id = mainId + episode + idIndex * 1000000
                                if (!existingEpisodes.contains(episode)) {
                                    existingEpisodes.add(id)
                                    episodes.add(buildResultEpisode(
                                        loadResponse.name,
                                        filterName(i.name),
                                        i.posterUrl,
                                        episode,
                                        i.season,
                                        i.data,
                                        apiName,
                                        id,
                                        index,
                                        i.rating,
                                        i.description,
                                        if (fillerEpisodes is Resource.Success) fillerEpisodes.value?.let {
                                            it.contains(episode) && it[episode] == true
                                        } ?: false else false,
                                        loadResponse.type,
                                        mainId
                                    ))
                                }
                            }

                            Pair(ep.key, episodes)
                        }.toMap()

                        // These posts needs to be in this order as to make the preferDub in ResultFragment work
                        _dubSubEpisodes.postValue(res)
                        res[dubStatus]?.let { episodes ->
                            updateEpisodes(mainId, episodes, -1)
                        }
                        _dubStatus.postValue(dubStatus)
                        _dubSubSelections.postValue(loadResponse.episodes.keys)
                    }

                    is TvSeriesLoadResponse -> {
                        val episodes = ArrayList<ResultEpisode>()
                        val existingEpisodes = HashSet<Int>()
                        for ((index, episode) in loadResponse.episodes.sortedBy {
                            (it.season?.times(10000) ?: 0) + (it.episode ?: 0)
                        }.withIndex()) {
                            val episodeIndex = episode.episode ?: (index + 1)
                            val id =
                                mainId + (episode.season?.times(100000) ?: 0) + episodeIndex + 1
                            if (!existingEpisodes.contains(id)) {
                                existingEpisodes.add(id)
                                episodes.add(
                                    buildResultEpisode(
                                        loadResponse.name,
                                        filterName(episode.name),
                                        episode.posterUrl,
                                        episodeIndex,
                                        episode.season,
                                        episode.data,
                                        apiName,
                                        id,
                                        index,
                                        episode.rating,
                                        episode.description,
                                        null,
                                        loadResponse.type,
                                        mainId
                                    )
                                )
                            }
                        }
                        updateEpisodes(mainId, episodes, -1)
                    }
                    is MovieLoadResponse -> {
                        buildResultEpisode(
                            loadResponse.name,
                            loadResponse.name,
                            null,
                            0,
                            null,
                            loadResponse.dataUrl,
                            loadResponse.apiName,
                            (mainId), // HAS SAME ID
                            0,
                            null,
                            null,
                            null,
                            loadResponse.type,
                            mainId
                        ).let {
                            updateEpisodes(mainId, listOf(it), -1)
                        }
                    }
                    is TorrentLoadResponse -> {
                        updateEpisodes(
                            mainId, listOf(
                                buildResultEpisode(
                                    loadResponse.name,
                                    loadResponse.name,
                                    null,
                                    0,
                                    null,
                                    loadResponse.torrent ?: loadResponse.magnet ?: "",
                                    loadResponse.apiName,
                                    (mainId), // HAS SAME ID
                                    0,
                                    null,
                                    null,
                                    null,
                                    loadResponse.type,
                                    mainId
                                )
                            ), -1
                        )
                    }
                }
            }
            else -> Unit
        }
    }

    private var _apiName: MutableLiveData<String> = MutableLiveData()
    val apiName: LiveData<String> get() = _apiName

}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/result/SyncViewModel.kt
================================================
package com.lagradost.cloudstream3.ui.result

import android.util.Log
import androidx.lifecycle.LiveData
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.lagradost.cloudstream3.apmap
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.SyncApis
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.aniListApi
import com.lagradost.cloudstream3.syncproviders.OAuth2API.Companion.malApi
import com.lagradost.cloudstream3.syncproviders.SyncAPI
import com.lagradost.cloudstream3.utils.SyncUtil
import kotlinx.coroutines.launch


data class CurrentSynced(
    val name: String,
    val idPrefix: String,
    val isSynced: Boolean,
    val hasAccount: Boolean,
    val icon: Int,
)

class SyncViewModel : ViewModel() {
    companion object {
        const val TAG = "SYNCVM"
    }

    private val repos = SyncApis

    private val _metaResponse: MutableLiveData<Resource<SyncAPI.SyncResult>> =
        MutableLiveData()

    val metadata: LiveData<Resource<SyncAPI.SyncResult>> get() = _metaResponse

    private val _userDataResponse: MutableLiveData<Resource<SyncAPI.SyncStatus>?> =
        MutableLiveData(null)

    val userData: LiveData<Resource<SyncAPI.SyncStatus>?> get() = _userDataResponse

    // prefix, id
    private var syncs = mutableMapOf<String, String>()
    private val _syncIds: MutableLiveData<MutableMap<String, String>> =
        MutableLiveData(mutableMapOf())
    val syncIds: LiveData<MutableMap<String, String>> get() = _syncIds

    private val _currentSynced: MutableLiveData<List<CurrentSynced>> =
        MutableLiveData(getMissing())

    // pair of name idPrefix isSynced
    val synced: LiveData<List<CurrentSynced>> get() = _currentSynced

    private fun getMissing(): List<CurrentSynced> {
        return repos.map {
            CurrentSynced(
                it.name,
                it.idPrefix,
                syncs.containsKey(it.idPrefix),
                it.hasAccount(),
                it.icon,
            )
        }
    }

    fun updateSynced() {
        Log.i(TAG, "updateSynced")
        _currentSynced.postValue(getMissing())
    }

    private fun addSync(idPrefix: String, id: String): Boolean {
        if (syncs[idPrefix] == id) return false
        Log.i(TAG, "addSync $idPrefix = $id")

        syncs[idPrefix] = id
        _syncIds.postValue(syncs)
        return true
    }

    fun addSyncs(map: Map<String, String>?): Boolean {
        var isValid = false

        map?.forEach { (prefix, id) ->
            isValid = addSync(prefix, id) || isValid
        }
        return isValid
    }

    private fun setMalId(id: String?): Boolean {
        return addSync(malApi.idPrefix, id ?: return false)
    }

    private fun setAniListId(id: String?): Boolean {
        return addSync(aniListApi.idPrefix, id ?: return false)
    }

    var hasAddedFromUrl: HashSet<String> = hashSetOf()

    fun addFromUrl(url: String?) = viewModelScope.launch {
        Log.i(TAG, "addFromUrl = $url")

        if (url == null || hasAddedFromUrl.contains(url)) return@launch
        SyncUtil.getIdsFromUrl(url)?.let { (malId, aniListId) ->
            hasAddedFromUrl.add(url)

            setMalId(malId)
            setAniListId(aniListId)
            updateSynced()
            if (malId != null || aniListId != null) {
                Log.i(TAG, "addFromUrl->updateMetaAndUser $malId $aniListId")
                updateMetaAndUser()
            }
        }
    }

    fun setEpisodesDelta(delta: Int) {
        Log.i(TAG, "setEpisodesDelta = $delta")

        val user = userData.value
        if (user is Resource.Success) {
            user.value.watchedEpisodes?.plus(
                delta
            )?.let { episode ->
                setEpisodes(episode)
            }
        }
    }

    fun setEpisodes(episodes: Int) {
        Log.i(TAG, "setEpisodes = $episodes")

        if (episodes < 0) return
        val meta = metadata.value
        if (meta is Resource.Success) {
            meta.value.totalEpisodes?.let { max ->
                if (episodes > max) {
                    setEpisodes(max)
                    return
                }
            }
        }

        val user = userData.value
        if (user is Resource.Success) {
            _userDataResponse.postValue(Resource.Success(user.value.copy(watchedEpisodes = episodes)))
        }
    }

    fun setScore(score: Int) {
        Log.i(TAG, "setScore = $score")
        val user = userData.value
        if (user is Resource.Success) {
            _userDataResponse.postValue(Resource.Success(user.value.copy(score = score)))
        }
    }

    fun setStatus(which: Int) {
        Log.i(TAG, "setStatus = $which")
        if (which < -1 || which > 5) return // validate input
        val user = userData.value
        if (user is Resource.Success) {
            _userDataResponse.postValue(Resource.Success(user.value.copy(status = which)))
        }
    }

    fun publishUserData() = viewModelScope.launch {
        Log.i(TAG, "publishUserData")
        val user = userData.value
        if (user is Resource.Success) {
            syncs.forEach { (prefix, id) ->
                repos.firstOrNull { it.idPrefix == prefix }?.score(id, user.value)
            }
        }
        updateUserData()
    }

    fun modifyMaxEpisode(episodeNum: Int) {
        Log.i(TAG, "modifyMaxEpisode = $episodeNum")
        modifyData { status ->
            status.copy(watchedEpisodes = maxOf(episodeNum, status.watchedEpisodes ?: return@modifyData null))
        }
    }

    /// modifies the current sync data, return null if you don't want to change it
    private fun modifyData(update: ((SyncAPI.SyncStatus) -> (SyncAPI.SyncStatus?))) =
        viewModelScope.launch {
            syncs.apmap { (prefix, id) ->
                repos.firstOrNull { it.idPrefix == prefix }?.let { repo ->
                    if (repo.hasAccount()) {
                        val result = repo.getStatus(id)
                        if (result is Resource.Success) {
                            update(result.value)?.let { newData ->
                                Log.i(TAG, "modifyData ${repo.name} => $newData")
                                repo.score(id, newData)
                            }
                        } else if (result is Resource.Failure){
                            Log.e(TAG, "modifyData getStatus error ${result.errorString}")
                        }
                    }
                }
            }
        }

    fun updateUserData() = viewModelScope.launch {
        Log.i(TAG, "updateUserData")
        _userDataResponse.postValue(Resource.Loading())
        var lastError: Resource<SyncAPI.SyncStatus> = Resource.Failure(false, null, null, "No data")
        syncs.forEach { (prefix, id) ->
            repos.firstOrNull { it.idPrefix == prefix }?.let { repo ->
                if (repo.hasAccount()) {
                    val result = repo.getStatus(id)
                    if (result is Resource.Success) {
                        _userDataResponse.postValue(result)
                        return@launch
                    } else if (result is Resource.Failure) {
                        Log.e(TAG, "updateUserData error ${result.errorString}")
                        lastError = result
                    }
                }
            }
        }
        _userDataResponse.postValue(lastError)
    }

    private fun updateMetadata() = viewModelScope.launch {
        Log.i(TAG, "updateMetadata")

        _metaResponse.postValue(Resource.Loading())
        var lastError: Resource<SyncAPI.SyncResult> = Resource.Failure(false, null, null, "No data")
        syncs.forEach { (prefix, id) ->
            repos.firstOrNull { it.idPrefix == prefix }?.let { repo ->
                if (repo.hasAccount()) {
                    val result = repo.getResult(id)
                    if (result is Resource.Success) {
                        _metaResponse.postValue(result)
                        return@launch
                    } else if (result is Resource.Failure) {
                        Log.e(TAG, "updateMetadata error ${result.errorString}")
                        lastError = result
                    }
                }
            }
        }
        _metaResponse.postValue(lastError)
        setEpisodesDelta(0)
    }

    fun updateMetaAndUser() {
        Log.i(TAG, "updateMetaAndUser")
        updateMetadata()
        updateUserData()
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/search/SearchAdaptor.kt
================================================
package com.lagradost.cloudstream3.ui.search

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.FrameLayout
import android.widget.ImageView
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.SearchResponse
import com.lagradost.cloudstream3.ui.AutofitRecyclerView
import com.lagradost.cloudstream3.utils.UIHelper.IsBottomLayout
import com.lagradost.cloudstream3.utils.UIHelper.toPx
import kotlinx.android.synthetic.main.search_result_compact.view.*
import kotlin.math.roundToInt

const val SEARCH_ACTION_LOAD = 0
const val SEARCH_ACTION_SHOW_METADATA = 1
const val SEARCH_ACTION_PLAY_FILE = 2
const val SEARCH_ACTION_FOCUSED = 4

class SearchClickCallback(val action: Int, val view: View, val position : Int, val card: SearchResponse)

class SearchAdapter(
    private val cardList: MutableList<SearchResponse>,
    private val resView: AutofitRecyclerView,
    private val clickCallback: (SearchClickCallback) -> Unit,
) : RecyclerView.Adapter<RecyclerView.ViewHolder>() {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
        val layout = if(parent.context.IsBottomLayout()) R.layout.search_result_grid_expanded else R.layout.search_result_grid
        return CardViewHolder(
            LayoutInflater.from(parent.context).inflate(layout, parent, false),
            clickCallback,
            resView
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is CardViewHolder -> {
                holder.bind(cardList[position], position)
            }
        }
    }

    override fun getItemCount(): Int {
        return cardList.size
    }

    fun updateList(newList: List<SearchResponse>) {
        val diffResult = DiffUtil.calculateDiff(
            SearchResponseDiffCallback(this.cardList, newList)
        )

        cardList.clear()
        cardList.addAll(newList)

        diffResult.dispatchUpdatesTo(this)
    }

    class CardViewHolder
    constructor(
        itemView: View,
        private val clickCallback: (SearchClickCallback) -> Unit,
        resView: AutofitRecyclerView
    ) :
        RecyclerView.ViewHolder(itemView) {
        val cardView: ImageView = itemView.imageView

        private val compactView = false//itemView.context.getGridIsCompact()
        private val coverHeight: Int = if (compactView) 80.toPx else (resView.itemWidth / 0.68).roundToInt()

        fun bind(card: SearchResponse, position: Int) {
            if (!compactView) {
                cardView.apply {
                    layoutParams = FrameLayout.LayoutParams(
                        ViewGroup.LayoutParams.MATCH_PARENT,
                        coverHeight
                    )
                }
            }

            SearchResultBuilder.bind(clickCallback, card, position, itemView)
        }
    }
}

class SearchResponseDiffCallback(private val oldList: List<SearchResponse>, private val newList: List<SearchResponse>) :
    DiffUtil.Callback() {
    override fun areItemsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition].name == newList[newItemPosition].name

    override fun getOldListSize() = oldList.size

    override fun getNewListSize() = newList.size

    override fun areContentsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition] == newList[newItemPosition]
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/search/SearchFragment.kt
================================================
package com.lagradost.cloudstream3.ui.search

import android.content.res.Configuration
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.view.WindowManager
import android.widget.AbsListView
import android.widget.ArrayAdapter
import android.widget.ImageView
import android.widget.ListView
import androidx.appcompat.widget.SearchView
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.fragment.app.activityViewModels
import androidx.preference.PreferenceManager
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.bottomsheet.BottomSheetDialog
import com.google.android.material.button.MaterialButton
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.filterProviderByPreferredMedia
import com.lagradost.cloudstream3.APIHolder.getApiFromName
import com.lagradost.cloudstream3.APIHolder.getApiProviderLangSettings
import com.lagradost.cloudstream3.APIHolder.getApiSettings
import com.lagradost.cloudstream3.AcraApplication.Companion.removeKey
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.observe
import com.lagradost.cloudstream3.ui.APIRepository
import com.lagradost.cloudstream3.ui.home.HomeFragment
import com.lagradost.cloudstream3.ui.home.HomeFragment.Companion.currentSpan
import com.lagradost.cloudstream3.ui.home.HomeFragment.Companion.loadHomepageList
import com.lagradost.cloudstream3.ui.home.ParentItemAdapter
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTrueTvSettings
import com.lagradost.cloudstream3.utils.DataStore.getKey
import com.lagradost.cloudstream3.utils.DataStore.setKey
import com.lagradost.cloudstream3.utils.SubtitleHelper
import com.lagradost.cloudstream3.utils.UIHelper.dismissSafe
import com.lagradost.cloudstream3.utils.UIHelper.fixPaddingStatusbar
import com.lagradost.cloudstream3.utils.UIHelper.getSpanCount
import com.lagradost.cloudstream3.utils.UIHelper.hideKeyboard
import kotlinx.android.synthetic.main.fragment_search.*
import java.util.concurrent.locks.ReentrantLock

const val SEARCH_PREF_TAGS = "search_pref_tags"
const val SEARCH_PREF_PROVIDERS = "search_pref_providers"

class SearchFragment : Fragment() {
    companion object {
        fun List<SearchResponse>.filterSearchResponse(): List<SearchResponse> {
            return this.filter { response ->
                if (response is AnimeSearchResponse) {
                    val status = response.dubStatus
                    (status.isNullOrEmpty()) || (status.any {
                        APIRepository.dubStatusActive.contains(it)
                    })
                } else {
                    true
                }
            }
        }
    }

    private val searchViewModel: SearchViewModel by activityViewModels()

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?,
    ): View? {
        activity?.window?.setSoftInputMode(
            WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE
        )
        return inflater.inflate(R.layout.fragment_search, container, false)
    }

    private fun fixGrid() {
        activity?.getSpanCount()?.let {
            currentSpan = it
        }
        search_autofit_results.spanCount = currentSpan
        currentSpan = currentSpan
        HomeFragment.configEvent.invoke(currentSpan)
    }

    override fun onConfigurationChanged(newConfig: Configuration) {
        super.onConfigurationChanged(newConfig)
        fixGrid()
    }

    override fun onDestroyView() {
        hideKeyboard()
        super.onDestroyView()
    }

    var selectedSearchTypes = mutableListOf<TvType>()
    var selectedApis = mutableSetOf<String>()

    fun search(query: String?) {
        if (query == null) return
        context?.getApiSettings()?.let { settings ->
            searchViewModel.searchAndCancel(
                query = query,
                providersActive = selectedApis.filter { name ->
                    settings.contains(name) && getApiFromName(name).supportedTypes.any {
                        selectedSearchTypes.contains(
                            it
                        )
                    }
                }.toSet()
            )
        }
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        context?.fixPaddingStatusbar(searchRoot)
        fixGrid()

        val adapter: RecyclerView.Adapter<RecyclerView.ViewHolder>? = activity?.let {
            SearchAdapter(
                ArrayList(),
                search_autofit_results,
            ) { callback ->
                SearchHelper.handleSearchClickCallback(activity, callback)
            }
        }

        search_autofit_results.adapter = adapter
        search_loading_bar.alpha = 0f

        val searchExitIcon =
            main_search.findViewById<ImageView>(androidx.appcompat.R.id.search_close_btn)
        // val searchMagIcon =
        //    main_search.findViewById<ImageView>(androidx.appcompat.R.id.search_mag_icon)
        //searchMagIcon.scaleX = 0.65f
        //searchMagIcon.scaleY = 0.65f

        context?.let { ctx ->
            val validAPIs = ctx.filterProviderByPreferredMedia()
            selectedApis = ctx.getKey(
                SEARCH_PREF_PROVIDERS,
                defVal = validAPIs.map { it.name }
            )!!.toMutableSet()
        }

        search_filter.setOnClickListener { searchView ->
            searchView?.context?.let { ctx ->
                val validAPIs = ctx.filterProviderByPreferredMedia(hasHomePageIsRequired = false)
                var currentValidApis = listOf<MainAPI>()
                val currentSelectedApis = if (selectedApis.isEmpty()) validAPIs.map { it.name }
                    .toMutableSet() else selectedApis
                val builder =
                    BottomSheetDialog(ctx)

                builder.setContentView(R.layout.home_select_mainpage)
                builder.show()
                builder.let { dialog ->
                    val isMultiLang = ctx.getApiProviderLangSettings().size > 1

                    val anime = dialog.findViewById<MaterialButton>(R.id.home_select_anime)
                    val cartoons = dialog.findViewById<MaterialButton>(R.id.home_select_cartoons)
                    val tvs = dialog.findViewById<MaterialButton>(R.id.home_select_tv_series)
                    val docs = dialog.findViewById<MaterialButton>(R.id.home_select_documentaries)
                    val movies = dialog.findViewById<MaterialButton>(R.id.home_select_movies)
                    val asian = dialog.findViewById<MaterialButton>(R.id.home_select_asian)
                    val cancelBtt = dialog.findViewById<MaterialButton>(R.id.cancel_btt)
                    val applyBtt = dialog.findViewById<MaterialButton>(R.id.apply_btt)

                    val pairList =
                        HomeFragment.getPairList(anime, cartoons, tvs, docs, movies, asian)

                    cancelBtt?.setOnClickListener {
                        dialog.dismissSafe()
                    }

                    cancelBtt?.setOnClickListener {
                        dialog.dismissSafe()
                    }

                    applyBtt?.setOnClickListener {
                        //if (currentApiName != selectedApiName) {
                        //    currentApiName?.let(callback)
                        //}
                        dialog.dismissSafe()
                    }

                    dialog.setOnDismissListener {
                        context?.setKey(SEARCH_PREF_PROVIDERS, currentSelectedApis.toList())
                        selectedApis = currentSelectedApis
                    }

                    val selectedSearchTypes = context?.getKey<List<String>>(SEARCH_PREF_TAGS)
                        ?.mapNotNull { listName ->
                            TvType.values().firstOrNull { it.name == listName }
                        }
                        ?.toMutableList()
                        ?: mutableListOf(TvType.Movie, TvType.TvSeries)

                    val listView = dialog.findViewById<ListView>(R.id.listview1)
                    val arrayAdapter = ArrayAdapter<String>(ctx, R.layout.sort_bottom_single_choice)
                    listView?.adapter = arrayAdapter
                    listView?.choiceMode = AbsListView.CHOICE_MODE_MULTIPLE

                    listView?.setOnItemClickListener { _, _, i, _ ->
                        if (!currentValidApis.isNullOrEmpty()) {
                            val api = currentValidApis[i].name
                            if (currentSelectedApis.contains(api)) {
                                listView.setItemChecked(i, false)
                                currentSelectedApis -= api
                            } else {
                                listView.setItemChecked(i, true)
                                currentSelectedApis += api
                            }
                        }
                    }

                    fun updateList() {
                        arrayAdapter.clear()
                        currentValidApis = validAPIs.filter { api ->
                            api.supportedTypes.any {
                                selectedSearchTypes.contains(it)
                            }
                        }.sortedBy { it.name.lowercase() }

                        val names = currentValidApis.map {
                            if (isMultiLang) "${
                                SubtitleHelper.getFlagFromIso(
                                    it.lang
                                )?.plus(" ") ?: ""
                            }${it.name}" else it.name
                        }
                        for ((index, api) in currentValidApis.map { it.name }.withIndex()) {
                            listView?.setItemChecked(index, currentSelectedApis.contains(api))
                        }

                        //arrayAdapter.notifyDataSetChanged()
                        arrayAdapter.addAll(names)
                        arrayAdapter.notifyDataSetChanged()
                    }

                    for ((button, validTypes) in pairList) {
                        val isValid =
                            validAPIs.any { api -> validTypes.any { api.supportedTypes.contains(it) } }
                        button?.isVisible = isValid
                        if (isValid) {
                            fun buttonContains(): Boolean {
                                return selectedSearchTypes.any { validTypes.contains(it) }
                            }

                            button?.isSelected = buttonContains()
                            button?.setOnClickListener {
                                selectedSearchTypes.clear()
                                selectedSearchTypes.addAll(validTypes)
                                for ((otherButton, _) in pairList) {
                                    otherButton?.isSelected = false
                                }
                                button.isSelected = true
                                updateList()
                            }

                            button?.setOnLongClickListener {
                                if (!buttonContains()) {
                                    button.isSelected = true
                                    selectedSearchTypes.addAll(validTypes)
                                } else {
                                    button.isSelected = false
                                    selectedSearchTypes.removeAll(validTypes)
                                }
                                updateList()
                                return@setOnLongClickListener true
                            }
                        }
                    }
                    updateList()
                }
            }
        }

        val pairList = HomeFragment.getPairList(
            search_select_anime,
            search_select_cartoons,
            search_select_tv_series,
            search_select_documentaries,
            search_select_movies,
            search_select_asian,
        )

        val settingsManager = context?.let { PreferenceManager.getDefaultSharedPreferences(it) }
        val isAdvancedSearch = settingsManager?.getBoolean("advanced_search", true) ?: true

        selectedSearchTypes = context?.getKey<List<String>>(SEARCH_PREF_TAGS)
            ?.mapNotNull { listName -> TvType.values().firstOrNull { it.name == listName } }
            ?.toMutableList()
            ?: mutableListOf(TvType.Movie, TvType.TvSeries)

        fun updateSelectedList(list: MutableList<TvType>) {
            selectedSearchTypes = list
            for ((button, validTypes) in pairList) {
                button?.isSelected = selectedSearchTypes.any { validTypes.contains(it) }
            }
        }

        context?.filterProviderByPreferredMedia()?.let { validAPIs ->
            for ((button, validTypes) in pairList) {
                val isValid =
                    validAPIs.any { api -> validTypes.any { api.supportedTypes.contains(it) } }
                button?.isVisible = isValid
                if (isValid) {
                    fun buttonContains(): Boolean {
                        return selectedSearchTypes.any { validTypes.contains(it) }
                    }

                    button?.isSelected = buttonContains()
                    button?.setOnClickListener {
                        val last = selectedSearchTypes.toSet()
                        selectedSearchTypes.clear()
                        selectedSearchTypes.addAll(validTypes)
                        for ((otherButton, _) in pairList) {
                            otherButton?.isSelected = false
                        }
                        it?.context?.setKey(SEARCH_PREF_TAGS, selectedSearchTypes)
                        it?.isSelected = true
                        if (last != selectedSearchTypes.toSet()) // if you click the same button again the it does nothing
                            search(main_search?.query?.toString())
                    }

                    button?.setOnLongClickListener {
                        if (!buttonContains()) {
                            it?.isSelected = true
                            selectedSearchTypes.addAll(validTypes)
                        } else {
                            it?.isSelected = false
                            selectedSearchTypes.removeAll(validTypes)
                        }
                        it?.context?.setKey(SEARCH_PREF_TAGS, selectedSearchTypes)
                        search(main_search?.query?.toString())
                        return@setOnLongClickListener true
                    }
                }
            }
        }

        if (context?.isTrueTvSettings() == true) {
            search_filter.isFocusable = true
            search_filter.isFocusableInTouchMode = true
        }

        main_search.setOnQueryTextListener(object : SearchView.OnQueryTextListener {
            override fun onQueryTextSubmit(query: String): Boolean {
                search(query)

                main_search?.let {
                    hideKeyboard(it)
                }

                return true
            }

            override fun onQueryTextChange(newText: String): Boolean {
                //searchViewModel.quickSearch(newText)
                val showHistory = newText.isBlank()
                if (showHistory) {
                    searchViewModel.clearSearch()
                    searchViewModel.updateHistory()
                }

                search_history_recycler?.isVisible = showHistory

                search_master_recycler?.isVisible = !showHistory && isAdvancedSearch
                search_autofit_results?.isVisible = !showHistory && !isAdvancedSearch

                return true
            }
        })

        observe(searchViewModel.currentHistory) { list ->
            (search_history_recycler.adapter as? SearchHistoryAdaptor?)?.updateList(list)
        }

        searchViewModel.updateHistory()

        observe(searchViewModel.searchResponse) {
            when (it) {
                is Resource.Success -> {
                    it.value.let { data ->
                        if (data.isNotEmpty()) {
                            (search_autofit_results?.adapter as SearchAdapter?)?.updateList(data)
                        }
                    }
                    searchExitIcon.alpha = 1f
                    search_loading_bar.alpha = 0f
                }
                is Resource.Failure -> {
                    // Toast.makeText(activity, "Server error", Toast.LENGTH_LONG).show()
                    searchExitIcon.alpha = 1f
                    search_loading_bar.alpha = 0f
                }
                is Resource.Loading -> {
                    searchExitIcon.alpha = 0f
                    search_loading_bar.alpha = 1f
                }
            }
        }

        val listLock = ReentrantLock()
        observe(searchViewModel.currentSearch) { list ->
            try {
                // https://stackoverflow.com/questions/6866238/concurrent-modification-exception-adding-to-an-arraylist
                listLock.lock()
                (search_master_recycler?.adapter as ParentItemAdapter?)?.apply {
                    val newItems = list.map { ongoing ->
                        val ongoingList = HomePageList(
                            ongoing.apiName,
                            if (ongoing.data is Resource.Success) ongoing.data.value.filterSearchResponse() else ArrayList()
                        )
                        ongoingList
                    }
                    updateList(newItems)

                    //notifyDataSetChanged()
                }
            } catch (e: Exception) {
                logError(e)
            } finally {
                listLock.unlock()
            }
        }


        /*main_search.setOnQueryTextFocusChangeListener { _, b ->
            if (b) {
                // https://stackoverflow.com/questions/12022715/unable-to-show-keyboard-automatically-in-the-searchview
                showInputMethod(view.findFocus())
            }
        }*/
        //main_search.onActionViewExpanded()*/

        val masterAdapter: RecyclerView.Adapter<RecyclerView.ViewHolder> =
            ParentItemAdapter(mutableListOf(), { callback ->
                SearchHelper.handleSearchClickCallback(activity, callback)
            }, { item ->
                activity?.loadHomepageList(item)
            })

        val historyAdapter = SearchHistoryAdaptor(mutableListOf()) { click ->
            val searchItem = click.item
            when (click.clickAction) {
                SEARCH_HISTORY_OPEN -> {
                    searchViewModel.clearSearch()
                    if (searchItem.type.isNotEmpty())
                        updateSelectedList(searchItem.type.toMutableList())
                    main_search?.setQuery(searchItem.searchText, true)
                }
                SEARCH_HISTORY_REMOVE -> {
                    removeKey(SEARCH_HISTORY_KEY, searchItem.key)
                    searchViewModel.updateHistory()
                }
                else -> {
                    // wth are you doing???
                }
            }
        }

        search_history_recycler?.adapter = historyAdapter
        search_history_recycler?.layoutManager = GridLayoutManager(context, 1)

        search_master_recycler?.adapter = masterAdapter
        search_master_recycler?.layoutManager = GridLayoutManager(context, 1)

        // SubtitlesFragment.push(activity)
        //searchViewModel.search("iron man")
        //(activity as AppCompatActivity).loadResult("https://shiro.is/overlord-dubbed", "overlord-dubbed", "Shiro")
/*
        (activity as AppCompatActivity?)?.supportFragmentManager.beginTransaction()
            .setCustomAnimations(R.anim.enter_anim,
                R.anim.exit_anim,
                R.anim.pop_enter,
                R.anim.pop_exit)
            .add(R.id.homeRoot, PlayerFragment.newInstance(PlayerData(0, null,0)))
            .commit()*/
    }

}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/search/SearchHelper.kt
================================================
package com.lagradost.cloudstream3.ui.search

import android.app.Activity
import android.widget.Toast
import com.lagradost.cloudstream3.CommonActivity.showToast
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ui.download.DOWNLOAD_ACTION_PLAY_FILE
import com.lagradost.cloudstream3.ui.download.DownloadButtonSetup.handleDownloadClick
import com.lagradost.cloudstream3.ui.download.DownloadClickEvent
import com.lagradost.cloudstream3.ui.result.START_ACTION_LOAD_EP
import com.lagradost.cloudstream3.utils.AppUtils.loadSearchResult
import com.lagradost.cloudstream3.utils.DataStoreHelper
import com.lagradost.cloudstream3.utils.VideoDownloadHelper

object SearchHelper {
    fun handleSearchClickCallback(activity: Activity?, callback: SearchClickCallback) {
        val card = callback.card
        when (callback.action) {
            SEARCH_ACTION_LOAD -> {
                activity.loadSearchResult(card)
            }
            SEARCH_ACTION_PLAY_FILE -> {
                if (card is DataStoreHelper.ResumeWatchingResult) {
                    val id = card.id
                    if(id == null) {
                        showToast(activity, R.string.error_invalid_id, Toast.LENGTH_SHORT)
                    } else {
                        if (card.isFromDownload) {
                            handleDownloadClick(
                                activity, card.name, DownloadClickEvent(
                                    DOWNLOAD_ACTION_PLAY_FILE,
                                    VideoDownloadHelper.DownloadEpisodeCached(
                                        card.name,
                                        card.posterUrl,
                                        card.episode ?: 0,
                                        card.season,
                                        id,
                                        card.parentId ?: return,
                                        null,
                                        null,
                                        System.currentTimeMillis()
                                    )
                                )
                            )
                        } else {
                            activity.loadSearchResult(card, START_ACTION_LOAD_EP, id)
                        }
                    }

                } else {
                    handleSearchClickCallback(
                        activity,
                        SearchClickCallback(SEARCH_ACTION_LOAD, callback.view, -1, callback.card)
                    )
                }
            }
            SEARCH_ACTION_SHOW_METADATA -> {
                showToast(activity, callback.card.name, Toast.LENGTH_SHORT)
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/search/SearchHistoryAdaptor.kt
================================================
package com.lagradost.cloudstream3.ui.search

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageView
import android.widget.TextView
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.RecyclerView
import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.TvType
import kotlinx.android.synthetic.main.search_history_item.view.*

data class SearchHistoryItem(
    @JsonProperty("searchedAt") val searchedAt: Long,
    @JsonProperty("searchText") val searchText: String,
    @JsonProperty("type") val type: List<TvType>,
    @JsonProperty("key") val key: String,
)

data class SearchHistoryCallback(
    val item: SearchHistoryItem,
    val clickAction: Int,
)

const val SEARCH_HISTORY_OPEN = 0
const val SEARCH_HISTORY_REMOVE = 1

class SearchHistoryAdaptor(
    private val cardList: MutableList<SearchHistoryItem>,
    private val clickCallback: (SearchHistoryCallback) -> Unit,
) : RecyclerView.Adapter<RecyclerView.ViewHolder>() {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
        return CardViewHolder(
            LayoutInflater.from(parent.context)
                .inflate(R.layout.search_history_item, parent, false),
            clickCallback,
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is CardViewHolder -> {
                holder.bind(cardList[position])
            }
        }
    }

    override fun getItemCount(): Int {
        return cardList.size
    }

    fun updateList(newList: List<SearchHistoryItem>) {
        val diffResult = DiffUtil.calculateDiff(
            SearchHistoryDiffCallback(this.cardList, newList)
        )

        cardList.clear()
        cardList.addAll(newList)

        diffResult.dispatchUpdatesTo(this)
    }

    class CardViewHolder
    constructor(
        itemView: View,
        private val clickCallback: (SearchHistoryCallback) -> Unit,
    ) :
        RecyclerView.ViewHolder(itemView) {
        private val removeButton: ImageView = itemView.home_history_remove
        private val openButton: View = itemView.home_history_tab
        private val title: TextView = itemView.home_history_title

        fun bind(card: SearchHistoryItem) {
            title.text = card.searchText

            removeButton.setOnClickListener {
                clickCallback.invoke(SearchHistoryCallback(card, SEARCH_HISTORY_REMOVE))
            }
            openButton.setOnClickListener {
                clickCallback.invoke(SearchHistoryCallback(card, SEARCH_HISTORY_OPEN))
            }
        }
    }
}

class SearchHistoryDiffCallback(
    private val oldList: List<SearchHistoryItem>,
    private val newList: List<SearchHistoryItem>
) :
    DiffUtil.Callback() {
    override fun areItemsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition].searchText == newList[newItemPosition].searchText

    override fun getOldListSize() = oldList.size

    override fun getNewListSize() = newList.size

    override fun areContentsTheSame(oldItemPosition: Int, newItemPosition: Int) =
        oldList[oldItemPosition] == newList[newItemPosition]
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/search/SearchResultBuilder.kt
================================================
package com.lagradost.cloudstream3.ui.search

import android.content.Context
import android.view.View
import android.widget.ImageView
import android.widget.ProgressBar
import android.widget.TextView
import androidx.cardview.widget.CardView
import androidx.core.view.isVisible
import androidx.preference.PreferenceManager
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTrueTvSettings
import com.lagradost.cloudstream3.utils.AppUtils.getNameFull
import com.lagradost.cloudstream3.utils.DataStoreHelper
import com.lagradost.cloudstream3.utils.DataStoreHelper.fixVisual
import com.lagradost.cloudstream3.utils.UIHelper.setImage
import kotlinx.android.synthetic.main.home_result_grid.view.*

object SearchResultBuilder {
    private val showCache: MutableMap<String, Boolean> = mutableMapOf()

    fun updateCache(context: Context?) {
        if (context == null) return
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(context)

        for (k in context.resources.getStringArray(R.array.poster_ui_options_values)) {
            showCache[k] = settingsManager.getBoolean(k, showCache[k] ?: true)
        }
    }

    /**
     * @param nextFocusBehavior True if first, False if last, Null if between.
     * Used to prevent escaping the adapter horizontally (focus wise).
     */
    fun bind(
        clickCallback: (SearchClickCallback) -> Unit,
        card: SearchResponse,
        position: Int,
        itemView: View,
        nextFocusBehavior: Boolean? = null,
        nextFocusUp: Int? = null,
        nextFocusDown: Int? = null,
    ) {
        val cardView: ImageView = itemView.imageView
        val cardText: TextView? = itemView.imageText

        val textIsDub: TextView? = itemView.text_is_dub
        val textIsSub: TextView? = itemView.text_is_sub
        val textQuality: TextView? = itemView.text_quality
        val shadow: View? = itemView.title_shadow

        val bg: CardView = itemView.background_card

        val bar: ProgressBar? = itemView.watchProgress
        val playImg: ImageView? = itemView.search_item_download_play

        // Do logic

        bar?.isVisible = false
        playImg?.isVisible = false
        textIsDub?.isVisible = false
        textIsSub?.isVisible = false

        val showSub = showCache[textIsDub?.context?.getString(R.string.show_sub_key)] ?: false
        val showDub = showCache[textIsDub?.context?.getString(R.string.show_dub_key)] ?: false
        val showTitle = showCache[cardText?.context?.getString(R.string.show_title_key)] ?: false
        val showHd = showCache[textQuality?.context?.getString(R.string.show_hd_key)] ?: false

        shadow?.isVisible = showTitle

        when (card.quality) {
            SearchQuality.BlueRay -> R.string.quality_blueray
            SearchQuality.Cam -> R.string.quality_cam
            SearchQuality.CamRip -> R.string.quality_cam_rip
            SearchQuality.DVD -> R.string.quality_dvd
            SearchQuality.HD -> R.string.quality_hd
            SearchQuality.HQ -> R.string.quality_hq
            SearchQuality.HdCam -> R.string.quality_cam_hd
            SearchQuality.Telecine -> R.string.quality_tc
            SearchQuality.Telesync -> R.string.quality_ts
            SearchQuality.WorkPrint -> R.string.quality_workprint
            SearchQuality.SD -> R.string.quality_sd
            SearchQuality.FourK -> R.string.quality_4k
            SearchQuality.UHD -> R.string.quality_uhd
            SearchQuality.SDR -> R.string.quality_sdr
            SearchQuality.HDR -> R.string.quality_hdr
            SearchQuality.WebRip -> R.string.quality_webrip
            null -> null
        }?.let { textRes ->
            textQuality?.setText(textRes)
            textQuality?.isVisible = showHd
        } ?: run {
            textQuality?.isVisible = false
        }

        cardText?.text = card.name
        cardText?.isVisible = showTitle
        cardView.isVisible = true

        if (!cardView.setImage(card.posterUrl, card.posterHeaders)) {
            cardView.setImageResource(R.drawable.default_cover)
        }

        fun click(view: View?) {
            clickCallback.invoke(
                SearchClickCallback(
                    if (card is DataStoreHelper.ResumeWatchingResult) SEARCH_ACTION_PLAY_FILE else SEARCH_ACTION_LOAD,
                    view ?: return,
                    position,
                    card
                )
            )
        }

        fun longClick(view: View?) {
            clickCallback.invoke(
                SearchClickCallback(
                    SEARCH_ACTION_SHOW_METADATA,
                    view ?: return,
                    position,
                    card
                )
            )
        }

        fun focus(view: View?, focus: Boolean) {
            if (focus) {
                clickCallback.invoke(
                    SearchClickCallback(
                        SEARCH_ACTION_FOCUSED,
                        view ?: return,
                        position,
                        card
                    )
                )
            }
        }

        bg.setOnClickListener {
            click(it)
        }

        itemView.setOnClickListener {
            click(it)
        }

        if (nextFocusUp != null) {
            bg.nextFocusUpId = nextFocusUp
        }

        if (nextFocusDown != null) {
            bg.nextFocusDownId = nextFocusDown
        }

        when (nextFocusBehavior) {
            true -> bg.nextFocusLeftId = bg.id
            false -> bg.nextFocusRightId = bg.id
            null -> {
                bg.nextFocusRightId = -1
                bg.nextFocusLeftId = -1
            }
        }

        if (bg.context.isTrueTvSettings()) {
            bg.isFocusable = true
            bg.isFocusableInTouchMode = true
            bg.touchscreenBlocksFocus = false
            itemView.isFocusableInTouchMode = true
            itemView.isFocusable = true
        }

        bg.setOnLongClickListener {
            longClick(it)
            return@setOnLongClickListener true
        }

        itemView.setOnLongClickListener {
            longClick(it)
            return@setOnLongClickListener true
        }

        bg.setOnFocusChangeListener { view, b ->
            focus(view, b)
        }

        itemView.setOnFocusChangeListener { view, b ->
            focus(view, b)
        }

        when (card) {
            is DataStoreHelper.ResumeWatchingResult -> {
                val pos = card.watchPos?.fixVisual()
                if (pos != null) {
                    bar?.max = (pos.duration / 1000).toInt()
                    bar?.progress = (pos.position / 1000).toInt()
                    bar?.visibility = View.VISIBLE
                }

                playImg?.visibility = View.VISIBLE

                if (card.type?.isMovieType() == false) {
                    cardText?.text =
                        cardText?.context?.getNameFull(card.name, card.episode, card.season)
                }
            }
            is AnimeSearchResponse -> {
                val dubStatus = card.dubStatus
                if (!dubStatus.isNullOrEmpty()) {
                    if (dubStatus.contains(DubStatus.Dubbed)) {
                        textIsDub?.isVisible = showDub
                    }
                    if (dubStatus.contains(DubStatus.Subbed)) {
                        textIsSub?.isVisible = showSub
                    }
                }

                val dubEpisodes = card.episodes[DubStatus.Dubbed]
                val subEpisodes = card.episodes[DubStatus.Subbed]

                textIsDub?.apply {
                    val dubText = context.getString(R.string.app_dubbed_text)
                    text = if (dubEpisodes != null && dubEpisodes > 0) {
                        context.getString(R.string.app_dub_sub_episode_text_format)
                            .format(dubText, dubEpisodes)
                    } else {
                        dubText
                    }
                }

                textIsSub?.apply {
                    val subText = context.getString(R.string.app_subbed_text)
                    text = if (subEpisodes != null && subEpisodes > 0) {
                        context.getString(R.string.app_dub_sub_episode_text_format)
                            .format(subText, subEpisodes)
                    } else {
                        subText
                    }
                }
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/search/SearchViewModel.kt
================================================
package com.lagradost.cloudstream3.ui.search

import androidx.lifecycle.LiveData
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.lagradost.cloudstream3.APIHolder.apis
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.getKeys
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.SearchResponse
import com.lagradost.cloudstream3.apmap
import com.lagradost.cloudstream3.mvvm.Resource
import com.lagradost.cloudstream3.ui.APIRepository
import com.lagradost.cloudstream3.utils.Coroutines.ioSafe
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.Job
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext

data class OnGoingSearch(
    val apiName: String,
    val data: Resource<List<SearchResponse>>
)

const val SEARCH_HISTORY_KEY = "search_history"

class SearchViewModel : ViewModel() {
    private val _searchResponse: MutableLiveData<Resource<List<SearchResponse>>> =
        MutableLiveData()
    val searchResponse: LiveData<Resource<List<SearchResponse>>> get() = _searchResponse

    private val _currentSearch: MutableLiveData<List<OnGoingSearch>> = MutableLiveData()
    val currentSearch: LiveData<List<OnGoingSearch>> get() = _currentSearch

    private val _currentHistory: MutableLiveData<List<SearchHistoryItem>> = MutableLiveData()
    val currentHistory: LiveData<List<SearchHistoryItem>> get() = _currentHistory

    private val repos = apis.map { APIRepository(it) }

    fun clearSearch() {
        _searchResponse.postValue(Resource.Success(ArrayList()))
        _currentSearch.postValue(emptyList())
    }

    private var onGoingSearch: Job? = null
    fun searchAndCancel(
        query: String,
        providersActive: Set<String> = setOf(),
        ignoreSettings: Boolean = false,
        isQuickSearch: Boolean = false,
    ) {
        onGoingSearch?.cancel()
        onGoingSearch = search(query, providersActive, ignoreSettings, isQuickSearch)
    }

    fun updateHistory() = viewModelScope.launch {
        ioSafe {
            val items = getKeys(SEARCH_HISTORY_KEY)?.mapNotNull {
                getKey<SearchHistoryItem>(it)
            }?.sortedByDescending { it.searchedAt } ?: emptyList()
            _currentHistory.postValue(items)
        }
    }

    private fun search(
        query: String,
        providersActive: Set<String>,
        ignoreSettings: Boolean = false,
        isQuickSearch: Boolean = false,
    ) =
        viewModelScope.launch {
            if (query.length <= 1) {
                clearSearch()
                return@launch
            }

            if (!isQuickSearch) {
                val key = query.hashCode().toString()
                setKey(
                    SEARCH_HISTORY_KEY,
                    key,
                    SearchHistoryItem(
                        searchedAt = System.currentTimeMillis(),
                        searchText = query,
                        type = emptyList(), // TODO implement tv type
                        key = key,
                    )
                )
            }

            _searchResponse.postValue(Resource.Loading())

            val currentList = ArrayList<OnGoingSearch>()

            _currentSearch.postValue(ArrayList())

            withContext(Dispatchers.IO) { // This interrupts UI otherwise
                repos.filter { a ->
                    (ignoreSettings || (providersActive.isEmpty() || providersActive.contains(a.name))) && (!isQuickSearch || a.hasQuickSearch)
                }.apmap { a -> // Parallel
                    val search = if (isQuickSearch) a.quickSearch(query) else a.search(query)
                    currentList.add(OnGoingSearch(a.name, search))
                    _currentSearch.postValue(currentList)
                }
            }
            _currentSearch.postValue(currentList)

            val list = ArrayList<SearchResponse>()
            val nestedList =
                currentList.map { it.data }
                    .filterIsInstance<Resource.Success<List<SearchResponse>>>().map { it.value }

            // I do it this way to move the relevant search results to the top
            var index = 0
            while (true) {
                var added = 0
                for (sublist in nestedList) {
                    if (sublist.size > index) {
                        list.add(sublist[index])
                        added++
                    }
                }
                if (added == 0) break
                index++
            }

            _searchResponse.postValue(Resource.Success(list))
        }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/search/SyncSearchViewModel.kt
================================================
package com.lagradost.cloudstream3.ui.search

import com.lagradost.cloudstream3.SearchQuality
import com.lagradost.cloudstream3.SearchResponse
import com.lagradost.cloudstream3.TvType
import com.lagradost.cloudstream3.syncproviders.OAuth2API

class SyncSearchViewModel {
    private val repos = OAuth2API.SyncApis

    data class SyncSearchResultSearchResponse(
        override val name: String,
        override val url: String,
        override val apiName: String,
        override var type: TvType?,
        override var posterUrl: String?,
        override var id: Int?,
        override var quality: SearchQuality? = null,
        override var posterHeaders: Map<String, String>? = null,
    ) : SearchResponse

}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/settings/AccountAdapter.kt
================================================
package com.lagradost.cloudstream3.ui.settings

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageView
import android.widget.TextView
import androidx.core.view.isVisible
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.syncproviders.OAuth2API
import com.lagradost.cloudstream3.utils.UIHelper.setImage

class AccountClickCallback(val action: Int, val view : View, val card: OAuth2API.LoginInfo)

class AccountAdapter(
    val cardList: List<OAuth2API.LoginInfo>,
    val layout: Int = R.layout.account_single,
    private val clickCallback: (AccountClickCallback) -> Unit
) :
    RecyclerView.Adapter<RecyclerView.ViewHolder>() {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
        return CardViewHolder(
            LayoutInflater.from(parent.context).inflate(layout, parent, false), clickCallback
        )
    }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
        when (holder) {
            is CardViewHolder -> {
                holder.bind(cardList[position])
            }
        }
    }

    override fun getItemCount(): Int {
        return cardList.size
    }

    override fun getItemId(position: Int): Long {
        return cardList[position].accountIndex.toLong()
    }

    class CardViewHolder
    constructor(itemView: View, private val clickCallback: (AccountClickCallback) -> Unit) :
        RecyclerView.ViewHolder(itemView) {
        private val pfp: ImageView = itemView.findViewById(R.id.account_profile_picture)!!
        private val accountName: TextView = itemView.findViewById(R.id.account_name)!!

        fun bind(card: OAuth2API.LoginInfo) {
            // just in case name is null account index will show, should never happened
            accountName.text = card.name ?: "%s %d".format(accountName.context.getString(R.string.account), card.accountIndex)
            if(card.profilePicture.isNullOrEmpty()) {
                pfp.isVisible = false
            } else {
                pfp.isVisible = true
                pfp.setImage(card.profilePicture)
            }

            itemView.setOnClickListener {
                clickCallback.invoke(AccountClickCallback(0, itemView, card))
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/settings/SettingsAccount.kt
================================================
package com.lagradost.cloudstream3.ui.settings

import android.content.Context
import android.os.Bundle
import android.widget.ImageView
import android.widget.TextView
import androidx.appcompat.app.AlertDialog
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.PreferenceManager
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.syncproviders.AccountManager
import com.lagradost.cloudstream3.syncproviders.OAuth2API
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.beneneCount
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.getPref
import com.lagradost.cloudstream3.utils.UIHelper.dismissSafe
import com.lagradost.cloudstream3.utils.UIHelper.hideKeyboard
import com.lagradost.cloudstream3.utils.UIHelper.setImage

class SettingsAccount : PreferenceFragmentCompat() {
    private fun showLoginInfo(api: AccountManager, info: OAuth2API.LoginInfo) {
        val builder =
            AlertDialog.Builder(context ?: return, R.style.AlertDialogCustom)
                .setView(R.layout.account_managment)
        val dialog = builder.show()

        dialog.findViewById<ImageView>(R.id.account_profile_picture)?.setImage(info.profilePicture)
        dialog.findViewById<TextView>(R.id.account_logout)?.setOnClickListener {
            api.logOut()
            dialog.dismissSafe(activity)
        }

        (info.name ?: context?.getString(R.string.no_data))?.let {
            dialog.findViewById<TextView>(R.id.account_name)?.text = it
        }
        dialog.findViewById<TextView>(R.id.account_site)?.text = api.name
        dialog.findViewById<TextView>(R.id.account_switch_account)?.setOnClickListener {
            dialog.dismissSafe(activity)
            showAccountSwitch(it.context, api)
        }
    }

    private fun showAccountSwitch(context: Context, api: AccountManager) {
        val accounts = api.getAccounts() ?: return

        val builder =
            AlertDialog.Builder(context, R.style.AlertDialogCustom).setView(R.layout.account_switch)
        val dialog = builder.show()

        dialog.findViewById<TextView>(R.id.account_add)?.setOnClickListener {
            try {
                api.authenticate()
            } catch (e: Exception) {
                logError(e)
            }
        }

        val ogIndex = api.accountIndex

        val items = ArrayList<OAuth2API.LoginInfo>()

        for (index in accounts) {
            api.accountIndex = index
            val accountInfo = api.loginInfo()
            if (accountInfo != null) {
                items.add(accountInfo)
            }
        }
        api.accountIndex = ogIndex
        val adapter = AccountAdapter(items, R.layout.account_single) {
            dialog?.dismissSafe(activity)
            api.changeAccount(it.card.accountIndex)
        }
        val list = dialog.findViewById<RecyclerView>(R.id.account_list)
        list?.adapter = adapter
    }

    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
        hideKeyboard()
        setPreferencesFromResource(R.xml.settings_credits_account, rootKey)
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(requireContext())

        getPref(R.string.legal_notice_key)?.setOnPreferenceClickListener {
            val builder: AlertDialog.Builder = AlertDialog.Builder(it.context)
            builder.setTitle(R.string.legal_notice)
            builder.setMessage(R.string.legal_notice_text)
            builder.show()
            return@setOnPreferenceClickListener true
        }

        val syncApis =
            listOf(
                Pair(R.string.mal_key, OAuth2API.malApi), Pair(
                    R.string.anilist_key,
                    OAuth2API.aniListApi
                )
            )
        for ((key, api) in syncApis) {
            getPref(key)?.apply {
                title =
                    getString(R.string.login_format).format(api.name, getString(R.string.account))
                setOnPreferenceClickListener { _ ->
                    val info = api.loginInfo()
                    if (info != null) {
                        showLoginInfo(api, info)
                    } else {
                        try {
                            api.authenticate()
                        } catch (e: Exception) {
                            logError(e)
                        }
                    }
                    return@setOnPreferenceClickListener true
                }
            }
        }



        try {
            beneneCount = settingsManager.getInt(getString(R.string.benene_count), 0)
            getPref(R.string.benene_count)?.let { pref ->
                pref.summary =
                    if (beneneCount <= 0) getString(R.string.benene_count_text_none) else getString(
                        R.string.benene_count_text
                    ).format(
                        beneneCount
                    )

                pref.setOnPreferenceClickListener {
                    try {
                        beneneCount++
                        settingsManager.edit().putInt(getString(R.string.benene_count), beneneCount)
                            .apply()
                        it.summary = getString(R.string.benene_count_text).format(beneneCount)
                    } catch (e: Exception) {
                        logError(e)
                    }

                    return@setOnPreferenceClickListener true
                }
            }
        } catch (e: Exception) {
            e.printStackTrace()
        }

    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/settings/SettingsFragment.kt
================================================
package com.lagradost.cloudstream3.ui.settings

import android.app.UiModeManager
import android.content.Context
import android.content.res.Configuration
import android.os.Build
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment
import androidx.preference.Preference
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.PreferenceManager
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.UIHelper.navigate
import kotlinx.android.synthetic.main.main_settings.*
import java.io.File

class SettingsFragment : Fragment() {
    companion object {
        var beneneCount = 0

        fun PreferenceFragmentCompat?.getPref(id: Int): Preference? {
            if (this == null) return null

            return try {
                findPreference(getString(id))
            } catch (e: Exception) {
                logError(e)
                null
            }
        }

        fun getFolderSize(dir: File): Long {
            var size: Long = 0
            dir.listFiles()?.let {
                for (file in it) {
                    size += if (file.isFile) {
                        // System.out.println(file.getName() + " " + file.length());
                        file.length()
                    } else getFolderSize(file)
                }
            }

            return size
        }

        private fun Context.getLayoutInt(): Int {
            val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
            return settingsManager.getInt(this.getString(R.string.app_layout_key), -1)
        }

        fun Context.isTvSettings(): Boolean {
            var value = getLayoutInt()
            if (value == -1) {
                value = if (isAutoTv()) 1 else 0
            }
            return value == 1 || value == 2
        }

        fun Context.isTrueTvSettings(): Boolean {
            var value = getLayoutInt()
            if (value == -1) {
                value = if (isAutoTv()) 1 else 0
            }
            return value == 1
        }

        fun Context.isEmulatorSettings(): Boolean {
            return getLayoutInt() == 2
        }

        private fun Context.isAutoTv(): Boolean {
            val uiModeManager = getSystemService(Context.UI_MODE_SERVICE) as UiModeManager?
            // AFT = Fire TV
            val model = Build.MODEL.lowercase()
            return uiModeManager?.currentModeType == Configuration.UI_MODE_TYPE_TELEVISION || Build.MODEL.contains(
                "AFT"
            ) || model.contains("firestick") || model.contains("fire tv") || model.contains("chromecast")
        }
    }

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?,
    ): View? {
        return inflater.inflate(R.layout.main_settings, container, false)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        fun navigate(id: Int) {
            activity?.navigate(id, Bundle())
        }

        val isTrueTv = context?.isTrueTvSettings() == true

        listOf(
            Pair(settings_player, R.id.action_navigation_settings_to_navigation_settings_player),
            Pair(settings_credits, R.id.action_navigation_settings_to_navigation_settings_account),
            Pair(settings_ui, R.id.action_navigation_settings_to_navigation_settings_ui),
            Pair(settings_lang, R.id.action_navigation_settings_to_navigation_settings_lang),
            Pair(settings_nginx, R.id.action_navigation_settings_to_navigation_settings_nginx),
            Pair(settings_updates, R.id.action_navigation_settings_to_navigation_settings_updates),
        ).forEach { (view, navigationId) ->
            view?.apply {
                setOnClickListener {
                    navigate(navigationId)
                }
                if (isTrueTv) {
                    isFocusable = true
                    isFocusableInTouchMode = true
                }
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/settings/SettingsLang.kt
================================================
package com.lagradost.cloudstream3.ui.settings

import android.os.Bundle
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.PreferenceManager
import com.lagradost.cloudstream3.*
import com.lagradost.cloudstream3.APIHolder.getApiDubstatusSettings
import com.lagradost.cloudstream3.APIHolder.getApiProviderLangSettings
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.network.initClient
import com.lagradost.cloudstream3.ui.APIRepository
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.getPref
import com.lagradost.cloudstream3.utils.HOMEPAGE_API
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showBottomDialog
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showDialog
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showMultiDialog
import com.lagradost.cloudstream3.utils.SubtitleHelper
import com.lagradost.cloudstream3.utils.UIHelper.hideKeyboard

class SettingsLang : PreferenceFragmentCompat() {
    // idk, if you find a way of automating this it would be great
    // https://www.iemoji.com/view/emoji/1794/flags/antarctica
    // Emoji Character Encoding Data --> C/C++/Java Src
    // https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes leave blank for auto
    private val languages = arrayListOf(
        Triple("", "Spanish", "es"),
        Triple("", "English", "en"),
        Triple("", "Viet Nam", "vi"),
        Triple("", "Dutch", "nl"),
        Triple("", "French", "fr"),
        Triple("", "Greek", "el"),
        Triple("", "Swedish", "sv"),
        Triple("", "Tagalog", "tl"),
        Triple("", "Polish", "pl"),
        Triple("", "Hindi", "hi"),
        Triple("", "Malayalam", "ml"),
        Triple("", "Norsk", "no"),
        Triple("", "German", "de"),
        Triple("", "Arabic", "ar"),
        Triple("", "Turkish", "tr"),
        Triple("", "Macedonian", "mk"),
        Triple("\uD83C\uDDE7\uD83C\uDDF7", "Portuguese (Brazil)", "pt"),
        Triple("", "Romanian", "ro"),
        Triple("", "Italian", "it"),
        Triple("", "Chinese", "zh"),
        Triple("", "Indonesian", "id"),
    ).sortedBy { it.second } //ye, we go alphabetical, so ppl don't put their lang on top

    private fun getCurrentLocale(): String {
        val res = requireContext().resources
// Change locale settings in the app.
        // val dm = res.displayMetrics
        val conf = res.configuration
        return conf?.locale?.language ?: "en"
    }

    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
        hideKeyboard()
        setPreferencesFromResource(R.xml.settings_media_lang, rootKey)
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(requireContext())

        getPref(R.string.display_sub_key)?.setOnPreferenceClickListener {
            activity?.getApiDubstatusSettings()?.let { current ->
                val dublist = DubStatus.values()
                val names = dublist.map { it.name }

                val currentList = ArrayList<Int>()
                for (i in current) {
                    currentList.add(dublist.indexOf(i))
                }

                activity?.showMultiDialog(
                    names,
                    currentList,
                    getString(R.string.display_subbed_dubbed_settings),
                    {}) { selectedList ->
                    APIRepository.dubStatusActive = selectedList.map { dublist[it] }.toHashSet()

                    settingsManager.edit().putStringSet(
                        this.getString(R.string.display_sub_key),
                        selectedList.map { names[it] }.toMutableSet()
                    ).apply()
                }
            }

            return@setOnPreferenceClickListener true
        }

        getPref(R.string.prefer_media_type_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.media_type_pref)
            val prefValues = resources.getIntArray(R.array.media_type_pref_values)

            val currentPrefMedia =
                settingsManager.getInt(getString(R.string.prefer_media_type_key), 0)

            activity?.showBottomDialog(
                prefNames.toList(),
                prefValues.indexOf(currentPrefMedia),
                getString(R.string.preferred_media_settings),
                true,
                {}) {
                settingsManager.edit()
                    .putInt(getString(R.string.prefer_media_type_key), prefValues[it])
                    .apply()

                AcraApplication.removeKey(HOMEPAGE_API)
                (context ?: AcraApplication.context)?.let { ctx -> app.initClient(ctx) }
            }
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.locale_key)?.setOnPreferenceClickListener { pref ->
            val tempLangs = languages.toMutableList()
            //if (beneneCount > 100) {
            //    tempLangs.add(Triple("\uD83E\uDD8D", "mmmm... monke", "mo"))
            //}
            val current = getCurrentLocale()
            val languageCodes = tempLangs.map { it.third }
            val languageNames = tempLangs.map { (emoji, name, iso) ->
                val flag = emoji.ifBlank { SubtitleHelper.getFlagFromIso(iso) ?: "ERROR" }

                "$flag $name"
            }
            val index = languageCodes.indexOf(current)

            activity?.showDialog(
                languageNames, index, getString(R.string.app_language), true, { }
            ) { languageIndex ->
                try {
                    val code = languageCodes[languageIndex]
                    CommonActivity.setLocale(activity, code)
                    settingsManager.edit().putString(getString(R.string.locale_key), code).apply()
                    activity?.recreate()
                } catch (e: Exception) {
                    logError(e)
                }
            }
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.provider_lang_key)?.setOnPreferenceClickListener {
            activity?.getApiProviderLangSettings()?.let { current ->
                val allLangs = HashSet<String>()
                for (api in APIHolder.apis) {
                    allLangs.add(api.lang)
                }

                val currentList = ArrayList<Int>()
                for (i in current) {
                    currentList.add(allLangs.indexOf(i))
                }

                val names = allLangs.map {
                    val emoji = SubtitleHelper.getFlagFromIso(it)
                    val name = SubtitleHelper.fromTwoLettersToLanguage(it)
                    val fullName = "$emoji $name"
                    Pair(it, fullName)
                }

                activity?.showMultiDialog(
                    names.map { it.second },
                    currentList,
                    getString(R.string.provider_lang_settings),
                    {}) { selectedList ->
                    settingsManager.edit().putStringSet(
                        this.getString(R.string.provider_lang_key),
                        selectedList.map { names[it].first }.toMutableSet()
                    ).apply()
                    //APIRepository.providersActive = it.context.getApiSettings()
                }
            }

            return@setOnPreferenceClickListener true
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/settings/SettingsNginx.kt
================================================
package com.lagradost.cloudstream3.ui.settings

import android.os.Bundle
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.PreferenceManager
import com.lagradost.cloudstream3.AcraApplication
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.network.initClient
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.getPref
import com.lagradost.cloudstream3.utils.HOMEPAGE_API
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showBottomDialog
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showNginxTextInputDialog
import com.lagradost.cloudstream3.utils.UIHelper.hideKeyboard

class SettingsNginx : PreferenceFragmentCompat() {
    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
        hideKeyboard()
        setPreferencesFromResource(R.xml.settings_nginx, rootKey)
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(requireContext())

        getPref(R.string.nginx_credentials)?.setOnPreferenceClickListener {
            activity?.showNginxTextInputDialog(
                settingsManager.getString(
                    getString(R.string.nginx_credentials_title),
                    "Nginx Credentials"
                ).toString(),
                settingsManager.getString(getString(R.string.nginx_credentials), "")
                    .toString(),  // key: the actual you use rn
                android.text.InputType.TYPE_TEXT_VARIATION_URI,
                {}) {
                settingsManager.edit()
                    .putString(getString(R.string.nginx_credentials), it)
                    .apply()  // change the stored url in nginx_url_key to it
            }
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.nginx_url_key)?.setOnPreferenceClickListener {
            activity?.showNginxTextInputDialog(
                settingsManager.getString(getString(R.string.nginx_url_pref), "Nginx server url")
                    .toString(),
                settingsManager.getString(getString(R.string.nginx_url_key), "")
                    .toString(),  // key: the actual you use rn
                android.text.InputType.TYPE_TEXT_VARIATION_URI,  // uri
                {}) {
                settingsManager.edit()
                    .putString(getString(R.string.nginx_url_key), it)
                    .apply()  // change the stored url in nginx_url_key to it
            }
            return@setOnPreferenceClickListener true
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/settings/SettingsPlayer.kt
================================================
package com.lagradost.cloudstream3.ui.settings

import android.content.Intent
import android.net.Uri
import android.os.Build
import android.os.Bundle
import android.os.Environment
import androidx.activity.result.contract.ActivityResultContracts
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.PreferenceManager
import com.hippo.unifile.UniFile
import com.lagradost.cloudstream3.AcraApplication
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.normalSafeApiCall
import com.lagradost.cloudstream3.network.initClient
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.getFolderSize
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.getPref
import com.lagradost.cloudstream3.ui.subtitles.ChromecastSubtitlesFragment
import com.lagradost.cloudstream3.ui.subtitles.SubtitlesFragment
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showBottomDialog
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showDialog
import com.lagradost.cloudstream3.utils.UIHelper.hideKeyboard
import com.lagradost.cloudstream3.utils.VideoDownloadManager
import com.lagradost.cloudstream3.utils.VideoDownloadManager.getBasePath
import java.io.File

class SettingsPlayer : PreferenceFragmentCompat() {
    // Open file picker
    private val pathPicker =
        registerForActivityResult(ActivityResultContracts.OpenDocumentTree()) { uri ->
            // It lies, it can be null if file manager quits.
            if (uri == null) return@registerForActivityResult
            val context = context ?: AcraApplication.context ?: return@registerForActivityResult
            // RW perms for the path
            val flags = Intent.FLAG_GRANT_READ_URI_PERMISSION or
                    Intent.FLAG_GRANT_WRITE_URI_PERMISSION

            context.contentResolver.takePersistableUriPermission(uri, flags)

            val file = UniFile.fromUri(context, uri)
            println("Selected URI path: $uri - Full path: ${file.filePath}")

            // Stores the real URI using download_path_key
            // Important that the URI is stored instead of filepath due to permissions.
            PreferenceManager.getDefaultSharedPreferences(context)
                .edit().putString(getString(R.string.download_path_key), uri.toString()).apply()

            // From URI -> File path
            // File path here is purely for cosmetic purposes in settings
            (file.filePath ?: uri.toString()).let {
                PreferenceManager.getDefaultSharedPreferences(context)
                    .edit().putString(getString(R.string.download_path_pref), it).apply()
            }
        }

    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
        hideKeyboard()
        setPreferencesFromResource(R.xml.settings_player, rootKey)
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(requireContext())

        getPref(R.string.video_buffer_length_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.video_buffer_length_names)
            val prefValues = resources.getIntArray(R.array.video_buffer_length_values)

            val currentPrefSize =
                settingsManager.getInt(getString(R.string.video_buffer_length_key), 0)

            activity?.showDialog(
                prefNames.toList(),
                prefValues.indexOf(currentPrefSize),
                getString(R.string.video_buffer_length_settings),
                true,
                {}) {
                settingsManager.edit()
                    .putInt(getString(R.string.video_buffer_length_key), prefValues[it])
                    .apply()
            }
            return@setOnPreferenceClickListener true
        }
        getPref(R.string.dns_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.dns_pref)
            val prefValues = resources.getIntArray(R.array.dns_pref_values)

            val currentDns =
                settingsManager.getInt(getString(R.string.dns_pref), 0)

            activity?.showBottomDialog(
                prefNames.toList(),
                prefValues.indexOf(currentDns),
                getString(R.string.dns_pref),
                true,
                {}) {
                settingsManager.edit().putInt(getString(R.string.dns_pref), prefValues[it]).apply()
                (context ?: AcraApplication.context)?.let { ctx -> app.initClient(ctx) }
            }
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.prefer_limit_title_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.limit_title_pref_names)
            val prefValues = resources.getIntArray(R.array.limit_title_pref_values)
            val current = settingsManager.getInt(getString(R.string.prefer_limit_title_key), 0)

            activity?.showBottomDialog(
                prefNames.toList(),
                prefValues.indexOf(current),
                getString(R.string.limit_title),
                true,
                {}) {
                settingsManager.edit()
                    .putInt(getString(R.string.prefer_limit_title_key), prefValues[it])
                    .apply()
            }
            return@setOnPreferenceClickListener true
        }

        /*(getPref(R.string.double_tap_seek_time_key) as? SeekBarPreference?)?.let {

        }*/

        getPref(R.string.prefer_limit_title_rez_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.limit_title_rez_pref_names)
            val prefValues = resources.getIntArray(R.array.limit_title_rez_pref_values)
            val current = settingsManager.getInt(getString(R.string.prefer_limit_title_rez_key), 3)

            activity?.showBottomDialog(
                prefNames.toList(),
                prefValues.indexOf(current),
                getString(R.string.limit_title_rez),
                true,
                {}) {
                settingsManager.edit()
                    .putInt(getString(R.string.prefer_limit_title_rez_key), prefValues[it])
                    .apply()
            }
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.quality_pref_key)?.setOnPreferenceClickListener {
            val prefValues = Qualities.values().map { it.value }.reversed().toMutableList()
            prefValues.remove(Qualities.Unknown.value)

            val prefNames = prefValues.map { Qualities.getStringByInt(it) }

            val currentQuality =
                settingsManager.getInt(
                    getString(R.string.quality_pref_key),
                    Qualities.values().last().value
                )

            activity?.showBottomDialog(
                prefNames.toList(),
                prefValues.indexOf(currentQuality),
                getString(R.string.watch_quality_pref),
                true,
                {}) {
                settingsManager.edit().putInt(getString(R.string.quality_pref_key), prefValues[it])
                    .apply()
            }
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.subtitle_settings_key)?.setOnPreferenceClickListener {
            SubtitlesFragment.push(activity, false)
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.subtitle_settings_chromecast_key)?.setOnPreferenceClickListener {
            ChromecastSubtitlesFragment.push(activity, false)
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.video_buffer_disk_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.video_buffer_size_names)
            val prefValues = resources.getIntArray(R.array.video_buffer_size_values)

            val currentPrefSize =
                settingsManager.getInt(getString(R.string.video_buffer_disk_key), 0)

            activity?.showDialog(
                prefNames.toList(),
                prefValues.indexOf(currentPrefSize),
                getString(R.string.video_buffer_disk_settings),
                true,
                {}) {
                settingsManager.edit()
                    .putInt(getString(R.string.video_buffer_disk_key), prefValues[it])
                    .apply()
            }
            return@setOnPreferenceClickListener true
        }
        getPref(R.string.video_buffer_size_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.video_buffer_size_names)
            val prefValues = resources.getIntArray(R.array.video_buffer_size_values)

            val currentPrefSize =
                settingsManager.getInt(getString(R.string.video_buffer_size_key), 0)

            activity?.showDialog(
                prefNames.toList(),
                prefValues.indexOf(currentPrefSize),
                getString(R.string.video_buffer_size_settings),
                true,
                {}) {
                settingsManager.edit()
                    .putInt(getString(R.string.video_buffer_size_key), prefValues[it])
                    .apply()
            }
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.video_buffer_clear_key)?.let { pref ->
            val cacheDir = context?.cacheDir ?: return@let

            fun updateSummery() {
                try {
                    pref.summary =
                        getString(R.string.mb_format).format(getFolderSize(cacheDir) / (1024L * 1024L))
                } catch (e: Exception) {
                    logError(e)
                }
            }

            updateSummery()

            pref.setOnPreferenceClickListener {
                try {
                    cacheDir.deleteRecursively()
                    updateSummery()
                } catch (e: Exception) {
                    logError(e)
                }
                return@setOnPreferenceClickListener true
            }
        }
        fun getDownloadDirs(): List<String> {
            return normalSafeApiCall {
                val defaultDir = VideoDownloadManager.getDownloadDir()?.filePath

                // app_name_download_path = Cloudstream and does not change depending on release.
                // DOES NOT WORK ON SCOPED STORAGE.
                val secondaryDir =
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) null else Environment.getExternalStorageDirectory().absolutePath +
                            File.separator + resources.getString(R.string.app_name_download_path)
                val first = listOf(defaultDir, secondaryDir)
                (try {
                    val currentDir = context?.getBasePath()?.let { it.first?.filePath ?: it.second }

                    (first +
                            requireContext().getExternalFilesDirs("").mapNotNull { it.path } +
                            currentDir)
                } catch (e: Exception) {
                    first
                }).filterNotNull().distinct()
            } ?: emptyList()
        }

        getPref(R.string.download_path_key)?.setOnPreferenceClickListener {
            val dirs = getDownloadDirs()

            val currentDir =
                settingsManager.getString(getString(R.string.download_path_pref), null)
                    ?: VideoDownloadManager.getDownloadDir().toString()

            activity?.showBottomDialog(
                dirs + listOf("Custom"),
                dirs.indexOf(currentDir),
                getString(R.string.download_path_pref),
                true,
                {}) {
                // Last = custom
                if (it == dirs.size) {
                    try {
                        pathPicker.launch(Uri.EMPTY)
                    } catch (e: Exception) {
                        logError(e)
                    }
                } else {
                    // Sets both visual and actual paths.
                    // key = used path
                    // pref = visual path
                    settingsManager.edit()
                        .putString(getString(R.string.download_path_key), dirs[it]).apply()
                    settingsManager.edit()
                        .putString(getString(R.string.download_path_pref), dirs[it]).apply()
                }
            }
            return@setOnPreferenceClickListener true
        }

    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/settings/SettingsUI.kt
================================================
package com.lagradost.cloudstream3.ui.settings

import android.os.Bundle
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.PreferenceManager
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.ui.search.SearchResultBuilder
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.getPref
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showBottomDialog
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showDialog
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showMultiDialog
import com.lagradost.cloudstream3.utils.UIHelper.hideKeyboard

class SettingsUI : PreferenceFragmentCompat() {
    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
        hideKeyboard()
        setPreferencesFromResource(R.xml.settins_ui, rootKey)
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(requireContext())

        getPref(R.string.poster_ui_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.poster_ui_options)
            val keys = resources.getStringArray(R.array.poster_ui_options_values)
            val prefValues = keys.map {
                settingsManager.getBoolean(it, true)
            }.mapIndexedNotNull { index, b ->
                if (b) {
                    index
                } else null
            }

            activity?.showMultiDialog(
                prefNames.toList(),
                prefValues,
                getString(R.string.poster_ui_settings),
                {}) { list ->
                val edit = settingsManager.edit()
                for ((i, key) in keys.withIndex()) {
                    edit.putBoolean(key, list.contains(i))
                }
                edit.apply()
                SearchResultBuilder.updateCache(it.context)
            }

            return@setOnPreferenceClickListener true
        }

        getPref(R.string.app_layout_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.app_layout)
            val prefValues = resources.getIntArray(R.array.app_layout_values)

            val currentLayout =
                settingsManager.getInt(getString(R.string.app_layout_key), -1)

            activity?.showBottomDialog(
                prefNames.toList(),
                prefValues.indexOf(currentLayout),
                getString(R.string.app_layout),
                true,
                {}) {
                try {
                    settingsManager.edit()
                        .putInt(getString(R.string.app_layout_key), prefValues[it])
                        .apply()
                    activity?.recreate()
                } catch (e: Exception) {
                    logError(e)
                }
            }
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.app_theme_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.themes_names)
            val prefValues = resources.getStringArray(R.array.themes_names_values)

            val currentLayout =
                settingsManager.getString(getString(R.string.app_theme_key), prefValues.first())

            activity?.showBottomDialog(
                prefNames.toList(),
                prefValues.indexOf(currentLayout),
                getString(R.string.app_theme_settings),
                true,
                {}) {
                try {
                    settingsManager.edit()
                        .putString(getString(R.string.app_theme_key), prefValues[it])
                        .apply()
                    activity?.recreate()
                } catch (e: Exception) {
                    logError(e)
                }
            }
            return@setOnPreferenceClickListener true
        }
        getPref(R.string.primary_color_key)?.setOnPreferenceClickListener {
            val prefNames = resources.getStringArray(R.array.themes_overlay_names)
            val prefValues = resources.getStringArray(R.array.themes_overlay_names_values)

            val currentLayout =
                settingsManager.getString(getString(R.string.primary_color_key), prefValues.first())

            activity?.showDialog(
                prefNames.toList(),
                prefValues.indexOf(currentLayout),
                getString(R.string.primary_color_settings),
                true,
                {}) {
                try {
                    settingsManager.edit()
                        .putString(getString(R.string.primary_color_key), prefValues[it])
                        .apply()
                    activity?.recreate()
                } catch (e: Exception) {
                    logError(e)
                }
            }
            return@setOnPreferenceClickListener true
        }

    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/settings/SettingsUpdates.kt
================================================
package com.lagradost.cloudstream3.ui.settings

import android.content.ClipData
import android.content.ClipboardManager
import android.content.Context
import android.os.Bundle
import android.widget.Toast
import androidx.appcompat.app.AlertDialog
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.PreferenceManager
import com.lagradost.cloudstream3.CommonActivity
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.getPref
import com.lagradost.cloudstream3.utils.BackupUtils.backup
import com.lagradost.cloudstream3.utils.BackupUtils.restorePrompt
import com.lagradost.cloudstream3.utils.InAppUpdater.Companion.runAutoUpdate
import com.lagradost.cloudstream3.utils.UIHelper.dismissSafe
import com.lagradost.cloudstream3.utils.UIHelper.hideKeyboard
import com.lagradost.cloudstream3.utils.VideoDownloadManager
import kotlinx.android.synthetic.main.logcat.*
import okhttp3.internal.closeQuietly
import java.io.BufferedReader
import java.io.InputStreamReader
import java.io.OutputStream
import kotlin.concurrent.thread

class SettingsUpdates : PreferenceFragmentCompat() {
    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
        hideKeyboard()
        setPreferencesFromResource(R.xml.settings_updates, rootKey)
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(requireContext())


        getPref(R.string.backup_key)?.setOnPreferenceClickListener {
            activity?.backup()
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.restore_key)?.setOnPreferenceClickListener {
            activity?.restorePrompt()
            return@setOnPreferenceClickListener true
        }
        getPref(R.string.show_logcat_key)?.setOnPreferenceClickListener { pref ->
            val builder =
                AlertDialog.Builder(pref.context, R.style.AlertDialogCustom)
                    .setView(R.layout.logcat)

            val dialog = builder.create()
            dialog.show()
            val log = StringBuilder()
            try {
                //https://developer.android.com/studio/command-line/logcat
                val process = Runtime.getRuntime().exec("logcat -d")
                val bufferedReader = BufferedReader(
                    InputStreamReader(process.inputStream)
                )

                var line: String?
                while (bufferedReader.readLine().also { line = it } != null) {
                    log.append(line)
                }
            } catch (e: Exception) {
                logError(e) // kinda ironic
            }

            val text = log.toString()
            dialog.text1?.text = text

            dialog.copy_btt?.setOnClickListener {
                val serviceClipboard =
                    (activity?.getSystemService(Context.CLIPBOARD_SERVICE) as ClipboardManager?)
                        ?: return@setOnClickListener
                val clip = ClipData.newPlainText("logcat", text)
                serviceClipboard.setPrimaryClip(clip)
                dialog.dismissSafe(activity)
            }
            dialog.clear_btt?.setOnClickListener {
                Runtime.getRuntime().exec("logcat -c")
                dialog.dismissSafe(activity)
            }
            dialog.save_btt?.setOnClickListener {
                var fileStream: OutputStream? = null
                try {
                    fileStream =
                        VideoDownloadManager.setupStream(
                            it.context,
                            "logcat",
                            null,
                            "txt",
                            false
                        ).fileStream
                    fileStream?.writer()?.write(text)
                } catch (e: Exception) {
                    logError(e)
                } finally {
                    fileStream?.closeQuietly()
                    dialog.dismissSafe(activity)
                }
            }
            dialog.close_btt?.setOnClickListener {
                dialog.dismissSafe(activity)
            }
            return@setOnPreferenceClickListener true
        }

        getPref(R.string.manual_check_update_key)?.setOnPreferenceClickListener {
            thread {
                if (!requireActivity().runAutoUpdate(false)) {
                    activity?.runOnUiThread {
                        CommonActivity.showToast(activity, R.string.no_update_found, Toast.LENGTH_SHORT)
                    }
                }
            }
            return@setOnPreferenceClickListener true
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/subtitles/ChromecastSubtitlesFragment.kt
================================================
package com.lagradost.cloudstream3.ui.subtitles

import android.app.Activity
import android.content.Context
import android.content.res.Resources
import android.graphics.Color
import android.os.Bundle
import android.util.DisplayMetrics
import android.util.TypedValue
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import android.widget.Toast
import androidx.fragment.app.Fragment
import com.fasterxml.jackson.annotation.JsonProperty
import com.google.android.exoplayer2.text.Cue
import com.google.android.gms.cast.TextTrackStyle
import com.google.android.gms.cast.TextTrackStyle.*
import com.jaredrummler.android.colorpicker.ColorPickerDialog
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.CommonActivity.onColorSelectedEvent
import com.lagradost.cloudstream3.CommonActivity.onDialogDismissedEvent
import com.lagradost.cloudstream3.CommonActivity.showToast
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTvSettings
import com.lagradost.cloudstream3.utils.DataStore.setKey
import com.lagradost.cloudstream3.utils.Event
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showDialog
import com.lagradost.cloudstream3.utils.UIHelper.fixPaddingStatusbar
import com.lagradost.cloudstream3.utils.UIHelper.hideSystemUI
import com.lagradost.cloudstream3.utils.UIHelper.navigate
import com.lagradost.cloudstream3.utils.UIHelper.popCurrentPage
import kotlinx.android.synthetic.main.subtitle_settings.*

const val CHROME_SUBTITLE_KEY = "chome_subtitle_settings"

data class SaveChromeCaptionStyle(
    @JsonProperty("fontFamily") var fontFamily: String? = null,
    @JsonProperty("fontGenericFamily") var fontGenericFamily: Int? = null,
    @JsonProperty("backgroundColor") var backgroundColor: Int = 0x00FFFFFF, // transparent
    @JsonProperty("edgeColor") var edgeColor: Int = Color.BLACK, // BLACK
    @JsonProperty("edgeType") var edgeType: Int = TextTrackStyle.EDGE_TYPE_OUTLINE,
    @JsonProperty("foregroundColor") var foregroundColor: Int = Color.WHITE,
    @JsonProperty("fontScale") var fontScale: Float = 1.05f,
    @JsonProperty("windowColor") var windowColor: Int = Color.TRANSPARENT,
)

class ChromecastSubtitlesFragment : Fragment() {
    companion object {
        val applyStyleEvent = Event<SaveChromeCaptionStyle>()

        //fun Context.fromSaveToStyle(data: SaveChromeCaptionStyle): CaptionStyleCompat {
        //    return CaptionStyleCompat(
        //        data.foregroundColor,
        //        data.backgroundColor,
        //        data.windowColor,
        //        data.edgeType,
        //        data.edgeColor,
        //        if (typeface == null) Typeface.SANS_SERIF else ResourcesCompat.getFont(
        //            this,
        //            typeface
        //        )
        //    )
        //}

        fun push(activity: Activity?, hide: Boolean = true) {
            activity.navigate(R.id.global_to_navigation_chrome_subtitles, Bundle().apply {
                putBoolean("hide", hide)
            })
        }

        private fun getDefColor(id: Int): Int {
            return when (id) {
                0 -> Color.WHITE
                1 -> Color.BLACK
                2 -> Color.TRANSPARENT
                3 -> Color.TRANSPARENT
                else -> Color.TRANSPARENT
            }
        }

        fun Context.saveStyle(style: SaveChromeCaptionStyle) {
            this.setKey(CHROME_SUBTITLE_KEY, style)
        }

        private fun getPixels(unit: Int, size: Float): Int {
            val metrics: DisplayMetrics = Resources.getSystem().displayMetrics
            return TypedValue.applyDimension(unit, size, metrics).toInt()
        }

        fun getCurrentSavedStyle(): SaveChromeCaptionStyle {
            return getKey(CHROME_SUBTITLE_KEY) ?: defaultState
        }

        private val defaultState = SaveChromeCaptionStyle()
    }

    private fun onColorSelected(stuff: Pair<Int, Int>) {
        context?.setColor(stuff.first, stuff.second)
        if (hide)
            activity?.hideSystemUI()
    }

    private fun onDialogDismissed(id: Int) {
        if (hide)
            activity?.hideSystemUI()
    }

    private fun getColor(id: Int): Int {
        val color = when (id) {
            0 -> state.foregroundColor
            1 -> state.edgeColor
            2 -> state.backgroundColor
            3 -> state.windowColor

            else -> Color.TRANSPARENT
        }

        return if (color == Color.TRANSPARENT) Color.BLACK else color
    }

    private fun Context.setColor(id: Int, color: Int?) {
        val realColor = color ?: getDefColor(id)
        when (id) {
            0 -> state.foregroundColor = realColor
            1 -> state.edgeColor = realColor
            2 -> state.backgroundColor = realColor
            3 -> state.windowColor = realColor

            else -> Unit
        }
        updateState()
    }

    private fun Context.updateState() {
        //subtitle_text?.setStyle(fromSaveToStyle(state))
    }

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?,
    ): View? {
        return inflater.inflate(R.layout.chromecast_subtitle_settings, container, false)
    }

    private lateinit var state: SaveChromeCaptionStyle
    private var hide: Boolean = true

    override fun onDestroy() {
        super.onDestroy()
        onColorSelectedEvent -= ::onColorSelected
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        hide = arguments?.getBoolean("hide") ?: true
        onColorSelectedEvent += ::onColorSelected
        onDialogDismissedEvent += ::onDialogDismissed

        context?.fixPaddingStatusbar(subs_root)

        state = getCurrentSavedStyle()
        context?.updateState()

        val isTvSettings = context?.isTvSettings() == true

        fun View.setFocusableInTv() {
            this.isFocusableInTouchMode = isTvSettings
        }

        fun View.setup(id: Int) {
            setFocusableInTv()

            this.setOnClickListener {
                activity?.let {
                    ColorPickerDialog.newBuilder()
                        .setDialogId(id)
                        .setShowAlphaSlider(true)
                        .setColor(getColor(id))
                        .show(it)
                }
            }

            this.setOnLongClickListener {
                it.context.setColor(id, null)
                showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
                return@setOnLongClickListener true
            }
        }

        subs_text_color.setup(0)
        subs_outline_color.setup(1)
        subs_background_color.setup(2)

        val dismissCallback = {
            if (hide)
                activity?.hideSystemUI()
        }

        subs_edge_type.setFocusableInTv()
        subs_edge_type.setOnClickListener { textView ->
            val edgeTypes = listOf(
                Pair(
                    EDGE_TYPE_NONE,
                    textView.context.getString(R.string.subtitles_none)
                ),
                Pair(
                    EDGE_TYPE_OUTLINE,
                    textView.context.getString(R.string.subtitles_outline)
                ),
                Pair(
                    EDGE_TYPE_DEPRESSED,
                    textView.context.getString(R.string.subtitles_depressed)
                ),
                Pair(
                    EDGE_TYPE_DROP_SHADOW,
                    textView.context.getString(R.string.subtitles_shadow)
                ),
                Pair(
                    EDGE_TYPE_RAISED,
                    textView.context.getString(R.string.subtitles_raised)
                ),
            )

            //showBottomDialog
            activity?.showDialog(
                edgeTypes.map { it.second },
                edgeTypes.map { it.first }.indexOf(state.edgeType),
                (textView as TextView).text.toString(),
                false,
                dismissCallback
            ) { index ->
                state.edgeType = edgeTypes.map { it.first }[index]
                textView.context.updateState()
            }
        }

        subs_edge_type.setOnLongClickListener {
            state.edgeType = defaultState.edgeType
            it.context.updateState()
            showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
            return@setOnLongClickListener true
        }

        subs_font_size.setFocusableInTv()
        subs_font_size.setOnClickListener { textView ->
            val fontSizes = listOf(
                Pair(0.75f, "75%"),
                Pair(0.80f, "80%"),
                Pair(0.85f, "85%"),
                Pair(0.90f, "90%"),
                Pair(0.95f, "95%"),
                Pair(1.00f, "100%"),
                Pair(1.05f, textView.context.getString(R.string.normal)),
                Pair(1.10f, "110%"),
                Pair(1.15f, "115%"),
                Pair(1.20f, "120%"),
                Pair(1.25f, "125%"),
                Pair(1.30f, "130%"),
                Pair(1.35f, "135%"),
                Pair(1.40f, "140%"),
                Pair(1.45f, "145%"),
                Pair(1.50f, "150%"),
            )

            //showBottomDialog
            activity?.showDialog(
                fontSizes.map { it.second },
                fontSizes.map { it.first }.indexOf(state.fontScale),
                (textView as TextView).text.toString(),
                false,
                dismissCallback
            ) { index ->
                state.fontScale = fontSizes.map { it.first }[index]
                //textView.context.updateState() // font size not changed
            }
        }

        subs_font_size.setOnLongClickListener { _ ->
            state.fontScale = defaultState.fontScale
            //textView.context.updateState() // font size not changed
            showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
            return@setOnLongClickListener true
        }

        subs_font.setFocusableInTv()
        subs_font.setOnClickListener { textView ->
            val fontTypes = listOf(
                Pair(null, textView.context.getString(R.string.normal)),
                Pair("Droid Sans", "Droid Sans"),
                Pair("Droid Sans Mono", "Droid Sans Mono"),
                Pair("Droid Serif Regular", "Droid Serif Regular"),
                Pair("Cutive Mono", "Cutive Mono"),
                Pair("Short Stack", "Short Stack"),
                Pair("Quintessential", "Quintessential"),
                Pair("Alegreya Sans SC", "Alegreya Sans SC"),
            )

            //showBottomDialog
            activity?.showDialog(
                fontTypes.map { it.second },
                fontTypes.map { it.first }.indexOf(state.fontFamily),
                (textView as TextView).text.toString(),
                false,
                dismissCallback
            ) { index ->
                state.fontFamily = fontTypes.map { it.first }[index]
                textView.context.updateState()
            }
        }

        subs_font.setOnLongClickListener { textView ->
            state.fontFamily = defaultState.fontFamily
            textView.context.updateState()
            showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
            return@setOnLongClickListener true
        }

        cancel_btt.setOnClickListener {
            activity?.popCurrentPage()
        }

        apply_btt.setOnClickListener {
            it.context.saveStyle(state)
            applyStyleEvent.invoke(state)
            //it.context.fromSaveToStyle(state)
            activity?.popCurrentPage()
        }

        subtitle_text.setCues(
            listOf(
                Cue.Builder()
                    .setTextSize(
                        getPixels(TypedValue.COMPLEX_UNIT_SP, 25.0f).toFloat(),
                        Cue.TEXT_SIZE_TYPE_ABSOLUTE
                    )
                    .setText(subtitle_text.context.getString(R.string.subtitles_example_text))
                    .build()
            )
        )
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/ui/subtitles/SubtitlesFragment.kt
================================================
package com.lagradost.cloudstream3.ui.subtitles

import android.app.Activity
import android.content.Context
import android.content.res.Resources
import android.graphics.Color
import android.graphics.Typeface
import android.os.Bundle
import android.util.DisplayMetrics
import android.util.TypedValue
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import android.widget.Toast
import androidx.annotation.FontRes
import androidx.core.content.res.ResourcesCompat
import androidx.fragment.app.Fragment
import com.fasterxml.jackson.annotation.JsonProperty
import com.google.android.exoplayer2.text.Cue
import com.google.android.exoplayer2.ui.CaptionStyleCompat
import com.jaredrummler.android.colorpicker.ColorPickerDialog
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.CommonActivity.onColorSelectedEvent
import com.lagradost.cloudstream3.CommonActivity.onDialogDismissedEvent
import com.lagradost.cloudstream3.CommonActivity.showToast
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTrueTvSettings
import com.lagradost.cloudstream3.utils.DataStore.setKey
import com.lagradost.cloudstream3.utils.Event
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showDialog
import com.lagradost.cloudstream3.utils.SingleSelectionHelper.showMultiDialog
import com.lagradost.cloudstream3.utils.SubtitleHelper
import com.lagradost.cloudstream3.utils.UIHelper.fixPaddingStatusbar
import com.lagradost.cloudstream3.utils.UIHelper.hideSystemUI
import com.lagradost.cloudstream3.utils.UIHelper.navigate
import com.lagradost.cloudstream3.utils.UIHelper.popCurrentPage
import kotlinx.android.synthetic.main.subtitle_settings.*
import java.io.File

const val SUBTITLE_KEY = "subtitle_settings"
const val SUBTITLE_AUTO_SELECT_KEY = "subs_auto_select"
const val SUBTITLE_DOWNLOAD_KEY = "subs_auto_download"

data class SaveCaptionStyle(
    @JsonProperty("foregroundColor") var foregroundColor: Int,
    @JsonProperty("backgroundColor") var backgroundColor: Int,
    @JsonProperty("windowColor") var windowColor: Int,
    @CaptionStyleCompat.EdgeType
    @JsonProperty("edgeType") var edgeType: Int,
    @JsonProperty("edgeColor") var edgeColor: Int,
    @FontRes
    @JsonProperty("typeface") var typeface: Int?,
    @JsonProperty("typefaceFilePath") var typefaceFilePath: String?,
    /**in dp**/
    @JsonProperty("elevation") var elevation: Int,
    /**in sp**/
    @JsonProperty("fixedTextSize") var fixedTextSize: Float?,
)

const val DEF_SUBS_ELEVATION = 20

class SubtitlesFragment : Fragment() {
    companion object {
        val applyStyleEvent = Event<SaveCaptionStyle>()

        fun Context.fromSaveToStyle(data: SaveCaptionStyle): CaptionStyleCompat {
            return CaptionStyleCompat(
                data.foregroundColor,
                data.backgroundColor,
                data.windowColor,
                data.edgeType,
                data.edgeColor,
                data.typefaceFilePath?.let {
                    try {
                        // RuntimeException: Font asset not found
                        Typeface.createFromFile(File(it))
                    } catch (e: Exception) {
                        null
                    }
                } ?: data.typeface?.let {
                    ResourcesCompat.getFont(
                        this,
                        it
                    )
                }
                ?: Typeface.SANS_SERIF
            )
        }

        fun push(activity: Activity?, hide: Boolean = true) {
            activity.navigate(R.id.global_to_navigation_subtitles, Bundle().apply {
                putBoolean("hide", hide)
            })
        }

        private fun getDefColor(id: Int): Int {
            return when (id) {
                0 -> Color.WHITE
                1 -> Color.BLACK
                2 -> Color.TRANSPARENT
                3 -> Color.TRANSPARENT
                else -> Color.TRANSPARENT
            }
        }

        fun Context.saveStyle(style: SaveCaptionStyle) {
            this.setKey(SUBTITLE_KEY, style)
        }

        fun getCurrentSavedStyle(): SaveCaptionStyle {
            return getKey(SUBTITLE_KEY) ?: SaveCaptionStyle(
                getDefColor(0),
                getDefColor(2),
                getDefColor(3),
                CaptionStyleCompat.EDGE_TYPE_OUTLINE,
                getDefColor(1),
                null,
                null,
                DEF_SUBS_ELEVATION,
                null,
            )
        }

        private fun Context.getSavedFonts(): List<File> {
            val externalFiles = getExternalFilesDir(null) ?: return emptyList()
            val fontDir = File(externalFiles.absolutePath + "/Fonts").also {
                it.mkdir()
            }
            return fontDir.list()?.mapNotNull {
                if (it.endsWith(".ttf")) {
                    File(fontDir.absolutePath + "/" + it)
                } else null
            } ?: listOf()
        }

        private fun Context.getCurrentStyle(): CaptionStyleCompat {
            return fromSaveToStyle(getCurrentSavedStyle())
        }

        private fun getPixels(unit: Int, size: Float): Int {
            val metrics: DisplayMetrics = Resources.getSystem().displayMetrics
            return TypedValue.applyDimension(unit, size, metrics).toInt()
        }

        fun getDownloadSubsLanguageISO639_1(): List<String> {
            return getKey(SUBTITLE_DOWNLOAD_KEY) ?: listOf("en")
        }

        fun getAutoSelectLanguageISO639_1(): String {
            return getKey(SUBTITLE_AUTO_SELECT_KEY) ?: "en"
        }
    }

    private fun onColorSelected(stuff: Pair<Int, Int>) {
        context?.setColor(stuff.first, stuff.second)
        if (hide)
            activity?.hideSystemUI()
    }

    private fun onDialogDismissed(id: Int) {
        if (hide)
            activity?.hideSystemUI()
    }

    private fun Context.setColor(id: Int, color: Int?) {
        val realColor = color ?: getDefColor(id)
        when (id) {
            0 -> state.foregroundColor = realColor
            1 -> state.edgeColor = realColor
            2 -> state.backgroundColor = realColor
            3 -> state.windowColor = realColor

            else -> Unit
        }
        updateState()
    }

    private fun Context.updateState() {
        subtitle_text?.setStyle(fromSaveToStyle(state))
    }

    private fun getColor(id: Int): Int {
        val color = when (id) {
            0 -> state.foregroundColor
            1 -> state.edgeColor
            2 -> state.backgroundColor
            3 -> state.windowColor

            else -> Color.TRANSPARENT
        }

        return if (color == Color.TRANSPARENT) Color.BLACK else color
    }

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?,
    ): View? {
        return inflater.inflate(R.layout.subtitle_settings, container, false)
    }

    private lateinit var state: SaveCaptionStyle
    private var hide: Boolean = true

    override fun onDestroy() {
        super.onDestroy()
        onColorSelectedEvent -= ::onColorSelected
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        hide = arguments?.getBoolean("hide") ?: true
        onColorSelectedEvent += ::onColorSelected
        onDialogDismissedEvent += ::onDialogDismissed
        subs_import_text?.text = getString(R.string.subs_import_text).format(
            context?.getExternalFilesDir(null)?.absolutePath.toString() + "/Fonts"
        )


        context?.fixPaddingStatusbar(subs_root)

        state = getCurrentSavedStyle()
        context?.updateState()

        val isTvTrueSettings = context?.isTrueTvSettings() == true

        fun View.setFocusableInTv() {
            this.isFocusableInTouchMode = isTvTrueSettings
        }

        fun View.setup(id: Int) {
            setFocusableInTv()

            this.setOnClickListener {
                activity?.let {
                    ColorPickerDialog.newBuilder()
                        .setDialogId(id)
                        .setShowAlphaSlider(true)
                        .setColor(getColor(id))
                        .show(it)
                }
            }

            this.setOnLongClickListener {
                it.context.setColor(id, null)
                showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
                return@setOnLongClickListener true
            }
        }

        subs_text_color.setup(0)
        subs_outline_color.setup(1)
        subs_background_color.setup(2)
        subs_window_color.setup(3)

        val dismissCallback = {
            if (hide)
                activity?.hideSystemUI()
        }

        subs_subtitle_elevation.setFocusableInTv()
        subs_subtitle_elevation.setOnClickListener { textView ->
            val suffix = "dp"
            val elevationTypes = listOf(
                Pair(0, textView.context.getString(R.string.none)),
                Pair(10, "10$suffix"),
                Pair(20, "20$suffix"),
                Pair(30, "30$suffix"),
                Pair(40, "40$suffix"),
                Pair(50, "50$suffix"),
                Pair(60, "60$suffix"),
                Pair(70, "70$suffix"),
                Pair(80, "80$suffix"),
                Pair(90, "90$suffix"),
                Pair(100, "100$suffix"),
            )

            //showBottomDialog
            activity?.showDialog(
                elevationTypes.map { it.second },
                elevationTypes.map { it.first }.indexOf(state.elevation),
                (textView as TextView).text.toString(),
                false,
                dismissCallback
            ) { index ->
                state.elevation = elevationTypes.map { it.first }[index]
                textView.context.updateState()
                if (hide)
                    activity?.hideSystemUI()
            }
        }

        subs_subtitle_elevation.setOnLongClickListener {
            state.elevation = DEF_SUBS_ELEVATION
            it.context.updateState()
            showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
            return@setOnLongClickListener true
        }

        subs_edge_type.setFocusableInTv()
        subs_edge_type.setOnClickListener { textView ->
            val edgeTypes = listOf(
                Pair(
                    CaptionStyleCompat.EDGE_TYPE_NONE,
                    textView.context.getString(R.string.subtitles_none)
                ),
                Pair(
                    CaptionStyleCompat.EDGE_TYPE_OUTLINE,
                    textView.context.getString(R.string.subtitles_outline)
                ),
                Pair(
                    CaptionStyleCompat.EDGE_TYPE_DEPRESSED,
                    textView.context.getString(R.string.subtitles_depressed)
                ),
                Pair(
                    CaptionStyleCompat.EDGE_TYPE_DROP_SHADOW,
                    textView.context.getString(R.string.subtitles_shadow)
                ),
                Pair(
                    CaptionStyleCompat.EDGE_TYPE_RAISED,
                    textView.context.getString(R.string.subtitles_raised)
                ),
            )

            //showBottomDialog
            activity?.showDialog(
                edgeTypes.map { it.second },
                edgeTypes.map { it.first }.indexOf(state.edgeType),
                (textView as TextView).text.toString(),
                false,
                dismissCallback
            ) { index ->
                state.edgeType = edgeTypes.map { it.first }[index]
                textView.context.updateState()
            }
        }

        subs_edge_type.setOnLongClickListener {
            state.edgeType = CaptionStyleCompat.EDGE_TYPE_OUTLINE
            it.context.updateState()
            showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
            return@setOnLongClickListener true
        }

        subs_font_size.setFocusableInTv()
        subs_font_size.setOnClickListener { textView ->
            val suffix = "sp"
            val fontSizes = listOf(
                Pair(null, textView.context.getString(R.string.normal)),
                Pair(6f, "6$suffix"),
                Pair(7f, "7$suffix"),
                Pair(8f, "8$suffix"),
                Pair(9f, "9$suffix"),
                Pair(10f, "10$suffix"),
                Pair(11f, "11$suffix"),
                Pair(12f, "12$suffix"),
                Pair(13f, "13$suffix"),
                Pair(14f, "14$suffix"),
                Pair(15f, "15$suffix"),
                Pair(16f, "16$suffix"),
                Pair(17f, "17$suffix"),
                Pair(18f, "18$suffix"),
                Pair(19f, "19$suffix"),
                Pair(20f, "20$suffix"),
                Pair(21f, "21$suffix"),
                Pair(22f, "22$suffix"),
                Pair(23f, "23$suffix"),
                Pair(24f, "24$suffix"),
                Pair(25f, "25$suffix"),
                Pair(26f, "26$suffix"),
                Pair(28f, "28$suffix"),
                Pair(30f, "30$suffix"),
                Pair(32f, "32$suffix"),
                Pair(34f, "34$suffix"),
                Pair(36f, "36$suffix"),
                Pair(38f, "38$suffix"),
                Pair(40f, "40$suffix"),
                Pair(42f, "42$suffix"),
                Pair(44f, "44$suffix"),
                Pair(48f, "48$suffix"),
                Pair(60f, "60$suffix"),
            )

            //showBottomDialog
            activity?.showDialog(
                fontSizes.map { it.second },
                fontSizes.map { it.first }.indexOf(state.fixedTextSize),
                (textView as TextView).text.toString(),
                false,
                dismissCallback
            ) { index ->
                state.fixedTextSize = fontSizes.map { it.first }[index]
                //textView.context.updateState() // font size not changed
            }
        }

        subs_font_size.setOnLongClickListener { _ ->
            state.fixedTextSize = null
            //textView.context.updateState() // font size not changed
            showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
            return@setOnLongClickListener true
        }

        subs_font.setFocusableInTv()
        subs_font.setOnClickListener { textView ->
            val fontTypes = listOf(
                Pair(null, textView.context.getString(R.string.normal)),
                Pair(R.font.trebuchet_ms, "Trebuchet MS"),
                Pair(R.font.netflix_sans, "Netflix Sans"),
                Pair(R.font.google_sans, "Google Sans"),
                Pair(R.font.open_sans, "Open Sans"),
                Pair(R.font.futura, "Futura"),
                Pair(R.font.consola, "Consola"),
                Pair(R.font.gotham, "Gotham"),
                Pair(R.font.lucida_grande, "Lucida Grande"),
                Pair(R.font.stix_general, "STIX General"),
                Pair(R.font.times_new_roman, "Times New Roman"),
                Pair(R.font.verdana, "Verdana"),
                Pair(R.font.ubuntu_regular, "Ubuntu"),
                Pair(R.font.comic_sans, "Comic Sans"),
                Pair(R.font.poppins_regular, "Poppins"),
            )
            val savedFontTypes = textView.context.getSavedFonts()

            val currentIndex =
                savedFontTypes.indexOfFirst { it.absolutePath == state.typefaceFilePath }
                    .let { index ->
                        if (index == -1)
                            fontTypes.indexOfFirst { it.first == state.typeface }
                        else index + fontTypes.size
                    }

            //showBottomDialog
            activity?.showDialog(
                fontTypes.map { it.second } + savedFontTypes.map { it.name },
                currentIndex,
                (textView as TextView).text.toString(),
                false,
                dismissCallback
            ) { index ->
                if (index < fontTypes.size) {
                    state.typeface = fontTypes[index].first
                    state.typefaceFilePath = null
                } else {
                    state.typefaceFilePath = savedFontTypes[index - fontTypes.size].absolutePath
                    state.typeface = null
                }
                textView.context.updateState()
            }
        }

        subs_font.setOnLongClickListener { textView ->
            state.typeface = null
            state.typefaceFilePath = null
            textView.context.updateState()
            showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
            return@setOnLongClickListener true
        }

        subs_auto_select_language.setFocusableInTv()
        subs_auto_select_language.setOnClickListener { textView ->
            val langMap = arrayListOf(
                SubtitleHelper.Language639(
                    textView.context.getString(R.string.none),
                    textView.context.getString(R.string.none),
                    "",
                    "",
                    "",
                    "",
                    ""
                ),
            )
            langMap.addAll(SubtitleHelper.languages)

            val lang639_1 = langMap.map { it.ISO_639_1 }
            activity?.showDialog(
                langMap.map { it.languageName },
                lang639_1.indexOf(getAutoSelectLanguageISO639_1()),
                (textView as TextView).text.toString(),
                true,
                dismissCallback
            ) { index ->
                setKey(SUBTITLE_AUTO_SELECT_KEY, lang639_1[index])
            }
        }

        subs_auto_select_language.setOnLongClickListener {
            setKey(SUBTITLE_AUTO_SELECT_KEY, "en")
            showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
            return@setOnLongClickListener true
        }

        subs_download_languages.setFocusableInTv()
        subs_download_languages.setOnClickListener { textView ->
            val langMap = SubtitleHelper.languages
            val lang639_1 = langMap.map { it.ISO_639_1 }
            val keys = getDownloadSubsLanguageISO639_1()
            val keyMap = keys.map { lang639_1.indexOf(it) }.filter { it >= 0 }

            activity?.showMultiDialog(
                langMap.map { it.languageName },
                keyMap,
                (textView as TextView).text.toString(),
                dismissCallback
            ) { indexList ->
                setKey(SUBTITLE_DOWNLOAD_KEY, indexList.map { lang639_1[it] }.toList())
            }
        }

        subs_download_languages.setOnLongClickListener {
            setKey(SUBTITLE_DOWNLOAD_KEY, listOf("en"))

            showToast(activity, R.string.subs_default_reset_toast, Toast.LENGTH_SHORT)
            return@setOnLongClickListener true
        }

        cancel_btt.setOnClickListener {
            activity?.popCurrentPage()
        }

        apply_btt.setOnClickListener {
            it.context.saveStyle(state)
            applyStyleEvent.invoke(state)
            it.context.fromSaveToStyle(state)
            activity?.popCurrentPage()
        }

        subtitle_text.setCues(
            listOf(
                Cue.Builder()
                    .setTextSize(
                        getPixels(TypedValue.COMPLEX_UNIT_SP, 25.0f).toFloat(),
                        Cue.TEXT_SIZE_TYPE_ABSOLUTE
                    )
                    .setText(subtitle_text.context.getString(R.string.subtitles_example_text))
                    .build()
            )
        )
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/AppUtils.kt
================================================
package com.lagradost.cloudstream3.utils

import android.annotation.SuppressLint
import android.app.Activity
import android.content.ContentValues
import android.content.Context
import android.content.Intent
import android.content.pm.PackageManager
import android.database.Cursor
import android.media.AudioAttributes
import android.media.AudioFocusRequest
import android.media.AudioManager
import android.media.tv.TvContract.Channels.COLUMN_INTERNAL_PROVIDER_ID
import android.net.ConnectivityManager
import android.net.NetworkCapabilities
import android.net.Uri
import android.os.Build
import android.os.Environment
import android.os.ParcelFileDescriptor
import android.provider.MediaStore
import android.util.Log
import androidx.annotation.RequiresApi
import androidx.annotation.WorkerThread
import androidx.appcompat.app.AppCompatActivity
import androidx.core.content.ContextCompat
import androidx.tvprovider.media.tv.PreviewChannelHelper
import androidx.tvprovider.media.tv.TvContractCompat
import androidx.tvprovider.media.tv.WatchNextProgram
import androidx.tvprovider.media.tv.WatchNextProgram.fromCursor
import com.fasterxml.jackson.module.kotlin.readValue
import com.google.android.gms.cast.framework.CastContext
import com.google.android.gms.cast.framework.CastState
import com.google.android.gms.common.ConnectionResult
import com.google.android.gms.common.GoogleApiAvailability
import com.google.android.gms.common.wrappers.Wrappers
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.SearchResponse
import com.lagradost.cloudstream3.isMovieType
import com.lagradost.cloudstream3.mapper
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.ui.result.ResultFragment
import com.lagradost.cloudstream3.utils.Coroutines.ioSafe
import com.lagradost.cloudstream3.utils.FillerEpisodeCheck.toClassDir
import com.lagradost.cloudstream3.utils.JsUnpacker.Companion.load
import com.lagradost.cloudstream3.utils.UIHelper.navigate
import okhttp3.Cache
import java.io.*
import java.net.URL
import java.net.URLDecoder

object AppUtils {
    //fun Context.deleteFavorite(data: SearchResponse) {
    //    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.O) return
    //    normalSafeApiCall {
    //        val existingId =
    //            getWatchNextProgramByVideoId(data.url, this).second ?: return@normalSafeApiCall
    //        contentResolver.delete(
//
    //            TvContractCompat.buildWatchNextProgramUri(existingId),
    //            null, null
    //        )
    //    }
    //}
    @SuppressLint("RestrictedApi")
    private fun buildWatchNextProgramUri(
        context: Context,
        card: DataStoreHelper.ResumeWatchingResult
    ): WatchNextProgram {
        val isSeries = card.type?.isMovieType() == false
        val title = if (isSeries) {
            context.getNameFull(card.name, card.episode, card.season)
        } else {
            card.name
        }

        val builder = WatchNextProgram.Builder()
            .setEpisodeTitle(title)
            .setType(
                if (isSeries) {
                    TvContractCompat.WatchNextPrograms.TYPE_TV_EPISODE
                } else TvContractCompat.WatchNextPrograms.TYPE_MOVIE
            )
            .setWatchNextType(TvContractCompat.WatchNextPrograms.WATCH_NEXT_TYPE_CONTINUE)
            .setTitle(title)
            .setPosterArtUri(Uri.parse(card.posterUrl))
            .setIntentUri(Uri.parse(card.url)) //TODO FIX intent
            .setInternalProviderId(card.url)
        //.setLastEngagementTimeUtcMillis(System.currentTimeMillis())

        card.watchPos?.let {
            builder.setDurationMillis(it.duration.toInt())
            builder.setLastPlaybackPositionMillis(it.position.toInt())
        }
        // .setLastEngagementTimeUtcMillis() //TODO

        if (isSeries)
            card.episode?.let {
                builder.setEpisodeNumber(it)
            }

        return builder.build()
    }

    /**
     * Find the Watch Next program for given id.
     * Returns the first instance available.
     */
    @SuppressLint("RestrictedApi")
    // Suppress RestrictedApi due to https://issuetracker.google.com/138150076
    fun findFirstWatchNextProgram(context: Context, predicate: (Cursor) -> Boolean):
            Pair<WatchNextProgram?, Long?> {
        val COLUMN_WATCH_NEXT_ID_INDEX = 0
//        val COLUMN_WATCH_NEXT_INTERNAL_PROVIDER_ID_INDEX = 1
//        val COLUMN_WATCH_NEXT_COLUMN_BROWSABLE_INDEX = 2

        val cursor = context.contentResolver.query(
            TvContractCompat.WatchNextPrograms.CONTENT_URI,
            WatchNextProgram.PROJECTION,
            /* selection = */ null,
            /* selectionArgs = */ null,
            /* sortOrder= */ null
        )
        cursor?.use {
            if (it.moveToFirst()) {
                do {
                    if (predicate(cursor)) {
                        return fromCursor(cursor) to cursor.getLong(COLUMN_WATCH_NEXT_ID_INDEX)
                    }
                } while (it.moveToNext())
            }
        }
        return null to null
    }

    /**
     * Query the Watch Next list and find the program with given videoId.
     * Return null if not found.
     */

    @RequiresApi(Build.VERSION_CODES.O)
    @SuppressLint("Range")
    @Synchronized
    private fun getWatchNextProgramByVideoId(
        id: String,
        context: Context
    ): Pair<WatchNextProgram?, Long?> {
        return findFirstWatchNextProgram(context) { cursor ->
            (cursor.getString(cursor.getColumnIndex(COLUMN_INTERNAL_PROVIDER_ID)) == id)
        }
    }

    // https://github.com/googlearchive/leanback-homescreen-channels/blob/master/app/src/main/java/com/google/android/tvhomescreenchannels/SampleTvProvider.java
    @SuppressLint("RestrictedApi")
    @WorkerThread
    fun Context.addProgramsToContinueWatching(data: List<DataStoreHelper.ResumeWatchingResult>) {
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.O) return

        ioSafe {
            data.forEach { episodeInfo ->
                try {
                    val (program, id) = getWatchNextProgramByVideoId(episodeInfo.url, this)
                    val nextProgram = buildWatchNextProgramUri(this, episodeInfo)

                    // If the program is already in the Watch Next row, update it
                    if (program != null && id != null) {
                        PreviewChannelHelper(this).updateWatchNextProgram(
                            nextProgram,
                            id,
                        )
                    } else {
                        PreviewChannelHelper(this)
                            .publishWatchNextProgram(nextProgram)
                    }
                } catch (e: Exception) {
                    logError(e)
                }
            }
        }
    }

    @SuppressLint("Range")
    fun getVideoContentUri(context: Context, videoFilePath: String): Uri? {
        val cursor = context.contentResolver.query(
            MediaStore.Video.Media.EXTERNAL_CONTENT_URI, arrayOf(MediaStore.Video.Media._ID),
            MediaStore.Video.Media.DATA + "=? ", arrayOf(videoFilePath), null
        )
        return if (cursor != null && cursor.moveToFirst()) {
            val id = cursor.getInt(cursor.getColumnIndex(MediaStore.MediaColumns._ID))
            cursor.close()
            Uri.withAppendedPath(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, "" + id)
        } else {
            val values = ContentValues()
            values.put(MediaStore.Video.Media.DATA, videoFilePath)
            context.contentResolver.insert(
                MediaStore.Video.Media.EXTERNAL_CONTENT_URI, values
            )
        }
    }

    fun Context.openBrowser(url: String) {
        try {
            val intent = Intent(Intent.ACTION_VIEW)
            intent.data = Uri.parse(url)
            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK)
            ContextCompat.startActivity(this, intent, null)
        } catch (e: Exception) {
            logError(e)
        }
    }

    fun splitQuery(url: URL): Map<String, String> {
        val queryPairs: MutableMap<String, String> = LinkedHashMap()
        val query: String = url.query
        val pairs = query.split("&").toTypedArray()
        for (pair in pairs) {
            val idx = pair.indexOf("=")
            queryPairs[URLDecoder.decode(pair.substring(0, idx), "UTF-8")] =
                URLDecoder.decode(pair.substring(idx + 1), "UTF-8")
        }
        return queryPairs
    }

    /** Any object as json string */
    fun Any.toJson(): String {
        if(this is String) return this
        return mapper.writeValueAsString(this)
    }

    inline fun <reified T> parseJson(value: String): T {
        return mapper.readValue(value)
    }

    inline fun <reified T> tryParseJson(value: String?): T? {
        return try {
            parseJson(value ?: return null)
        } catch (_: Exception) {
            null
        }
    }

    /**| S1:E2 Hello World
     * | Episode 2. Hello world
     * | Hello World
     * | Season 1 - Episode 2
     * | Episode 2
     * **/
    fun Context.getNameFull(name: String?, episode: Int?, season: Int?): String {
        val rEpisode = if (episode == 0) null else episode
        val rSeason = if (season == 0) null else season

        val seasonName = getString(R.string.season)
        val episodeName = getString(R.string.episode)
        val seasonNameShort = getString(R.string.season_short)
        val episodeNameShort = getString(R.string.episode_short)

        if (name != null) {
            return if (rEpisode != null && rSeason != null) {
                "$seasonNameShort${rSeason}:$episodeNameShort${rEpisode} $name"
            } else if (rEpisode != null) {
                "$episodeName $rEpisode. $name"
            } else {
                name
            }
        } else {
            if (rEpisode != null && rSeason != null) {
                return "$seasonName $rSeason - $episodeName $rEpisode"
            } else if (rSeason == null) {
                return "$episodeName $rEpisode"
            }
        }
        return ""
    }

    fun Activity?.loadCache() {
        try {
            cacheClass("android.net.NetworkCapabilities".load())
        } catch (_: Exception) {
        }
    }

    //private val viewModel: ResultViewModel by activityViewModels()

    fun AppCompatActivity.loadResult(
        url: String,
        apiName: String,
        startAction: Int = 0,
        startValue: Int = 0
    ) {
        this.runOnUiThread {
            // viewModelStore.clear()
            this.navigate(
                R.id.global_to_navigation_results,
                ResultFragment.newInstance(url, apiName, startAction, startValue)
            )
        }
    }

    fun Activity?.loadSearchResult(
        card: SearchResponse,
        startAction: Int = 0,
        startValue: Int? = null,
    ) {
        this?.runOnUiThread {
            // viewModelStore.clear()
            this.navigate(
                R.id.global_to_navigation_results,
                ResultFragment.newInstance(card, startAction, startValue)
            )
        }
        //(this as? AppCompatActivity?)?.loadResult(card.url, card.apiName, startAction, startValue)
    }

    fun Activity.requestLocalAudioFocus(focusRequest: AudioFocusRequest?) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O && focusRequest != null) {
            val audioManager = getSystemService(Context.AUDIO_SERVICE) as AudioManager
            audioManager.requestAudioFocus(focusRequest)
        } else {
            val audioManager: AudioManager =
                getSystemService(Context.AUDIO_SERVICE) as AudioManager
            audioManager.requestAudioFocus(
                null,
                AudioManager.STREAM_MUSIC,
                AudioManager.AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK
            )
        }
    }

    private var currentAudioFocusRequest: AudioFocusRequest? = null
    private var currentAudioFocusChangeListener: AudioManager.OnAudioFocusChangeListener? = null
    var onAudioFocusEvent = Event<Boolean>()

    private fun getAudioListener(): AudioManager.OnAudioFocusChangeListener? {
        if (currentAudioFocusChangeListener != null) return currentAudioFocusChangeListener
        currentAudioFocusChangeListener = AudioManager.OnAudioFocusChangeListener {
            onAudioFocusEvent.invoke(
                when (it) {
                    AudioManager.AUDIOFOCUS_GAIN -> false
                    AudioManager.AUDIOFOCUS_GAIN_TRANSIENT_EXCLUSIVE -> false
                    AudioManager.AUDIOFOCUS_GAIN_TRANSIENT -> false
                    else -> true
                }
            )
        }
        return currentAudioFocusChangeListener
    }

    fun Context.isCastApiAvailable(): Boolean {
        val isCastApiAvailable =
            GoogleApiAvailability.getInstance()
                .isGooglePlayServicesAvailable(applicationContext) == ConnectionResult.SUCCESS
        try {
            applicationContext?.let { CastContext.getSharedInstance(it) }
        } catch (e: Exception) {
            println(e)
            // track non-fatal
            return false
        }
        return isCastApiAvailable
    }

    fun Context.isConnectedToChromecast(): Boolean {
        if (isCastApiAvailable()) {
            val castContext = CastContext.getSharedInstance(this)
            if (castContext.castState == CastState.CONNECTED) {
                return true
            }
        }
        return false
    }

    // Copied from https://github.com/videolan/vlc-android/blob/master/application/vlc-android/src/org/videolan/vlc/util/FileUtils.kt
    @SuppressLint("Range")
    fun Context.getUri(data: Uri?): Uri? {
        var uri = data
        val ctx = this
        if (data != null && data.scheme == "content") {
            // Mail-based apps - download the stream to a temporary file and play it
            if ("com.fsck.k9.attachmentprovider" == data.host || "gmail-ls" == data.host) {
                var inputStream: InputStream? = null
                var os: OutputStream? = null
                var cursor: Cursor? = null
                try {
                    cursor = ctx.contentResolver.query(
                        data,
                        arrayOf(MediaStore.MediaColumns.DISPLAY_NAME), null, null, null
                    )
                    if (cursor != null && cursor.moveToFirst()) {
                        val filename =
                            cursor.getString(cursor.getColumnIndex(MediaStore.MediaColumns.DISPLAY_NAME))
                                .replace("/", "")
                        inputStream = ctx.contentResolver.openInputStream(data)
                        if (inputStream == null) return data
                        os =
                            FileOutputStream(Environment.getExternalStorageDirectory().path + "/Download/" + filename)
                        val buffer = ByteArray(1024)
                        var bytesRead = inputStream.read(buffer)
                        while (bytesRead >= 0) {
                            os.write(buffer, 0, bytesRead)
                            bytesRead = inputStream.read(buffer)
                        }
                        uri =
                            Uri.fromFile(File(Environment.getExternalStorageDirectory().path + "/Download/" + filename))
                    }
                } catch (e: Exception) {
                    return null
                } finally {
                    inputStream?.close()
                    os?.close()
                    cursor?.close()
                }
            } else if (data.authority == "media") {
                uri = this.contentResolver.query(
                    data,
                    arrayOf(MediaStore.Video.Media.DATA), null, null, null
                )?.use {
                    val columnIndex = it.getColumnIndexOrThrow(MediaStore.Video.Media.DATA)
                    if (it.moveToFirst()) Uri.fromFile(File(it.getString(columnIndex)))
                        ?: data else data
                }
                //uri = MediaUtils.getContentMediaUri(data)
                /*} else if (data.authority == ctx.getString(R.string.tv_provider_authority)) {
                    println("TV AUTHORITY")
                    //val medialibrary = Medialibrary.getInstance()
                    //val media = medialibrary.getMedia(data.lastPathSegment!!.toLong())
                    uri = null//media.uri*/
            } else {
                val inputPFD: ParcelFileDescriptor?
                try {
                    inputPFD = ctx.contentResolver.openFileDescriptor(data, "r")
                    if (inputPFD == null) return data
                    uri = Uri.parse("fd://" + inputPFD.fd)
                    //                    Cursor returnCursor =
                    //                            getContentResolver().query(data, null, null, null, null);
                    //                    if (returnCursor != null) {
                    //                        if (returnCursor.getCount() > 0) {
                    //                            int nameIndex = returnCursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);
                    //                            if (nameIndex > -1) {
                    //                                returnCursor.moveToFirst();
                    //                                title = returnCursor.getString(nameIndex);
                    //                            }
                    //                        }
                    //                        returnCursor.close();
                    //                    }
                } catch (e: FileNotFoundException) {
                    Log.e("TAG", "${e.message} for $data", e)
                    return null
                } catch (e: IllegalArgumentException) {
                    Log.e("TAG", "${e.message} for $data", e)
                    return null
                } catch (e: IllegalStateException) {
                    Log.e("TAG", "${e.message} for $data", e)
                    return null
                } catch (e: NullPointerException) {
                    Log.e("TAG", "${e.message} for $data", e)
                    return null
                } catch (e: SecurityException) {
                    Log.e("TAG", "${e.message} for $data", e)
                    return null
                }
            }// Media or MMS URI
        }
        return uri
    }

    fun Context.isUsingMobileData(): Boolean {
        val conManager = getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
        val networkInfo = conManager.allNetworks
        return networkInfo.any {
            conManager.getNetworkCapabilities(it)
                ?.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) == true
        }
    }

    private fun Activity?.cacheClass(clazz: String?) {
        clazz?.let { c ->
            this?.cacheDir?.let {
                Cache(
                    directory = File(it, c.toClassDir()),
                    maxSize = 20L * 1024L * 1024L // 20 MiB
                )
            }
        }
    }

    fun Context.isAppInstalled(uri: String): Boolean {
        val pm = Wrappers.packageManager(this)

        return try {
            pm.getPackageInfo(uri, 0) // PackageManager.GET_ACTIVITIES
            true
        } catch (e: PackageManager.NameNotFoundException) {
            false
        }
    }

    fun getFocusRequest(): AudioFocusRequest? {
        if (currentAudioFocusRequest != null) return currentAudioFocusRequest
        currentAudioFocusRequest = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            AudioFocusRequest.Builder(AudioManager.AUDIOFOCUS_GAIN).run {
                setAudioAttributes(AudioAttributes.Builder().run {
                    setUsage(AudioAttributes.USAGE_MEDIA)
                    setContentType(AudioAttributes.CONTENT_TYPE_MOVIE)
                    build()
                })
                setAcceptsDelayedFocusGain(true)
                getAudioListener()?.let {
                    setOnAudioFocusChangeListener(it)
                }
                build()
            }
        } else {
            null
        }
        return currentAudioFocusRequest
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/BackupUtils.kt
================================================
package com.lagradost.cloudstream3.utils

import android.content.ContentValues
import android.content.Context
import android.net.Uri
import android.os.Build
import android.provider.MediaStore
import android.widget.Toast
import androidx.activity.result.ActivityResultLauncher
import androidx.activity.result.contract.ActivityResultContracts
import androidx.fragment.app.FragmentActivity
import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.CommonActivity.showToast
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.DataStore.getDefaultSharedPrefs
import com.lagradost.cloudstream3.utils.DataStore.getSharedPrefs
import com.lagradost.cloudstream3.utils.DataStore.mapper
import com.lagradost.cloudstream3.utils.DataStore.setKeyRaw
import com.lagradost.cloudstream3.utils.UIHelper.checkWrite
import com.lagradost.cloudstream3.utils.UIHelper.requestRW
import com.lagradost.cloudstream3.utils.VideoDownloadManager.getBasePath
import com.lagradost.cloudstream3.utils.VideoDownloadManager.isDownloadDir
import java.io.IOException
import java.io.PrintWriter
import java.lang.System.currentTimeMillis
import java.text.SimpleDateFormat
import java.util.*

object BackupUtils {
    var restoreFileSelector: ActivityResultLauncher<Array<String>>? = null

    // Kinda hack, but I couldn't think of a better way
    data class BackupVars(
        @JsonProperty("_Bool") val _Bool: Map<String, Boolean>?,
        @JsonProperty("_Int") val _Int: Map<String, Int>?,
        @JsonProperty("_String") val _String: Map<String, String>?,
        @JsonProperty("_Float") val _Float: Map<String, Float>?,
        @JsonProperty("_Long") val _Long: Map<String, Long>?,
        @JsonProperty("_StringSet") val _StringSet: Map<String, Set<String>?>?,
    )

    data class BackupFile(
        @JsonProperty("datastore") val datastore: BackupVars,
        @JsonProperty("settings") val settings: BackupVars
    )

    fun FragmentActivity.backup() {
        try {
            if (checkWrite()) {
                val subDir = getBasePath().first
                val date = SimpleDateFormat("yyyy_MM_dd_HH_mm").format(Date(currentTimeMillis()))
                val ext = "json"
                val displayName = "CS3_Backup_${date}"

                val allData = getSharedPrefs().all
                val allSettings = getDefaultSharedPrefs().all

                val allDataSorted = BackupVars(
                    allData.filter { it.value is Boolean } as? Map<String, Boolean>,
                    allData.filter { it.value is Int } as? Map<String, Int>,
                    allData.filter { it.value is String } as? Map<String, String>,
                    allData.filter { it.value is Float } as? Map<String, Float>,
                    allData.filter { it.value is Long } as? Map<String, Long>,
                    allData.filter { it.value as? Set<String> != null } as? Map<String, Set<String>>
                )

                val allSettingsSorted = BackupVars(
                    allSettings.filter { it.value is Boolean } as? Map<String, Boolean>,
                    allSettings.filter { it.value is Int } as? Map<String, Int>,
                    allSettings.filter { it.value is String } as? Map<String, String>,
                    allSettings.filter { it.value is Float } as? Map<String, Float>,
                    allSettings.filter { it.value is Long } as? Map<String, Long>,
                    allSettings.filter { it.value as? Set<String> != null } as? Map<String, Set<String>>
                )

                val backupFile = BackupFile(
                    allDataSorted,
                    allSettingsSorted
                )
                val steam =
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q && subDir?.isDownloadDir() == true) {
                        val cr = this.contentResolver
                        val contentUri =
                            MediaStore.Downloads.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY) // USE INSTEAD OF MediaStore.Downloads.EXTERNAL_CONTENT_URI
                        //val currentMimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension)

                        val newFile = ContentValues().apply {
                            put(MediaStore.MediaColumns.DISPLAY_NAME, displayName)
                            put(MediaStore.MediaColumns.TITLE, displayName)
                            put(MediaStore.MediaColumns.MIME_TYPE, "application/json")
                            //put(MediaStore.MediaColumns.RELATIVE_PATH, folder)
                        }

                        val newFileUri = cr.insert(
                            contentUri,
                            newFile
                        ) ?: throw IOException("Error creating file uri")
                        cr.openOutputStream(newFileUri, "w")
                            ?: throw IOException("Error opening stream")
                    } else {
                        val fileName = "$displayName.$ext"
                        val rFile = subDir?.findFile(fileName)
                        if (rFile?.exists() == true) {
                            rFile.delete()
                        }
                        val file =
                            subDir?.createFile(fileName)
                                ?: throw IOException("Error creating file")
                        if (!file.exists()) throw IOException("File does not exist")
                        file.openOutputStream()
                    }

                val printStream = PrintWriter(steam)
                printStream.print(mapper.writeValueAsString(backupFile))
                printStream.close()

                showToast(
                    this,
                    R.string.backup_success,
                    Toast.LENGTH_LONG
                )
            } else {
                showToast(this, getString(R.string.backup_failed), Toast.LENGTH_LONG)
                requestRW()
                return
            }
        } catch (e: Exception) {
            logError(e)
            try {
                showToast(
                    this,
                    getString(R.string.backup_failed_error_format).format(e.toString()),
                    Toast.LENGTH_LONG
                )
            } catch (e: Exception) {
                logError(e)
            }
        }
    }

    fun FragmentActivity.setUpBackup() {
        try {
            restoreFileSelector =
                registerForActivityResult(ActivityResultContracts.OpenDocument()) { uri: Uri? ->
                    this.let { activity ->
                        uri?.let {
                            try {
                                val input =
                                    activity.contentResolver.openInputStream(uri)
                                        ?: return@registerForActivityResult

                                val restoredValue =
                                    mapper.readValue<BackupFile>(input)
                                activity.restore(
                                    restoredValue,
                                    restoreSettings = true,
                                    restoreDataStore = true
                                )
                                activity.recreate()
                            } catch (e: Exception) {
                                logError(e)
                                try { // smth can fail in .format
                                    showToast(
                                        activity,
                                        getString(R.string.restore_failed_format).format(e.toString())
                                    )
                                } catch (e: Exception) {
                                    logError(e)
                                }
                            }
                        }
                    }
                }
        } catch (e: Exception) {
            logError(e)
        }
    }

    fun FragmentActivity.restorePrompt() {
        runOnUiThread {
            try {
                restoreFileSelector?.launch(
                    arrayOf(
                        "text/plain",
                        "text/str",
                        "text/x-unknown",
                        "application/json",
                        "unknown/unknown",
                        "content/unknown",
                    )
                )
            } catch (e : Exception) {
                showToast(this,e.message)
                logError(e)
            }
        }
    }

    private fun <T> Context.restoreMap(
        map: Map<String, T>?,
        isEditingAppSettings: Boolean = false
    ) {
        map?.forEach {
            setKeyRaw(it.key, it.value, isEditingAppSettings)
        }
    }

    fun Context.restore(
        backupFile: BackupFile,
        restoreSettings: Boolean,
        restoreDataStore: Boolean
    ) {
        if (restoreSettings) {
            restoreMap(backupFile.settings._Bool, true)
            restoreMap(backupFile.settings._Int, true)
            restoreMap(backupFile.settings._String, true)
            restoreMap(backupFile.settings._Float, true)
            restoreMap(backupFile.settings._Long, true)
            restoreMap(backupFile.settings._StringSet, true)
        }

        if (restoreDataStore) {
            restoreMap(backupFile.datastore._Bool)
            restoreMap(backupFile.datastore._Int)
            restoreMap(backupFile.datastore._String)
            restoreMap(backupFile.datastore._Float)
            restoreMap(backupFile.datastore._Long)
            restoreMap(backupFile.datastore._StringSet)
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/CastHelper.kt
================================================
package com.lagradost.cloudstream3.utils

import android.net.Uri
import com.google.android.exoplayer2.util.MimeTypes
import com.google.android.gms.cast.*
import com.google.android.gms.cast.framework.CastSession
import com.google.android.gms.cast.framework.media.RemoteMediaClient
import com.google.android.gms.common.api.PendingResult
import com.google.android.gms.common.images.WebImage
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.ui.MetadataHolder
import com.lagradost.cloudstream3.ui.player.SubtitleData
import com.lagradost.cloudstream3.ui.result.ResultEpisode
import com.lagradost.cloudstream3.utils.AppUtils.toJson
import com.lagradost.cloudstream3.utils.Coroutines.main
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext
import org.json.JSONObject

object CastHelper {
    fun getMediaInfo(
        epData: ResultEpisode,
        holder: MetadataHolder,
        index: Int,
        data: JSONObject?,
        subtitles: List<SubtitleData>
    ): MediaInfo {
        val link = holder.currentLinks[index]
        val movieMetadata = MediaMetadata(MediaMetadata.MEDIA_TYPE_MOVIE)
        movieMetadata.putString(
            MediaMetadata.KEY_SUBTITLE,
            if (holder.isMovie)
                "${link.name} ${Qualities.getStringByInt(link.quality)}"
            else
                (epData.name ?: "Episode ${epData.episode}") + " - ${link.name} ${Qualities.getStringByInt(link.quality)}"
        )

        holder.title?.let {
            movieMetadata.putString(MediaMetadata.KEY_TITLE, it)
        }

        val srcPoster = epData.poster ?: holder.poster
        if (srcPoster != null) {
            movieMetadata.addImage(WebImage(Uri.parse(srcPoster)))
        }

        var subIndex = 0
        val tracks = subtitles.map {
            MediaTrack.Builder(subIndex++.toLong(), MediaTrack.TYPE_TEXT)
                .setName(it.name)
                .setSubtype(MediaTrack.SUBTYPE_SUBTITLES)
                .setContentId(it.url)
                .build()
        }

        val builder = MediaInfo.Builder(link.url)
            .setStreamType(MediaInfo.STREAM_TYPE_BUFFERED)
            .setContentType(if (link.isM3u8) MimeTypes.APPLICATION_M3U8 else MimeTypes.VIDEO_MP4)
            .setMetadata(movieMetadata)
            .setMediaTracks(tracks)
        data?.let {
            builder.setCustomData(data)
        }

        return builder.build()
    }

    fun awaitLinks(
        pending: PendingResult<RemoteMediaClient.MediaChannelResult>?,
        callback: (Boolean) -> Unit
    ) {
        if (pending == null) return
        main {
            val res = withContext(Dispatchers.IO) { pending.await() }
            when (res.status.statusCode) {
                CastStatusCodes.FAILED -> {
                    callback.invoke(true)
                    println("FAILED AND LOAD NEXT")
                }
                else -> Unit //IDK DO SMTH HERE
            }
        }
    }

    fun CastSession?.startCast(
        apiName: String,
        isMovie: Boolean,
        title: String?,
        poster: String?,
        currentEpisodeIndex: Int,
        episodes: List<ResultEpisode>,
        currentLinks: List<ExtractorLink>,
        subtitles: List<SubtitleData>,
        startIndex: Int? = null,
        startTime: Long? = null,
    ): Boolean {
        try {
            if (this == null) return false
            if (episodes.isEmpty()) return false
            if (currentEpisodeIndex >= episodes.size) return false

            val epData = episodes[currentEpisodeIndex]

            val holder =
                MetadataHolder(
                    apiName,
                    isMovie,
                    title,
                    poster,
                    currentEpisodeIndex,
                    episodes,
                    currentLinks,
                    subtitles
                )

            val index = if (startIndex == null || startIndex < 0) 0 else startIndex

            val mediaItem =
                getMediaInfo(epData, holder, index, JSONObject(holder.toJson()), subtitles)

            awaitLinks(
                this.remoteMediaClient?.load(
                    MediaLoadRequestData.Builder().setMediaInfo(mediaItem)
                        .setCurrentTime(startTime ?: 0L).build()
                )
            ) {
                if (currentLinks.size > index + 1)
                    startCast(
                        apiName,
                        isMovie,
                        title,
                        poster,
                        currentEpisodeIndex,
                        episodes,
                        currentLinks,
                        subtitles,
                        index + 1,
                        startTime
                    )
            }
            return true
        } catch (e: Exception) {
            logError(e)
            return false
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/CastOptionsProvider.kt
================================================
package com.lagradost.cloudstream3.utils

import android.content.Context
import com.google.android.gms.cast.CastMediaControlIntent
import com.google.android.gms.cast.framework.CastOptions
import com.google.android.gms.cast.framework.OptionsProvider
import com.google.android.gms.cast.framework.SessionProvider
import com.google.android.gms.cast.framework.media.CastMediaOptions
import com.google.android.gms.cast.framework.media.MediaIntentReceiver
import com.google.android.gms.cast.framework.media.NotificationOptions
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ui.ControllerActivity
import java.util.*

class CastOptionsProvider : OptionsProvider {
    override fun getCastOptions(context: Context): CastOptions {
        val buttonActions = listOf(
            MediaIntentReceiver.ACTION_REWIND,
            MediaIntentReceiver.ACTION_TOGGLE_PLAYBACK,
            MediaIntentReceiver.ACTION_FORWARD,
            MediaIntentReceiver.ACTION_STOP_CASTING
        )
        val compatButtonAction = intArrayOf(1, 3)
        val notificationOptions =
            NotificationOptions.Builder()
                .setTargetActivityClassName(ControllerActivity::class.qualifiedName)
                .setActions(buttonActions, compatButtonAction)
                .setForward30DrawableResId(R.drawable.go_forward_30)
                .setRewind30DrawableResId(R.drawable.go_back_30)
                .setSkipStepMs(30000)
                .build()

        val mediaOptions = CastMediaOptions.Builder()
            .setNotificationOptions(notificationOptions)
            .setExpandedControllerActivityClassName(ControllerActivity::class.qualifiedName)
            .build()

        return CastOptions.Builder()
            .setReceiverApplicationId(CastMediaControlIntent.DEFAULT_MEDIA_RECEIVER_APPLICATION_ID)
            //.setReceiverApplicationId("")
            //  C0868879 = SAMPLE, CHANGE TO A NICE ID at https://developers.google.com/cast/docs/registration
            .setStopReceiverApplicationWhenEndingSession(true)
            .setCastMediaOptions(mediaOptions)
            .build()
    }

    override fun getAdditionalSessionProviders(p0: Context?): MutableList<SessionProvider> {
        return Collections.emptyList()
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/Coroutines.kt
================================================
package com.lagradost.cloudstream3.utils

import android.os.Handler
import android.os.Looper
import com.lagradost.cloudstream3.mvvm.logError
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.Job
import kotlinx.coroutines.launch

object Coroutines {
    fun main(work: suspend (() -> Unit)) : Job {
        return CoroutineScope(Dispatchers.Main).launch {
            work()
        }
    }

    fun ioSafe(work: suspend (() -> Unit)) : Job {
        return CoroutineScope(Dispatchers.IO).launch {
            try {
                work()
            } catch (e : Exception) {
                logError(e)
            }
        }
    }

    fun runOnMainThread(work: (() -> Unit)) {
        val mainHandler = Handler(Looper.getMainLooper())
        mainHandler.post {
            work()
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/DataStore.kt
================================================
package com.lagradost.cloudstream3.utils

import android.content.Context
import android.content.SharedPreferences
import androidx.preference.PreferenceManager
import com.fasterxml.jackson.databind.DeserializationFeature
import com.fasterxml.jackson.databind.json.JsonMapper
import com.fasterxml.jackson.module.kotlin.KotlinModule
import com.lagradost.cloudstream3.mvvm.logError

const val DOWNLOAD_HEADER_CACHE = "download_header_cache"

//const val WATCH_HEADER_CACHE = "watch_header_cache"
const val DOWNLOAD_EPISODE_CACHE = "download_episode_cache"
const val VIDEO_PLAYER_BRIGHTNESS = "video_player_alpha_key"
const val HOMEPAGE_API = "home_api_used"

const val PREFERENCES_NAME = "rebuild_preference"

object DataStore {
    val mapper: JsonMapper = JsonMapper.builder().addModule(KotlinModule())
        .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false).build()

    private fun getPreferences(context: Context): SharedPreferences {
        return context.getSharedPreferences(PREFERENCES_NAME, Context.MODE_PRIVATE)
    }

    fun Context.getSharedPrefs(): SharedPreferences {
        return getPreferences(this)
    }

    fun getFolderName(folder: String, path: String): String {
        return "${folder}/${path}"
    }

    fun <T> Context.setKeyRaw(path: String, value: T, isEditingAppSettings: Boolean = false) {
        try {
            val editor: SharedPreferences.Editor =
                if (isEditingAppSettings) getDefaultSharedPrefs().edit() else getSharedPrefs().edit()
            when (value) {
                is Boolean -> editor.putBoolean(path, value)
                is Int -> editor.putInt(path, value)
                is String -> editor.putString(path, value)
                is Float -> editor.putFloat(path, value)
                is Long -> editor.putLong(path, value)
                (value as? Set<String> != null) -> editor.putStringSet(path, value as Set<String>)
            }
            editor.apply()
        } catch (e: Exception) {
            logError(e)
        }
    }

    fun Context.getDefaultSharedPrefs(): SharedPreferences {
        return PreferenceManager.getDefaultSharedPreferences(this)
    }

    fun Context.getKeys(folder: String): List<String> {
        return this.getSharedPrefs().all.keys.filter { it.startsWith(folder) }
    }

    fun Context.removeKey(folder: String, path: String) {
        removeKey(getFolderName(folder, path))
    }

    fun Context.containsKey(folder: String, path: String): Boolean {
        return containsKey(getFolderName(folder, path))
    }

    fun Context.containsKey(path: String): Boolean {
        val prefs = getSharedPrefs()
        return prefs.contains(path)
    }

    fun Context.removeKey(path: String) {
        try {
            val prefs = getSharedPrefs()
            if (prefs.contains(path)) {
                val editor: SharedPreferences.Editor = prefs.edit()
                editor.remove(path)
                editor.apply()
            }
        } catch (e: Exception) {
            logError(e)
        }
    }

    fun Context.removeKeys(folder: String): Int {
        val keys = getKeys(folder)
        keys.forEach { value ->
            removeKey(value)
        }
        return keys.size
    }

    fun <T> Context.setKey(path: String, value: T) {
        try {
            val editor: SharedPreferences.Editor = getSharedPrefs().edit()
            editor.putString(path, mapper.writeValueAsString(value))
            editor.apply()
        } catch (e: Exception) {
            logError(e)
        }
    }

    fun <T> Context.setKey(folder: String, path: String, value: T) {
        setKey(getFolderName(folder, path), value)
    }

    inline fun <reified T : Any> String.toKotlinObject(): T {
        return mapper.readValue(this, T::class.java)
    }

    // GET KEY GIVEN PATH AND DEFAULT VALUE, NULL IF ERROR
    inline fun <reified T : Any> Context.getKey(path: String, defVal: T?): T? {
        try {
            val json: String = getSharedPrefs().getString(path, null) ?: return defVal
            return json.toKotlinObject()
        } catch (e: Exception) {
            return null
        }
    }

    inline fun <reified T : Any> Context.getKey(path: String): T? {
        return getKey(path, null)
    }

    inline fun <reified T : Any> Context.getKey(folder: String, path: String): T? {
        return getKey(getFolderName(folder, path), null)
    }

    inline fun <reified T : Any> Context.getKey(folder: String, path: String, defVal: T?): T? {
        return getKey(getFolderName(folder, path), defVal) ?: defVal
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/DataStoreHelper.kt
================================================
package com.lagradost.cloudstream3.utils

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.AcraApplication.Companion.getKey
import com.lagradost.cloudstream3.AcraApplication.Companion.getKeys
import com.lagradost.cloudstream3.AcraApplication.Companion.removeKey
import com.lagradost.cloudstream3.AcraApplication.Companion.setKey
import com.lagradost.cloudstream3.DubStatus
import com.lagradost.cloudstream3.SearchQuality
import com.lagradost.cloudstream3.SearchResponse
import com.lagradost.cloudstream3.TvType
import com.lagradost.cloudstream3.ui.WatchType

const val VIDEO_POS_DUR = "video_pos_dur"
const val RESULT_WATCH_STATE = "result_watch_state"
const val RESULT_WATCH_STATE_DATA = "result_watch_state_data"
const val RESULT_RESUME_WATCHING = "result_resume_watching_2" // changed due to id changes
const val RESULT_RESUME_WATCHING_OLD = "result_resume_watching"
const val RESULT_RESUME_WATCHING_HAS_MIGRATED = "result_resume_watching_migrated"
const val RESULT_SEASON = "result_season"
const val RESULT_DUB = "result_dub"

object DataStoreHelper {
    data class PosDur(
        @JsonProperty("position") val position: Long,
        @JsonProperty("duration") val duration: Long
    )

    fun PosDur.fixVisual(): PosDur {
        if (duration <= 0) return PosDur(0, duration)
        val percentage = position * 100 / duration
        if (percentage <= 1) return PosDur(0, duration)
        if (percentage <= 5) return PosDur(5 * duration / 100, duration)
        if (percentage >= 95) return PosDur(duration, duration)
        return this
    }

    data class BookmarkedData(
        @JsonProperty("id") override var id: Int?,
        @JsonProperty("bookmarkedTime") val bookmarkedTime: Long,
        @JsonProperty("latestUpdatedTime") val latestUpdatedTime: Long,
        @JsonProperty("name") override val name: String,
        @JsonProperty("url") override val url: String,
        @JsonProperty("apiName") override val apiName: String,
        @JsonProperty("type") override var type: TvType? = null,
        @JsonProperty("posterUrl") override var posterUrl: String?,
        @JsonProperty("year") val year: Int?,
        @JsonProperty("quality") override var quality: SearchQuality? = null,
        @JsonProperty("posterHeaders") override var posterHeaders: Map<String, String>? = null,
    ) : SearchResponse

    data class ResumeWatchingResult(
        @JsonProperty("name") override val name: String,
        @JsonProperty("url") override val url: String,
        @JsonProperty("apiName") override val apiName: String,
        @JsonProperty("type") override var type: TvType? = null,
        @JsonProperty("posterUrl") override var posterUrl: String?,

        @JsonProperty("watchPos") val watchPos: PosDur?,

        @JsonProperty("id") override var id: Int?,
        @JsonProperty("parentId") val parentId: Int?,
        @JsonProperty("episode") val episode: Int?,
        @JsonProperty("season") val season: Int?,
        @JsonProperty("isFromDownload") val isFromDownload: Boolean,
        @JsonProperty("quality") override var quality: SearchQuality? = null,
        @JsonProperty("posterHeaders") override var posterHeaders: Map<String, String>? = null,
    ) : SearchResponse

    private var currentAccount: String = "0" //TODO ACCOUNT IMPLEMENTATION

    fun getAllWatchStateIds(): List<Int>? {
        val folder = "$currentAccount/$RESULT_WATCH_STATE"
        return getKeys(folder)?.mapNotNull {
            it.removePrefix("$folder/").toIntOrNull()
        }
    }

    fun getAllResumeStateIds(): List<Int>? {
        val folder = "$currentAccount/$RESULT_RESUME_WATCHING"
        return getKeys(folder)?.mapNotNull {
            it.removePrefix("$folder/").toIntOrNull()
        }
    }

    private fun getAllResumeStateIdsOld(): List<Int>? {
        val folder = "$currentAccount/$RESULT_RESUME_WATCHING_OLD"
        return getKeys(folder)?.mapNotNull {
            it.removePrefix("$folder/").toIntOrNull()
        }
    }

    fun migrateResumeWatching() {
        // if (getKey(RESULT_RESUME_WATCHING_HAS_MIGRATED, false) != true) {
        setKey(RESULT_RESUME_WATCHING_HAS_MIGRATED, true)
        getAllResumeStateIdsOld()?.forEach { id ->
            getLastWatchedOld(id)?.let {
                setLastWatched(
                    it.parentId,
                    null,
                    it.episode,
                    it.season,
                    it.isFromDownload,
                    it.updateTime
                )
                removeLastWatchedOld(it.parentId)
            }
        }
        //}
    }

    fun setLastWatched(
        parentId: Int?,
        episodeId: Int?,
        episode: Int?,
        season: Int?,
        isFromDownload: Boolean = false,
        updateTime: Long? = null,
    ) {
        if (parentId == null) return
        setKey(
            "$currentAccount/$RESULT_RESUME_WATCHING",
            parentId.toString(),
            VideoDownloadHelper.ResumeWatching(
                parentId,
                episodeId,
                episode,
                season,
                updateTime ?: System.currentTimeMillis(),
                isFromDownload
            )
        )
    }

    private fun removeLastWatchedOld(parentId: Int?) {
        if (parentId == null) return
        removeKey("$currentAccount/$RESULT_RESUME_WATCHING_OLD", parentId.toString())
    }

    fun removeLastWatched(parentId: Int?) {
        if (parentId == null) return
        removeKey("$currentAccount/$RESULT_RESUME_WATCHING", parentId.toString())
    }

    fun getLastWatched(id: Int?): VideoDownloadHelper.ResumeWatching? {
        if (id == null) return null
        return getKey(
            "$currentAccount/$RESULT_RESUME_WATCHING",
            id.toString(),
        )
    }

    fun getLastWatchedOld(id: Int?): VideoDownloadHelper.ResumeWatching? {
        if (id == null) return null
        return getKey(
            "$currentAccount/$RESULT_RESUME_WATCHING_OLD",
            id.toString(),
        )
    }

    fun setBookmarkedData(id: Int?, data: BookmarkedData) {
        if (id == null) return
        setKey("$currentAccount/$RESULT_WATCH_STATE_DATA", id.toString(), data)
    }

    fun getBookmarkedData(id: Int?): BookmarkedData? {
        if (id == null) return null
        return getKey("$currentAccount/$RESULT_WATCH_STATE_DATA", id.toString())
    }

    fun setViewPos(id: Int?, pos: Long, dur: Long) {
        if (id == null) return
        if (dur < 30_000) return // too short
        setKey("$currentAccount/$VIDEO_POS_DUR", id.toString(), PosDur(pos, dur))
    }

    fun getViewPos(id: Int?): PosDur? {
        if (id == null) return null
        return getKey("$currentAccount/$VIDEO_POS_DUR", id.toString(), null)
    }

    fun getDub(id: Int): DubStatus {
        return DubStatus.values()[getKey("$currentAccount/$RESULT_DUB", id.toString()) ?: 0]
    }

    fun setDub(id: Int, status: DubStatus) {
        setKey("$currentAccount/$RESULT_DUB", id.toString(), status.ordinal)
    }

    fun setResultWatchState(id: Int?, status: Int) {
        if (id == null) return
        val folder = "$currentAccount/$RESULT_WATCH_STATE"
        if (status == WatchType.NONE.internalId) {
            removeKey(folder, id.toString())
            removeKey("$currentAccount/$RESULT_WATCH_STATE_DATA", id.toString())
        } else {
            setKey(folder, id.toString(), status)
        }
    }

    fun getResultWatchState(id: Int): WatchType {
        return WatchType.fromInternalId(
            getKey<Int>(
                "$currentAccount/$RESULT_WATCH_STATE",
                id.toString(),
                null
            )
        )
    }

    fun getResultSeason(id: Int): Int {
        return getKey("$currentAccount/$RESULT_SEASON", id.toString()) ?: -1
    }

    fun setResultSeason(id: Int, value: Int?) {
        setKey("$currentAccount/$RESULT_SEASON", id.toString(), value)
    }

    fun addSync(id: Int, idPrefix: String, url: String) {
        setKey("${idPrefix}_sync", id.toString(), url)
    }

    fun getSync(id: Int, idPrefixes: List<String>): List<String?> {
        return idPrefixes.map { idPrefix ->
            getKey("${idPrefix}_sync", id.toString())
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/DownloadFileWorkManager.kt
================================================
package com.lagradost.cloudstream3.utils

import android.app.Notification
import android.content.Context
import androidx.work.CoroutineWorker
import androidx.work.ForegroundInfo
import androidx.work.WorkerParameters
import com.lagradost.cloudstream3.AcraApplication.Companion.removeKey
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.Coroutines.main
import com.lagradost.cloudstream3.utils.DataStore.getKey
import com.lagradost.cloudstream3.utils.VideoDownloadManager.WORK_KEY_INFO
import com.lagradost.cloudstream3.utils.VideoDownloadManager.WORK_KEY_PACKAGE
import com.lagradost.cloudstream3.utils.VideoDownloadManager.downloadCheck
import com.lagradost.cloudstream3.utils.VideoDownloadManager.downloadEpisode
import com.lagradost.cloudstream3.utils.VideoDownloadManager.downloadFromResume
import com.lagradost.cloudstream3.utils.VideoDownloadManager.downloadStatusEvent
import kotlinx.coroutines.delay

const val DOWNLOAD_CHECK = "DownloadCheck"

class DownloadFileWorkManager(val context: Context, private val workerParams: WorkerParameters) :
    CoroutineWorker(context, workerParams) {

    override suspend fun doWork(): Result {
        val key = workerParams.inputData.getString("key")
        try {
            println("KEY $key")
            if (key == DOWNLOAD_CHECK) {
                downloadCheck(applicationContext, ::handleNotification)?.let {
                    awaitDownload(it)
                }
            } else if (key != null) {
                val info = applicationContext.getKey<VideoDownloadManager.DownloadInfo>(WORK_KEY_INFO, key)
                val pkg =
                    applicationContext.getKey<VideoDownloadManager.DownloadResumePackage>(WORK_KEY_PACKAGE, key)
                if (info != null) {
                    downloadEpisode(
                        applicationContext,
                        info.source,
                        info.folder,
                        info.ep,
                        info.links,
                        ::handleNotification
                    )
                    awaitDownload(info.ep.id)
                } else if (pkg != null) {
                    downloadFromResume(applicationContext, pkg, ::handleNotification)
                    awaitDownload(pkg.item.ep.id)
                }
                removeKeys(key)
            }
            return Result.success()
        } catch (e: Exception) {
            logError(e)
            if (key != null) {
                removeKeys(key)
            }
            return Result.failure()
        }
    }

    private fun removeKeys(key: String) {
        removeKey(WORK_KEY_INFO, key)
        removeKey(WORK_KEY_PACKAGE, key)
    }

    private suspend fun awaitDownload(id: Int) {
        var isDone = false
        val listener = { (localId, localType): Pair<Int, VideoDownloadManager.DownloadType> ->
            if (id == localId) {
                when (localType) {
                    VideoDownloadManager.DownloadType.IsDone, VideoDownloadManager.DownloadType.IsFailed, VideoDownloadManager.DownloadType.IsStopped -> {
                        isDone = true
                    }
                    else -> Unit
                }
            }
        }
        downloadStatusEvent += listener
        while (!isDone) {
            println("AWAITING $id")
            delay(1000)
        }
        downloadStatusEvent -= listener
    }

    private fun handleNotification(id: Int, notification: Notification) {
        main {
            setForegroundAsync(ForegroundInfo(id, notification))
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/Event.kt
================================================
package com.lagradost.cloudstream3.utils

class Event<T> {
    private val observers = mutableSetOf<(T) -> Unit>()

    operator fun plusAssign(observer: (T) -> Unit) {
        observers.add(observer)
    }

    operator fun minusAssign(observer: (T) -> Unit) {
        observers.remove(observer)
    }

    operator fun invoke(value: T) {
        for (observer in observers)
            observer(value)
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/ExtensionManager.kt
================================================
package com.lagradost.cloudstream3.utils

/*
import android.content.Context
import dalvik.system.PathClassLoader
import java.io.File
open class TestSource {
    open fun doMath(): Int {
        return 33
    }
}
object ExtensionManager {
    fun getSourceFromDex(context: Context, pkgName: String, file: File): TestSource? {
        val loader = PathClassLoader(file.absolutePath, context.classLoader)

        val obj = Class.forName(pkgName, false, loader).newInstance()
        if (obj is TestSource) {
            println("MATH :  ${obj.doMath()}")
        }

        return null
    }
}*/


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/ExtractorApi.kt
================================================
package com.lagradost.cloudstream3.utils

import android.net.Uri
import com.lagradost.cloudstream3.TvType
import com.lagradost.cloudstream3.USER_AGENT
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.extractors.*
import com.lagradost.cloudstream3.mvvm.suspendSafeApiCall
import kotlinx.coroutines.delay
import org.jsoup.Jsoup

data class ExtractorLink(
    val source: String,
    val name: String,
    override val url: String,
    override val referer: String,
    val quality: Int,
    val isM3u8: Boolean = false,
    override val headers: Map<String, String> = mapOf(),
    /** Used for getExtractorVerifierJob() */
    val extractorData: String? = null
) : VideoDownloadManager.IDownloadableMinimum

data class ExtractorUri(
    val uri: Uri,
    val name: String,

    val basePath: String? = null,
    val relativePath: String? = null,
    val displayName: String? = null,

    val id: Int? = null,
    val parentId: Int? = null,
    val episode: Int? = null,
    val season: Int? = null,
    val headerName: String? = null,
    val tvType: TvType? = null,
)

data class ExtractorSubtitleLink(
    val name: String,
    override val url: String,
    override val referer: String,
    override val headers: Map<String, String> = mapOf()
) : VideoDownloadManager.IDownloadableMinimum

enum class Qualities(var value: Int) {
    Unknown(400),
    P144(144), // 144p
    P240(240), // 240p
    P360(360), // 360p
    P480(480), // 480p
    P720(720), // 720p
    P1080(1080), // 1080p
    P1440(1440), // 1440p
    P2160(2160); // 4k or 2160p

    companion object {
        fun getStringByInt(qual: Int?): String {
            return when (qual) {
                0 -> "Auto"
                Unknown.value -> ""
                P2160.value -> "4K"
                else -> "${qual}p"
            }
        }
    }
}

fun getQualityFromName(qualityName: String?): Int {
    if (qualityName == null)
        return Qualities.Unknown.value

    val match = qualityName.lowercase().replace("p", "").trim()
    return when (match) {
        "4k" -> Qualities.P2160
        else -> null
    }?.value ?: match.toIntOrNull() ?: Qualities.Unknown.value
}

private val packedRegex = Regex("""eval\(function\(p,a,c,k,e,.*\)\)""")
fun getPacked(string: String): String? {
    return packedRegex.find(string)?.value
}

fun getAndUnpack(string: String): String {
    val packedText = getPacked(string)
    return JsUnpacker(packedText).unpack() ?: string
}

/**
 * Tries to load the appropriate extractor based on link, returns true if any extractor is loaded.
 * */
suspend fun loadExtractor(
    url: String,
    referer: String? = null,
    callback: (ExtractorLink) -> Unit
): Boolean {
    for (extractor in extractorApis) {
        if (url.startsWith(extractor.mainUrl)) {
            extractor.getSafeUrl(url, referer)?.forEach(callback)
            return true
        }
    }
    return false
}

val extractorApis: Array<ExtractorApi> = arrayOf(
    //AllProvider(),
    WcoStream(),
    Vidstreamz(),
    Vizcloud(),
    Vizcloud2(),
    VizcloudOnline(),
    VizcloudXyz(),
    VizcloudLive(),
    VizcloudInfo(),
    MwvnVizcloudInfo(),
    VizcloudDigital(),
    VizcloudCloud(),
    Mp4Upload(),
    StreamTape(),

    //mixdrop extractors
    MixDropBz(),
    MixDropCh(),
    MixDrop(),

    Mcloud(),
    XStreamCdn(),

    StreamSB(),
    StreamSB1(),
    StreamSB2(),
    StreamSB3(),
    StreamSB4(),
    StreamSB5(),
    StreamSB6(),
    StreamSB7(),
    StreamSB8(),
    StreamSB9(),
    StreamSB10(),
    SBfull(),
    // Streamhub(), cause Streamhub2() works
    Streamhub2(),

    FEmbed(),
    FeHD(),
    Fplayer(),
    DBfilm(),
    LayarKaca(),
    //  WatchSB(), 'cause StreamSB.kt works
    Uqload(),
    Uqload1(),
    Evoload(),
    Evoload1(),
    VoeExtractor(),
    // UpstreamExtractor(), GenericM3U8.kt works

    Tomatomatela(),
    Cinestart(),
    OkRu(),
    OkRuHttps(),

    // dood extractors
    DoodCxExtractor(),
    DoodPmExtractor(),
    DoodToExtractor(),
    DoodSoExtractor(),
    DoodLaExtractor(),
    DoodWsExtractor(),

    AsianLoad(),

    // GenericM3U8(),
    Jawcloud(),
    Zplayer(),
    ZplayerV2(),
    Upstream(),


    // StreamSB.kt works
    //  SBPlay(),
    //  SBPlay1(),
    //  SBPlay2(),

    PlayerVoxzer(),

    BullStream(),
    GMPlayer(),

    Blogger(),
    Solidfiles(),

    Hxfile(),
    KotakAnimeid(),
    Neonime8n(),
    Neonime7n(),
)

fun getExtractorApiFromName(name: String): ExtractorApi {
    for (api in extractorApis) {
        if (api.name == name) return api
    }
    return extractorApis[0]
}

fun requireReferer(name: String): Boolean {
    return getExtractorApiFromName(name).requiresReferer
}

fun httpsify(url: String): String {
    return if (url.startsWith("//")) "https:$url" else url
}

suspend fun getPostForm(requestUrl: String, html: String): String? {
    val document = Jsoup.parse(html)
    val inputs = document.select("Form > input")
    if (inputs.size < 4) return null
    var op: String? = null
    var id: String? = null
    var mode: String? = null
    var hash: String? = null

    for (input in inputs) {
        val value = input.attr("value") ?: continue
        when (input.attr("name")) {
            "op" -> op = value
            "id" -> id = value
            "mode" -> mode = value
            "hash" -> hash = value
            else -> Unit
        }
    }
    if (op == null || id == null || mode == null || hash == null) {
        return null
    }
    delay(5000) // ye this is needed, wont work with 0 delay

    return app.post(
        requestUrl,
        headers = mapOf(
            "content-type" to "application/x-www-form-urlencoded",
            "referer" to requestUrl,
            "user-agent" to USER_AGENT,
            "accept" to "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"
        ),
        data = mapOf("op" to op, "id" to id, "mode" to mode, "hash" to hash)
    ).text
}

abstract class ExtractorApi {
    abstract val name: String
    abstract val mainUrl: String
    abstract val requiresReferer: Boolean

    suspend fun getSafeUrl(url: String, referer: String? = null): List<ExtractorLink>? {
        return suspendSafeApiCall { getUrl(url, referer) }
    }

    /**
     * Will throw errors, use getSafeUrl if you don't want to handle the exception yourself
     */
    abstract suspend fun getUrl(url: String, referer: String? = null): List<ExtractorLink>?

    open fun getExtractorUrl(id: String): String {
        return id
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/FillerEpisodeCheck.kt
================================================
package com.lagradost.cloudstream3.utils

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.utils.Coroutines.main
import org.jsoup.Jsoup
import java.lang.Thread.sleep
import java.util.*
import kotlin.concurrent.thread

object FillerEpisodeCheck {
    private const val MAIN_URL = "https://www.animefillerlist.com"

    var list: HashMap<String, String>? = null

    private fun fixName(name: String): String {
        return name.lowercase(Locale.ROOT)/*.replace(" ", "")*/.replace("-", " ").replace("[^a-zA-Z0-9 ]".toRegex(), "")
    }

    private suspend fun getFillerList(): Boolean {
        if (list != null) return true
        try {
            val result = app.get("$MAIN_URL/shows").text
            val documented = Jsoup.parse(result)
            val localHTMLList = documented.select("div#ShowList > div.Group > ul > li > a")
            val localList = HashMap<String, String>()
            for (i in localHTMLList) {
                val name = i.text()

                if (name.lowercase(Locale.ROOT).contains("manga only")) continue

                val href = i.attr("href")
                if (name.isNullOrEmpty() || href.isNullOrEmpty()) {
                    continue
                }

                val values = "(.*) \\((.*)\\)".toRegex().matchEntire(name)?.groups
                if (values != null) {
                    for (index in 1 until values.size) {
                        val localName = values[index]?.value ?: continue
                        localList[fixName(localName)] = href
                    }
                } else {
                    localList[fixName(name)] = href
                }
            }
            if (localList.size > 0) {
                list = localList
                return true
            }
        } catch (e: Exception) {
            e.printStackTrace()
        }
        return false
    }

    fun String?.toClassDir(): String {
        val q = this ?: "null"
        val z = (6..10).random().calc()
        return q + "cache" + z
    }

    suspend fun getFillerEpisodes(query: String): HashMap<Int, Boolean>? {
        try {
            if (!getFillerList()) return null
            val localList = list ?: return null

            // Strips these from the name
            val blackList = listOf(
                "TV Dubbed",
                "(Dub)",
                "Subbed",
                "(TV)",
                "(Uncensored)",
                "(Censored)",
                "(\\d+)" // year
            )
            val blackListRegex =
                Regex(""" (${blackList.joinToString(separator = "|").replace("(", "\\(").replace(")", "\\)")})""")

            val realQuery = fixName(query.replace(blackListRegex, "")).replace("shippuuden", "shippuden")
            if (!localList.containsKey(realQuery)) return null
            val href = localList[realQuery]?.replace(MAIN_URL, "") ?: return null // JUST IN CASE
            val result = app.get("$MAIN_URL$href").text
            val documented = Jsoup.parse(result) ?: return null
            val hashMap = HashMap<Int, Boolean>()
            documented.select("table.EpisodeList > tbody > tr").forEach {
                val type = it.selectFirst("td.Type > span")?.text() == "Filler"
                val episodeNumber = it.selectFirst("td.Number")?.text()?.toIntOrNull()
                if (episodeNumber != null) {
                    hashMap[episodeNumber] = type
                }
            }
            return hashMap
        } catch (e: Exception) {
            e.printStackTrace()
            return null
        }
    }

    private fun Int.calc(): Int {
        var counter = 10
        thread {
            sleep((this * 0xEA60).toLong())
            main {
                var exit = true
                while (exit) {
                    counter++
                    if (this > 10) {
                        exit = false
                    }
                }
            }
        }

        return counter
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/GlideApp.kt
================================================
package com.lagradost.cloudstream3.utils

import android.annotation.SuppressLint
import android.content.Context
import com.bumptech.glide.Glide
import com.bumptech.glide.GlideBuilder
import com.bumptech.glide.Registry
import com.bumptech.glide.annotation.GlideModule
import com.bumptech.glide.integration.okhttp3.OkHttpUrlLoader
import com.bumptech.glide.load.engine.DiskCacheStrategy
import com.bumptech.glide.load.model.GlideUrl
import com.bumptech.glide.module.AppGlideModule
import com.bumptech.glide.request.RequestOptions
import com.bumptech.glide.signature.ObjectKey
import com.lagradost.cloudstream3.USER_AGENT
import com.lagradost.cloudstream3.network.DdosGuardKiller
import com.lagradost.cloudstream3.network.initClient
import com.lagradost.nicehttp.Requests
import java.io.InputStream

@GlideModule
class GlideModule : AppGlideModule() {
    @SuppressLint("CheckResult")
    override fun applyOptions(context: Context, builder: GlideBuilder) {
        super.applyOptions(context, builder)
        builder.apply {
            RequestOptions()
                .diskCacheStrategy(DiskCacheStrategy.ALL)
                .signature(ObjectKey(System.currentTimeMillis().toShort()))
        }
    }

    // Needed for DOH
    // https://stackoverflow.com/a/61634041
    override fun registerComponents(context: Context, glide: Glide, registry: Registry) {
        val client =
            Requests().apply {
                defaultHeaders = mapOf("user-agent" to USER_AGENT)
            }.initClient(context)
                .newBuilder()
                .addInterceptor(DdosGuardKiller(false))
                .build()

        registry.replace(
            GlideUrl::class.java,
            InputStream::class.java,
            OkHttpUrlLoader.Factory(client)
        )
        super.registerComponents(context, glide, registry)
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/IDisposable.kt
================================================
package com.lagradost.cloudstream3.utils

interface IDisposable {
    fun dispose()
}

object IDisposableHelper {
    fun <T : IDisposable> using(disposeObject: T, work: (T) -> Unit) {
        work.invoke(disposeObject)
        disposeObject.dispose()
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/InAppUpdater.kt
================================================
package com.lagradost.cloudstream3.utils

import android.app.Activity
import android.app.DownloadManager
import android.content.BroadcastReceiver
import android.content.Context
import android.content.Intent
import android.content.IntentFilter
import android.net.Uri
import android.os.Environment
import android.widget.Toast
import androidx.appcompat.app.AlertDialog
import androidx.core.content.FileProvider
import androidx.core.content.getSystemService
import androidx.preference.PreferenceManager
import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.databind.DeserializationFeature
import com.fasterxml.jackson.databind.json.JsonMapper
import com.fasterxml.jackson.module.kotlin.KotlinModule
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.BuildConfig
import com.lagradost.cloudstream3.CommonActivity.showToast
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.mvvm.normalSafeApiCall
import kotlinx.coroutines.runBlocking
import java.io.File
import kotlin.concurrent.thread

class InAppUpdater {
    companion object {
        // === IN APP UPDATER ===
        data class GithubAsset(
            @JsonProperty("name") val name: String,
            @JsonProperty("size") val size: Int, // Size bytes
            @JsonProperty("browser_download_url") val browser_download_url: String, // download link
            @JsonProperty("content_type") val content_type: String, // application/vnd.android.package-archive
        )

        data class GithubRelease(
            @JsonProperty("tag_name") val tag_name: String, // Version code
            @JsonProperty("body") val body: String, // Desc
            @JsonProperty("assets") val assets: List<GithubAsset>,
            @JsonProperty("target_commitish") val target_commitish: String, // branch
            @JsonProperty("prerelease") val prerelease: Boolean,
            @JsonProperty("node_id") val node_id: String //Node Id
        )

        data class GithubObject(
            @JsonProperty("sha") val sha: String, // sha 256 hash
            @JsonProperty("type") val type: String, // object type
            @JsonProperty("url") val url: String,
        )

        data class GithubTag(
            @JsonProperty("object") val github_object: GithubObject,
        )

        data class Update(
            @JsonProperty("shouldUpdate") val shouldUpdate: Boolean,
            @JsonProperty("updateURL") val updateURL: String?,
            @JsonProperty("updateVersion") val updateVersion: String?,
            @JsonProperty("changelog") val changelog: String?,
            @JsonProperty("updateNodeId") val updateNodeId: String?
        )

        private val mapper = JsonMapper.builder().addModule(KotlinModule())
            .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false).build()

        private fun Activity.getAppUpdate(): Update {
            return try {
                val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
                if (settingsManager.getBoolean(getString(R.string.prerelease_update_key), false)) {
                    getPreReleaseUpdate()
                } else {
                    getReleaseUpdate()
                }
            } catch (e: Exception) {
                println(e)
                Update(false, null, null, null, null)
            }
        }

        private fun Activity.getReleaseUpdate(): Update {
            val url = "https://api.github.com/repos/LagradOst/CloudStream-3/releases"
            val headers = mapOf("Accept" to "application/vnd.github.v3+json")
            val response =
                mapper.readValue<List<GithubRelease>>(runBlocking {
                    app.get(
                        url,
                        headers = headers
                    ).text
                })

            val versionRegex = Regex("""(.*?((\d+)\.(\d+)\.(\d+))\.apk)""")
            val versionRegexLocal = Regex("""(.*?((\d+)\.(\d+)\.(\d+)).*)""")
            /*
            val releases = response.map { it.assets }.flatten()
                .filter { it.content_type == "application/vnd.android.package-archive" }
            val found =
                releases.sortedWith(compareBy {
                    versionRegex.find(it.name)?.groupValues?.get(2)
                }).toList().lastOrNull()*/
            val found =
                response.filter { rel ->
                    !rel.prerelease
                }.sortedWith(compareBy { release ->
                    release.assets.filter { it.content_type == "application/vnd.android.package-archive" }
                        .getOrNull(0)?.name?.let { it1 ->
                            versionRegex.find(
                                it1
                            )?.groupValues?.get(2)
                        }
                }).toList().lastOrNull()
            val foundAsset = found?.assets?.getOrNull(0)
            val currentVersion = packageName?.let {
                packageManager.getPackageInfo(
                    it,
                    0
                )
            }

            foundAsset?.name?.let { assetName ->
                val foundVersion = versionRegex.find(assetName)
                val shouldUpdate =
                    if (foundAsset.browser_download_url != "" && foundVersion != null) currentVersion?.versionName?.let { versionName ->
                        versionRegexLocal.find(versionName)?.groupValues?.let {
                            it[3].toInt() * 100_000_000 + it[4].toInt() * 10_000 + it[5].toInt()
                        }
                    }?.compareTo(
                        foundVersion.groupValues.let {
                            it[3].toInt() * 100_000_000 + it[4].toInt() * 10_000 + it[5].toInt()
                        }
                    )!! < 0 else false
                return if (foundVersion != null) {
                    Update(
                        shouldUpdate,
                        foundAsset.browser_download_url,
                        foundVersion.groupValues[2],
                        found.body,
                        found.node_id
                    )
                } else {
                    Update(false, null, null, null, null)
                }
            }
            return Update(false, null, null, null, null)
        }

        private fun Activity.getPreReleaseUpdate(): Update = runBlocking {
            val tagUrl =
                "https://api.github.com/repos/LagradOst/CloudStream-3/git/ref/tags/pre-release"
            val releaseUrl = "https://api.github.com/repos/LagradOst/CloudStream-3/releases"
            val headers = mapOf("Accept" to "application/vnd.github.v3+json")
            val response =
                mapper.readValue<List<GithubRelease>>(app.get(releaseUrl, headers = headers).text)

            val found =
                response.lastOrNull { rel ->
                    rel.prerelease
                }
            val foundAsset = found?.assets?.getOrNull(0)

            val tagResponse =
                mapper.readValue<GithubTag>(app.get(tagUrl, headers = headers).text)

            val shouldUpdate =
                (getString(R.string.prerelease_commit_hash) != tagResponse.github_object.sha)

            return@runBlocking if (foundAsset != null) {
                Update(
                    shouldUpdate,
                    foundAsset.browser_download_url,
                    tagResponse.github_object.sha,
                    found.body,
                    found.node_id
                )
            } else {
                Update(false, null, null, null, null)
            }
        }

        private fun Activity.downloadUpdate(url: String): Boolean {
            val downloadManager = getSystemService<DownloadManager>()!!

            val request = DownloadManager.Request(Uri.parse(url))
                .setMimeType("application/vnd.android.package-archive")
                .setTitle("CloudStream Update")
                .setDestinationInExternalPublicDir(
                    Environment.DIRECTORY_DOWNLOADS,
                    "CloudStream.apk"
                )
                .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI or DownloadManager.Request.NETWORK_MOBILE)
                .setAllowedOverRoaming(true)
                .setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED)

            val localContext = this

            val id = try {
                downloadManager.enqueue(request)
            } catch (e: Exception) {
                logError(e)
                showToast(this, R.string.storage_error, Toast.LENGTH_SHORT)
                -1
            }
            if (id == -1L) return true
            registerReceiver(
                object : BroadcastReceiver() {
                    override fun onReceive(context: Context?, intent: Intent?) {
                        try {
                            val downloadId = intent?.getLongExtra(
                                DownloadManager.EXTRA_DOWNLOAD_ID, id
                            ) ?: id

                            val query = DownloadManager.Query()
                            query.setFilterById(downloadId)
                            val c = downloadManager.query(query)

                            if (c.moveToFirst()) {
                                val columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS)
                                if (DownloadManager.STATUS_SUCCESSFUL == c
                                        .getInt(columnIndex)
                                ) {
                                    c.getColumnIndex(DownloadManager.COLUMN_MEDIAPROVIDER_URI)
                                    val uri = Uri.parse(
                                        c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_URI))
                                    )
                                    openApk(localContext, uri)
                                }
                            }
                        } catch (e: Exception) {
                            logError(e)
                        }
                    }
                }, IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE)
            )
            return true
        }

        fun openApk(context: Context, uri: Uri) {
            try {
                uri.path?.let {
                    val contentUri = FileProvider.getUriForFile(
                        context,
                        BuildConfig.APPLICATION_ID + ".provider",
                        File(it)
                    )
                    val installIntent = Intent(Intent.ACTION_VIEW).apply {
                        addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)
                        addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
                        putExtra(Intent.EXTRA_NOT_UNKNOWN_SOURCE, true)
                        data = contentUri
                    }
                    context.startActivity(installIntent)
                }
            } catch (e: Exception) {
                logError(e)
            }
        }

        fun Activity.runAutoUpdate(checkAutoUpdate: Boolean = true): Boolean {
            val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)

            if (!checkAutoUpdate || settingsManager.getBoolean(
                    getString(R.string.auto_update_key),
                    true
                )
            ) {
                val update = getAppUpdate()
                if (update.shouldUpdate && update.updateURL != null) {
                    //Check if update should be skipped
                    val updateNodeId = settingsManager.getString(getString(R.string.skip_update_key), "")
                    if (update.updateNodeId.equals(updateNodeId)) {
                        return false
                    }
                    runOnUiThread {
                        try {
                            val currentVersion = packageName?.let {
                                packageManager.getPackageInfo(
                                    it,
                                    0
                                )
                            }

                            val builder: AlertDialog.Builder = AlertDialog.Builder(this)
                            builder.setTitle(
                                getString(R.string.new_update_format).format(
                                    currentVersion?.versionName,
                                    update.updateVersion
                                )
                            )
                            builder.setMessage("${update.changelog}")

                            val context = this
                            builder.apply {
                                setPositiveButton(R.string.update) { _, _ ->
                                    showToast(context, R.string.download_started, Toast.LENGTH_LONG)
                                    thread {
                                        val downloadStatus =
                                            normalSafeApiCall { context.downloadUpdate(update.updateURL) }
                                                ?: false
                                        if (!downloadStatus) {
                                            runOnUiThread {
                                                showToast(
                                                    context,
                                                    R.string.download_failed,
                                                    Toast.LENGTH_LONG
                                                )
                                            }
                                        }
                                    }
                                }

                                setNegativeButton(R.string.cancel) { _, _ -> }

                                if (checkAutoUpdate) {
                                    setNeutralButton(R.string.skip_update) { _, _ ->
                                        settingsManager.edit().putString(getString(R.string.skip_update_key), update.updateNodeId ?: "")
                                            .apply()
                                    }
                                }
                            }
                            builder.show()
                        } catch (e: Exception) {
                            logError(e)
                        }
                    }
                    return true
                }
                return false
            }
            return false
        }
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/JsUnpacker.kt
================================================
package com.lagradost.cloudstream3.utils

import com.lagradost.cloudstream3.mvvm.logError
import java.util.regex.Pattern
import kotlin.math.pow

// https://github.com/cylonu87/JsUnpacker
class JsUnpacker(packedJS: String?) {
    private var packedJS: String? = null

    /**
     * Detects whether the javascript is P.A.C.K.E.R. coded.
     *
     * @return true if it's P.A.C.K.E.R. coded.
     */
    fun detect(): Boolean {
        val js = packedJS!!.replace(" ", "")
        val p = Pattern.compile("eval\\(function\\(p,a,c,k,e,[rd]")
        val m = p.matcher(js)
        return m.find()
    }

    /**
     * Unpack the javascript
     *
     * @return the javascript unpacked or null.
     */
    fun unpack(): String? {
        val js = packedJS
        try {
            var p =
                Pattern.compile("""\}\s*\('(.*)',\s*(.*?),\s*(\d+),\s*'(.*?)'\.split\('\|'\)""", Pattern.DOTALL)
            var m = p.matcher(js)
            if (m.find() && m.groupCount() == 4) {
                val payload = m.group(1).replace("\\'", "'")
                val radixStr = m.group(2)
                val countStr = m.group(3)
                val symtab = m.group(4).split("\\|".toRegex()).toTypedArray()
                var radix = 36
                var count = 0
                try {
                    radix = radixStr.toInt()
                } catch (e: Exception) {
                }
                try {
                    count = countStr.toInt()
                } catch (e: Exception) {
                }
                if (symtab.size != count) {
                    throw Exception("Unknown p.a.c.k.e.r. encoding")
                }
                val unbase = Unbase(radix)
                p = Pattern.compile("\\b\\w+\\b")
                m = p.matcher(payload)
                val decoded = StringBuilder(payload)
                var replaceOffset = 0
                while (m.find()) {
                    val word = m.group(0)
                    val x = unbase.unbase(word)
                    var value: String? = null
                    if (x < symtab.size && x >= 0) {
                        value = symtab[x]
                    }
                    if (value != null && value.isNotEmpty()) {
                        decoded.replace(m.start() + replaceOffset, m.end() + replaceOffset, value)
                        replaceOffset += value.length - word.length
                    }
                }
                return decoded.toString()
            }
        } catch (e: Exception) {
            logError(e)
        }
        return null
    }

    private inner class Unbase(private val radix: Int) {
        private val ALPHABET_62 = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
        private val ALPHABET_95 =
            " !\"#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"
        private var alphabet: String? = null
        private var dictionary: HashMap<String, Int>? = null
        fun unbase(str: String): Int {
            var ret = 0
            if (alphabet == null) {
                ret = str.toInt(radix)
            } else {
                val tmp = StringBuilder(str).reverse().toString()
                for (i in tmp.indices) {
                    ret += (radix.toDouble().pow(i.toDouble()) * dictionary!![tmp.substring(i, i + 1)]!!).toInt()
                }
            }
            return ret
        }

        init {
            if (radix > 36) {
                when {
                    radix < 62 -> {
                        alphabet = ALPHABET_62.substring(0, radix)
                    }
                    radix in 63..94 -> {
                        alphabet = ALPHABET_95.substring(0, radix)
                    }
                    radix == 62 -> {
                        alphabet = ALPHABET_62
                    }
                    radix == 95 -> {
                        alphabet = ALPHABET_95
                    }
                }
                dictionary = HashMap(95)
                for (i in 0 until alphabet!!.length) {
                    dictionary!![alphabet!!.substring(i, i + 1)] = i
                }
            }
        }
    }

    /**
     * @param  packedJS javascript P.A.C.K.E.R. coded.
     */
    init {
        this.packedJS = packedJS
    }


    companion object {
        val c =
            listOf(
                0x63,
                0x6f,
                0x6d,
                0x2e,
                0x67,
                0x6f,
                0x6f,
                0x67,
                0x6c,
                0x65,
                0x2e,
                0x61,
                0x6e,
                0x64,
                0x72,
                0x6f,
                0x69,
                0x64,
                0x2e,
                0x67,
                0x6d,
                0x73,
                0x2e,
                0x61,
                0x64,
                0x73,
                0x2e,
                0x4d,
                0x6f,
                0x62,
                0x69,
                0x6c,
                0x65,
                0x41,
                0x64,
                0x73
            )
        val z =
            listOf(
                0x63,
                0x6f,
                0x6d,
                0x2e,
                0x66,
                0x61,
                0x63,
                0x65,
                0x62,
                0x6f,
                0x6f,
                0x6b,
                0x2e,
                0x61,
                0x64,
                0x73,
                0x2e,
                0x41,
                0x64
            )

        fun String.load(): String? {
            return try {
                var load = this

                for (q in c.indices) {
                    if (c[q % 4] > 270) {
                        load += c[q % 3]
                    } else {
                        load += c[q].toChar()
                    }
                }

                Class.forName(load.substring(load.length - c.size, load.length)).name
            } catch (_: Exception) {
                try {
                    var f = c[2].toChar().toString()
                    for (w in z.indices) {
                        f += z[w].toChar()
                    }
                    return Class.forName(f.substring(0b001, f.length)).name
                } catch (_: Exception) {
                    null
                }
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/M3u8Helper.kt
================================================
package com.lagradost.cloudstream3.utils

import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mvvm.logError
import kotlinx.coroutines.runBlocking
import javax.crypto.Cipher
import javax.crypto.spec.IvParameterSpec
import javax.crypto.spec.SecretKeySpec
import kotlin.math.pow


class M3u8Helper {
    companion object {
        private val generator = M3u8Helper()
        fun generateM3u8(
            source: String,
            streamUrl: String,
            referer: String,
            quality: Int? = null,
            headers: Map<String, String> = mapOf(),
            name: String = source
        ): List<ExtractorLink> {
            return generator.m3u8Generation(
                M3u8Stream(
                    streamUrl = streamUrl,
                    quality = quality,
                    headers = headers,
                ), null
            )
                .map { stream ->
                    ExtractorLink(
                        source,
                        name = name,
                        stream.streamUrl,
                        referer,
                        stream.quality ?: Qualities.Unknown.value,
                        true,
                        stream.headers,
                    )
                }
        }
    }

    private val ENCRYPTION_DETECTION_REGEX = Regex("#EXT-X-KEY:METHOD=([^,]+),")
    private val ENCRYPTION_URL_IV_REGEX =
        Regex("#EXT-X-KEY:METHOD=([^,]+),URI=\"([^\"]+)\"(?:,IV=(.*))?")
    private val QUALITY_REGEX =
        Regex("""#EXT-X-STREAM-INF:(?:(?:.*?(?:RESOLUTION=\d+x(\d+)).*?\s+(.*))|(?:.*?\s+(.*)))""")
    private val TS_EXTENSION_REGEX =
        Regex("""(.*\.ts.*|.*\.jpg.*)""") //.jpg here 'case vizcloud uses .jpg instead of .ts

    private fun absoluteExtensionDetermination(url: String): String? {
        val split = url.split("/")
        val gg: String = split[split.size - 1].split("?")[0]
        return if (gg.contains(".")) {
            gg.split(".").ifEmpty { null }?.last()
        } else null
    }

    private fun toBytes16Big(n: Int): ByteArray {
        return ByteArray(16) {
            val fixed = n / 256.0.pow((15 - it))
            (maxOf(0, fixed.toInt()) % 256).toByte()
        }
    }

    private val defaultIvGen = sequence {
        var initial = 1

        while (true) {
            yield(toBytes16Big(initial))
            ++initial
        }
    }.iterator()

    private fun getDecrypter(
        secretKey: ByteArray,
        data: ByteArray,
        iv: ByteArray = "".toByteArray()
    ): ByteArray {
        val ivKey = if (iv.isEmpty()) defaultIvGen.next() else iv
        val c = Cipher.getInstance("AES/CBC/PKCS5Padding")
        val skSpec = SecretKeySpec(secretKey, "AES")
        val ivSpec = IvParameterSpec(ivKey)
        c.init(Cipher.DECRYPT_MODE, skSpec, ivSpec)
        return c.doFinal(data)
    }

    private fun isEncrypted(m3u8Data: String): Boolean {
        val st = ENCRYPTION_DETECTION_REGEX.find(m3u8Data)
        return st != null && (st.value.isNotEmpty() || st.destructured.component1() != "NONE")
    }

    data class M3u8Stream(
        val streamUrl: String,
        val quality: Int? = null,
        val headers: Map<String, String> = mapOf()
    )

    private fun selectBest(qualities: List<M3u8Stream>): M3u8Stream? {
        val result = qualities.sortedBy {
            if (it.quality != null && it.quality <= 1080) it.quality else 0
        }.filter {
            listOf("m3u", "m3u8").contains(absoluteExtensionDetermination(it.streamUrl))
        }
        return result.getOrNull(0)
    }

    private fun getParentLink(uri: String): String {
        val split = uri.split("/").toMutableList()
        split.removeLast()
        return split.joinToString("/")
    }

    private fun isNotCompleteUrl(url: String): Boolean {
        return !url.contains("https://") && !url.contains("http://")
    }

    fun m3u8Generation(m3u8: M3u8Stream, returnThis: Boolean?): List<M3u8Stream> {
        val generate = sequence {
            val m3u8Parent = getParentLink(m3u8.streamUrl)
            val response = runBlocking {
                app.get(m3u8.streamUrl, headers = m3u8.headers).text
            }

            var hasAnyContent = false
            for (match in QUALITY_REGEX.findAll(response)) {
                hasAnyContent = true

                var (quality, m3u8Link, m3u8Link2) = match.destructured
                if (m3u8Link.isEmpty()) m3u8Link = m3u8Link2
                if (absoluteExtensionDetermination(m3u8Link) == "m3u8") {
                    if (isNotCompleteUrl(m3u8Link)) {
                        m3u8Link = "$m3u8Parent/$m3u8Link"
                    }
                    if (quality.isEmpty()) {
                        println(m3u8.streamUrl)
                    }
                    yieldAll(
                        m3u8Generation(
                            M3u8Stream(
                                m3u8Link,
                                quality.toIntOrNull(),
                                m3u8.headers
                            ), false
                        )
                    )
                }
                yield(
                    M3u8Stream(
                        m3u8Link,
                        quality.toIntOrNull(),
                        m3u8.headers
                    )
                )
            }
            if (returnThis ?: !hasAnyContent) {
                yield(
                    M3u8Stream(
                        m3u8.streamUrl,
                        Qualities.Unknown.value,
                        m3u8.headers
                    )
                )
            }
        }
        return generate.toList()
    }

    data class HlsDownloadData(
        val bytes: ByteArray,
        val currentIndex: Int,
        val totalTs: Int,
        val errored: Boolean = false
    )

    fun hlsYield(qualities: List<M3u8Stream>, startIndex: Int = 0): Iterator<HlsDownloadData> {
        if (qualities.isEmpty()) return listOf(
            HlsDownloadData(
                byteArrayOf(),
                1,
                1,
                true
            )
        ).iterator()

        var selected = selectBest(qualities)
        if (selected == null) {
            selected = qualities[0]
        }
        val headers = selected.headers

        val streams = qualities.map { m3u8Generation(it, false) }.flatten()
        //val sslVerification = if (headers.containsKey("ssl_verification")) headers["ssl_verification"].toBoolean() else true

        val secondSelection = selectBest(streams.ifEmpty { listOf(selected) })
        if (secondSelection != null) {
            val m3u8Response =
                runBlocking { app.get(secondSelection.streamUrl, headers = headers).text }

            var encryptionUri: String?
            var encryptionIv = byteArrayOf()
            var encryptionData = byteArrayOf()

            val encryptionState = isEncrypted(m3u8Response)

            if (encryptionState) {
                val match =
                    ENCRYPTION_URL_IV_REGEX.find(m3u8Response)!!.destructured  // its safe to assume that its not going to be null
                encryptionUri = match.component2()

                if (isNotCompleteUrl(encryptionUri)) {
                    encryptionUri = "${getParentLink(secondSelection.streamUrl)}/$encryptionUri"
                }

                encryptionIv = match.component3().toByteArray()
                val encryptionKeyResponse =
                    runBlocking { app.get(encryptionUri, headers = headers) }
                encryptionData = encryptionKeyResponse.body?.bytes() ?: byteArrayOf()
            }

            val allTs = TS_EXTENSION_REGEX.findAll(m3u8Response)
            val allTsList = allTs.toList()
            val totalTs = allTsList.size
            if (totalTs == 0) {
                return listOf(HlsDownloadData(byteArrayOf(), 1, 1, true)).iterator()
            }
            var lastYield = 0

            val relativeUrl = getParentLink(secondSelection.streamUrl)
            var retries = 0
            val tsByteGen = sequence {
                loop@ for ((index, ts) in allTs.withIndex()) {
                    val url = if (
                        isNotCompleteUrl(ts.destructured.component1())
                    ) "$relativeUrl/${ts.destructured.component1()}" else ts.destructured.component1()
                    val c = index + 1 + startIndex

                    while (lastYield != c) {
                        try {
                            val tsResponse = runBlocking { app.get(url, headers = headers) }
                            var tsData = tsResponse.body?.bytes() ?: byteArrayOf()

                            if (encryptionState) {
                                tsData = getDecrypter(encryptionData, tsData, encryptionIv)
                                yield(HlsDownloadData(tsData, c, totalTs))
                                lastYield = c
                                break
                            }
                            yield(HlsDownloadData(tsData, c, totalTs))
                            lastYield = c
                        } catch (e: Exception) {
                            logError(e)
                            if (retries == 3) {
                                yield(HlsDownloadData(byteArrayOf(), c, totalTs, true))
                                break@loop
                            }
                            ++retries
                            Thread.sleep(2_000)
                        }
                    }
                }
            }
            return tsByteGen.iterator()
        }
        return listOf(HlsDownloadData(byteArrayOf(), 1, 1, true)).iterator()
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/SingleSelectionHelper.kt
================================================
package com.lagradost.cloudstream3.utils

import android.app.Activity
import android.app.Dialog
import android.view.View
import android.widget.*
import androidx.appcompat.app.AlertDialog
import androidx.core.view.*
import com.google.android.material.bottomsheet.BottomSheetDialog
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTvSettings
import com.lagradost.cloudstream3.utils.UIHelper.dismissSafe
import com.lagradost.cloudstream3.utils.UIHelper.popupMenuNoIconsAndNoStringRes
import com.lagradost.cloudstream3.utils.UIHelper.setImage

object SingleSelectionHelper {
    fun Activity.showOptionSelectStringRes(
        view: View?,
        poster: String?,
        options: List<Int>,
        tvOptions: List<Int> = listOf(),
        callback: (Pair<Boolean, Int>) -> Unit
    ) {
        this.showOptionSelect(view, poster, options.map { this.getString(it) },tvOptions.map { this.getString(it) }, callback)
    }

    private fun Activity.showOptionSelect(
        view: View?,
        poster: String?,
        options: List<String>,
        tvOptions: List<String>,
        callback: (Pair<Boolean, Int>) -> Unit
    ) {
        if (this.isTvSettings()) {
            val builder =
                AlertDialog.Builder(this, R.style.AlertDialogCustom)
                    .setView(R.layout.options_popup_tv)

            val dialog = builder.create()
            dialog.show()

            dialog.findViewById<ListView>(R.id.listview1)?.let { listView ->
                listView.choiceMode = AbsListView.CHOICE_MODE_SINGLE
                listView.adapter = ArrayAdapter<String>(this, R.layout.sort_bottom_single_choice_color).apply {
                    addAll(tvOptions)
                }

                listView.setOnItemClickListener { _, _, i, _ ->
                    callback.invoke(Pair(true,i))
                    dialog.dismissSafe(this)
                }
            }

            dialog.findViewById<ImageView>(R.id.imageView)?.apply {
                isGone = poster.isNullOrEmpty()
                setImage(poster)
            }
        } else {
            view?.popupMenuNoIconsAndNoStringRes(options.mapIndexed { index, s ->
                Pair(
                    index,
                    s
                )
            }) {
                callback(Pair(false,this.itemId))
            }
        }
    }

    fun Activity.showDialog(
        dialog: Dialog,
        items: List<String>,
        selectedIndex: List<Int>,
        name: String,
        showApply: Boolean,
        isMultiSelect: Boolean,
        callback: (List<Int>) -> Unit,
        dismissCallback: () -> Unit
    ) {
        val realShowApply = showApply || isMultiSelect
        val listView = dialog.findViewById<ListView>(R.id.listview1)!!
        val textView = dialog.findViewById<TextView>(R.id.text1)!!
        val applyButton = dialog.findViewById<TextView>(R.id.apply_btt)!!
        val cancelButton = dialog.findViewById<TextView>(R.id.cancel_btt)!!
        val applyHolder = dialog.findViewById<LinearLayout>(R.id.apply_btt_holder)!!

        applyHolder.isVisible = realShowApply
        if (!realShowApply) {
            val params = listView.layoutParams as LinearLayout.LayoutParams
            params.setMargins(listView.marginLeft, listView.marginTop, listView.marginRight, 0)
            listView.layoutParams = params
        }

        textView.text = name

        val arrayAdapter = ArrayAdapter<String>(this, R.layout.sort_bottom_single_choice)
        arrayAdapter.addAll(items)

        listView.adapter = arrayAdapter
        if (isMultiSelect) {
            listView.choiceMode = AbsListView.CHOICE_MODE_MULTIPLE
        } else {
            listView.choiceMode = AbsListView.CHOICE_MODE_SINGLE
        }

        for (select in selectedIndex) {
            listView.setItemChecked(select, true)
        }

        selectedIndex.minOrNull()?.let {
            listView.setSelection(it)
        }

        //  var lastSelectedIndex = if(selectedIndex.isNotEmpty()) selectedIndex.first() else -1

        dialog.setOnDismissListener {
            dismissCallback.invoke()
        }

        listView.setOnItemClickListener { _, _, which, _ ->
            //  lastSelectedIndex = which
            if (realShowApply) {
                if (!isMultiSelect) {
                    listView.setItemChecked(which, true)
                }
            } else {
                callback.invoke(listOf(which))
                dialog.dismissSafe(this)
            }
        }
        if (realShowApply) {
            applyButton.setOnClickListener {
                val list = ArrayList<Int>()
                for (index in 0 until listView.count) {
                    if (listView.checkedItemPositions[index])
                        list.add(index)
                }
                callback.invoke(list)
                dialog.dismissSafe(this)
            }
            cancelButton.setOnClickListener {
                dialog.dismissSafe(this)
            }
        }
    }



    private fun Activity.showInputDialog(
        dialog: Dialog,
        value: String,
        name: String,
        textInputType: Int?,
        callback: (String) -> Unit,
        dismissCallback: () -> Unit
    ) {
        val inputView = dialog.findViewById<EditText>(R.id.nginx_text_input)!!
        val textView = dialog.findViewById<TextView>(R.id.text1)!!
        val applyButton = dialog.findViewById<TextView>(R.id.apply_btt)!!
        val cancelButton = dialog.findViewById<TextView>(R.id.cancel_btt)!!
        val applyHolder = dialog.findViewById<LinearLayout>(R.id.apply_btt_holder)!!

        applyHolder.isVisible = true
        textView.text = name

        if (textInputType != null) {
            inputView.inputType = textInputType // 16 for website url input type
        }
        inputView.setText(value, TextView.BufferType.EDITABLE)


        applyButton.setOnClickListener {
            callback.invoke(inputView.text.toString())  // try to save the setting, using callback
            dialog.dismissSafe(this)
        }

        cancelButton.setOnClickListener {  // just dismiss
            dialog.dismissSafe(this)
        }

        dialog.setOnDismissListener {
            dismissCallback.invoke()
        }

    }

    fun Activity.showMultiDialog(
        items: List<String>,
        selectedIndex: List<Int>,
        name: String,
        dismissCallback: () -> Unit,
        callback: (List<Int>) -> Unit,
    ) {
        val builder =
            AlertDialog.Builder(this, R.style.AlertDialogCustom)
                .setView(R.layout.bottom_selection_dialog)

        val dialog = builder.create()
        dialog.show()
        showDialog(dialog, items, selectedIndex, name, true, true, callback, dismissCallback)
    }

    fun Activity.showDialog(
        items: List<String>,
        selectedIndex: Int,
        name: String,
        showApply: Boolean,
        dismissCallback: () -> Unit,
        callback: (Int) -> Unit,
    ) {
        val builder =
            AlertDialog.Builder(this, R.style.AlertDialogCustom)
                .setView(R.layout.bottom_selection_dialog)

        val dialog = builder.create()
        dialog.show()
        showDialog(
            dialog,
            items,
            listOf(selectedIndex),
            name,
            showApply,
            false,
            { if (it.isNotEmpty()) callback.invoke(it.first()) },
            dismissCallback
        )
    }

    /** Only for a low amount of items */
    fun Activity.showBottomDialog(
        items: List<String>,
        selectedIndex: Int,
        name: String,
        showApply: Boolean,
         dismissCallback: () -> Unit,
        callback: (Int) -> Unit,
    ) {
        val builder =
            BottomSheetDialog(this)
        builder.setContentView(R.layout.bottom_selection_dialog)

        builder.show()
        showDialog(
            builder,
            items,
            listOf(selectedIndex),
            name,
            showApply,
            false,
            { if (it.isNotEmpty()) callback.invoke(it.first()) },
            dismissCallback
        )
    }

        fun Activity.showNginxTextInputDialog(
            name: String,
            value: String,
            textInputType: Int?,
            dismissCallback: () -> Unit,
            callback: (String) -> Unit,
    ) {
        val builder = BottomSheetDialog(this)  // probably the stuff at the bottom
        builder.setContentView(R.layout.bottom_input_dialog)  // input layout

        builder.show()
        showInputDialog(
            builder,
            value,
            name,
            textInputType,  // type is a uri
            callback,
            dismissCallback
        )
    }
}



================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/SubtitleHelper.kt
================================================
package com.lagradost.cloudstream3.utils

import com.lagradost.cloudstream3.mvvm.logError
import java.util.*


object SubtitleHelper {
    data class Language639(
        val languageName: String,
        val nativeName: String,
        val ISO_639_1: String,
        val ISO_639_2_T: String,
        val ISO_639_2_B: String,
        val ISO_639_3: String,
        val ISO_639_6: String,
    )

    /*fun createISO() {
        val url = "https://infogalactic.com/info/List_of_ISO_639-1_codes"
        val response = get(url).text
        val document = Jsoup.parse(response)
        val headers = document.select("table.wikitable > tbody > tr")

        var text = "listOf(\n"
        for (head in headers) {
            val tds = head.select("td")
            if (tds.size < 8) continue
            val name = tds[2].selectFirst("> a").text()
            val native = tds[3].text()
            val ISO_639_1 = tds[4].ownText().replace("+", "").replace(" ", "")
            val ISO_639_2_T = tds[5].ownText().replace("+", "").replace(" ", "")
            val ISO_639_2_B = tds[6].ownText().replace("+", "").replace(" ", "")
            val ISO_639_3 = tds[7].ownText().replace("+", "").replace(" ", "")
            val ISO_639_6 = tds[8].ownText().replace("+", "").replace(" ", "")

            val txtAdd =
                "Language(\"$name\", \"$native\", \"$ISO_639_1\", \"$ISO_639_2_T\", \"$ISO_639_2_B\", \"$ISO_639_3\", \"$ISO_639_6\"),\n"
            text += txtAdd
        }
        text += ")"
        println("ISO CREATED:\n$text")
    }*/

    /** lang -> ISO_639_1
     * @param looseCheck will use .contains in addition to .equals
     * */
    fun fromLanguageToTwoLetters(input: String, looseCheck: Boolean): String? {

        languages.forEach {
            if (it.languageName.equals(input, ignoreCase = true)
                || it.nativeName.equals(input, ignoreCase = true)
            ) return it.ISO_639_1
        }

        // Runs as a separate loop as to prioritize fully matching languages.
        if (looseCheck)
            languages.forEach {
                if (input.contains(it.languageName, ignoreCase = true)
                    || input.contains(it.nativeName, ignoreCase = true)
                ) return it.ISO_639_1
            }

        return null
    }

    private var ISO_639_1Map: HashMap<String, String> = hashMapOf()
    private fun initISO6391Map() {
        for (lang in languages) {
            ISO_639_1Map[lang.ISO_639_1] = lang.languageName
        }
    }

    /** ISO_639_1 -> lang*/
    fun fromTwoLettersToLanguage(input: String): String? {
        if (input.length != 2) return null
        if (ISO_639_1Map.isEmpty()) {
            initISO6391Map()
        }
        val comparison = input.lowercase(Locale.ROOT)

        return ISO_639_1Map[comparison]
    }

    /**ISO_639_2_B or ISO_639_2_T or ISO_639_3-> lang*/
    fun fromThreeLettersToLanguage(input: String): String? {
        if (input.length != 3) return null
        val comparison = input.lowercase(Locale.ROOT)
        for (lang in languages) {
            if (lang.ISO_639_2_B == comparison) {
                return lang.languageName
            }
        }
        for (lang in languages) {
            if (lang.ISO_639_2_T == comparison) {
                return lang.languageName
            }
        }
        for (lang in languages) {
            if (lang.ISO_639_3 == comparison) {
                return lang.languageName
            }
        }
        return null
    }

    /** lang -> ISO_639_2_T*/
    fun fromLanguageToThreeLetters(input: String): String? {
        for (lang in languages) {
            if (lang.languageName == input || lang.nativeName == input) {
                return lang.ISO_639_2_T
            }
        }
        return null
    }

    private const val flagOffset = 0x1F1E6
    private const val asciiOffset = 0x41
    private const val offset = flagOffset - asciiOffset

    fun getFlagFromIso(inp: String?): String? {
        try {
            flags[inp ?: return null]?.let { flagAscii ->
                val firstChar: Int = Character.codePointAt(flagAscii, 0) + offset
                val secondChar: Int = Character.codePointAt(flagAscii, 1) + offset

                return (String(Character.toChars(firstChar)) + String(Character.toChars(secondChar)))
            }
            return null
        } catch (e: Exception) {
            logError(e)
            return null
        }
    }

    private val flags = mapOf(
        "af" to "ZA",
        "agq" to "CM",
        "ak" to "GH",
        "am" to "ET",
        "ar" to "AE",
        "as" to "IN",
        "asa" to "TZ",
        "az" to "AZ",
        "bas" to "CM",
        "be" to "BY",
        "bem" to "ZM",
        "bez" to "IT",
        "bg" to "BG",
        "bm" to "ML",
        "bn" to "BD",
        "bo" to "CN",
        "br" to "FR",
        "brx" to "IN",
        "bs" to "BA",
        "ca" to "ES",
        "cgg" to "UG",
        "chr" to "US",
        "cs" to "CZ",
        "cy" to "GB",
        "da" to "DK",
        "dav" to "KE",
        "de" to "DE",
        "dje" to "NE",
        "dua" to "CM",
        "dyo" to "SN",
        "ebu" to "KE",
        "ee" to "GH",
        "en" to "GB",
        "el" to "GR",
        "es" to "ES",
        "et" to "EE",
        "eu" to "ES",
        "ewo" to "CM",
        "fa" to "IR",
        "fil" to "PH",
        "fr" to "FR",
        "ga" to "IE",
        "gl" to "ES",
        "gsw" to "CH",
        "gu" to "IN",
        "guz" to "KE",
        "gv" to "GB",
        "ha" to "NG",
        "haw" to "US",
        "he" to "IL",
        "hi" to "IN",
        "ff" to "CN",
        "fi" to "FI",
        "fo" to "FO",
        "hr" to "HR",
        "hu" to "HU",
        "hy" to "AM",
        "id" to "ID",
        "ig" to "NG",
        "ii" to "CN",
        "is" to "IS",
        "it" to "IT",
        "ita" to "IT",
        "ja" to "JP",
        "jmc" to "TZ",
        "ka" to "GE",
        "kab" to "DZ",
        "ki" to "KE",
        "kam" to "KE",
        "mer" to "KE",
        "kde" to "TZ",
        "kea" to "CV",
        "khq" to "ML",
        "kk" to "KZ",
        "kl" to "GL",
        "kln" to "KE",
        "km" to "KH",
        "kn" to "IN",
        "ko" to "KR",
        "kok" to "IN",
        "ksb" to "TZ",
        "ksf" to "CM",
        "kw" to "GB",
        "lag" to "TZ",
        "lg" to "UG",
        "ln" to "CG",
        "lt" to "LT",
        "lu" to "CD",
        "lv" to "LV",
        "lat" to "LV",
        "luo" to "KE",
        "luy" to "KE",
        "mas" to "TZ",
        "mfe" to "MU",
        "mg" to "MG",
        "mgh" to "MZ",
        "ml" to "IN",
        "mk" to "MK",
        "mr" to "IN",
        "ms" to "MY",
        "mt" to "MT",
        "mua" to "CM",
        "my" to "MM",
        "naq" to "NA",
        "nb" to "NO",
        "no" to "NO",
        "nn" to "NO",
        "nd" to "ZW",
        "ne" to "NP",
        "nl" to "NL",
        "nmg" to "CM",
        "nus" to "SD",
        "nyn" to "UG",
        "om" to "ET",
        "or" to "IN",
        "pa" to "PK",
        "pl" to "PL",
        "ps" to "AF",
        "pt" to "PT",
        "rm" to "CH",
        "rn" to "BI",
        "ro" to "RO",
        "ru" to "RU",
        "rw" to "RW",
        "rof" to "TZ",
        "rwk" to "TZ",
        "saq" to "KE",
        "sbp" to "TZ",
        "seh" to "MZ",
        "ses" to "ML",
        "sg" to "CF",
        "shi" to "MA",
        "si" to "LK",
        "sk" to "SK",
        "sl" to "SI",
        "sn" to "ZW",
        "so" to "SO",
        "sq" to "AL",
        "sr" to "RS",
        "sv" to "SE",
        "sw" to "TZ",
        "swc" to "CD",
        "ta" to "IN",
        "te" to "IN",
        "teo" to "UG",
        "th" to "TH",
        "ti" to "ET",
        "to" to "TO",
        "tr" to "TR",
        "twq" to "NE",
        "tzm" to "MA",
        "uk" to "UA",
        "ur" to "PK",
        "uz" to "UZ",
        "vai" to "LR",
        "vi" to "VN",
        "vun" to "TZ",
        "xog" to "UG",
        "yav" to "CM",
        "yo" to "NG",
        "zh" to "CN",
        "zu" to "ZA",
        "tl" to "PH",
    )

    val languages = listOf(
        Language639("Abkhaz", "Ð°Ò§ÑÑƒÐ° Ð±Ñ‹Ð·ÑˆÓ™Ð°, Ð°Ò§ÑÑˆÓ™Ð°", "ab", "abk", "abk", "abk", "abks"),
        Language639("Afar", "Afaraf", "aa", "aar", "aar", "aar", "aars"),
        Language639("Afrikaans", "Afrikaans", "af", "afr", "afr", "afr", "afrs"),
        Language639("Akan", "Akan", "ak", "aka", "aka", "aka", ""),
        Language639("Albanian", "Shqip", "sq", "sqi", "", "sqi", ""),
        Language639("Amharic", "áŠ áˆ›áˆ­áŠ›", "am", "amh", "amh", "amh", ""),
        Language639("Arabic", "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "ar", "ara", "ara", "ara", ""),
        Language639("Aragonese", "aragonÃ©s", "an", "arg", "arg", "arg", ""),
        Language639("Armenian", "Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶", "hy", "hye", "", "hye", ""),
        Language639("Assamese", "à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾", "as", "asm", "asm", "asm", ""),
        Language639("Avaric", "Ð°Ð²Ð°Ñ€ Ð¼Ð°Ñ†Ó€, Ð¼Ð°Ð³Ó€Ð°Ñ€ÑƒÐ» Ð¼Ð°Ñ†Ó€", "av", "ava", "ava", "ava", ""),
        Language639("Avestan", "avesta", "ae", "ave", "ave", "ave", ""),
        Language639("Aymara", "aymar aru", "ay", "aym", "aym", "aym", ""),
        Language639("Azerbaijani", "azÉ™rbaycan dili", "az", "aze", "aze", "aze", ""),
        Language639("Bambara", "bamanankan", "bm", "bam", "bam", "bam", ""),
        Language639("Bashkir", "Ð±Ð°ÑˆÒ¡Ð¾Ñ€Ñ‚ Ñ‚ÐµÐ»Ðµ", "ba", "bak", "bak", "bak", ""),
        Language639("Basque", "euskara, euskera", "eu", "eus", "", "eus", ""),
        Language639("Belarusian", "Ð±ÐµÐ»Ð°Ñ€ÑƒÑÐºÐ°Ñ Ð¼Ð¾Ð²Ð°", "be", "bel", "bel", "bel", ""),
        Language639("Bengali", "à¦¬à¦¾à¦‚à¦²à¦¾", "bn", "ben", "ben", "ben", ""),
        Language639("Bihari", "à¤­à¥‹à¤œà¤ªà¥à¤°à¥€", "bh", "bih", "bih", "", ""),
        Language639("Bislama", "Bislama", "bi", "bis", "bis", "bis", ""),
        Language639("Bosnian", "bosanski jezik", "bs", "bos", "bos", "bos", "boss"),
        Language639("Breton", "brezhoneg", "br", "bre", "bre", "bre", ""),
        Language639("Bulgarian", "Ð±ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸ ÐµÐ·Ð¸Ðº", "bg", "bul", "bul", "bul", "buls"),
        Language639("Burmese", "á€—á€™á€¬á€…á€¬", "my", "mya", "", "mya", ""),
        Language639("Catalan", "catalÃ ", "ca", "cat", "cat", "cat", ""),
        Language639("Chamorro", "Chamoru", "ch", "cha", "cha", "cha", ""),
        Language639("Chechen", "Ð½Ð¾Ñ…Ñ‡Ð¸Ð¹Ð½ Ð¼Ð¾Ñ‚Ñ‚", "ce", "che", "che", "che", ""),
        Language639("Chichewa", "chiCheÅµa, chinyanja", "ny", "nya", "nya", "nya", ""),
        Language639("Chinese", "ä¸­æ–‡ (ZhÅngwÃ©n), æ±‰è¯­, æ¼¢èªž", "zh", "zho", "", "zho", ""),
        Language639("Chuvash", "Ñ‡Ó‘Ð²Ð°Ñˆ Ñ‡Ó—Ð»Ñ…Ð¸", "cv", "chv", "chv", "chv", ""),
        Language639("Cornish", "Kernewek", "kw", "cor", "cor", "cor", ""),
        Language639("Corsican", "corsu, lingua corsa", "co", "cos", "cos", "cos", ""),
        Language639("Cree", "á“€á¦áƒá”­ááá£", "cr", "cre", "cre", "cre", ""),
        Language639("Croatian", "hrvatski jezik", "hr", "hrv", "hrv", "hrv", ""),
        Language639("Czech", "ÄeÅ¡tina, ÄeskÃ½ jazyk", "cs", "ces", "", "ces", ""),
        Language639("Danish", "dansk", "da", "dan", "dan", "dan", ""),
        Language639("Divehi", "Þ‹Þ¨ÞˆÞ¬Þ€Þ¨", "dv", "div", "div", "div", ""),
        Language639("Dutch", "Nederlands, Vlaams", "nl", "nld", "", "nld", ""),
        Language639("Dzongkha", "à½¢à¾«à½¼à½„à¼‹à½", "dz", "dzo", "dzo", "dzo", ""),
        Language639("English", "English", "en", "eng", "eng", "eng", "engs"),
        Language639("Esperanto", "Esperanto", "eo", "epo", "epo", "epo", ""),
        Language639("Estonian", "eesti, eesti keel", "et", "est", "est", "est", ""),
        Language639("Ewe", "EÊ‹egbe", "ee", "ewe", "ewe", "ewe", ""),
        Language639("Faroese", "fÃ¸royskt", "fo", "fao", "fao", "fao", ""),
        Language639("Fijian", "vosa Vakaviti", "fj", "fij", "fij", "fij", ""),
        Language639("Finnish", "suomi, suomen kieli", "fi", "fin", "fin", "fin", ""),
        Language639("French", "franÃ§ais, langue franÃ§aise", "fr", "fra", "", "fra", "fras"),
        Language639("Fula", "Fulfulde, Pulaar, Pular", "ff", "ful", "ful", "ful", ""),
        Language639("Galician", "galego", "gl", "glg", "glg", "glg", ""),
        Language639("Georgian", "áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜", "ka", "kat", "", "kat", ""),
        Language639("German", "Deutsch", "de", "deu", "", "deu", "deus"),
        Language639("Greek", "ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬", "el", "ell", "", "ell", "ells"),
        Language639("GuaranÃ­", "AvaÃ±e'áº½", "gn", "grn", "grn", "grn", ""),
        Language639("Gujarati", "àª—à«àªœàª°àª¾àª¤à«€", "gu", "guj", "guj", "guj", ""),
        Language639("Haitian", "KreyÃ²l ayisyen", "ht", "hat", "hat", "hat", ""),
        Language639("Hausa", "(Hausa) Ù‡ÙŽÙˆÙØ³ÙŽ", "ha", "hau", "hau", "hau", ""),
        Language639("Hebrew", "×¢×‘×¨×™×ª", "he", "heb", "heb", "heb", ""),
        Language639("Herero", "Otjiherero", "hz", "her", "her", "her", ""),
        Language639("Hindi", "à¤¹à¤¿à¤¨à¥à¤¦à¥€, à¤¹à¤¿à¤‚à¤¦à¥€", "hi", "hin", "hin", "hin", "hins"),
        Language639("Hiri Motu", "Hiri Motu", "ho", "hmo", "hmo", "hmo", ""),
        Language639("Hungarian", "magyar", "hu", "hun", "hun", "hun", ""),
        Language639("Interlingua", "Interlingua", "ia", "ina", "ina", "ina", ""),
        Language639("Indonesian", "Bahasa Indonesia", "id", "ind", "ind", "ind", ""),
        Language639(
            "Interlingue",
            "Originally called Occidental; then Interlingue after WWII",
            "ie",
            "ile",
            "ile",
            "ile",
            ""
        ),
        Language639("Irish", "Gaeilge", "ga", "gle", "gle", "gle", ""),
        Language639("Igbo", "Asá»¥sá»¥ Igbo", "ig", "ibo", "ibo", "ibo", ""),
        Language639("Inupiaq", "IÃ±upiaq, IÃ±upiatun", "ik", "ipk", "ipk", "ipk", ""),
        Language639("Ido", "Ido", "io", "ido", "ido", "ido", "idos"),
        Language639("Icelandic", "Ãslenska", "is", "isl", "", "isl", ""),
        Language639("Italian", "italiano", "it", "ita", "ita", "ita", "itas"),
        Language639("Inuktitut", "áƒá“„á’ƒá‘Žá‘á‘¦", "iu", "iku", "iku", "iku", ""),
        Language639("Japanese", "æ—¥æœ¬èªž (ã«ã»ã‚“ã”)", "ja", "jpn", "jpn", "jpn", ""),
        Language639("Javanese", "ê¦§ê¦±ê¦—ê¦®", "jv", "jav", "jav", "jav", ""),
        Language639("Kalaallisut", "kalaallisut, kalaallit oqaasii", "kl", "kal", "kal", "kal", ""),
        Language639("Kannada", "à²•à²¨à³à²¨à²¡", "kn", "kan", "kan", "kan", ""),
        Language639("Kanuri", "Kanuri", "kr", "kau", "kau", "kau", ""),
        Language639("Kashmiri", "à¤•à¤¶à¥à¤®à¥€à¤°à¥€, ÙƒØ´Ù…ÙŠØ±ÙŠâ€Ž", "ks", "kas", "kas", "kas", ""),
        Language639("Kazakh", "Ò›Ð°Ð·Ð°Ò› Ñ‚Ñ–Ð»Ñ–", "kk", "kaz", "kaz", "kaz", ""),
        Language639("Khmer", "ážáŸ’áž˜áŸ‚ážš, ážáŸáž˜ážšáž—áž¶ážŸáž¶, áž—áž¶ážŸáž¶ážáŸ’áž˜áŸ‚ážš", "km", "khm", "khm", "khm", ""),
        Language639("Kikuyu", "GÄ©kÅ©yÅ©", "ki", "kik", "kik", "kik", ""),
        Language639("Kinyarwanda", "Ikinyarwanda", "rw", "kin", "kin", "kin", ""),
        Language639("Kyrgyz", "ÐšÑ‹Ñ€Ð³Ñ‹Ð·Ñ‡Ð°, ÐšÑ‹Ñ€Ð³Ñ‹Ð· Ñ‚Ð¸Ð»Ð¸", "ky", "kir", "kir", "kir", ""),
        Language639("Komi", "ÐºÐ¾Ð¼Ð¸ ÐºÑ‹Ð²", "kv", "kom", "kom", "kom", ""),
        Language639("Kongo", "Kikongo", "kg", "kon", "kon", "kon", ""),
        Language639("Korean", "í•œêµ­ì–´, ì¡°ì„ ì–´", "ko", "kor", "kor", "kor", ""),
        Language639("Kurdish", "KurdÃ®, ÙƒÙˆØ±Ø¯ÛŒâ€Ž", "ku", "kur", "kur", "kur", ""),
        Language639("Kwanyama", "Kuanyama", "kj", "kua", "kua", "kua", ""),
        Language639("Latin", "latine, lingua latina", "la", "lat", "lat", "lat", "lats"),
        Language639("Luxembourgish", "LÃ«tzebuergesch", "lb", "ltz", "ltz", "ltz", ""),
        Language639("Ganda", "Luganda", "lg", "lug", "lug", "lug", ""),
        Language639("Limburgish", "Limburgs", "li", "lim", "lim", "lim", ""),
        Language639("Lingala", "LingÃ¡la", "ln", "lin", "lin", "lin", ""),
        Language639("Lao", "àºžàº²àºªàº²àº¥àº²àº§", "lo", "lao", "lao", "lao", ""),
        Language639("Lithuanian", "lietuviÅ³ kalba", "lt", "lit", "lit", "lit", ""),
        Language639("Luba-Katanga", "Tshiluba", "lu", "lub", "lub", "lub", ""),
        Language639("Latvian", "latvieÅ¡u valoda", "lv", "lav", "lav", "lav", ""),
        Language639("Manx", "Gaelg, Gailck", "gv", "glv", "glv", "glv", ""),
        Language639("Macedonian", "Ð¼Ð°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸ Ñ˜Ð°Ð·Ð¸Ðº", "mk", "mkd", "", "mkd", ""),
        Language639("Malagasy", "fiteny malagasy", "mg", "mlg", "mlg", "mlg", ""),
        Language639("Malay", "bahasa Melayu, Ø¨Ù‡Ø§Ø³ Ù…Ù„Ø§ÙŠÙˆâ€Ž", "ms", "msa", "", "msa", ""),
        Language639("Malayalam", "à´®à´²à´¯à´¾à´³à´‚", "ml", "mal", "mal", "mal", ""),
        Language639("Maltese", "Malti", "mt", "mlt", "mlt", "mlt", ""),
        Language639("MÄori", "te reo MÄori", "mi", "mri", "", "mri", ""),
        Language639("Marathi", "à¤®à¤°à¤¾à¤ à¥€", "mr", "mar", "mar", "mar", ""),
        Language639("Marshallese", "Kajin MÌ§ajeÄ¼", "mh", "mah", "mah", "mah", ""),
        Language639("Mongolian", "ÐœÐ¾Ð½Ð³Ð¾Ð» Ñ…ÑÐ»", "mn", "mon", "mon", "mon", ""),
        Language639("Nauruan", "Dorerin Naoero", "na", "nau", "nau", "nau", ""),
        Language639("Navajo", "DinÃ© bizaad", "nv", "nav", "nav", "nav", ""),
        Language639("Northern Ndebele", "isiNdebele", "nd", "nde", "nde", "nde", ""),
        Language639("Nepali", "à¤¨à¥‡à¤ªà¤¾à¤²à¥€", "ne", "nep", "nep", "nep", ""),
        Language639("Ndonga", "Owambo", "ng", "ndo", "ndo", "ndo", ""),
        Language639("Norwegian BokmÃ¥l", "Norsk bokmÃ¥l", "nb", "nob", "nob", "nob", ""),
        Language639("Norwegian Nynorsk", "Norsk nynorsk", "nn", "nno", "nno", "nno", ""),
        Language639("Norwegian", "Norsk", "no", "nor", "nor", "nor", ""),
        Language639("Nuosu", "ê†ˆêŒ ê’¿ Nuosuhxop", "ii", "iii", "iii", "iii", ""),
        Language639("Southern Ndebele", "isiNdebele", "nr", "nbl", "nbl", "nbl", ""),
        Language639("Occitan", "occitan, lenga d'Ã²c", "oc", "oci", "oci", "oci", ""),
        Language639("Ojibwe", "áŠá“‚á”‘á“ˆá¯á’§áŽá“", "oj", "oji", "oji", "oji", ""),
        Language639("Old Church Slavonic", "Ñ©Ð·Ñ‹ÐºÑŠ ÑÐ»Ð¾Ð²Ñ£Ð½ÑŒÑÐºÑŠ", "cu", "chu", "chu", "chu", ""),
        Language639("Oromo", "Afaan Oromoo", "om", "orm", "orm", "orm", ""),
        Language639("Oriya", "à¬“à¬¡à¬¼à¬¿à¬†", "or", "ori", "ori", "ori", ""),
        Language639("Ossetian", "Ð¸Ñ€Ð¾Ð½ Ã¦Ð²Ð·Ð°Ð³", "os", "oss", "oss", "oss", ""),
        Language639("Panjabi", "à¨ªà©°à¨œà¨¾à¨¬à©€, Ù¾Ù†Ø¬Ø§Ø¨ÛŒâ€Ž", "pa", "pan", "pan", "pan", ""),
        Language639("PÄli", "à¤ªà¤¾à¤´à¤¿", "pi", "pli", "pli", "pli", ""),
        Language639("Persian", "ÙØ§Ø±Ø³ÛŒ", "fa", "fas", "", "fas", ""),
        Language639("Polish", "jÄ™zyk polski, polszczyzna", "pl", "pol", "pol", "pol", "pols"),
        Language639("Pashto", "Ù¾ÚšØªÙˆ", "ps", "pus", "pus", "pus", ""),
        Language639("Portuguese", "portuguÃªs", "pt", "por", "por", "por", ""),
        Language639("Quechua", "Runa Simi, Kichwa", "qu", "que", "que", "que", ""),
        Language639("Romansh", "rumantsch grischun", "rm", "roh", "roh", "roh", ""),
        Language639("Kirundi", "Ikirundi", "rn", "run", "run", "run", ""),
        Language639("Reunion Creole", "KrÃ©ol RÃ©nionÃ©", "rc", "rcf", "rcf", "rcf", ""),
        Language639("Romanian", "limba romÃ¢nÄƒ", "ro", "ron", "", "ron", ""),
        Language639("Russian", "Ð ÑƒÑÑÐºÐ¸Ð¹", "ru", "rus", "rus", "rus", ""),
        Language639("Sanskrit", "à¤¸à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤®à¥", "sa", "san", "san", "san", ""),
        Language639("Sardinian", "sardu", "sc", "srd", "srd", "srd", ""),
        Language639("Sindhi", "à¤¸à¤¿à¤¨à¥à¤§à¥€, Ø³Ù†ÚŒÙŠØŒ Ø³Ù†Ø¯Ú¾ÛŒâ€Ž", "sd", "snd", "snd", "snd", ""),
        Language639("Northern Sami", "DavvisÃ¡megiella", "se", "sme", "sme", "sme", ""),
        Language639("Samoan", "gagana fa'a Samoa", "sm", "smo", "smo", "smo", ""),
        Language639("Sango", "yÃ¢ngÃ¢ tÃ® sÃ¤ngÃ¶", "sg", "sag", "sag", "sag", ""),
        Language639("Serbian", "ÑÑ€Ð¿ÑÐºÐ¸ Ñ˜ÐµÐ·Ð¸Ðº", "sr", "srp", "srp", "srp", ""),
        Language639("Scottish Gaelic", "GÃ idhlig", "gd", "gla", "gla", "gla", ""),
        Language639("Shona", "chiShona", "sn", "sna", "sna", "sna", ""),
        Language639("Sinhalese", "à·ƒà·’à¶‚à·„à¶½", "si", "sin", "sin", "sin", ""),
        Language639("Slovak", "slovenÄina, slovenskÃ½ jazyk", "sk", "slk", "", "slk", ""),
        Language639("Slovene", "slovenski jezik, slovenÅ¡Äina", "sl", "slv", "slv", "slv", ""),
        Language639("Somali", "Soomaaliga, af Soomaali", "so", "som", "som", "som", ""),
        Language639("Southern Sotho", "Sesotho", "st", "sot", "sot", "sot", ""),
        Language639("Spanish", "espaÃ±ol", "es", "spa", "spa", "spa", ""),
        Language639("Sundanese", "Basa Sunda", "su", "sun", "sun", "sun", ""),
        Language639("Swahili", "Kiswahili", "sw", "swa", "swa", "swa", ""),
        Language639("Swati", "SiSwati", "ss", "ssw", "ssw", "ssw", ""),
        Language639("Swedish", "svenska", "sv", "swe", "swe", "swe", ""),
        Language639("Tamil", "à®¤à®®à®¿à®´à¯", "ta", "tam", "tam", "tam", ""),
        Language639("Telugu", "à°¤à±†à°²à±à°—à±", "te", "tel", "tel", "tel", ""),
        Language639("Tajik", "Ñ‚Ð¾Ò·Ð¸ÐºÓ£, toÃ§ikÄ«, ØªØ§Ø¬ÛŒÚ©ÛŒâ€Ž", "tg", "tgk", "tgk", "tgk", ""),
        Language639("Thai", "à¹„à¸—à¸¢", "th", "tha", "tha", "tha", ""),
        Language639("Tigrinya", "á‰µáŒáˆ­áŠ›", "ti", "tir", "tir", "tir", ""),
        Language639("Tibetan Standard", "à½–à½¼à½‘à¼‹à½¡à½²à½‚", "bo", "bod", "", "bod", ""),
        Language639("Turkmen", "TÃ¼rkmen, Ð¢Ò¯Ñ€ÐºÐ¼ÐµÐ½", "tk", "tuk", "tuk", "tuk", ""),
        Language639("Tagalog", "Wikang Tagalog", "tl", "tgl", "tgl", "tgl", ""),
        Language639("Tswana", "Setswana", "tn", "tsn", "tsn", "tsn", ""),
        Language639("Tonga", "faka Tonga", "to", "ton", "ton", "ton", ""),
        Language639("Turkish", "TÃ¼rkÃ§e", "tr", "tur", "tur", "tur", ""),
        Language639("Tsonga", "Xitsonga", "ts", "tso", "tso", "tso", ""),
        Language639("Tatar", "Ñ‚Ð°Ñ‚Ð°Ñ€ Ñ‚ÐµÐ»Ðµ, tatar tele", "tt", "tat", "tat", "tat", ""),
        Language639("Twi", "Twi", "tw", "twi", "twi", "twi", ""),
        Language639("Tahitian", "Reo Tahiti", "ty", "tah", "tah", "tah", ""),
        Language639("Uyghur", "Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û•â€Ž, Uyghurche", "ug", "uig", "uig", "uig", ""),
        Language639("Ukrainian", "Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°", "uk", "ukr", "ukr", "ukr", ""),
        Language639("Urdu", "Ø§Ø±Ø¯Ùˆ", "ur", "urd", "urd", "urd", ""),
        Language639("Uzbek", "OÊ»zbek, ÐŽÐ·Ð±ÐµÐº, Ø£Û‡Ø²Ø¨ÛÙƒâ€Ž", "uz", "uzb", "uzb", "uzb", ""),
        Language639("Venda", "Tshivená¸“a", "ve", "ven", "ven", "ven", ""),
        Language639("Vietnamese", "Tiáº¿ng Viá»‡t", "vi", "vie", "vie", "vie", ""),
        Language639("VolapÃ¼k", "VolapÃ¼k", "vo", "vol", "vol", "vol", ""),
        Language639("Walloon", "walon", "wa", "wln", "wln", "wln", ""),
        Language639("Welsh", "Cymraeg", "cy", "cym", "", "cym", ""),
        Language639("Wolof", "Wollof", "wo", "wol", "wol", "wol", ""),
        Language639("Western Frisian", "Frysk", "fy", "fry", "fry", "fry", ""),
        Language639("Xhosa", "isiXhosa", "xh", "xho", "xho", "xho", ""),
        Language639("Yiddish", "×™×™Ö´×“×™×©", "yi", "yid", "yid", "yid", ""),
        Language639("Yoruba", "YorÃ¹bÃ¡", "yo", "yor", "yor", "yor", ""),
        Language639("Zhuang", "SaÉ¯ cueÅ‹Æ…, Saw cuengh", "za", "zha", "zha", "zha", ""),
        Language639("Zulu", "isiZulu", "zu", "zul", "zul", "zul", ""),
    )
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/SyncUtil.kt
================================================
package com.lagradost.cloudstream3.utils

import android.util.Log
import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.module.kotlin.readValue
import com.lagradost.cloudstream3.app
import com.lagradost.cloudstream3.mapper
import com.lagradost.cloudstream3.mvvm.logError
import java.util.concurrent.TimeUnit

object SyncUtil {
    private val regexs = listOf(
        Regex("""(9anime)\.(?:to|center|id)/watch/(?:.*?)\.([^/?]*)"""),
        Regex("""(gogoanime|gogoanimes)\..*?/category/([^/?]*)"""),
        Regex("""(twist\.moe)/a/([^/?]*)"""),
    )

    private const val TAG = "SYNCUTIL"

    private const val GOGOANIME = "Gogoanime"
    private const val NINE_ANIME = "9anime"
    private const val TWIST_MOE = "Twistmoe"

    private val matchList =
        mapOf(
            "9anime" to NINE_ANIME,
            "gogoanime" to GOGOANIME,
            "gogoanimes" to GOGOANIME,
            "twist.moe" to TWIST_MOE
        )

    suspend fun getIdsFromUrl(url: String?): Pair<String?, String?>? {
        if (url == null) return null
        Log.i(TAG, "getIdsFromUrl $url")

        for (regex in regexs) {
            regex.find(url)?.let { match ->
                if (match.groupValues.size == 3) {
                    val site = match.groupValues[1]
                    val slug = match.groupValues[2]
                    matchList[site]?.let { realSite ->
                        getIdsFromSlug(slug, realSite)?.let {
                            return it
                        }
                    }
                }
            }
        }
        return null
    }

    /** first. Mal, second. Anilist,
     * valid sites are: Gogoanime, Twistmoe and 9anime*/
    private suspend fun getIdsFromSlug(
        slug: String,
        site: String = "Gogoanime"
    ): Pair<String?, String?>? {
        Log.i(TAG, "getIdsFromSlug $slug $site")
        try {
            //Gogoanime, Twistmoe and 9anime
            val url =
                "https://raw.githubusercontent.com/MALSync/MAL-Sync-Backup/master/data/pages/$site/$slug.json"
            val response = app.get(url, cacheTime = 1, cacheUnit = TimeUnit.DAYS).text
            val mapped = mapper.readValue<MalSyncPage?>(response)

            val overrideMal = mapped?.malId ?: mapped?.Mal?.id ?: mapped?.Anilist?.malId
            val overrideAnilist = mapped?.aniId ?: mapped?.Anilist?.id

            if (overrideMal != null) {
                return overrideMal.toString() to overrideAnilist?.toString()
            }
            return null
        } catch (e: Exception) {
            logError(e)
        }
        return null
    }

    suspend fun getUrlsFromId(id: String, type: String = "anilist") : List<String> {
        val url =
            "https://raw.githubusercontent.com/MALSync/MAL-Sync-Backup/master/data/$type/anime/$id.json"
        val response = app.get(url, cacheTime = 1, cacheUnit = TimeUnit.DAYS).parsed<SyncPage>()
        val pages = response.pages ?: return emptyList()
        return pages.gogoanime.values.union(pages.nineanime.values).union(pages.twistmoe.values).mapNotNull { it.url }
    }

    data class SyncPage(
        @JsonProperty("Pages") val pages: SyncPages?,
    )

    data class SyncPages(
        @JsonProperty("9anime") val nineanime: Map<String, ProviderPage> = emptyMap(),
        @JsonProperty("Gogoanime") val gogoanime: Map<String, ProviderPage> = emptyMap(),
        @JsonProperty("Twistmoe") val twistmoe: Map<String, ProviderPage> = emptyMap(),
    )

    data class ProviderPage(
        @JsonProperty("url") val url: String?,
    )

    data class MalSyncPage(
        @JsonProperty("identifier") val identifier: String?,
        @JsonProperty("type") val type: String?,
        @JsonProperty("page") val page: String?,
        @JsonProperty("title") val title: String?,
        @JsonProperty("url") val url: String?,
        @JsonProperty("image") val image: String?,
        @JsonProperty("hentai") val hentai: Boolean?,
        @JsonProperty("sticky") val sticky: Boolean?,
        @JsonProperty("active") val active: Boolean?,
        @JsonProperty("actor") val actor: String?,
        @JsonProperty("malId") val malId: Int?,
        @JsonProperty("aniId") val aniId: Int?,
        @JsonProperty("createdAt") val createdAt: String?,
        @JsonProperty("updatedAt") val updatedAt: String?,
        @JsonProperty("deletedAt") val deletedAt: String?,
        @JsonProperty("Mal") val Mal: Mal?,
        @JsonProperty("Anilist") val Anilist: Anilist?,
        @JsonProperty("malUrl") val malUrl: String?
    )

    data class Anilist(
//            @JsonProperty("altTitle") val altTitle: List<String>?,
//            @JsonProperty("externalLinks") val externalLinks: List<String>?,
        @JsonProperty("id") val id: Int?,
        @JsonProperty("malId") val malId: Int?,
        @JsonProperty("type") val type: String?,
        @JsonProperty("title") val title: String?,
        @JsonProperty("url") val url: String?,
        @JsonProperty("image") val image: String?,
        @JsonProperty("category") val category: String?,
        @JsonProperty("hentai") val hentai: Boolean?,
        @JsonProperty("createdAt") val createdAt: String?,
        @JsonProperty("updatedAt") val updatedAt: String?,
        @JsonProperty("deletedAt") val deletedAt: String?
    )

    data class Mal(
//            @JsonProperty("altTitle") val altTitle: List<String>?,
        @JsonProperty("id") val id: Int?,
        @JsonProperty("type") val type: String?,
        @JsonProperty("title") val title: String?,
        @JsonProperty("url") val url: String?,
        @JsonProperty("image") val image: String?,
        @JsonProperty("category") val category: String?,
        @JsonProperty("hentai") val hentai: Boolean?,
        @JsonProperty("createdAt") val createdAt: String?,
        @JsonProperty("updatedAt") val updatedAt: String?,
        @JsonProperty("deletedAt") val deletedAt: String?
    )
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/UIHelper.kt
================================================
package com.lagradost.cloudstream3.utils

import android.Manifest
import android.annotation.SuppressLint
import android.app.Activity
import android.app.AppOpsManager
import android.app.Dialog
import android.content.Context
import android.content.pm.PackageManager
import android.content.res.Configuration
import android.content.res.Resources
import android.graphics.Color
import android.os.Build
import android.os.Bundle
import android.view.*
import android.view.inputmethod.InputMethodManager
import android.widget.ImageView
import android.widget.ListAdapter
import android.widget.ListView
import androidx.annotation.AttrRes
import androidx.annotation.ColorInt
import androidx.annotation.DrawableRes
import androidx.annotation.IdRes
import androidx.appcompat.view.ContextThemeWrapper
import androidx.appcompat.view.menu.MenuBuilder
import androidx.appcompat.widget.PopupMenu
import androidx.core.app.ActivityCompat
import androidx.core.content.ContextCompat
import androidx.core.graphics.alpha
import androidx.core.graphics.blue
import androidx.core.graphics.green
import androidx.core.graphics.red
import androidx.fragment.app.Fragment
import androidx.fragment.app.FragmentActivity
import androidx.navigation.fragment.NavHostFragment
import androidx.preference.PreferenceManager
import com.bumptech.glide.load.model.GlideUrl
import com.bumptech.glide.load.resource.drawable.DrawableTransitionOptions
import com.lagradost.cloudstream3.R
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isEmulatorSettings
import com.lagradost.cloudstream3.ui.settings.SettingsFragment.Companion.isTvSettings
import com.lagradost.cloudstream3.utils.GlideOptions.bitmapTransform
import jp.wasabeef.glide.transformations.BlurTransformation
import kotlin.math.roundToInt


object UIHelper {
    val Int.toPx: Int get() = (this * Resources.getSystem().displayMetrics.density).toInt()
    val Float.toPx: Float get() = (this * Resources.getSystem().displayMetrics.density)
    val Int.toDp: Int get() = (this / Resources.getSystem().displayMetrics.density).toInt()
    val Float.toDp: Float get() = (this / Resources.getSystem().displayMetrics.density)

    fun Activity.checkWrite(): Boolean {
        return (ContextCompat.checkSelfPermission(
            this,
            Manifest.permission.WRITE_EXTERNAL_STORAGE
        )
                == PackageManager.PERMISSION_GRANTED)
    }

    fun Activity.requestRW() {
        ActivityCompat.requestPermissions(
            this,
            arrayOf(
                Manifest.permission.WRITE_EXTERNAL_STORAGE,
                Manifest.permission.READ_EXTERNAL_STORAGE
            ),
            1337
        )
    }


    /**
     * Sets ListView height dynamically based on the height of the items.
     *
     * @param listView to be resized
     * @return true if the listView is successfully resized, false otherwise
     */
    fun setListViewHeightBasedOnItems(listView: ListView?) {
        val listAdapter: ListAdapter = listView?.adapter ?: return
        val numberOfItems: Int = listAdapter.count

        // Get total height of all items.
        var totalItemsHeight = 0
        for (itemPos in 0 until numberOfItems) {
            val item: View = listAdapter.getView(itemPos, null, listView)
            item.measure(0, 0)
            totalItemsHeight += item.measuredHeight
        }

        // Get total height of all item dividers.
        val totalDividersHeight: Int = listView.dividerHeight *
                (numberOfItems - 1)

        // Set list height.
        val params: ViewGroup.LayoutParams = listView.layoutParams
        params.height = totalItemsHeight + totalDividersHeight
        listView.layoutParams = params
        listView.requestLayout()
    }

    fun Activity?.getSpanCount(): Int? {
        val compactView = false
        val spanCountLandscape = if (compactView) 2 else 6
        val spanCountPortrait = if (compactView) 1 else 3
        val orientation = this?.resources?.configuration?.orientation ?: return null

        return if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
            spanCountLandscape
        } else {
            spanCountPortrait
        }
    }

    fun Fragment.hideKeyboard() {
        activity?.window?.decorView?.clearFocus()
        view?.let {
            hideKeyboard(it)
        }
    }

    fun Activity.hideKeyboard() {
        window?.decorView?.clearFocus()
        this.findViewById<View>(android.R.id.content)?.rootView?.let {
            hideKeyboard(it)
        }
    }

    fun Activity?.navigate(@IdRes navigation: Int, arguments: Bundle? = null) {
        if (this is FragmentActivity) {
            (supportFragmentManager.findFragmentById(R.id.nav_host_fragment) as? NavHostFragment?)?.navController?.navigate(
                navigation, arguments
            )
        }
    }

    @ColorInt
    fun Context.getResourceColor(@AttrRes resource: Int, alphaFactor: Float = 1f): Int {
        val typedArray = obtainStyledAttributes(intArrayOf(resource))
        val color = typedArray.getColor(0, 0)
        typedArray.recycle()

        if (alphaFactor < 1f) {
            val alpha = (color.alpha * alphaFactor).roundToInt()
            return Color.argb(alpha, color.red, color.green, color.blue)
        }

        return color
    }

    fun ImageView?.setImage(
        url: String?,
        headers: Map<String, String>? = null,
        @DrawableRes
        errorImageDrawable: Int? = null
    ): Boolean {
        if (this == null || url.isNullOrBlank()) return false
        return try {
            val builder = GlideApp.with(this.context)
                .load(GlideUrl(url) { headers ?: emptyMap() }).transition(
                    DrawableTransitionOptions.withCrossFade()
                )

            if (errorImageDrawable != null)
                builder.error(errorImageDrawable).into(this)
            else
                builder.into(this)

            true
        } catch (e: Exception) {
            logError(e)
            false
        }
    }

    fun ImageView?.setImageBlur(
        url: String?,
        radius: Int,
        sample: Int = 3,
        headers: Map<String, String>? = null
    ) {
        if (this == null || url.isNullOrBlank()) return
        try {
            GlideApp.with(this.context)
                .load(GlideUrl(url) { headers ?: emptyMap() })
                .apply(bitmapTransform(BlurTransformation(radius, sample)))
                .transition(
                    DrawableTransitionOptions.withCrossFade()
                )
                .into(this)
        } catch (e: Exception) {
            logError(e)
        }
    }

    fun adjustAlpha(@ColorInt color: Int, factor: Float): Int {
        val alpha = (Color.alpha(color) * factor).roundToInt()
        val red = Color.red(color)
        val green = Color.green(color)
        val blue = Color.blue(color)
        return Color.argb(alpha, red, green, blue)
    }

    fun Context.colorFromAttribute(attribute: Int): Int {
        val attributes = obtainStyledAttributes(intArrayOf(attribute))
        val color = attributes.getColor(0, 0)
        attributes.recycle()
        return color
    }

    fun Activity.hideSystemUI() {
        // Enables regular immersive mode.
        // For "lean back" mode, remove SYSTEM_UI_FLAG_IMMERSIVE.
        // Or for "sticky immersive," replace it with SYSTEM_UI_FLAG_IMMERSIVE_STICKY
        window.decorView.systemUiVisibility = (
                View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
                        // Set the content to appear under the system bars so that the
                        // content doesn't resize when the system bars hide and show.
                        or View.SYSTEM_UI_FLAG_LAYOUT_STABLE
                        or View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                        or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                        // Hide the nav bar and status bar
                        or View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
                        or View.SYSTEM_UI_FLAG_FULLSCREEN
                //  or View.SYSTEM_UI_FLAG_LOW_PROFILE
                )
        // window.addFlags(View.KEEP_SCREEN_ON)
    }

    fun FragmentActivity.popCurrentPage() {
        this.onBackPressed()
        /*val currentFragment = supportFragmentManager.fragments.lastOrNull {
            it.isVisible
        } ?: return

        supportFragmentManager.beginTransaction()
            .setCustomAnimations(
                R.anim.enter_anim,
                R.anim.exit_anim,
                R.anim.pop_enter,
                R.anim.pop_exit
            )
            .remove(currentFragment)
            .commitAllowingStateLoss()*/
    }
    /*
    fun FragmentActivity.popCurrentPage(isInPlayer: Boolean, isInExpandedView: Boolean, isInResults: Boolean) {
        val currentFragment = supportFragmentManager.fragments.lastOrNull {
            it.isVisible
        }
            ?: //this.onBackPressed()
            return

/*
        if (tvActivity == null) {
            requestedOrientation = if (settingsManager?.getBoolean("force_landscape", false) == true) {
                ActivityInfo.SCREEN_ORIENTATION_USER_LANDSCAPE
            } else {
                ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
            }
        }*/

        // No fucked animations leaving the player :)
        when {
            isInPlayer -> {
                supportFragmentManager.beginTransaction()
                    //.setCustomAnimations(R.anim.enter, R.anim.exit, R.anim.pop_enter, R.anim.pop_exit)
                    .remove(currentFragment)
                    .commitAllowingStateLoss()
            }
            isInExpandedView && !isInResults -> {
                supportFragmentManager.beginTransaction()
                    .setCustomAnimations(
                        R.anim.enter_anim,//R.anim.enter_from_right,
                        R.anim.exit_anim,//R.anim.exit_to_right,
                        R.anim.pop_enter,
                        R.anim.pop_exit
                    )
                    .remove(currentFragment)
                    .commitAllowingStateLoss()
            }
            else -> {
                supportFragmentManager.beginTransaction()
                    .setCustomAnimations(R.anim.enter_anim, R.anim.exit_anim, R.anim.pop_enter, R.anim.pop_exit)
                    .remove(currentFragment)
                    .commitAllowingStateLoss()
            }
        }
    }*/

    fun Context.getStatusBarHeight(): Int {
        if (isTvSettings()) {
            return 0
        }

        var result = 0
        val resourceId = resources.getIdentifier("status_bar_height", "dimen", "android")
        if (resourceId > 0) {
            result = resources.getDimensionPixelSize(resourceId)
        }
        return result
    }

    fun Context?.fixPaddingStatusbar(v: View?) {
        if (v == null || this == null) return
        v.setPadding(
            v.paddingLeft,
            v.paddingTop + getStatusBarHeight(),
            v.paddingRight,
            v.paddingBottom
        )
    }

    fun Context.fixPaddingStatusbarView(v: View) {
        val params = v.layoutParams
        params.height = getStatusBarHeight()
        v.layoutParams = params
    }

    fun Context.getNavigationBarHeight(): Int {
        var result = 0
        val resourceId = resources.getIdentifier("navigation_bar_height", "dimen", "android")
        if (resourceId > 0) {
            result = resources.getDimensionPixelSize(resourceId)
        }
        return result
    }

    fun Context?.IsBottomLayout(): Boolean {
        if (this == null) return true
        val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
        return settingsManager.getBoolean(getString(R.string.bottom_title_key), true)
    }

    fun Activity.changeStatusBarState(hide: Boolean): Int {
        return if (hide) {
            window?.setFlags(
                WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN
            )
            0
        } else {
            window.clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN)
            this.getStatusBarHeight()
        }
    }

    // Shows the system bars by removing all the flags
    // except for the ones that make the content appear under the system bars.
    fun Activity.showSystemUI() {
        window.decorView.systemUiVisibility =

            (View.SYSTEM_UI_FLAG_LAYOUT_STABLE or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN)

        changeStatusBarState(isEmulatorSettings())

        // window.clearFlags(View.KEEP_SCREEN_ON)
    }

    fun Context.shouldShowPIPMode(isInPlayer: Boolean): Boolean {
        return try {
            val settingsManager = PreferenceManager.getDefaultSharedPreferences(this)
            settingsManager?.getBoolean(
                getString(R.string.pip_enabled_key),
                true
            ) ?: true && isInPlayer
        } catch (e: Exception) {
            logError(e)
            false
        }
    }

    fun Context.hasPIPPermission(): Boolean {
        val appOps =
            getSystemService(Context.APP_OPS_SERVICE) as AppOpsManager
        return if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            appOps.checkOpNoThrow(
                AppOpsManager.OPSTR_PICTURE_IN_PICTURE,
                android.os.Process.myUid(),
                packageName
            ) == AppOpsManager.MODE_ALLOWED
        } else {
            return true
        }
    }

    fun hideKeyboard(view: View?) {
        if (view == null) return

        val inputMethodManager =
            view.context.getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager?
        inputMethodManager?.hideSoftInputFromWindow(view.windowToken, 0)
    }

    fun showInputMethod(view: View?) {
        if (view == null) return
        val inputMethodManager =
            view.context.getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager?
        inputMethodManager?.showSoftInput(view, 0)
    }

    fun Dialog?.dismissSafe(activity: Activity?) {
        if (this?.isShowing == true && activity?.isFinishing == false) {
            this.dismiss()
        }
    }

    fun Dialog?.dismissSafe() {
        if (this?.isShowing == true) {
            this.dismiss()
        }
    }

    /**id, stringRes */
    @SuppressLint("RestrictedApi")
    fun View.popupMenuNoIcons(
        items: List<Pair<Int, Int>>,
        onMenuItemClick: MenuItem.() -> Unit,
    ): PopupMenu {
        val ctw = ContextThemeWrapper(context, R.style.PopupMenu)
        val popup = PopupMenu(ctw, this, Gravity.NO_GRAVITY, R.attr.actionOverflowMenuStyle, 0)

        items.forEach { (id, stringRes) ->
            popup.menu.add(0, id, 0, stringRes)
        }

        (popup.menu as? MenuBuilder)?.setOptionalIconsVisible(true)

        popup.setOnMenuItemClickListener {
            it.onMenuItemClick()
            true
        }

        popup.show()
        return popup
    }

    /**id, string */
    @SuppressLint("RestrictedApi")
    fun View.popupMenuNoIconsAndNoStringRes(
        items: List<Pair<Int, String>>,
        onMenuItemClick: MenuItem.() -> Unit,
    ): PopupMenu {
        val ctw = ContextThemeWrapper(context, R.style.PopupMenu)
        val popup = PopupMenu(ctw, this, Gravity.NO_GRAVITY, R.attr.actionOverflowMenuStyle, 0)

        items.forEach { (id, string) ->
            popup.menu.add(0, id, 0, string)
        }

        (popup.menu as? MenuBuilder)?.setOptionalIconsVisible(true)

        popup.setOnMenuItemClickListener {
            it.onMenuItemClick()
            true
        }

        popup.show()
        return popup
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/Vector2.kt
================================================
package com.lagradost.cloudstream3.utils

import kotlin.math.sqrt

data class Vector2(val x : Float, val y : Float) {
    operator fun minus(other: Vector2) = Vector2(x - other.x, y - other.y)
    operator fun plus(other: Vector2) = Vector2(x + other.x, y + other.y)
    operator fun times(other: Int) = Vector2(x * other, y * other)
    override fun toString(): String = "($x, $y)"
    fun distanceTo(other: Vector2) = (this - other).length
    private val lengthSquared by lazy { x*x + y*y }
    val length by lazy { sqrt(lengthSquared) }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/utils/VideoDownloadHelper.kt
================================================
package com.lagradost.cloudstream3.utils

import com.fasterxml.jackson.annotation.JsonProperty
import com.lagradost.cloudstream3.TvType
import com.lagradost.cloudstream3.ui.download.EasyDownloadButton

object VideoDownloadHelper {
    data class DownloadEpisodeCached(
        @JsonProperty("name") val name: String?,
        @JsonProperty("poster") val poster: String?,
        @JsonProperty("episode") val episode: Int,
        @JsonProperty("season") val season: Int?,
        @JsonProperty("id") override val id: Int,
        @JsonProperty("parentId") val parentId: Int,
        @JsonProperty("rating") val rating: Int?,
        @JsonProperty("description") val description: String?,
        @JsonProperty("cacheTime") val cacheTime: Long,
    ) : EasyDownloadButton.IMinimumData

    data class DownloadHeaderCached(
        @JsonProperty("apiName") val apiName: String,
        @JsonProperty("url") val url: String,
        @JsonProperty("type") val type: TvType,
        @JsonProperty("name") val name: String,
        @JsonProperty("poster") val poster: String?,
        @JsonProperty("id") val id: Int,
        @JsonProperty("cacheTime") val cacheTime: Long,
    )

    data class ResumeWatching(
        @JsonProperty("parentId") val parentId: Int,
        @JsonProperty("episodeId") val episodeId: Int?,
        @JsonProperty("episode") val episode: Int?,
        @JsonProperty("season") val season: Int?,
        @JsonProperty("updateTime") val updateTime: Long,
        @JsonProperty("isFromDownload") val isFromDownload: Boolean,
    )
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/widget/CenterZoomLayoutManager.kt
================================================
package com.lagradost.cloudstream3.widget

import android.content.Context
import android.util.AttributeSet
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.LinearSnapHelper
import androidx.recyclerview.widget.RecyclerView
import com.lagradost.cloudstream3.mvvm.logError
import kotlin.math.abs
import kotlin.math.min

class CenterZoomLayoutManager : LinearLayoutManager {
    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int, defStyleRes: Int) : super(
        context, attrs, defStyleAttr, defStyleRes
    )

    constructor(context: Context?) : super(context)
    constructor(context: Context?, orientation: Int, reverseLayout: Boolean) : super(
        context,
        orientation,
        reverseLayout
    )

    private var itemListener: ((Int) -> Unit)? = null

    // to not spam updates
    private var lastViewIndex: Int? = null

    private val mShrinkAmount = 0.15f
    private val mShrinkDistance = 0.9f

    fun updateSize(forceUpdate: Boolean = false) {
        val midpoint = width / 2f
        val d0 = 0f
        val d1 = mShrinkDistance * midpoint
        val s0 = 1f
        val s1 = 1f - mShrinkAmount

        var largestTag: Int? = null
        var largestSize = 0f
        for (i in 0 until childCount) {
            getChildAt(i)?.let { child ->
                try {
                    val childMidpoint = (getDecoratedRight(child) + getDecoratedLeft(child)) / 2f
                    val d = min(d1, abs(midpoint - childMidpoint))
                    val scale = s0 + (s1 - s0) * (d - d0) / (d1 - d0)
                    child.scaleX = scale
                    child.scaleY = scale

                    if (scale > largestSize) {
                        (child.tag as Int?)?.let { tag ->
                            largestSize = scale
                            largestTag = tag
                        }
                    }
                } catch (e : Exception) {
                    logError(e)
                }
            }
        }

        largestTag?.let { tag ->
            if (lastViewIndex != tag || forceUpdate) {
                lastViewIndex = tag
                itemListener?.invoke(tag)
            }
        }
    }

    fun setOnSizeListener(listener: (Int) -> Unit) {
        lastViewIndex = null
        itemListener = listener
    }

    fun removeOnSizeListener() {
        itemListener = null
    }

    override fun onLayoutCompleted(state: RecyclerView.State?) {
        super.onLayoutCompleted(state)
        if(waitForSnap != null) {
            this.getChildAt(snapChild ?: 1)?.let { view ->
                LinearSnapHelper().calculateDistanceToFinalSnap(this,view)?.get(0)?.let { dx ->
                    waitForSnap?.invoke(dx)
                    waitForSnap = null
                }
            }
        }
        updateSize()
    }

    private var waitForSnap : ((Int) -> Unit)? = null
    private var snapChild : Int? = null

    fun snap(snap : Int? = null, callback : (Int) -> Unit) {
        waitForSnap = callback
        snapChild = snap
    }

    override fun scrollHorizontallyBy(dx: Int, recycler: RecyclerView.Recycler, state: RecyclerView.State): Int {
        val orientation = orientation
        return if (orientation == HORIZONTAL) {
            val scrolled = super.scrollHorizontallyBy(dx, recycler, state)
            updateSize()
            scrolled
        } else {
            0
        }
    }
}


================================================
FILE: app/src/main/java/com/lagradost/cloudstream3/widget/FlowLayout.kt
================================================
package com.lagradost.cloudstream3.widget

import android.annotation.SuppressLint
import android.content.Context
import android.util.AttributeSet
import android.view.ViewGroup
import androidx.core.view.marginEnd
import com.lagradost.cloudstream3.R
import kotlin.math.max

class FlowLayout : ViewGroup {
    var itemSpacing: Int = 0

    constructor(context: Context?) : super(context)

    //@JvmOverloads
    //constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int = 0) : super(context, attrs, defStyleAttr)

    @SuppressLint("CustomViewStyleable")
    internal constructor(c: Context, attrs: AttributeSet?) : super(c, attrs) {
        val t = c.obtainStyledAttributes(attrs, R.styleable.FlowLayout_Layout)
        itemSpacing = t.getDimensionPixelSize(R.styleable.FlowLayout_Layout_itemSpacing, 0);
        t.recycle()
    }

    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {
        val realWidth = MeasureSpec.getSize(widthMeasureSpec)
        var currentHeight = 0
        var currentWidth = 0
        var currentChildHookPointx = 0
        var currentChildHookPointy = 0
        val childCount = this.childCount
        for (i in 0 until childCount) {
            val child = getChildAt(i)
            measureChild(child, widthMeasureSpec, heightMeasureSpec)
            val childWidth = child.measuredWidth
            val childHeight = child.measuredHeight

            //check if child can be placed in the current row, else go to next line
            if (currentChildHookPointx + childWidth - child.marginEnd - child.paddingEnd - itemSpacing > realWidth) {
                //new line
                currentWidth = max(currentWidth, currentChildHookPointx)

                //reset for new line
                currentChildHookPointx = 0
                currentChildHookPointy += childHeight
            }
            val nextChildHookPointx =
                currentChildHookPointx + childWidth + if (childWidth == 0) 0 else itemSpacing
            val nextChildHookPointy = currentChildHookPointy
            currentHeight = max(currentHeight, currentChildHookPointy + childHeight)
            val lp = child.layoutParams as LayoutParams
            lp.x = currentChildHookPointx
            lp.y = currentChildHookPointy
            currentChildHookPointx = nextChildHookPointx
            currentChildHookPointy = nextChildHookPointy
        }
        currentWidth = max(currentChildHookPointx, currentWidth)
        setMeasuredDimension(
            resolveSize(currentWidth, widthMeasureSpec),
            resolveSize(currentHeight, heightMeasureSpec)
        )
    }

    override fun onLayout(b: Boolean, left: Int, top: Int, right: Int, bottom: Int) {
        //call layout on children
        val childCount = this.childCount
        for (i in 0 until childCount) {
            val child = getChildAt(i)
            val lp = child.layoutParams as LayoutParams
            child.layout(lp.x, lp.y, lp.x + child.measuredWidth, lp.y + child.measuredHeight)
        }
    }

    override fun generateLayoutParams(attrs: AttributeSet): LayoutParams {
        return LayoutParams(context, attrs)
    }

    override fun generateDefaultLayoutParams(): LayoutParams {
        return LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT
        )
    }

    override fun generateLayoutParams(p: ViewGroup.LayoutParams): LayoutParams {
        return LayoutParams(p)
    }

    override fun checkLayoutParams(p: ViewGroup.LayoutParams): Boolean {
        return p is LayoutParams
    }

    class LayoutParams : MarginLayoutParams {
        var spacing = -1
        var x = 0
        var y = 0

        @SuppressLint("CustomViewStyleable")
        internal constructor(c: Context, attrs: AttributeSet?) : super(c, attrs) {
            val t = c.obtainStyledAttributes(attrs, R.styleable.FlowLayout_Layout)
            spacing = 0//t.getDimensionPixelSize(R.styleable.FlowLayout_Layout_itemSpacing, 0);
            t.recycle()
        }

        internal constructor(width: Int, height: Int) : super(width, height) {
            spacing = 0
        }

        constructor(source: MarginLayoutParams?) : super(source)
        internal constructor(source: ViewGroup.LayoutParams?) : super(source)
    }
}


================================================
FILE: app/src/main/res/anim/enter_anim.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromXScale="0.9"
            android:toXScale="1.0"
            android:fromYScale="0.9"
            android:toYScale="1.0"
            android:pivotX="50%"
            android:pivotY="50%"
    >
    </scale>
    <alpha
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromAlpha="0.0"
            android:toAlpha="1.0"/>
</set>


================================================
FILE: app/src/main/res/anim/exit_anim.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromXScale="1.0"
            android:toXScale="0.9"
            android:fromYScale="1.0"
            android:toYScale="0.9"
            android:pivotX="50%"
            android:pivotY="50%"
    >
    </scale>
    <alpha
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromAlpha="1.0"
            android:toAlpha="0.0"/>
</set>


================================================
FILE: app/src/main/res/anim/go_left.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/decelerate_interpolator"
>
    <translate
            android:fromXDelta="0%"
            android:toXDelta="-30%"
            android:duration="200"
    >
    </translate>
</set>


================================================
FILE: app/src/main/res/anim/go_right.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/decelerate_interpolator"
>
    <translate
            android:fromXDelta="0%"
            android:toXDelta="30%"
            android:duration="200"
    >
    </translate>
</set>


================================================
FILE: app/src/main/res/anim/nav_enter_anim.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromAlpha="0.0"
            android:toAlpha="1.0"/>
</set>


================================================
FILE: app/src/main/res/anim/nav_exit_anim.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromAlpha="1.0"
            android:toAlpha="0.0"/>
</set>


================================================
FILE: app/src/main/res/anim/nav_pop_enter.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromAlpha="0.0"
            android:toAlpha="1.0"/>
</set>


================================================
FILE: app/src/main/res/anim/nav_pop_exit.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromAlpha="1.0"
            android:toAlpha="0.0"/>
</set>


================================================
FILE: app/src/main/res/anim/pop_enter.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromXScale="0.9"
            android:toXScale="1.0"
            android:fromYScale="0.9"
            android:toYScale="1.0"
            android:pivotX="50%"
            android:pivotY="50%"
    >
    </scale>
    <alpha
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromAlpha="0.0"
            android:toAlpha="1.0"/>
</set>


================================================
FILE: app/src/main/res/anim/pop_exit.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromXScale="1.0"
            android:toXScale="0.9"
            android:fromYScale="1.0"
            android:toYScale="0.9"
            android:pivotX="50%"
            android:pivotY="50%"
    >
    </scale>
    <alpha
            android:interpolator="@android:anim/linear_interpolator"
            android:duration="@integer/config_navAnimTime"
            android:fromAlpha="1.0"
            android:toAlpha="0.0"/>
</set>


================================================
FILE: app/src/main/res/anim/rotate_left.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:interpolator="@android:anim/decelerate_interpolator"
>
    <rotate android:fromDegrees="0"
            android:toDegrees="-90"
            android:pivotX="50%"
            android:pivotY="50%"
            android:duration="50"
    />
    <rotate android:fromDegrees="0"
            android:toDegrees="90"
            android:startOffset="50"
            android:pivotX="50%"
            android:pivotY="50%"
            android:duration="50"
    />
    <scale android:fromXScale="1.0" android:fromYScale="0.9"
           android:toXScale="1.0" android:toYScale="0.9"
           android:pivotX="50%" android:pivotY="50%"
           android:duration="50"/>
    <scale android:fromXScale="0.9" android:fromYScale="1"
           android:toXScale="0.9" android:toYScale="1"
           android:pivotX="50%" android:pivotY="50%"
           android:duration="50" android:startOffset="50"/>
</set>


================================================
FILE: app/src/main/res/anim/rotate_right.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<set
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:interpolator="@android:anim/decelerate_interpolator"
>
    <rotate android:fromDegrees="0"
            android:toDegrees="90"
            android:pivotX="50%"
            android:pivotY="50%"
            android:duration="50"
    />
    <rotate android:fromDegrees="0"
            android:toDegrees="-90"
            android:startOffset="50"
            android:pivotX="50%"
            android:pivotY="50%"
            android:duration="50"
    />
    <scale android:fromXScale="1.0" android:fromYScale="0.9"
           android:toXScale="1.0" android:toYScale="0.9"
           android:pivotX="50%" android:pivotY="50%"
           android:duration="50"/>
    <scale android:fromXScale="0.9" android:fromYScale="1"
           android:toXScale="0.9" android:toYScale="1"
           android:pivotX="50%" android:pivotY="50%"
           android:duration="50" android:startOffset="50"/>
</set>


================================================
FILE: app/src/main/res/color/check_selection_color.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_activated="true" android:color="?attr/textColor"/>
    <item android:color="@color/transparent"/>
</selector>


================================================
FILE: app/src/main/res/color/item_select_color.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:color="?attr/colorPrimary" android:state_checked="true"/>
    <item android:color="?attr/grayTextColor" android:state_checked="false"/>
</selector>


================================================
FILE: app/src/main/res/color/player_button_tv.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:color="#FFFFFF"/>
    <item android:color="#33FFFFFF"/>
</selector>


================================================
FILE: app/src/main/res/color/player_on_button_tv.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:color="@color/black"/>
    <item android:color="@color/white"/>
</selector>


================================================
FILE: app/src/main/res/color/tag_stroke_color.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:color="?attr/colorPrimary" android:state_checked="true"/>
  <item android:color="?attr/colorPrimary" android:state_focused="true"/>
  <item android:alpha="0.12" android:color="?attr/colorOnSurface" android:state_checked="false"/>
</selector>


================================================
FILE: app/src/main/res/color/text_selection_color.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_activated="true" android:color="?attr/textColor"/>
    <item android:color="?attr/grayTextColor"/>
</selector>


================================================
FILE: app/src/main/res/color/toggle_button.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:color="?attr/colorPrimaryDark"/>
    <item android:color="@color/transparent"/>
</selector>



================================================
FILE: app/src/main/res/color/toggle_button_outline.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:color="?attr/colorPrimary"/>
    <item android:color="?attr/iconColor"/>
</selector>


================================================
FILE: app/src/main/res/color/toggle_button_text.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:color="@color/white"/>
    <item android:color="?attr/textColor"/>
</selector>


================================================
FILE: app/src/main/res/color/toggle_selector.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true" android:color="?attr/colorControlActivated"/>
    <item android:color="?attr/grayTextColor"/>
</selector>


================================================
FILE: app/src/main/res/drawable/background_shadow.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
            android:angle="-90"
            android:startColor="@color/transparent"
            android:endColor="?attr/primaryBlackBackground"/>
</shape>


================================================
FILE: app/src/main/res/drawable/baseline_description_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/white">
  <path
      android:fillColor="@android:color/white"
      android:pathData="M14,2L6,2c-1.1,0 -1.99,0.9 -1.99,2L4,20c0,1.1 0.89,2 1.99,2L18,22c1.1,0 2,-0.9 2,-2L20,8l-6,-6zM16,18L8,18v-2h8v2zM16,14L8,14v-2h8v2zM13,9L13,3.5L18.5,9L13,9z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/baseline_grid_view_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="24"
        android:viewportHeight="24"
        app:tint="?attr/white">
  <path
      android:fillColor="@android:color/white"
      android:pathData="M3,3v8h8L11,3L3,3zM9,9L5,9L5,5h4v4zM3,13v8h8v-8L3,13zM9,19L5,19v-4h4v4zM13,3v8h8L21,3h-8zM19,9h-4L15,5h4v4zM13,13v8h8v-8h-8zM19,19h-4v-4h4v4z"
      android:fillType="evenOdd"/>
</vector>



================================================
FILE: app/src/main/res/drawable/baseline_list_alt_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorControlNormal"
    android:autoMirrored="true">
  <path
      android:fillColor="@android:color/white"
      android:pathData="M19,5v14L5,19L5,5h14m1.1,-2L3.9,3c-0.5,0 -0.9,0.4 -0.9,0.9v16.2c0,0.4 0.4,0.9 0.9,0.9h16.2c0.4,0 0.9,-0.5 0.9,-0.9L21,3.9c0,-0.5 -0.5,-0.9 -0.9,-0.9zM11,7h6v2h-6L11,7zM11,11h6v2h-6v-2zM11,15h6v2h-6zM7,7h2v2L7,9zM7,11h2v2L7,13zM7,15h2v2L7,17z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/baseline_remove_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorControlNormal">
  <path
      android:fillColor="@android:color/white"
      android:pathData="M19,13H5v-2h14v2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/baseline_restore_page_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24" android:tint="?attr/white">
  <path
      android:fillColor="@android:color/white"
      android:pathData="M14,2L6,2c-1.1,0 -1.99,0.9 -1.99,2L4,20c0,1.1 0.89,2 1.99,2L18,22c1.1,0 2,-0.9 2,-2L20,8l-6,-6zM12,18c-2.05,0 -3.81,-1.24 -4.58,-3h1.71c0.63,0.9 1.68,1.5 2.87,1.5 1.93,0 3.5,-1.57 3.5,-3.5S13.93,9.5 12,9.5c-1.35,0 -2.52,0.78 -3.1,1.9l1.6,1.6h-4L6.5,9l1.3,1.3C8.69,8.92 10.23,8 12,8c2.76,0 5,2.24 5,5s-2.24,5 -5,5z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/baseline_save_as_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/white">
  <path
      android:fillColor="@android:color/white"
      android:pathData="M21,12.4V7l-4,-4H5C3.89,3 3,3.9 3,5v14c0,1.1 0.89,2 2,2h7.4L21,12.4zM15,15c0,1.66 -1.34,3 -3,3s-3,-1.34 -3,-3s1.34,-3 3,-3S15,13.34 15,15zM6,6h9v4H6V6zM19.99,16.25l1.77,1.77L16.77,23H15v-1.77L19.99,16.25zM23.25,16.51l-0.85,0.85l-1.77,-1.77l0.85,-0.85c0.2,-0.2 0.51,-0.2 0.71,0l1.06,1.06C23.45,16 23.45,16.32 23.25,16.51z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/baseline_sync_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/white">
  <path
      android:fillColor="@android:color/white"
      android:pathData="M12,4L12,1L8,5l4,4L12,6c3.31,0 6,2.69 6,6 0,1.01 -0.25,1.97 -0.7,2.8l1.46,1.46C19.54,15.03 20,13.57 20,12c0,-4.42 -3.58,-8 -8,-8zM12,18c-3.31,0 -6,-2.69 -6,-6 0,-1.01 0.25,-1.97 0.7,-2.8L5.24,7.74C4.46,8.97 4,10.43 4,12c0,4.42 3.58,8 8,8v3l4,-4 -4,-4v3z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/benene.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="36dp"
    android:height="36dp"
    android:viewportWidth="36"
    android:viewportHeight="36">
    <path
        android:name="path"
        android:pathData="M 28 2 C 30.684 0.658 33 6 31 15 C 29.894 19.977 26 24 22 27 C 18 30 11 26 15 22 C 19 18 23 15 25 9 C 26.304 5.088 26 3 28 2 Z"
        android:fillColor="#ffe8b6"
        android:strokeWidth="1"/>
    <path
        android:name="path_1"
        android:pathData="M 31 8 C 31 11 30 17 27 21 C 24 25 20 26 23 22 C 26 18 28 15 29 11 C 30 7 31 4 31 8 Z"
        android:fillColor="#ffd983"
        android:strokeWidth="1"/>
    <path
        android:name="path_2"
        android:pathData="M 22 20 C 21.704 20.592 23.167 16.167 19 14 C 17.016 12.968 9 15 15 15 C 18 15 19 17 17 19 C 16.709 19.292 16.511 19.603 16.378 19.912 C 15.961 20.258 15.505 20.621 15 21 C 12.737 22.697 9.16 25.227 5 28 C 2 30 1 31 1 32 C 1 35 10 35 15 33 C 20 31 25 26 25 26 L 29 22 C 26 18 22 20 22 20 Z"
        android:fillColor="#ffcc4d"
        android:strokeWidth="1"/>
    <path
        android:name="path_3"
        android:pathData="M 22 20 C 22 20 23.792 15.271 19 13 C 14.958 11.084 11 12 8 14 C 5 16 6 18 5 19 C 4 20 6 21 8 19 C 10 17 16.316 14.105 19 15 C 22 16 21 17.999 22 20 Z"
        android:fillColor="#ffe8b6"
        android:strokeWidth="1"/>
    <path
        android:name="path_4"
        android:pathData="M 26 35 L 22 35 C 20 35 19 36 18 36 C 17 36 16 34 18 34 C 20 34 22 34 23 33 C 24 32 28 35 26 35 Z"
        android:fillColor="#a6d388"
        android:strokeWidth="1"/>
    <path
        android:name="path_5"
        android:pathData="M 18 34 C 17.735 34 17.48 34.105 17.293 34.293 C 17.105 34.48 17 34.735 17 35 C 17 35.265 17.105 35.52 17.293 35.707 C 17.48 35.895 17.735 36 18 36 C 18.265 36 18.52 35.895 18.707 35.707 C 18.895 35.52 19 35.265 19 35 C 19 34.735 18.895 34.48 18.707 34.293 C 18.52 34.105 18.265 34 18 34 Z"
        android:fillColor="#3e721d"
        android:strokeWidth="1"/>
    <path
        android:name="path_6"
        android:pathData="M 32.208 28 C 32.208 28 28 35 26 35 L 22 35 C 20 35 22 34 23 33 C 24 32 28 33 28 27 C 28 24 32.208 28 32.208 28 Z"
        android:fillColor="#ffcc4d"
        android:strokeWidth="1"/>
    <path
        android:name="path_7"
        android:pathData="M 26 19 C 29 19 34 22 33 28 C 32 34 28 35 26 35 L 24 35 C 22 35 23 34 24 33 C 25 32 28 33 28 27 C 28 24 24 20 22 20 C 22 20 24 19 26 19 Z"
        android:fillColor="#ffe8b6"
        android:strokeWidth="1"/>
    <path
        android:name="path_8"
        android:pathData="M 17 21 C 20 21 22 22 20 24 C 18.419 25.581 14 29 10 30 C 6 31 2 31 5 29 C 8 27 14.764 21 17 21 Z"
        android:fillColor="#ffd983"
        android:strokeWidth="1"/>
    <path
        android:name="path_9"
        android:pathData="M 2 31 C 3 31 3 31 3 31.667 C 3 32.333 3 33 2 33 C 1 33 1 31.667 1 31.667 C 1 31.667 1 31 2 31 Z"
        android:fillColor="#c1694f"
        android:strokeWidth="1"/>
</vector>



================================================
FILE: app/src/main/res/drawable/circle_shape.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="ring"
        android:innerRadiusRatio="2.5"
        android:thickness="2dp"
        android:useLevel="false">

    <solid android:color="?attr/white" />

</shape>


================================================
FILE: app/src/main/res/drawable/circular_progress_bar.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
        android:fromDegrees="270"
        android:toDegrees="270">
    <shape
            android:innerRadiusRatio="2.5"
            android:shape="ring"
            android:thickness="2dp"
            android:useLevel="true"><!-- this line fixes the issue for lollipop api 21 -->

        <gradient
                android:angle="0"
                android:endColor="?attr/colorPrimary"
                android:startColor="?attr/colorPrimary"
                android:type="sweep"
                android:useLevel="false" />
    </shape>
</rotate>


================================================
FILE: app/src/main/res/drawable/circular_progress_bar_filled.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
        android:fromDegrees="270"
        android:toDegrees="270">
    <shape android:shape="oval" />
    <shape
            android:innerRadiusRatio="100"
            android:shape="ring"
            android:thickness="11dp"
            android:useLevel="true"><!-- this line fixes the issue for lollipop api 21 -->

        <gradient
                android:angle="0"
                android:endColor="?attr/white"
                android:startColor="?attr/white"
                android:type="sweep"
                android:useLevel="false" />
    </shape>
</rotate>


================================================
FILE: app/src/main/res/drawable/cloud_2.xml
================================================
<vector xmlns:tools="http://schemas.android.com/tools" android:name="vector"
        android:width="200dp" android:height="200dp" android:viewportWidth="283"
        android:viewportHeight="283" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:name="path"
          android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
          android:fillColor="#2309db" android:strokeWidth="1"
          tools:ignore="VectorPath"/>
    <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
          android:fillColor="#2149d8" android:strokeWidth="1"/>
    <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
          android:fillColor="#5c89f7" android:strokeWidth="1"/>
</vector>


================================================
FILE: app/src/main/res/drawable/cloud_2_gradient.xml
================================================
<vector xmlns:tools="http://schemas.android.com/tools" xmlns:aapt="http://schemas.android.com/aapt"
        android:name="vector" android:width="200dp" android:height="200dp" android:viewportWidth="283"
        android:viewportHeight="283" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:name="path"
          android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
          android:strokeWidth="1"
          tools:ignore="VectorPath">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="0"
                    android:startX="200"
                    android:endY="0"
                    android:endX="300"
                    android:type="linear">
                <item android:offset="0" android:color="#2309db"/>
                <item android:offset="1" android:color="#1B08A1"/>
            </gradient>
        </aapt:attr>
    </path>

    <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
          android:strokeWidth="1">
    <aapt:attr name="android:fillColor">
        <gradient
                android:startY="0"
                android:startX="200"
                android:endY="0"
                android:endX="000"
                android:type="linear">
            <item android:offset="0" android:color="#254cdb"/>
            <item android:offset="1" android:color="#1138DD"/>
        </gradient>
    </aapt:attr>
    </path>

    <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
           android:strokeWidth="1">
    <aapt:attr name="android:fillColor">
        <gradient
                android:startY="0"
                android:startX="150"
                android:endY="0"
                android:endX="000"
                android:type="linear">
            <item android:offset="0" android:color="#407EF1"/>
            <item android:offset="1" android:color="#428CC5"/>
        </gradient>
    </aapt:attr>
</path>
</vector>


================================================
FILE: app/src/main/res/drawable/cloud_2_gradient_beta.xml
================================================
<vector xmlns:tools="http://schemas.android.com/tools" xmlns:aapt="http://schemas.android.com/aapt"
        android:name="vector" android:width="200dp" android:height="200dp" android:viewportWidth="283"
        android:viewportHeight="283" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:name="path"
          android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
          android:strokeWidth="1"
          tools:ignore="VectorPath">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="0"
                    android:startX="200"
                    android:endY="0"
                    android:endX="300"
                    android:type="linear">
                <item android:offset="0" android:color="#DB0909"/>
                <item android:offset="1" android:color="#A10808"/>
            </gradient>
        </aapt:attr>
    </path>

    <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
          android:strokeWidth="1">
    <aapt:attr name="android:fillColor">
        <gradient
                android:startY="0"
                android:startX="200"
                android:endY="0"
                android:endX="000"
                android:type="linear">
            <item android:offset="0" android:color="#E23A3A"/>
            <item android:offset="1" android:color="#DD1130"/>
        </gradient>
    </aapt:attr>
    </path>

    <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
           android:strokeWidth="1">
    <aapt:attr name="android:fillColor">
        <gradient
                android:startY="0"
                android:startX="150"
                android:endY="0"
                android:endX="000"
                android:type="linear">
            <item android:offset="0" android:color="#E44D4D"/>
            <item android:offset="1" android:color="#E76161"/>
        </gradient>
    </aapt:attr>
</path>
</vector>


================================================
FILE: app/src/main/res/drawable/cloud_2_gradient_beta_old.xml
================================================
<vector xmlns:tools="http://schemas.android.com/tools" xmlns:aapt="http://schemas.android.com/aapt"
        android:name="vector" android:width="200dp" android:height="200dp" android:viewportWidth="283"
        android:viewportHeight="283" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:name="path"
          android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
          android:strokeWidth="1"
          tools:ignore="VectorPath">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="0"
                    android:startX="200"
                    android:endY="0"
                    android:endX="300"
                    android:type="linear">
                <item android:offset="0" android:color="#DB9509"/>
                <item android:offset="1" android:color="#A17B08"/>
            </gradient>
        </aapt:attr>
    </path>

    <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
          android:strokeWidth="1">
    <aapt:attr name="android:fillColor">
        <gradient
                android:startY="0"
                android:startX="200"
                android:endY="0"
                android:endX="000"
                android:type="linear">
            <item android:offset="0" android:color="#DBA725"/>
            <item android:offset="1" android:color="#DDB111"/>
        </gradient>
    </aapt:attr>
    </path>

    <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
           android:strokeWidth="1">
    <aapt:attr name="android:fillColor">
        <gradient
                android:startY="0"
                android:startX="150"
                android:endY="0"
                android:endX="000"
                android:type="linear">
            <item android:offset="0" android:color="#F1C540"/>
            <item android:offset="1" android:color="#C5A442"/>
        </gradient>
    </aapt:attr>
</path>
</vector>


================================================
FILE: app/src/main/res/drawable/cloud_2_gradient_debug.xml
================================================
<vector xmlns:tools="http://schemas.android.com/tools" xmlns:aapt="http://schemas.android.com/aapt"
        android:name="vector" android:width="200dp" android:height="200dp" android:viewportWidth="283"
        android:viewportHeight="283" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:name="path"
          android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
          android:strokeWidth="1"
          tools:ignore="VectorPath">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="0"
                    android:startX="200"
                    android:endY="0"
                    android:endX="300"
                    android:type="linear">
                <item android:offset="0" android:color="#3FAA11"/>
                <item android:offset="1" android:color="#39A11D"/>
            </gradient>
        </aapt:attr>
    </path>

    <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
          android:strokeWidth="1">
    <aapt:attr name="android:fillColor">
        <gradient
                android:startY="0"
                android:startX="200"
                android:endY="0"
                android:endX="000"
                android:type="linear">
            <item android:offset="0" android:color="#37DB25"/>
            <item android:offset="1" android:color="#11DD6D"/>
        </gradient>
    </aapt:attr>
    </path>

    <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
           android:strokeWidth="1">
    <aapt:attr name="android:fillColor">
        <gradient
                android:startY="0"
                android:startX="150"
                android:endY="0"
                android:endX="000"
                android:type="linear">
            <item android:offset="0" android:color="#40F15D"/>
            <item android:offset="1" android:color="#42C54F"/>
        </gradient>
    </aapt:attr>
</path>
</vector>


================================================
FILE: app/src/main/res/drawable/custom_rating_bar.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/background"
            android:drawable="@drawable/rating_empty"/>

    <item android:id="@android:id/secondaryProgress"
            android:drawable="@drawable/rating_empty"
            />
    <item android:id="@android:id/progress"
            android:drawable="@drawable/rating_fill"
            />

</layer-list>


================================================
FILE: app/src/main/res/drawable/default_cover.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="324dp"
    android:height="511dp"
    android:viewportWidth="324"
    android:viewportHeight="511">
    <path
        android:name="path"
        android:pathData="M 0.5 0.5 L 323.65 0.5 L 323.65 510.74 L 0.5 510.74 Z"
        android:fillColor="#878787"
        android:strokeColor="#231f20"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_1"
        android:pathData="M 211.94 176.85 L 211.94 189.1 C 211.94 189.887 211.631 190.643 211.079 191.204 C 210.527 191.765 209.777 192.087 208.99 192.1 L 196.73 192.1 C 195.943 192.087 195.193 191.765 194.641 191.204 C 194.089 190.643 193.78 189.887 193.78 189.1 L 193.78 176.85 C 193.78 176.323 193.641 175.806 193.378 175.35 C 193.115 174.894 192.736 174.515 192.28 174.252 C 191.824 173.989 191.307 173.85 190.78 173.85 L 124.09 173.85 C 123.295 173.85 122.531 174.166 121.969 174.729 C 121.406 175.291 121.09 176.055 121.09 176.85 L 121.09 189.1 C 121.09 189.887 120.781 190.643 120.229 191.204 C 119.677 191.765 118.927 192.087 118.14 192.1 L 105.93 192.1 C 105.135 192.1 104.371 191.784 103.809 191.221 C 103.246 190.659 102.93 189.895 102.93 189.1 L 102.93 176.85 C 102.93 176.055 102.614 175.291 102.051 174.729 C 101.489 174.166 100.725 173.85 99.93 173.85 L 87.77 173.85 C 86.975 173.85 86.211 174.166 85.649 174.729 C 85.086 175.291 84.77 176.055 84.77 176.85 L 84.77 334.39 C 84.783 335.177 85.105 335.927 85.666 336.479 C 86.227 337.031 86.983 337.34 87.77 337.34 L 100.02 337.34 C 100.807 337.34 101.563 337.031 102.124 336.479 C 102.685 335.927 103.007 335.177 103.02 334.39 L 103.02 322.14 C 103.02 321.345 103.336 320.581 103.899 320.019 C 104.461 319.456 105.225 319.14 106.02 319.14 L 118.27 319.14 C 119.057 319.153 119.807 319.475 120.359 320.036 C 120.911 320.597 121.22 321.353 121.22 322.14 L 121.22 334.39 C 121.233 335.177 121.555 335.927 122.116 336.479 C 122.677 337.031 123.433 337.34 124.22 337.34 L 190.95 337.34 C 191.737 337.34 192.493 337.031 193.054 336.479 C 193.615 335.927 193.937 335.177 193.95 334.39 L 193.95 322.14 C 193.95 321.353 194.259 320.597 194.811 320.036 C 195.363 319.475 196.113 319.153 196.9 319.14 L 209.16 319.14 C 209.947 319.153 210.697 319.475 211.249 320.036 C 211.801 320.597 212.11 321.353 212.11 322.14 L 212.11 334.39 C 212.123 335.177 212.445 335.927 213.006 336.479 C 213.567 337.031 214.323 337.34 215.11 337.34 L 227.36 337.34 C 228.138 337.327 228.881 337.012 229.432 336.462 C 229.982 335.911 230.297 335.168 230.31 334.39 L 230.31 176.85 C 230.31 176.063 230.001 175.307 229.449 174.746 C 228.897 174.185 228.147 173.863 227.36 173.85 L 214.9 173.85 C 214.112 173.861 213.358 174.181 212.804 174.743 C 212.251 175.304 211.94 176.062 211.94 176.85 Z M 118.18 301.02 L 105.93 301.02 C 105.143 301.02 104.387 300.711 103.826 300.159 C 103.265 299.607 102.943 298.857 102.93 298.07 L 102.93 285.82 C 102.93 285.025 103.246 284.261 103.809 283.699 C 104.371 283.136 105.135 282.82 105.93 282.82 L 118.18 282.82 C 118.967 282.833 119.717 283.155 120.269 283.716 C 120.821 284.277 121.13 285.033 121.13 285.82 L 121.13 298.07 C 121.117 298.848 120.802 299.591 120.252 300.142 C 119.701 300.692 118.958 301.007 118.18 301.02 Z M 118.18 264.7 L 105.93 264.7 C 105.135 264.7 104.371 264.384 103.809 263.821 C 103.246 263.259 102.93 262.495 102.93 261.7 L 102.93 249.5 C 102.93 248.705 103.246 247.941 103.809 247.379 C 104.371 246.816 105.135 246.5 105.93 246.5 L 118.18 246.5 C 118.967 246.513 119.717 246.835 120.269 247.396 C 120.821 247.957 121.13 248.713 121.13 249.5 L 121.13 261.75 C 121.117 262.528 120.802 263.271 120.252 263.822 C 119.701 264.372 118.958 264.687 118.18 264.7 Z M 118.18 228.38 L 105.93 228.38 C 105.135 228.38 104.371 228.064 103.809 227.501 C 103.246 226.939 102.93 226.175 102.93 225.38 L 102.93 213.17 C 102.93 212.375 103.246 211.611 103.809 211.049 C 104.371 210.486 105.135 210.17 105.93 210.17 L 118.18 210.17 C 118.967 210.183 119.717 210.505 120.269 211.066 C 120.821 211.627 121.13 212.383 121.13 213.17 L 121.13 225.42 C 121.12 226.2 120.806 226.946 120.255 227.498 C 119.705 228.051 118.96 228.367 118.18 228.38 Z M 208.99 301.02 L 196.73 301.02 C 195.952 301.007 195.209 300.692 194.658 300.142 C 194.108 299.591 193.793 298.848 193.78 298.07 L 193.78 285.82 C 193.78 285.033 194.089 284.277 194.641 283.716 C 195.193 283.155 195.943 282.833 196.73 282.82 L 208.99 282.82 C 209.777 282.833 210.527 283.155 211.079 283.716 C 211.631 284.277 211.94 285.033 211.94 285.82 L 211.94 298.07 C 211.927 298.848 211.612 299.591 211.062 300.142 C 210.511 300.692 209.768 301.007 208.99 301.02 Z M 208.99 264.7 L 196.73 264.7 C 195.943 264.687 195.193 264.365 194.641 263.804 C 194.089 263.243 193.78 262.487 193.78 261.7 L 193.78 249.5 C 193.78 248.713 194.089 247.957 194.641 247.396 C 195.193 246.835 195.943 246.513 196.73 246.5 L 208.99 246.5 C 209.777 246.513 210.527 246.835 211.079 247.396 C 211.631 247.957 211.94 248.713 211.94 249.5 L 211.94 261.75 C 211.927 262.528 211.612 263.271 211.062 263.822 C 210.511 264.372 209.768 264.687 208.99 264.7 Z M 208.99 228.38 L 196.73 228.38 C 195.943 228.367 195.193 228.045 194.641 227.484 C 194.089 226.923 193.78 226.167 193.78 225.38 L 193.78 213.17 C 193.78 212.383 194.089 211.627 194.641 211.066 C 195.193 210.505 195.943 210.183 196.73 210.17 L 208.99 210.17 C 209.777 210.183 210.527 210.505 211.079 211.066 C 211.631 211.627 211.94 212.383 211.94 213.17 L 211.94 225.42 C 211.93 226.2 211.616 226.946 211.065 227.498 C 210.515 228.051 209.77 228.367 208.99 228.38 Z"
        android:fillColor="#dbd0d0"
        android:strokeWidth="1"/>
</vector>



================================================
FILE: app/src/main/res/drawable/dialog__window_background.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android">
    <shape android:shape="rectangle">
        <corners android:radius="10dp" />
        <solid android:color="?attr/primaryBlackBackground" />
    </shape>
</inset>


================================================
FILE: app/src/main/res/drawable/dub_bg_color.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@color/dubColorBg"/>
    <corners android:radius="@dimen/rounded_image_radius"/>
  <!--  <stroke android:color="@color/dubColor" android:width="2dp"/>-->
</shape>


================================================
FILE: app/src/main/res/drawable/go_back_30.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" android:name="vector"
    android:width="21.378dp"
    android:height="24dp"
    android:viewportWidth="636"
    android:viewportHeight="714">
    <path
        android:name="path"
        android:pathData="M 318.05 106.07 C 478.51 106.07 608.6 236.16 608.6 396.62 C 608.6 557.08 478.51 687.17 318.05 687.17 C 157.59 687.17 27.5 557.09 27.5 396.62 C 27.427 349.18 39.026 302.442 61.27 260.54 M 385.11 197.86 L 279.12 91.87 M 385.11 24.61 L 279.12 130.6 M 245.77 192.7 L 139.79 86.71 M 245.77 19.45 L 139.79 125.43"
        android:strokeColor="#ffffff"
        android:strokeWidth="55"
        android:strokeMiterLimit="10"/>
    <path
            android:name="path_1"
            android:pathData="M 138.13 485.27 L 158.46 457.96 C 172.78 472.21 190.74 483.78 214.41 483.78 C 240.23 483.78 258.03 470.43 258.03 448.17 C 258.03 423.83 242.38 408.11 188.73 408.11 L 188.73 376.94 C 234.88 376.94 250.02 360.94 250.02 339.25 C 250.02 319.52 236.89 307.65 215.15 307.65 C 196.9 307.65 182.21 316.4 167.96 329.9 L 145.85 303.49 C 165.85 285.68 188.59 273.67 216.93 273.67 C 262.04 273.67 293.05 296.22 293.05 336.06 C 293.05 362.4 277.47 380.21 251.95 390.3 L 251.95 391.78 C 279.85 399.05 301.06 419.09 301.06 450.54 C 301.06 493.54 263.52 518.66 218.12 518.66 C 180.05 518.66 154.75 503.96 138.13 485.27 Z M 334.45 395.2 C 334.45 315.44 365.61 273.67 414.58 273.67 C 463.55 273.67 494.71 315.67 494.71 395.2 C 494.71 474.95 463.55 518.66 414.58 518.66 C 365.61 518.66 334.45 474.95 334.45 395.2 Z M 453.9 395.2 C 453.9 328.42 437.43 307.2 414.58 307.2 C 391.73 307.2 375.25 328.42 375.25 395.2 C 375.25 461.98 391.73 485.12 414.58 485.12 C 437.43 485.12 453.9 461.97 453.9 395.2 Z"
            android:fillColor="#ffffff"
            android:strokeWidth="1" tools:ignore="VectorPath"/>
</vector>



================================================
FILE: app/src/main/res/drawable/go_forward_30.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" android:name="vector"
    android:width="21.378dp"
    android:height="24dp"
    android:viewportWidth="636"
    android:viewportHeight="714">
    <path
        android:name="path"
        android:pathData="M 318.05 106.07 C 157.58 106.07 27.5 236.16 27.5 396.62 C 27.5 557.08 157.58 687.17 318.05 687.17 C 478.52 687.17 608.6 557.09 608.6 396.62 C 608.675 349.182 597.083 302.445 574.85 260.54 M 250.99 197.86 L 356.98 91.87 M 250.99 24.61 L 356.98 130.6 M 390.33 192.7 L 496.32 86.71 M 390.33 19.45 L 496.32 125.43"
        android:strokeColor="#ffffff"
        android:strokeWidth="55"
        android:strokeMiterLimit="10"/>
    <path
            android:name="path_1"
            android:pathData="M 138.13 485.27 L 158.46 457.96 C 172.78 472.21 190.74 483.78 214.41 483.78 C 240.23 483.78 258.03 470.43 258.03 448.17 C 258.03 423.83 242.38 408.11 188.73 408.11 L 188.73 376.94 C 234.88 376.94 250.02 360.94 250.02 339.25 C 250.02 319.52 236.89 307.65 215.15 307.65 C 196.9 307.65 182.21 316.4 167.96 329.9 L 145.85 303.49 C 165.85 285.68 188.59 273.67 216.93 273.67 C 262.04 273.67 293.05 296.22 293.05 336.06 C 293.05 362.4 277.47 380.21 251.95 390.3 L 251.95 391.78 C 279.85 399.05 301.06 419.09 301.06 450.54 C 301.06 493.54 263.52 518.66 218.12 518.66 C 180.05 518.66 154.75 503.96 138.13 485.27 Z M 334.45 395.2 C 334.45 315.44 365.61 273.67 414.58 273.67 C 463.55 273.67 494.71 315.67 494.71 395.2 C 494.71 474.95 463.55 518.66 414.58 518.66 C 365.61 518.66 334.45 474.95 334.45 395.2 Z M 453.9 395.2 C 453.9 328.42 437.43 307.2 414.58 307.2 C 391.73 307.2 375.25 328.42 375.25 395.2 C 375.25 461.98 391.73 485.12 414.58 485.12 C 437.43 485.12 453.9 461.97 453.9 395.2 Z"
            android:fillColor="#ffffff"
            android:strokeWidth="1" tools:ignore="VectorPath"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_anilist_icon.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="20dp"
        android:height="20dp"
        android:viewportWidth="172"
        android:viewportHeight="172"
        android:tint="?attr/white"
>
    <path
            android:pathData="M111.322,111.157L111.322,41.029C111.322,37.01 109.105,34.792 105.086,34.792L91.365,34.792C87.346,34.792 85.128,37.01 85.128,41.029C85.128,41.029 85.128,56.337 85.128,74.333C85.128,75.271 94.165,79.626 94.401,80.547C101.286,107.449 95.897,128.98 89.37,129.985C100.042,130.513 101.216,135.644 93.267,132.138C94.483,117.784 99.228,117.812 112.869,131.61C112.986,131.729 115.666,137.351 115.833,137.351C131.17,137.351 148.05,137.351 148.05,137.351C152.069,137.351 154.286,135.134 154.286,131.115L154.286,117.394C154.286,113.375 152.069,111.157 148.05,111.157L111.322,111.157Z"
            android:fillColor="@color/black"
            android:fillType="evenOdd"/>
    <path
            android:pathData="M54.365,34.792L18.331,137.351L46.327,137.351L52.425,119.611L82.915,119.611L88.875,137.351L116.732,137.351L80.836,34.792L54.365,34.792ZM58.8,96.882L67.531,68.47L77.094,96.882L58.8,96.882Z"
            android:fillColor="@color/white"
            android:fillType="evenOdd"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_banner_foreground.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="320dp"
    android:height="180dp"
    android:viewportWidth="320"
    android:viewportHeight="180"
    android:name="vector">
  <group android:scaleX="0.6666667"
      android:scaleY="0.6666667"
      android:translateX="53.333332"
      android:translateY="30">
    <group android:scaleX="0.13764706"
        android:scaleY="0.13764706"
        android:translateX="15.1"
        android:translateY="31.5">
        <group android:name="group_6">
            <path
                android:name="path_2"
                android:pathData="M 698.92 450.33 C 697.92 440.99 690.27 432.74 679.92 430.25 L 653.67 430.75 C 655.17 407.75 636.67 386.63 618.79 384 C 611.804 381.871 604.367 381.698 597.29 383.5 C 597.91 379.77 602.74 347.16 578.79 322 C 558.72 300.92 532.54 299.13 517.67 299.31 L 500.37 298.92 C 494.76 293.4 460.65 262.47 412.62 266.67 C 382.23 269.32 354.96 277.67 334.79 302.67 C 333.11 304.74 327.6 311.81 321.17 320.81 C 318.82 323.81 316.91 327.43 314.79 330.5 C 314.63 330.74 288.79 326.44 272.79 331 C 247.52 338.2 224.79 358.54 217.29 385.5 C 215.44 392.18 209.08 415.09 219.79 435 C 222.101 439.202 223.081 444.009 222.6 448.78 C 219.48 450.41 205.02 450.94 182.29 450 C 164.43 449.27 149.83 463.6 149.79 480 C 149.74 497.17 165.23 510.58 184.29 510 C 205.93 510.23 605.96 510.67 637.04 510.56 C 650.12 510.56 656.79 499.17 656.79 499.17 C 661.24 493.35 661.09 486.09 661.04 481.5 L 661.04 477 L 664.79 477 L 675.96 476.33 C 690.35 474.78 700.21 462.36 698.92 450.33 Z M 407.54 456 L 407.54 349.25 L 483.75 402.63 Z"
                android:fillColor="#ffffff"
                android:strokeWidth="1"/>
        </group>
    </group>

    <group android:scaleX="0.17275657"
        android:scaleY="0.17275657"
        android:translateX="128"
        android:translateY="74.202896">
      <group android:translateY="146.25">
        <path android:pathData="M88,-5.25Q75.984375,2,57.984375,2Q35.0625,2,21.03125,-13.171875Q7,-28.34375,7,-52.421875Q7,-77.6875,22.390625,-94.34375Q37.796875,-111,62.40625,-111Q77.875,-111,88,-106.75L88,-93.75Q76.328125,-100,62.28125,-100Q43,-100,31.5,-86.890625Q20,-73.78125,20,-53.203125Q20,-33.671875,30.765625,-21.328125Q41.53125,-9,59.625,-9Q75.984375,-9,88,-16.25L88,-5.25Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M109,0L109,-115L121,-115L121,0L109,0Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M140,-38.015625Q140,-57.546875,150.71875,-68.765625Q161.4375,-80,179.89062,-80Q197.26562,-80,207.125,-69.15625Q217,-58.328125,217,-39.21875Q217,-20.65625,206.3125,-9.328125Q195.625,2,178.03125,2Q161.01562,2,150.5,-8.90625Q140,-19.8125,140,-38.015625ZM152,-38.5Q152,-24.59375,159.32812,-16.296875Q166.65625,-8,178.89062,-8Q191.34375,-8,198.17188,-16.078125Q205,-24.171875,205,-38.78125Q205,-53.75,198.23438,-61.875Q191.48438,-70,178.89062,-70Q166.59375,-70,159.29688,-61.59375Q152,-53.1875,152,-38.5Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M299,0L287,0L287,-12.15625L286.71875,-12.15625Q279.0625,2,262.79688,2Q235,2,235,-31.28125L235,-78L247,-78L247,-33.25Q247,-8,265.89062,-8Q275.1875,-8,281.09375,-15Q287,-22,287,-32.953125L287,-78L299,-78L299,0Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M390,0L378,0L378,-13.359375L377.71875,-13.359375Q369.125,2,351.01562,2Q336.34375,2,327.67188,-8.578125Q319,-19.171875,319,-37.15625Q319,-56.421875,328.71875,-68.203125Q338.4375,-80,354.375,-80Q370.3125,-80,377.71875,-66.875L378,-66.875L378,-115L390,-115L390,0ZM378,-47.015625Q378,-56.65625,371.54688,-63.328125Q365.09375,-70,355.75,-70Q344.17188,-70,337.57812,-61.3125Q331,-52.625,331,-37.796875Q331,-24.25,337.3125,-16.125Q343.625,-8,354.29688,-8Q364.54688,-8,371.26562,-15.625Q378,-23.25,378,-35.09375L378,-47.015625Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M413,-19.25Q417.5,-14.875,425.96875,-11.9375Q434.4375,-9,441.625,-9Q465,-9,465,-26.265625Q465,-31.09375,462.5625,-34.875Q460.14062,-38.671875,456.01562,-41.4375Q451.89062,-44.21875,439.76562,-50.53125Q422.29688,-59.671875,417.64062,-66.46875Q413,-73.28125,413,-81.859375Q413,-95.125,423.5625,-103.0625Q434.14062,-111,450.125,-111Q466.25,-111,473,-106.75L473,-92.75Q463.65625,-100,448.875,-100Q438.78125,-100,432.39062,-95.53125Q426,-91.0625,426,-82.96875Q426,-77.96875,428.25,-74.28125Q430.51562,-70.59375,434.39062,-67.875Q438.28125,-65.15625,449.53125,-59.46875Q465.35938,-51.53125,471.67188,-43.96875Q478,-36.421875,478,-27.078125Q478,-13.171875,467.9375,-5.578125Q457.875,2,439.76562,2Q434.25,2,425.40625,-0.109375Q416.5625,-2.234375,413,-5.25L413,-19.25Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M533,-1.25Q528.7656,2,521.8125,2Q502,2,502,-20.78125L502,-68L489,-68L489,-78L502,-78L502,-97.1875L514,-101L514,-78L533,-78L533,-68L514,-68L514,-22.859375Q514,-14.828125,516.5781,-11.40625Q519.15625,-8,525.2031,-8Q529.875,-8,533,-11.25L533,-1.25Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M590,-66.75Q586.78125,-70,580.71875,-70Q572.5469,-70,567.2656,-61.953125Q562,-53.90625,562,-40.84375L562,0L550,0L550,-78L562,-78L562,-63.46875L562.34375,-63.46875Q565,-71.328125,570.4375,-75.65625Q575.8906,-80,582.4531,-80Q587.4219,-80,590,-78.75L590,-66.75Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M665,-36L610,-36Q610.3594,-22.453125,617.125,-15.21875Q623.8906,-8,635.6719,-8Q648.8594,-8,660,-17L660,-6Q649.8125,2,633,2Q616.7656,2,607.375,-8.6875Q598,-19.390625,598,-38.78125Q598,-56.625,608.1094,-68.3125Q618.2344,-80,633.4219,-80Q648.34375,-80,656.6719,-70.0625Q665,-60.125,665,-42.390625L665,-36ZM653,-46Q652.9375,-57.375,647.7344,-63.6875Q642.53125,-70,633.1875,-70Q624.6875,-70,618.25,-63.65625Q611.8281,-57.3125,610.1406,-46L653,-46Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M687,-72Q698.3906,-80,713.0781,-80Q740,-80,740,-51.09375L740,0L728,0L728,-12L727.5781,-12Q719.5156,2,703.75,2Q692.25,2,685.625,-4.140625Q679,-10.296875,679,-20.40625Q679,-41.96875,704.5156,-45.625L727.9375,-49Q727.9375,-70,711.9844,-70Q698.03125,-70,687,-60L687,-72ZM708.8281,-36.46875Q698.8281,-35.140625,694.90625,-31.6875Q691,-28.234375,691,-21.046875Q691,-15.25,695.1875,-11.625Q699.3906,-8,706.15625,-8Q715.53125,-8,721.7344,-14.625Q727.9375,-21.265625,727.9375,-31.1875L727.9375,-39L708.8281,-36.46875Z"
            android:fillColor="#FFFFFF"/>
        <path android:pathData="M873,0L861,0L861,-44.90625Q861,-58.546875,857.0156,-64.265625Q853.03125,-70,843.84375,-70Q836.15625,-70,830.5781,-62.5Q825,-55.015625,825,-44.6875L825,0L813,0L813,-46.53125Q813,-70,795.0625,-70Q786.8281,-70,781.40625,-62.859375Q776,-55.71875,776,-44.6875L776,0L764,0L764,-78L776,-78L776,-65.859375L776.34375,-65.859375Q784.5,-80,800.3906,-80Q807.9844,-80,814.0625,-75.53125Q820.15625,-71.0625,822.3281,-63.75Q830.8281,-80,847.7656,-80Q873,-80,873,-48.125L873,0Z"
            android:fillColor="#FFFFFF"/>
      </group>
    </group>
  </group>
</vector>


================================================
FILE: app/src/main/res/drawable/ic_baseline_add_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_arrow_back_24.xml
================================================
<vector android:autoMirrored="true" android:height="24dp"
    android:tint="?attr/white" android:viewportHeight="24"
    android:viewportWidth="24" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M20,11H7.83l5.59,-5.59L12,4l-8,8 8,8 1.41,-1.41L7.83,13H20v-2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_arrow_forward_24.xml
================================================
<vector android:autoMirrored="true" android:height="24dp"
    android:tint="#FFFFFF" android:viewportHeight="24"
    android:viewportWidth="24" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,4l-1.41,1.41L16.17,11H4v2h12.17l-5.58,5.59L12,20l8,-8z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_aspect_ratio_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M19,12h-2v3h-3v2h5v-5zM7,9h3L10,7L5,7v5h2L7,9zM21,3L3,3c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h18c1.1,0 2,-0.9 2,-2L23,5c0,-1.1 -0.9,-2 -2,-2zM21,19.01L3,19.01L3,4.99h18v14.02z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_autorenew_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,6v3l4,-4 -4,-4v3c-4.42,0 -8,3.58 -8,8 0,1.57 0.46,3.03 1.24,4.26L6.7,14.8c-0.45,-0.83 -0.7,-1.79 -0.7,-2.8 0,-3.31 2.69,-6 6,-6zM18.76,7.74L17.3,9.2c0.44,0.84 0.7,1.79 0.7,2.8 0,3.31 -2.69,6 -6,6v-3l-4,4 4,4v-3c4.42,0 8,-3.58 8,-8 0,-1.57 -0.46,-3.03 -1.24,-4.26z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_bookmark_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M17,3H7c-1.1,0 -1.99,0.9 -1.99,2L5,21l7,-3 7,3V5c0,-1.1 -0.9,-2 -2,-2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_bookmark_border_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M17,3L7,3c-1.1,0 -1.99,0.9 -1.99,2L5,21l7,-3 7,3L19,5c0,-1.1 -0.9,-2 -2,-2zM17,18l-5,-2.18L7,18L7,5h10v13z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_brightness_1_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,12m-10,0a10,10 0,1 1,20 0a10,10 0,1 1,-20 0"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_brightness_2_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M10,2c-1.82,0 -3.53,0.5 -5,1.35C7.99,5.08 10,8.3 10,12s-2.01,6.92 -5,8.65C6.47,21.5 8.18,22 10,22c5.52,0 10,-4.48 10,-10S15.52,2 10,2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_brightness_3_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M9,2c-1.05,0 -2.05,0.16 -3,0.46 4.06,1.27 7,5.06 7,9.54 0,4.48 -2.94,8.27 -7,9.54 0.95,0.3 1.95,0.46 3,0.46 5.52,0 10,-4.48 10,-10S14.52,2 9,2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_brightness_4_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M20,8.69V4h-4.69L12,0.69 8.69,4H4v4.69L0.69,12 4,15.31V20h4.69L12,23.31 15.31,20H20v-4.69L23.31,12 20,8.69zM12,18c-0.89,0 -1.74,-0.2 -2.5,-0.55C11.56,16.5 13,14.42 13,12s-1.44,-4.5 -3.5,-5.45C10.26,6.2 11.11,6 12,6c3.31,0 6,2.69 6,6s-2.69,6 -6,6z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_brightness_5_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M20,15.31L23.31,12 20,8.69V4h-4.69L12,0.69 8.69,4H4v4.69L0.69,12 4,15.31V20h4.69L12,23.31 15.31,20H20v-4.69zM12,18c-3.31,0 -6,-2.69 -6,-6s2.69,-6 6,-6 6,2.69 6,6 -2.69,6 -6,6z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_brightness_6_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M20,15.31L23.31,12 20,8.69V4h-4.69L12,0.69 8.69,4H4v4.69L0.69,12 4,15.31V20h4.69L12,23.31 15.31,20H20v-4.69zM12,18V6c3.31,0 6,2.69 6,6s-2.69,6 -6,6z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_brightness_7_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M20,8.69L20,4h-4.69L12,0.69 8.69,4L4,4v4.69L0.69,12 4,15.31L4,20h4.69L12,23.31 15.31,20L20,20v-4.69L23.31,12 20,8.69zM12,18c-3.31,0 -6,-2.69 -6,-6s2.69,-6 6,-6 6,2.69 6,6 -2.69,6 -6,6zM12,8c-2.21,0 -4,1.79 -4,4s1.79,4 4,4 4,-1.79 4,-4 -1.79,-4 -4,-4z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_bug_report_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M20,8h-2.81c-0.45,-0.78 -1.07,-1.45 -1.82,-1.96L17,4.41 15.59,3l-2.17,2.17C12.96,5.06 12.49,5 12,5c-0.49,0 -0.96,0.06 -1.41,0.17L8.41,3 7,4.41l1.62,1.63C7.88,6.55 7.26,7.22 6.81,8L4,8v2h2.09c-0.05,0.33 -0.09,0.66 -0.09,1v1L4,12v2h2v1c0,0.34 0.04,0.67 0.09,1L4,16v2h2.81c1.04,1.79 2.97,3 5.19,3s4.15,-1.21 5.19,-3L20,18v-2h-2.09c0.05,-0.33 0.09,-0.66 0.09,-1v-1h2v-2h-2v-1c0,-0.34 -0.04,-0.67 -0.09,-1L20,10L20,8zM14,16h-4v-2h4v2zM14,12h-4v-2h4v2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_check_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M9,16.17L4.83,12l-1.42,1.41L9,19 21,7l-1.41,-1.41z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_clear_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_close_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_color_lens_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,3c-4.97,0 -9,4.03 -9,9s4.03,9 9,9c0.83,0 1.5,-0.67 1.5,-1.5 0,-0.39 -0.15,-0.74 -0.39,-1.01 -0.23,-0.26 -0.38,-0.61 -0.38,-0.99 0,-0.83 0.67,-1.5 1.5,-1.5L16,16c2.76,0 5,-2.24 5,-5 0,-4.42 -4.03,-8 -9,-8zM6.5,12c-0.83,0 -1.5,-0.67 -1.5,-1.5S5.67,9 6.5,9 8,9.67 8,10.5 7.33,12 6.5,12zM9.5,8C8.67,8 8,7.33 8,6.5S8.67,5 9.5,5s1.5,0.67 1.5,1.5S10.33,8 9.5,8zM14.5,8c-0.83,0 -1.5,-0.67 -1.5,-1.5S13.67,5 14.5,5s1.5,0.67 1.5,1.5S15.33,8 14.5,8zM17.5,12c-0.83,0 -1.5,-0.67 -1.5,-1.5S16.67,9 17.5,9s1.5,0.67 1.5,1.5 -0.67,1.5 -1.5,1.5z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_delete_outline_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:height="24dp"
        android:tint="?attr/white"
        android:viewportHeight="24"
        android:viewportWidth="24"
        android:width="24dp">
    <path
            android:fillColor="?white"
            android:pathData="M6,19c0,1.1 0.9,2 2,2h8c1.1,0 2,-0.9 2,-2L18,7L6,7v12zM8,9h8v10L8,19L8,9zM15.5,4l-1,-1h-5l-1,1L5,4v2h14L19,4z" />
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_developer_mode_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M7,5h10v2h2L19,3c0,-1.1 -0.9,-1.99 -2,-1.99L7,1c-1.1,0 -2,0.9 -2,2v4h2L7,5zM15.41,16.59L20,12l-4.59,-4.59L14,8.83 17.17,12 14,15.17l1.41,1.42zM10,15.17L6.83,12 10,8.83 8.59,7.41 4,12l4.59,4.59L10,15.17zM17,19L7,19v-2L5,17v4c0,1.1 0.9,2 2,2h10c1.1,0 2,-0.9 2,-2v-4h-2v2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_discord_24.xml
================================================
<vector android:height="27.5dp" android:tint="?attr/white"
        android:viewportHeight="293" android:viewportWidth="256"
        android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white"
          android:pathData="M226.011429,0 L29.9885714,0 C13.4582857,0 0,13.4582857 0,30.1348571 L0,227.913143 C0,244.589714 13.4582857,258.048 29.9885714,258.048 L195.876571,258.048 L188.123429,230.985143 L206.848,248.393143 L224.548571,264.777143 L256,292.571429 L256,30.1348571 C256,13.4582857 242.541714,0 226.011429,0 Z M169.545143,191.049143 C169.545143,191.049143 164.278857,184.758857 159.890286,179.2 C179.053714,173.787429 186.368,161.792 186.368,161.792 C180.370286,165.741714 174.665143,168.521143 169.545143,170.422857 C162.230857,173.494857 155.209143,175.542857 148.333714,176.713143 C134.290286,179.346286 121.417143,178.614857 110.445714,176.566857 C102.107429,174.957714 94.9394286,172.617143 88.9417143,170.276571 C85.5771429,168.96 81.92,167.350857 78.2628571,165.302857 C77.824,165.010286 77.3851429,164.864 76.9462857,164.571429 C76.6537143,164.425143 76.5074286,164.278857 76.3611429,164.132571 C73.728,162.669714 72.2651429,161.645714 72.2651429,161.645714 C72.2651429,161.645714 79.2868571,173.348571 97.8651429,178.907429 C93.4765714,184.466286 88.064,191.049143 88.064,191.049143 C55.7348571,190.025143 43.4468571,168.813714 43.4468571,168.813714 C43.4468571,121.709714 64.512,83.5291429 64.512,83.5291429 C85.5771429,67.7302857 105.618286,68.1691429 105.618286,68.1691429 L107.081143,69.9245714 C80.7497143,77.5314286 68.608,89.088 68.608,89.088 C68.608,89.088 71.8262857,87.3325714 77.2388571,84.8457143 C92.8914286,77.9702857 105.325714,76.0685714 110.445714,75.6297143 C111.323429,75.4834286 112.054857,75.3371429 112.932571,75.3371429 C121.856,74.1668571 131.949714,73.8742857 142.482286,75.0445714 C156.379429,76.6537143 171.300571,80.7497143 186.514286,89.088 C186.514286,89.088 174.957714,78.1165714 150.089143,70.5097143 L152.137143,68.1691429 C152.137143,68.1691429 172.178286,67.7302857 193.243429,83.5291429 C193.243429,83.5291429 214.308571,121.709714 214.308571,168.813714 C214.308571,168.813714 201.874286,190.025143 169.545143,191.049143 Z M101.522286,122.733714 C93.184,122.733714 86.6011429,130.048 86.6011429,138.971429 C86.6011429,147.894857 93.3302857,155.209143 101.522286,155.209143 C109.860571,155.209143 116.443429,147.894857 116.443429,138.971429 C116.589714,130.048 109.860571,122.733714 101.522286,122.733714 M154.916571,122.733714 C146.578286,122.733714 139.995429,130.048 139.995429,138.971429 C139.995429,147.894857 146.724571,155.209143 154.916571,155.209143 C163.254857,155.209143 169.837714,147.894857 169.837714,138.971429 C169.837714,130.048 163.254857,122.733714 154.916571,122.733714"/>
</vector>


================================================
FILE: app/src/main/res/drawable/ic_baseline_dns_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/white">
  <path
      android:fillColor="@android:color/white"
      android:pathData="M20,13H4c-0.55,0 -1,0.45 -1,1v6c0,0.55 0.45,1 1,1h16c0.55,0 1,-0.45 1,-1v-6c0,-0.55 -0.45,-1 -1,-1zM7,19c-1.1,0 -2,-0.9 -2,-2s0.9,-2 2,-2 2,0.9 2,2 -0.9,2 -2,2zM20,3H4c-0.55,0 -1,0.45 -1,1v6c0,0.55 0.45,1 1,1h16c0.55,0 1,-0.45 1,-1V4c0,-0.55 -0.45,-1 -1,-1zM7,9c-1.1,0 -2,-0.9 -2,-2s0.9,-2 2,-2 2,0.9 2,2 -0.9,2 -2,2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_fast_forward_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M4,18l8.5,-6L4,6v12zM13,6v12l8.5,-6L13,6z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_favorite_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,21.35l-1.45,-1.32C5.4,15.36 2,12.28 2,8.5 2,5.42 4.42,3 7.5,3c1.74,0 3.41,0.81 4.5,2.09C13.09,3.81 14.76,3 16.5,3 19.58,3 22,5.42 22,8.5c0,3.78 -3.4,6.86 -8.55,11.54L12,21.35z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_favorite_border_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M16.5,3c-1.74,0 -3.41,0.81 -4.5,2.09C10.91,3.81 9.24,3 7.5,3 4.42,3 2,5.42 2,8.5c0,3.78 3.4,6.86 8.55,11.54L12,21.35l1.45,-1.32C18.6,15.36 22,12.28 22,8.5 22,5.42 19.58,3 16.5,3zM12.1,18.55l-0.1,0.1 -0.1,-0.1C7.14,14.24 4,11.39 4,8.5 4,6.5 5.5,5 7.5,5c1.54,0 3.04,0.99 3.57,2.36h1.87C13.46,5.99 14.96,5 16.5,5c2,0 3.5,1.5 3.5,3.5 0,2.89 -3.14,5.74 -7.9,10.05z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_filter_list_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M10,18h4v-2h-4v2zM3,6v2h18L21,6L3,6zM6,13h12v-2L6,11v2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_hd_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M19,3L5,3c-1.11,0 -2,0.9 -2,2v14c0,1.1 0.89,2 2,2h14c1.1,0 2,-0.9 2,-2L21,5c0,-1.1 -0.9,-2 -2,-2zM11,15L9.5,15v-2h-2v2L6,15L6,9h1.5v2.5h2L9.5,9L11,9v6zM13,9h4c0.55,0 1,0.45 1,1v4c0,0.55 -0.45,1 -1,1h-4L13,9zM14.5,13.5h2v-3h-2v3z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_keyboard_arrow_down_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M7.41,8.59L12,13.17l4.59,-4.58L18,10l-6,6 -6,-6 1.41,-1.41z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_keyboard_arrow_right_24.xml
================================================
<vector android:autoMirrored="true" android:height="24dp"
    android:tint="?attr/white" android:viewportHeight="24"
    android:viewportWidth="24" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M8.59,16.59L13.17,12 8.59,7.41 10,6l6,6 -6,6 -1.41,-1.41z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_language_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M11.99,2C6.47,2 2,6.48 2,12s4.47,10 9.99,10C17.52,22 22,17.52 22,12S17.52,2 11.99,2zM18.92,8h-2.95c-0.32,-1.25 -0.78,-2.45 -1.38,-3.56 1.84,0.63 3.37,1.91 4.33,3.56zM12,4.04c0.83,1.2 1.48,2.53 1.91,3.96h-3.82c0.43,-1.43 1.08,-2.76 1.91,-3.96zM4.26,14C4.1,13.36 4,12.69 4,12s0.1,-1.36 0.26,-2h3.38c-0.08,0.66 -0.14,1.32 -0.14,2 0,0.68 0.06,1.34 0.14,2L4.26,14zM5.08,16h2.95c0.32,1.25 0.78,2.45 1.38,3.56 -1.84,-0.63 -3.37,-1.9 -4.33,-3.56zM8.03,8L5.08,8c0.96,-1.66 2.49,-2.93 4.33,-3.56C8.81,5.55 8.35,6.75 8.03,8zM12,19.96c-0.83,-1.2 -1.48,-2.53 -1.91,-3.96h3.82c-0.43,1.43 -1.08,2.76 -1.91,3.96zM14.34,14L9.66,14c-0.09,-0.66 -0.16,-1.32 -0.16,-2 0,-0.68 0.07,-1.35 0.16,-2h4.68c0.09,0.65 0.16,1.32 0.16,2 0,0.68 -0.07,1.34 -0.16,2zM14.59,19.56c0.6,-1.11 1.06,-2.31 1.38,-3.56h2.95c-0.96,1.65 -2.49,2.93 -4.33,3.56zM16.36,14c0.08,-0.66 0.14,-1.32 0.14,-2 0,-0.68 -0.06,-1.34 -0.14,-2h3.38c0.16,0.64 0.26,1.31 0.26,2s-0.1,1.36 -0.26,2h-3.38z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_more_vert_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,8c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM12,10c-1.1,0 -2,0.9 -2,2s0.9,2 2,2 2,-0.9 2,-2 -0.9,-2 -2,-2zM12,16c-1.1,0 -2,0.9 -2,2s0.9,2 2,2 2,-0.9 2,-2 -0.9,-2 -2,-2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_notifications_active_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M7.58,4.08L6.15,2.65C3.75,4.48 2.17,7.3 2.03,10.5h2c0.15,-2.65 1.51,-4.97 3.55,-6.42zM19.97,10.5h2c-0.15,-3.2 -1.73,-6.02 -4.12,-7.85l-1.42,1.43c2.02,1.45 3.39,3.77 3.54,6.42zM18,11c0,-3.07 -1.64,-5.64 -4.5,-6.32L13.5,4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2v-5zM12,22c0.14,0 0.27,-0.01 0.4,-0.04 0.65,-0.14 1.18,-0.58 1.44,-1.18 0.1,-0.24 0.15,-0.5 0.15,-0.78h-4c0.01,1.1 0.9,2 2.01,2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_ondemand_video_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M21,3L3,3c-1.11,0 -2,0.89 -2,2v12c0,1.1 0.89,2 2,2h5v2h8v-2h5c1.1,0 1.99,-0.9 1.99,-2L23,5c0,-1.11 -0.9,-2 -2,-2zM21,17L3,17L3,5h18v12zM16,11l-7,4L9,7z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_pause_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M6,19h4L10,5L6,5v14zM14,5v14h4L18,5h-4z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_picture_in_picture_alt_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M19,11h-8v6h8v-6zM23,19L23,4.98C23,3.88 22.1,3 21,3L3,3c-1.1,0 -2,0.88 -2,1.98L1,19c0,1.1 0.9,2 2,2h18c1.1,0 2,-0.9 2,-2zM21,19.02L3,19.02L3,4.97h18v14.05z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_play_arrow_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M8,5v14l11,-7z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_playlist_play_24.xml
================================================
<vector android:autoMirrored="true" android:height="24dp"
    android:tint="?attr/white" android:viewportHeight="24"
    android:viewportWidth="24" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M3,10h11v2h-11z"/>
    <path android:fillColor="@android:color/white" android:pathData="M3,6h11v2h-11z"/>
    <path android:fillColor="@android:color/white" android:pathData="M3,14h7v2h-7z"/>
    <path android:fillColor="@android:color/white" android:pathData="M16,13l0,8l6,-4z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_public_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,2C6.48,2 2,6.48 2,12s4.48,10 10,10 10,-4.48 10,-10S17.52,2 12,2zM11,19.93c-3.95,-0.49 -7,-3.85 -7,-7.93 0,-0.62 0.08,-1.21 0.21,-1.79L9,15v1c0,1.1 0.9,2 2,2v1.93zM17.9,17.39c-0.26,-0.81 -1,-1.39 -1.9,-1.39h-1v-3c0,-0.55 -0.45,-1 -1,-1L8,12v-2h2c0.55,0 1,-0.45 1,-1L11,7h2c1.1,0 2,-0.9 2,-2v-0.41c2.93,1.19 5,4.06 5,7.41 0,2.08 -0.8,3.97 -2.1,5.39z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_remove_red_eye_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,4.5C7,4.5 2.73,7.61 1,12c1.73,4.39 6,7.5 11,7.5s9.27,-3.11 11,-7.5c-1.73,-4.39 -6,-7.5 -11,-7.5zM12,17c-2.76,0 -5,-2.24 -5,-5s2.24,-5 5,-5 5,2.24 5,5 -2.24,5 -5,5zM12,9c-1.66,0 -3,1.34 -3,3s1.34,3 3,3 3,-1.34 3,-3 -1.34,-3 -3,-3z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_skip_next_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M6,18l8.5,-6L6,6v12zM16,6v12h2V6h-2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_speed_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M20.38,8.57l-1.23,1.85a8,8 0,0 1,-0.22 7.58L5.07,18A8,8 0,0 1,15.58 6.85l1.85,-1.23A10,10 0,0 0,3.35 19a2,2 0,0 0,1.72 1h13.85a2,2 0,0 0,1.74 -1,10 10,0 0,0 -0.27,-10.44zM10.59,15.41a2,2 0,0 0,2.83 0l5.66,-8.49 -8.49,5.66a2,2 0,0 0,0 2.83z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_star_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,17.27L18.18,21l-1.64,-7.03L22,9.24l-7.19,-0.61L12,2 9.19,8.63 2,9.24l5.46,4.73L5.82,21z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_star_border_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M22,9.24l-7.19,-0.62L12,2 9.19,8.63 2,9.24l5.46,4.73L5.82,21 12,17.27 18.18,21l-1.63,-7.03L22,9.24zM12,15.4l-3.76,2.27 1,-4.28 -3.32,-2.88 4.38,-0.38L12,6.1l1.71,4.04 4.38,0.38 -3.32,2.88 1,4.28L12,15.4z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_storage_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:height="24dp"
        android:tint="?attr/white"
        android:viewportHeight="24"
        android:viewportWidth="24"
        android:width="24dp">
    <path
            android:fillColor="@android:color/white"
            android:pathData="M2,20h20v-4L2,16v4zM4,17h2v2L4,19v-2zM2,4v4h20L22,4L2,4zM6,7L4,7L4,5h2v2zM2,14h20v-4L2,10v4zM4,11h2v2L4,13v-2z" />
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_subtitles_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M20,4L4,4c-1.1,0 -2,0.9 -2,2v12c0,1.1 0.9,2 2,2h16c1.1,0 2,-0.9 2,-2L22,6c0,-1.1 -0.9,-2 -2,-2zM4,12h4v2L4,14v-2zM14,18L4,18v-2h10v2zM20,18h-4v-2h4v2zM20,14L10,14v-2h10v2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_system_update_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M17,1.01L7,1c-1.1,0 -2,0.9 -2,2v18c0,1.1 0.9,2 2,2h10c1.1,0 2,-0.9 2,-2L19,3c0,-1.1 -0.9,-1.99 -2,-1.99zM17,19L7,19L7,5h10v14zM16,13h-3L13,8h-2v5L8,13l4,4 4,-4z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_text_format_24.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/white">
  <path
      android:fillColor="@android:color/white"
      android:pathData="M5,17v2h14v-2L5,17zM9.5,12.8h5l0.9,2.2h2.1L12.75,4h-1.5L6.5,15h2.1l0.9,-2.2zM12,5.98L13.87,11h-3.74L12,5.98z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_touch_app_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M9,11.24V7.5C9,6.12 10.12,5 11.5,5S14,6.12 14,7.5v3.74c1.21,-0.81 2,-2.18 2,-3.74C16,5.01 13.99,3 11.5,3S7,5.01 7,7.5C7,9.06 7.79,10.43 9,11.24zM18.84,15.87l-4.54,-2.26c-0.17,-0.07 -0.35,-0.11 -0.54,-0.11H13v-6C13,6.67 12.33,6 11.5,6S10,6.67 10,7.5v10.74c-3.6,-0.76 -3.54,-0.75 -3.67,-0.75c-0.31,0 -0.59,0.13 -0.79,0.33l-0.79,0.8l4.94,4.94C9.96,23.83 10.34,24 10.75,24h6.79c0.75,0 1.33,-0.55 1.44,-1.28l0.75,-5.27c0.01,-0.07 0.02,-0.14 0.02,-0.2C19.75,16.63 19.37,16.09 18.84,15.87z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_tune_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M3,17v2h6v-2L3,17zM3,5v2h10L13,5L3,5zM13,21v-2h8v-2h-8v-2h-2v6h2zM7,9v2L3,11v2h4v2h2L9,9L7,9zM21,13v-2L11,11v2h10zM15,9h2L17,7h4L21,5h-4L17,3h-2v6z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_tv_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M21,3L3,3c-1.1,0 -2,0.9 -2,2v12c0,1.1 0.9,2 2,2h5v2h8v-2h5c1.1,0 1.99,-0.9 1.99,-2L23,5c0,-1.1 -0.9,-2 -2,-2zM21,17L3,17L3,5h18v12z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_visibility_off_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,7c2.76,0 5,2.24 5,5 0,0.65 -0.13,1.26 -0.36,1.83l2.92,2.92c1.51,-1.26 2.7,-2.89 3.43,-4.75 -1.73,-4.39 -6,-7.5 -11,-7.5 -1.4,0 -2.74,0.25 -3.98,0.7l2.16,2.16C10.74,7.13 11.35,7 12,7zM2,4.27l2.28,2.28 0.46,0.46C3.08,8.3 1.78,10.02 1,12c1.73,4.39 6,7.5 11,7.5 1.55,0 3.03,-0.3 4.38,-0.84l0.42,0.42L19.73,22 21,20.73 3.27,3 2,4.27zM7.53,9.8l1.55,1.55c-0.05,0.21 -0.08,0.43 -0.08,0.65 0,1.66 1.34,3 3,3 0.22,0 0.44,-0.03 0.65,-0.08l1.55,1.55c-0.67,0.33 -1.41,0.53 -2.2,0.53 -2.76,0 -5,-2.24 -5,-5 0,-0.79 0.2,-1.53 0.53,-2.2zM11.84,9.02l3.15,3.15 0.02,-0.16c0,-1.66 -1.34,-3 -3,-3l-0.17,0.01z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_volume_down_24.xml
================================================
<vector android:autoMirrored="true" android:height="24dp"
    android:tint="#FFFFFF" android:viewportHeight="24"
    android:viewportWidth="24" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M18.5,12c0,-1.77 -1.02,-3.29 -2.5,-4.03v8.05c1.48,-0.73 2.5,-2.25 2.5,-4.02zM5,9v6h4l5,5V4L9,9H5z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_volume_mute_24.xml
================================================
<vector android:autoMirrored="true" android:height="24dp"
    android:tint="#FFFFFF" android:viewportHeight="24"
    android:viewportWidth="24" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M7,9v6h4l5,5V4l-5,5H7z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_volume_up_24.xml
================================================
<vector android:autoMirrored="true" android:height="24dp"
    android:tint="?attr/white" android:viewportHeight="24"
    android:viewportWidth="24" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M3,9v6h4l5,5L12,4L7,9L3,9zM16.5,12c0,-1.77 -1.02,-3.29 -2.5,-4.03v8.05c1.48,-0.73 2.5,-2.25 2.5,-4.02zM14,3.23v2.06c2.89,0.86 5,3.54 5,6.71s-2.11,5.85 -5,6.71v2.06c4.01,-0.91 7,-4.49 7,-8.77s-2.99,-7.86 -7,-8.77z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_baseline_warning_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M1,21h22L12,2 1,21zM13,18h-2v-2h2v2zM13,14h-2v-4h2v4z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_cloudstreamlogotv.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:aapt="http://schemas.android.com/aapt"
        android:width="907.09dp"
        android:height="510.24dp"
        android:viewportWidth="907.09"
        android:viewportHeight="510.24">
    <path
            android:strokeWidth="1"
            android:pathData="M-20.09,-10.91h949.79v534.26h-949.79z"
            android:fillColor="#121212"
            android:strokeColor="#fff" />
    <path android:pathData="M354.67,257.16A18.81,18.81 0,0 0,349 258a26.55,26.55 0,0 0,-24.72 -21.51,40.84 40.84,0 0,0 -69,-13.08A32.06,32.06 0,0 0,213 253.82c0,1.13 0.06,2.25 0.17,3.35H213a18.9,18.9 0,0 0,0 37.8H354.67a18.9,18.9 0,0 0,0 -37.8Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="194.11"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M329.74,241c0,-1.22 0,-2.43 -0.09,-3.63a26.9,26.9 0,0 0,-5.35 -0.85,40.84 40.84,0 0,0 -69,-13.08A32.06,32.06 0,0 0,213 253.82c0,1.13 0.06,2.25 0.17,3.35H213a18.9,18.9 0,0 0,0 37.8h96.48A81.79,81.79 0,0 0,329.74 241Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="194.11"
                    android:endY="252.3"
                    android:endX="329.74"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF4F6DFB" />
                <item
                        android:offset="0.6"
                        android:color="#FF3559E7" />
                <item
                        android:offset="1"
                        android:color="#FF2149D8" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M255.34,223.43A32.06,32.06 0,0 0,213 253.82c0,1.13 0.06,2.25 0.17,3.35H213a18.89,18.89 0,0 0,-1.18 37.74A81.52,81.52 0,0 0,291 213.41c0,-1.15 0,-2.29 -0.08,-3.43a41.46,41.46 0,0 0,-5 -0.33A40.73,40.73 0,0 0,255.34 223.43Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.27"
                    android:startX="194.11"
                    android:endY="252.27"
                    android:endX="291.01"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF56B6FE" />
                <item
                        android:offset="0.61"
                        android:color="#FF599CFA" />
                <item
                        android:offset="1"
                        android:color="#FF5C89F7" />
            </gradient>
        </aapt:attr>
    </path>
    <path
            android:pathData="M425.54,288.63A19.26,19.26 0,0 1,412 256a18.21,18.21 0,0 1,13.56 -5.51,16.9 16.9,0 0,1 13.42,6l-3.37,3.26a12.48,12.48 0,0 0,-10 -4.74,13.79 13.79,0 0,0 -10.15,4.08 15.74,15.74 0,0 0,0 21,13.79 13.79,0 0,0 10.15,4.08q6.38,0 11.07,-5.36L440,282.1a17.81,17.81 0,0 1,-6.38 4.82A19.4,19.4 0,0 1,425.54 288.63Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M448.9,251.3v36.51h-4.69V251.3Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M452.93,275.32a13.24,13.24 0,0 1,3.62 -9.54,12.34 12.34,0 0,1 9.23,-3.78 12.16,12.16 0,0 1,9.18 3.78,14.22 14.22,0 0,1 0,19.07 12.16,12.16 0,0 1,-9.18 3.78,12.34 12.34,0 0,1 -9.23,-3.78A13.21,13.21 0,0 1,452.93 275.32ZM457.62,275.32a9.11,9.11 0,0 0,2.35 6.52,8 8,0 0,0 11.63,0 10.2,10.2 0,0 0,0 -13,7.91 7.91,0 0,0 -11.63,0A9.06,9.06 0,0 0,457.62 275.32Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M504.59,287.81h-4.48v-3.47h-0.21a8.23,8.23 0,0 1,-3.29 3.06,9.4 9.4,0 0,1 -4.61,1.23q-4.59,0 -7.07,-2.63t-2.47,-7.47V262.82h4.69v15.4q0.15,6.12 6.17,6.12a5.83,5.83 0,0 0,4.69 -2.27,8.2 8.2,0 0,0 1.89,-5.43V262.82h4.69Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M520.51,288.63a11,11 0,0 1,-8.42 -3.88,14.56 14.56,0 0,1 0,-18.87 11,11 0,0 1,8.42 -3.88,10.8 10.8,0 0,1 5,1.18 8.76,8.76 0,0 1,3.49 3.11h0.21l-0.21,-3.47L529,251.3h4.69v36.51h-4.48v-3.47L529,284.34a8.68,8.68 0,0 1,-3.49 3.11A10.68,10.68 0,0 1,520.51 288.63ZM521.27,284.34a7.17,7.17 0,0 0,5.66 -2.5,10.33 10.33,0 0,0 0,-13 7.2,7.2 0,0 0,-5.66 -2.55,7.32 7.32,0 0,0 -5.66,2.55 9.32,9.32 0,0 0,-2.29 6.48,9.17 9.17,0 0,0 2.29,6.47A7.32,7.32 0,0 0,521.27 284.34Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M562.78,278.05a9.52,9.52 0,0 1,-3.51 7.71,13.42 13.42,0 0,1 -8.67,2.87 12.86,12.86 0,0 1,-8 -2.65,13.64 13.64,0 0,1 -4.8,-7.25l4.49,-1.83a11.62,11.62 0,0 0,1.28 3,9.63 9.63,0 0,0 1.91,2.27 8.72,8.72 0,0 0,2.42 1.47,7.4 7.4,0 0,0 2.81,0.54 8,8 0,0 0,5.25 -1.66,5.38 5.38,0 0,0 2,-4.41 5.29,5.29 0,0 0,-1.68 -3.93q-1.59,-1.58 -5.92,-3.06a58.57,58.57 0,0 1,-5.46 -2.14q-5.8,-3 -5.81,-8.72a8.89,8.89 0,0 1,3.21 -6.88,11.72 11.72,0 0,1 8,-2.86 12.28,12.28 0,0 1,7.24 2.14,10.07 10.07,0 0,1 4.08,5.25l-4.38,1.84a6.49,6.49 0,0 0,-2.43 -3.39,7.86 7.86,0 0,0 -9.05,0.17 4.42,4.42 0,0 0,-1.88 3.71,4.31 4.31,0 0,0 1.47,3.25q1.64,1.37 7.09,3.25t7.93,4.62A9.93,9.93 0,0 1,562.78 278.05Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M576.25,288.22a7.15,7.15 0,0 1,-5.08 -1.89,7 7,0 0,1 -2.06,-5.25v-14h-4.39v-4.29h4.39v-7.65h4.69v7.65h6.12v4.29H573.8v12.44c0,1.67 0.32,2.8 1,3.39a3.14,3.14 0,0 0,2.19 0.89,5 5,0 0,0 1.1,-0.12 5.48,5.48 0,0 0,1 -0.34l1.48,4.19A12.62,12.62 0,0 1,576.25 288.22Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M589.1,287.81h-4.69v-25h4.49v4.08h0.2a6.82,6.82 0,0 1,2.93 -3.39,8.17 8.17,0 0,1 4.36,-1.4 8.76,8.76 0,0 1,3.47 0.61l-1.43,4.54a7.69,7.69 0,0 0,-2.75 -0.36,6.11 6.11,0 0,0 -4.62,2.14 7.17,7.17 0,0 0,-2 5Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M612.61,288.63a12,12 0,0 1,-9.08 -3.78,13.3 13.3,0 0,1 -3.57,-9.53 13.61,13.61 0,0 1,3.47 -9.52,12.46 12.46,0 0,1 17.72,-0.2q3.3,3.6 3.29,10.07l-0.05,0.51L604.76,276.18a8.13,8.13 0,0 0,2.44 5.92,7.83 7.83,0 0,0 5.61,2.24c3,0 5.34,-1.49 7,-4.48l4.18,2a12.46,12.46 0,0 1,-4.66 4.94A12.91,12.91 0,0 1,612.61 288.63ZM605.11,272.31h14.33a6.2,6.2 0,0 0,-2.11 -4.31,7.43 7.43,0 0,0 -5.13,-1.71 6.77,6.77 0,0 0,-4.56 1.63A7.79,7.79 0,0 0,605.11 272.31Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M638.47,262a11.62,11.62 0,0 1,8.21 2.79,9.87 9.87,0 0,1 3,7.62v15.4L645.2,287.81v-3.47L645,284.34a9,9 0,0 1,-7.76 4.29,10.09 10.09,0 0,1 -6.91,-2.45 7.82,7.82 0,0 1,-2.78 -6.12,7.43 7.43,0 0,1 2.94,-6.17 12.33,12.33 0,0 1,7.82 -2.3,13.86 13.86,0 0,1 6.89,1.53v-1.07a5.34,5.34 0,0 0,-1.94 -4.15,6.63 6.63,0 0,0 -4.54,-1.71 7.18,7.18 0,0 0,-6.22 3.31l-4.13,-2.6Q631.79,262 638.47,262ZM632.4,280.16a3.74,3.74 0,0 0,1.55 3.06,5.73 5.73,0 0,0 3.65,1.23 7.51,7.51 0,0 0,5.28 -2.2,6.89 6.89,0 0,0 2.32,-5.15 9.67,9.67 0,0 0,-6.12 -1.73,8 8,0 0,0 -4.77,1.37A4.11,4.11 0,0 0,632.4 280.16Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M659.68,287.81H655v-25h4.49v3.47h0.2a8.36,8.36 0,0 1,3.29 -3.06,9 9,0 0,1 4.41,-1.23 9.15,9.15 0,0 1,4.85 1.28,7.55 7.55,0 0,1 3.06,3.52 9.75,9.75 0,0 1,8.62 -4.8,8.45 8.45,0 0,1 6.68,2.66c1.56,1.77 2.34,4.28 2.34,7.55v15.6h-4.69V272.92q0,-3.53 -1.27,-5.08c-0.85,-1 -2.28,-1.55 -4.29,-1.55a5.61,5.61 0,0 0,-4.54 2.29,8.43 8.43,0 0,0 -1.83,5.41v13.82h-4.69V272.92q0,-3.53 -1.28,-5.08c-0.85,-1 -2.28,-1.55 -4.28,-1.55a5.58,5.58 0,0 0,-4.54 2.29,8.38 8.38,0 0,0 -1.84,5.41Z"
            android:fillColor="#5252ff" />
    <path android:pathData="M-13.76,555.76c10.3,-20.89 58.91,-113.94 157.31,-139.7C261.3,385.24 405.9,462.43 469.89,613.28">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="194.11"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M318.2,592.15c52.89,-55.46 139,-131.3 263,-187.83 223.69,-102 495.29,-119.94 515.35,-62.21 13,37.39 -73.5,124.43 -496.69,339.65">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="400.11"
                    android:endX="900"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M-57.58,195c206.91,86.6 494,-219.13 453.91,-347.48C353.52,-289.67 -103.15,-353.41 -203.15,-176 -265.5,-65.35 -189.57,139.73 -57.58,195Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="-100"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M698.42,648.89C625.71,546 764,320.79 920.68,218.45c46.61,-30.44 110.17,-72 164.35,-50.08 102.25,41.28 158.19,303.22 28.17,446.08C996.65,742.52 762.64,739.78 698.42,648.89Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="700.11"
                    android:endX="900.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M339.91,-42.46a246.52,141.46 0,1 0,493.04 0a246.52,141.46 0,1 0,-493.04 0z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="400.11"
                    android:endX="800.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_cloudstreamlogotv_2.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:aapt="http://schemas.android.com/aapt"
        android:width="907.09dp"
        android:height="510.24dp"
        android:viewportWidth="907.09"
        android:viewportHeight="510.24">
    <path
            android:strokeWidth="1"
            android:pathData="M-20.09,-10.91h949.79v534.26h-949.79z"
            android:fillColor="#121212"
            android:strokeColor="#fff" />
    <path android:pathData="M273.68,250.58a18.79,18.79 0,0 0,-5.64 0.86,26.56 26.56,0 0,0 -24.73,-21.51 40.83,40.83 0,0 0,-68.95 -13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H273.68a18.9,18.9 0,0 0,0 -37.8Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="245.72"
                    android:startX="113.12"
                    android:endY="245.72"
                    android:endX="292.58"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M248.76,234.41c0,-1.22 0,-2.42 -0.09,-3.63a27,27 0,0 0,-5.36 -0.85,40.83 40.83,0 0,0 -68.95,-13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H228.5A81.75,81.75 0,0 0,248.76 234.41Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="245.72"
                    android:startX="113.12"
                    android:endY="245.72"
                    android:endX="248.76"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF4F6DFB" />
                <item
                        android:offset="0.6"
                        android:color="#FF3559E7" />
                <item
                        android:offset="1"
                        android:color="#FF2149D8" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M174.36,216.85A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.89,18.89 0,0 0,-1.18 37.74A81.53,81.53 0,0 0,210 206.83c0,-1.15 0,-2.29 -0.09,-3.43a41.33,41.33 0,0 0,-5 -0.33A40.71,40.71 0,0 0,174.36 216.85Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="245.69"
                    android:startX="113.12"
                    android:endY="245.69"
                    android:endX="210.03"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF56B6FE" />
                <item
                        android:offset="0.61"
                        android:color="#FF599CFA" />
                <item
                        android:offset="1"
                        android:color="#FF5C89F7" />
            </gradient>
        </aapt:attr>
    </path>

    <path
            android:pathData="M358.81,285q-13.53,0 -22.64,-9.1t-9,-22.72q0,-13.62 9,-22.64 9,-9.18 22.64,-9.19 13.79,0 22.38,10l-5.62,5.44a20.82,20.82 0,0 0,-16.76 -7.91,23 23,0 0,0 -16.94,6.81q-6.72,6.72 -6.72,17.53t6.72,17.53a23,23 0,0 0,16.94 6.81q10.63,0 18.46,-8.94l5.7,5.53a29.57,29.57 0,0 1,-10.63 8A32.44,32.44 0,0 1,358.81 285Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M397.78,222.69v60.93H390V222.69Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M404.5,262.77q0,-9.61 6,-15.91a20.6,20.6 0,0 1,15.41 -6.3,20.31 20.31,0 0,1 15.31,6.3 21.87,21.87 0,0 1,6.13 15.91q0,9.71 -6.13,15.92A20.3,20.3 0,0 1,426 285a20.6,20.6 0,0 1,-15.41 -6.29Q404.5,272.39 404.5,262.77ZM412.33,262.77a15.31,15.31 0,0 0,3.91 10.9,13.38 13.38,0 0,0 19.41,0 17,17 0,0 0,0 -21.7,13.18 13.18,0 0,0 -19.41,0A15.18,15.18 0,0 0,412.33 262.77Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M490.7,283.62h-7.48v-5.78h-0.35a13.86,13.86 0,0 1,-5.48 5.1,15.77 15.77,0 0,1 -7.7,2q-7.67,0 -11.79,-4.38t-4.13,-12.47v-26.2h7.83v25.69q0.25,10.22 10.3,10.22a9.81,9.81 0,0 0,7.83 -3.79,13.7 13.7,0 0,0 3.14,-9.06V241.93h7.83Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M517.25,285a18.34,18.34 0,0 1,-14 -6.46,24.34 24.34,0 0,1 0,-31.49 18.35,18.35 0,0 1,14 -6.47,18.07 18.07,0 0,1 8.39,2 14.84,14.84 0,0 1,5.83 5.19h0.34l-0.34,-5.78L531.47,222.69h7.82v60.93h-7.48v-5.78h-0.34a14.84,14.84 0,0 1,-5.83 5.19A18.07,18.07 0,0 1,517.25 285ZM518.53,277.86a12,12 0,0 0,9.45 -4.17q3.82,-4.17 3.83,-10.9A15.54,15.54 0,0 0,528 252a12.05,12.05 0,0 0,-9.45 -4.26,12.19 12.19,0 0,0 -9.44,4.26 15.5,15.5 0,0 0,-3.83 10.8,15.32 15.32,0 0,0 3.83,10.81A12.19,12.19 0,0 0,518.53 277.84Z"
            android:fillColor="#2e24ff" />
    <path
            android:pathData="M587.8,267.33a15.91,15.91 0,0 1,-5.87 12.88A22.43,22.43 0,0 1,567.46 285a21.39,21.39 0,0 1,-13.36 -4.42,22.65 22.65,0 0,1 -8,-12.08l7.49,-3.07a19.3,19.3 0,0 0,2.13 4.94,15.72 15.72,0 0,0 3.19,3.78 14.25,14.25 0,0 0,4 2.47,12.26 12.26,0 0,0 4.68,0.9 13.47,13.47 0,0 0,8.76 -2.77,9 9,0 0,0 3.41,-7.36 8.8,8.8 0,0 0,-2.81 -6.55q-2.64,-2.64 -9.87,-5.11 -7.32,-2.64 -9.11,-3.57 -9.69,-4.94 -9.7,-14.55a14.84,14.84 0,0 1,5.37 -11.49A19.53,19.53 0,0 1,567 221.33a20.5,20.5 0,0 1,12.09 3.58,16.67 16.67,0 0,1 6.8,8.76l-7.31,3.06a10.84,10.84 0,0 0,-4 -5.65,13.1 13.1,0 0,0 -15.11,0.28 7.41,7.41 0,0 0,-3.15 6.19,7.14 7.14,0 0,0 2.47,5.42q2.73,2.29 11.83,5.42 9.27,3.17 13.23,7.72A16.53,16.53 0,0 1,587.8 267.33Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M610.26,284.3a11.88,11.88 0,0 1,-8.46 -3.15c-2.25,-2.09 -3.4,-5 -3.45,-8.76V249.07H591v-7.14h7.32V229.16h7.83v12.77h10.21v7.14H606.18v20.77c0,2.78 0.54,4.66 1.61,5.66a5.27,5.27 0,0 0,3.66 1.48,7.9 7.9,0 0,0 1.83,-0.21 9,9 0,0 0,1.66 -0.55l2.47,7A21.23,21.23 0,0 1,610.26 284.3Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M631.71,283.62h-7.83V241.93h7.48v6.8h0.35a11.31,11.31 0,0 1,4.89 -5.66,13.66 13.66,0 0,1 7.27,-2.34 14.7,14.7 0,0 1,5.79 1l-2.38,7.57a12.93,12.93 0,0 0,-4.6 -0.6,10.11 10.11,0 0,0 -7.7,3.58 12,12 0,0 0,-3.27 8.34Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M670.93,285a19.93,19.93 0,0 1,-15.14 -6.29q-6,-6.3 -6,-15.92a22.65,22.65 0,0 1,5.79 -15.87,19.15 19.15,0 0,1 14.8,-6.34q9.29,0 14.77,6t5.49,16.81l-0.09,0.85L657.83,264.24a13.56,13.56 0,0 0,4.08 9.87,13.06 13.06,0 0,0 9.36,3.75q7.49,0 11.75,-7.49l7,3.4a20.69,20.69 0,0 1,-7.78 8.25A21.51,21.51 0,0 1,670.93 285ZM658.42,257.77h23.92a10.43,10.43 0,0 0,-3.53 -7.19,12.38 12.38,0 0,0 -8.56,-2.85 11.34,11.34 0,0 0,-7.61 2.72A13.09,13.09 0,0 0,658.42 257.75Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M714.08,240.56q8.67,0 13.7,4.64c3.34,3.1 5,7.33 5,12.72v25.7h-7.49v-5.78H725Q720.11,285 712,285a16.83,16.83 0,0 1,-11.53 -4.08,13 13,0 0,1 -4.63,-10.21 12.38,12.38 0,0 1,4.89 -10.3q4.89,-3.83 13.06,-3.83a23.16,23.16 0,0 1,11.49 2.55v-1.78a8.9,8.9 0,0 0,-3.24 -6.94,11.08 11.08,0 0,0 -7.57,-2.85 12,12 0,0 0,-10.38 5.53l-6.89,-4.34Q702.93,240.57 714.08,240.56ZM704,270.86a6.24,6.24 0,0 0,2.59 5.1,9.57 9.57,0 0,0 6.09,2.05 12.5,12.5 0,0 0,8.81 -3.66,11.47 11.47,0 0,0 3.87,-8.6q-3.66,-2.88 -10.21,-2.89a13.22,13.22 0,0 0,-8 2.3A6.81,6.81 0,0 0,704 270.86Z"
            android:fillColor="#5252ff" />
    <path
            android:pathData="M749.47,283.62h-7.82V241.93h7.48v5.78h0.34a14,14 0,0 1,5.49 -5.1,15.06 15.06,0 0,1 7.36,-2.05 15.22,15.22 0,0 1,8.09 2.13,12.56 12.56,0 0,1 5.1,5.87q5.19,-8 14.39,-8 7.23,0 11.14,4.43T805,257.58v26h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.06,9v23.06h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.07,9Z"
            android:fillColor="#5252ff" />
    <path android:pathData="M-13.76,555.76c10.3,-20.89 58.91,-113.94 157.31,-139.7C261.3,385.24 405.9,462.43 469.89,613.28">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="194.11"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M318.2,592.15c52.89,-55.46 139,-131.3 263,-187.83 223.69,-102 495.29,-119.94 515.35,-62.21 13,37.39 -73.5,124.43 -496.69,339.65">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="400.11"
                    android:endX="900"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M-57.58,195c206.91,86.6 494,-219.13 453.91,-347.48C353.52,-289.67 -103.15,-353.41 -203.15,-176 -265.5,-65.35 -189.57,139.73 -57.58,195Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="-100"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M698.42,648.89C625.71,546 764,320.79 920.68,218.45c46.61,-30.44 110.17,-72 164.35,-50.08 102.25,41.28 158.19,303.22 28.17,446.08C996.65,742.52 762.64,739.78 698.42,648.89Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="700.11"
                    android:endX="900.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M339.91,-42.46a246.52,141.46 0,1 0,493.04 0a246.52,141.46 0,1 0,-493.04 0z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="400.11"
                    android:endX="800.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#FF5D49EA" />
                <item
                        android:offset="0.45"
                        android:color="#FF452FE4" />
                <item
                        android:offset="1"
                        android:color="#FF2309DB" />
            </gradient>
        </aapt:attr>
    </path>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_cloudstreamlogotv_pre.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:aapt="http://schemas.android.com/aapt"
        android:width="907.09dp"
        android:height="510.24dp"
        android:viewportWidth="907.09"
        android:viewportHeight="510.24">
    <path
            android:strokeWidth="1"
            android:pathData="M-20.09,-10.91h949.79v534.26h-949.79z"
            android:fillColor="#121212"
            android:strokeColor="#fff" />
    <path android:pathData="M354.67,257.16A18.81,18.81 0,0 0,349 258a26.55,26.55 0,0 0,-24.72 -21.51,40.84 40.84,0 0,0 -69,-13.08A32.06,32.06 0,0 0,213 253.82c0,1.13 0.06,2.25 0.17,3.35H213a18.9,18.9 0,0 0,0 37.8H354.67a18.9,18.9 0,0 0,0 -37.8Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="194.11"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#DB0909" />
                <item
                        android:offset="1"
                        android:color="#A10808" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M329.74,241c0,-1.22 0,-2.43 -0.09,-3.63a26.9,26.9 0,0 0,-5.35 -0.85,40.84 40.84,0 0,0 -69,-13.08A32.06,32.06 0,0 0,213 253.82c0,1.13 0.06,2.25 0.17,3.35H213a18.9,18.9 0,0 0,0 37.8h96.48A81.79,81.79 0,0 0,329.74 241Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="194.11"
                    android:endY="252.3"
                    android:endX="329.74"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E23A3A" />
                <item
                        android:offset="1"
                        android:color="#DD1130" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M255.34,223.43A32.06,32.06 0,0 0,213 253.82c0,1.13 0.06,2.25 0.17,3.35H213a18.89,18.89 0,0 0,-1.18 37.74A81.52,81.52 0,0 0,291 213.41c0,-1.15 0,-2.29 -0.08,-3.43a41.46,41.46 0,0 0,-5 -0.33A40.73,40.73 0,0 0,255.34 223.43Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.27"
                    android:startX="194.11"
                    android:endY="252.27"
                    android:endX="291.01"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E44D4D" />
                <item
                        android:offset="1"
                        android:color="#E76161" />
            </gradient>
        </aapt:attr>
    </path>
    <path
            android:pathData="M425.54,288.63A19.26,19.26 0,0 1,412 256a18.21,18.21 0,0 1,13.56 -5.51,16.9 16.9,0 0,1 13.42,6l-3.37,3.26a12.48,12.48 0,0 0,-10 -4.74,13.79 13.79,0 0,0 -10.15,4.08 15.74,15.74 0,0 0,0 21,13.79 13.79,0 0,0 10.15,4.08q6.38,0 11.07,-5.36L440,282.1a17.81,17.81 0,0 1,-6.38 4.82A19.4,19.4 0,0 1,425.54 288.63Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M448.9,251.3v36.51h-4.69V251.3Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M452.93,275.32a13.24,13.24 0,0 1,3.62 -9.54,12.34 12.34,0 0,1 9.23,-3.78 12.16,12.16 0,0 1,9.18 3.78,14.22 14.22,0 0,1 0,19.07 12.16,12.16 0,0 1,-9.18 3.78,12.34 12.34,0 0,1 -9.23,-3.78A13.21,13.21 0,0 1,452.93 275.32ZM457.62,275.32a9.11,9.11 0,0 0,2.35 6.52,8 8,0 0,0 11.63,0 10.2,10.2 0,0 0,0 -13,7.91 7.91,0 0,0 -11.63,0A9.06,9.06 0,0 0,457.62 275.32Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M504.59,287.81h-4.48v-3.47h-0.21a8.23,8.23 0,0 1,-3.29 3.06,9.4 9.4,0 0,1 -4.61,1.23q-4.59,0 -7.07,-2.63t-2.47,-7.47V262.82h4.69v15.4q0.15,6.12 6.17,6.12a5.83,5.83 0,0 0,4.69 -2.27,8.2 8.2,0 0,0 1.89,-5.43V262.82h4.69Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M520.51,288.63a11,11 0,0 1,-8.42 -3.88,14.56 14.56,0 0,1 0,-18.87 11,11 0,0 1,8.42 -3.88,10.8 10.8,0 0,1 5,1.18 8.76,8.76 0,0 1,3.49 3.11h0.21l-0.21,-3.47L529,251.3h4.69v36.51h-4.48v-3.47L529,284.34a8.68,8.68 0,0 1,-3.49 3.11A10.68,10.68 0,0 1,520.51 288.63ZM521.27,284.34a7.17,7.17 0,0 0,5.66 -2.5,10.33 10.33,0 0,0 0,-13 7.2,7.2 0,0 0,-5.66 -2.55,7.32 7.32,0 0,0 -5.66,2.55 9.32,9.32 0,0 0,-2.29 6.48,9.17 9.17,0 0,0 2.29,6.47A7.32,7.32 0,0 0,521.27 284.34Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M562.78,278.05a9.52,9.52 0,0 1,-3.51 7.71,13.42 13.42,0 0,1 -8.67,2.87 12.86,12.86 0,0 1,-8 -2.65,13.64 13.64,0 0,1 -4.8,-7.25l4.49,-1.83a11.62,11.62 0,0 0,1.28 3,9.63 9.63,0 0,0 1.91,2.27 8.72,8.72 0,0 0,2.42 1.47,7.4 7.4,0 0,0 2.81,0.54 8,8 0,0 0,5.25 -1.66,5.38 5.38,0 0,0 2,-4.41 5.29,5.29 0,0 0,-1.68 -3.93q-1.59,-1.58 -5.92,-3.06a58.57,58.57 0,0 1,-5.46 -2.14q-5.8,-3 -5.81,-8.72a8.89,8.89 0,0 1,3.21 -6.88,11.72 11.72,0 0,1 8,-2.86 12.28,12.28 0,0 1,7.24 2.14,10.07 10.07,0 0,1 4.08,5.25l-4.38,1.84a6.49,6.49 0,0 0,-2.43 -3.39,7.86 7.86,0 0,0 -9.05,0.17 4.42,4.42 0,0 0,-1.88 3.71,4.31 4.31,0 0,0 1.47,3.25q1.64,1.37 7.09,3.25t7.93,4.62A9.93,9.93 0,0 1,562.78 278.05Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M576.25,288.22a7.15,7.15 0,0 1,-5.08 -1.89,7 7,0 0,1 -2.06,-5.25v-14h-4.39v-4.29h4.39v-7.65h4.69v7.65h6.12v4.29H573.8v12.44c0,1.67 0.32,2.8 1,3.39a3.14,3.14 0,0 0,2.19 0.89,5 5,0 0,0 1.1,-0.12 5.48,5.48 0,0 0,1 -0.34l1.48,4.19A12.62,12.62 0,0 1,576.25 288.22Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M589.1,287.81h-4.69v-25h4.49v4.08h0.2a6.82,6.82 0,0 1,2.93 -3.39,8.17 8.17,0 0,1 4.36,-1.4 8.76,8.76 0,0 1,3.47 0.61l-1.43,4.54a7.69,7.69 0,0 0,-2.75 -0.36,6.11 6.11,0 0,0 -4.62,2.14 7.17,7.17 0,0 0,-2 5Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M612.61,288.63a12,12 0,0 1,-9.08 -3.78,13.3 13.3,0 0,1 -3.57,-9.53 13.61,13.61 0,0 1,3.47 -9.52,12.46 12.46,0 0,1 17.72,-0.2q3.3,3.6 3.29,10.07l-0.05,0.51L604.76,276.18a8.13,8.13 0,0 0,2.44 5.92,7.83 7.83,0 0,0 5.61,2.24c3,0 5.34,-1.49 7,-4.48l4.18,2a12.46,12.46 0,0 1,-4.66 4.94A12.91,12.91 0,0 1,612.61 288.63ZM605.11,272.31h14.33a6.2,6.2 0,0 0,-2.11 -4.31,7.43 7.43,0 0,0 -5.13,-1.71 6.77,6.77 0,0 0,-4.56 1.63A7.79,7.79 0,0 0,605.11 272.31Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M638.47,262a11.62,11.62 0,0 1,8.21 2.79,9.87 9.87,0 0,1 3,7.62v15.4L645.2,287.81v-3.47L645,284.34a9,9 0,0 1,-7.76 4.29,10.09 10.09,0 0,1 -6.91,-2.45 7.82,7.82 0,0 1,-2.78 -6.12,7.43 7.43,0 0,1 2.94,-6.17 12.33,12.33 0,0 1,7.82 -2.3,13.86 13.86,0 0,1 6.89,1.53v-1.07a5.34,5.34 0,0 0,-1.94 -4.15,6.63 6.63,0 0,0 -4.54,-1.71 7.18,7.18 0,0 0,-6.22 3.31l-4.13,-2.6Q631.79,262 638.47,262ZM632.4,280.16a3.74,3.74 0,0 0,1.55 3.06,5.73 5.73,0 0,0 3.65,1.23 7.51,7.51 0,0 0,5.28 -2.2,6.89 6.89,0 0,0 2.32,-5.15 9.67,9.67 0,0 0,-6.12 -1.73,8 8,0 0,0 -4.77,1.37A4.11,4.11 0,0 0,632.4 280.16Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M659.68,287.81H655v-25h4.49v3.47h0.2a8.36,8.36 0,0 1,3.29 -3.06,9 9,0 0,1 4.41,-1.23 9.15,9.15 0,0 1,4.85 1.28,7.55 7.55,0 0,1 3.06,3.52 9.75,9.75 0,0 1,8.62 -4.8,8.45 8.45,0 0,1 6.68,2.66c1.56,1.77 2.34,4.28 2.34,7.55v15.6h-4.69V272.92q0,-3.53 -1.27,-5.08c-0.85,-1 -2.28,-1.55 -4.29,-1.55a5.61,5.61 0,0 0,-4.54 2.29,8.43 8.43,0 0,0 -1.83,5.41v13.82h-4.69V272.92q0,-3.53 -1.28,-5.08c-0.85,-1 -2.28,-1.55 -4.28,-1.55a5.58,5.58 0,0 0,-4.54 2.29,8.38 8.38,0 0,0 -1.84,5.41Z"
            android:fillColor="#E76161" />
    <path android:pathData="M-13.76,555.76c10.3,-20.89 58.91,-113.94 157.31,-139.7C261.3,385.24 405.9,462.43 469.89,613.28">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="194.11"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M318.2,592.15c52.89,-55.46 139,-131.3 263,-187.83 223.69,-102 495.29,-119.94 515.35,-62.21 13,37.39 -73.5,124.43 -496.69,339.65">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="400.11"
                    android:endX="900"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M-57.58,195c206.91,86.6 494,-219.13 453.91,-347.48C353.52,-289.67 -103.15,-353.41 -203.15,-176 -265.5,-65.35 -189.57,139.73 -57.58,195Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="-100"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M698.42,648.89C625.71,546 764,320.79 920.68,218.45c46.61,-30.44 110.17,-72 164.35,-50.08 102.25,41.28 158.19,303.22 28.17,446.08C996.65,742.52 762.64,739.78 698.42,648.89Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="700.11"
                    android:endX="900.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M339.91,-42.46a246.52,141.46 0,1 0,493.04 0a246.52,141.46 0,1 0,-493.04 0z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="400.11"
                    android:endX="800.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_cloudstreamlogotv_pre_2.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:aapt="http://schemas.android.com/aapt"
        android:width="907.09dp"
        android:height="510.24dp"
        android:viewportWidth="907.09"
        android:viewportHeight="510.24">
    <path
            android:strokeWidth="1"
            android:pathData="M-20.09,-10.91h949.79v534.26h-949.79z"
            android:fillColor="#121212"
            android:strokeColor="#fff" />
    <path android:pathData="M273.68,250.58a18.79,18.79 0,0 0,-5.64 0.86,26.56 26.56,0 0,0 -24.73,-21.51 40.83,40.83 0,0 0,-68.95 -13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H273.68a18.9,18.9 0,0 0,0 -37.8Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="245.72"
                    android:startX="113.12"
                    android:endY="245.72"
                    android:endX="292.58"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#DB0909" />
                <item
                        android:offset="1"
                        android:color="#A10808" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M248.76,234.41c0,-1.22 0,-2.42 -0.09,-3.63a27,27 0,0 0,-5.36 -0.85,40.83 40.83,0 0,0 -68.95,-13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H228.5A81.75,81.75 0,0 0,248.76 234.41Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="245.72"
                    android:startX="113.12"
                    android:endY="245.72"
                    android:endX="248.76"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E23A3A" />
                <item
                        android:offset="1"
                        android:color="#DD1130" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M174.36,216.85A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.89,18.89 0,0 0,-1.18 37.74A81.53,81.53 0,0 0,210 206.83c0,-1.15 0,-2.29 -0.09,-3.43a41.33,41.33 0,0 0,-5 -0.33A40.71,40.71 0,0 0,174.36 216.85Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="245.69"
                    android:startX="113.12"
                    android:endY="245.69"
                    android:endX="210.03"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E44D4D" />
                <item
                        android:offset="1"
                        android:color="#E76161" />
            </gradient>
        </aapt:attr>
    </path>

    <path
            android:pathData="M358.81,285q-13.53,0 -22.64,-9.1t-9,-22.72q0,-13.62 9,-22.64 9,-9.18 22.64,-9.19 13.79,0 22.38,10l-5.62,5.44a20.82,20.82 0,0 0,-16.76 -7.91,23 23,0 0,0 -16.94,6.81q-6.72,6.72 -6.72,17.53t6.72,17.53a23,23 0,0 0,16.94 6.81q10.63,0 18.46,-8.94l5.7,5.53a29.57,29.57 0,0 1,-10.63 8A32.44,32.44 0,0 1,358.81 285Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M397.78,222.69v60.93H390V222.69Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M404.5,262.77q0,-9.61 6,-15.91a20.6,20.6 0,0 1,15.41 -6.3,20.31 20.31,0 0,1 15.31,6.3 21.87,21.87 0,0 1,6.13 15.91q0,9.71 -6.13,15.92A20.3,20.3 0,0 1,426 285a20.6,20.6 0,0 1,-15.41 -6.29Q404.5,272.39 404.5,262.77ZM412.33,262.77a15.31,15.31 0,0 0,3.91 10.9,13.38 13.38,0 0,0 19.41,0 17,17 0,0 0,0 -21.7,13.18 13.18,0 0,0 -19.41,0A15.18,15.18 0,0 0,412.33 262.77Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M490.7,283.62h-7.48v-5.78h-0.35a13.86,13.86 0,0 1,-5.48 5.1,15.77 15.77,0 0,1 -7.7,2q-7.67,0 -11.79,-4.38t-4.13,-12.47v-26.2h7.83v25.69q0.25,10.22 10.3,10.22a9.81,9.81 0,0 0,7.83 -3.79,13.7 13.7,0 0,0 3.14,-9.06V241.93h7.83Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M517.25,285a18.34,18.34 0,0 1,-14 -6.46,24.34 24.34,0 0,1 0,-31.49 18.35,18.35 0,0 1,14 -6.47,18.07 18.07,0 0,1 8.39,2 14.84,14.84 0,0 1,5.83 5.19h0.34l-0.34,-5.78L531.47,222.69h7.82v60.93h-7.48v-5.78h-0.34a14.84,14.84 0,0 1,-5.83 5.19A18.07,18.07 0,0 1,517.25 285ZM518.53,277.86a12,12 0,0 0,9.45 -4.17q3.82,-4.17 3.83,-10.9A15.54,15.54 0,0 0,528 252a12.05,12.05 0,0 0,-9.45 -4.26,12.19 12.19,0 0,0 -9.44,4.26 15.5,15.5 0,0 0,-3.83 10.8,15.32 15.32,0 0,0 3.83,10.81A12.19,12.19 0,0 0,518.53 277.84Z"
            android:fillColor="#E23A3A" />
    <path
            android:pathData="M587.8,267.33a15.91,15.91 0,0 1,-5.87 12.88A22.43,22.43 0,0 1,567.46 285a21.39,21.39 0,0 1,-13.36 -4.42,22.65 22.65,0 0,1 -8,-12.08l7.49,-3.07a19.3,19.3 0,0 0,2.13 4.94,15.72 15.72,0 0,0 3.19,3.78 14.25,14.25 0,0 0,4 2.47,12.26 12.26,0 0,0 4.68,0.9 13.47,13.47 0,0 0,8.76 -2.77,9 9,0 0,0 3.41,-7.36 8.8,8.8 0,0 0,-2.81 -6.55q-2.64,-2.64 -9.87,-5.11 -7.32,-2.64 -9.11,-3.57 -9.69,-4.94 -9.7,-14.55a14.84,14.84 0,0 1,5.37 -11.49A19.53,19.53 0,0 1,567 221.33a20.5,20.5 0,0 1,12.09 3.58,16.67 16.67,0 0,1 6.8,8.76l-7.31,3.06a10.84,10.84 0,0 0,-4 -5.65,13.1 13.1,0 0,0 -15.11,0.28 7.41,7.41 0,0 0,-3.15 6.19,7.14 7.14,0 0,0 2.47,5.42q2.73,2.29 11.83,5.42 9.27,3.17 13.23,7.72A16.53,16.53 0,0 1,587.8 267.33Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M610.26,284.3a11.88,11.88 0,0 1,-8.46 -3.15c-2.25,-2.09 -3.4,-5 -3.45,-8.76V249.07H591v-7.14h7.32V229.16h7.83v12.77h10.21v7.14H606.18v20.77c0,2.78 0.54,4.66 1.61,5.66a5.27,5.27 0,0 0,3.66 1.48,7.9 7.9,0 0,0 1.83,-0.21 9,9 0,0 0,1.66 -0.55l2.47,7A21.23,21.23 0,0 1,610.26 284.3Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M631.71,283.62h-7.83V241.93h7.48v6.8h0.35a11.31,11.31 0,0 1,4.89 -5.66,13.66 13.66,0 0,1 7.27,-2.34 14.7,14.7 0,0 1,5.79 1l-2.38,7.57a12.93,12.93 0,0 0,-4.6 -0.6,10.11 10.11,0 0,0 -7.7,3.58 12,12 0,0 0,-3.27 8.34Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M670.93,285a19.93,19.93 0,0 1,-15.14 -6.29q-6,-6.3 -6,-15.92a22.65,22.65 0,0 1,5.79 -15.87,19.15 19.15,0 0,1 14.8,-6.34q9.29,0 14.77,6t5.49,16.81l-0.09,0.85L657.83,264.24a13.56,13.56 0,0 0,4.08 9.87,13.06 13.06,0 0,0 9.36,3.75q7.49,0 11.75,-7.49l7,3.4a20.69,20.69 0,0 1,-7.78 8.25A21.51,21.51 0,0 1,670.93 285ZM658.42,257.77h23.92a10.43,10.43 0,0 0,-3.53 -7.19,12.38 12.38,0 0,0 -8.56,-2.85 11.34,11.34 0,0 0,-7.61 2.72A13.09,13.09 0,0 0,658.42 257.75Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M714.08,240.56q8.67,0 13.7,4.64c3.34,3.1 5,7.33 5,12.72v25.7h-7.49v-5.78H725Q720.11,285 712,285a16.83,16.83 0,0 1,-11.53 -4.08,13 13,0 0,1 -4.63,-10.21 12.38,12.38 0,0 1,4.89 -10.3q4.89,-3.83 13.06,-3.83a23.16,23.16 0,0 1,11.49 2.55v-1.78a8.9,8.9 0,0 0,-3.24 -6.94,11.08 11.08,0 0,0 -7.57,-2.85 12,12 0,0 0,-10.38 5.53l-6.89,-4.34Q702.93,240.57 714.08,240.56ZM704,270.86a6.24,6.24 0,0 0,2.59 5.1,9.57 9.57,0 0,0 6.09,2.05 12.5,12.5 0,0 0,8.81 -3.66,11.47 11.47,0 0,0 3.87,-8.6q-3.66,-2.88 -10.21,-2.89a13.22,13.22 0,0 0,-8 2.3A6.81,6.81 0,0 0,704 270.86Z"
            android:fillColor="#E76161" />
    <path
            android:pathData="M749.47,283.62h-7.82V241.93h7.48v5.78h0.34a14,14 0,0 1,5.49 -5.1,15.06 15.06,0 0,1 7.36,-2.05 15.22,15.22 0,0 1,8.09 2.13,12.56 12.56,0 0,1 5.1,5.87q5.19,-8 14.39,-8 7.23,0 11.14,4.43T805,257.58v26h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.06,9v23.06h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.07,9Z"
            android:fillColor="#E76161" />

    <path android:pathData="M-13.76,555.76c10.3,-20.89 58.91,-113.94 157.31,-139.7C261.3,385.24 405.9,462.43 469.89,613.28">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="194.11"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M318.2,592.15c52.89,-55.46 139,-131.3 263,-187.83 223.69,-102 495.29,-119.94 515.35,-62.21 13,37.39 -73.5,124.43 -496.69,339.65">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="400.11"
                    android:endX="900"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M-57.58,195c206.91,86.6 494,-219.13 453.91,-347.48C353.52,-289.67 -103.15,-353.41 -203.15,-176 -265.5,-65.35 -189.57,139.73 -57.58,195Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="252.3"
                    android:startX="-100"
                    android:endY="252.3"
                    android:endX="373.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M698.42,648.89C625.71,546 764,320.79 920.68,218.45c46.61,-30.44 110.17,-72 164.35,-50.08 102.25,41.28 158.19,303.22 28.17,446.08C996.65,742.52 762.64,739.78 698.42,648.89Z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="700.11"
                    android:endX="900.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
    <path android:pathData="M339.91,-42.46a246.52,141.46 0,1 0,493.04 0a246.52,141.46 0,1 0,-493.04 0z">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startX="400.11"
                    android:endX="800.57"
                    android:type="linear">
                <item
                        android:offset="0"
                        android:color="#E76161" />
                <item
                        android:offset="1"
                        android:color="#E23A3A" />
            </gradient>
        </aapt:attr>
    </path>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_dashboard_black_24dp.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="24.0"
        android:viewportHeight="24.0">
    <path
            android:fillColor="#FF000000"
            android:pathData="M3,13h8L11,3L3,3v10zM3,21h8v-6L3,15v6zM13,21h8L21,11h-8v10zM13,3v6h8L21,3h-8z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_github_logo.xml
================================================
<vector android:tint="?attr/white" xmlns:tools="http://schemas.android.com/tools" android:height="24dp" android:viewportHeight="1000"
        android:viewportWidth="1000" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="?attr/white" android:pathData="M455.34,24.62c-61.96,5.16 -121.85,22.37 -176.93,49.91c-80.55,40.62 -140.44,94.66 -190.36,170.73c-35.8,54.39 -60.24,116 -72.29,182.78C7.85,471.07 8.2,555.75 16.11,597.4c33.05,172.45 148.36,312.21 307.73,372.1c26.16,9.98 36.49,10.33 45.44,1.38c6.2,-6.2 6.88,-11.36 6.88,-52.67l0,-45.44l-43.72,-0c-37.86,-0 -46.47,-1.03 -60.24,-7.57c-27.19,-12.39 -45.44,-32.35 -62.65,-68.16c-15.15,-31.67 -34.42,-55.42 -58.17,-72.29c-23.75,-16.87 -5.16,-29.95 28.57,-20.31c14.8,4.48 23.06,9.64 37.86,25.13c10.33,10.67 24.44,26.85 30.98,36.14c7.57,10.67 18.93,20.65 30.98,27.54c16.52,9.29 22.03,10.67 44.75,10.33c14.11,-0.35 31.67,-2.76 38.9,-5.16c12.05,-4.48 13.77,-7.23 20.65,-27.54c4.13,-12.05 11.02,-26.85 15.49,-32.36l7.92,-9.98l-35.46,-7.57c-63.68,-13.43 -99.82,-32.01 -132.52,-68.16c-33.73,-36.83 -52.67,-94.31 -52.67,-160.4c0,-51.63 9.98,-84.68 36.83,-121.17l11.7,-16.18l-4.13,-21c-7.23,-37.52 2.75,-103.96 16.52,-109.12c14.46,-5.51 72.97,15.83 112.21,40.96l16.18,10.33l32.01,-6.2c44.06,-8.95 139.41,-9.29 183.47,-0.34l31.33,6.54l30.29,-17.56c33.73,-19.28 64.71,-30.64 87.43,-32.01l15.49,-1.03l6.54,17.21c8.61,22.03 11.71,70.91 5.85,93.97l-4.13,17.56l15.49,23.41c27.54,41.99 31.67,57.14 31.67,116.35c-0.34,43.37 -1.38,56.11 -7.92,79.17c-19.28,67.12 -60.24,110.84 -125.3,134.59c-8.26,3.1 -30.64,8.95 -50.25,13.08l-35.46,7.57l7.57,9.29c4.13,5.51 10.67,17.9 14.46,27.54c6.88,16.18 7.57,26.16 8.61,107.4c0.69,59.9 2.41,90.88 5.16,93.97c11.71,14.46 27.88,11.71 83.65,-14.8c67.12,-31.32 136.31,-88.12 182.09,-149.39c42.68,-56.45 77.11,-136.31 89.84,-206.88c7.92,-43.72 7.92,-121.51 0,-165.23c-19.96,-110.5 -81.58,-218.24 -165.57,-288.8C716.26,54.91 586.14,12.92 455.34,24.62z"
          tools:ignore="VectorPath"/>
</vector>


================================================
FILE: app/src/main/res/drawable/ic_home_black_24dp.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="24.0"
        android:viewportHeight="24.0">
    <path
            android:fillColor="#FF000000"
            android:pathData="M10,20v-6h4v6h5v-8h3L12,3 2,12h3v8z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_launcher_background.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<vector
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:height="108dp"
        android:width="108dp"
        android:viewportHeight="108"
        android:viewportWidth="108">
    <path android:fillColor="#3DDC84"
          android:pathData="M0,0h108v108h-108z"/>
    <path android:fillColor="#00000000" android:pathData="M9,0L9,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,0L19,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M29,0L29,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M39,0L39,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M49,0L49,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M59,0L59,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M69,0L69,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M79,0L79,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M89,0L89,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M99,0L99,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,9L108,9"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,19L108,19"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,29L108,29"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,39L108,39"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,49L108,49"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,59L108,59"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,69L108,69"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,79L108,79"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,89L108,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,99L108,99"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,29L89,29"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,39L89,39"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,49L89,49"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,59L89,59"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,69L89,69"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,79L89,79"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M29,19L29,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M39,19L39,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M49,19L49,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M59,19L59,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M69,19L69,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M79,19L79,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_launcher_foreground.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108"
    android:name="vector">
  <group android:scaleX="0.1755477"
      android:scaleY="0.1755477"
      android:translateX="29.16"
      android:translateY="29.16">
      <path android:name="path"

            android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
            android:fillColor="#2309db" android:strokeWidth="1"
            tools:ignore="VectorPath"/>
      <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
            android:fillColor="#2149d8" android:strokeWidth="1"/>
      <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
            android:fillColor="#5c89f7" android:strokeWidth="1"/>
  </group>
</vector>


================================================
FILE: app/src/main/res/drawable/ic_notifications_black_24dp.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="24.0"
        android:viewportHeight="24.0">
    <path
            android:fillColor="#FF000000"
            android:pathData="M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.89,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32L13.5,4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_outline_home_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,5.69l5,4.5V18h-2v-6H9v6H7v-7.81l5,-4.5M12,3L2,12h3v8h6v-6h2v6h6v-8h3L12,3z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_outline_info_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M11,7h2v2h-2zM11,11h2v6h-2zM12,2C6.48,2 2,6.48 2,12s4.48,10 10,10 10,-4.48 10,-10S17.52,2 12,2zM12,20c-4.41,0 -8,-3.59 -8,-8s3.59,-8 8,-8 8,3.59 8,8 -3.59,8 -8,8z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_outline_remove_red_eye_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M12,6.5c3.79,0 7.17,2.13 8.82,5.5 -1.65,3.37 -5.02,5.5 -8.82,5.5S4.83,15.37 3.18,12C4.83,8.63 8.21,6.5 12,6.5m0,-2C7,4.5 2.73,7.61 1,12c1.73,4.39 6,7.5 11,7.5s9.27,-3.11 11,-7.5c-1.73,-4.39 -6,-7.5 -11,-7.5zM12,9.5c1.38,0 2.5,1.12 2.5,2.5s-1.12,2.5 -2.5,2.5 -2.5,-1.12 -2.5,-2.5 1.12,-2.5 2.5,-2.5m0,-2c-2.48,0 -4.5,2.02 -4.5,4.5s2.02,4.5 4.5,4.5 4.5,-2.02 4.5,-4.5 -2.02,-4.5 -4.5,-4.5z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_outline_settings_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M19.43,12.98c0.04,-0.32 0.07,-0.64 0.07,-0.98 0,-0.34 -0.03,-0.66 -0.07,-0.98l2.11,-1.65c0.19,-0.15 0.24,-0.42 0.12,-0.64l-2,-3.46c-0.09,-0.16 -0.26,-0.25 -0.44,-0.25 -0.06,0 -0.12,0.01 -0.17,0.03l-2.49,1c-0.52,-0.4 -1.08,-0.73 -1.69,-0.98l-0.38,-2.65C14.46,2.18 14.25,2 14,2h-4c-0.25,0 -0.46,0.18 -0.49,0.42l-0.38,2.65c-0.61,0.25 -1.17,0.59 -1.69,0.98l-2.49,-1c-0.06,-0.02 -0.12,-0.03 -0.18,-0.03 -0.17,0 -0.34,0.09 -0.43,0.25l-2,3.46c-0.13,0.22 -0.07,0.49 0.12,0.64l2.11,1.65c-0.04,0.32 -0.07,0.65 -0.07,0.98 0,0.33 0.03,0.66 0.07,0.98l-2.11,1.65c-0.19,0.15 -0.24,0.42 -0.12,0.64l2,3.46c0.09,0.16 0.26,0.25 0.44,0.25 0.06,0 0.12,-0.01 0.17,-0.03l2.49,-1c0.52,0.4 1.08,0.73 1.69,0.98l0.38,2.65c0.03,0.24 0.24,0.42 0.49,0.42h4c0.25,0 0.46,-0.18 0.49,-0.42l0.38,-2.65c0.61,-0.25 1.17,-0.59 1.69,-0.98l2.49,1c0.06,0.02 0.12,0.03 0.18,0.03 0.17,0 0.34,-0.09 0.43,-0.25l2,-3.46c0.12,-0.22 0.07,-0.49 -0.12,-0.64l-2.11,-1.65zM17.45,11.27c0.04,0.31 0.05,0.52 0.05,0.73 0,0.21 -0.02,0.43 -0.05,0.73l-0.14,1.13 0.89,0.7 1.08,0.84 -0.7,1.21 -1.27,-0.51 -1.04,-0.42 -0.9,0.68c-0.43,0.32 -0.84,0.56 -1.25,0.73l-1.06,0.43 -0.16,1.13 -0.2,1.35h-1.4l-0.19,-1.35 -0.16,-1.13 -1.06,-0.43c-0.43,-0.18 -0.83,-0.41 -1.23,-0.71l-0.91,-0.7 -1.06,0.43 -1.27,0.51 -0.7,-1.21 1.08,-0.84 0.89,-0.7 -0.14,-1.13c-0.03,-0.31 -0.05,-0.54 -0.05,-0.74s0.02,-0.43 0.05,-0.73l0.14,-1.13 -0.89,-0.7 -1.08,-0.84 0.7,-1.21 1.27,0.51 1.04,0.42 0.9,-0.68c0.43,-0.32 0.84,-0.56 1.25,-0.73l1.06,-0.43 0.16,-1.13 0.2,-1.35h1.39l0.19,1.35 0.16,1.13 1.06,0.43c0.43,0.18 0.83,0.41 1.23,0.71l0.91,0.7 1.06,-0.43 1.27,-0.51 0.7,1.21 -1.07,0.85 -0.89,0.7 0.14,1.13zM12,8c-2.21,0 -4,1.79 -4,4s1.79,4 4,4 4,-1.79 4,-4 -1.79,-4 -4,-4zM12,14c-1.1,0 -2,-0.9 -2,-2s0.9,-2 2,-2 2,0.9 2,2 -0.9,2 -2,2z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_outline_share_24.xml
================================================
<vector android:height="24dp" android:tint="#FFFFFF"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M18,16.08c-0.76,0 -1.44,0.3 -1.96,0.77L8.91,12.7c0.05,-0.23 0.09,-0.46 0.09,-0.7s-0.04,-0.47 -0.09,-0.7l7.05,-4.11c0.54,0.5 1.25,0.81 2.04,0.81 1.66,0 3,-1.34 3,-3s-1.34,-3 -3,-3 -3,1.34 -3,3c0,0.24 0.04,0.47 0.09,0.7L8.04,9.81C7.5,9.31 6.79,9 6,9c-1.66,0 -3,1.34 -3,3s1.34,3 3,3c0.79,0 1.5,-0.31 2.04,-0.81l7.12,4.16c-0.05,0.21 -0.08,0.43 -0.08,0.65 0,1.61 1.31,2.92 2.92,2.92s2.92,-1.31 2.92,-2.92c0,-1.61 -1.31,-2.92 -2.92,-2.92zM18,4c0.55,0 1,0.45 1,1s-0.45,1 -1,1 -1,-0.45 -1,-1 0.45,-1 1,-1zM6,13c-0.55,0 -1,-0.45 -1,-1s0.45,-1 1,-1 1,0.45 1,1 -0.45,1 -1,1zM18,20.02c-0.55,0 -1,-0.45 -1,-1s0.45,-1 1,-1 1,0.45 1,1 -0.45,1 -1,1z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_outline_subtitles_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M20,4L4,4c-1.1,0 -2,0.9 -2,2v12c0,1.1 0.9,2 2,2h16c1.1,0 2,-0.9 2,-2L22,6c0,-1.1 -0.9,-2 -2,-2zM20,18L4,18L4,6h16v12zM6,10h2v2L6,12zM6,14h8v2L6,16zM16,14h2v2h-2zM10,10h8v2h-8z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_outline_voice_over_off_24.xml
================================================
<vector android:height="24dp" android:tint="?attr/white"
    android:viewportHeight="24" android:viewportWidth="24"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M16.76,5.36l-1.68,1.69c0.8,1.13 0.83,2.58 0.09,3.74l1.7,1.7c1.9,-2.02 1.87,-4.98 -0.11,-7.13zM20.07,2l-1.63,1.63c2.72,2.97 2.76,7.39 0.14,10.56l1.64,1.64c3.74,-3.89 3.71,-9.84 -0.15,-13.83zM9.43,5.04l3.53,3.53c-0.2,-1.86 -1.67,-3.33 -3.53,-3.53zM4.41,2.86L3,4.27l2.62,2.62C5.23,7.5 5,8.22 5,9c0,2.21 1.79,4 4,4 0.78,0 1.5,-0.23 2.11,-0.62l4.4,4.4C13.74,15.6 10.78,15 9,15c-2.67,0 -8,1.34 -8,4v2h16v-2c0,-0.37 -0.11,-0.7 -0.29,-1.02L19.73,21l1.41,-1.41L4.41,2.86zM3,19c0.22,-0.72 3.31,-2 6,-2 2.7,0 5.8,1.29 6,2L3,19zM9,11c-1.1,0 -2,-0.9 -2,-2 0,-0.22 0.04,-0.42 0.11,-0.62l2.51,2.51c-0.2,0.07 -0.4,0.11 -0.62,0.11z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/mal_logo.xml
================================================
<vector
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:name="vector"
        android:width="30dp"
        android:height="30dp"
        android:viewportWidth="850"
        android:viewportHeight="850"
        android:tint="?attr/white"
>
    <path
            android:name="path"
            android:pathData="M 402 556 C 401.57 555.28 401 554.28 400.25 553 C 387.65 531.12 334.6 431 378.5 352.25 C 385.214 340.432 393.638 329.673 403.5 320.32 C 423 303 449 293.09 460.38 290.67 L 554.88 290.67 L 570 342.59 L 474 342.59 C 439.5 353.17 427.17 389 428 395.8 L 494.67 395.8 L 494.67 349 L 560.33 349 L 560.33 522.67 L 494.67 522.67 L 494.67 445.67 L 423 445.67 C 422.007 448.508 421.834 451.568 422.5 454.5 C 427.77 479.68 441.74 506.43 450 521 Z M 606.67 523.33 L 606.67 290.67 L 669.33 290.67 L 669.33 471.33 L 750.67 471.33 L 738 523.33 L 606.67 523.33 Z M 268.5 523.33 L 268.5 384 L 214 445.5 L 163.5 384 L 163.5 523.33 L 102.5 523.33 L 102.5 290.67 L 165.5 290.67 L 213.5 362.5 L 266.5 290.67 L 329 290.67 L 329 523.33 L 268.5 523.33 Z"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
</vector>



================================================
FILE: app/src/main/res/drawable/material_outline_background.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="?attr/primaryBlackBackground"/>
    <stroke android:width="@dimen/mtrl_btn_stroke_size" android:color="@color/mtrl_btn_stroke_color_selector"/>
</shape>


================================================
FILE: app/src/main/res/drawable/monke_benene.xml
================================================
<vector android:height="24dp" android:viewportHeight="36"
    android:viewportWidth="33.91" android:width="22.606667dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M8.57,13.19c0,-3.37 -4.21,-2.53 -3.37,0.84s2.53,4.2 2.53,4.2ZM30.44,13.19c0,-3.37 4.2,-2.53 3.36,0.84s-2.52,4.2 -2.52,4.2Z"/>
    <path android:fillColor="#31373d" android:pathData="M31.83,18c0,9.16 -4,11.85 -12.33,11.85S7.18,27.17 7.18,18 11.13,0 19.5,0 31.83,8.85 31.83,18Z"/>
    <path android:fillColor="#66757f" android:pathData="M27.55,19.08c1.25,-3.75 1.76,-6.16 -0.37,-6.16L11.83,12.92c-2.13,0 -1.63,2.41 -0.38,6.16C7.31,28.5 18.8,29 19.5,29S31.53,28.13 27.55,19.08Z"/>
    <path android:fillColor="#31373d" android:pathData="M16.98,14.87a1.69,1.69 0,0 1,-3.37 0c0,-0.93 0.76,-0.84 1.69,-0.84S16.98,13.94 16.98,14.87ZM25.39,14.87a1.68,1.68 0,0 1,-3.36 0c0,-0.93 0.75,-0.84 1.68,-0.84S25.39,13.94 25.39,14.87Z"/>
    <path android:fillColor="#31373d" android:pathData="M16.26,19.63a1.2,0.84 0,1 0,2.4 0a1.2,0.84 0,1 0,-2.4 0z"/>
    <path android:fillColor="#31373d" android:pathData="M22.75,19.63c0,0.46 -0.54,0.84 -1.21,0.84s-1.2,-0.38 -1.2,-0.84 0.54,-0.84 1.2,-0.84S22.75,19.16 22.75,19.63Z"/>
    <path android:fillColor="#99aab5" android:pathData="M22.04,17.43a3.06,3.06 0,0 0,-2.54 0.7,3 3,0 0,0 -2.54,-0.7c-2.65,0.35 -2.76,2.76 -1.63,2.61 0.64,-0.09 0.11,-0.79 1.44,-1.31a3.16,3.16 0,0 1,2.73 0.56,3.16 3.16,0 0,1 2.73,-0.56c1.33,0.52 0.8,1.22 1.44,1.31C24.81,20.19 24.7,17.78 22.04,17.43Z"/>
    <path android:fillColor="#66757f" android:pathData="M7.94,13.71c1.18,-1 -0.91,-3.16 -1.85,-2.14 -0.29,0.32 0.78,-0.15 1.13,0.92C7.47,13.28 7.22,14.34 7.94,13.71ZM31.07,13.71c-1.18,-1 0.9,-3.16 1.84,-2.14 0.29,0.32 -0.77,-0.15 -1.12,0.92C31.53,13.28 31.79,14.34 31.07,13.71Z"/>
    <path android:fillColor="#31373d" android:pathData="M24.13,23.59a16.07,16.07 0,0 1,-3.21 0.52,15.89 15.89,0 0,1 -2.9,-0.09l0,-0.91a16.84,16.84 0,0 0,2.9 0.09A16.19,16.19 0,0 0,24.13 22.68Z"/>
    <path android:fillColor="#31373d" android:pathData="M25.7,24.84c0.17,-0.58 -0.82,-0.91 -1.08,-1.8 -0.34,-1.14 0.86,-2.22 0.49,-2.57a0.67,0.67 0,0 0,-0.82 0.1,4.37 4.37,0 0,0 -0.49,2.57 4.49,4.49 0,0 0,1.09 1.8c0.12,0.13 0.3,0.31 0.49,0.27A0.48,0.48 0,0 0,25.7 24.84Z"/>
    <path android:fillColor="#ffe8b6" android:pathData="M18.21,16.52c-0.48,0.07 -0.89,1 -1.25,0.91s-0.22,-0.86 -0.43,-0.89 -0.33,0.75 -0.73,0.83c-0.19,0.05 -0.37,-0.09 -0.55,-0.28 -0.17,0.65 -0.33,1.47 -0.68,2.52 -1.22,3.64 -3.64,5.47 -6.07,7.89s1.82,4.86 4.25,3 4.79,-4.26 5.46,-7.29S18.75,17.87 18.21,16.52Z"/>
    <path android:fillColor="#ffd983" android:pathData="M18.21,19a14.71,14.71 0,0 1,-2.43 7.89c-1.82,2.42 -4.25,3 -2.43,0.6s3,-4.25 3.65,-6.67S18.21,16.58 18.21,19Z"/>
    <path android:fillColor="#ffcc4d" android:pathData="M12.75,26.29a3.56,3.56 0,0 0,-1.82 -3.64c-1.21,-0.63 -6.07,0.6 -2.43,0.6 1.82,0 2.43,1.22 1.21,2.43a1.87,1.87 0,0 0,-0.37 0.56c-0.26,0.21 -0.53,0.43 -0.84,0.66 -1.37,1 -3.55,2.56 -6.07,4.24C0.61,32.36 0,33 0,33.57c0,1.82 5.46,1.82 8.5,0.61a22.15,22.15 0,0 0,6.07 -4.25l2.43,-2.43A3.43,3.43 0,0 0,12.75 26.29Z"/>
    <path android:fillColor="#ffe8b6" android:pathData="M12.75,26.29A3.35,3.35 0,0 0,10.93 22a6.62,6.62 0,0 0,-6.68 0.61c-1.82,1.21 -1.21,2.43 -1.82,3s0.61,1.22 1.82,0 5.05,-3 6.68,-2.43C12.75,23.86 12.13,25.07 12.75,26.29Z"/>
    <path android:fillColor="#a6d388" android:pathData="M15.18,35.39L12.75,35.39c-1.22,0 -1.82,0.61 -2.43,0.61s-1.21,-1.21 0,-1.21 2.43,0 3,-0.61S16.39,35.39 15.18,35.39Z"/>
    <path android:fillColor="#3e721d" android:pathData="M10.32,35.39m-0.61,0a0.61,0.61 0,1 1,1.22 0a0.61,0.61 0,1 1,-1.22 0"/>
    <path android:fillColor="#ffcc4d" android:pathData="M18.94,31.14s-2.55,4.25 -3.76,4.25L12.75,35.39c-1.22,0 0,-0.6 0.6,-1.21s3,0 3,-3.64C16.39,28.72 18.94,31.14 18.94,31.14Z"/>
    <path android:fillColor="#ffe8b6" android:pathData="M15.18,25.68a4.56,4.56 0,0 1,4.24 5.46c-0.6,3.65 -3,4.25 -4.24,4.25L13.96,35.39c-1.21,0 -0.61,-0.6 0,-1.21s2.43,0 2.43,-3.64c0,-1.82 -2.43,-4.25 -3.64,-4.25A6.23,6.23 0,0 1,15.18 25.68Z"/>
    <path android:fillColor="#ffd983" android:pathData="M9.71,26.9c1.82,0 3,0.6 1.82,1.82a15.81,15.81 0,0 1,-6.07 3.64c-2.42,0.61 -4.85,0.61 -3,-0.61S8.36,26.9 9.71,26.9Z"/>
    <path android:fillColor="#c1694f" android:pathData="M0.61,33c0.61,0 0.61,0 0.61,0.4s0,0.81 -0.61,0.81 -0.61,-0.81 -0.61,-0.81S0,33 0.61,33Z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/monke_burrito.xml
================================================
<vector android:height="24dp" android:viewportHeight="34.64"
    android:viewportWidth="29.82" android:width="20.660507dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M4.48,13.19c0,-3.37 -4.21,-2.53 -3.37,0.84s2.53,4.2 2.53,4.2ZM26.35,13.19c0,-3.37 4.2,-2.53 3.36,0.84s-2.52,4.2 -2.52,4.2Z"/>
    <path android:fillColor="#31373d" android:pathData="M27.74,18c0,9.16 -4,11.85 -12.33,11.85S3.09,27.17 3.09,18 7.04,0 15.41,0 27.74,8.85 27.74,18Z"/>
    <path android:fillColor="#66757f" android:pathData="M23.46,19.08c1.25,-3.75 1.76,-6.16 -0.37,-6.16L7.74,12.92c-2.13,0 -1.63,2.41 -0.38,6.16C3.22,28.5 14.71,29 15.41,29S27.44,28.13 23.46,19.08Z"/>
    <path android:fillColor="#31373d" android:pathData="M12.89,14.87a1.69,1.69 0,0 1,-3.37 0c0,-0.93 0.76,-0.84 1.69,-0.84S12.89,13.94 12.89,14.87ZM21.3,14.87a1.68,1.68 0,0 1,-3.36 0c0,-0.93 0.75,-0.84 1.68,-0.84S21.3,13.94 21.3,14.87Z"/>
    <path android:fillColor="#31373d" android:pathData="M12.17,19.63a1.2,0.84 0,1 0,2.4 0a1.2,0.84 0,1 0,-2.4 0z"/>
    <path android:fillColor="#31373d" android:pathData="M18.66,19.63c0,0.46 -0.54,0.84 -1.21,0.84s-1.2,-0.38 -1.2,-0.84 0.54,-0.84 1.2,-0.84S18.66,19.16 18.66,19.63Z"/>
    <path android:fillColor="#99aab5" android:pathData="M17.95,17.43a3.06,3.06 0,0 0,-2.54 0.7,3 3,0 0,0 -2.54,-0.7c-2.65,0.35 -2.76,2.76 -1.63,2.61 0.64,-0.09 0.11,-0.79 1.44,-1.31a3.16,3.16 0,0 1,2.73 0.56,3.16 3.16,0 0,1 2.73,-0.56c1.33,0.52 0.8,1.22 1.44,1.31C20.72,20.19 20.61,17.78 17.95,17.43Z"/>
    <path android:fillColor="#66757f" android:pathData="M3.85,13.71c1.18,-1 -0.91,-3.16 -1.85,-2.14 -0.29,0.32 0.78,-0.15 1.13,0.92C3.38,13.28 3.13,14.34 3.85,13.71ZM26.98,13.71c-1.18,-1 0.9,-3.16 1.84,-2.14 0.29,0.32 -0.77,-0.15 -1.12,0.92C27.44,13.28 27.7,14.34 26.98,13.71Z"/>
    <path android:fillColor="#31373d" android:pathData="M20.04,23.59a16.07,16.07 0,0 1,-3.21 0.52,15.89 15.89,0 0,1 -2.9,-0.09l0,-0.91a16.84,16.84 0,0 0,2.9 0.09A16.19,16.19 0,0 0,20.04 22.68Z"/>
    <path android:fillColor="#31373d" android:pathData="M21.61,24.84c0.17,-0.58 -0.82,-0.91 -1.08,-1.8 -0.34,-1.14 0.86,-2.22 0.49,-2.57a0.67,0.67 0,0 0,-0.82 0.1,4.37 4.37,0 0,0 -0.49,2.57 4.49,4.49 0,0 0,1.09 1.8c0.12,0.13 0.3,0.31 0.49,0.27A0.48,0.48 0,0 0,21.61 24.84Z"/>
    <path android:fillColor="#ffcc4d" android:pathData="M3.54,26.08v0a2,2 0,0 0,0.22 1.54A1.94,1.94 0,0 0,5.04 28.73a1.41,1.41 0,0 0,0.58 0,3.46 3.46,0 0,1 2.14,0.22 0.42,0.42 0,0 1,0.22 0.37c0,0.26 0.32,0.41 0.76,0.42a2.72,2.72 0,0 0,1.9 -0.72l1,-1 2.19,-2.23a4.58,4.58 0,0 1,-5.19 0.21,2.82 2.82,0 0,1 -0.68,-4.32L4.14,25.49 4.04,25.56Z"/>
    <path android:fillColor="#ffac33" android:pathData="M7.21,27.73a0.62,0.62 0,0 0,0.68 -0.09,0.3 0.3,0 0,0 -0.09,-0.5 0.62,0.62 0,0 0,-0.68 0.09A0.29,0.29 0,0 0,7.21 27.73Z"/>
    <path android:fillColor="#d99e82" android:pathData="M4.72,27.43c0.11,0.23 0.32,0.28 0.48,0.12a0.68,0.68 0,0 0,0.12 -0.71,0.28 0.28,0 0,0 -0.48,-0.11A0.66,0.66 0,0 0,4.72 27.43Z"/>
    <path android:fillColor="#ffac33" android:pathData="M6.04,24.22a0.3,0.3 0,0 1,0.5 0.09,0.6 0.6,0 0,1 -0.1,0.68 0.28,0.28 0,0 1,-0.49 -0.09A0.59,0.59 0,0 1,6.04 24.22Z"/>
    <path android:fillColor="#d99e82" android:pathData="M9.59,28.29a0.81,0.81 0,0 1,0.74 -0.14c0.25,0.08 0.31,0.28 0.15,0.44a0.8,0.8 0,0 1,-0.74 0.15C9.5,28.66 9.43,28.46 9.59,28.29Z"/>
    <path android:fillColor="#bdbdbd" android:pathData="M0.63,33.12a3.6,3.6 0,0 0,1.66 1.29L7.75,29a3.47,3.47 0,0 0,-2.14 -0.22,1.41 1.41,0 0,1 -0.58,0ZM0.04,31.38l3.74,-3.74a2.13,2.13 0,0 1,-0.21 -1.56L4.04,25.56c-0.59,0 -1.44,-0.31 -1.73,0s0.45,0.85 0,1.73L0.89,28.74h0A3.58,3.58 0,0 0,0.04 31.38Z"/>
    <path android:fillColor="#808285" android:pathData="M3.85,34.63a3.77,3.77 0,0 0,2.06 -0.88l2.06,-2.06c0.59,-0.59 1.57,-0.2 2.36,-0.59 1.18,-0.59 0.59,-1.77 0.89,-2.07a0.86,0.86 0,0 0,0.15 -0.74l-0.74,0.74a2.72,2.72 0,0 1,-1.9 0.72Z"/>
    <path android:fillColor="#a6a6a6" android:pathData="M2.29,34.41a3.5,3.5 0,0 0,1.56 0.22l4.88,-4.88c-0.44,0 -0.77,-0.16 -0.76,-0.42a0.42,0.42 0,0 0,-0.22 -0.37Z"/>
    <path android:fillColor="#d8d8d8" android:pathData="M0.04,31.38a3.78,3.78 0,0 0,0.62 1.74L5.04,28.73a2,2 0,0 1,-1.28 -1.09Z"/>
    <path android:fillColor="#ffac33" android:pathData="M14.13,23.1a2.27,2.27 0,0 0,-1 -1.54,3.48 3.48,0 0,0 -4.22,0.38 2.48,2.48 0,0 0,-0.38 0.49l3,0a1.86,1.86 0,0 1,1.05 -0.28,1.6 1.6,0 0,1 1.08,0.55 0.73,0.73 0,0 1,0.18 0.35A0.39,0.39 0,0 1,14.13 23.1ZM8.49,22.43ZM13.88,24.43h0a2.09,2.09 0,0 0,0.25 -1.35,1.67 1.67,0 0,1 0,0.63 0.31,0.31 0,0 1,-0.15 0.08,0.44 0.44,0 0,1 -0.11,0.2l0,0A0.56,0.56 0,0 1,13.88 24.46Z"/>
    <path android:fillColor="#c1694f" android:pathData="M14.13,23.1h0Z"/>
    <path android:fillColor="#ffe8b6" android:pathData="M8.66,26a4.58,4.58 0,0 0,5.19 -0.21,3 3,0 0,0 -0.17,-4.8 4.53,4.53 0,0 0,-5.52 0.49l-0.18,0.2A2.82,2.82 0,0 0,8.66 26ZM8.49,22.45a2.48,2.48 0,0 1,0.38 -0.49,3.48 3.48,0 0,1 4.22,-0.38 2.27,2.27 0,0 1,1 1.54h0a2,2 0,0 1,-0.25 1.35,2.32 2.32,0 0,1 -0.41,0.55 3.48,3.48 0,0 1,-4.22 0.38,2.16 2.16,0 0,1 -0.77,-3h0"/>
    <path android:fillColor="#c1694f" android:pathData="M13.47,25a2.32,2.32 0,0 0,0.41 -0.55h0a0.56,0.56 0,0 0,0 -0.42l0,0a0.44,0.44 0,0 0,0.11 -0.2,0.31 0.31,0 0,0 0.15,-0.08 1.67,1.67 0,0 0,0 -0.63h0a0.39,0.39 0,0 0,-0.37 -0.08,0.73 0.73,0 0,0 -0.18,-0.35 1.6,1.6 0,0 0,-1.08 -0.55,1.86 1.86,0 0,0 -1.05,0.28l-3,0h0a2.16,2.16 0,0 0,0.77 3A3.48,3.48 0,0 0,13.47 25Z"/>
    <path android:fillColor="#f4900c" android:pathData="M12.5,22.16h0a3.52,3.52 0,0 0,-3.9 0.1,2.57 2.57,0 0,0 -0.2,0.35l3.05,-0.11A1.89,1.89 0,0 1,12.5 22.16Z"/>
    <path android:fillColor="#d99e82" android:pathData="M12.69,23.43m-0.42,0a0.42,0.42 0,1 1,0.84 0a0.42,0.42 0,1 1,-0.84 0"/>
    <path android:fillColor="#d99e82" android:pathData="M12.1,24.31m-0.63,0a0.63,0.63 0,1 1,1.26 0a0.63,0.63 0,1 1,-1.26 0"/>
    <path android:fillColor="#d99e82" android:pathData="M10.92,24.61m-0.42,0a0.42,0.42 0,1 1,0.84 0a0.42,0.42 0,1 1,-0.84 0"/>
    <path android:fillColor="#d99e82" android:pathData="M13.28,23.13m-0.21,0a0.21,0.21 0,1 1,0.42 0a0.21,0.21 0,1 1,-0.42 0"/>
    <path android:fillColor="#d99e82" android:pathData="M11.81,25.49m-0.42,0a0.42,0.42 0,1 1,0.84 0a0.42,0.42 0,1 1,-0.84 0"/>
    <path android:fillColor="#ffd983" android:pathData="M12.4,22.25m-0.63,0a0.63,0.63 0,1 1,1.26 0a0.63,0.63 0,1 1,-1.26 0"/>
    <path android:fillColor="#d99e82" android:pathData="M10.52,25.88a3,3 0,0 0,0.79 0,0.43 0.43,0 0,0 -0.09,-0.43 0.42,0.42 0,0 0,-0.59 0A0.42,0.42 0,0 0,10.52 25.88Z"/>
    <path android:fillColor="#77b255" android:pathData="M8.27,23.72a0.37,0.37 0,0 0,0.2 0.11v0.05a0.42,0.42 0,0 0,0.09 0.14,0.42 0.42,0 0,0 0,0.59 0.43,0.43 0,0 0,0.47 0.08h0l0.1,-0.07A0.42,0.42 0,0 0,9.74 24a0.51,0.51 0,0 0,0.09 -0.13,0.58 0.58,0 0,0 0.61,-0.13 0.52,0.52 0,0 0,0.14 -0.22,0.4 0.4,0 0,0 0.34,-0.11 0.4,0.4 0,0 0,0 -0.59l0.07,-0.09a0.83,0.83 0,0 0,0.82 -1.39,0.84 0.84,0 0,0 -1.42,0.47A0.39,0.39 0,0 0,10.04 22a0.37,0.37 0,0 0,-0.11 0.19,0.5 0.5,0 0,0 -0.19,0.1 0.42,0.42 0,0 0,-0.59 0h0a0.41,0.41 0,0 0,0 0.58,0.44 0.44,0 0,0 0,0.6 0.37,0.37 0,0 0,-0.19 -0.11,0.44 0.44,0 0,0 -0.1,-0.19 0.42,0.42 0,0 0,-0.59 0A0.41,0.41 0,0 0,8.27 23.72Z"/>
    <path android:fillColor="#a6d388" android:pathData="M8.85,23.43m-0.21,0a0.21,0.21 0,1 1,0.42 0a0.21,0.21 0,1 1,-0.42 0"/>
    <path android:fillColor="#ffd983" android:pathData="M9.74,25.2m-0.42,0a0.42,0.42 0,1 1,0.84 0a0.42,0.42 0,1 1,-0.84 0"/>
    <path android:fillColor="#ffd983" android:pathData="M9.89,24.75a0.61,0.61 0,0 0,0.88 0,0.52 0.52,0 0,0 0.14,-0.19 0.62,0.62 0,0 0,0.85 -0.85,0.67 0.67,0 0,0 0.19,-0.14 0.62,0.62 0,1 0,-1 -0.13,0.63 0.63,0 0,0 -0.2,0.13 0.86,0.86 0,0 0,-0.13 0.2,0.62 0.62,0 0,0 -0.75,1Z"/>
    <path android:fillColor="#ffe8b6" android:pathData="M10.7,24.24m-0.52,0a0.52,0.52 0,1 1,1.04 0a0.52,0.52 0,1 1,-1.04 0"/>
    <path android:fillColor="#ffe8b6" android:pathData="M11.29,23.35m-0.31,0a0.31,0.31 0,1 1,0.62 0a0.31,0.31 0,1 1,-0.62 0"/>
    <path android:fillColor="#ffe8b6" android:pathData="M11.88,22.76m-0.31,0a0.31,0.31 0,1 1,0.62 0a0.31,0.31 0,1 1,-0.62 0"/>
    <path android:fillColor="#a6d388" android:pathData="M11.51,21.95m-0.21,0a0.21,0.21 0,1 1,0.42 0a0.21,0.21 0,1 1,-0.42 0"/>
    <path android:fillColor="#77b255" android:pathData="M8.85,22.54m-0.42,0a0.42,0.42 0,1 1,0.84 0a0.42,0.42 0,1 1,-0.84 0"/>
    <path android:fillColor="#a6d388" android:pathData="M9.15,23.43m-0.42,0a0.42,0.42 0,1 1,0.84 0a0.42,0.42 0,1 1,-0.84 0"/>
    <path android:fillColor="#a6d388" android:pathData="M9.59,23.28a0.63,0.63 0,0 0,1 -0.72l0,0a0.42,0.42 0,1 0,0 -0.59A0.42,0.42 0,0 0,10.04 22a0.37,0.37 0,0 0,-0.12 0.27,0.66 0.66,0 0,0 -0.33,0.17A0.64,0.64 0,0 0,9.59 23.28Z"/>
    <path android:fillColor="#dd2e44" android:pathData="M10.7,21.58m-0.31,0a0.31,0.31 0,1 1,0.62 0a0.31,0.31 0,1 1,-0.62 0"/>
    <path android:fillColor="#dd2e44" android:pathData="M8.93,22.76m-0.31,0a0.31,0.31 0,1 1,0.62 0a0.31,0.31 0,1 1,-0.62 0"/>
    <path android:fillColor="#dd2e44" android:pathData="M9.15,24.02m-0.42,0a0.42,0.42 0,1 1,0.84 0a0.42,0.42 0,1 1,-0.84 0"/>
    <path android:fillColor="#77b255" android:pathData="M9.45,22a0.41,0.41 0,0 0,0 0.59A0.42,0.42 0,0 0,10.04 22a0.42,0.42 0,0 0,-0.59 -0.59A0.41,0.41 0,0 0,9.45 22Z"/>
    <path android:fillColor="#dd2e44" android:pathData="M10.03,22.54m-0.42,0a0.42,0.42 0,1 1,0.84 0a0.42,0.42 0,1 1,-0.84 0"/>
    <path android:fillColor="#dd2e44" android:pathData="M9.44,21.66m-0.21,0a0.21,0.21 0,1 1,0.42 0a0.21,0.21 0,1 1,-0.42 0"/>
</vector>



================================================
FILE: app/src/main/res/drawable/monke_coco.xml
================================================
<vector android:height="24dp" android:viewportHeight="33.77"
    android:viewportWidth="29.51" android:width="20.972462dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M4.16,13.19c0,-3.37 -4.21,-2.53 -3.37,0.84s2.53,4.2 2.53,4.2ZM26.03,13.19c0,-3.37 4.2,-2.53 3.36,0.84s-2.52,4.2 -2.52,4.2Z"/>
    <path android:fillColor="#31373d" android:pathData="M27.42,18c0,9.16 -4,11.85 -12.33,11.85S2.77,27.17 2.77,18 6.72,0 15.09,0 27.42,8.85 27.42,18Z"/>
    <path android:fillColor="#66757f" android:pathData="M23.14,19.08c1.25,-3.75 1.76,-6.16 -0.37,-6.16L7.42,12.92c-2.13,0 -1.63,2.41 -0.38,6.16C2.9,28.5 14.39,29 15.09,29S27.12,28.13 23.14,19.08Z"/>
    <path android:fillColor="#31373d" android:pathData="M12.57,14.87a1.69,1.69 0,0 1,-3.37 0c0,-0.93 0.76,-0.84 1.69,-0.84S12.57,13.94 12.57,14.87ZM20.98,14.87a1.68,1.68 0,0 1,-3.36 0c0,-0.93 0.75,-0.84 1.68,-0.84S20.98,13.94 20.98,14.87Z"/>
    <path android:fillColor="#31373d" android:pathData="M11.85,19.63a1.2,0.84 0,1 0,2.4 0a1.2,0.84 0,1 0,-2.4 0z"/>
    <path android:fillColor="#31373d" android:pathData="M18.34,19.63c0,0.46 -0.54,0.84 -1.21,0.84s-1.2,-0.38 -1.2,-0.84 0.54,-0.84 1.2,-0.84S18.34,19.16 18.34,19.63Z"/>
    <path android:fillColor="#99aab5" android:pathData="M17.63,17.43a3.06,3.06 0,0 0,-2.54 0.7,3 3,0 0,0 -2.54,-0.7c-2.65,0.35 -2.76,2.76 -1.63,2.61 0.64,-0.09 0.11,-0.79 1.44,-1.31a3.16,3.16 0,0 1,2.73 0.56,3.16 3.16,0 0,1 2.73,-0.56c1.33,0.52 0.8,1.22 1.44,1.31C20.4,20.19 20.29,17.78 17.63,17.43Z"/>
    <path android:fillColor="#66757f" android:pathData="M3.53,13.71c1.18,-1 -0.91,-3.16 -1.85,-2.14 -0.29,0.32 0.78,-0.15 1.13,0.92C3.06,13.28 2.81,14.34 3.53,13.71ZM26.66,13.71c-1.18,-1 0.9,-3.16 1.84,-2.14 0.29,0.32 -0.77,-0.15 -1.12,0.92C27.12,13.28 27.38,14.34 26.66,13.71Z"/>
    <path android:fillColor="#31373d" android:pathData="M19.72,23.59a16.07,16.07 0,0 1,-3.21 0.52,15.89 15.89,0 0,1 -2.9,-0.09l0,-0.91a16.84,16.84 0,0 0,2.9 0.09A16.19,16.19 0,0 0,19.72 22.68Z"/>
    <path android:fillColor="#31373d" android:pathData="M21.29,24.84c0.17,-0.58 -0.82,-0.91 -1.08,-1.8 -0.34,-1.14 0.86,-2.22 0.49,-2.57a0.67,0.67 0,0 0,-0.82 0.1,4.37 4.37,0 0,0 -0.49,2.57 4.49,4.49 0,0 0,1.09 1.8c0.12,0.13 0.3,0.31 0.49,0.27A0.48,0.48 0,0 0,21.29 24.84Z"/>
    <path android:fillColor="#c1694f" android:pathData="M14.22,23.82c-0.11,-0.44 0.63,-0.91 0.46,-1.28s-1.05,-0.09 -1.28,-0.42 0,-0.57 0.51,-1.31l-2.37,-2.37c-0.69,-0.69 -1.19,-0.69 -1.89,0L1.15,27a1.77,1.77 0,0 0,0 2.52l3.15,3.15a1.79,1.79 0,0 0,2.52 0l8.27,-8.28C14.51,24.21 14.27,24 14.22,23.82Z"/>
    <path android:fillColor="#8a4b38" android:pathData="M9.27,25.12l2.18,-2.18 2.52,2.52 0.63,-0.63 -2.52,-2.52L13.72,20.65 13.12,20l-1.67,1.66 -2.52,-2.52 -0.63,0.63 2.52,2.52 -2.17,2.18Z"/>
    <path android:fillColor="#dd2e44" android:pathData="M0.52,29.47A1.77,1.77 0,0 1,0.52 27l4.41,-4.41 6.3,6.3L6.82,33.25a1.79,1.79 0,0 1,-2.52 0Z"/>
    <path android:fillColor="#be1931" android:pathData="M5.6,22.12l-0.67,0.42 -0.24,0.23 3.55,9.06 2.08,-2.08Z"/>
    <path android:fillColor="#ccd6dd" android:pathData="M7.13,21.59l5.67,5.67a1,1 0,0 1,0 1.26l-2.36,2.36c-0.79,0.79 -1.1,-0.15 -1.1,-0.15 -0.63,-1.26 -4.1,-7.25 -4.41,-8.19l0.94,-0.95A0.87,0.87 0,0 1,7.13 21.59Z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/monke_cookie.xml
================================================
<vector android:height="24dp" android:viewportHeight="33.12"
    android:viewportWidth="28.82" android:width="20.884058dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M3.48,13.19c0,-3.37 -4.21,-2.53 -3.37,0.84s2.53,4.2 2.53,4.2ZM25.35,13.19c0,-3.37 4.2,-2.53 3.36,0.84s-2.52,4.2 -2.52,4.2Z"/>
    <path android:fillColor="#31373d" android:pathData="M26.74,18c0,9.16 -4,11.85 -12.33,11.85S2.09,27.17 2.09,18 6.04,0 14.41,0 26.74,8.85 26.74,18Z"/>
    <path android:fillColor="#66757f" android:pathData="M22.46,19.08c1.25,-3.75 1.76,-6.16 -0.37,-6.16L6.74,12.92c-2.13,0 -1.63,2.41 -0.38,6.16C2.22,28.5 13.71,29 14.41,29S26.44,28.13 22.46,19.08Z"/>
    <path android:fillColor="#31373d" android:pathData="M11.89,14.87a1.69,1.69 0,0 1,-3.37 0c0,-0.93 0.76,-0.84 1.69,-0.84S11.89,13.94 11.89,14.87ZM20.3,14.87a1.68,1.68 0,0 1,-3.36 0c0,-0.93 0.75,-0.84 1.68,-0.84S20.3,13.94 20.3,14.87Z"/>
    <path android:fillColor="#31373d" android:pathData="M11.17,19.63a1.2,0.84 0,1 0,2.4 0a1.2,0.84 0,1 0,-2.4 0z"/>
    <path android:fillColor="#31373d" android:pathData="M17.66,19.63c0,0.46 -0.54,0.84 -1.21,0.84s-1.2,-0.38 -1.2,-0.84 0.54,-0.84 1.2,-0.84S17.66,19.16 17.66,19.63Z"/>
    <path android:fillColor="#99aab5" android:pathData="M16.95,17.43a3.06,3.06 0,0 0,-2.54 0.7,3 3,0 0,0 -2.54,-0.7c-2.65,0.35 -2.76,2.76 -1.63,2.61 0.64,-0.09 0.11,-0.79 1.44,-1.31a3.16,3.16 0,0 1,2.73 0.56,3.16 3.16,0 0,1 2.73,-0.56c1.33,0.52 0.8,1.22 1.44,1.31C19.72,20.19 19.61,17.78 16.95,17.43Z"/>
    <path android:fillColor="#66757f" android:pathData="M2.85,13.71c1.18,-1 -0.91,-3.16 -1.85,-2.14 -0.29,0.32 0.78,-0.15 1.13,0.92C2.38,13.28 2.13,14.34 2.85,13.71ZM25.98,13.71c-1.18,-1 0.9,-3.16 1.84,-2.14 0.29,0.32 -0.77,-0.15 -1.12,0.92C26.44,13.28 26.7,14.34 25.98,13.71Z"/>
    <path android:fillColor="#31373d" android:pathData="M19.04,23.59a16.07,16.07 0,0 1,-3.21 0.52,15.89 15.89,0 0,1 -2.9,-0.09l0,-0.91a16.84,16.84 0,0 0,2.9 0.09A16.19,16.19 0,0 0,19.04 22.68Z"/>
    <path android:fillColor="#31373d" android:pathData="M20.61,24.84c0.17,-0.58 -0.82,-0.91 -1.08,-1.8 -0.34,-1.14 0.86,-2.22 0.49,-2.57a0.67,0.67 0,0 0,-0.82 0.1,4.37 4.37,0 0,0 -0.49,2.57 4.49,4.49 0,0 0,1.09 1.8c0.12,0.13 0.3,0.31 0.49,0.27A0.48,0.48 0,0 0,20.61 24.84Z"/>
    <path android:fillColor="#da9f83" android:pathData="M15.25,24a1.4,1.4 0,0 1,-1 -0.06c-0.74,-0.38 -0.54,-1.4 -1.17,-1.63s-1.57,0.93 -2.12,0.62c-0.38,-0.22 -0.06,-0.86 -0.52,-1.37s-1.65,-0.27 -1.83,-0.72 0.78,-1 0.59,-1.47 -1.05,-0.1 -1.31,-0.49a0.94,0.94 0,0 1,0.06 -0.79h-0.14A8.2,8.2 0,0 0,6.33 18a7.51,7.51 0,0 0,-1.37 0.58,7.26 7.26,0 0,0 -1.39,0.53 7,7 0,0 0,-1 1.08,6 6,0 0,0 -1.59,2.44A7.54,7.54 0,0 0,0.34 24a7.38,7.38 0,0 0,0.62 4.33A7.29,7.29 0,0 0,3.54 31.92a8.17,8.17 0,0 0,1.41 0.52,5.39 5.39,0 0,0 4.32,0.4 6.91,6.91 0,0 0,4 -1.91c1.22,-1.54 2.33,-3.36 2.15,-5.43A11.14,11.14 0,0 0,15.25 24Z"/>
    <path android:fillColor="#8a4b38" android:pathData="M9.89,25.09a1,1 0,0 1,0.62 1.9c-0.52,0.17 -1.72,0.09 -1.89,-0.44S9.37,25.26 9.89,25.09ZM13.71,24.79a0.48,0.48 0,0 1,-0.73 -0.61c0.17,-0.2 0.67,-0.47 0.87,-0.3S13.88,24.59 13.71,24.79ZM3.92,21.68a0.48,0.48 0,0 1,-0.73 -0.62c0.17,-0.2 0.67,-0.47 0.87,-0.3S4.09,21.47 3.92,21.68ZM5.77,23.6a1,1 0,1 1,1.72 -0.83c0.23,0.48 0.31,1.62 -0.17,1.85S6.04,24.08 5.77,23.6ZM6.23,29.87a0.86,0.86 0,0 1,1.19 -0.22,0.85 0.85,0 0,1 0.21,1.19c-0.26,0.39 -1.12,1 -1.51,0.69S5.96,30.26 6.23,29.87ZM10.68,29.69a0.65,0.65 0,1 1,0.71 -1.1c0.3,0.19 0.76,0.83 0.57,1.14S11.04,29.89 10.68,29.69ZM2.28,25.69A0.92,0.92 0,0 1,3.66 27c-0.34,0.38 -1.34,0.87 -1.71,0.53S1.94,26.12 2.28,25.74Z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/monke_drink.xml
================================================
<vector android:height="24dp" android:viewportHeight="35.86"
    android:viewportWidth="26.7" android:width="17.869492dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M4.12,11.75c0,-3 -3.74,-2.25 -3,0.75s2.24,3.74 2.24,3.74ZM23.61,11.75c0,-3 3.74,-2.25 3,0.75s-2.25,3.74 -2.25,3.74Z"/>
    <path android:fillColor="#31373d" android:pathData="M24.84,16.05c0,8.16 -3.51,10.55 -11,10.55s-11,-2.39 -11,-10.55 3.51,-16 11,-16S24.84,7.93 24.84,16.05Z"/>
    <path android:fillColor="#66757f" android:pathData="M21.03,16.99c1.12,-3.34 1.57,-5.48 -0.33,-5.48L7.03,11.51c-1.9,0 -1.45,2.14 -0.33,5.48 -3.7,8.4 6.54,8.86 7.16,8.86S24.58,25.06 21.03,16.99Z"/>
    <path android:fillColor="#31373d" android:pathData="M11.62,13.25a1.5,1.5 0,1 1,-3 0c0,-0.83 0.67,-0.75 1.5,-0.75S11.62,12.42 11.62,13.25ZM19.11,13.25a1.5,1.5 0,1 1,-3 0c0,-0.83 0.67,-0.75 1.5,-0.75S19.11,12.42 19.11,13.25Z"/>
    <path android:fillColor="#31373d" android:pathData="M10.97,17.48a1.07,0.75 0,1 0,2.14 0a1.07,0.75 0,1 0,-2.14 0z"/>
    <path android:fillColor="#31373d" android:pathData="M16.75,17.48c0,0.42 -0.47,0.75 -1.07,0.75s-1.07,-0.33 -1.07,-0.75 0.48,-0.75 1.07,-0.75S16.75,17.07 16.75,17.48Z"/>
    <path android:fillColor="#99aab5" android:pathData="M16.13,15.52a2.76,2.76 0,0 0,-2.27 0.63,2.73 2.73,0 0,0 -2.26,-0.63c-2.36,0.32 -2.46,2.47 -1.45,2.33 0.57,-0.08 0.1,-0.7 1.28,-1.17a2.83,2.83 0,0 1,2.43 0.5,2.82 2.82,0 0,1 2.44,-0.49c1.18,0.46 0.71,1.08 1.28,1.16C18.59,17.99 18.49,15.84 16.13,15.52Z"/>
    <path android:fillColor="#66757f" android:pathData="M3.56,12.22c1.06,-0.92 -0.8,-2.83 -1.64,-1.91 -0.26,0.28 0.69,-0.14 1,0.81C3.2,11.83 2.92,12.78 3.56,12.22ZM24.16,12.22c-1.05,-0.92 0.81,-2.83 1.65,-1.91 0.26,0.28 -0.69,-0.14 -1,0.81C24.58,11.83 24.81,12.78 24.2,12.22Z"/>
    <path android:fillColor="#31373d" android:pathData="M12.49,20.89a1.37,1.72 0,1 0,2.74 0a1.37,1.72 0,1 0,-2.74 0z"/>
    <path android:fillColor="#8b5e3c" android:pathData="M5.58,35.69c-4,-0.9 -6.35,-5.2 -5.35,-9.59l14.33,3.27C13.55,33.76 9.53,36.59 5.58,35.69Z"/>
    <path android:fillColor="#603913" android:pathData="M0.2,26.1c-0.5,2.2 2.3,4.71 6.26,5.61s7.56,-0.14 8.07,-2.34 -2.3,-4.71 -6.26,-5.61S0.73,23.93 0.2,26.1Z"/>
    <path android:fillColor="#f5f8fa" android:pathData="M13.3,27.93a0.39,0.39 0,0 0,0.37 -0.1,0.41 0.41,0 0,0 0.11,-0.42 5.16,5.16 0,0 0,-3.49 -3.24A13.06,13.06 0,0 1,8.2 23.35c-0.23,-0.06 -0.31,0.06 -0.74,0 -0.2,0 -1,-0.47 -1.4,1.18a0.41,0.41 0,0 0,0.24 0.47l7,3Z"/>
    <path android:fillColor="#603913" android:pathData="M7.2,23.81l0.82,0.17s1.43,0.45 2.23,0.63a4.75,4.75 0,0 1,3.19 3l-7.43,-2.88S6.7,23.72 7.2,23.81ZM7.35,23.06a2,2 0,0 0,-1.82 1.33,0.94 0.94,0 0,0 0.64,0.94l7,3 0.14,0.05a0.79,0.79 0,0 0,0.73 -0.2,0.78 0.78,0 0,0 0.22,-0.85 5.52,5.52 0,0 0,-3.78 -3.51,16.15 16.15,0 0,1 -1.64,-0.37 11.24,11.24 0,0 0,-1.22 -0.36Z"/>
    <path android:fillColor="#f5f8fa" android:pathData="M1.03,26.28C0.63,28.04 3.2,30.11 6.67,30.93s6.69,0 7.09,-1.73 -2.12,-3.84 -5.64,-4.64S1.43,24.52 1.03,26.28Z"/>
    <path android:fillColor="#99aab5" android:pathData="M2.2,26.58c-0.3,1.3 1.77,2.89 4.63,3.54s5.41,0.12 5.71,-1.18 -1.78,-2.89 -4.63,-3.54S2.51,25.27 2.2,26.58Z"/>
    <path android:fillColor="#99aab5" android:pathData="M6.26,25.51l0.34,-0.37a0.65,0.65 0,0 1,0.69 -0.35l0.69,0.17c0.35,0.12 1.13,0.32 1.74,0.46a3.75,3.75 0,0 1,2.71 2.6,0.21 0.21,0 0,1 -0.06,0.21 0.23,0.23 0,0 1,-0.18 0h0l-5.79,-2.47a0.19,0.19 0,0 1,-0.11 -0.12A0.22,0.22 0,0 1,6.26 25.51Z"/>
    <path android:fillColor="#e1e8ed" android:pathData="M13.45,20.28l-3.11,0.77a3.09,3.09 0,0 0,-1.11 0.57,2.9 2.9,0 0,0 -1,1.75l-1.87,6.49h1.42l1.76,-6.11a2.1,2.1 0,0 1,0.51 -1,2.64 2.64,0 0,1 1,-0.45l2.72,-0.68a0.68,0.68 0,1 0,-0.32 -1.32Z"/>
    <path android:fillColor="#dd2e44" android:pathData="M7.12,27.17l-0.36,1.22 0.63,1.12 0.22,0.05 0.28,-0.15 0.17,-0.57ZM13.69,20.27a0.65,0.65 0,0 0,-0.24 0l-0.78,0.19L12.2,21.99l1,-0.25ZM7.45,25.99 L8.39,27.66 8.75,26.43 7.81,24.76ZM9.2,21.63a2.53,2.53 0,0 0,-0.73 0.92l0.6,2.72 0.44,-1.52 0.09,-0.3Z"/>
    <path android:fillColor="#f5f8fa" android:pathData="M10.99,30.31a4.72,4.72 0,0 1,-2.12 -0.49c-0.63,-0.51 -2.1,0.24 -2.73,-0.28a24.59,24.59 0,0 0,-2.06 -1.55c-0.45,-0.28 -0.43,0.27 -1.06,-0.25a3.66,3.66 0,0 0,-1.33 -0.67s1.91,3 3,3.28 5.3,1.21 5.38,0.86S10.99,30.31 10.99,30.31Z"/>
    <path android:fillColor="#603913" android:pathData="M11.04,31.09a5.93,5.93 0,0 1,-2.43 -0.55c-0.65,-0.54 -2.39,0.24 -3.05,-0.29S3.82,28.7 3.62,28.63c-0.57,-0.21 -0.45,0.28 -1.1,-0.26a3.81,3.81 0,0 0,-1.39 -0.7s2,3.17 3.09,3.42 5.53,1.26 5.61,0.89S11.04,31.09 11.04,31.09Z"/>
    <path android:fillColor="#8b5e3c" android:pathData="M11.04,31.93a5.25,5.25 0,0 1,-2.38 -0.55c-0.71,-0.58 -3,0.16 -3.68,-0.42s-1.31,-1.56 -1.71,-1.65 -0.49,0.31 -1.2,-0.27a4,4 0,0 0,-1.5 -0.76S2.72,31.69 3.92,31.93s6,1.37 6.06,1S11.04,31.93 11.04,31.93Z"/>
    <path android:fillColor="#a97c50" android:pathData="M7.99,35.47c0,-0.12 0.28,-0.21 0.39,-0.24a6.82,6.82 0,0 0,3.74 -3,0.21 0.21,0 0,1 0.29,-0.08 0.26,0.26 0,0 1,0.05 0.32,7.59 7.59,0 0,1 -4,3s-0.28,0.11 -0.31,0.11S8.01,35.55 7.99,35.47ZM2.99,33.84c0.06,0 0.08,0.05 0.14,0s0,-0.24 -0.09,-0.33a8.27,8.27 0,0 1,-1.61 -4,0.2 0.2,0 0,0 -0.24,-0.16 0.23,0.23 0,0 0,-0.16 0.28,8.66 8.66,0 0,0 1.86,4.14A0.21,0.21 0,0 0,2.94 33.84ZM8.56,34.76a0.2,0.2 0,0 0,0.13 0,5.54 5.54,0 0,0 2.16,-1.94 0.24,0.24 0,0 0,0 -0.31,0.2 0.2,0 0,0 -0.29,0.07 4.08,4.08 0,0 1,-1.82 1.84c-0.1,0.05 -0.29,0.18 -0.25,0.29S8.45,34.75 8.51,34.76Z"/>
    <path android:fillColor="#dd2e44" android:pathData="M10.69,20.93 L10.2,22.62a2.94,2.94 0,0 1,0.87 -0.35l0.2,0 0.47,-1.52Z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/monke_flusdered.xml
================================================
<vector android:height="24dp" android:viewportHeight="35.5"
    android:viewportWidth="34.26" android:width="23.16169dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M4.13,15.68c0,-4 -5,-3 -4,1s3,5 3,5ZM30.13,15.68c0,-4 5,-3 4,1s-3,5 -3,5Z"/>
    <path android:fillColor="#31373d" android:pathData="M31.78,21.42C31.78,32.31 27.13,35.5 17.13,35.5S2.48,32.31 2.48,21.42 7.13,0 17.13,0 31.78,10.52 31.78,21.42Z"/>
    <path android:fillColor="#66757f" android:pathData="M26.7,22.68c1.49,-4.46 2.08,-7.31 -0.45,-7.31L8.01,15.37c-2.54,0 -1.94,2.85 -0.45,7.31C2.63,33.88 16.3,34.5 17.13,34.5S31.43,33.44 26.7,22.68Z"/>
    <path android:fillColor="#66757f" android:pathData="M3.38,16.31c1.41,-1.23 -1.08,-3.77 -2.19,-2.55 -0.34,0.37 0.92,-0.19 1.33,1.09C2.83,15.79 2.52,17.06 3.38,16.31ZM30.88,16.31c-1.41,-1.23 1.07,-3.77 2.19,-2.55 0.34,0.37 -0.92,-0.19 -1.34,1.09C31.43,15.79 31.73,17.06 30.88,16.31Z"/>
    <path android:fillColor="#ff7892" android:pathData="M24.17,25.43m-3.2,0a3.2,3.2 0,1 1,6.4 0a3.2,3.2 0,1 1,-6.4 0"/>
    <path android:fillColor="#ff7892" android:pathData="M10.09,25.43m-3.2,0a3.2,3.2 0,1 1,6.4 0a3.2,3.2 0,1 1,-6.4 0"/>
    <path android:fillColor="#f5f8fa" android:pathData="M21.29,21.27m-3.52,0a3.52,3.52 0,1 1,7.04 0a3.52,3.52 0,1 1,-7.04 0"/>
    <path android:fillColor="#f5f8fa" android:pathData="M12.97,21.27m-3.52,0a3.52,3.52 0,1 1,7.04 0a3.52,3.52 0,1 1,-7.04 0"/>
    <path android:fillColor="#292f33" android:pathData="M12.97,21.27m-1.6,0a1.6,1.6 0,1 1,3.2 0a1.6,1.6 0,1 1,-3.2 0"/>
    <path android:fillColor="#292f33" android:pathData="M21.29,21.27m-1.6,0a1.6,1.6 0,1 1,3.2 0a1.6,1.6 0,1 1,-3.2 0"/>
    <path android:fillColor="#31373d" android:pathData="M19.69,30.68L14.57,30.68a0.64,0.64 0,1 1,0 -1.28h5.12a0.64,0.64 0,0 1,0 1.28ZM24.81,19.51a0.65,0.65 0,0 1,-0.51 -0.25,5.38 5.38,0 0,0 -4,-2.31 0.64,0.64 0,0 1,-0.64 -0.64A0.64,0.64 0,0 1,20.33 15.68a6.65,6.65 0,0 1,5 2.82,0.63 0.63,0 0,1 -0.13,0.89A0.6,0.6 0,0 1,24.81 19.47ZM9.45,19.35a0.6,0.6 0,0 1,-0.38 -0.13,0.63 0.63,0 0,1 -0.13,-0.89 6.65,6.65 0,0 1,5 -2.82,0.64 0.64,0 0,1 0.64,0.64 0.63,0.63 0,0 1,-0.64 0.64,5.41 5.41,0 0,0 -4,2.31A0.65,0.65 0,0 1,9.45 19.31Z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/monke_funny.xml
================================================
<vector android:height="24dp" android:viewportHeight="35.5"
    android:viewportWidth="34.26" android:width="23.16169dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M4.13,15.68c0,-4 -5,-3 -4,1s3,5 3,5ZM30.13,15.68c0,-4 5,-3 4,1s-3,5 -3,5Z"/>
    <path android:fillColor="#31373d" android:pathData="M31.78,21.42C31.78,32.31 27.13,35.5 17.13,35.5S2.48,32.31 2.48,21.42 7.13,0 17.13,0 31.78,10.52 31.78,21.42Z"/>
    <path android:fillColor="#66757f" android:pathData="M26.7,22.68c1.49,-4.46 2.08,-7.31 -0.45,-7.31L8.01,15.37c-2.54,0 -1.94,2.85 -0.45,7.31C2.63,33.88 16.3,34.5 17.13,34.5S31.43,33.44 26.7,22.68Z"/>
    <path android:fillColor="#31373d" android:pathData="M13.27,23.33a1.43,1 0,1 0,2.86 0a1.43,1 0,1 0,-2.86 0z"/>
    <path android:fillColor="#31373d" android:pathData="M20.99,23.34c0,0.55 -0.64,1 -1.43,1s-1.43,-0.45 -1.43,-1 0.64,-1 1.43,-1S20.99,22.78 20.99,23.34Z"/>
    <path android:fillColor="#99aab5" android:pathData="M20.13,20.68a3.65,3.65 0,0 0,-3 0.83A3.65,3.65 0,0 0,14.13 20.68c-3.16,0.42 -3.29,3.29 -1.94,3.11 0.77,-0.11 0.14,-0.94 1.71,-1.56a3.77,3.77 0,0 1,3.25 0.66,3.77 3.77,0 0,1 3.25,-0.66c1.58,0.62 0.94,1.45 1.71,1.56C23.44,24.01 23.31,21.14 20.13,20.68Z"/>
    <path android:fillColor="#66757f" android:pathData="M3.38,16.31c1.41,-1.23 -1.08,-3.77 -2.19,-2.55 -0.34,0.37 0.92,-0.19 1.33,1.09C2.83,15.79 2.52,17.06 3.38,16.31ZM30.88,16.31c-1.41,-1.23 1.07,-3.77 2.19,-2.55 0.34,0.37 -0.92,-0.19 -1.34,1.09C31.43,15.79 31.73,17.06 30.88,16.31Z"/>
    <path android:fillColor="#31373d" android:pathData="M17.13,26a29.86,29.86 0,0 1,-6.29 -0.7c-0.47,-0.09 -1.4,0 -1.4,1.4 0,2.79 3.21,6.28 7.69,6.28s7.69,-3.49 7.69,-6.28c0,-1.4 -0.93,-1.49 -1.4,-1.4A29.86,29.86 0,0 1,17.13 26Z"/>
    <path android:fillColor="#fff" android:pathData="M10.84,26.68a22.23,22.23 0,0 0,6.29 0.69A22.23,22.23 0,0 0,23.42 26.68s-1.4,2.79 -6.29,2.79S10.84,26.68 10.84,26.68Z"/>
    <path android:fillColor="#31373d" android:pathData="M25.93,20.56a12.53,12.53 0,0 0,-3.24 -1.64,1 1,0 0,0 0,-0.25 1,1 0,0 0,-0.25 -0.67,9.49 9.49,0 0,1 2.35,-0.38 0.7,0.7 0,0 0,0 -1.39c-0.16,0 -3.81,0 -6.09,2.3A0.7,0.7 0,0 0,19.23 19.68,11.08 11.08,0 0,1 25.13,21.68a0.7,0.7 0,0 0,0.41 0.14,0.69 0.69,0 0,0 0.56,-0.28A0.7,0.7 0,0 0,25.93 20.56ZM15.53,18.56c-2.28,-2.28 -5.93,-2.3 -6.09,-2.3a0.7,0.7 0,0 0,0 1.39,9.49 9.49,0 0,1 2.35,0.38 1,1 0,0 0,-0.25 0.67,1 1,0 0,0 0,0.25A12.13,12.13 0,0 0,8.33 20.56a0.7,0.7 0,0 0,0.42 1.26A0.7,0.7 0,0 0,9.13 21.68a11,11 0,0 1,5.87 -2,0.7 0.7,0 0,0 0.5,-1.19Z"/>
    <path android:fillColor="#5dadec" android:pathData="M10.74,25.14a2.3,2.3 0,0 1,-4.32 -1.58c0.43,-1.19 3.3,-3.69 3.73,-3.54S11.18,23.94 10.74,25.14Z"/>
    <path android:fillColor="#5dadec" android:pathData="M24.13,20.02c0.43,-0.15 3.3,2.35 3.74,3.54a2.3,2.3 0,0 1,-4.33 1.58C23.13,23.94 23.73,20.18 24.13,20.02Z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/monke_like.xml
================================================
<vector android:height="24dp" android:viewportHeight="37.51"
    android:viewportWidth="35.77" android:width="22.886698dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M4.28,15.68c0,-4 -5,-3 -4,1s3,5 3,5ZM30.28,15.68c0,-4 5,-3 4,1s-3,5 -3,5Z"/>
    <path android:fillColor="#31373d" android:pathData="M31.93,21.42C31.93,32.31 27.28,35.5 17.28,35.5S2.63,32.31 2.63,21.42 7.28,0 17.28,0 31.93,10.52 31.93,21.42Z"/>
    <path android:fillColor="#66757f" android:pathData="M26.85,22.68c1.49,-4.46 2.08,-7.31 -0.45,-7.31L8.16,15.37c-2.54,0 -1.94,2.85 -0.45,7.31C2.78,33.88 16.45,34.5 17.28,34.5S31.58,33.44 26.85,22.68Z"/>
    <path android:fillColor="#31373d" android:pathData="M13.42,23.33a1.43,1 0,1 0,2.86 0a1.43,1 0,1 0,-2.86 0z"/>
    <path android:fillColor="#31373d" android:pathData="M21.14,23.34c0,0.55 -0.64,1 -1.43,1s-1.43,-0.45 -1.43,-1 0.64,-1 1.43,-1S21.14,22.78 21.14,23.34Z"/>
    <path android:fillColor="#99aab5" android:pathData="M20.28,20.68a3.65,3.65 0,0 0,-3 0.83A3.65,3.65 0,0 0,14.28 20.68c-3.16,0.42 -3.29,3.29 -1.94,3.11 0.77,-0.11 0.14,-0.94 1.71,-1.56a3.77,3.77 0,0 1,3.25 0.66,3.77 3.77,0 0,1 3.25,-0.66c1.58,0.62 0.94,1.45 1.71,1.56C23.59,24.01 23.46,21.14 20.28,20.68Z"/>
    <path android:fillColor="#66757f" android:pathData="M3.53,16.31c1.41,-1.23 -1.08,-3.77 -2.19,-2.55 -0.34,0.37 0.92,-0.19 1.33,1.09C2.98,15.79 2.67,17.06 3.53,16.31ZM31.03,16.31c-1.41,-1.23 1.07,-3.77 2.19,-2.55 0.34,0.37 -0.92,-0.19 -1.34,1.09C31.58,15.79 31.88,17.06 31.03,16.31Z"/>
    <path android:fillAlpha="0.5" android:fillColor="#31373d"
        android:pathData="M26.79,12.07a9.22,9.22 0,0 0,3.14 -2.18,17 17,0 0,0 -5.11,-7.33c-0.35,-0.14 -0.7,-0.27 -1.06,-0.39a3.05,3.05 0,0 0,-2.52 3,3.19 3.19,0 0,0 0.08,0.7C21.74,8.51 24.68,11.3 26.79,12.07Z" android:strokeAlpha="0.5"/>
    <path android:fillAlpha="0.5" android:fillColor="#31373d"
        android:pathData="M31.69,25.27A2.31,2.31 0,0 0,30.28 26.18a2.3,2.3 0,0 0,-4.17 1.34,2.24 2.24,0 0,0 0.06,0.52 6.77,6.77 0,0 0,2.78 3.9A11.82,11.82 0,0 0,31.69 25.27Z" android:strokeAlpha="0.5"/>
    <path android:fillAlpha="0.5" android:fillColor="#31373d"
        android:pathData="M10.52,26.23a3.3,3.3 0,0 0,-2.69 1.39,3.33 3.33,0 0,0 -2.7,-1.39 3.29,3.29 0,0 0,-2 0.66c1,4.58 3.63,7 7.85,8a8.79,8.79 0,0 0,2.74 -4.58,3.08 3.08,0 0,0 0.09,-0.75A3.32,3.32 0,0 0,10.52 26.23Z" android:strokeAlpha="0.5"/>
    <path android:fillColor="#31373d" android:pathData="M14.41,19.68a0.61,0.61 0,0 1,-0.57 -0.41c-0.12,-0.36 -0.61,-1.39 -1.23,-1.39s-1.13,1.1 -1.23,1.39a0.6,0.6 0,0 1,-0.76 0.38,0.61 0.61,0 0,1 -0.38,-0.76C10.28,18.68 11.03,16.68 12.61,16.68s2.3,2 2.37,2.21a0.6,0.6 0,0 1,-0.38 0.76A0.58,0.58 0,0 1,14.41 19.68ZM24.41,19.68a0.61,0.61 0,0 1,-0.57 -0.41c-0.12,-0.36 -0.61,-1.39 -1.23,-1.39s-1.13,1.1 -1.23,1.39a0.6,0.6 0,0 1,-0.76 0.38,0.61 0.61,0 0,1 -0.38,-0.76C20.28,18.68 21.03,16.68 22.61,16.68s2.3,2 2.37,2.21a0.6,0.6 0,0 1,-0.38 0.76A0.58,0.58 0,0 1,24.41 19.68ZM25.08,26.8a0.51,0.51 0,0 0,-0.51 0,16 16,0 0,1 -7,1.71 16.08,16.08 0,0 1,-7 -1.71,0.52 0.52,0 0,0 -0.51,0 0.24,0.24 0,0 0,-0.07 0.37,9.91 9.91,0 0,0 7.54,3.09 10,10 0,0 0,7.55 -3.09A0.25,0.25 0,0 0,25.08 26.81Z"/>
    <path android:fillColor="#dd2e44" android:pathData="M33.45,4.91a3.07,3.07 0,0 0,-5.56 -1.78,3.06 3.06,0 0,0 -5.55,1.78 3.27,3.27 0,0 0,0.08 0.7c0.43,2.64 3.37,5.43 5.47,6.19 2.11,-0.76 5,-3.55 5.47,-6.19A2.74,2.74 0,0 0,33.45 4.91ZM12.03,30.05a3.32,3.32 0,0 0,-6 -1.93,3.31 3.31,0 0,0 -6,1.93 3.08,3.08 0,0 0,0.09 0.75C0.55,33.68 3.73,36.68 6.01,37.52 8.28,36.68 11.48,33.68 11.94,30.81A3.22,3.22 0,0 0,12.03 30.05ZM35.77,27.77a2.3,2.3 0,0 0,-4.17 -1.34,2.3 2.3,0 0,0 -4.17,1.34 2.25,2.25 0,0 0,0.07 0.52c0.32,2 2.52,4.08 4.1,4.65 1.58,-0.57 3.79,-2.67 4.11,-4.65A2.24,2.24 0,0 0,35.77 27.77Z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/monke_party.xml
================================================
<vector android:height="24dp" android:viewportHeight="36"
    android:viewportWidth="36" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M3.8,17.6c-0.7,-3.9 -5.4,-2.1 -3.8,1.7s3.8,4.4 3.8,4.4ZM29.4,13.1c-0.7,-3.9 4.4,-3.8 4.1,0.3s-2.1,5.4 -2.1,5.4Z"/>
    <path android:fillColor="#31373d" android:pathData="M32,18.4c1.9,10.7 -2.2,14.7 -12,16.4S5,34.2 3.1,23.5 4.1,1.6 13.9,-0.1 30.1,7.7 32,18.4Z"/>
    <path android:fillColor="#66757f" android:pathData="M27.2,20.6c0.7,-4.6 0.8,-7.6 -1.7,-7.1l-18,3.2c-2.5,0.4 -1.4,3.1 0.8,7.3C5.5,35.8 19,34 19.9,33.9S33.8,30.3 27.2,20.6Z"/>
    <path android:fillColor="#31373d" android:pathData="M14.1235,23.5474a1,1.4 80,1 0,2.7575 -0.4862a1,1.4 80,1 0,-2.7575 0.4862z"/>
    <path android:fillColor="#31373d" android:pathData="M21.7,22.2c0.1,0.5 -0.5,1.1 -1.2,1.2s-1.5,-0.2 -1.6,-0.7 0.5,-1.1 1.2,-1.2A1.26,1.26 0,0 1,21.7 22.2Z"/>
    <path android:fillColor="#99aab5" android:pathData="M20.4,19.8a3.58,3.58 0,0 0,-2.8 1.3,3.55 3.55,0 0,0 -3.1,-0.3c-3,1 -2.7,3.8 -1.4,3.4 0.7,-0.2 0,-0.9 1.4,-1.8s3.3,0.1 3.3,0.1a3.87,3.87 0,0 1,3.1 -1.2c1.7,0.3 1.2,1.3 2,1.2C24.2,22.4 23.6,19.6 20.4,19.8Z"/>
    <path android:fillColor="#66757f" android:pathData="M3.7,16.9c1.4,-1.2 -1.1,-3.8 -2.2,-2.5 -0.3,0.4 0.9,-0.2 1.3,1.1C3.1,16.4 2.8,17.6 3.7,16.9ZM30.7,14.5c-1.6,-1 0.4,-3.9 1.7,-2.9 0.4,0.3 -0.9,0 -1.1,1.3C31.2,13.7 28.9,13.4 30.7,14.5Z"/>
    <path android:fillColor="#31373d" android:pathData="M15.9,26.2a2,2.5 0,1 0,4 0a2,2.5 0,1 0,-4 0z"/>
    <path android:fillColor="#31373d" android:pathData="M8.6,21.2a0.9,0.9 0,0 1,-0.5 -0.1,1 1,0 0,1 -0.3,-1.2 6.53,6.53 0,0 1,6.9 -2.7,0.92 0.92,0 0,1 -0.4,1.8 4.79,4.79 0,0 0,-5 1.9A0.78,0.78 0,0 1,8.6 21.2ZM19.4,17.9a0.91,0.91 0,0 1,-0.7 -0.3,0.93 0.93,0 0,1 0.1,-1.3 6.58,6.58 0,0 1,7.4 -0.6,0.87 0.87,0 1,1 -0.9,1.5 4.71,4.71 0,0 0,-5.3 0.4A0.86,0.86 0,0 1,19.4 17.9Z"/>
    <path android:fillColor="#99aab5" android:pathData="M14,31.9h-0.2a0.72,0.72 0,0 1,-0.5 -0.9,4.81 4.81,0 0,0 -0.5,-4.1 2.85,2.85 0,0 0,-1.9 -1.2,0.77 0.77,0 0,1 -0.7,-0.8 0.71,0.71 0,0 1,0.8 -0.7A4.22,4.22 0,0 1,14.1 26a6.24,6.24 0,0 1,0.7 5.4C14.6,31.6 14.3,31.9 14,31.9ZM25,28.8a0.6,0.6 0,0 1,-0.4 -0.1A4.21,4.21 0,0 1,22.8 25a4.6,4.6 0,0 1,2 -3.9,0.74 0.74,0 0,1 0.7,1.3A3.45,3.45 0,0 0,24.2 25a2.78,2.78 0,0 0,1.1 2.4,0.78 0.78,0 0,1 0.2,1C25.5,28.7 25.2,28.8 25,28.8Z"/>
    <path android:fillColor="#dd2e44" android:pathData="M17.1,2.9a0.35,0.35 0,0 0,-0.2 -0.1S1,-0.2 0.3,0.4 0.7,17.2 0.7,17.2s0,0.1 0.1,0.2c0.6,0.7 4.8,-2 9.3,-6S17.7,3.6 17.1,2.9Z"/>
    <path android:fillColor="#ea596e" android:pathData="M0.3,0.5V0.6C0.4,2 1.9,13.3 2.9,16.8a34,34 0,0 0,4.6 -3.3C6,10.9 1.1,0.4 0.3,0.5Z"/>
    <path android:fillColor="#3b88c3" android:pathData="M29.8,29.5 L19.2,28.2c-1.1,-0.1 -3.1,-0.1 -3,-1.9 0.1,-1.6 2,-1.4 3.5,-1.2l10.6,1.8Z"/>
    <path android:fillColor="#88c9f9" android:pathData="M30.4,26.9l-4.2,-0.7c-0.5,-0.1 -0.9,0.6 -1,1.4s0.2,1.3 0.7,1.4l4.1,0.5A23.36,23.36 0,0 0,30.4 26.9Z"/>
    <path android:fillColor="#3b88c3" android:pathData="M34.8,26.6 L32.2,29l-4.7,-5.1 2.6,-2.4a3.35,3.35 0,0 1,4.8 0.2l0.1,0.1A3.35,3.35 0,0 1,34.8 26.6Z"/>
    <path android:fillColor="#88c9f9" android:pathData="M27.8089,28.2826a3.5,2.8 47.4,1 0,4.1221 -3.7905a3.5,2.8 47.4,1 0,-4.1221 3.7905z"/>
    <path android:fillColor="#269" android:pathData="M28.8394,27.3349a2.1,1.4 47.4,1 0,2.0611 -1.8953a2.1,1.4 47.4,1 0,-2.0611 1.8953z"/>
    <path android:fillColor="#55acee" android:pathData="M2.4,33.7m-1.5,0a1.5,1.5 0,1 1,3 0a1.5,1.5 0,1 1,-3 0"/>
    <path android:fillColor="#55acee" android:pathData="M28.9,2.2m-2,0a2,2 0,1 1,4 0a2,2 0,1 1,-4 0"/>
    <path android:fillColor="#ea596e" android:pathData="M4.8,29.5 L2.5,23.9l-2.1,6ZM25.9,5.2l-4,1 1,-4Z"/>
    <path android:fillColor="#77b255" android:pathData="M31.9,13.2l4,-5 -3,-2Z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/monke_sob.xml
================================================
<vector android:height="24dp" android:viewportHeight="35.68"
    android:viewportWidth="34.51" android:width="23.213005dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#31373d" android:pathData="M4.37,15.68c0,-4 -5,-3 -4,1s3,5 3,5ZM30.37,15.68c0,-4 5,-3 4,1s-3,5 -3,5Z"/>
    <path android:fillColor="#31373d" android:pathData="M32.02,21.42C32.02,32.31 27.37,35.5 17.37,35.5S2.72,32.31 2.72,21.42 7.37,0 17.37,0 32.02,10.52 32.02,21.42Z"/>
    <path android:fillColor="#66757f" android:pathData="M26.94,22.68c1.49,-4.46 2.08,-7.31 -0.45,-7.31L8.25,15.37c-2.54,0 -1.94,2.85 -0.45,7.31C2.87,33.88 16.54,34.5 17.37,34.5S31.67,33.44 26.94,22.68Z"/>
    <path android:fillColor="#31373d" android:pathData="M13.52,23.33a1.43,1 0,1 0,2.86 0a1.43,1 0,1 0,-2.86 0z"/>
    <path android:fillColor="#31373d" android:pathData="M21.23,23.34c0,0.55 -0.64,1 -1.43,1s-1.43,-0.45 -1.43,-1 0.64,-1 1.43,-1S21.23,22.78 21.23,23.34Z"/>
    <path android:fillColor="#99aab5" android:pathData="M20.37,20.68a3.65,3.65 0,0 0,-3 0.83A3.65,3.65 0,0 0,14.37 20.68c-3.16,0.42 -3.29,3.29 -1.94,3.11 0.77,-0.11 0.14,-0.94 1.71,-1.56a3.77,3.77 0,0 1,3.25 0.66,3.77 3.77,0 0,1 3.25,-0.66c1.58,0.62 0.94,1.45 1.71,1.56C23.68,24.01 23.55,21.14 20.37,20.68Z"/>
    <path android:fillColor="#66757f" android:pathData="M3.62,16.31c1.41,-1.23 -1.08,-3.77 -2.19,-2.55 -0.34,0.37 0.92,-0.19 1.33,1.09C3.07,15.79 2.76,17.06 3.62,16.31ZM31.12,16.31c-1.41,-1.23 1.07,-3.77 2.19,-2.55 0.34,0.37 -0.92,-0.19 -1.34,1.09C31.67,15.79 31.97,17.06 31.12,16.31Z"/>
    <path android:fillColor="#31373d" android:pathData="M19.93,28.98c0,2 -1.3,2.17 -2.89,2.17s-2.89,-0.17 -2.89,-2.17S15.44,24.68 17.04,24.68 19.93,26.99 19.93,28.98ZM25.7,18.49a0.58,0.58 0,0 1,-0.26 0,11.88 11.88,0 0,1 -5.39,-3.88 0.71,0.71 0,0 1,0.2 -1,0.72 0.72,0 0,1 1,0.2 10.72,10.72 0,0 0,4.72 3.34,0.72 0.72,0 0,1 -0.27,1.39ZM8.37,18.49a0.72,0.72 0,0 1,-0.27 -1.39,10.88 10.88,0 0,0 4.73,-3.34 0.72,0.72 0,1 1,1.2 0.8,12 12,0 0,1 -5.39,3.88A0.65,0.65 0,0 1,8.37 18.49Z"/>
    <path android:fillColor="#5dadec" android:pathData="M21.37,19h2.89L24.26,32.68L21.37,32.68ZM9.81,32.68l2.89,0L12.7,19L9.81,19Z"/>
    <path android:fillColor="#31373d" android:pathData="M14.87,20.45a0.72,0.72 0,0 1,-0.32 -0.08,6.24 6.24,0 0,0 -5.13,0A0.72,0.72 0,0 1,8.77 19.08a7.63,7.63 0,0 1,6.42 0,0.73 0.73,0 0,1 0.33,1A0.74,0.74 0,0 1,14.87 20.45ZM24.98,20.45a0.72,0.72 0,0 1,-0.32 -0.08,6.24 6.24,0 0,0 -5.13,0 0.73,0.73 0,0 1,-1 -0.32,0.72 0.72,0 0,1 0.32,-1 7.65,7.65 0,0 1,6.43 0,0.72 0.72,0 0,1 -0.33,1.37Z"/>
    <path android:fillColor="#5dadec" android:pathData="M0,33.81a16.83,1.87 0,1 0,33.66 0a16.83,1.87 0,1 0,-33.66 0z"/>
    <path android:fillColor="#e75a70" android:pathData="M14.87,29.15a2.17,1.44 0,1 0,4.34 0a2.17,1.44 0,1 0,-4.34 0z"/>
</vector>



================================================
FILE: app/src/main/res/drawable/netflix_download.xml
================================================
<vector
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:name="vector"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="850"
        android:viewportHeight="850">
    <path
            android:name="path_2"
            android:pathData="M 233.86 666.14 L 616.54 666.14 M 425.2 539.08 L 425.2 159.6 M 410.14 554.17 L 581.98 454.96 M 268.41 454.96 L 440.25 554.17"
            android:strokeColor="?attr/white"
            android:strokeWidth="60"
            android:strokeMiterLimit="10"/>
</vector>



================================================
FILE: app/src/main/res/drawable/netflix_pause.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:tint="?attr/white"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="850.39"
        android:viewportHeight="850.39">
    <path
            android:pathData="M267.01,189.64h99.74v470.26h-99.74z M463.01,188.79h99.74v470.26h-99.74z"
            android:fillColor="#fff"/>
</vector>


================================================
FILE: app/src/main/res/drawable/netflix_play.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="850.4"
        android:viewportHeight="850.4">
    <path
            android:pathData="M674.6,424.6l-417.7,-241.2l0,482.4z"
            android:fillColor="?attr/white"/>
</vector>


================================================
FILE: app/src/main/res/drawable/netflix_skip_back.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="850.39dp"
        android:height="850.39dp"
        android:viewportWidth="850.39"
        android:viewportHeight="850.39">
    <path
            android:pathData="M143.05,279.28A317.41,317.41 0,0 0,106.3 428c0,176.13 142.77,318.9 318.9,318.9S744.09,604.16 744.09,428 601.32,109.14 425.2,109.14q-14.15,0 -28,1.2"
            android:strokeWidth="45"
            android:fillColor="#00000000"
            android:strokeColor="#fff"/>
    <path
            android:pathData="M483.083,223.108l-111.666,-111.666l25.442,-25.442l111.666,111.666z"
            android:fillColor="#fff"/>
    <path
            android:pathData="M371.421,111.662l111.666,-111.666l25.442,25.442l-111.666,111.666z"
            android:fillColor="#fff"/>
    <path
            android:pathData="M398.087,223.272l-111.666,-111.666l25.442,-25.442l111.666,111.666z"
            android:fillColor="#fff"/>
    <path
            android:pathData="M286.427,111.826l111.666,-111.666l25.442,25.442l-111.666,111.666z"
            android:fillColor="#fff"/>
</vector>


================================================
FILE: app/src/main/res/drawable/netflix_skip_forward.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="850.39dp"
        android:height="850.39dp"
        android:viewportWidth="850.39"
        android:viewportHeight="850.39">
    <path
            android:pathData="M707.35,279.28A317.52,317.52 0,0 1,744.09 428c0,176.13 -142.77,318.9 -318.89,318.9S106.3,604.16 106.3,428 249.07,109.14 425.2,109.14q14.13,0 28,1.2"
            android:strokeWidth="45"
            android:fillColor="#00000000"
            android:strokeColor="#fff"/>
    <path
            android:pathData="M341.86,197.665l111.666,-111.666l25.442,25.442l-111.666,111.666z"
            android:fillColor="#fff"/>
    <path
            android:pathData="M453.524,137.111l-111.666,-111.666l25.442,-25.442l111.666,111.666z"
            android:fillColor="#fff"/>
    <path
            android:pathData="M426.864,197.831l111.666,-111.666l25.442,25.442l-111.666,111.666z"
            android:fillColor="#fff"/>
    <path
            android:pathData="M538.53,137.277l-111.666,-111.666l25.442,-25.442l111.666,111.666z"
            android:fillColor="#fff"/>
</vector>


================================================
FILE: app/src/main/res/drawable/outline.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <stroke android:width="2dp"
            android:color="?attr/white"/>
    <corners
            android:bottomLeftRadius="@dimen/rounded_image_radius"
            android:bottomRightRadius="@dimen/rounded_image_radius"
            android:topLeftRadius="@dimen/rounded_image_radius"
            android:topRightRadius="@dimen/rounded_image_radius" />
</shape>


================================================
FILE: app/src/main/res/drawable/outline_card.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
        android:color="@android:color/white">

    <item>
        <shape android:shape="rectangle">
            <stroke
                    android:width="2dp"
                    android:color="@android:color/white" />
            <corners android:radius="2dp" />
        </shape>
    </item>

    <item android:id="@android:id/mask">
        <shape android:shape="rectangle">
            <corners android:radius="2dp" />
            <solid android:color="?attr/iconGrayBackground" />
        </shape>
    </item>

</ripple>


================================================
FILE: app/src/main/res/drawable/outline_drawable.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true"
          android:drawable="@drawable/outline"/> <!-- focused -->
</selector>


================================================
FILE: app/src/main/res/drawable/pause_to_play.xml
================================================
<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="850dp"
            android:height="850dp"
            android:viewportWidth="850"
            android:viewportHeight="850">
            <path
                android:name="path"
                android:pathData="M 267.01 189.64 L 366.75 189.64 L 366.75 659.9 L 267.01 659.9 Z M 463.01 188.79 L 562.75 188.79 L 562.75 659.05 L 463.01 659.05 Z"
                android:fillColor="#ffffff"/>
        </vector>
    </aapt:attr>
    <target android:name="path">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="pathData"
                android:duration="200"
                android:valueFrom="M 463.01 659.05 L 562.75 659.05 L 562.75 188.79 L 463.01 188.79 L 463.01 659.05 M 366.75 189.64 L 366.75 659.9 L 267.01 659.9 L 267.01 189.64 L 366.75 189.64"
                android:valueTo="M 425.844 568.243 L 674.6 424.6 L 551.156 353.317 L 427.712 282.035 L 425.844 568.243 M 427.712 282.035 L 425.844 568.243 L 256.9 665.8 L 256.9 183.4 L 427.712 282.035"
                android:valueType="pathType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
</animated-vector>



================================================
FILE: app/src/main/res/drawable/play_button.xml
================================================
<vector
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:name="vector"
        android:width="842dp"
        android:height="842dp"
        android:viewportWidth="842"
        android:viewportHeight="842">
    <!--70% https://stackoverflow.com/questions/11285961/how-to-make-a-background-20-transparent-on-android -->
    <path
            android:name="path"
            android:pathData="M 421.44 17.5 C 336.15 17.5 253.011 44.513 184.01 94.646 C 115.009 144.778 63.626 215.5 37.27 296.616 C 10.914 377.732 10.914 465.148 37.27 546.264 C 63.626 627.38 115.009 698.102 184.01 748.234 C 253.011 798.367 336.15 825.38 421.44 825.38 C 506.73 825.38 589.869 798.367 658.87 748.234 C 727.871 698.102 779.254 627.38 805.61 546.264 C 831.966 465.148 831.966 377.732 805.61 296.616 C 779.254 215.5 727.871 144.778 658.87 94.646 C 589.869 44.513 506.73 17.5 421.44 17.5 Z"
            android:fillColor="#B3000000"
            android:strokeWidth="1"/>
    <path
            android:name="path_1"
            android:pathData="M 421.44 17.5 C 336.15 17.5 253.011 44.513 184.01 94.646 C 115.009 144.778 63.626 215.5 37.27 296.616 C 10.914 377.732 10.914 465.148 37.27 546.264 C 63.626 627.38 115.009 698.102 184.01 748.234 C 253.011 798.367 336.15 825.38 421.44 825.38 C 506.73 825.38 589.869 798.367 658.87 748.234 C 727.871 698.102 779.254 627.38 805.61 546.264 C 831.966 465.148 831.966 377.732 805.61 296.616 C 779.254 215.5 727.871 144.778 658.87 94.646 C 589.869 44.513 506.73 17.5 421.44 17.5 Z"
            android:strokeColor="#ffffff"
            android:strokeWidth="35"
            android:strokeMiterLimit="10"/>
    <path
            android:name="path_2"
            android:pathData="M 598.91 419.24 L 333.91 266.24 L 333.91 572.24 L 598.91 419.24 Z"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
</vector>



================================================
FILE: app/src/main/res/drawable/play_to_pause.xml
================================================
<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="850dp"
            android:height="850dp"
            android:viewportWidth="850"
            android:viewportHeight="850">
            <path
                android:name="path"
                android:pathData="M 674.6 424.6 L 256.9 183.4 L 256.9 665.8 Z"
                android:fillColor="#ffffff"/>
        </vector>
    </aapt:attr>
    <target android:name="path">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="pathData"
                android:duration="200"
                android:valueFrom="M 425.844 568.243 L 674.6 424.6 L 551.156 353.317 L 427.712 282.035 L 425.844 568.243 M 427.712 282.035 L 425.844 568.243 L 256.9 665.8 L 256.9 183.4 L 427.712 282.035"
                android:valueTo="M 463.01 659.05 L 562.75 659.05 L 562.75 188.79 L 463.01 188.79 L 463.01 659.05 M 366.75 189.64 L 366.75 659.9 L 267.01 659.9 L 267.01 189.64 L 366.75 189.64"
                android:valueType="pathType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
</animated-vector>



================================================
FILE: app/src/main/res/drawable/player_button_tv.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true">
        <shape android:shape="rectangle">
            <solid android:color="#FFFFFF" />
            <corners android:radius="3dp"/>
        </shape>
    </item>
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#33FFFFFF" />
            <corners android:radius="3dp"/>
        </shape>
    </item>
</selector>


================================================
FILE: app/src/main/res/drawable/player_gradient_tv.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape>
            <gradient
                android:angle="90"
                android:startColor="#000000"
                android:centerColor="#00000000"
                android:endColor="#00000000"
                android:centerY="0.7"
                />
        </shape>
    </item>
    <item>
        <shape>
            <gradient
                android:angle="270"
                android:startColor="#000000"
                android:centerColor="#00000000"
                android:endColor="#00000000"
                android:centerY="0.7"
                />
        </shape>
    </item>

</layer-list>


================================================
FILE: app/src/main/res/drawable/progress_drawable_vertical.xml
================================================
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/background">
        <shape>
            <corners android:radius="8dp"/>
            <solid android:color="@color/darkBarTransparent"/>
        </shape>
    </item>

    <item android:id="@android:id/progress">
        <scale android:scaleGravity="bottom" android:scaleWidth="0%" android:scaleHeight="100%">
            <shape>
                <solid android:color="?attr/colorPrimary"/>
                <corners android:radius="3dp"/>
            </shape>
        </scale>
    </item>
</layer-list>


================================================
FILE: app/src/main/res/drawable/quick_novel_icon.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="108"
        android:viewportHeight="108"
        android:name="vector"
        android:tint="?attr/white"
>
    <!-- ScaleX = 108/24 -->
    <group
            android:scaleX="0.22"
            android:scaleY="0.22"
    >
        <path android:name="path"
              android:pathData="M 475.35 304.28 C 432.112 306.219 389.584 315.994 349.84 333.13 C 311.168 349.86 275.547 372.909 244.44 401.33 L 244.44 97.04 C 275.547 68.619 311.168 45.57 349.84 28.84 C 389.589 11.727 432.116 1.968 475.35 0.04 L 475.35 304.28"
              android:fillColor="@color/white"
              android:strokeWidth="1"/>
        <path android:name="path_1"
              android:pathData="M 348.22 364.24 C 310.074 381.02 275.008 404.073 244.48 432.44 L 244.48 411.44 C 275.006 383.062 310.072 359.999 348.22 343.21 M 348.22 364.24 C 387.267 347.125 429.132 337.342 471.72 335.38 L 471.72 314.38 C 429.134 316.333 387.269 326.106 348.22 343.21"
              android:fillColor="@color/white"
              android:strokeWidth="1"/>
        <path android:name="path_2"
              android:pathData="M 127.44 364.24 C 165.5 381.028 200.476 404.082 230.91 432.44 L 230.91 411.44 C 200.476 383.082 165.5 360.028 127.44 343.24 M 127.44 364.24 C 88.492 347.123 46.718 337.339 4.22 335.38 L 4.22 314.38 C 46.718 316.339 88.492 326.123 127.44 343.24"
              android:fillColor="@color/white"
              android:strokeWidth="1"/>
        <path android:name="path_3"
              android:pathData="M 0 304.28 C 43.238 306.218 85.766 315.994 125.51 333.13 C 164.182 349.86 199.803 372.909 230.91 401.33 L 230.91 97.04 C 199.803 68.619 164.182 45.57 125.51 28.84 C 85.761 11.725 43.234 1.967 0 0.04 L 0 304.28"
              android:fillColor="@color/white"
              android:strokeWidth="1"/>
    </group>
</vector>


================================================
FILE: app/src/main/res/drawable/rating_empty.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"
            android:state_window_focused="true"
            android:drawable="@drawable/ic_baseline_star_border_24"/>

    <item android:state_focused="true"
            android:state_window_focused="true"
            android:drawable="@drawable/ic_baseline_star_border_24"/>

    <item android:state_selected="true"
            android:state_window_focused="true"
            android:drawable="@drawable/ic_baseline_star_border_24"/>

    <item
            android:drawable="@drawable/ic_baseline_star_border_24"/>
</selector>


================================================
FILE: app/src/main/res/drawable/rating_fill.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"
            android:state_window_focused="true"
            android:drawable="@drawable/ic_baseline_star_24"/>

    <item android:state_focused="true"
            android:state_window_focused="true"
            android:drawable="@drawable/ic_baseline_star_24"/>

    <item android:state_selected="true"
            android:state_window_focused="true"
            android:drawable="@drawable/ic_baseline_star_24"/>

    <item
            android:drawable="@drawable/ic_baseline_star_24"/>
</selector>


================================================
FILE: app/src/main/res/drawable/rddone.xml
================================================
<vector
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:name="vector"
        android:width="24dp"
        android:height="24dp"
        android:tint="?attr/colorPrimary"
        android:viewportWidth="24"
        android:viewportHeight="24">
    <path
            android:name="path"
            android:pathData="M 17 1.01 L 7 1 C 5.9 1 5 1.9 5 3 L 5 21 C 5 22.1 5.9 23 7 23 L 17 23 C 18.1 23 19 22.1 19 21 L 19 3 C 19 1.9 18.1 1.01 17 1.01 Z M 17 19 L 7 19 L 7 5 L 17 5 Z"
            android:fillColor="@color/white"
            android:strokeWidth="1"/>
    <path
            android:name="path_1"
            android:pathData="M 7.488 13.004 L 9.132 11.36 L 12.492 14.72 L 10.848 16.364 Z"
            android:fillColor="@color/white"
            android:strokeWidth="1"/>
    <path
            android:name="path_2"
            android:pathData="M 10.848 16.364 L 9.203 14.72 L 14.894 9.029 L 16.539 10.673 Z"
            android:fillColor="@color/white"
            android:strokeWidth="1"/>
</vector>


================================================
FILE: app/src/main/res/drawable/rderror.xml
================================================
<vector
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:name="vector"
        android:width="24dp"
        android:height="24dp"
        android:tint="?attr/colorPrimary"
        android:viewportWidth="24"
        android:viewportHeight="24">
    <path
            android:name="path"
            android:pathData="M 17 1.01 L 7 1 C 5.9 1 5 1.9 5 3 L 5 21 C 5 22.1 5.9 23 7 23 L 17 23 C 18.1 23 19 22.1 19 21 L 19 3 C 19 1.9 18.1 1.01 17 1.01 Z M 17 19 L 7 19 L 7 5 L 17 5 Z M 10.101 13.289 L 10.513 10.311 L 9.848 9.33 L 9.496 8.867 L 11 13 L 9.706 13 L 9.745 15.93 Z"
            android:fillColor="@color/white"
            android:strokeWidth="1"/>
    <path
            android:name="path_1"
            android:pathData="M 15.801 14.763 L 14.157 16.407 L 7.873 10.124 L 9.518 8.479 Z"
            android:fillColor="@color/white"
            android:strokeWidth="1"/>
    <path
            android:name="path_2"
            android:pathData="M 14.157 8.479 L 15.801 10.124 L 9.518 16.407 L 7.873 14.763 Z"
            android:fillColor="@color/white"
            android:strokeWidth="1"/>
</vector>


================================================
FILE: app/src/main/res/drawable/rdload.xml
================================================
<vector android:height="24dp" android:tint="?attr/colorPrimary"
        android:viewportHeight="24" android:viewportWidth="24"
        android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="@android:color/white" android:pathData="M17,1.01L7,1c-1.1,0 -2,0.9 -2,2v18c0,1.1 0.9,2 2,2h10c1.1,0 2,-0.9 2,-2L19,3c0,-1.1 -0.9,-1.99 -2,-1.99zM17,19L7,19L7,5h10v14zM16,13h-3L13,8h-2v5L8,13l4,4 4,-4z"/>
</vector>


================================================
FILE: app/src/main/res/drawable/rdpause.xml
================================================
<vector
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:name="vector"
        android:width="24dp"
        android:height="24dp"
        android:tint="?attr/colorPrimary"
        android:viewportWidth="24"
        android:viewportHeight="24">
    <path
            android:name="path"
            android:pathData="M 17 1.01 L 7 1 C 5.9 1 5 1.9 5 3 L 5 21 C 5 22.1 5.9 23 7 23 L 17 23 C 18.1 23 19 22.1 19 21 L 19 3 C 19 1.9 18.1 1.01 17 1.01 Z M 17 19 L 7 19 L 7 5 L 17 5 Z M 10.101 13.289 L 10.513 10.311 L 9.848 9.33 L 9.496 8.867 L 11 13 L 9.706 13 L 9.745 15.93 Z"
            android:fillColor="@color/white"
            android:strokeWidth="1"/>
    <path
            android:name="path_1"
            android:pathData="M 9.104 8.931 L 11.129 8.931 L 11.129 15.956 L 9.104 15.956 Z M 12.871 8.931 L 14.896 8.931 L 14.896 15.956 L 12.871 15.956 Z"
            android:fillColor="@color/white"
            android:strokeWidth="1"/>
</vector>


================================================
FILE: app/src/main/res/drawable/rounded_dialog.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
    <solid android:color="?attr/boxItemBackground"/>
    <corners android:topLeftRadius="16dp"
             android:topRightRadius="16dp"/>
</shape>



================================================
FILE: app/src/main/res/drawable/rounded_progress.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="?attr/colorPrimary" />
    <corners android:radius="5dp" />
</shape>


================================================
FILE: app/src/main/res/drawable/search_background.xml
================================================
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <corners android:radius="20dp" />
    <solid android:color="?attr/primaryBlackBackground"/>
    <!--<stroke android:width="0.5dp" android:color="@color/searchColorTransparent" />-->
</shape>



================================================
FILE: app/src/main/res/drawable/search_icon.xml
================================================
<vector
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:name="vector"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="850"
        android:viewportHeight="850">
    <path
            android:name="path"
            android:pathData="M 425.2 172.91 C 363.2 172.91 303.676 197.566 259.836 241.406 C 215.996 285.246 191.34 344.77 191.34 406.77 C 191.34 468.77 215.996 528.294 259.836 572.134 C 303.676 615.974 363.2 640.63 425.2 640.63 C 487.2 640.63 546.724 615.974 590.564 572.134 C 634.404 528.294 659.06 468.77 659.06 406.77 C 659.06 344.77 634.404 285.246 590.564 241.406 C 546.724 197.566 487.2 172.91 425.2 172.91 Z"
            android:strokeColor="?attr/white"
            android:strokeWidth="60"
            android:strokeMiterLimit="10"/>
    <path
            android:name="path_1"
            android:pathData="M 599.86 562.28 L 719.87 682.29"
            android:strokeColor="?attr/white"
            android:strokeWidth="60"
            android:strokeMiterLimit="10"/>
</vector>



================================================
FILE: app/src/main/res/drawable/solid_primary.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="?attr/colorPrimary"/>
</shape>


================================================
FILE: app/src/main/res/drawable/splash_background.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <color android:color="?attr/primaryBlackBackground"/>
    </item>
    <item android:width="150dp" android:height="150dp" android:gravity="center" android:drawable="@drawable/ic_launcher_foreground">
    </item>
</layer-list>


================================================
FILE: app/src/main/res/drawable/sub_bg_color.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@color/subColorBg"/>
    <corners android:radius="@dimen/rounded_image_radius"/>
   <!-- <stroke android:color="@color/subColor" android:width="2dp"/>-->
</shape>


================================================
FILE: app/src/main/res/drawable/subtitles_background_gradient.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
            android:startColor="#FFF"
            android:endColor="#000"
            android:angle="0"/>
</shape>


================================================
FILE: app/src/main/res/drawable/sun_1.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="137"
    android:viewportHeight="137">
    <path
        android:name="path"
        android:pathData="M 69.24 35.91 C 62.272 35.91 55.48 38.117 49.843 42.212 C 44.206 46.308 40.008 52.086 37.855 58.712 C 35.702 65.339 35.702 72.481 37.855 79.108 C 40.008 85.734 44.206 91.512 49.843 95.608 C 55.48 99.703 62.272 101.91 69.24 101.91 C 76.208 101.91 83 99.703 88.637 95.608 C 94.274 91.512 98.472 85.734 100.625 79.108 C 102.778 72.481 102.778 65.339 100.625 58.712 C 98.472 52.086 94.274 46.308 88.637 42.212 C 83 38.117 76.208 35.91 69.24 35.91 Z"
        android:fillColor="#ffffff"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_1"
        android:pathData="M 68.91 0.5 L 68.92 0.5 C 70.717 0.5 72.443 1.215 73.714 2.486 C 74.985 3.757 75.7 5.483 75.7 7.28 L 75.7 12.5 C 75.7 13.69 75.387 14.859 74.792 15.89 C 74.197 16.921 73.341 17.777 72.31 18.372 C 71.279 18.967 70.11 19.28 68.92 19.28 L 68.91 19.28 C 67.72 19.28 66.551 18.967 65.52 18.372 C 64.489 17.777 63.633 16.921 63.038 15.89 C 62.443 14.859 62.13 13.69 62.13 12.5 L 62.13 7.28 C 62.13 6.09 62.443 4.921 63.038 3.89 C 63.633 2.859 64.489 2.003 65.52 1.408 C 66.551 0.813 67.72 0.5 68.91 0.5"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_2"
        android:pathData="M 68.91 0.5 L 68.92 0.5 C 70.717 0.5 72.443 1.215 73.714 2.486 C 74.985 3.757 75.7 5.483 75.7 7.28 L 75.7 12.5 C 75.7 13.69 75.387 14.859 74.792 15.89 C 74.197 16.921 73.341 17.777 72.31 18.372 C 71.279 18.967 70.11 19.28 68.92 19.28 L 68.91 19.28 C 67.72 19.28 66.551 18.967 65.52 18.372 C 64.489 17.777 63.633 16.921 63.038 15.89 C 62.443 14.859 62.13 13.69 62.13 12.5 L 62.13 7.28 C 62.13 6.09 62.443 4.921 63.038 3.89 C 63.633 2.859 64.489 2.003 65.52 1.408 C 66.551 0.813 67.72 0.5 68.91 0.5"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_3"
        android:pathData="M 68.91 118.54 L 68.92 118.54 C 70.717 118.54 72.443 119.255 73.714 120.526 C 74.985 121.797 75.7 123.523 75.7 125.32 L 75.7 130.54 C 75.7 132.337 74.985 134.063 73.714 135.334 C 72.443 136.605 70.717 137.32 68.92 137.32 L 68.91 137.32 C 67.72 137.32 66.551 137.007 65.52 136.412 C 64.489 135.817 63.633 134.961 63.038 133.93 C 62.443 132.899 62.13 131.73 62.13 130.54 L 62.13 125.32 C 62.13 124.13 62.443 122.961 63.038 121.93 C 63.633 120.899 64.489 120.043 65.52 119.448 C 66.551 118.853 67.72 118.54 68.91 118.54"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_4"
        android:pathData="M 68.91 118.54 L 68.92 118.54 C 70.717 118.54 72.443 119.255 73.714 120.526 C 74.985 121.797 75.7 123.523 75.7 125.32 L 75.7 130.54 C 75.7 132.337 74.985 134.063 73.714 135.334 C 72.443 136.605 70.717 137.32 68.92 137.32 L 68.91 137.32 C 67.72 137.32 66.551 137.007 65.52 136.412 C 64.489 135.817 63.633 134.961 63.038 133.93 C 62.443 132.899 62.13 131.73 62.13 130.54 L 62.13 125.32 C 62.13 124.13 62.443 122.961 63.038 121.93 C 63.633 120.899 64.489 120.043 65.52 119.448 C 66.551 118.853 67.72 118.54 68.91 118.54"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_5"
        android:pathData="M 104.007 24.222 L 107.698 20.531 C 108.539 19.69 109.588 19.084 110.737 18.776 C 111.887 18.468 113.097 18.468 114.247 18.776 C 115.396 19.084 116.445 19.69 117.286 20.531 L 117.293 20.538 C 118.135 21.38 118.74 22.428 119.048 23.577 C 119.356 24.727 119.356 25.938 119.048 27.087 C 118.74 28.237 118.135 29.285 117.293 30.126 L 113.602 33.818 C 112.761 34.659 111.712 35.264 110.563 35.572 C 109.413 35.88 108.203 35.88 107.053 35.572 C 105.904 35.264 104.855 34.659 104.014 33.818 L 104.007 33.81 C 103.165 32.969 102.56 31.921 102.252 30.771 C 101.944 29.622 101.944 28.411 102.252 27.261 C 102.56 26.112 103.165 25.064 104.007 24.222"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_6"
        android:pathData="M 104.007 24.222 L 107.698 20.531 C 108.539 19.69 109.588 19.084 110.737 18.776 C 111.887 18.468 113.097 18.468 114.247 18.776 C 115.396 19.084 116.445 19.69 117.286 20.531 L 117.293 20.538 C 118.135 21.38 118.74 22.428 119.048 23.577 C 119.356 24.727 119.356 25.938 119.048 27.087 C 118.74 28.237 118.135 29.285 117.293 30.126 L 113.602 33.818 C 112.761 34.659 111.712 35.264 110.563 35.572 C 109.413 35.88 108.203 35.88 107.053 35.572 C 105.904 35.264 104.855 34.659 104.014 33.818 L 104.007 33.81 C 103.165 32.969 102.56 31.921 102.252 30.771 C 101.944 29.622 101.944 28.411 102.252 27.261 C 102.56 26.112 103.165 25.064 104.007 24.222"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_7"
        android:pathData="M 20.537 107.696 L 24.228 104.005 C 25.069 103.164 26.118 102.559 27.267 102.251 C 28.417 101.943 29.627 101.943 30.777 102.251 C 31.926 102.559 32.975 103.164 33.816 104.005 L 33.823 104.012 C 34.665 104.854 35.27 105.902 35.578 107.052 C 35.886 108.201 35.886 109.412 35.578 110.561 C 35.27 111.711 34.665 112.759 33.823 113.601 L 30.132 117.292 C 29.291 118.133 28.242 118.739 27.093 119.047 C 25.943 119.355 24.733 119.355 23.583 119.047 C 22.434 118.739 21.385 118.133 20.544 117.292 L 20.537 117.285 C 19.695 116.443 19.09 115.395 18.782 114.245 C 18.474 113.096 18.474 111.885 18.782 110.736 C 19.09 109.586 19.695 108.538 20.537 107.696"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_8"
        android:pathData="M 20.537 107.696 L 24.228 104.005 C 25.069 103.164 26.118 102.559 27.267 102.251 C 28.417 101.943 29.627 101.943 30.777 102.251 C 31.926 102.559 32.975 103.164 33.816 104.005 L 33.823 104.012 C 34.665 104.854 35.27 105.902 35.578 107.052 C 35.886 108.201 35.886 109.412 35.578 110.561 C 35.27 111.711 34.665 112.759 33.823 113.601 L 30.132 117.292 C 29.291 118.133 28.242 118.739 27.093 119.047 C 25.943 119.355 24.733 119.355 23.583 119.047 C 22.434 118.739 21.385 118.133 20.544 117.292 L 20.537 117.285 C 19.695 116.443 19.09 115.395 18.782 114.245 C 18.474 113.096 18.474 111.885 18.782 110.736 C 19.09 109.586 19.695 108.538 20.537 107.696"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <group android:name="group">
        <path
            android:name="path_9"
            android:pathData="M 125.32 62.13 L 130.54 62.13 C 132.337 62.13 134.063 62.845 135.334 64.116 C 136.605 65.387 137.32 67.113 137.32 68.91 L 137.32 68.92 C 137.32 70.717 136.605 72.443 135.334 73.714 C 134.063 74.985 132.337 75.7 130.54 75.7 L 125.32 75.7 C 123.523 75.7 121.797 74.985 120.526 73.714 C 119.255 72.443 118.54 70.717 118.54 68.92 L 118.54 68.91 C 118.54 67.72 118.853 66.551 119.448 65.52 C 120.043 64.489 120.899 63.633 121.93 63.038 C 122.961 62.443 124.13 62.13 125.32 62.13"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_10"
            android:pathData="M 125.32 62.13 L 130.54 62.13 C 132.337 62.13 134.063 62.845 135.334 64.116 C 136.605 65.387 137.32 67.113 137.32 68.91 L 137.32 68.92 C 137.32 70.717 136.605 72.443 135.334 73.714 C 134.063 74.985 132.337 75.7 130.54 75.7 L 125.32 75.7 C 123.523 75.7 121.797 74.985 120.526 73.714 C 119.255 72.443 118.54 70.717 118.54 68.92 L 118.54 68.91 C 118.54 67.72 118.853 66.551 119.448 65.52 C 120.043 64.489 120.899 63.633 121.93 63.038 C 122.961 62.443 124.13 62.13 125.32 62.13"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_1">
        <path
            android:name="path_11"
            android:pathData="M 7.28 62.13 L 12.5 62.13 C 13.69 62.13 14.859 62.443 15.89 63.038 C 16.921 63.633 17.777 64.489 18.372 65.52 C 18.967 66.551 19.28 67.72 19.28 68.91 L 19.28 68.92 C 19.28 70.11 18.967 71.279 18.372 72.31 C 17.777 73.341 16.921 74.197 15.89 74.792 C 14.859 75.387 13.69 75.7 12.5 75.7 L 7.28 75.7 C 5.483 75.7 3.757 74.985 2.486 73.714 C 1.215 72.443 0.5 70.717 0.5 68.92 L 0.5 68.91 C 0.5 67.72 0.813 66.551 1.408 65.52 C 2.003 64.489 2.859 63.633 3.89 63.038 C 4.921 62.443 6.09 62.13 7.28 62.13"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_12"
            android:pathData="M 7.28 62.13 L 12.5 62.13 C 13.69 62.13 14.859 62.443 15.89 63.038 C 16.921 63.633 17.777 64.489 18.372 65.52 C 18.967 66.551 19.28 67.72 19.28 68.91 L 19.28 68.92 C 19.28 70.11 18.967 71.279 18.372 72.31 C 17.777 73.341 16.921 74.197 15.89 74.792 C 14.859 75.387 13.69 75.7 12.5 75.7 L 7.28 75.7 C 5.483 75.7 3.757 74.985 2.486 73.714 C 1.215 72.443 0.5 70.717 0.5 68.92 L 0.5 68.91 C 0.5 67.72 0.813 66.551 1.408 65.52 C 2.003 64.489 2.859 63.633 3.89 63.038 C 4.921 62.443 6.09 62.13 7.28 62.13"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_2">
        <path
            android:name="path_13"
            android:pathData="M 104.009 104.017 L 104.016 104.01 C 104.858 103.169 105.906 102.563 107.055 102.255 C 108.205 101.947 109.416 101.947 110.565 102.255 C 111.715 102.563 112.763 103.169 113.604 104.01 L 117.295 107.701 C 118.137 108.543 118.742 109.591 119.05 110.741 C 119.358 111.89 119.358 113.101 119.05 114.25 C 118.742 115.4 118.137 116.448 117.295 117.29 L 117.288 117.297 C 116.447 118.138 115.399 118.744 114.249 119.052 C 113.1 119.36 111.889 119.36 110.739 119.052 C 109.59 118.744 108.542 118.138 107.7 117.297 L 104.009 113.606 C 103.167 112.764 102.562 111.716 102.254 110.566 C 101.946 109.417 101.946 108.206 102.254 107.057 C 102.562 105.907 103.167 104.859 104.009 104.017"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_14"
            android:pathData="M 104.009 104.017 L 104.016 104.01 C 104.858 103.169 105.906 102.563 107.055 102.255 C 108.205 101.947 109.416 101.947 110.565 102.255 C 111.715 102.563 112.763 103.169 113.604 104.01 L 117.295 107.701 C 118.137 108.543 118.742 109.591 119.05 110.741 C 119.358 111.89 119.358 113.101 119.05 114.25 C 118.742 115.4 118.137 116.448 117.295 117.29 L 117.288 117.297 C 116.447 118.138 115.399 118.744 114.249 119.052 C 113.1 119.36 111.889 119.36 110.739 119.052 C 109.59 118.744 108.542 118.138 107.7 117.297 L 104.009 113.606 C 103.167 112.764 102.562 111.716 102.254 110.566 C 101.946 109.417 101.946 108.206 102.254 107.057 C 102.562 105.907 103.167 104.859 104.009 104.017"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_3">
        <path
            android:name="path_15"
            android:pathData="M 20.542 20.54 L 20.549 20.533 C 21.39 19.692 22.439 19.086 23.588 18.778 C 24.738 18.47 25.948 18.47 27.098 18.778 C 28.247 19.086 29.296 19.692 30.137 20.533 L 33.828 24.224 C 34.67 25.066 35.275 26.114 35.583 27.264 C 35.891 28.413 35.891 29.624 35.583 30.773 C 35.275 31.923 34.67 32.971 33.828 33.813 L 33.821 33.82 C 32.98 34.661 31.931 35.267 30.782 35.575 C 29.632 35.883 28.422 35.883 27.272 35.575 C 26.123 35.267 25.074 34.661 24.233 33.82 L 20.542 30.129 C 19.7 29.287 19.095 28.239 18.787 27.089 C 18.479 25.94 18.479 24.729 18.787 23.58 C 19.095 22.43 19.7 21.382 20.542 20.54"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_16"
            android:pathData="M 20.542 20.54 L 20.549 20.533 C 21.39 19.692 22.439 19.086 23.588 18.778 C 24.738 18.47 25.948 18.47 27.098 18.778 C 28.247 19.086 29.296 19.692 30.137 20.533 L 33.828 24.224 C 34.67 25.066 35.275 26.114 35.583 27.264 C 35.891 28.413 35.891 29.624 35.583 30.773 C 35.275 31.923 34.67 32.971 33.828 33.813 L 33.821 33.82 C 32.98 34.661 31.931 35.267 30.782 35.575 C 29.632 35.883 28.422 35.883 27.272 35.575 C 26.123 35.267 25.074 34.661 24.233 33.82 L 20.542 30.129 C 19.7 29.287 19.095 28.239 18.787 27.089 C 18.479 25.94 18.479 24.729 18.787 23.58 C 19.095 22.43 19.7 21.382 20.542 20.54"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
</vector>



================================================
FILE: app/src/main/res/drawable/sun_2.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="26.14dp"
    android:height="26.14dp"
    android:viewportWidth="149"
    android:viewportHeight="149">
    <path
        android:name="path"
        android:pathData="M 74.99 41.67 C 66.241 41.67 57.842 45.149 51.655 51.335 C 45.469 57.522 41.99 65.921 41.99 74.67 C 41.99 83.419 45.469 91.818 51.655 98.005 C 57.842 104.191 66.241 107.67 74.99 107.67 C 83.739 107.67 92.138 104.191 98.325 98.005 C 104.511 91.818 107.99 83.419 107.99 74.67 C 107.99 65.921 104.511 57.522 98.325 51.335 C 92.138 45.149 83.739 41.67 74.99 41.67 Z"
        android:fillColor="#ffffff"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_1"
        android:pathData="M 74.66 0.5 L 74.67 0.5 C 76.467 0.5 78.193 1.215 79.464 2.486 C 80.735 3.757 81.45 5.483 81.45 7.28 L 81.45 18.26 C 81.45 20.057 80.735 21.783 79.464 23.054 C 78.193 24.325 76.467 25.04 74.67 25.04 L 74.66 25.04 C 72.863 25.04 71.137 24.325 69.866 23.054 C 68.595 21.783 67.88 20.057 67.88 18.26 L 67.88 7.28 C 67.88 5.483 68.595 3.757 69.866 2.486 C 71.137 1.215 72.863 0.5 74.66 0.5"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_2"
        android:pathData="M 74.66 0.5 L 74.67 0.5 C 76.467 0.5 78.193 1.215 79.464 2.486 C 80.735 3.757 81.45 5.483 81.45 7.28 L 81.45 18.26 C 81.45 20.057 80.735 21.783 79.464 23.054 C 78.193 24.325 76.467 25.04 74.67 25.04 L 74.66 25.04 C 72.863 25.04 71.137 24.325 69.866 23.054 C 68.595 21.783 67.88 20.057 67.88 18.26 L 67.88 7.28 C 67.88 5.483 68.595 3.757 69.866 2.486 C 71.137 1.215 72.863 0.5 74.66 0.5"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_3"
        android:pathData="M 74.66 124.3 L 74.67 124.3 C 76.467 124.3 78.193 125.015 79.464 126.286 C 80.735 127.557 81.45 129.283 81.45 131.08 L 81.45 142.06 C 81.45 143.857 80.735 145.583 79.464 146.854 C 78.193 148.125 76.467 148.84 74.67 148.84 L 74.66 148.84 C 72.863 148.84 71.137 148.125 69.866 146.854 C 68.595 145.583 67.88 143.857 67.88 142.06 L 67.88 131.08 C 67.88 129.283 68.595 127.557 69.866 126.286 C 71.137 125.015 72.863 124.3 74.66 124.3"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_4"
        android:pathData="M 74.66 124.3 L 74.67 124.3 C 76.467 124.3 78.193 125.015 79.464 126.286 C 80.735 127.557 81.45 129.283 81.45 131.08 L 81.45 142.06 C 81.45 143.857 80.735 145.583 79.464 146.854 C 78.193 148.125 76.467 148.84 74.67 148.84 L 74.66 148.84 C 72.863 148.84 71.137 148.125 69.866 146.854 C 68.595 145.583 67.88 143.857 67.88 142.06 L 67.88 131.08 C 67.88 129.283 68.595 127.557 69.866 126.286 C 71.137 125.015 72.863 124.3 74.66 124.3"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_5"
        android:pathData="M 109.76 29.988 L 117.524 22.224 C 118.366 21.382 119.414 20.777 120.564 20.469 C 121.713 20.161 122.924 20.161 124.073 20.469 C 125.223 20.777 126.271 21.382 127.113 22.224 L 127.12 22.231 C 127.961 23.072 128.567 24.121 128.875 25.27 C 129.183 26.42 129.183 27.63 128.875 28.78 C 128.567 29.929 127.961 30.978 127.12 31.819 L 119.356 39.583 C 118.514 40.425 117.466 41.03 116.316 41.338 C 115.167 41.646 113.956 41.646 112.807 41.338 C 111.657 41.03 110.609 40.425 109.767 39.583 L 109.76 39.576 C 108.919 38.735 108.314 37.686 108.005 36.537 C 107.697 35.387 107.697 34.177 108.005 33.027 C 108.314 31.878 108.919 30.829 109.76 29.988"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_6"
        android:pathData="M 109.76 29.988 L 117.524 22.224 C 118.366 21.382 119.414 20.777 120.564 20.469 C 121.713 20.161 122.924 20.161 124.073 20.469 C 125.223 20.777 126.271 21.382 127.113 22.224 L 127.12 22.231 C 127.961 23.072 128.567 24.121 128.875 25.27 C 129.183 26.42 129.183 27.63 128.875 28.78 C 128.567 29.929 127.961 30.978 127.12 31.819 L 119.356 39.583 C 118.514 40.425 117.466 41.03 116.316 41.338 C 115.167 41.646 113.956 41.646 112.807 41.338 C 111.657 41.03 110.609 40.425 109.767 39.583 L 109.76 39.576 C 108.919 38.735 108.314 37.686 108.005 36.537 C 107.697 35.387 107.697 34.177 108.005 33.027 C 108.314 31.878 108.919 30.829 109.76 29.988"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_7"
        android:pathData="M 22.22 117.528 L 29.984 109.764 C 30.826 108.922 31.874 108.317 33.024 108.009 C 34.173 107.701 35.384 107.701 36.533 108.009 C 37.683 108.317 38.731 108.922 39.573 109.764 L 39.58 109.771 C 40.421 110.612 41.027 111.661 41.335 112.81 C 41.643 113.96 41.643 115.17 41.335 116.32 C 41.027 117.469 40.421 118.518 39.58 119.359 L 31.816 127.123 C 30.974 127.965 29.926 128.57 28.776 128.878 C 27.627 129.186 26.416 129.186 25.267 128.878 C 24.117 128.57 23.069 127.965 22.227 127.123 L 22.22 127.116 C 21.379 126.275 20.774 125.226 20.465 124.077 C 20.157 122.927 20.157 121.717 20.465 120.567 C 20.774 119.418 21.379 118.369 22.22 117.528"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_8"
        android:pathData="M 22.22 117.528 L 29.984 109.764 C 30.826 108.922 31.874 108.317 33.024 108.009 C 34.173 107.701 35.384 107.701 36.533 108.009 C 37.683 108.317 38.731 108.922 39.573 109.764 L 39.58 109.771 C 40.421 110.612 41.027 111.661 41.335 112.81 C 41.643 113.96 41.643 115.17 41.335 116.32 C 41.027 117.469 40.421 118.518 39.58 119.359 L 31.816 127.123 C 30.974 127.965 29.926 128.57 28.776 128.878 C 27.627 129.186 26.416 129.186 25.267 128.878 C 24.117 128.57 23.069 127.965 22.227 127.123 L 22.22 127.116 C 21.379 126.275 20.774 125.226 20.465 124.077 C 20.157 122.927 20.157 121.717 20.465 120.567 C 20.774 119.418 21.379 118.369 22.22 117.528"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <group android:name="group">
        <path
            android:name="path_9"
            android:pathData="M 131.08 67.88 L 142.06 67.88 C 143.857 67.88 145.583 68.595 146.854 69.866 C 148.125 71.137 148.84 72.863 148.84 74.66 L 148.84 74.67 C 148.84 76.467 148.125 78.193 146.854 79.464 C 145.583 80.735 143.857 81.45 142.06 81.45 L 131.08 81.45 C 129.283 81.45 127.557 80.735 126.286 79.464 C 125.015 78.193 124.3 76.467 124.3 74.67 L 124.3 74.66 C 124.3 72.863 125.015 71.137 126.286 69.866 C 127.557 68.595 129.283 67.88 131.08 67.88"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_10"
            android:pathData="M 131.08 67.88 L 142.06 67.88 C 143.857 67.88 145.583 68.595 146.854 69.866 C 148.125 71.137 148.84 72.863 148.84 74.66 L 148.84 74.67 C 148.84 76.467 148.125 78.193 146.854 79.464 C 145.583 80.735 143.857 81.45 142.06 81.45 L 131.08 81.45 C 129.283 81.45 127.557 80.735 126.286 79.464 C 125.015 78.193 124.3 76.467 124.3 74.67 L 124.3 74.66 C 124.3 72.863 125.015 71.137 126.286 69.866 C 127.557 68.595 129.283 67.88 131.08 67.88"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_1">
        <path
            android:name="path_11"
            android:pathData="M 7.28 67.88 L 18.26 67.88 C 20.057 67.88 21.783 68.595 23.054 69.866 C 24.325 71.137 25.04 72.863 25.04 74.66 L 25.04 74.67 C 25.04 76.467 24.325 78.193 23.054 79.464 C 21.783 80.735 20.057 81.45 18.26 81.45 L 7.28 81.45 C 5.483 81.45 3.757 80.735 2.486 79.464 C 1.215 78.193 0.5 76.467 0.5 74.67 L 0.5 74.66 C 0.5 72.863 1.215 71.137 2.486 69.866 C 3.757 68.595 5.483 67.88 7.28 67.88"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_12"
            android:pathData="M 7.28 67.88 L 18.26 67.88 C 20.057 67.88 21.783 68.595 23.054 69.866 C 24.325 71.137 25.04 72.863 25.04 74.66 L 25.04 74.67 C 25.04 76.467 24.325 78.193 23.054 79.464 C 21.783 80.735 20.057 81.45 18.26 81.45 L 7.28 81.45 C 5.483 81.45 3.757 80.735 2.486 79.464 C 1.215 78.193 0.5 76.467 0.5 74.67 L 0.5 74.66 C 0.5 72.863 1.215 71.137 2.486 69.866 C 3.757 68.595 5.483 67.88 7.28 67.88"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_2">
        <path
            android:name="path_13"
            android:pathData="M 109.76 109.764 L 109.767 109.757 C 110.609 108.915 111.657 108.31 112.807 108.002 C 113.956 107.694 115.167 107.694 116.316 108.002 C 117.466 108.31 118.514 108.915 119.356 109.757 L 127.12 117.521 C 127.961 118.362 128.567 119.411 128.875 120.56 C 129.183 121.71 129.183 122.92 128.875 124.07 C 128.567 125.219 127.961 126.268 127.12 127.109 L 127.113 127.116 C 126.271 127.958 125.223 128.563 124.073 128.871 C 122.924 129.179 121.713 129.179 120.564 128.871 C 119.414 128.563 118.366 127.958 117.524 127.116 L 109.76 119.352 C 108.919 118.511 108.314 117.462 108.006 116.313 C 107.698 115.163 107.698 113.953 108.006 112.803 C 108.314 111.654 108.919 110.605 109.76 109.764"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_14"
            android:pathData="M 109.76 109.764 L 109.767 109.757 C 110.609 108.915 111.657 108.31 112.807 108.002 C 113.956 107.694 115.167 107.694 116.316 108.002 C 117.466 108.31 118.514 108.915 119.356 109.757 L 127.12 117.521 C 127.961 118.362 128.567 119.411 128.875 120.56 C 129.183 121.71 129.183 122.92 128.875 124.07 C 128.567 125.219 127.961 126.268 127.12 127.109 L 127.113 127.116 C 126.271 127.958 125.223 128.563 124.073 128.871 C 122.924 129.179 121.713 129.179 120.564 128.871 C 119.414 128.563 118.366 127.958 117.524 127.116 L 109.76 119.352 C 108.919 118.511 108.314 117.462 108.006 116.313 C 107.698 115.163 107.698 113.953 108.006 112.803 C 108.314 111.654 108.919 110.605 109.76 109.764"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_3">
        <path
            android:name="path_15"
            android:pathData="M 22.22 22.224 L 22.227 22.217 C 23.069 21.375 24.117 20.77 25.267 20.462 C 26.416 20.154 27.627 20.154 28.776 20.462 C 29.926 20.77 30.974 21.375 31.816 22.217 L 39.58 29.981 C 40.421 30.822 41.026 31.871 41.334 33.02 C 41.642 34.17 41.642 35.38 41.334 36.53 C 41.026 37.679 40.421 38.728 39.58 39.569 L 39.573 39.576 C 38.731 40.418 37.683 41.023 36.533 41.331 C 35.384 41.639 34.173 41.639 33.024 41.331 C 31.874 41.023 30.826 40.418 29.984 39.576 L 22.22 31.812 C 21.379 30.971 20.773 29.922 20.465 28.773 C 20.157 27.623 20.157 26.413 20.465 25.263 C 20.773 24.114 21.379 23.065 22.22 22.224"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_16"
            android:pathData="M 22.22 22.224 L 22.227 22.217 C 23.069 21.375 24.117 20.77 25.267 20.462 C 26.416 20.154 27.627 20.154 28.776 20.462 C 29.926 20.77 30.974 21.375 31.816 22.217 L 39.58 29.981 C 40.421 30.822 41.026 31.871 41.334 33.02 C 41.642 34.17 41.642 35.38 41.334 36.53 C 41.026 37.679 40.421 38.728 39.58 39.569 L 39.573 39.576 C 38.731 40.418 37.683 41.023 36.533 41.331 C 35.384 41.639 34.173 41.639 33.024 41.331 C 31.874 41.023 30.826 40.418 29.984 39.576 L 22.22 31.812 C 21.379 30.971 20.773 29.922 20.465 28.773 C 20.157 27.623 20.157 26.413 20.465 25.263 C 20.773 24.114 21.379 23.065 22.22 22.224"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
</vector>



================================================
FILE: app/src/main/res/drawable/sun_3.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="27.19dp"
    android:height="27.19dp"
    android:viewportWidth="155"
    android:viewportHeight="155">
    <path
        android:name="path"
        android:pathData="M 77.86 44.54 C 69.111 44.54 60.712 48.019 54.525 54.205 C 48.339 60.392 44.86 68.791 44.86 77.54 C 44.86 86.289 48.339 94.688 54.525 100.875 C 60.712 107.061 69.111 110.54 77.86 110.54 C 86.609 110.54 95.008 107.061 101.195 100.875 C 107.381 94.688 110.86 86.289 110.86 77.54 C 110.86 68.791 107.381 60.392 101.195 54.205 C 95.008 48.019 86.609 44.54 77.86 44.54 Z"
        android:fillColor="#ffffff"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_1"
        android:pathData="M 77.53 0.5 L 77.54 0.5 C 79.337 0.5 81.063 1.215 82.334 2.486 C 83.605 3.757 84.32 5.483 84.32 7.28 L 84.32 21.13 C 84.32 22.32 84.007 23.489 83.412 24.52 C 82.817 25.551 81.961 26.407 80.93 27.002 C 79.899 27.597 78.73 27.91 77.54 27.91 L 77.53 27.91 C 75.733 27.91 74.007 27.195 72.736 25.924 C 71.465 24.653 70.75 22.927 70.75 21.13 L 70.75 7.28 C 70.75 5.483 71.465 3.757 72.736 2.486 C 74.007 1.215 75.733 0.5 77.53 0.5"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_2"
        android:pathData="M 77.53 0.5 L 77.54 0.5 C 79.337 0.5 81.063 1.215 82.334 2.486 C 83.605 3.757 84.32 5.483 84.32 7.28 L 84.32 21.13 C 84.32 22.32 84.007 23.489 83.412 24.52 C 82.817 25.551 81.961 26.407 80.93 27.002 C 79.899 27.597 78.73 27.91 77.54 27.91 L 77.53 27.91 C 75.733 27.91 74.007 27.195 72.736 25.924 C 71.465 24.653 70.75 22.927 70.75 21.13 L 70.75 7.28 C 70.75 5.483 71.465 3.757 72.736 2.486 C 74.007 1.215 75.733 0.5 77.53 0.5"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_3"
        android:pathData="M 77.53 127.17 L 77.54 127.17 C 79.337 127.17 81.063 127.885 82.334 129.156 C 83.605 130.427 84.32 132.153 84.32 133.95 L 84.32 147.8 C 84.32 149.597 83.605 151.323 82.334 152.594 C 81.063 153.865 79.337 154.58 77.54 154.58 L 77.53 154.58 C 75.733 154.58 74.007 153.865 72.736 152.594 C 71.465 151.323 70.75 149.597 70.75 147.8 L 70.75 133.95 C 70.75 132.153 71.465 130.427 72.736 129.156 C 74.007 127.885 75.733 127.17 77.53 127.17"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_4"
        android:pathData="M 77.53 127.17 L 77.54 127.17 C 79.337 127.17 81.063 127.885 82.334 129.156 C 83.605 130.427 84.32 132.153 84.32 133.95 L 84.32 147.8 C 84.32 149.597 83.605 151.323 82.334 152.594 C 81.063 153.865 79.337 154.58 77.54 154.58 L 77.53 154.58 C 75.733 154.58 74.007 153.865 72.736 152.594 C 71.465 151.323 70.75 149.597 70.75 147.8 L 70.75 133.95 C 70.75 132.153 71.465 130.427 72.736 129.156 C 74.007 127.885 75.733 127.17 77.53 127.17"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_5"
        android:pathData="M 112.629 32.861 L 122.423 23.067 C 123.694 21.796 125.419 21.081 127.217 21.081 C 129.014 21.081 130.74 21.796 132.011 23.067 L 132.018 23.074 C 132.859 23.916 133.465 24.964 133.773 26.114 C 134.081 27.263 134.081 28.474 133.773 29.623 C 133.465 30.773 132.859 31.821 132.018 32.663 L 122.225 42.456 C 121.383 43.297 120.335 43.903 119.185 44.211 C 118.036 44.519 116.825 44.519 115.676 44.211 C 114.526 43.903 113.478 43.297 112.636 42.456 L 112.629 42.449 C 111.788 41.607 111.182 40.559 110.874 39.409 C 110.566 38.26 110.566 37.049 110.874 35.9 C 111.182 34.75 111.788 33.702 112.629 32.861"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_6"
        android:pathData="M 112.629 32.861 L 122.423 23.067 C 123.694 21.796 125.419 21.081 127.217 21.081 C 129.014 21.081 130.74 21.796 132.011 23.067 L 132.018 23.074 C 132.859 23.916 133.465 24.964 133.773 26.114 C 134.081 27.263 134.081 28.474 133.773 29.623 C 133.465 30.773 132.859 31.821 132.018 32.663 L 122.225 42.456 C 121.383 43.297 120.335 43.903 119.185 44.211 C 118.036 44.519 116.825 44.519 115.676 44.211 C 114.526 43.903 113.478 43.297 112.636 42.456 L 112.629 42.449 C 111.788 41.607 111.182 40.559 110.874 39.409 C 110.566 38.26 110.566 37.049 110.874 35.9 C 111.182 34.75 111.788 33.702 112.629 32.861"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_7"
        android:pathData="M 23.059 122.417 L 32.853 112.624 C 34.124 111.353 35.849 110.638 37.647 110.638 C 39.444 110.638 41.17 111.353 42.441 112.624 L 42.448 112.631 C 43.289 113.473 43.895 114.521 44.203 115.671 C 44.511 116.82 44.511 118.031 44.203 119.18 C 43.895 120.33 43.289 121.378 42.448 122.219 L 32.655 132.013 C 31.813 132.854 30.765 133.46 29.615 133.768 C 28.466 134.076 27.255 134.076 26.106 133.768 C 24.956 133.46 23.908 132.854 23.066 132.013 L 23.059 132.006 C 22.218 131.164 21.612 130.116 21.304 128.966 C 20.996 127.817 20.996 126.606 21.304 125.457 C 21.612 124.307 22.218 123.259 23.059 122.417"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_8"
        android:pathData="M 23.059 122.417 L 32.853 112.624 C 34.124 111.353 35.849 110.638 37.647 110.638 C 39.444 110.638 41.17 111.353 42.441 112.624 L 42.448 112.631 C 43.289 113.473 43.895 114.521 44.203 115.671 C 44.511 116.82 44.511 118.031 44.203 119.18 C 43.895 120.33 43.289 121.378 42.448 122.219 L 32.655 132.013 C 31.813 132.854 30.765 133.46 29.615 133.768 C 28.466 134.076 27.255 134.076 26.106 133.768 C 24.956 133.46 23.908 132.854 23.066 132.013 L 23.059 132.006 C 22.218 131.164 21.612 130.116 21.304 128.966 C 20.996 127.817 20.996 126.606 21.304 125.457 C 21.612 124.307 22.218 123.259 23.059 122.417"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <group android:name="group">
        <path
            android:name="path_9"
            android:pathData="M 133.95 70.75 L 147.8 70.75 C 149.597 70.75 151.323 71.465 152.594 72.736 C 153.865 74.007 154.58 75.733 154.58 77.53 L 154.58 77.54 C 154.58 79.337 153.865 81.063 152.594 82.334 C 151.323 83.605 149.597 84.32 147.8 84.32 L 133.95 84.32 C 132.153 84.32 130.427 83.605 129.156 82.334 C 127.885 81.063 127.17 79.337 127.17 77.54 L 127.17 77.53 C 127.17 75.733 127.885 74.007 129.156 72.736 C 130.427 71.465 132.153 70.75 133.95 70.75"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_10"
            android:pathData="M 133.95 70.75 L 147.8 70.75 C 149.597 70.75 151.323 71.465 152.594 72.736 C 153.865 74.007 154.58 75.733 154.58 77.53 L 154.58 77.54 C 154.58 79.337 153.865 81.063 152.594 82.334 C 151.323 83.605 149.597 84.32 147.8 84.32 L 133.95 84.32 C 132.153 84.32 130.427 83.605 129.156 82.334 C 127.885 81.063 127.17 79.337 127.17 77.54 L 127.17 77.53 C 127.17 75.733 127.885 74.007 129.156 72.736 C 130.427 71.465 132.153 70.75 133.95 70.75"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_1">
        <path
            android:name="path_11"
            android:pathData="M 7.28 70.75 L 21.13 70.75 C 22.32 70.75 23.489 71.063 24.52 71.658 C 25.551 72.253 26.407 73.109 27.002 74.14 C 27.597 75.171 27.91 76.34 27.91 77.53 L 27.91 77.54 C 27.91 78.73 27.597 79.899 27.002 80.93 C 26.407 81.961 25.551 82.817 24.52 83.412 C 23.489 84.007 22.32 84.32 21.13 84.32 L 7.28 84.32 C 5.483 84.32 3.757 83.605 2.486 82.334 C 1.215 81.063 0.5 79.337 0.5 77.54 L 0.5 77.53 C 0.5 75.733 1.215 74.007 2.486 72.736 C 3.757 71.465 5.483 70.75 7.28 70.75"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_12"
            android:pathData="M 7.28 70.75 L 21.13 70.75 C 22.32 70.75 23.489 71.063 24.52 71.658 C 25.551 72.253 26.407 73.109 27.002 74.14 C 27.597 75.171 27.91 76.34 27.91 77.53 L 27.91 77.54 C 27.91 78.73 27.597 79.899 27.002 80.93 C 26.407 81.961 25.551 82.817 24.52 83.412 C 23.489 84.007 22.32 84.32 21.13 84.32 L 7.28 84.32 C 5.483 84.32 3.757 83.605 2.486 82.334 C 1.215 81.063 0.5 79.337 0.5 77.54 L 0.5 77.53 C 0.5 75.733 1.215 74.007 2.486 72.736 C 3.757 71.465 5.483 70.75 7.28 70.75"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_2">
        <path
            android:name="path_13"
            android:pathData="M 112.628 112.633 L 112.635 112.626 C 113.476 111.784 114.525 111.179 115.674 110.871 C 116.824 110.563 118.034 110.563 119.184 110.871 C 120.333 111.179 121.382 111.784 122.223 112.626 L 132.016 122.419 C 132.858 123.26 133.463 124.309 133.771 125.458 C 134.079 126.608 134.079 127.818 133.771 128.968 C 133.463 130.117 132.858 131.166 132.016 132.007 L 132.009 132.014 C 130.738 133.285 129.013 134 127.215 134 C 125.418 134 123.692 133.285 122.421 132.014 L 112.628 122.221 C 111.786 121.38 111.181 120.331 110.873 119.182 C 110.565 118.032 110.565 116.822 110.873 115.672 C 111.181 114.523 111.786 113.474 112.628 112.633"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_14"
            android:pathData="M 112.628 112.633 L 112.635 112.626 C 113.476 111.784 114.525 111.179 115.674 110.871 C 116.824 110.563 118.034 110.563 119.184 110.871 C 120.333 111.179 121.382 111.784 122.223 112.626 L 132.016 122.419 C 132.858 123.26 133.463 124.309 133.771 125.458 C 134.079 126.608 134.079 127.818 133.771 128.968 C 133.463 130.117 132.858 131.166 132.016 132.007 L 132.009 132.014 C 130.738 133.285 129.013 134 127.215 134 C 125.418 134 123.692 133.285 122.421 132.014 L 112.628 122.221 C 111.786 121.38 111.181 120.331 110.873 119.182 C 110.565 118.032 110.565 116.822 110.873 115.672 C 111.181 114.523 111.786 113.474 112.628 112.633"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_3">
        <path
            android:name="path_15"
            android:pathData="M 23.071 23.063 L 23.078 23.056 C 23.919 22.214 24.968 21.609 26.117 21.301 C 27.267 20.993 28.477 20.993 29.627 21.301 C 30.776 21.609 31.825 22.214 32.666 23.056 L 42.46 32.849 C 43.301 33.69 43.906 34.739 44.214 35.888 C 44.522 37.038 44.522 38.248 44.214 39.398 C 43.906 40.547 43.301 41.596 42.46 42.437 L 42.452 42.444 C 41.611 43.286 40.563 43.891 39.413 44.199 C 38.264 44.507 37.053 44.507 35.903 44.199 C 34.754 43.891 33.706 43.286 32.864 42.444 L 23.071 32.651 C 22.229 31.81 21.624 30.761 21.316 29.612 C 21.008 28.462 21.008 27.252 21.316 26.102 C 21.624 24.953 22.229 23.904 23.071 23.063"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_16"
            android:pathData="M 23.071 23.063 L 23.078 23.056 C 23.919 22.214 24.968 21.609 26.117 21.301 C 27.267 20.993 28.477 20.993 29.627 21.301 C 30.776 21.609 31.825 22.214 32.666 23.056 L 42.46 32.849 C 43.301 33.69 43.906 34.739 44.214 35.888 C 44.522 37.038 44.522 38.248 44.214 39.398 C 43.906 40.547 43.301 41.596 42.46 42.437 L 42.452 42.444 C 41.611 43.286 40.563 43.891 39.413 44.199 C 38.264 44.507 37.053 44.507 35.903 44.199 C 34.754 43.891 33.706 43.286 32.864 42.444 L 23.071 32.651 C 22.229 31.81 21.624 30.761 21.316 29.612 C 21.008 28.462 21.008 27.252 21.316 26.102 C 21.624 24.953 22.229 23.904 23.071 23.063"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
</vector>



================================================
FILE: app/src/main/res/drawable/sun_4.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="29.12dp"
    android:height="29.12dp"
    android:viewportWidth="166"
    android:viewportHeight="166">
    <path
        android:name="path"
        android:pathData="M 83.34 50.01 C 76.372 50.01 69.58 52.217 63.943 56.312 C 58.306 60.408 54.108 66.186 51.955 72.812 C 49.802 79.439 49.802 86.581 51.955 93.208 C 54.108 99.834 58.306 105.612 63.943 109.708 C 69.58 113.803 76.372 116.01 83.34 116.01 C 92.089 116.01 100.488 112.531 106.675 106.345 C 112.861 100.158 116.34 91.759 116.34 83.01 C 116.34 74.261 112.861 65.862 106.675 59.675 C 100.488 53.489 92.089 50.01 83.34 50.01 Z"
        android:fillColor="#ffffff"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_1"
        android:pathData="M 83.01 0.5 L 83.02 0.5 C 84.817 0.5 86.543 1.215 87.814 2.486 C 89.085 3.757 89.8 5.483 89.8 7.28 L 89.8 26.6 C 89.8 28.397 89.085 30.123 87.814 31.394 C 86.543 32.665 84.817 33.38 83.02 33.38 L 83.01 33.38 C 81.213 33.38 79.487 32.665 78.216 31.394 C 76.945 30.123 76.23 28.397 76.23 26.6 L 76.23 7.28 C 76.23 5.483 76.945 3.757 78.216 2.486 C 79.487 1.215 81.213 0.5 83.01 0.5"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_2"
        android:pathData="M 83.01 0.5 L 83.02 0.5 C 84.817 0.5 86.543 1.215 87.814 2.486 C 89.085 3.757 89.8 5.483 89.8 7.28 L 89.8 26.6 C 89.8 28.397 89.085 30.123 87.814 31.394 C 86.543 32.665 84.817 33.38 83.02 33.38 L 83.01 33.38 C 81.213 33.38 79.487 32.665 78.216 31.394 C 76.945 30.123 76.23 28.397 76.23 26.6 L 76.23 7.28 C 76.23 5.483 76.945 3.757 78.216 2.486 C 79.487 1.215 81.213 0.5 83.01 0.5"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_3"
        android:pathData="M 83.01 132.65 L 83.02 132.65 C 84.817 132.65 86.543 133.365 87.814 134.636 C 89.085 135.907 89.8 137.633 89.8 139.43 L 89.8 158.75 C 89.8 160.547 89.085 162.273 87.814 163.544 C 86.543 164.815 84.817 165.53 83.02 165.53 L 83.01 165.53 C 81.213 165.53 79.487 164.815 78.216 163.544 C 76.945 162.273 76.23 160.547 76.23 158.75 L 76.23 139.43 C 76.23 137.633 76.945 135.907 78.216 134.636 C 79.487 133.365 81.213 132.65 83.01 132.65"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_4"
        android:pathData="M 83.01 132.65 L 83.02 132.65 C 84.817 132.65 86.543 133.365 87.814 134.636 C 89.085 135.907 89.8 137.633 89.8 139.43 L 89.8 158.75 C 89.8 160.547 89.085 162.273 87.814 163.544 C 86.543 164.815 84.817 165.53 83.02 165.53 L 83.01 165.53 C 81.213 165.53 79.487 164.815 78.216 163.544 C 76.945 162.273 76.23 160.547 76.23 158.75 L 76.23 139.43 C 76.23 137.633 76.945 135.907 78.216 134.636 C 79.487 133.365 81.213 132.65 83.01 132.65"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_5"
        android:pathData="M 118.112 38.334 L 131.773 24.673 C 132.614 23.832 133.663 23.226 134.812 22.918 C 135.962 22.61 137.172 22.61 138.322 22.918 C 139.471 23.226 140.52 23.832 141.361 24.673 L 141.368 24.68 C 142.21 25.522 142.815 26.57 143.123 27.72 C 143.431 28.869 143.431 30.08 143.123 31.229 C 142.815 32.379 142.21 33.427 141.368 34.269 L 127.707 47.93 C 126.866 48.771 125.817 49.377 124.668 49.685 C 123.518 49.993 122.308 49.993 121.158 49.685 C 120.009 49.377 118.96 48.771 118.119 47.93 L 118.112 47.923 C 117.27 47.081 116.665 46.033 116.357 44.883 C 116.049 43.734 116.049 42.523 116.357 41.374 C 116.665 40.224 117.27 39.176 118.112 38.334"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_6"
        android:pathData="M 118.112 38.334 L 131.773 24.673 C 132.614 23.832 133.663 23.226 134.812 22.918 C 135.962 22.61 137.172 22.61 138.322 22.918 C 139.471 23.226 140.52 23.832 141.361 24.673 L 141.368 24.68 C 142.21 25.522 142.815 26.57 143.123 27.72 C 143.431 28.869 143.431 30.08 143.123 31.229 C 142.815 32.379 142.21 33.427 141.368 34.269 L 127.707 47.93 C 126.866 48.771 125.817 49.377 124.668 49.685 C 123.518 49.993 122.308 49.993 121.158 49.685 C 120.009 49.377 118.96 48.771 118.119 47.93 L 118.112 47.923 C 117.27 47.081 116.665 46.033 116.357 44.883 C 116.049 43.734 116.049 42.523 116.357 41.374 C 116.665 40.224 117.27 39.176 118.112 38.334"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_7"
        android:pathData="M 24.662 131.769 L 38.323 118.107 C 39.164 117.266 40.213 116.66 41.362 116.352 C 42.512 116.044 43.722 116.044 44.872 116.352 C 46.021 116.66 47.07 117.266 47.911 118.107 L 47.918 118.114 C 48.76 118.956 49.365 120.004 49.673 121.154 C 49.981 122.303 49.981 123.514 49.673 124.663 C 49.365 125.813 48.76 126.861 47.918 127.703 L 34.257 141.364 C 33.416 142.205 32.367 142.811 31.218 143.119 C 30.068 143.427 28.858 143.427 27.708 143.119 C 26.559 142.811 25.51 142.205 24.669 141.364 L 24.662 141.357 C 23.82 140.515 23.215 139.467 22.907 138.318 C 22.599 137.168 22.599 135.957 22.907 134.808 C 23.215 133.658 23.82 132.61 24.662 131.769"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_8"
        android:pathData="M 24.662 131.769 L 38.323 118.107 C 39.164 117.266 40.213 116.66 41.362 116.352 C 42.512 116.044 43.722 116.044 44.872 116.352 C 46.021 116.66 47.07 117.266 47.911 118.107 L 47.918 118.114 C 48.76 118.956 49.365 120.004 49.673 121.154 C 49.981 122.303 49.981 123.514 49.673 124.663 C 49.365 125.813 48.76 126.861 47.918 127.703 L 34.257 141.364 C 33.416 142.205 32.367 142.811 31.218 143.119 C 30.068 143.427 28.858 143.427 27.708 143.119 C 26.559 142.811 25.51 142.205 24.669 141.364 L 24.662 141.357 C 23.82 140.515 23.215 139.467 22.907 138.318 C 22.599 137.168 22.599 135.957 22.907 134.808 C 23.215 133.658 23.82 132.61 24.662 131.769"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <group android:name="group">
        <path
            android:name="path_9"
            android:pathData="M 139.43 76.23 L 158.75 76.23 C 160.547 76.23 162.273 76.945 163.544 78.216 C 164.815 79.487 165.53 81.213 165.53 83.01 L 165.53 83.02 C 165.53 84.817 164.815 86.543 163.544 87.814 C 162.273 89.085 160.547 89.8 158.75 89.8 L 139.43 89.8 C 137.633 89.8 135.907 89.085 134.636 87.814 C 133.365 86.543 132.65 84.817 132.65 83.02 L 132.65 83.01 C 132.65 81.213 133.365 79.487 134.636 78.216 C 135.907 76.945 137.633 76.23 139.43 76.23"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_10"
            android:pathData="M 139.43 76.23 L 158.75 76.23 C 160.547 76.23 162.273 76.945 163.544 78.216 C 164.815 79.487 165.53 81.213 165.53 83.01 L 165.53 83.02 C 165.53 84.817 164.815 86.543 163.544 87.814 C 162.273 89.085 160.547 89.8 158.75 89.8 L 139.43 89.8 C 137.633 89.8 135.907 89.085 134.636 87.814 C 133.365 86.543 132.65 84.817 132.65 83.02 L 132.65 83.01 C 132.65 81.213 133.365 79.487 134.636 78.216 C 135.907 76.945 137.633 76.23 139.43 76.23"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_1">
        <path
            android:name="path_11"
            android:pathData="M 7.28 76.23 L 26.6 76.23 C 28.397 76.23 30.123 76.945 31.394 78.216 C 32.665 79.487 33.38 81.213 33.38 83.01 L 33.38 83.02 C 33.38 84.817 32.665 86.543 31.394 87.814 C 30.123 89.085 28.397 89.8 26.6 89.8 L 7.28 89.8 C 6.09 89.8 4.921 89.487 3.89 88.892 C 2.859 88.297 2.003 87.441 1.408 86.41 C 0.813 85.379 0.5 84.21 0.5 83.02 L 0.5 83.01 C 0.5 81.213 1.215 79.487 2.486 78.216 C 3.757 76.945 5.483 76.23 7.28 76.23"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_12"
            android:pathData="M 7.28 76.23 L 26.6 76.23 C 28.397 76.23 30.123 76.945 31.394 78.216 C 32.665 79.487 33.38 81.213 33.38 83.01 L 33.38 83.02 C 33.38 84.817 32.665 86.543 31.394 87.814 C 30.123 89.085 28.397 89.8 26.6 89.8 L 7.28 89.8 C 6.09 89.8 4.921 89.487 3.89 88.892 C 2.859 88.297 2.003 87.441 1.408 86.41 C 0.813 85.379 0.5 84.21 0.5 83.02 L 0.5 83.01 C 0.5 81.213 1.215 79.487 2.486 78.216 C 3.757 76.945 5.483 76.23 7.28 76.23"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_2">
        <path
            android:name="path_13"
            android:pathData="M 118.104 118.115 L 118.111 118.108 C 118.952 117.267 120.001 116.661 121.15 116.353 C 122.3 116.045 123.51 116.045 124.66 116.353 C 125.809 116.661 126.858 117.267 127.699 118.108 L 141.36 131.769 C 142.202 132.611 142.807 133.659 143.115 134.809 C 143.423 135.958 143.423 137.169 143.115 138.318 C 142.807 139.468 142.202 140.516 141.36 141.358 L 141.353 141.365 C 140.512 142.206 139.463 142.812 138.314 143.12 C 137.164 143.428 135.954 143.428 134.804 143.12 C 133.655 142.812 132.607 142.206 131.765 141.365 L 118.104 127.704 C 116.833 126.433 116.118 124.707 116.118 122.909 C 116.118 121.112 116.833 119.386 118.104 118.115"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_14"
            android:pathData="M 118.104 118.115 L 118.111 118.108 C 118.952 117.267 120.001 116.661 121.15 116.353 C 122.3 116.045 123.51 116.045 124.66 116.353 C 125.809 116.661 126.858 117.267 127.699 118.108 L 141.36 131.769 C 142.202 132.611 142.807 133.659 143.115 134.809 C 143.423 135.958 143.423 137.169 143.115 138.318 C 142.807 139.468 142.202 140.516 141.36 141.358 L 141.353 141.365 C 140.512 142.206 139.463 142.812 138.314 143.12 C 137.164 143.428 135.954 143.428 134.804 143.12 C 133.655 142.812 132.607 142.206 131.765 141.365 L 118.104 127.704 C 116.833 126.433 116.118 124.707 116.118 122.909 C 116.118 121.112 116.833 119.386 118.104 118.115"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_3">
        <path
            android:name="path_15"
            android:pathData="M 24.67 24.665 L 24.677 24.658 C 25.518 23.817 26.567 23.211 27.716 22.903 C 28.866 22.595 30.076 22.595 31.226 22.903 C 32.375 23.211 33.424 23.817 34.265 24.658 L 47.926 38.319 C 48.768 39.161 49.373 40.209 49.681 41.359 C 49.989 42.508 49.989 43.719 49.681 44.868 C 49.373 46.018 48.768 47.066 47.926 47.908 L 47.919 47.915 C 47.078 48.756 46.029 49.362 44.88 49.67 C 43.73 49.978 42.52 49.978 41.37 49.67 C 40.221 49.362 39.172 48.756 38.331 47.915 L 24.67 34.254 C 23.399 32.983 22.684 31.257 22.684 29.459 C 22.684 27.662 23.399 25.936 24.67 24.665"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_16"
            android:pathData="M 24.67 24.665 L 24.677 24.658 C 25.518 23.817 26.567 23.211 27.716 22.903 C 28.866 22.595 30.076 22.595 31.226 22.903 C 32.375 23.211 33.424 23.817 34.265 24.658 L 47.926 38.319 C 48.768 39.161 49.373 40.209 49.681 41.359 C 49.989 42.508 49.989 43.719 49.681 44.868 C 49.373 46.018 48.768 47.066 47.926 47.908 L 47.919 47.915 C 47.078 48.756 46.029 49.362 44.88 49.67 C 43.73 49.978 42.52 49.978 41.37 49.67 C 40.221 49.362 39.172 48.756 38.331 47.915 L 24.67 34.254 C 23.399 32.983 22.684 31.257 22.684 29.459 C 22.684 27.662 23.399 25.936 24.67 24.665"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
</vector>



================================================
FILE: app/src/main/res/drawable/sun_5.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="31.0dp"
    android:height="31.0dp"
    android:viewportWidth="177"
    android:viewportHeight="177">
    <path
        android:name="path"
        android:pathData="M 89.21 55.88 C 80.461 55.88 72.062 59.359 65.875 65.545 C 59.689 71.732 56.21 80.131 56.21 88.88 C 56.21 97.629 59.689 106.028 65.875 112.215 C 72.062 118.401 80.461 121.88 89.21 121.88 C 97.959 121.88 106.358 118.401 112.545 112.215 C 118.731 106.028 122.21 97.629 122.21 88.88 C 122.21 80.131 118.731 71.732 112.545 65.545 C 106.358 59.359 97.959 55.88 89.21 55.88 Z"
        android:fillColor="#ffffff"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_1"
        android:pathData="M 88.88 0.5 L 88.89 0.5 C 90.687 0.5 92.413 1.215 93.684 2.486 C 94.955 3.757 95.67 5.483 95.67 7.28 L 95.67 32.47 C 95.67 34.267 94.955 35.993 93.684 37.264 C 92.413 38.535 90.687 39.25 88.89 39.25 L 88.88 39.25 C 87.083 39.25 85.357 38.535 84.086 37.264 C 82.815 35.993 82.1 34.267 82.1 32.47 L 82.1 7.28 C 82.1 5.483 82.815 3.757 84.086 2.486 C 85.357 1.215 87.083 0.5 88.88 0.5"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_2"
        android:pathData="M 88.88 0.5 L 88.89 0.5 C 90.687 0.5 92.413 1.215 93.684 2.486 C 94.955 3.757 95.67 5.483 95.67 7.28 L 95.67 32.47 C 95.67 34.267 94.955 35.993 93.684 37.264 C 92.413 38.535 90.687 39.25 88.89 39.25 L 88.88 39.25 C 87.083 39.25 85.357 38.535 84.086 37.264 C 82.815 35.993 82.1 34.267 82.1 32.47 L 82.1 7.28 C 82.1 5.483 82.815 3.757 84.086 2.486 C 85.357 1.215 87.083 0.5 88.88 0.5"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_3"
        android:pathData="M 88.88 138.51 L 88.89 138.51 C 90.687 138.51 92.413 139.225 93.684 140.496 C 94.955 141.767 95.67 143.493 95.67 145.29 L 95.67 170.48 C 95.67 172.277 94.955 174.003 93.684 175.274 C 92.413 176.545 90.687 177.26 88.89 177.26 L 88.88 177.26 C 87.083 177.26 85.357 176.545 84.086 175.274 C 82.815 174.003 82.1 172.277 82.1 170.48 L 82.1 145.29 C 82.1 143.493 82.815 141.767 84.086 140.496 C 85.357 139.225 87.083 138.51 88.88 138.51"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_4"
        android:pathData="M 88.88 138.51 L 88.89 138.51 C 90.687 138.51 92.413 139.225 93.684 140.496 C 94.955 141.767 95.67 143.493 95.67 145.29 L 95.67 170.48 C 95.67 172.277 94.955 174.003 93.684 175.274 C 92.413 176.545 90.687 177.26 88.89 177.26 L 88.88 177.26 C 87.083 177.26 85.357 176.545 84.086 175.274 C 82.815 174.003 82.1 172.277 82.1 170.48 L 82.1 145.29 C 82.1 143.493 82.815 141.767 84.086 140.496 C 85.357 139.225 87.083 138.51 88.88 138.51"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_5"
        android:pathData="M 123.973 44.202 L 141.785 26.39 C 142.626 25.548 143.675 24.943 144.824 24.635 C 145.974 24.327 147.184 24.327 148.334 24.635 C 149.483 24.943 150.532 25.548 151.373 26.39 L 151.38 26.397 C 152.222 27.238 152.827 28.287 153.135 29.436 C 153.443 30.586 153.443 31.796 153.135 32.946 C 152.827 34.095 152.222 35.144 151.38 35.985 L 133.568 53.797 C 132.297 55.068 130.571 55.783 128.774 55.783 C 126.977 55.783 125.251 55.068 123.98 53.797 L 123.973 53.79 C 123.131 52.949 122.526 51.9 122.218 50.751 C 121.91 49.601 121.91 48.391 122.218 47.241 C 122.526 46.092 123.131 45.043 123.973 44.202"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_6"
        android:pathData="M 123.973 44.202 L 141.785 26.39 C 142.626 25.548 143.675 24.943 144.824 24.635 C 145.974 24.327 147.184 24.327 148.334 24.635 C 149.483 24.943 150.532 25.548 151.373 26.39 L 151.38 26.397 C 152.222 27.238 152.827 28.287 153.135 29.436 C 153.443 30.586 153.443 31.796 153.135 32.946 C 152.827 34.095 152.222 35.144 151.38 35.985 L 133.568 53.797 C 132.297 55.068 130.571 55.783 128.774 55.783 C 126.977 55.783 125.251 55.068 123.98 53.797 L 123.973 53.79 C 123.131 52.949 122.526 51.9 122.218 50.751 C 121.91 49.601 121.91 48.391 122.218 47.241 C 122.526 46.092 123.131 45.043 123.973 44.202"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_7"
        android:pathData="M 26.39 141.792 L 44.202 123.98 C 45.043 123.138 46.092 122.533 47.241 122.225 C 48.391 121.917 49.601 121.917 50.751 122.225 C 51.9 122.533 52.949 123.138 53.79 123.98 L 53.797 123.987 C 54.639 124.828 55.244 125.877 55.552 127.026 C 55.86 128.176 55.86 129.386 55.552 130.536 C 55.244 131.685 54.639 132.734 53.797 133.575 L 35.985 151.387 C 34.714 152.658 32.989 153.373 31.191 153.373 C 29.394 153.373 27.668 152.658 26.397 151.387 L 26.39 151.38 C 25.548 150.539 24.943 149.49 24.635 148.341 C 24.327 147.191 24.327 145.981 24.635 144.831 C 24.943 143.682 25.548 142.633 26.39 141.792"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_8"
        android:pathData="M 26.39 141.792 L 44.202 123.98 C 45.043 123.138 46.092 122.533 47.241 122.225 C 48.391 121.917 49.601 121.917 50.751 122.225 C 51.9 122.533 52.949 123.138 53.79 123.98 L 53.797 123.987 C 54.639 124.828 55.244 125.877 55.552 127.026 C 55.86 128.176 55.86 129.386 55.552 130.536 C 55.244 131.685 54.639 132.734 53.797 133.575 L 35.985 151.387 C 34.714 152.658 32.989 153.373 31.191 153.373 C 29.394 153.373 27.668 152.658 26.397 151.387 L 26.39 151.38 C 25.548 150.539 24.943 149.49 24.635 148.341 C 24.327 147.191 24.327 145.981 24.635 144.831 C 24.943 143.682 25.548 142.633 26.39 141.792"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <group android:name="group">
        <path
            android:name="path_9"
            android:pathData="M 145.29 82.1 L 170.48 82.1 C 172.277 82.1 174.003 82.815 175.274 84.086 C 176.545 85.357 177.26 87.083 177.26 88.88 L 177.26 88.89 C 177.26 90.687 176.545 92.413 175.274 93.684 C 174.003 94.955 172.277 95.67 170.48 95.67 L 145.29 95.67 C 143.493 95.67 141.767 94.955 140.496 93.684 C 139.225 92.413 138.51 90.687 138.51 88.89 L 138.51 88.88 C 138.51 87.083 139.225 85.357 140.496 84.086 C 141.767 82.815 143.493 82.1 145.29 82.1"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_10"
            android:pathData="M 145.29 82.1 L 170.48 82.1 C 172.277 82.1 174.003 82.815 175.274 84.086 C 176.545 85.357 177.26 87.083 177.26 88.88 L 177.26 88.89 C 177.26 90.687 176.545 92.413 175.274 93.684 C 174.003 94.955 172.277 95.67 170.48 95.67 L 145.29 95.67 C 143.493 95.67 141.767 94.955 140.496 93.684 C 139.225 92.413 138.51 90.687 138.51 88.89 L 138.51 88.88 C 138.51 87.083 139.225 85.357 140.496 84.086 C 141.767 82.815 143.493 82.1 145.29 82.1"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_1">
        <path
            android:name="path_11"
            android:pathData="M 7.28 82.1 L 32.47 82.1 C 34.267 82.1 35.993 82.815 37.264 84.086 C 38.535 85.357 39.25 87.083 39.25 88.88 L 39.25 88.89 C 39.25 90.687 38.535 92.413 37.264 93.684 C 35.993 94.955 34.267 95.67 32.47 95.67 L 7.28 95.67 C 5.483 95.67 3.757 94.955 2.486 93.684 C 1.215 92.413 0.5 90.687 0.5 88.89 L 0.5 88.88 C 0.5 87.083 1.215 85.357 2.486 84.086 C 3.757 82.815 5.483 82.1 7.28 82.1"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_12"
            android:pathData="M 7.28 82.1 L 32.47 82.1 C 34.267 82.1 35.993 82.815 37.264 84.086 C 38.535 85.357 39.25 87.083 39.25 88.88 L 39.25 88.89 C 39.25 90.687 38.535 92.413 37.264 93.684 C 35.993 94.955 34.267 95.67 32.47 95.67 L 7.28 95.67 C 5.483 95.67 3.757 94.955 2.486 93.684 C 1.215 92.413 0.5 90.687 0.5 88.89 L 0.5 88.88 C 0.5 87.083 1.215 85.357 2.486 84.086 C 3.757 82.815 5.483 82.1 7.28 82.1"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_2">
        <path
            android:name="path_13"
            android:pathData="M 123.976 123.976 L 123.983 123.969 C 124.825 123.128 125.873 122.522 127.023 122.214 C 128.172 121.906 129.383 121.906 130.532 122.214 C 131.682 122.522 132.73 123.128 133.572 123.969 L 151.384 141.781 C 152.655 143.052 153.37 144.778 153.37 146.575 C 153.37 148.373 152.655 150.099 151.384 151.37 L 151.377 151.377 C 150.535 152.218 149.487 152.823 148.337 153.131 C 147.188 153.439 145.977 153.439 144.828 153.131 C 143.678 152.823 142.63 152.218 141.788 151.377 L 123.976 133.565 C 122.705 132.294 121.991 130.568 121.991 128.77 C 121.991 126.973 122.705 125.247 123.976 123.976"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_14"
            android:pathData="M 123.976 123.976 L 123.983 123.969 C 124.825 123.128 125.873 122.522 127.023 122.214 C 128.172 121.906 129.383 121.906 130.532 122.214 C 131.682 122.522 132.73 123.128 133.572 123.969 L 151.384 141.781 C 152.655 143.052 153.37 144.778 153.37 146.575 C 153.37 148.373 152.655 150.099 151.384 151.37 L 151.377 151.377 C 150.535 152.218 149.487 152.823 148.337 153.131 C 147.188 153.439 145.977 153.439 144.828 153.131 C 143.678 152.823 142.63 152.218 141.788 151.377 L 123.976 133.565 C 122.705 132.294 121.991 130.568 121.991 128.77 C 121.991 126.973 122.705 125.247 123.976 123.976"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_3">
        <path
            android:name="path_15"
            android:pathData="M 26.386 26.393 L 26.393 26.386 C 27.235 25.545 28.283 24.939 29.433 24.631 C 30.582 24.323 31.793 24.323 32.942 24.631 C 34.092 24.939 35.14 25.545 35.982 26.386 L 53.794 44.198 C 55.065 45.469 55.779 47.195 55.779 48.992 C 55.779 50.79 55.065 52.516 53.794 53.787 L 53.787 53.794 C 52.945 54.635 51.897 55.241 50.747 55.549 C 49.598 55.857 48.387 55.857 47.238 55.549 C 46.088 55.241 45.04 54.635 44.198 53.794 L 26.386 35.982 C 25.115 34.711 24.4 32.985 24.4 31.188 C 24.4 29.39 25.115 27.664 26.386 26.393"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_16"
            android:pathData="M 26.386 26.393 L 26.393 26.386 C 27.235 25.545 28.283 24.939 29.433 24.631 C 30.582 24.323 31.793 24.323 32.942 24.631 C 34.092 24.939 35.14 25.545 35.982 26.386 L 53.794 44.198 C 55.065 45.469 55.779 47.195 55.779 48.992 C 55.779 50.79 55.065 52.516 53.794 53.787 L 53.787 53.794 C 52.945 54.635 51.897 55.241 50.747 55.549 C 49.598 55.857 48.387 55.857 47.238 55.549 C 46.088 55.241 45.04 54.635 44.198 53.794 L 26.386 35.982 C 25.115 34.711 24.4 32.985 24.4 31.188 C 24.4 29.39 25.115 27.664 26.386 26.393"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
</vector>



================================================
FILE: app/src/main/res/drawable/sun_6.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="33.15dp"
    android:height="33.15dp"
    android:viewportWidth="189"
    android:viewportHeight="189">
    <path
        android:name="path"
        android:pathData="M 94.88 61.56 C 86.131 61.56 77.732 65.039 71.545 71.225 C 65.359 77.412 61.88 85.811 61.88 94.56 C 61.88 103.309 65.359 111.708 71.545 117.895 C 77.732 124.081 86.131 127.56 94.88 127.56 C 103.629 127.56 112.028 124.081 118.215 117.895 C 124.401 111.708 127.88 103.309 127.88 94.56 C 127.88 85.811 124.401 77.412 118.215 71.225 C 112.028 65.039 103.629 61.56 94.88 61.56 Z"
        android:fillColor="#ffffff"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_1"
        android:pathData="M 94.56 0.5 L 94.57 0.5 C 96.367 0.5 98.093 1.215 99.364 2.486 C 100.635 3.757 101.35 5.483 101.35 7.28 L 101.35 38.15 C 101.35 39.947 100.635 41.673 99.364 42.944 C 98.093 44.215 96.367 44.93 94.57 44.93 L 94.56 44.93 C 92.763 44.93 91.037 44.215 89.766 42.944 C 88.495 41.673 87.78 39.947 87.78 38.15 L 87.78 7.28 C 87.78 5.483 88.495 3.757 89.766 2.486 C 91.037 1.215 92.763 0.5 94.56 0.5"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_2"
        android:pathData="M 94.56 0.5 L 94.57 0.5 C 96.367 0.5 98.093 1.215 99.364 2.486 C 100.635 3.757 101.35 5.483 101.35 7.28 L 101.35 38.15 C 101.35 39.947 100.635 41.673 99.364 42.944 C 98.093 44.215 96.367 44.93 94.57 44.93 L 94.56 44.93 C 92.763 44.93 91.037 44.215 89.766 42.944 C 88.495 41.673 87.78 39.947 87.78 38.15 L 87.78 7.28 C 87.78 5.483 88.495 3.757 89.766 2.486 C 91.037 1.215 92.763 0.5 94.56 0.5"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_3"
        android:pathData="M 94.56 144.19 L 94.57 144.19 C 96.367 144.19 98.093 144.905 99.364 146.176 C 100.635 147.447 101.35 149.173 101.35 150.97 L 101.35 181.84 C 101.35 183.637 100.635 185.363 99.364 186.634 C 98.093 187.905 96.367 188.62 94.57 188.62 L 94.56 188.62 C 92.763 188.62 91.037 187.905 89.766 186.634 C 88.495 185.363 87.78 183.637 87.78 181.84 L 87.78 150.97 C 87.78 149.173 88.495 147.447 89.766 146.176 C 91.037 144.905 92.763 144.19 94.56 144.19"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_4"
        android:pathData="M 94.56 144.19 L 94.57 144.19 C 96.367 144.19 98.093 144.905 99.364 146.176 C 100.635 147.447 101.35 149.173 101.35 150.97 L 101.35 181.84 C 101.35 183.637 100.635 185.363 99.364 186.634 C 98.093 187.905 96.367 188.62 94.57 188.62 L 94.56 188.62 C 92.763 188.62 91.037 187.905 89.766 186.634 C 88.495 185.363 87.78 183.637 87.78 181.84 L 87.78 150.97 C 87.78 149.173 88.495 147.447 89.766 146.176 C 91.037 144.905 92.763 144.19 94.56 144.19"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_5"
        android:pathData="M 129.652 49.874 L 151.48 28.046 C 152.322 27.205 153.37 26.599 154.519 26.291 C 155.669 25.983 156.88 25.983 158.029 26.291 C 159.179 26.599 160.227 27.205 161.068 28.046 L 161.075 28.053 C 161.917 28.895 162.522 29.943 162.83 31.092 C 163.138 32.242 163.138 33.453 162.83 34.602 C 162.522 35.752 161.917 36.8 161.075 37.641 L 139.247 59.47 C 138.406 60.311 137.357 60.917 136.208 61.225 C 135.058 61.533 133.848 61.533 132.698 61.225 C 131.549 60.917 130.5 60.311 129.659 59.47 L 129.652 59.463 C 128.81 58.621 128.205 57.573 127.897 56.423 C 127.589 55.274 127.589 54.063 127.897 52.914 C 128.205 51.764 128.81 50.716 129.652 49.874"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_6"
        android:pathData="M 129.652 49.874 L 151.48 28.046 C 152.322 27.205 153.37 26.599 154.519 26.291 C 155.669 25.983 156.88 25.983 158.029 26.291 C 159.179 26.599 160.227 27.205 161.068 28.046 L 161.075 28.053 C 161.917 28.895 162.522 29.943 162.83 31.092 C 163.138 32.242 163.138 33.453 162.83 34.602 C 162.522 35.752 161.917 36.8 161.075 37.641 L 139.247 59.47 C 138.406 60.311 137.357 60.917 136.208 61.225 C 135.058 61.533 133.848 61.533 132.698 61.225 C 131.549 60.917 130.5 60.311 129.659 59.47 L 129.652 59.463 C 128.81 58.621 128.205 57.573 127.897 56.423 C 127.589 55.274 127.589 54.063 127.897 52.914 C 128.205 51.764 128.81 50.716 129.652 49.874"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_7"
        android:pathData="M 28.052 151.479 L 49.88 129.65 C 50.722 128.809 51.77 128.203 52.919 127.895 C 54.069 127.587 55.28 127.587 56.429 127.895 C 57.579 128.203 58.627 128.809 59.468 129.65 L 59.475 129.657 C 60.317 130.499 60.922 131.547 61.23 132.697 C 61.538 133.846 61.538 135.057 61.23 136.206 C 60.922 137.356 60.317 138.404 59.475 139.246 L 37.647 161.074 C 36.806 161.915 35.757 162.521 34.608 162.829 C 33.458 163.137 32.248 163.137 31.098 162.829 C 29.949 162.521 28.9 161.915 28.059 161.074 L 28.052 161.067 C 27.21 160.225 26.605 159.177 26.297 158.028 C 25.989 156.878 25.989 155.667 26.297 154.518 C 26.605 153.368 27.21 152.32 28.052 151.479"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_8"
        android:pathData="M 28.052 151.479 L 49.88 129.65 C 50.722 128.809 51.77 128.203 52.919 127.895 C 54.069 127.587 55.28 127.587 56.429 127.895 C 57.579 128.203 58.627 128.809 59.468 129.65 L 59.475 129.657 C 60.317 130.499 60.922 131.547 61.23 132.697 C 61.538 133.846 61.538 135.057 61.23 136.206 C 60.922 137.356 60.317 138.404 59.475 139.246 L 37.647 161.074 C 36.806 161.915 35.757 162.521 34.608 162.829 C 33.458 163.137 32.248 163.137 31.098 162.829 C 29.949 162.521 28.9 161.915 28.059 161.074 L 28.052 161.067 C 27.21 160.225 26.605 159.177 26.297 158.028 C 25.989 156.878 25.989 155.667 26.297 154.518 C 26.605 153.368 27.21 152.32 28.052 151.479"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <group android:name="group">
        <path
            android:name="path_9"
            android:pathData="M 150.97 87.78 L 181.84 87.78 C 183.637 87.78 185.363 88.495 186.634 89.766 C 187.905 91.037 188.62 92.763 188.62 94.56 L 188.62 94.57 C 188.62 96.367 187.905 98.093 186.634 99.364 C 185.363 100.635 183.637 101.35 181.84 101.35 L 150.97 101.35 C 149.173 101.35 147.447 100.635 146.176 99.364 C 144.905 98.093 144.19 96.367 144.19 94.57 L 144.19 94.56 C 144.19 92.763 144.905 91.037 146.176 89.766 C 147.447 88.495 149.173 87.78 150.97 87.78"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_10"
            android:pathData="M 150.97 87.78 L 181.84 87.78 C 183.637 87.78 185.363 88.495 186.634 89.766 C 187.905 91.037 188.62 92.763 188.62 94.56 L 188.62 94.57 C 188.62 96.367 187.905 98.093 186.634 99.364 C 185.363 100.635 183.637 101.35 181.84 101.35 L 150.97 101.35 C 149.173 101.35 147.447 100.635 146.176 99.364 C 144.905 98.093 144.19 96.367 144.19 94.57 L 144.19 94.56 C 144.19 92.763 144.905 91.037 146.176 89.766 C 147.447 88.495 149.173 87.78 150.97 87.78"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_1">
        <path
            android:name="path_11"
            android:pathData="M 7.28 87.78 L 38.15 87.78 C 39.947 87.78 41.673 88.495 42.944 89.766 C 44.215 91.037 44.93 92.763 44.93 94.56 L 44.93 94.57 C 44.93 96.367 44.215 98.093 42.944 99.364 C 41.673 100.635 39.947 101.35 38.15 101.35 L 7.28 101.35 C 6.09 101.35 4.921 101.037 3.89 100.442 C 2.859 99.847 2.003 98.991 1.408 97.96 C 0.813 96.929 0.5 95.76 0.5 94.57 L 0.5 94.56 C 0.5 92.763 1.215 91.037 2.486 89.766 C 3.757 88.495 5.483 87.78 7.28 87.78"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_12"
            android:pathData="M 7.28 87.78 L 38.15 87.78 C 39.947 87.78 41.673 88.495 42.944 89.766 C 44.215 91.037 44.93 92.763 44.93 94.56 L 44.93 94.57 C 44.93 96.367 44.215 98.093 42.944 99.364 C 41.673 100.635 39.947 101.35 38.15 101.35 L 7.28 101.35 C 6.09 101.35 4.921 101.037 3.89 100.442 C 2.859 99.847 2.003 98.991 1.408 97.96 C 0.813 96.929 0.5 95.76 0.5 94.57 L 0.5 94.56 C 0.5 92.763 1.215 91.037 2.486 89.766 C 3.757 88.495 5.483 87.78 7.28 87.78"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_2">
        <path
            android:name="path_13"
            android:pathData="M 129.654 129.655 L 129.661 129.648 C 130.502 128.807 131.551 128.201 132.7 127.893 C 133.85 127.585 135.06 127.585 136.21 127.893 C 137.359 128.201 138.408 128.807 139.249 129.648 L 161.078 151.476 C 161.919 152.318 162.524 153.366 162.832 154.516 C 163.14 155.665 163.14 156.876 162.832 158.025 C 162.524 159.175 161.919 160.223 161.078 161.065 L 161.07 161.072 C 160.229 161.913 159.181 162.519 158.031 162.827 C 156.882 163.135 155.671 163.135 154.521 162.827 C 153.372 162.519 152.324 161.913 151.482 161.072 L 129.654 139.244 C 128.812 138.402 128.207 137.354 127.899 136.204 C 127.591 135.055 127.591 133.844 127.899 132.695 C 128.207 131.545 128.812 130.497 129.654 129.655"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_14"
            android:pathData="M 129.654 129.655 L 129.661 129.648 C 130.502 128.807 131.551 128.201 132.7 127.893 C 133.85 127.585 135.06 127.585 136.21 127.893 C 137.359 128.201 138.408 128.807 139.249 129.648 L 161.078 151.476 C 161.919 152.318 162.524 153.366 162.832 154.516 C 163.14 155.665 163.14 156.876 162.832 158.025 C 162.524 159.175 161.919 160.223 161.078 161.065 L 161.07 161.072 C 160.229 161.913 159.181 162.519 158.031 162.827 C 156.882 163.135 155.671 163.135 154.521 162.827 C 153.372 162.519 152.324 161.913 151.482 161.072 L 129.654 139.244 C 128.812 138.402 128.207 137.354 127.899 136.204 C 127.591 135.055 127.591 133.844 127.899 132.695 C 128.207 131.545 128.812 130.497 129.654 129.655"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_3">
        <path
            android:name="path_15"
            android:pathData="M 28.05 28.055 L 28.057 28.048 C 28.898 27.207 29.947 26.601 31.096 26.293 C 32.246 25.985 33.456 25.985 34.606 26.293 C 35.755 26.601 36.804 27.207 37.645 28.048 L 59.473 49.876 C 60.315 50.718 60.92 51.766 61.228 52.916 C 61.536 54.065 61.536 55.276 61.228 56.425 C 60.92 57.575 60.315 58.623 59.473 59.465 L 59.466 59.472 C 58.625 60.313 57.576 60.919 56.427 61.227 C 55.277 61.535 54.067 61.535 52.917 61.227 C 51.768 60.919 50.719 60.313 49.878 59.472 L 28.05 37.644 C 27.208 36.802 26.603 35.754 26.295 34.604 C 25.987 33.455 25.987 32.244 26.295 31.095 C 26.603 29.945 27.208 28.897 28.05 28.055"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_16"
            android:pathData="M 28.05 28.055 L 28.057 28.048 C 28.898 27.207 29.947 26.601 31.096 26.293 C 32.246 25.985 33.456 25.985 34.606 26.293 C 35.755 26.601 36.804 27.207 37.645 28.048 L 59.473 49.876 C 60.315 50.718 60.92 51.766 61.228 52.916 C 61.536 54.065 61.536 55.276 61.228 56.425 C 60.92 57.575 60.315 58.623 59.473 59.465 L 59.466 59.472 C 58.625 60.313 57.576 60.919 56.427 61.227 C 55.277 61.535 54.067 61.535 52.917 61.227 C 51.768 60.919 50.719 60.313 49.878 59.472 L 28.05 37.644 C 27.208 36.802 26.603 35.754 26.295 34.604 C 25.987 33.455 25.987 32.244 26.295 31.095 C 26.603 29.945 27.208 28.897 28.05 28.055"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
</vector>



================================================
FILE: app/src/main/res/drawable/sun_7.xml
================================================
<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="35.96dp"
    android:height="35.96dp"
    android:viewportWidth="205"
    android:viewportHeight="205">
    <path
        android:name="path"
        android:pathData="M 103.3 69.97 C 94.551 69.97 86.152 73.449 79.965 79.635 C 73.779 85.822 70.3 94.221 70.3 102.97 C 70.3 111.719 73.779 120.118 79.965 126.305 C 86.152 132.491 94.551 135.97 103.3 135.97 C 112.049 135.97 120.448 132.491 126.635 126.305 C 132.821 120.118 136.3 111.719 136.3 102.97 C 136.3 94.221 132.821 85.822 126.635 79.635 C 120.448 73.449 112.049 69.97 103.3 69.97 Z"
        android:fillColor="#ffffff"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_1"
        android:pathData="M 102.97 0.5 L 102.98 0.5 C 104.777 0.5 106.503 1.215 107.774 2.486 C 109.045 3.757 109.76 5.483 109.76 7.28 L 109.76 46.56 C 109.76 48.357 109.045 50.083 107.774 51.354 C 106.503 52.625 104.777 53.34 102.98 53.34 L 102.97 53.34 C 101.173 53.34 99.447 52.625 98.176 51.354 C 96.905 50.083 96.19 48.357 96.19 46.56 L 96.19 7.28 C 96.19 5.483 96.905 3.757 98.176 2.486 C 99.447 1.215 101.173 0.5 102.97 0.5"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_2"
        android:pathData="M 102.97 0.5 L 102.98 0.5 C 104.777 0.5 106.503 1.215 107.774 2.486 C 109.045 3.757 109.76 5.483 109.76 7.28 L 109.76 46.56 C 109.76 48.357 109.045 50.083 107.774 51.354 C 106.503 52.625 104.777 53.34 102.98 53.34 L 102.97 53.34 C 101.173 53.34 99.447 52.625 98.176 51.354 C 96.905 50.083 96.19 48.357 96.19 46.56 L 96.19 7.28 C 96.19 5.483 96.905 3.757 98.176 2.486 C 99.447 1.215 101.173 0.5 102.97 0.5"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_3"
        android:pathData="M 102.97 152.6 L 102.98 152.6 C 104.777 152.6 106.503 153.315 107.774 154.586 C 109.045 155.857 109.76 157.583 109.76 159.38 L 109.76 198.66 C 109.76 200.457 109.045 202.183 107.774 203.454 C 106.503 204.725 104.777 205.44 102.98 205.44 L 102.97 205.44 C 101.173 205.44 99.447 204.725 98.176 203.454 C 96.905 202.183 96.19 200.457 96.19 198.66 L 96.19 159.38 C 96.19 157.583 96.905 155.857 98.176 154.586 C 99.447 153.315 101.173 152.6 102.97 152.6"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_4"
        android:pathData="M 102.97 152.6 L 102.98 152.6 C 104.777 152.6 106.503 153.315 107.774 154.586 C 109.045 155.857 109.76 157.583 109.76 159.38 L 109.76 198.66 C 109.76 200.457 109.045 202.183 107.774 203.454 C 106.503 204.725 104.777 205.44 102.98 205.44 L 102.97 205.44 C 101.173 205.44 99.447 204.725 98.176 203.454 C 96.905 202.183 96.19 200.457 96.19 198.66 L 96.19 159.38 C 96.19 157.583 96.905 155.857 98.176 154.586 C 99.447 153.315 101.173 152.6 102.97 152.6"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_5"
        android:pathData="M 138.065 58.287 L 165.84 30.512 C 166.681 29.67 167.73 29.065 168.879 28.757 C 170.029 28.449 171.239 28.449 172.389 28.757 C 173.538 29.065 174.587 29.67 175.428 30.512 L 175.435 30.519 C 176.706 31.79 177.421 33.516 177.421 35.313 C 177.421 37.111 176.706 38.836 175.435 40.107 L 147.66 67.882 C 146.819 68.724 145.77 69.329 144.621 69.637 C 143.471 69.945 142.261 69.945 141.111 69.637 C 139.962 69.329 138.913 68.724 138.072 67.882 L 138.065 67.875 C 137.223 67.034 136.618 65.985 136.31 64.836 C 136.002 63.686 136.002 62.476 136.31 61.326 C 136.618 60.177 137.223 59.128 138.065 58.287"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_6"
        android:pathData="M 138.065 58.287 L 165.84 30.512 C 166.681 29.67 167.73 29.065 168.879 28.757 C 170.029 28.449 171.239 28.449 172.389 28.757 C 173.538 29.065 174.587 29.67 175.428 30.512 L 175.435 30.519 C 176.706 31.79 177.421 33.516 177.421 35.313 C 177.421 37.111 176.706 38.836 175.435 40.107 L 147.66 67.882 C 146.819 68.724 145.77 69.329 144.621 69.637 C 143.471 69.945 142.261 69.945 141.111 69.637 C 139.962 69.329 138.913 68.724 138.072 67.882 L 138.065 67.875 C 137.223 67.034 136.618 65.985 136.31 64.836 C 136.002 63.686 136.002 62.476 136.31 61.326 C 136.618 60.177 137.223 59.128 138.065 58.287"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <path
        android:name="path_7"
        android:pathData="M 30.522 165.843 L 58.297 138.068 C 59.138 137.226 60.187 136.621 61.336 136.313 C 62.486 136.005 63.696 136.005 64.846 136.313 C 65.995 136.621 67.044 137.226 67.885 138.068 L 67.892 138.075 C 68.734 138.916 69.339 139.965 69.647 141.114 C 69.955 142.264 69.955 143.474 69.647 144.624 C 69.339 145.773 68.734 146.822 67.892 147.663 L 40.117 175.438 C 39.276 176.28 38.227 176.885 37.078 177.193 C 35.928 177.501 34.718 177.501 33.568 177.193 C 32.419 176.885 31.37 176.28 30.529 175.438 L 30.522 175.431 C 29.251 174.16 28.536 172.434 28.536 170.637 C 28.536 168.839 29.251 167.114 30.522 165.843"
        android:fillColor="#ffffff"
        android:strokeWidth="1"/>
    <path
        android:name="path_8"
        android:pathData="M 30.522 165.843 L 58.297 138.068 C 59.138 137.226 60.187 136.621 61.336 136.313 C 62.486 136.005 63.696 136.005 64.846 136.313 C 65.995 136.621 67.044 137.226 67.885 138.068 L 67.892 138.075 C 68.734 138.916 69.339 139.965 69.647 141.114 C 69.955 142.264 69.955 143.474 69.647 144.624 C 69.339 145.773 68.734 146.822 67.892 147.663 L 40.117 175.438 C 39.276 176.28 38.227 176.885 37.078 177.193 C 35.928 177.501 34.718 177.501 33.568 177.193 C 32.419 176.885 31.37 176.28 30.529 175.438 L 30.522 175.431 C 29.251 174.16 28.536 172.434 28.536 170.637 C 28.536 168.839 29.251 167.114 30.522 165.843"
        android:strokeColor="#ffffff"
        android:strokeWidth="1"
        android:strokeMiterLimit="10"/>
    <group android:name="group">
        <path
            android:name="path_9"
            android:pathData="M 159.38 96.19 L 198.66 96.19 C 200.457 96.19 202.183 96.905 203.454 98.176 C 204.725 99.447 205.44 101.173 205.44 102.97 L 205.44 102.98 C 205.44 104.777 204.725 106.503 203.454 107.774 C 202.183 109.045 200.457 109.76 198.66 109.76 L 159.38 109.76 C 157.583 109.76 155.857 109.045 154.586 107.774 C 153.315 106.503 152.6 104.777 152.6 102.98 L 152.6 102.97 C 152.6 101.173 153.315 99.447 154.586 98.176 C 155.857 96.905 157.583 96.19 159.38 96.19"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_10"
            android:pathData="M 159.38 96.19 L 198.66 96.19 C 200.457 96.19 202.183 96.905 203.454 98.176 C 204.725 99.447 205.44 101.173 205.44 102.97 L 205.44 102.98 C 205.44 104.777 204.725 106.503 203.454 107.774 C 202.183 109.045 200.457 109.76 198.66 109.76 L 159.38 109.76 C 157.583 109.76 155.857 109.045 154.586 107.774 C 153.315 106.503 152.6 104.777 152.6 102.98 L 152.6 102.97 C 152.6 101.173 153.315 99.447 154.586 98.176 C 155.857 96.905 157.583 96.19 159.38 96.19"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_1">
        <path
            android:name="path_11"
            android:pathData="M 7.28 96.19 L 46.56 96.19 C 48.357 96.19 50.083 96.905 51.354 98.176 C 52.625 99.447 53.34 101.173 53.34 102.97 L 53.34 102.98 C 53.34 104.777 52.625 106.503 51.354 107.774 C 50.083 109.045 48.357 109.76 46.56 109.76 L 7.28 109.76 C 5.483 109.76 3.757 109.045 2.486 107.774 C 1.215 106.503 0.5 104.777 0.5 102.98 L 0.5 102.97 C 0.5 101.173 1.215 99.447 2.486 98.176 C 3.757 96.905 5.483 96.19 7.28 96.19"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_12"
            android:pathData="M 7.28 96.19 L 46.56 96.19 C 48.357 96.19 50.083 96.905 51.354 98.176 C 52.625 99.447 53.34 101.173 53.34 102.97 L 53.34 102.98 C 53.34 104.777 52.625 106.503 51.354 107.774 C 50.083 109.045 48.357 109.76 46.56 109.76 L 7.28 109.76 C 5.483 109.76 3.757 109.045 2.486 107.774 C 1.215 106.503 0.5 104.777 0.5 102.98 L 0.5 102.97 C 0.5 101.173 1.215 99.447 2.486 98.176 C 3.757 96.905 5.483 96.19 7.28 96.19"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_2">
        <path
            android:name="path_13"
            android:pathData="M 138.071 138.068 L 138.078 138.061 C 138.92 137.22 139.968 136.614 141.118 136.306 C 142.267 135.998 143.478 135.998 144.627 136.306 C 145.777 136.614 146.825 137.22 147.667 138.061 L 175.442 165.836 C 176.283 166.678 176.889 167.726 177.197 168.876 C 177.505 170.025 177.505 171.236 177.197 172.385 C 176.889 173.535 176.283 174.583 175.442 175.425 L 175.435 175.432 C 174.593 176.273 173.545 176.879 172.395 177.187 C 171.246 177.495 170.035 177.495 168.886 177.187 C 167.736 176.879 166.688 176.273 165.846 175.432 L 138.071 147.657 C 137.23 146.815 136.624 145.767 136.316 144.617 C 136.008 143.468 136.008 142.257 136.316 141.108 C 136.624 139.958 137.23 138.91 138.071 138.068"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_14"
            android:pathData="M 138.071 138.068 L 138.078 138.061 C 138.92 137.22 139.968 136.614 141.118 136.306 C 142.267 135.998 143.478 135.998 144.627 136.306 C 145.777 136.614 146.825 137.22 147.667 138.061 L 175.442 165.836 C 176.283 166.678 176.889 167.726 177.197 168.876 C 177.505 170.025 177.505 171.236 177.197 172.385 C 176.889 173.535 176.283 174.583 175.442 175.425 L 175.435 175.432 C 174.593 176.273 173.545 176.879 172.395 177.187 C 171.246 177.495 170.035 177.495 168.886 177.187 C 167.736 176.879 166.688 176.273 165.846 175.432 L 138.071 147.657 C 137.23 146.815 136.624 145.767 136.316 144.617 C 136.008 143.468 136.008 142.257 136.316 141.108 C 136.624 139.958 137.23 138.91 138.071 138.068"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
    <group android:name="group_3">
        <path
            android:name="path_15"
            android:pathData="M 30.515 30.525 L 30.522 30.518 C 31.364 29.677 32.412 29.071 33.562 28.763 C 34.711 28.455 35.922 28.455 37.071 28.763 C 38.221 29.071 39.269 29.677 40.111 30.518 L 67.886 58.293 C 68.727 59.135 69.333 60.183 69.641 61.333 C 69.949 62.482 69.949 63.693 69.641 64.842 C 69.333 65.992 68.727 67.04 67.886 67.882 L 67.879 67.889 C 67.037 68.73 65.989 69.336 64.84 69.644 C 63.69 69.952 62.479 69.952 61.33 69.644 C 60.18 69.336 59.132 68.73 58.291 67.889 L 30.515 40.114 C 29.674 39.272 29.069 38.224 28.761 37.074 C 28.453 35.925 28.453 34.714 28.761 33.565 C 29.069 32.415 29.674 31.367 30.515 30.525"
            android:fillColor="#ffffff"
            android:strokeWidth="1"/>
        <path
            android:name="path_16"
            android:pathData="M 30.515 30.525 L 30.522 30.518 C 31.364 29.677 32.412 29.071 33.562 28.763 C 34.711 28.455 35.922 28.455 37.071 28.763 C 38.221 29.071 39.269 29.677 40.111 30.518 L 67.886 58.293 C 68.727 59.135 69.333 60.183 69.641 61.333 C 69.949 62.482 69.949 63.693 69.641 64.842 C 69.333 65.992 68.727 67.04 67.886 67.882 L 67.879 67.889 C 67.037 68.73 65.989 69.336 64.84 69.644 C 63.69 69.952 62.479 69.952 61.33 69.644 C 60.18 69.336 59.132 68.73 58.291 67.889 L 30.515 40.114 C 29.674 39.272 29.069 38.224 28.761 37.074 C 28.453 35.925 28.453 34.714 28.761 33.565 C 29.069 32.415 29.674 31.367 30.515 30.525"
            android:strokeColor="#ffffff"
            android:strokeWidth="1"
            android:strokeMiterLimit="10"/>
    </group>
</vector>



================================================
FILE: app/src/main/res/drawable/tab_selector.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="?attr/colorPrimary"/>
    <corners android:topLeftRadius="5dp" android:topRightRadius="5dp"/>
</shape>


================================================
FILE: app/src/main/res/drawable/title_shadow.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
            android:startColor="@android:color/transparent"
            android:endColor="#000"
            android:angle="-90">
    </gradient>
</shape>


================================================
FILE: app/src/main/res/drawable/type_bg_color.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@color/typeColorBg"/>
    <corners android:radius="@dimen/rounded_image_radius"/>
   <!-- <stroke android:color="@color/typeColor" android:width="2dp"/>-->
</shape>


================================================
FILE: app/src/main/res/drawable/video_bottom_button.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
        android:color="@color/video_ripple">
    <item android:id="@android:id/mask">
        <color android:color="@color/video_ripple"/>
    </item>
</ripple>



================================================
FILE: app/src/main/res/drawable/video_locked.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="850.39"
        android:viewportHeight="850.39">
    <path
            android:pathData="M241.88,422.73h366.79v270h-366.79z"
            android:strokeWidth="60"
            android:fillColor="#00000000"
            android:strokeColor="#fff"/>
    <path
            android:fillColor="#FF000000"
            android:pathData="M426.51,532.77h0.01v49.88h-0.01z"
            android:strokeWidth="60"
            android:strokeColor="#fff"/>
    <path
            android:pathData="M299.75,260a127.5,127.5 0,0 1,255 0"
            android:strokeWidth="60"
            android:fillColor="#00000000"
            android:strokeColor="#fff"/>
    <path
            android:fillColor="#FF000000"
            android:pathData="M554.75,253.39L554.75,399.39"
            android:strokeWidth="60"
            android:strokeColor="#fff"/>
    <path
            android:fillColor="#FF000000"
            android:pathData="M299.75,250.89L299.75,396.89"
            android:strokeWidth="60"
            android:strokeColor="#fff"/>
</vector>


================================================
FILE: app/src/main/res/drawable/video_pause.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android"
        android:color="@color/video_ripple">
    <item android:drawable="@drawable/netflix_pause" android:height="70dp" android:width="70dp" android:gravity="center">

    </item>
</layer-list>


================================================
FILE: app/src/main/res/drawable/video_play.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android"
        android:color="@color/video_ripple">
    <item android:drawable="@drawable/netflix_play" android:height="70dp" android:width="70dp" android:gravity="center">

    </item>
</layer-list>


================================================
FILE: app/src/main/res/drawable/video_tap_button.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
        android:color="@color/video_ripple">
    <item android:id="@android:id/mask">
        <shape android:shape="oval">
            <solid android:color="@color/video_ripple"/>
        </shape>
        <color android:color="@color/video_ripple"/>
    </item>
</ripple>



================================================
FILE: app/src/main/res/drawable/video_tap_button_always_white.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
        android:color="@color/video_ripple">
    <item android:id="@android:id/mask"  android:gravity="center">
        <shape android:shape="oval">
            <solid android:color="@color/video_ripple"/>
        </shape>
        <color android:color="@color/video_ripple"/>
    </item>
</ripple>


================================================
FILE: app/src/main/res/drawable/video_tap_button_skip.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
        android:color="@color/video_ripple">
    <item android:id="@android:id/mask" android:height="35dp" android:width="35dp" android:gravity="center">
        <shape android:shape="oval">
            <solid android:color="@color/video_ripple"/>
        </shape>
        <color android:color="@color/video_ripple"/>
    </item>
</ripple>


================================================
FILE: app/src/main/res/drawable/video_unlocked.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="850.39"
        android:viewportHeight="850.39">
    <path
            android:pathData="M241.88,422.73h366.79v270h-366.79z"
            android:strokeWidth="60"
            android:fillColor="#00000000"
            android:strokeColor="#fff"/>
    <path
            android:fillColor="#FF000000"
            android:pathData="M426.51,532.77h0.01v49.88h-0.01z"
            android:strokeWidth="60"
            android:strokeColor="#fff"/>
    <path
            android:pathData="M299.75,260a127.5,127.5 0,0 1,255 0"
            android:strokeWidth="60"
            android:fillColor="#00000000"
            android:strokeColor="#fff"/>
    <path
            android:fillColor="#FF000000"
            android:pathData="M554.75,253.39L554.75,399.39"
            android:strokeWidth="60"
            android:strokeColor="#fff"/>
</vector>



================================================
FILE: app/src/main/res/drawable-v24/ic_banner_background.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="320dp"
    android:height="180dp"
    android:viewportWidth="320"
    android:viewportHeight="180">
  <group android:scaleX="0.6666667"
      android:scaleY="0.6666667"
      android:translateX="53.333332"
      android:translateY="30">
    <group android:scaleX="0.35277516"
        android:scaleY="0.35277516"
        android:translateX="5.879586E-4">
      <path
          android:strokeWidth="1"
          android:pathData="M-20.09,-10.91h949.79v534.26h-949.79z"
          android:fillColor="#121212"
          android:strokeColor="#fff"/>
      <path
              android:pathData="M273.68,250.58a18.79,18.79 0,0 0,-5.64 0.86,26.56 26.56,0 0,0 -24.73,-21.51 40.83,40.83 0,0 0,-68.95 -13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H273.68a18.9,18.9 0,0 0,0 -37.8Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="245.72"
                  android:startX="113.12"
                  android:endY="245.72"
                  android:endX="292.58"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
              android:pathData="M248.76,234.41c0,-1.22 0,-2.42 -0.09,-3.63a27,27 0,0 0,-5.36 -0.85,40.83 40.83,0 0,0 -68.95,-13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H228.5A81.75,81.75 0,0 0,248.76 234.41Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="245.72"
                  android:startX="113.12"
                  android:endY="245.72"
                  android:endX="248.76"
                  android:type="linear">
            <item android:offset="0" android:color="#FF4F6DFB"/>
            <item android:offset="0.6" android:color="#FF3559E7"/>
            <item android:offset="1" android:color="#FF2149D8"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
              android:pathData="M174.36,216.85A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.89,18.89 0,0 0,-1.18 37.74A81.53,81.53 0,0 0,210 206.83c0,-1.15 0,-2.29 -0.09,-3.43a41.33,41.33 0,0 0,-5 -0.33A40.71,40.71 0,0 0,174.36 216.85Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="245.69"
                  android:startX="113.12"
                  android:endY="245.69"
                  android:endX="210.03"
                  android:type="linear">
            <item android:offset="0" android:color="#FF56B6FE"/>
            <item android:offset="0.61" android:color="#FF599CFA"/>
            <item android:offset="1" android:color="#FF5C89F7"/>
          </gradient>
        </aapt:attr>
      </path>

      <path
              android:pathData="M358.81,285q-13.53,0 -22.64,-9.1t-9,-22.72q0,-13.62 9,-22.64 9,-9.18 22.64,-9.19 13.79,0 22.38,10l-5.62,5.44a20.82,20.82 0,0 0,-16.76 -7.91,23 23,0 0,0 -16.94,6.81q-6.72,6.72 -6.72,17.53t6.72,17.53a23,23 0,0 0,16.94 6.81q10.63,0 18.46,-8.94l5.7,5.53a29.57,29.57 0,0 1,-10.63 8A32.44,32.44 0,0 1,358.81 285Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M397.78,222.69v60.93H390V222.69Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M404.5,262.77q0,-9.61 6,-15.91a20.6,20.6 0,0 1,15.41 -6.3,20.31 20.31,0 0,1 15.31,6.3 21.87,21.87 0,0 1,6.13 15.91q0,9.71 -6.13,15.92A20.3,20.3 0,0 1,426 285a20.6,20.6 0,0 1,-15.41 -6.29Q404.5,272.39 404.5,262.77ZM412.33,262.77a15.31,15.31 0,0 0,3.91 10.9,13.38 13.38,0 0,0 19.41,0 17,17 0,0 0,0 -21.7,13.18 13.18,0 0,0 -19.41,0A15.18,15.18 0,0 0,412.33 262.77Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M490.7,283.62h-7.48v-5.78h-0.35a13.86,13.86 0,0 1,-5.48 5.1,15.77 15.77,0 0,1 -7.7,2q-7.67,0 -11.79,-4.38t-4.13,-12.47v-26.2h7.83v25.69q0.25,10.22 10.3,10.22a9.81,9.81 0,0 0,7.83 -3.79,13.7 13.7,0 0,0 3.14,-9.06V241.93h7.83Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M517.25,285a18.34,18.34 0,0 1,-14 -6.46,24.34 24.34,0 0,1 0,-31.49 18.35,18.35 0,0 1,14 -6.47,18.07 18.07,0 0,1 8.39,2 14.84,14.84 0,0 1,5.83 5.19h0.34l-0.34,-5.78L531.47,222.69h7.82v60.93h-7.48v-5.78h-0.34a14.84,14.84 0,0 1,-5.83 5.19A18.07,18.07 0,0 1,517.25 285ZM518.53,277.86a12,12 0,0 0,9.45 -4.17q3.82,-4.17 3.83,-10.9A15.54,15.54 0,0 0,528 252a12.05,12.05 0,0 0,-9.45 -4.26,12.19 12.19,0 0,0 -9.44,4.26 15.5,15.5 0,0 0,-3.83 10.8,15.32 15.32,0 0,0 3.83,10.81A12.19,12.19 0,0 0,518.53 277.84Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M587.8,267.33a15.91,15.91 0,0 1,-5.87 12.88A22.43,22.43 0,0 1,567.46 285a21.39,21.39 0,0 1,-13.36 -4.42,22.65 22.65,0 0,1 -8,-12.08l7.49,-3.07a19.3,19.3 0,0 0,2.13 4.94,15.72 15.72,0 0,0 3.19,3.78 14.25,14.25 0,0 0,4 2.47,12.26 12.26,0 0,0 4.68,0.9 13.47,13.47 0,0 0,8.76 -2.77,9 9,0 0,0 3.41,-7.36 8.8,8.8 0,0 0,-2.81 -6.55q-2.64,-2.64 -9.87,-5.11 -7.32,-2.64 -9.11,-3.57 -9.69,-4.94 -9.7,-14.55a14.84,14.84 0,0 1,5.37 -11.49A19.53,19.53 0,0 1,567 221.33a20.5,20.5 0,0 1,12.09 3.58,16.67 16.67,0 0,1 6.8,8.76l-7.31,3.06a10.84,10.84 0,0 0,-4 -5.65,13.1 13.1,0 0,0 -15.11,0.28 7.41,7.41 0,0 0,-3.15 6.19,7.14 7.14,0 0,0 2.47,5.42q2.73,2.29 11.83,5.42 9.27,3.17 13.23,7.72A16.53,16.53 0,0 1,587.8 267.33Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M610.26,284.3a11.88,11.88 0,0 1,-8.46 -3.15c-2.25,-2.09 -3.4,-5 -3.45,-8.76V249.07H591v-7.14h7.32V229.16h7.83v12.77h10.21v7.14H606.18v20.77c0,2.78 0.54,4.66 1.61,5.66a5.27,5.27 0,0 0,3.66 1.48,7.9 7.9,0 0,0 1.83,-0.21 9,9 0,0 0,1.66 -0.55l2.47,7A21.23,21.23 0,0 1,610.26 284.3Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M631.71,283.62h-7.83V241.93h7.48v6.8h0.35a11.31,11.31 0,0 1,4.89 -5.66,13.66 13.66,0 0,1 7.27,-2.34 14.7,14.7 0,0 1,5.79 1l-2.38,7.57a12.93,12.93 0,0 0,-4.6 -0.6,10.11 10.11,0 0,0 -7.7,3.58 12,12 0,0 0,-3.27 8.34Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M670.93,285a19.93,19.93 0,0 1,-15.14 -6.29q-6,-6.3 -6,-15.92a22.65,22.65 0,0 1,5.79 -15.87,19.15 19.15,0 0,1 14.8,-6.34q9.29,0 14.77,6t5.49,16.81l-0.09,0.85L657.83,264.24a13.56,13.56 0,0 0,4.08 9.87,13.06 13.06,0 0,0 9.36,3.75q7.49,0 11.75,-7.49l7,3.4a20.69,20.69 0,0 1,-7.78 8.25A21.51,21.51 0,0 1,670.93 285ZM658.42,257.77h23.92a10.43,10.43 0,0 0,-3.53 -7.19,12.38 12.38,0 0,0 -8.56,-2.85 11.34,11.34 0,0 0,-7.61 2.72A13.09,13.09 0,0 0,658.42 257.75Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M714.08,240.56q8.67,0 13.7,4.64c3.34,3.1 5,7.33 5,12.72v25.7h-7.49v-5.78H725Q720.11,285 712,285a16.83,16.83 0,0 1,-11.53 -4.08,13 13,0 0,1 -4.63,-10.21 12.38,12.38 0,0 1,4.89 -10.3q4.89,-3.83 13.06,-3.83a23.16,23.16 0,0 1,11.49 2.55v-1.78a8.9,8.9 0,0 0,-3.24 -6.94,11.08 11.08,0 0,0 -7.57,-2.85 12,12 0,0 0,-10.38 5.53l-6.89,-4.34Q702.93,240.57 714.08,240.56ZM704,270.86a6.24,6.24 0,0 0,2.59 5.1,9.57 9.57,0 0,0 6.09,2.05 12.5,12.5 0,0 0,8.81 -3.66,11.47 11.47,0 0,0 3.87,-8.6q-3.66,-2.88 -10.21,-2.89a13.22,13.22 0,0 0,-8 2.3A6.81,6.81 0,0 0,704 270.86Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M749.47,283.62h-7.82V241.93h7.48v5.78h0.34a14,14 0,0 1,5.49 -5.1,15.06 15.06,0 0,1 7.36,-2.05 15.22,15.22 0,0 1,8.09 2.13,12.56 12.56,0 0,1 5.1,5.87q5.19,-8 14.39,-8 7.23,0 11.14,4.43T805,257.58v26h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.06,9v23.06h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.07,9Z"
              android:fillColor="#5252ff"/>
      <path
          android:pathData="M-13.76,555.76c10.3,-20.89 58.91,-113.94 157.31,-139.7C261.3,385.24 405.9,462.43 469.89,613.28">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="252.3"
                  android:startX="194.11"
                  android:endY="252.3"
                  android:endX="373.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M318.2,592.15c52.89,-55.46 139,-131.3 263,-187.83 223.69,-102 495.29,-119.94 515.35,-62.21 13,37.39 -73.5,124.43 -496.69,339.65">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startX="400.11"
                  android:endX="900"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M-57.58,195c206.91,86.6 494,-219.13 453.91,-347.48C353.52,-289.67 -103.15,-353.41 -203.15,-176 -265.5,-65.35 -189.57,139.73 -57.58,195Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="252.3"
                  android:startX="-100"
                  android:endY="252.3"
                  android:endX="373.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M698.42,648.89C625.71,546 764,320.79 920.68,218.45c46.61,-30.44 110.17,-72 164.35,-50.08 102.25,41.28 158.19,303.22 28.17,446.08C996.65,742.52 762.64,739.78 698.42,648.89Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startX="700.11"
                  android:endX="900.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M339.91,-42.46a246.52,141.46 0,1 0,493.04 0a246.52,141.46 0,1 0,-493.04 0z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startX="400.11"
                  android:endX="800.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
    </group>
  </group>
</vector>



================================================
FILE: app/src/main/res/drawable-v24/ic_banner_foreground.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="320dp"
    android:height="180dp"
    android:viewportWidth="320"
    android:viewportHeight="180"
    android:name="vector">
  <group android:scaleX="0.6666667"
      android:scaleY="0.6666667"
      android:translateX="53.333332"
      android:translateY="30">
    <group android:scaleX="0.2671378"
        android:scaleY="0.2671378"
        android:translateX="35.8"
        android:translateY="52.2">
        <path android:name="path"
              android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
              android:strokeWidth="1"
              tools:ignore="VectorPath">
            <aapt:attr name="android:fillColor">
                <gradient
                        android:startY="0"
                        android:startX="200"
                        android:endY="0"
                        android:endX="300"
                        android:type="linear">
                    <item android:offset="0" android:color="#2309db"/>
                    <item android:offset="1" android:color="#1B08A1"/>
                </gradient>
            </aapt:attr>
        </path>

        <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
              android:strokeWidth="1">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="0"
                    android:startX="200"
                    android:endY="0"
                    android:endX="000"
                    android:type="linear">
                <item android:offset="0" android:color="#254cdb"/>
                <item android:offset="1" android:color="#1138DD"/>
            </gradient>
        </aapt:attr>
        </path>

        <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
               android:strokeWidth="1">
        <aapt:attr name="android:fillColor">
            <gradient
                    android:startY="0"
                    android:startX="150"
                    android:endY="0"
                    android:endX="000"
                    android:type="linear">
                <item android:offset="0" android:color="#407EF1"/>
                <item android:offset="1" android:color="#428CC5"/>
            </gradient>
        </aapt:attr>
    </path>
    </group>

    <group android:scaleX="0.18556112"
        android:scaleY="0.18556112"
        android:translateX="128"
        android:translateY="72.22962">
      <group android:translateY="155.39062">
        <path android:pathData="M81.84375,-4.53125Q70.671875,2,54,2Q32.484375,2,19.546875,-11.953125Q6.609375,-25.921875,6.609375,-48.59375Q6.609375,-72.953125,21.15625,-87.96875Q35.71875,-103,58.078125,-103Q72.421875,-103,81.84375,-98.59375L81.84375,-86Q71.015625,-92,57.9375,-92Q40.578125,-92,29.78125,-80.375Q18.984375,-68.765625,18.984375,-49.34375Q18.984375,-30.890625,29.078125,-19.9375Q39.171875,-9,55.546875,-9Q70.734375,-9,81.84375,-16L81.84375,-4.53125Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M112.203125,0L100.671875,0L100.671875,-107L112.203125,-107L112.203125,0Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M165.76562,2Q149.8125,2,140.28125,-8.171875Q130.75,-18.34375,130.75,-35.15625Q130.75,-53.4375,140.65625,-63.71875Q150.57812,-74,167.45312,-74Q183.5625,-74,192.59375,-64Q201.625,-54,201.625,-36.28125Q201.625,-18.921875,191.89062,-8.453125Q182.15625,2,165.76562,2ZM166.60938,-64Q155.5,-64,149.03125,-56.4375Q142.5625,-48.875,142.5625,-35.578125Q142.5625,-22.78125,149.09375,-15.390625Q155.64062,-8,166.60938,-8Q177.79688,-8,183.79688,-15.25Q189.8125,-22.5,189.8125,-35.859375Q189.8125,-49.359375,183.79688,-56.671875Q177.79688,-64,166.60938,-64Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M277.89062,0L266.35938,0L266.35938,-11.375L266.07812,-11.375Q258.90625,2,243.85938,2Q218.125,2,218.125,-28.78125L218.125,-72L229.59375,-72L229.59375,-30.78125Q229.59375,-8,247.03125,-8Q255.46875,-8,260.90625,-14.21875Q266.35938,-20.453125,266.35938,-30.5L266.35938,-72L277.89062,-72L277.89062,0Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M363.125,0L351.59375,0L351.59375,-12.21875L351.3125,-12.21875Q343.29688,2,326.5625,2Q313,2,304.875,-7.75Q296.75,-17.5,296.75,-34.296875Q296.75,-52.3125,305.75,-63.15625Q314.75,-74,329.73438,-74Q344.5625,-74,351.3125,-62.03125L351.59375,-62.03125L351.59375,-107L363.125,-107L363.125,0ZM351.59375,-32.546875L351.59375,-43.171875Q351.59375,-51.90625,345.82812,-57.953125Q340.0625,-64,331.20312,-64Q320.65625,-64,314.60938,-56.25Q308.5625,-48.515625,308.5625,-34.875Q308.5625,-22.421875,314.35938,-15.203125Q320.17188,-8,329.9375,-8Q339.57812,-8,345.57812,-14.953125Q351.59375,-21.921875,351.59375,-32.546875Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M383.51562,-4.078125L383.51562,-18Q385.90625,-15.90625,389.23438,-14.234375Q392.57812,-12.5625,396.26562,-11.40625Q399.96875,-10.25,403.6875,-9.625Q407.42188,-9,410.57812,-9Q421.48438,-9,426.85938,-13Q432.23438,-17,432.23438,-24.5Q432.23438,-28.609375,430.4375,-31.65625Q428.65625,-34.703125,425.48438,-37.21875Q422.32812,-39.734375,418,-42.03125Q413.67188,-44.328125,408.6875,-46.890625Q403.40625,-49.578125,398.82812,-52.34375Q394.26562,-55.109375,390.89062,-58.4375Q387.51562,-61.765625,385.57812,-65.96875Q383.65625,-70.1875,383.65625,-75.859375Q383.65625,-82.796875,386.67188,-87.9375Q389.70312,-93.078125,394.625,-96.40625Q399.54688,-99.734375,405.82812,-101.359375Q412.125,-103,418.67188,-103Q433.57812,-103,440.39062,-99.296875L440.39062,-86Q431.46875,-92,417.46875,-92Q413.60938,-92,409.73438,-91.1875Q405.875,-90.390625,402.84375,-88.578125Q399.82812,-86.765625,397.92188,-83.90625Q396.03125,-81.046875,396.03125,-76.921875Q396.03125,-73.03125,397.46875,-70.1875Q398.90625,-67.359375,401.71875,-65.015625Q404.53125,-62.6875,408.57812,-60.484375Q412.625,-58.28125,417.89062,-55.671875Q423.3125,-52.96875,428.15625,-50Q433.01562,-47.03125,436.67188,-43.40625Q440.32812,-39.796875,442.46875,-35.40625Q444.60938,-31.015625,444.60938,-25.34375Q444.60938,-17.828125,441.6875,-12.625Q438.78125,-7.421875,433.8125,-4.15625Q428.85938,-0.90625,422.39062,0.546875Q415.92188,2,408.75,2Q406.35938,2,402.84375,1.59375Q399.32812,1.1875,395.67188,0.40625Q392.01562,-0.375,388.75,-1.515625Q385.48438,-2.671875,383.51562,-4.078125Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M497.07812,-0.234375Q493,2,486.3125,2Q467.40625,2,467.40625,-19.1875L467.40625,-62L455.03125,-62L455.03125,-72L467.40625,-72L467.40625,-89.328125L478.9375,-93L478.9375,-72L497.07812,-72L497.07812,-62L478.9375,-62L478.9375,-21.4375Q478.9375,-14.1875,481.39062,-11.09375Q483.85938,-8,489.54688,-8Q493.90625,-8,497.07812,-10L497.07812,-0.234375Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M550.21875,-60Q547.2031,-62,541.5,-62Q534.125,-62,529.15625,-55.109375Q524.2031,-48.21875,524.2031,-36.328125L524.2031,0L512.6719,0L512.6719,-72L524.2031,-72L524.2031,-56.515625L524.4844,-56.515625Q526.9531,-64.296875,532.0156,-68.640625Q537.0781,-73,543.3281,-73Q547.8281,-73,550.21875,-72.015625L550.21875,-60Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M620.5469,-33L569.7031,-33Q569.9844,-21.03125,576.1719,-14.515625Q582.3594,-8,593.1875,-8Q605.3594,-8,615.5469,-16L615.5469,-5Q606.0625,2,590.4531,2Q575.1875,2,566.46875,-7.890625Q557.75,-17.78125,557.75,-35.71875Q557.75,-52.65625,567.28125,-63.328125Q576.8125,-74,590.9375,-74Q605.0781,-74,612.8125,-64.765625Q620.5469,-55.53125,620.5469,-39.109375L620.5469,-33ZM608.7344,-43Q608.65625,-52.9375,603.90625,-58.46875Q599.1719,-64,590.7344,-64Q582.5781,-64,576.875,-58.1875Q571.1875,-52.375,569.84375,-43L608.7344,-43Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M689.21875,0L677.6875,0L677.6875,-11.234375L677.40625,-11.234375Q669.875,2,655.25,2Q644.5,2,638.40625,-3.765625Q632.3281,-9.546875,632.3281,-19.109375Q632.3281,-39.578125,656.09375,-42.9375L677.6875,-46Q677.6875,-64,662.84375,-64Q649.84375,-64,639.3594,-55L639.3594,-67.09375Q649.9844,-74,663.8281,-74Q689.21875,-74,689.21875,-47.03125L689.21875,0ZM677.6875,-37L660.3125,-34.5625Q652.2969,-33.40625,648.21875,-30.5Q644.1406,-27.59375,644.1406,-20.203125Q644.1406,-14.8125,647.90625,-11.40625Q651.6719,-8,657.9219,-8Q666.5,-8,672.09375,-14.140625Q677.6875,-20.28125,677.6875,-29.671875L677.6875,-37Z"
            android:fillColor="#76A6FD"/>
        <path android:pathData="M812.90625,0L801.375,0L801.375,-41.359375Q801.375,-53.3125,797.6875,-58.65625Q794,-64,785.28125,-64Q777.8906,-64,772.71875,-57.25Q767.5625,-50.5,767.5625,-41.078125L767.5625,0L756.03125,0L756.03125,-42.765625Q756.03125,-64,739.6406,-64Q732.0469,-64,727.125,-57.625Q722.2031,-51.265625,722.2031,-41.078125L722.2031,0L710.6719,0L710.6719,-72L722.2031,-72L722.2031,-60.625L722.4844,-60.625Q730.15625,-74,744.84375,-74Q752.2344,-74,757.71875,-69.796875Q763.2031,-65.609375,765.2344,-58.796875Q773.25,-74,789.1406,-74Q812.90625,-74,812.90625,-44.5625L812.90625,0Z"
            android:fillColor="#76A6FD"/>
      </group>
    </group>
  </group>
</vector>


================================================
FILE: app/src/main/res/drawable-v24/ic_launcher_foreground.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108"
    android:name="vector">
  <group android:scaleX="0.1755477"
      android:scaleY="0.1755477"
      android:translateX="29.16"
      android:translateY="29.16">
      <path android:name="path"
            android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
            android:strokeWidth="1"
            tools:ignore="VectorPath">
          <aapt:attr name="android:fillColor">
              <gradient
                      android:startY="0"
                      android:startX="200"
                      android:endY="0"
                      android:endX="300"
                      android:type="linear">
                  <item android:offset="0" android:color="#2309db"/>
                  <item android:offset="1" android:color="#1B08A1"/>
              </gradient>
          </aapt:attr>
      </path>

      <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
            android:strokeWidth="1">
      <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="0"
                  android:startX="200"
                  android:endY="0"
                  android:endX="000"
                  android:type="linear">
              <item android:offset="0" android:color="#254cdb"/>
              <item android:offset="1" android:color="#1138DD"/>
          </gradient>
      </aapt:attr>
      </path>

      <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
             android:strokeWidth="1">
      <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="0"
                  android:startX="150"
                  android:endY="0"
                  android:endX="000"
                  android:type="linear">
              <item android:offset="0" android:color="#407EF1"/>
              <item android:offset="1" android:color="#428CC5"/>
          </gradient>
      </aapt:attr>
  </path>
  </group>
</vector>


================================================
FILE: app/src/main/res/font/google_sans.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<font-family
        xmlns:app="http://schemas.android.com/apk/res-auto">
    <font
            app:fontStyle="normal"
            app:fontWeight="100"
            app:font="@font/productsans_thin" />
    <font
            app:fontStyle="italic"
            app:fontWeight="100"
            app:font="@font/productsans_thinitalic" />

    <font
            app:fontStyle="normal"
            app:fontWeight="300"
            app:font="@font/productsans_light" />

    <font
            app:fontStyle="italic"
            app:fontWeight="300"
            app:font="@font/productsans_lightitalic" />

    <font
            app:fontStyle="normal"
            app:fontWeight="400"
            app:font="@font/productsans_regular" />

    <font
            app:fontStyle="italic"
            app:fontWeight="400"
            app:font="@font/productsans_italic" />

    <font
            app:fontStyle="normal"
            app:fontWeight="500"
            app:font="@font/productsans_medium" />
    <font
            app:fontStyle="italic"
            app:fontWeight="500"
            app:font="@font/productsans_mediumitalic" />

    <font
            app:fontStyle="normal"
            app:fontWeight="700"
            app:font="@font/productsans_bold" />
    <font
            app:fontStyle="italic"
            app:fontWeight="700"
            app:font="@font/productsans_bolditalic" />

    <font
            app:fontStyle="normal"
            app:fontWeight="900"
            app:font="@font/productsans_black" />
    <font
            app:fontStyle="italic"
            app:fontWeight="900"
            app:font="@font/productsans_blackitalic" />
</font-family>


================================================
FILE: app/src/main/res/layout/account_managment.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <LinearLayout
            android:paddingStart="20dp"
            android:paddingEnd="20dp"
            android:paddingTop="20dp"
            android:paddingBottom="10dp"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <androidx.cardview.widget.CardView
                app:cardCornerRadius="100dp"
                android:layout_gravity="center_vertical"
                android:layout_width="35dp"
                android:layout_height="35dp">

            <ImageView
                    android:id="@+id/account_profile_picture"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    tools:ignore="ContentDescription" />
        </androidx.cardview.widget.CardView>

        <LinearLayout
                android:paddingStart="20dp"
                android:paddingEnd="20dp"
                android:layout_gravity="center_vertical"
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

            <TextView
                    android:id="@+id/account_name"

                    android:textStyle="bold"
                    tools:text="MAL HelloWorld"
                    android:textSize="20sp"
                    android:textColor="?attr/textColor"
                    android:layout_width="match_parent"
                    android:layout_rowWeight="1"
                    android:layout_height="wrap_content" />

            <TextView
                    android:id="@+id/account_site"
                    android:layout_gravity="center_vertical"
                    tools:text="MyAnimeList"
                    android:textSize="15sp"
                    android:textColor="?attr/grayTextColor"
                    android:layout_width="match_parent"
                    android:layout_rowWeight="1"
                    android:layout_height="wrap_content" />
        </LinearLayout>

    </LinearLayout>

    <TextView
            android:id="@+id/account_switch_account"
            android:text="@string/switch_account"
            style="@style/SettingsItem" />

    <TextView
            android:id="@+id/account_logout"
            android:text="@string/logout"
            style="@style/SettingsItem">

        <requestFocus />
    </TextView>
</LinearLayout>


================================================
FILE: app/src/main/res/layout/account_single.xml
================================================
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:foreground="?android:attr/selectableItemBackgroundBorderless"
        android:orientation="horizontal"
        android:layout_height="wrap_content"
        android:layout_width="match_parent">

    <androidx.cardview.widget.CardView
            android:layout_marginStart="10dp"
            app:cardCornerRadius="100dp"
            android:layout_gravity="center_vertical"
            android:layout_width="30dp"
            android:layout_height="30dp">

        <ImageView
                android:id="@+id/account_profile_picture"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                tools:ignore="ContentDescription" />
    </androidx.cardview.widget.CardView>

    <TextView
            android:foreground="@null"
            android:id="@+id/account_name"
            tools:text="Account 1"
            style="@style/SettingsItem" />
</LinearLayout>




================================================
FILE: app/src/main/res/layout/account_switch.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/account_list"
            app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
            android:background="?attr/primaryBlackBackground"
            tools:listitem="@layout/account_single"
            android:layout_width="match_parent"
            android:layout_rowWeight="1"
            android:layout_height="wrap_content" />

    <TextView
            android:id="@+id/account_add"
            android:text="@string/add_account"
            style="@style/SettingsItem">

        <requestFocus />
    </TextView>
</LinearLayout>


================================================
FILE: app/src/main/res/layout/activity_main.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/homeRoot"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:configChanges="orientation|screenSize|screenLayout|keyboardHidden|keyboard|navigation"
        android:paddingTop="0dp">

    <androidx.constraintlayout.widget.ConstraintLayout
            android:layout_height="match_parent"
            android:layout_width="match_parent">

        <com.google.android.material.navigationrail.NavigationRailView
                android:layout_width="62dp"
                android:layout_height="match_parent"
                android:id="@+id/nav_rail_view"
                android:background="?attr/primaryGrayBackground"
                app:itemTextColor="@color/item_select_color"

                app:itemIconTint="@color/item_select_color"
                app:menuGravity="center"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintBottom_toBottomOf="parent"
                app:labelVisibilityMode="unlabeled"
                app:menu="@menu/bottom_nav_menu">

        </com.google.android.material.navigationrail.NavigationRailView>

        <com.google.android.material.bottomnavigation.BottomNavigationView
                android:id="@+id/nav_view"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:background="?attr/primaryGrayBackground"

                app:labelVisibilityMode="labeled"
                app:itemTextColor="@color/item_select_color"
                app:itemIconTint="@color/item_select_color"

                app:layout_constraintLeft_toLeftOf="parent"
                app:layout_constraintRight_toRightOf="parent"
                app:menu="@menu/bottom_nav_menu"
                app:layout_constraintBottom_toBottomOf="parent" />

        <androidx.fragment.app.FragmentContainerView
                android:id="@+id/nav_host_fragment"
                android:name="androidx.navigation.fragment.NavHostFragment"
                android:layout_width="0dp"
                android:layout_height="0dp"
                app:defaultNavHost="true"
                app:navGraph="@navigation/mobile_navigation"
                app:layout_constraintStart_toEndOf="@+id/nav_rail_view"
                app:layout_constraintBottom_toTopOf="@+id/cast_mini_controller_holder"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintEnd_toEndOf="parent" />

        <LinearLayout
                tools:layout_height="100dp"
                android:layout_width="0dp"
                app:layout_constraintStart_toEndOf="@+id/nav_rail_view"
                android:layout_height="wrap_content"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintBottom_toTopOf="@+id/nav_view"
                android:id="@+id/cast_mini_controller_holder">
            <!--com.google.android.gms.cast.framework.media.widget.MiniControllerFragment-->
            <fragment
                    app:customCastBackgroundColor="?attr/primaryGrayBackground"
                    app:castControlButtons="@array/cast_mini_controller_control_buttons"
                    android:id="@+id/cast_mini_controller"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:visibility="gone"
                    class="com.lagradost.cloudstream3.ui.MyMiniControllerFragment"
                    tools:ignore="FragmentTagUsage" />
        </LinearLayout>
    </androidx.constraintlayout.widget.ConstraintLayout>
</FrameLayout>


================================================
FILE: app/src/main/res/layout/activity_main_tv.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/homeRoot"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:configChanges="orientation|screenSize|screenLayout|keyboardHidden|keyboard|navigation"
        android:paddingTop="0dp">

    <androidx.constraintlayout.widget.ConstraintLayout
            android:layout_height="match_parent"
            android:layout_width="match_parent">

        <androidx.fragment.app.FragmentContainerView
                android:id="@+id/nav_host_fragment"
                android:name="androidx.navigation.fragment.NavHostFragment"
                android:layout_width="0dp"
                android:layout_height="0dp"
                app:defaultNavHost="true"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintLeft_toRightOf="parent"
                app:layout_constraintBottom_toTopOf="@id/cast_mini_controller_holder"
                app:navGraph="@navigation/mobile_navigation"
                app:layout_constraintStart_toEndOf="@id/nav_rail_view"
                app:layout_constraintEnd_toEndOf="parent" />

        <com.google.android.material.navigationrail.NavigationRailView
                android:layout_width="62dp"
                android:layout_height="match_parent"
                android:id="@+id/nav_rail_view"
                android:background="?attr/primaryGrayBackground"
                app:itemTextColor="@color/item_select_color"
                app:itemIconTint="@color/item_select_color"

                app:menuGravity="center"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                app:labelVisibilityMode="unlabeled"
                app:menu="@menu/bottom_nav_menu">

        </com.google.android.material.navigationrail.NavigationRailView>

        <LinearLayout
                app:layout_constraintStart_toEndOf="@+id/nav_rail_view"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintBottom_toBottomOf="parent"
                tools:layout_height="100dp"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:id="@+id/cast_mini_controller_holder">
            <!--com.google.android.gms.cast.framework.media.widget.MiniControllerFragment-->
            <fragment
                    app:customCastBackgroundColor="?attr/primaryGrayBackground"
                    app:castControlButtons="@array/cast_mini_controller_control_buttons"
                    android:id="@+id/cast_mini_controller"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:visibility="gone"
                    class="com.lagradost.cloudstream3.ui.MyMiniControllerFragment"
                    tools:ignore="FragmentTagUsage" />
        </LinearLayout>
    </androidx.constraintlayout.widget.ConstraintLayout>
</FrameLayout>


================================================
FILE: app/src/main/res/layout/bottom_input_dialog.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:nextFocusDown="@id/nginx_text_input"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <TextView
        android:id="@+id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_marginTop="20dp"
        android:layout_marginBottom="10dp"
        android:paddingStart="?android:attr/listPreferredItemPaddingStart"
        android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
        android:textColor="?attr/textColor"
        android:textSize="20sp"
        android:textStyle="bold"
        tools:text="Test" />

    <EditText
            android:id="@+id/nginx_text_input"
            android:nextFocusRight="@id/cancel_btt"
            android:nextFocusLeft="@id/apply_btt"
            android:layout_marginBottom="60dp"
            android:layout_marginHorizontal="10dp"
            android:paddingTop="10dp"
            android:requiresFadingEdge="vertical"
            tools:text="nginx.com"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_rowWeight="1"
            android:autofillHints="Autofill Hint"
            android:inputType="text"
            tools:ignore="LabelFor" />

    <LinearLayout
            android:id="@+id/apply_btt_holder"
            android:orientation="horizontal"
            android:layout_gravity="bottom"
            android:gravity="bottom|end"
            android:layout_marginTop="-60dp"
            android:layout_width="match_parent"
            android:layout_height="60dp">

        <com.google.android.material.button.MaterialButton
                style="@style/WhiteButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_apply"
                android:id="@+id/apply_btt"
                android:layout_width="wrap_content" />

        <com.google.android.material.button.MaterialButton
                style="@style/BlackButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_cancel"
                android:id="@+id/cancel_btt"
                android:layout_width="wrap_content" />
    </LinearLayout>
</LinearLayout>



================================================
FILE: app/src/main/res/layout/bottom_selection_dialog.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <TextView
            android:id="@+id/text1"
            android:paddingStart="?android:attr/listPreferredItemPaddingStart"
            android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
            android:layout_marginTop="20dp"
            android:layout_marginBottom="10dp"
            android:textStyle="bold"
            android:textSize="20sp"
            android:textColor="?attr/textColor"
            android:layout_width="match_parent"
            android:layout_rowWeight="1"
            tools:text="Test"
            android:layout_height="wrap_content" />

    <ListView
            android:nextFocusRight="@id/cancel_btt"
            android:nextFocusLeft="@id/apply_btt"

            android:id="@+id/listview1"
            android:layout_marginBottom="60dp"
            android:paddingTop="10dp"
            android:requiresFadingEdge="vertical"
            tools:listitem="@layout/sort_bottom_single_choice"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_rowWeight="1" />

    <LinearLayout
            android:id="@+id/apply_btt_holder"
            android:orientation="horizontal"
            android:layout_gravity="bottom"
            android:gravity="bottom|end"
            android:layout_marginTop="-60dp"
            android:layout_width="match_parent"
            android:layout_height="60dp">

        <com.google.android.material.button.MaterialButton
                style="@style/WhiteButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_apply"
                android:id="@+id/apply_btt"
                android:layout_width="wrap_content" />

        <com.google.android.material.button.MaterialButton
                style="@style/BlackButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_cancel"
                android:id="@+id/cancel_btt"
                android:layout_width="wrap_content" />
    </LinearLayout>
</LinearLayout>



================================================
FILE: app/src/main/res/layout/cast_item.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"

        android:nextFocusLeft="@id/episode_poster"
        android:nextFocusRight="@id/result_episode_download"
        android:id="@+id/episode_holder"
        app:cardElevation="0dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:cardCornerRadius="@dimen/rounded_image_radius"
        app:cardBackgroundColor="@color/transparent"

        android:foreground="@drawable/outline_drawable"
        android:layout_margin="5dp">
    <LinearLayout
            android:padding="5dp"
            android:layout_width="100dp"
            android:orientation="vertical"
            android:layout_height="wrap_content">
        <!--app:cardCornerRadius="@dimen/roundedImageRadius"-->
        <FrameLayout
                android:layout_gravity="center_horizontal"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

            <androidx.cardview.widget.CardView
                    app:cardCornerRadius="35dp"
                    android:layout_width="70dp"
                    android:layout_height="70dp"
                    android:foreground="@drawable/outline_drawable">

                <ImageView
                        android:nextFocusLeft="@id/result_episode_download"
                        android:nextFocusRight="@id/episode_holder"

                        android:id="@+id/actor_image"
                        tools:src="@drawable/example_poster"

                        android:scaleType="centerCrop"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:contentDescription="@string/episode_poster_img_des" />

            </androidx.cardview.widget.CardView>

            <androidx.cardview.widget.CardView
                    android:id="@+id/voice_actor_image_holder"
                    android:layout_gravity="end|bottom"
                    app:cardCornerRadius="20dp"
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:foreground="@drawable/outline_drawable">

                <ImageView
                        android:nextFocusLeft="@id/result_episode_download"
                        android:nextFocusRight="@id/episode_holder"

                        android:id="@+id/voice_actor_image"
                        tools:src="@drawable/example_poster"

                        android:scaleType="centerCrop"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:contentDescription="@string/episode_poster_img_des" />
            </androidx.cardview.widget.CardView>
        </FrameLayout>

        <LinearLayout
                android:paddingTop="3dp"
                android:paddingBottom="3dp"
                android:orientation="vertical"
                android:layout_gravity="center"
                android:gravity="center_horizontal"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

            <TextView
                    android:gravity="center_horizontal"
                    android:id="@+id/actor_name"
                    tools:text="Ackerman, Mikasa"
                    android:textStyle="bold"
                    android:textColor="?attr/textColor"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            <TextView
                    android:gravity="center_horizontal"
                    android:id="@+id/voice_actor_name"
                    tools:text="voiceactor"
                    android:textColor="?attr/grayTextColor"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            <TextView
                    android:gravity="center_horizontal"
                    android:id="@+id/actor_extra"
                    tools:text="Main"
                    android:textColor="?attr/grayTextColor"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

        </LinearLayout>

    </LinearLayout>
</androidx.cardview.widget.CardView>


================================================
FILE: app/src/main/res/layout/chromecast_subtitle_settings.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/subs_root"
        android:background="?attr/primaryBlackBackground">

    <LinearLayout
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <TextView
                android:paddingStart="20dp"
                android:paddingEnd="20dp"
                android:layout_marginTop="20dp"
                android:layout_marginBottom="10dp"
                android:textStyle="bold"
                android:text="@string/chromecast_subtitles_settings"
                android:textSize="20sp"
                android:textColor="?attr/textColor"
                android:layout_width="match_parent"
                android:layout_rowWeight="1"
                android:layout_height="wrap_content" />

        <FrameLayout
                android:visibility="gone"
                android:layout_width="match_parent"
                android:layout_height="75sp">

            <ImageView
                    android:scaleType="centerCrop"
                    android:src="@drawable/subtitles_preview_background"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:contentDescription="@string/preview_background_img_des" />

            <com.google.android.exoplayer2.ui.SubtitleView
                    android:id="@+id/subtitle_text"

                    android:layout_width="match_parent"
                    android:layout_gravity="center"
                    android:foregroundGravity="center"
                    android:layout_height="match_parent" />
        </FrameLayout>

        <TextView
                android:nextFocusDown="@id/subs_font_size"
                android:nextFocusLeft="@id/apply_btt"
                android:nextFocusRight="@id/cancel_btt"

                android:id="@+id/subs_font"
                android:text="@string/subs_font"
                style="@style/SettingsItem" />

        <TextView
                android:nextFocusUp="@id/subs_font"
                android:nextFocusDown="@id/subs_text_color"
                android:nextFocusLeft="@id/apply_btt"
                android:nextFocusRight="@id/cancel_btt"

                android:id="@+id/subs_font_size"
                android:text="@string/subs_font_size"
                style="@style/SettingsItem" />

        <TextView
                android:nextFocusUp="@id/subs_font_size"
                android:nextFocusDown="@id/subs_outline_color"
                android:nextFocusLeft="@id/apply_btt"
                android:nextFocusRight="@id/cancel_btt"

                android:id="@+id/subs_text_color"
                android:text="@string/subs_text_color"
                style="@style/SettingsItem" />

        <TextView
                android:nextFocusUp="@id/subs_text_color"
                android:nextFocusDown="@id/subs_background_color"
                android:nextFocusLeft="@id/apply_btt"
                android:nextFocusRight="@id/cancel_btt"

                android:id="@+id/subs_outline_color"
                android:text="@string/subs_outline_color"
                style="@style/SettingsItem" />

        <TextView
                android:nextFocusUp="@id/subs_outline_color"
                android:nextFocusDown="@id/subs_window_color"
                android:nextFocusLeft="@id/apply_btt"
                android:nextFocusRight="@id/cancel_btt"

                android:id="@+id/subs_background_color"
                android:text="@string/subs_background_color"
                style="@style/SettingsItem" />

        <TextView
                android:visibility="gone"
                android:nextFocusUp="@id/subs_background_color"
                android:nextFocusDown="@id/subs_edge_type"
                android:nextFocusLeft="@id/apply_btt"
                android:nextFocusRight="@id/cancel_btt"

                android:id="@+id/subs_window_color"
                android:text="@string/subs_window_color"
                style="@style/SettingsItem" />

        <TextView
                android:nextFocusUp="@id/subs_window_color"
                android:nextFocusDown="@id/apply_btt"
                android:nextFocusLeft="@id/apply_btt"
                android:nextFocusRight="@id/cancel_btt"

                android:id="@+id/subs_edge_type"
                android:text="@string/subs_edge_type"
                style="@style/SettingsItem" />

        <TextView
                android:gravity="center"
                android:text="@string/subs_hold_to_reset_to_default"
                android:textSize="14sp"

                android:textColor="?attr/textColor"
                android:layout_width="match_parent"
                android:layout_rowWeight="1"
                android:layout_height="wrap_content" />

        <LinearLayout
                android:orientation="horizontal"
                android:layout_gravity="bottom"
                android:gravity="bottom|end"
                android:layout_width="match_parent"
                android:layout_height="60dp">

            <com.google.android.material.button.MaterialButton
                    android:nextFocusUp="@id/subs_edge_type"
                    android:nextFocusRight="@id/cancel_btt"
                    style="@style/WhiteButton"
                    android:layout_gravity="center_vertical|end"
                    android:visibility="visible"
                    android:text="@string/sort_apply"
                    android:id="@+id/apply_btt"
                    android:layout_width="wrap_content">

                <requestFocus />
            </com.google.android.material.button.MaterialButton>

            <com.google.android.material.button.MaterialButton
                    android:nextFocusUp="@id/subs_edge_type"
                    android:nextFocusLeft="@id/apply_btt"
                    style="@style/BlackButton"
                    android:layout_gravity="center_vertical|end"
                    android:text="@string/sort_cancel"
                    android:id="@+id/cancel_btt"
                    android:layout_width="wrap_content" />
        </LinearLayout>
    </LinearLayout>
</ScrollView>


================================================
FILE: app/src/main/res/layout/dialog_loading.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    <!--
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:text="Loading..." android:textColor="?attr/textColor" android:textSize="20sp"
                  android:textStyle="bold" android:layout_margin="10dp"/>-->
    <!--            style="@android:style/Widget.Material.ProgressBar.Horizontal"
-->
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/loading_chromecast"
            android:layout_gravity="center"
            android:textColor="@color/textColor"
            android:textSize="20sp"
            android:textStyle="bold"
            android:layout_margin="10dp" />

    <ProgressBar
            android:layout_margin="20dp"

            android:layout_gravity="center"
            android:layout_width="60dp"
            android:layout_height="60dp" />
</LinearLayout>


================================================
FILE: app/src/main/res/layout/download_child_episode.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"

        android:nextFocusRight="@id/download_child_episode_download"
        android:nextFocusLeft="@id/nav_rail_view"

        android:id="@+id/download_child_episode_holder"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        app:cardCornerRadius="@dimen/rounded_image_radius"
        app:cardBackgroundColor="@color/transparent"
        app:cardElevation="0dp"
        android:foreground="@drawable/outline_drawable"
        android:layout_marginBottom="5dp">

    <androidx.core.widget.ContentLoadingProgressBar
            android:id="@+id/download_child_episode_progress"

            android:layout_marginBottom="-1.5dp"
            android:progressTint="?attr/colorPrimary"
            android:progressBackgroundTint="?attr/colorPrimary"
            style="@android:style/Widget.Material.ProgressBar.Horizontal"
            android:layout_width="match_parent"
            tools:progress="50"
            android:layout_gravity="bottom"
            android:layout_height="5dp" />

    <GridLayout
            android:foreground="?android:attr/selectableItemBackgroundBorderless"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <ImageView
                android:id="@+id/download_child_episode_play"
                android:visibility="gone"
                android:layout_marginStart="10dp"
                android:layout_marginEnd="10dp"
                android:layout_gravity="center_vertical"
                android:src="@drawable/ic_baseline_play_arrow_24"
                android:contentDescription="@string/episode_play_img_des" />

        <LinearLayout
                android:layout_gravity="center_vertical"
                android:orientation="vertical"
                android:layout_height="wrap_content"
                android:layout_marginEnd="50dp"
                android:layout_width="match_parent">

            <TextView
                    android:id="@+id/download_child_episode_text"
                    android:layout_marginStart="10dp"
                    android:layout_marginEnd="10dp"
                    android:layout_gravity="center_vertical"
                    android:gravity="center_vertical"
                    tools:text="Episode 1 Episode 1 Episode 1 Episode 1 Episode 1 Episode 1 Episode 1"

                    android:scrollHorizontally="true"
                    android:ellipsize="marquee"
                    android:marqueeRepeatLimit="marquee_forever"
                    android:singleLine="true"

                    android:textColor="?attr/textColor"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" />

            <TextView
                    android:id="@+id/download_child_episode_text_extra"
                    android:layout_marginStart="10dp"
                    android:layout_marginEnd="10dp"
                    android:layout_gravity="center_vertical"
                    android:gravity="center_vertical"
                    tools:text="128MB / 237MB"
                    android:textColor="?attr/grayTextColor"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent" />
        </LinearLayout>

        <FrameLayout
                android:layout_marginStart="-50dp"
                android:layout_gravity="end"
                android:layout_width="wrap_content"
                android:layout_height="match_parent">

            <androidx.core.widget.ContentLoadingProgressBar
                    android:id="@+id/download_child_episode_progress_downloaded"
                    android:layout_marginEnd="10dp"
                    android:layout_marginStart="10dp"
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:indeterminate="false"
                    android:progressDrawable="@drawable/circular_progress_bar"
                    android:background="@drawable/circle_shape"
                    style="?android:attr/progressBarStyleHorizontal"
                    android:max="100"
                    android:layout_margin="5dp"
                    android:layout_gravity="end|center_vertical"
                    android:progress="0"
                    android:visibility="visible" />

            <ImageView
                    android:nextFocusRight="@id/download_child_episode_holder"
                    android:nextFocusLeft="@id/download_child_episode_holder"

                    android:id="@+id/download_child_episode_download"
                    android:visibility="visible"
                    android:layout_marginEnd="10dp"
                    android:layout_marginStart="10dp"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:padding="2dp"
                    android:layout_width="30dp"
                    android:background="?selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_baseline_play_arrow_24"
                    app:tint="?attr/textColor"
                    android:contentDescription="@string/download" />
        </FrameLayout>
    </GridLayout>
</androidx.cardview.widget.CardView>


================================================
FILE: app/src/main/res/layout/download_header_episode.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:cardCornerRadius="@dimen/rounded_image_radius"
        app:cardBackgroundColor="?attr/boxItemBackground"
        android:id="@+id/episode_holder"
        android:foreground="@drawable/outline_drawable"
        android:layout_marginBottom="10dp">

    <LinearLayout
            android:foreground="?android:attr/selectableItemBackgroundBorderless"
            android:layout_width="match_parent"
            android:orientation="horizontal"
            android:layout_height="wrap_content">
        <!--app:cardCornerRadius="@dimen/roundedImageRadius"-->
        <androidx.cardview.widget.CardView
                android:layout_width="70dp"
                android:layout_height="104dp">

            <ImageView
                    android:id="@+id/download_header_poster"
                    tools:src="@drawable/example_poster"
                    android:scaleType="centerCrop"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:contentDescription="@string/episode_poster_img_des" />
        </androidx.cardview.widget.CardView>

        <LinearLayout
                android:layout_marginStart="15dp"
                android:orientation="vertical"
                android:layout_gravity="center"
                android:layout_width="match_parent"
                android:layout_marginEnd="70dp"
                android:layout_height="wrap_content">

            <TextView
                    android:id="@+id/download_header_title"
                    tools:text="Perfect Run"
                    android:textStyle="bold"
                    android:textColor="?attr/textColor"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            <TextView
                    android:id="@+id/download_header_info"
                    tools:text="1 episode | 285MB"
                    android:textColor="?attr/grayTextColor"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />
        </LinearLayout>

        <ImageView
                android:layout_marginStart="-50dp"
                android:layout_height="match_parent"
                android:layout_width="30dp"
                android:id="@+id/download_header_goto_child"
                android:layout_gravity="center_vertical|end"
                android:src="@drawable/ic_baseline_keyboard_arrow_right_24"
                android:contentDescription="@string/download" />

        <FrameLayout
                android:layout_marginStart="-50dp"
                android:layout_gravity="end"
                android:layout_width="wrap_content"
                android:layout_height="match_parent">

            <androidx.core.widget.ContentLoadingProgressBar
                    android:layout_marginEnd="10dp"
                    android:layout_marginStart="10dp"
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:id="@+id/download_header_progress_downloaded"
                    android:indeterminate="false"
                    android:progressDrawable="@drawable/circular_progress_bar"
                    android:background="@drawable/circle_shape"
                    style="?android:attr/progressBarStyleHorizontal"
                    android:max="100"
                    android:layout_margin="5dp"
                    android:layout_gravity="center_vertical"
                    android:progress="0"
                    android:visibility="visible" />

            <ImageView

                    android:visibility="visible"
                    android:layout_marginEnd="10dp"
                    android:layout_marginStart="10dp"
                    android:layout_gravity="center_vertical"
                    android:layout_height="wrap_content"
                    android:padding="2dp"
                    android:layout_width="30dp"
                    android:id="@+id/download_header_episode_download"
                    android:background="?selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_baseline_play_arrow_24"
                    android:contentDescription="@string/download"
                    app:tint="?attr/white" />
        </FrameLayout>
    </LinearLayout>
</androidx.cardview.widget.CardView>


================================================
FILE: app/src/main/res/layout/empty_layout.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <fragment
            android:id="@+id/nav_host_fragment"
            android:name="androidx.navigation.fragment.NavHostFragment"
            android:layout_width="0dp"
            android:layout_height="0dp"
            app:defaultNavHost="true"
            app:navGraph="@navigation/mobile_navigation"
            app:layout_constraintWidth="match_parent"
            app:layout_constraintHeight="match_parent"
            app:layout_constraintStart_toEndOf="parent"
            app:layout_constraintTop_toBottomOf="parent" />
</androidx.constraintlayout.widget.ConstraintLayout>


================================================
FILE: app/src/main/res/layout/fragment_child_downloads.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:background="?attr/primaryGrayBackground"
        android:id="@+id/download_child_root"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".ui.download.DownloadFragment">

    <com.google.android.material.appbar.AppBarLayout
            android:background="@android:color/transparent"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/download_child_toolbar"
                android:paddingTop="@dimen/navbar_height"
                tools:title="Overlord"
                android:background="?attr/primaryGrayBackground"
                app:navigationIconTint="?attr/iconColor"
                app:titleTextColor="?attr/textColor"
                app:layout_scrollFlags="scroll|enterAlways"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
    </com.google.android.material.appbar.AppBarLayout>

    <androidx.recyclerview.widget.RecyclerView
            android:nextFocusUp="@id/download_child_toolbar"

            android:background="?attr/primaryBlackBackground"
            app:layout_behavior="@string/appbar_scrolling_view_behavior"
            android:padding="10dp"
            tools:listitem="@layout/download_child_episode"
            android:id="@+id/download_child_list"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
</androidx.coordinatorlayout.widget.CoordinatorLayout>


================================================
FILE: app/src/main/res/layout/fragment_downloads.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/download_root"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="?attr/primaryGrayBackground"
        tools:context=".ui.download.DownloadFragment">

    <com.google.android.material.appbar.AppBarLayout
            android:background="?attr/primaryGrayBackground"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        <!--
        For Scroll add to LinearLayout
        app:layout_scrollFlags="scroll|enterAlways"
        -->
        <LinearLayout
                android:id="@+id/download_storage_appbar"
                android:visibility="gone"
                android:layout_margin="10dp"
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

            <TextView
                    android:textColor="?attr/textColor"
                    android:layout_marginBottom="5dp"
                    android:text="@string/download_storage_text"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            <LinearLayout
                    android:layout_marginBottom="5dp"
                    android:layout_width="fill_parent"
                    android:layout_height="12dp"
                    android:orientation="horizontal">

                <View
                        android:layout_weight="0.5"
                        android:id="@+id/download_used"
                        android:background="?attr/white"
                        android:layout_width="0dp"
                        android:layout_height="match_parent" />

                <View
                        android:id="@+id/download_app"
                        android:layout_weight="0.10"
                        android:background="?attr/colorPrimary"
                        android:layout_width="0dp"
                        android:layout_height="match_parent" />

                <View
                        android:id="@+id/download_free"
                        android:layout_weight="0.10"
                        android:background="?attr/grayTextColor"
                        android:layout_width="0dp"
                        android:layout_height="match_parent" />
            </LinearLayout>

            <LinearLayout
                    android:orientation="horizontal"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                <View
                        android:layout_marginEnd="5dp"
                        android:layout_marginTop="5dp"
                        android:layout_marginBottom="5dp"
                        android:layout_gravity="center_vertical"
                        android:background="?attr/white"
                        android:layout_width="10dp"
                        android:layout_height="10dp" />

                <TextView
                        android:id="@+id/download_used_txt"
                        android:layout_gravity="center_vertical"
                        tools:text="Used â€¢ 30.58GB"
                        android:textSize="12sp"
                        android:textColor="?attr/textColor"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />

                <View
                        android:layout_margin="5dp"
                        android:layout_gravity="center_vertical"
                        android:background="?attr/colorPrimary"
                        android:layout_width="10dp"
                        android:layout_height="10dp" />

                <TextView
                        android:id="@+id/download_app_txt"
                        android:layout_gravity="center_vertical"
                        tools:text="App â€¢ 30.58GB"
                        android:textSize="12sp"
                        android:textColor="?attr/textColor"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />

                <View
                        android:layout_margin="5dp"
                        android:layout_gravity="center_vertical"
                        android:background="?attr/grayTextColor"
                        android:layout_width="10dp"
                        android:layout_height="10dp" />

                <TextView
                        android:id="@+id/download_free_txt"
                        android:textSize="12sp"
                        android:layout_gravity="center_vertical"
                        tools:text="Free â€¢ 30.58GB"
                        android:textColor="?attr/textColor"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />
            </LinearLayout>
        </LinearLayout>
    </com.google.android.material.appbar.AppBarLayout>

    <androidx.recyclerview.widget.RecyclerView
            android:nextFocusLeft="@id/nav_rail_view"
            android:descendantFocusability="afterDescendants"

            android:background="?attr/primaryBlackBackground"
            app:layout_behavior="@string/appbar_scrolling_view_behavior"
            android:padding="10dp"
            android:id="@+id/download_list"
            android:layout_width="match_parent"
            tools:listitem="@layout/download_header_episode"
            android:layout_height="match_parent" />

    <TextView
            android:id="@+id/text_no_downloads"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="8dp"
            android:layout_marginTop="8dp"
            android:layout_marginEnd="8dp"
            android:textAlignment="center"
            android:textSize="20sp"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintBottom_toBottomOf="parent" />

    <!--
    <ProgressBar
            android:visibility="visible"
            tools:visibility="gone"
            android:id="@+id/download_loading"
            android:layout_gravity="center"
            android:layout_width="50dp" android:layout_height="50dp">
    </ProgressBar>-->

    <com.facebook.shimmer.ShimmerFrameLayout
            android:id="@+id/download_loading"
            app:shimmer_base_alpha="0.2"
            app:shimmer_highlight_alpha="0.3"
            app:shimmer_duration="@integer/loading_time"
            app:shimmer_auto_start="true"
            android:paddingTop="40dp"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:orientation="vertical">

        <LinearLayout
                android:layout_marginStart="@dimen/loading_margin"
                android:layout_marginEnd="@dimen/loading_margin"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

            <include layout="@layout/loading_downloads" />

            <include layout="@layout/loading_downloads" />

            <include layout="@layout/loading_downloads" />

            <include layout="@layout/loading_downloads" />

            <include layout="@layout/loading_downloads" />

            <include layout="@layout/loading_downloads" />
        </LinearLayout>
    </com.facebook.shimmer.ShimmerFrameLayout>
</androidx.coordinatorlayout.widget.CoordinatorLayout>


================================================
FILE: app/src/main/res/layout/fragment_home.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"

        android:id="@+id/home_root"
        tools:context=".ui.home.HomeFragment">

    <FrameLayout
            android:visibility="gone"
            tools:visibility="gone"
            android:id="@+id/home_loading"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <ProgressBar
                android:layout_gravity="center"
                android:visibility="gone"
                tools:visibility="gone"
                android:layout_width="50dp"
                android:layout_height="50dp" />

        <com.facebook.shimmer.ShimmerFrameLayout
                android:id="@+id/home_loading_shimmer"
                app:shimmer_base_alpha="0.2"
                app:shimmer_highlight_alpha="0.3"
                app:shimmer_duration="@integer/loading_time"
                app:shimmer_auto_start="true"
                android:paddingTop="40dp"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_gravity="center"
                android:layout_marginTop="15dp"
                android:orientation="vertical">

            <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical">

                <FrameLayout
                        android:orientation="horizontal"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                    <androidx.cardview.widget.CardView
                            android:layout_margin="@dimen/loading_margin"
                            android:layout_gravity="center"
                            app:cardCornerRadius="@dimen/loading_radius"
                            android:background="@color/grayShimmer"
                            android:translationX="-164dp"
                            android:layout_width="125dp"
                            android:layout_height="200dp" />

                    <androidx.cardview.widget.CardView
                            android:layout_margin="@dimen/loading_margin"
                            android:layout_gravity="center"
                            app:cardCornerRadius="@dimen/loading_radius"
                            android:background="@color/grayShimmer"
                            android:layout_width="148dp"
                            android:layout_height="234dp" />

                    <androidx.cardview.widget.CardView
                            android:layout_margin="@dimen/loading_margin"
                            android:layout_gravity="center"
                            app:cardCornerRadius="@dimen/loading_radius"
                            android:background="@color/grayShimmer"
                            android:translationX="164dp"
                            android:layout_width="125dp"
                            android:layout_height="200dp" />
                </FrameLayout>

                <include layout="@layout/loading_line_short_center" />

                <LinearLayout
                        android:orientation="vertical"
                        android:layout_marginTop="@dimen/result_padding"
                        android:layout_marginStart="@dimen/result_padding"
                        android:layout_marginEnd="@dimen/result_padding"

                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                    <include layout="@layout/loading_list" />

                    <include layout="@layout/loading_list" />

                    <include layout="@layout/loading_list" />
                </LinearLayout>
            </LinearLayout>
        </com.facebook.shimmer.ShimmerFrameLayout>

        <FrameLayout
                android:id="@+id/home_loading_statusbar"
                android:layout_width="match_parent"
                android:layout_height="70dp">

            <ImageView
                    android:id="@+id/home_change_api_loading"
                    android:layout_margin="10dp"
                    android:layout_gravity="center_vertical|end"
                    android:background="?android:attr/selectableItemBackgroundBorderless"

                    android:src="@drawable/ic_baseline_keyboard_arrow_down_24"
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:contentDescription="@string/home_change_provider_img_des" />
        </FrameLayout>
    </FrameLayout>

    <LinearLayout
            android:visibility="gone"
            tools:visibility="gone"
            android:id="@+id/home_loading_error"
            android:orientation="vertical"
            android:layout_gravity="center"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <com.google.android.material.button.MaterialButton
                android:layout_gravity="center"
                style="@style/WhiteButton"

                android:layout_margin="5dp"

                app:icon="@drawable/ic_baseline_autorenew_24"
                android:text="@string/reload_error"
                android:id="@+id/home_reload_connectionerror"
                android:layout_width="wrap_content"
                android:minWidth="200dp" />

        <com.google.android.material.button.MaterialButton
                android:layout_gravity="center"
                style="@style/BlackButton"

                android:layout_margin="5dp"

                app:icon="@drawable/ic_baseline_public_24"
                android:text="@string/result_open_in_browser"
                android:id="@+id/home_reload_connection_open_in_browser"
                android:layout_width="wrap_content"
                android:minWidth="200dp" />

        <TextView
                android:layout_margin="5dp"
                android:gravity="center"
                android:layout_gravity="center"
                android:id="@+id/result_error_text"
                android:textColor="?attr/textColor"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
    </LinearLayout>

    <androidx.core.widget.NestedScrollView
            android:background="?attr/primaryBlackBackground"
            tools:visibility="visible"
            android:visibility="gone"
            android:id="@+id/home_loaded"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

            <View
                    android:background="?attr/primaryGrayBackground"
                    android:id="@+id/home_statusbar"
                    android:layout_height="wrap_content"
                    android:layout_width="match_parent" />

            <FrameLayout
                    android:id="@+id/home_settings_bar"
                    android:background="?attr/primaryGrayBackground"
                    android:layout_width="match_parent"
                    android:layout_height="70dp">

                <LinearLayout
                        android:paddingTop="10dp"
                        android:paddingBottom="10dp"

                        android:paddingStart="10dp"
                        android:paddingEnd="10dp"

                        android:orientation="horizontal"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent">

                    <androidx.cardview.widget.CardView
                            android:id="@+id/home_profile_picture_holder"
                            android:layout_marginEnd="10dp"
                            app:cardCornerRadius="100dp"
                            android:layout_gravity="center_vertical"
                            android:layout_width="40dp"
                            android:layout_height="40dp">

                        <ImageView
                                android:scaleType="centerCrop"
                                android:id="@+id/home_profile_picture"
                                android:layout_width="match_parent"
                                android:layout_height="match_parent"
                                tools:ignore="ContentDescription" />
                    </androidx.cardview.widget.CardView>

                    <FrameLayout
                            android:layout_gravity="center_vertical"
                            android:visibility="visible"
                            android:background="@drawable/search_background"
                            android:layout_width="match_parent"
                            android:layout_height="40dp">

                        <androidx.appcompat.widget.SearchView
                                android:id="@+id/home_search"
                                app:queryBackground="@color/transparent"

                                app:searchIcon="@drawable/search_icon"
                                android:paddingStart="-10dp"
                                android:iconifiedByDefault="false"
                                app:queryHint="@string/search_hint"
                                android:layout_width="match_parent"
                                android:layout_height="match_parent"
                                android:layout_gravity="center_vertical"
                                app:iconifiedByDefault="false"
                                tools:ignore="RtlSymmetry" />
                    </FrameLayout>

                    <LinearLayout
                            android:visibility="gone"
                            android:gravity="center"

                            android:orientation="vertical"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent">

                        <TextView
                                android:gravity="center_vertical"
                                android:layout_gravity="center"
                                android:id="@+id/home_provider_name"
                                android:textColor="?attr/textColor"
                                android:textSize="20sp"
                                tools:text="Hello World"
                                android:layout_width="match_parent"

                                android:layout_height="wrap_content" />

                        <TextView
                                android:gravity="center_vertical"
                                android:layout_gravity="center"
                                android:id="@+id/home_provider_meta_info"
                                android:textColor="?attr/grayTextColor"
                                android:textSize="14sp"
                                tools:text="Hello World"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content" />
                    </LinearLayout>
                </LinearLayout>

                <!--
                                <ImageView
                                        android:nextFocusDown="@id/home_main_poster_recyclerview"
                                        android:nextFocusUp="@id/nav_rail_view"
                                        android:nextFocusLeft="@id/nav_rail_view"

                                        android:id="@+id/home_change_api"
                                        android:layout_margin="10dp"
                                        android:layout_gravity="center|end"
                                        android:background="?android:attr/selectableItemBackgroundBorderless"

                                        android:src="@drawable/ic_baseline_keyboard_arrow_down_24"
                                        android:layout_width="30dp"
                                        android:layout_height="30dp"
                                        android:contentDescription="@string/home_change_provider_img_des">

                                    <requestFocus />
                                </ImageView>-->
            </FrameLayout>

            <LinearLayout
                    android:layout_marginTop="10dp"
                    android:id="@+id/home_main_holder"
                    android:orientation="vertical"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                <androidx.recyclerview.widget.RecyclerView
                        android:descendantFocusability="afterDescendants"
                        android:nextFocusUp="@id/home_change_api"
                        android:nextFocusDown="@id/home_main_info"

                        android:clipToPadding="false"
                        android:paddingStart="148dp"
                        android:paddingEnd="148dp"

                        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                        android:id="@+id/home_main_poster_recyclerview"
                        android:orientation="horizontal"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        tools:listitem="@layout/home_result_grid" />
                <!--<ImageView
                        android:foreground="@drawable/outline_drawable"
                        android:id="@+id/home_main_poster"
                        tools:src="@drawable/example_poster"
                        android:layout_gravity="center"
                        android:scaleType="centerCrop"
                        android:layout_width="150dp"
                        android:layout_height="212dp"
                        android:contentDescription="@string/home_main_poster_img_des">
                </ImageView>-->
                <TextView
                        android:id="@+id/home_main_text"
                        android:layout_gravity="center"
                        android:gravity="center"
                        tools:text="Perfect Run"
                        android:textStyle="bold"
                        android:layout_margin="5dp"
                        android:textSize="15sp"
                        android:textColor="?attr/textColor"
                        android:layout_width="match_parent"
                        android:maxLines="2"
                        android:ellipsize="end"
                        android:layout_height="40sp" />

                <LinearLayout
                        android:visibility="visible"
                        android:padding="5dp"
                        android:layout_gravity="center"
                        android:gravity="center"
                        android:orientation="horizontal"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                    <com.google.android.material.button.MaterialButton
                            android:nextFocusLeft="@id/nav_rail_view"
                            android:nextFocusUp="@id/home_main_poster_recyclerview"
                            android:nextFocusRight="@id/home_main_info"
                            android:nextFocusDown="@id/home_watch_child_more_info"

                            style="@style/WhiteButton"
                            android:visibility="visible"
                            android:layout_gravity="center"
                            android:id="@+id/home_main_play"
                            android:text="@string/home_play"

                            app:icon="@drawable/ic_baseline_play_arrow_24"
                            android:minWidth="120dp"
                            android:layout_width="wrap_content" />

                    <com.google.android.material.button.MaterialButton
                            android:nextFocusLeft="@id/home_main_play"
                            android:nextFocusUp="@id/home_main_poster_recyclerview"
                            android:nextFocusRight="@id/home_change_api"
                            android:nextFocusDown="@id/home_watch_child_more_info"

                            style="@style/BlackButton"
                            android:visibility="visible"
                            android:layout_gravity="center"
                            android:text="@string/home_info"
                            app:icon="@drawable/ic_outline_info_24"

                            android:id="@+id/home_main_info"
                            android:clickable="true"
                            android:focusable="true"

                            android:minWidth="120dp"
                            android:layout_width="wrap_content" />
                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                    android:id="@+id/home_watch_holder"
                    android:orientation="vertical"
                    android:visibility="gone"
                    tools:visibility="visible"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                <FrameLayout
                        android:nextFocusLeft="@id/nav_rail_view"
                        android:nextFocusUp="@id/home_main_info"
                        android:nextFocusDown="@id/home_watch_child_recyclerview"

                        android:foreground="?android:attr/selectableItemBackgroundBorderless"
                        android:id="@+id/home_watch_child_more_info"
                        android:padding="12dp"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                    <TextView
                            android:layout_gravity="center_vertical"
                            android:id="@+id/home_watch_parent_item_title"
                            style="@style/WatchHeaderText"
                            android:text="@string/continue_watching" />

                    <ImageView
                            app:tint="?attr/textColor"
                            android:layout_marginEnd="5dp"
                            android:layout_gravity="end|center_vertical"
                            android:src="@drawable/ic_baseline_arrow_forward_24"
                            android:layout_width="30dp"
                            android:layout_height="match_parent"
                            android:contentDescription="@string/home_more_info" />
                </FrameLayout>


                <androidx.recyclerview.widget.RecyclerView
                        android:paddingHorizontal="5dp"
                        android:clipToPadding="false"
                        android:descendantFocusability="afterDescendants"
                        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                        android:id="@+id/home_watch_child_recyclerview"
                        android:orientation="horizontal"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        tools:listitem="@layout/home_result_grid" />

            </LinearLayout>

            <LinearLayout
                    android:id="@+id/home_bookmarked_holder"
                    android:orientation="vertical"
                    android:visibility="gone"
                    tools:visibility="visible"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                <FrameLayout
                        android:nextFocusLeft="@id/nav_rail_view"
                        android:nextFocusUp="@id/home_watch_child_recyclerview"
                        android:nextFocusForward="@id/home_bookmarked_child_recyclerview"

                        android:foreground="?android:attr/selectableItemBackgroundBorderless"
                        android:id="@+id/home_bookmarked_child_more_info"
                        android:paddingTop="5dp"
                        android:paddingBottom="5dp"
                        android:paddingStart="12dp"
                        android:paddingEnd="12dp"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                    <HorizontalScrollView
                            android:fadingEdge="horizontal"
                            android:requiresFadingEdge="horizontal"
                            android:layout_marginEnd="50dp"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content">

                        <LinearLayout
                                android:orientation="horizontal"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content">

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/nav_rail_view"
                                    android:nextFocusRight="@id/home_plan_to_watch_btt"

                                    android:id="@+id/home_type_watching_btt"
                                    android:text="@string/type_watching"
                                    style="@style/RoundedSelectableButton" />

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/home_type_watching_btt"
                                    android:nextFocusRight="@id/home_type_on_hold_btt"

                                    android:id="@+id/home_plan_to_watch_btt"
                                    android:text="@string/type_plan_to_watch"
                                    style="@style/RoundedSelectableButton" />

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/home_plan_to_watch_btt"
                                    android:nextFocusRight="@id/home_type_dropped_btt"

                                    android:id="@+id/home_type_on_hold_btt"
                                    android:text="@string/type_on_hold"
                                    style="@style/RoundedSelectableButton" />

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/home_type_on_hold_btt"
                                    android:nextFocusRight="@id/home_type_completed_btt"

                                    android:id="@+id/home_type_dropped_btt"
                                    android:text="@string/type_dropped"
                                    style="@style/RoundedSelectableButton" />

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/home_type_dropped_btt"

                                    android:id="@+id/home_type_completed_btt"
                                    android:text="@string/type_completed"
                                    style="@style/RoundedSelectableButton" />
                        </LinearLayout>
                    </HorizontalScrollView>

                    <ImageView
                            app:tint="?attr/textColor"
                            android:layout_marginEnd="5dp"
                            android:layout_gravity="end|center_vertical"
                            android:src="@drawable/ic_baseline_arrow_forward_24"
                            android:layout_width="30dp"
                            android:layout_height="match_parent"
                            android:contentDescription="@string/home_more_info" />
                </FrameLayout>

                <androidx.recyclerview.widget.RecyclerView
                        android:paddingHorizontal="5dp"
                        android:clipToPadding="false"
                        android:descendantFocusability="afterDescendants"

                        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                        android:id="@+id/home_bookmarked_child_recyclerview"
                        android:orientation="horizontal"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        tools:listitem="@layout/home_result_grid" />
            </LinearLayout>

            <androidx.recyclerview.widget.RecyclerView
                    android:nextFocusLeft="@id/nav_rail_view"
                    android:descendantFocusability="afterDescendants"
                    android:id="@+id/home_master_recycler"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    tools:listitem="@layout/homepage_parent" />
        </LinearLayout>
    </androidx.core.widget.NestedScrollView>

    <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton
            android:visibility="gone"
            tools:visibility="visible"
            android:text="@string/home_source"
            android:id="@+id/home_api_fab"
            app:icon="@drawable/ic_baseline_filter_list_24"
            style="@style/ExtendedFloatingActionButton"
            android:textColor="?attr/textColor"
            tools:ignore="ContentDescription" />

    <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton
            android:visibility="gone"
            tools:visibility="visible"
            android:text="@string/home_random"
            android:id="@+id/home_random"
            android:layout_gravity="bottom|start"
            app:icon="@drawable/ic_baseline_play_arrow_24"
            style="@style/ExtendedFloatingActionButton"
            android:textColor="?attr/textColor"
            tools:ignore="ContentDescription" />
</FrameLayout>


================================================
FILE: app/src/main/res/layout/fragment_home_tv.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"

        android:id="@+id/home_root"
        tools:context=".ui.home.HomeFragment">

    <FrameLayout
            android:visibility="gone"
            tools:visibility="gone"
            android:id="@+id/home_loading"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <ProgressBar
                android:layout_gravity="center"
                android:visibility="gone"
                tools:visibility="gone"
                android:layout_width="50dp"
                android:layout_height="50dp" />

        <com.facebook.shimmer.ShimmerFrameLayout
                android:id="@+id/home_loading_shimmer"
                app:shimmer_base_alpha="0.2"
                app:shimmer_highlight_alpha="0.3"
                app:shimmer_duration="@integer/loading_time"
                app:shimmer_auto_start="true"
                android:paddingTop="40dp"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_gravity="center"
                android:layout_marginTop="15dp"
                android:orientation="vertical">

            <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical">

                <FrameLayout
                        android:orientation="horizontal"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                    <androidx.cardview.widget.CardView
                            android:layout_margin="@dimen/loading_margin"
                            android:layout_gravity="center"
                            app:cardCornerRadius="@dimen/loading_radius"
                            android:background="@color/grayShimmer"
                            android:translationX="-164dp"
                            android:layout_width="125dp"
                            android:layout_height="200dp" />

                    <androidx.cardview.widget.CardView
                            android:layout_margin="@dimen/loading_margin"
                            android:layout_gravity="center"
                            app:cardCornerRadius="@dimen/loading_radius"
                            android:background="@color/grayShimmer"
                            android:layout_width="148dp"
                            android:layout_height="234dp" />

                    <androidx.cardview.widget.CardView
                            android:layout_margin="@dimen/loading_margin"
                            android:layout_gravity="center"
                            app:cardCornerRadius="@dimen/loading_radius"
                            android:background="@color/grayShimmer"
                            android:translationX="164dp"
                            android:layout_width="125dp"
                            android:layout_height="200dp" />
                </FrameLayout>

                <include layout="@layout/loading_line_short_center" />

                <LinearLayout
                        android:orientation="vertical"
                        android:layout_marginTop="@dimen/result_padding"
                        android:layout_marginStart="@dimen/result_padding"
                        android:layout_marginEnd="@dimen/result_padding"

                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                    <include layout="@layout/loading_list" />

                    <include layout="@layout/loading_list" />

                    <include layout="@layout/loading_list" />
                </LinearLayout>
            </LinearLayout>
        </com.facebook.shimmer.ShimmerFrameLayout>

        <FrameLayout
                android:id="@+id/home_loading_statusbar"
                android:layout_width="match_parent"
                android:layout_height="70dp">

            <ImageView
                    android:id="@+id/home_change_api_loading"
                    android:layout_margin="10dp"
                    android:layout_gravity="center_vertical|end"
                    android:background="?android:attr/selectableItemBackgroundBorderless"

                    android:src="@drawable/ic_baseline_keyboard_arrow_down_24"
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:contentDescription="@string/home_change_provider_img_des" />
        </FrameLayout>
    </FrameLayout>

    <LinearLayout
            android:visibility="gone"
            tools:visibility="gone"
            android:id="@+id/home_loading_error"
            android:orientation="vertical"
            android:layout_gravity="center"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <com.google.android.material.button.MaterialButton
                android:layout_gravity="center"
                style="@style/WhiteButton"

                android:layout_margin="5dp"

                app:icon="@drawable/ic_baseline_autorenew_24"
                android:text="@string/reload_error"
                android:id="@+id/home_reload_connectionerror"
                android:layout_width="wrap_content"
                android:minWidth="200dp" />

        <com.google.android.material.button.MaterialButton
                android:layout_gravity="center"
                style="@style/BlackButton"

                android:layout_margin="5dp"

                app:icon="@drawable/ic_baseline_public_24"
                android:text="@string/result_open_in_browser"
                android:id="@+id/home_reload_connection_open_in_browser"
                android:layout_width="wrap_content"
                android:minWidth="200dp" />

        <TextView
                android:layout_margin="5dp"
                android:gravity="center"
                android:layout_gravity="center"
                android:id="@+id/result_error_text"
                android:textColor="?attr/textColor"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
    </LinearLayout>

    <androidx.core.widget.NestedScrollView
            android:background="?attr/primaryBlackBackground"
            tools:visibility="visible"
            android:visibility="gone"
            android:id="@+id/home_loaded"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

            <View
                    android:background="?attr/primaryGrayBackground"
                    android:id="@+id/home_statusbar"
                    android:layout_height="wrap_content"
                    android:layout_width="match_parent" />

            <FrameLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                <ImageView
                        android:scaleType="centerCrop"
                        tools:src="@drawable/example_poster"
                        android:id="@+id/home_blur_poster"
                        android:layout_width="match_parent"
                        android:layout_height="200dp" />

                <ImageView
                        android:id="@+id/shadow_overlay"
                        android:layout_width="match_parent"
                        android:layout_height="200dp"
                        android:background="@drawable/background_shadow" />

                <LinearLayout
                        android:layout_marginTop="100dp"
                        android:orientation="vertical"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                    <LinearLayout
                            android:paddingTop="10dp"
                            android:paddingBottom="10dp"
                            android:orientation="horizontal"
                            android:layout_width="match_parent"
                            android:layout_height="100dp">

                        <!--
                        <androidx.cardview.widget.CardView
                                android:id="@+id/home_profile_picture_holder"
                                android:layout_marginEnd="20dp"
                                app:cardCornerRadius="100dp"
                                android:layout_gravity="center_vertical"
                                android:layout_width="35dp"
                                android:layout_height="35dp">

                            <ImageView
                                    android:id="@+id/home_profile_picture"
                                    android:layout_width="match_parent"
                                    android:layout_height="match_parent"
                                    tools:ignore="ContentDescription" />
                        </androidx.cardview.widget.CardView>-->

                        <LinearLayout
                                android:orientation="vertical"
                                android:layout_width="match_parent"
                                android:layout_height="match_parent">


                            <LinearLayout
                                    android:orientation="horizontal"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content">

                                <ImageView
                                        android:nextFocusDown="@id/home_main_poster_recyclerview"
                                        android:nextFocusUp="@id/nav_rail_view"
                                        android:nextFocusLeft="@id/nav_rail_view"
                                        android:layout_gravity="center_vertical"

                                        android:id="@+id/home_change_api"
                                        android:layout_margin="10dp"
                                        android:background="?android:attr/selectableItemBackgroundBorderless"
                                        android:foreground="@drawable/outline_drawable"
                                        android:src="@drawable/ic_baseline_filter_list_24"
                                        android:layout_width="30dp"
                                        android:layout_height="30dp"
                                        android:contentDescription="@string/home_change_provider_img_des">

                                    <requestFocus />
                                </ImageView>

                                <TextView
                                        android:maxLines="1"
                                        android:ellipsize="end"
                                        android:gravity="center_vertical"
                                        android:layout_gravity="center_vertical"
                                        android:textStyle="bold"
                                        android:textSize="25sp"
                                        tools:text="The Perfect Run"
                                        android:id="@+id/home_focus_text"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content" />
                            </LinearLayout>

                            <LinearLayout
                                    android:layout_marginStart="12dp"
                                    android:orientation="horizontal"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content">

                                <TextView
                                        android:gravity="center_vertical"
                                        android:id="@+id/home_provider_name"
                                        android:textColor="?attr/grayTextColor"
                                        android:textSize="20sp"
                                        android:paddingEnd="10dp"
                                        tools:text="Hello World"
                                        android:layout_width="wrap_content"

                                        android:layout_height="wrap_content" />

                                <TextView
                                        android:gravity="center_vertical"
                                        android:id="@+id/home_provider_meta_info"
                                        android:textColor="?attr/grayTextColor"
                                        android:textSize="20sp"
                                        tools:text="Hello World"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content" />
                            </LinearLayout>
                        </LinearLayout>
                    </LinearLayout>

                    <androidx.recyclerview.widget.RecyclerView
                            android:paddingHorizontal="5dp"
                            android:clipToPadding="false"
                            android:descendantFocusability="afterDescendants"
                            app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                            android:id="@+id/home_main_poster_recyclerview"
                            android:orientation="horizontal"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            tools:listitem="@layout/home_result_grid" />
                </LinearLayout>
            </FrameLayout>


            <LinearLayout
                    android:id="@+id/home_watch_holder"
                    android:orientation="vertical"
                    android:visibility="gone"
                    tools:visibility="visible"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">


                <TextView
                        android:id="@+id/home_watch_parent_item_title"
                        android:padding="12dp"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        style="@style/WatchHeaderText"
                        android:layout_marginEnd="0dp"
                        android:text="@string/continue_watching">
                </TextView>

                <androidx.recyclerview.widget.RecyclerView
                        android:paddingHorizontal="5dp"
                        android:clipToPadding="false"
                        android:descendantFocusability="afterDescendants"
                        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                        android:id="@+id/home_watch_child_recyclerview"
                        android:orientation="horizontal"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        tools:listitem="@layout/home_result_grid" />

            </LinearLayout>

            <LinearLayout
                    android:id="@+id/home_bookmarked_holder"
                    android:orientation="vertical"
                    android:visibility="gone"
                    tools:visibility="visible"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                <HorizontalScrollView
                        android:nextFocusLeft="@id/nav_rail_view"
                        android:nextFocusUp="@id/home_watch_child_recyclerview"
                        android:nextFocusForward="@id/home_bookmarked_child_recyclerview"

                        android:foreground="?android:attr/selectableItemBackgroundBorderless"
                        android:paddingTop="5dp"
                        android:paddingBottom="5dp"
                        android:paddingStart="12dp"
                        android:paddingEnd="12dp"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"

                        android:fadingEdge="horizontal"
                        android:requiresFadingEdge="horizontal">

                        <LinearLayout
                                android:layout_gravity="center_vertical"
                                android:orientation="horizontal"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content">

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/nav_rail_view"
                                    android:nextFocusRight="@id/home_plan_to_watch_btt"

                                    android:id="@+id/home_type_watching_btt"
                                    android:text="@string/type_watching"
                                    style="@style/RoundedSelectableButton" />

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/home_type_watching_btt"
                                    android:nextFocusRight="@id/home_type_on_hold_btt"

                                    android:id="@+id/home_plan_to_watch_btt"
                                    android:text="@string/type_plan_to_watch"
                                    style="@style/RoundedSelectableButton" />

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/home_plan_to_watch_btt"
                                    android:nextFocusRight="@id/home_type_dropped_btt"

                                    android:id="@+id/home_type_on_hold_btt"
                                    android:text="@string/type_on_hold"
                                    style="@style/RoundedSelectableButton" />

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/home_type_on_hold_btt"
                                    android:nextFocusRight="@id/home_type_completed_btt"

                                    android:id="@+id/home_type_dropped_btt"
                                    android:text="@string/type_dropped"
                                    style="@style/RoundedSelectableButton" />

                            <com.google.android.material.button.MaterialButton
                                    android:nextFocusLeft="@id/home_type_dropped_btt"

                                    android:id="@+id/home_type_completed_btt"
                                    android:text="@string/type_completed"
                                    style="@style/RoundedSelectableButton" />
                        </LinearLayout>
                </HorizontalScrollView>

                <androidx.recyclerview.widget.RecyclerView
                        android:paddingHorizontal="5dp"
                        android:clipToPadding="false"
                        android:descendantFocusability="afterDescendants"

                        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                        android:id="@+id/home_bookmarked_child_recyclerview"
                        android:orientation="horizontal"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        tools:listitem="@layout/home_result_grid" />
            </LinearLayout>

            <androidx.recyclerview.widget.RecyclerView
                    android:nextFocusLeft="@id/nav_rail_view"
                    android:descendantFocusability="afterDescendants"
                    android:id="@+id/home_master_recycler"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    tools:listitem="@layout/homepage_parent_tv" />
        </LinearLayout>
    </androidx.core.widget.NestedScrollView>

    <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton
            android:visibility="gone"
            tools:visibility="visible"
            android:id="@+id/home_api_fab"
            app:icon="@drawable/ic_baseline_filter_list_24"
            style="@style/ExtendedFloatingActionButton"
            tools:ignore="ContentDescription" />
</FrameLayout>


================================================
FILE: app/src/main/res/layout/fragment_player.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:keepScreenOn="true"
        android:id="@+id/player_background"
        app:backgroundTint="@android:color/black"
        android:background="@android:color/black"
        android:screenOrientation="sensorLandscape"
        app:surface_type="texture_view">
    <!--
          app:fastforward_increment="10000"
            app:rewind_increment="10000"-->
    <com.google.android.exoplayer2.ui.PlayerView
            android:id="@+id/player_view"
            app:show_timeout="0"
            app:hide_on_touch="false"
            app:auto_show="true"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:backgroundTint="@android:color/black"
            android:background="@android:color/black"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:controller_layout_id="@layout/player_custom_layout" />

    <FrameLayout
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/player_loading_overlay"
            android:background="@android:color/black"
            android:backgroundTint="@android:color/black">

        <com.google.android.material.button.MaterialButton
                tools:visibility="visible"
                android:visibility="gone"
                android:layout_marginTop="70dp"
                android:layout_gravity="center"
                app:cornerRadius="4dp"
                android:id="@+id/overlay_loading_skip_button"
                android:text="@string/skip_loading"

                app:rippleColor="?attr/colorPrimary"
                android:textColor="?attr/textColor"
                app:iconTint="?attr/textColor"
                android:textAllCaps="false"
                app:icon="@drawable/ic_baseline_skip_next_24"
                android:backgroundTint="@color/transparent"
                style="@style/Widget.MaterialComponents.Button.OutlinedButton"
                android:layout_width="wrap_content"
                android:layout_height="45dp" />

        <ProgressBar
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:layout_gravity="center"
                android:id="@+id/main_load" />

        <FrameLayout
                android:id="@+id/video_go_back_holder_holder"
                android:layout_margin="5dp"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

            <ImageView
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:layout_gravity="center"
                    android:src="@drawable/ic_baseline_arrow_back_24"
                    app:tint="@android:color/white"
                    android:contentDescription="@string/go_back_img_des" />

            <ImageView
                    android:id="@+id/player_loading_go_back"
                    android:layout_width="70dp"
                    android:layout_height="70dp"
                    android:layout_gravity="center"
                    android:focusable="true"
                    android:clickable="true"
                    android:background="@drawable/video_tap_button_always_white"
                    android:contentDescription="@string/go_back_img_des" />
        </FrameLayout>
    </FrameLayout>

    <FrameLayout
            android:visibility="gone"
            android:paddingStart="20dp"
            android:paddingEnd="20dp"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            android:id="@+id/player_torrent_info"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintLeft_toLeftOf="parent"
                android:gravity="start"
                android:layout_marginTop="15dp"
                android:textStyle="bold"
                android:textColor="@color/white"
                android:id="@+id/video_torrent_progress"
                tools:text="78% at 18kb/s" />

        <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                app:layout_constraintLeft_toLeftOf="parent"
                android:gravity="start"
                android:layout_marginTop="0dp"
                android:textColor="@color/white"
                android:id="@+id/video_torrent_seeders"
                tools:text="17 seeders"
                app:layout_constraintTop_toBottomOf="@+id/player_video_title" />
    </FrameLayout>
</androidx.constraintlayout.widget.ConstraintLayout>


================================================
FILE: app/src/main/res/layout/fragment_player_tv.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:keepScreenOn="true"
        android:id="@+id/player_background"
        app:backgroundTint="@android:color/black"
        android:background="@android:color/black"
        android:screenOrientation="sensorLandscape"
        app:surface_type="texture_view">
    <!--
          app:fastforward_increment="10000"
            app:rewind_increment="10000"-->
    <com.google.android.exoplayer2.ui.PlayerView
            android:id="@+id/player_view"
            app:show_timeout="0"
            app:hide_on_touch="false"
            app:auto_show="true"
            android:layout_width="match_parent"
            android:layout_height="match_parent"

            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:controller_layout_id="@layout/player_custom_layout_tv" />

    <FrameLayout
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/player_loading_overlay"
            android:background="@android:color/black"
            android:backgroundTint="@android:color/black">

        <com.google.android.material.button.MaterialButton
                android:nextFocusUp="@id/player_loading_go_back"
                android:nextFocusLeft="@id/player_loading_go_back"

                tools:visibility="visible"
                android:visibility="gone"
                android:layout_marginTop="70dp"
                android:layout_gravity="center"
                android:id="@+id/overlay_loading_skip_button"
                android:text="@string/skip_loading"
                android:focusable="true"
                android:clickable="true"
                android:focusableInTouchMode="true"

                app:icon="@drawable/ic_baseline_skip_next_24"
                style="@style/VideoButtonTV"
                android:layout_width="wrap_content" />

        <ProgressBar
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:layout_gravity="center"
                android:id="@+id/main_load" />

        <FrameLayout
                android:id="@+id/video_go_back_holder_holder"
                android:layout_margin="5dp"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

            <ImageView
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:layout_gravity="center"
                    android:src="@drawable/ic_baseline_arrow_back_24"
                    app:tint="@android:color/white" />

            <ImageView
                    android:nextFocusRight="@id/overlay_loading_skip_button"
                    android:nextFocusDown="@id/overlay_loading_skip_button"
                    android:focusableInTouchMode="true"

                    android:id="@+id/player_loading_go_back"
                    android:layout_width="70dp"
                    android:layout_height="70dp"
                    android:layout_gravity="center"
                    android:focusable="true"
                    android:clickable="true"
                    android:background="@drawable/video_tap_button_always_white" />
        </FrameLayout>
    </FrameLayout>

    <FrameLayout
            android:visibility="gone"
            android:paddingStart="20dp"
            android:paddingEnd="20dp"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            android:id="@+id/player_torrent_info"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintLeft_toLeftOf="parent"
                android:gravity="start"
                android:layout_marginTop="15dp"
                android:textStyle="bold"
                android:textColor="@color/white"
                android:id="@+id/video_torrent_progress"
                tools:text="78% at 18kb/s" />

        <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                app:layout_constraintLeft_toLeftOf="parent"
                android:gravity="start"
                android:layout_marginTop="0dp"
                android:textColor="@color/white"
                android:id="@+id/video_torrent_seeders"
                tools:text="17 seeders"
                app:layout_constraintTop_toBottomOf="@+id/player_video_title" />
    </FrameLayout>
</androidx.constraintlayout.widget.ConstraintLayout>


================================================
FILE: app/src/main/res/layout/fragment_result.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/result_root"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="?attr/primaryBlackBackground"
        android:clickable="true"
        android:focusable="true">

    <com.facebook.shimmer.ShimmerFrameLayout
            android:id="@+id/result_loading"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:orientation="vertical"
            app:shimmer_auto_start="true"
            app:shimmer_base_alpha="0.2"
            app:shimmer_duration="@integer/loading_time"
            app:shimmer_highlight_alpha="0.3"
            tools:visibility="gone">

        <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_margin="@dimen/result_padding"
                android:orientation="vertical">

            <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_marginBottom="@dimen/loading_margin"
                    android:orientation="horizontal">

                <include layout="@layout/loading_poster" />

                <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:layout_marginStart="@dimen/loading_margin"
                        android:layout_marginEnd="@dimen/loading_margin"
                        android:orientation="vertical">

                    <include layout="@layout/loading_line" />

                    <include layout="@layout/loading_line" />

                    <include layout="@layout/loading_line" />

                    <include layout="@layout/loading_line" />

                    <include layout="@layout/loading_line_short" />
                </LinearLayout>
            </LinearLayout>

            <ImageView
                    android:layout_width="match_parent"
                    android:layout_height="20dp"
                    tools:ignore="ContentDescription" />

            <include layout="@layout/loading_episode" />

            <include layout="@layout/loading_episode" />

            <include layout="@layout/loading_episode" />
        </LinearLayout>
    </com.facebook.shimmer.ShimmerFrameLayout>
    <!--<ProgressBar
            android:visibility="visible"
            tools:visibility="gone"
            android:id="@+id/result_loading"
            android:layout_gravity="center"
            android:layout_width="50dp" android:layout_height="50dp">
    </ProgressBar>-->
    <LinearLayout
            android:id="@+id/result_loading_error"

            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:orientation="vertical"
            android:visibility="gone"
            tools:visibility="gone">

        <com.google.android.material.button.MaterialButton
                android:id="@+id/result_reload_connectionerror"
                style="@style/WhiteButton"

                android:layout_width="wrap_content"

                android:layout_gravity="center"
                android:layout_margin="5dp"
                android:minWidth="200dp"
                android:text="@string/reload_error"
                app:icon="@drawable/ic_baseline_autorenew_24" />

        <com.google.android.material.button.MaterialButton
                android:id="@+id/result_reload_connection_open_in_browser"
                style="@style/BlackButton"

                android:layout_width="wrap_content"

                android:layout_gravity="center"
                android:layout_margin="5dp"
                android:minWidth="200dp"
                android:text="@string/result_open_in_browser"
                app:icon="@drawable/ic_baseline_public_24" />

        <TextView
                android:id="@+id/result_error_text"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_margin="5dp"
                android:gravity="center"
                android:textColor="?attr/textColor" />
    </LinearLayout>

    <FrameLayout
            android:id="@+id/result_finish_loading"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:visibility="gone"
            tools:visibility="visible">

        <FrameLayout
                android:id="@+id/result_poster_blur_holder"

                android:layout_width="match_parent"
                android:layout_height="230dp"
                android:visibility="visible">

            <ImageView
                    android:id="@+id/result_poster_blur"

                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:alpha="0"
                    android:background="?attr/primaryGrayBackground"
                    android:scaleType="centerCrop"
                    tools:ignore="ContentDescription"
                    tools:src="@drawable/example_poster" />

            <ImageView
                    android:layout_width="match_parent"
                    android:layout_height="30dp"
                    android:layout_gravity="bottom"
                    android:src="@drawable/background_shadow"
                    tools:ignore="ContentDescription" />
        </FrameLayout>

        <androidx.core.widget.NestedScrollView
                android:id="@+id/result_scroll"
                android:layout_width="match_parent"

                android:layout_height="wrap_content"
                android:background="?attr/primaryGrayBackground">

            <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="?attr/primaryBlackBackground"
                    android:orientation="vertical">

                <!--
                <FrameLayout
                        android:background="?attr/primaryGrayBackground"
                        android:paddingStart="@dimen/result_padding"
                        android:paddingEnd="@dimen/result_padding"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                    <ImageView
                            android:nextFocusDown="@id/result_bookmark_button"
                            android:nextFocusRight="@id/result_share"
                            android:background="?android:attr/selectableItemBackgroundBorderless"

                            android:id="@+id/result_back"
                            android:clickable="true"
                            android:focusable="true"

                            android:layout_width="30dp"
                            android:layout_height="30dp"
                            android:layout_gravity="center_vertical|start"
                            android:src="@drawable/ic_baseline_arrow_back_24"
                            android:contentDescription="@string/go_back"
                            app:tint="?attr/white" />

                    <LinearLayout
                            android:gravity="end"
                            android:layout_width="match_parent"
                            android:layout_height="50dp"
                            android:id="@+id/media_route_button_holder"
                            android:layout_gravity="center_vertical|end">

                        <androidx.mediarouter.app.MediaRouteButton
                                android:layout_gravity="end|center_vertical"
                                android:id="@+id/media_route_button"
                                android:layout_width="50dp"
                                android:layout_height="50dp"
                                android:mediaRouteTypes="user"
                                android:visibility="gone"
                                app:mediaRouteButtonTint="?attr/textColor" />


                        <ImageView
                                android:nextFocusUp="@id/result_back"
                                android:nextFocusDown="@id/result_descript"
                                android:nextFocusLeft="@id/result_add_sync"
                                android:nextFocusRight="@id/result_openinbrower"

                                android:id="@+id/result_share"
                                android:layout_width="25dp"
                                android:layout_height="25dp"
                                android:layout_marginEnd="10dp"
                                android:elevation="10dp"

                                android:background="?android:attr/selectableItemBackgroundBorderless"
                                android:src="@drawable/ic_outline_share_24"
                                android:layout_gravity="end|center_vertical"
                                android:contentDescription="@string/result_share"
                                app:tint="?attr/textColor" />

                        <ImageView
                                android:nextFocusUp="@id/result_back"
                                android:nextFocusDown="@id/result_descript"
                                android:nextFocusLeft="@id/result_share"
                                android:nextFocusRight="@id/result_search"

                                android:id="@+id/result_openinbrower"
                                android:layout_width="25dp"
                                android:layout_height="25dp"
                                android:layout_margin="5dp"
                                android:elevation="10dp"

                                android:background="?android:attr/selectableItemBackgroundBorderless"
                                android:src="@drawable/ic_baseline_public_24"
                                android:layout_gravity="end|center_vertical"
                                android:contentDescription="@string/result_open_in_browser"
                                app:tint="?attr/textColor" />

                        <ImageView
                                android:nextFocusUp="@id/result_back"
                                android:nextFocusDown="@id/result_descript"
                                android:nextFocusLeft="@id/result_openinbrower"
                                android:nextFocusRight="@id/result_bookmark_button"

                                android:id="@+id/result_search"
                                android:layout_width="30dp"
                                android:layout_height="30dp"
                                android:layout_margin="5dp"
                                android:elevation="10dp"

                                android:background="?android:attr/selectableItemBackgroundBorderless"
                                android:src="@drawable/search_icon"
                                android:layout_gravity="end|center_vertical"
                                android:contentDescription="@string/result_open_in_browser"
                                app:tint="?attr/textColor" />
                    </LinearLayout>
                </FrameLayout>-->

                <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:clipToPadding="false"
                        android:orientation="vertical"
                        android:paddingStart="@dimen/result_padding"
                        android:paddingEnd="@dimen/result_padding">

                    <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="10dp"
                            android:layout_marginBottom="15dp"
                            android:orientation="horizontal"
                            android:visibility="visible">

                        <androidx.cardview.widget.CardView
                                android:id="@+id/result_poster_holder"
                                android:layout_width="100dp"
                                android:layout_height="140dp"
                                app:cardCornerRadius="@dimen/rounded_image_radius">

                            <ImageView
                                    android:id="@+id/result_poster"

                                    android:layout_width="match_parent"
                                    android:layout_height="match_parent"
                                    android:contentDescription="@string/result_poster_img_des"
                                    android:foreground="@drawable/outline_drawable"
                                    android:scaleType="centerCrop"
                                    tools:src="@drawable/example_poster" />
                        </androidx.cardview.widget.CardView>

                        <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="match_parent"
                                android:layout_marginStart="10dp"
                                android:orientation="vertical">

                            <TextView
                                    android:id="@+id/result_title"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_marginBottom="5dp"
                                    android:maxLines="2"
                                    android:textColor="?attr/textColor"
                                    android:textSize="20sp"
                                    android:textStyle="bold"
                                    tools:text="The Perfect Run The Perfect Run" />

                            <com.lagradost.cloudstream3.widget.FlowLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    app:itemSpacing="10dp">

                                <com.google.android.material.button.MaterialButton
                                        android:id="@+id/result_meta_site"
                                        style="@style/SmallBlackButton"
                                        android:layout_gravity="center_vertical"
                                        tools:text="Gogoanime" />

                                <TextView
                                        android:id="@+id/result_meta_type"
                                        style="@style/ResultInfoText"
                                        tools:text="Movie" />

                                <TextView
                                        android:id="@+id/result_meta_year"
                                        style="@style/ResultInfoText"
                                        tools:text="2022" />

                                <TextView
                                        android:id="@+id/result_meta_rating"
                                        style="@style/ResultInfoText"
                                        tools:text="Rated: 8.5/10.0" />

                                <TextView
                                        android:id="@+id/result_meta_status"
                                        style="@style/ResultInfoText"
                                        tools:text="Ongoing" />

                                <TextView
                                        android:id="@+id/result_meta_duration"
                                        style="@style/ResultInfoText"
                                        tools:text="121min" />
                            </com.lagradost.cloudstream3.widget.FlowLayout>

                            <FrameLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="match_parent">

                                <TextView
                                        android:id="@+id/result_description"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:foreground="@drawable/outline_drawable"
                                        android:nextFocusUp="@id/result_back"
                                        android:nextFocusDown="@id/result_bookmark_button"

                                        android:paddingTop="5dp"
                                        android:paddingBottom="0dp"
                                        android:textColor="?attr/textColor"
                                        android:textSize="15sp"
                                        tools:text="Ryan Quicksave Romano is an eccentric adventurer with a strange power: he can create a save-point in time and redo his life whenever he dies. Arriving in New Rome, the glitzy capital of sin of a rebuilding Europe, he finds the city torn between mega-corporations, sponsored heroes, superpowered criminals, and true monsters. It's a time of chaos, where potions can grant the power to rule the world and dangers lurk everywhere. " />

                                <ImageView
                                        android:layout_width="match_parent"
                                        android:layout_height="30dp"
                                        android:layout_gravity="bottom"
                                        android:src="@drawable/background_shadow"
                                        tools:ignore="ContentDescription" />
                            </FrameLayout>
                        </LinearLayout>
                    </LinearLayout>


                    <com.google.android.material.button.MaterialButton
                            android:id="@+id/result_bookmark_button"
                            style="@style/BlackButton"
                            android:layout_width="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginStart="0dp"
                            android:layout_marginTop="0dp"

                            android:layout_marginBottom="10dp"
                            android:backgroundTint="?attr/primaryBlackBackground"

                            android:minWidth="100dp"
                            android:nextFocusLeft="@id/result_back"
                            android:nextFocusRight="@id/result_search"
                            android:nextFocusUp="@id/result_description"

                            android:nextFocusDown="@id/result_cast_items"
                            android:paddingTop="0dp"
                            app:cornerRadius="4dp"
                            app:icon="@drawable/ic_baseline_bookmark_24"
                            tools:text="Bookmark"
                            tools:visibility="visible" />

                    <TextView
                            android:id="@+id/result_cast_text"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="5dp"
                            android:ellipsize="end"
                            android:maxLines="2"
                            android:textColor="?attr/grayTextColor"
                            android:textSize="15sp"
                            tools:text="Cast: Joe Ligma" />

                    <androidx.recyclerview.widget.RecyclerView
                            android:nextFocusUp="@id/result_bookmark_button"
                            android:nextFocusDown="@id/result_play_movie"

                            android:id="@+id/result_cast_items"
                            android:layout_width="match_parent"
                            android:descendantFocusability="afterDescendants"
                            android:layout_height="wrap_content"
                            android:fadingEdge="horizontal"
                            android:focusableInTouchMode="false"
                            android:focusable="false"
                            android:orientation="horizontal"
                            android:paddingTop="5dp"
                            android:requiresFadingEdge="horizontal"
                            app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                            tools:itemCount="2"
                            tools:listitem="@layout/cast_item" />

                    <TextView
                            android:id="@+id/result_vpn"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:textColor="?attr/grayTextColor"
                            android:textSize="15sp"
                            tools:text="@string/vpn_torrent" />

                    <TextView
                            android:id="@+id/result_info"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="5dp"
                            android:textColor="?attr/grayTextColor"
                            android:textSize="15sp"
                            tools:text="@string/provider_info_meta" />

                    <TextView
                            android:id="@+id/result_tag_holder"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="10dp"
                            android:layout_marginBottom="10dp"
                            android:text="@string/result_tags"
                            android:textColor="?attr/textColor"
                            android:textSize="17sp"
                            android:textStyle="normal"
                            android:visibility="gone" />


                    <com.lagradost.cloudstream3.widget.FlowLayout
                            android:id="@+id/result_tag"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content" />

                    <TextView
                            android:id="@+id/result_coming_soon"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:gravity="center"
                            android:paddingTop="50dp"
                            android:text="@string/coming_soon"
                            android:textColor="?attr/textColor"
                            android:textSize="20sp"
                            android:textStyle="bold"
                            android:visibility="gone" />

                    <LinearLayout
                            android:id="@+id/result_data_holder"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical">

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/result_add_sync"
                                style="@style/WhiteButton"
                                android:layout_width="match_parent"
                                android:layout_gravity="center_vertical"
                                android:layout_marginStart="0dp"

                                android:layout_marginBottom="10dp"
                                android:text="@string/add_sync"
                                android:visibility="gone"
                                app:icon="@drawable/ic_baseline_add_24" />

                        <LinearLayout
                                android:id="@+id/result_movie_parent"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="5dp"
                                android:orientation="vertical"
                                tools:visibility="visible">

                            <com.google.android.material.button.MaterialButton
                                    android:id="@+id/result_play_movie"
                                    style="@style/WhiteButton"
                                    android:layout_width="match_parent"

                                    android:layout_gravity="center_vertical"
                                    android:layout_marginStart="0dp"
                                    android:layout_marginEnd="0dp"
                                    android:layout_marginBottom="10dp"
                                    android:nextFocusUp="@id/result_bookmark_button"
                                    android:nextFocusDown="@id/result_download_movie"
                                    android:text="@string/play_movie_button"
                                    android:visibility="visible"
                                    app:icon="@drawable/ic_baseline_play_arrow_24">

                                <requestFocus />

                            </com.google.android.material.button.MaterialButton>


                            <!--<com.google.android.material.button.MaterialButton
                                    android:nextFocusUp="@id/result_play_movie"
                                    android:nextFocusDown="@id/result_season_button"
                                    android:layout_marginBottom="10dp"

                                    android:id="@+id/result_download_movie"
                                    style="@style/BlackButton"
                                    android:layout_marginStart="0dp"
                                    android:layout_marginEnd="0dp"
                                    android:visibility="visible"
                                    android:layout_gravity="center_vertical"
                                    tools:text="Downloading"
                                    tools:icon="@drawable/netflix_download"

                                    android:clickable="true"
                                    android:focusable="true"
                                    android:layout_width="match_parent" />-->

                            <FrameLayout
                                    android:id="@+id/result_movie_progress_downloaded_holder"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content">

                                <com.google.android.material.button.MaterialButton
                                        android:id="@+id/result_download_movie"
                                        style="@style/BlackButton"

                                        android:layout_width="match_parent"
                                        android:layout_gravity="center_vertical"
                                        android:layout_marginStart="0dp"
                                        android:layout_marginEnd="0dp"
                                        android:clickable="true"
                                        android:focusable="true"

                                        android:nextFocusUp="@id/result_play_movie"
                                        android:nextFocusDown="@id/result_season_button"
                                        android:visibility="visible" />

                                <LinearLayout
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:layout_gravity="center"
                                        android:gravity="center"
                                        android:orientation="horizontal">

                                    <androidx.core.widget.ContentLoadingProgressBar
                                            android:id="@+id/result_movie_progress_downloaded"
                                            style="?android:attr/progressBarStyleHorizontal"
                                            android:layout_width="25dp"
                                            android:layout_height="25dp"
                                            android:layout_gravity="end|center_vertical"
                                            android:layout_margin="5dp"
                                            android:background="@drawable/circle_shape"
                                            android:indeterminate="false"
                                            android:max="100"
                                            android:paddingStart="5dp"
                                            android:paddingEnd="5dp"
                                            android:progress="30"
                                            android:progressDrawable="@drawable/circular_progress_bar_filled"
                                            android:visibility="visible" />

                                    <ImageView
                                            android:id="@+id/result_movie_download_icon"
                                            android:layout_width="30dp"
                                            android:layout_height="wrap_content"
                                            android:layout_gravity="center"
                                            android:background="?selectableItemBackgroundBorderless"
                                            android:contentDescription="@string/download"
                                            android:src="@drawable/ic_baseline_play_arrow_24"
                                            android:visibility="visible"
                                            app:tint="?attr/white" />

                                    <TextView
                                            android:id="@+id/result_movie_download_text"
                                            android:layout_width="wrap_content"
                                            android:layout_height="match_parent"
                                            android:gravity="center"
                                            android:letterSpacing="0.09"
                                            android:textAllCaps="false"
                                            android:textColor="?attr/textColor"
                                            android:textSize="15sp"
                                            android:textStyle="bold"
                                            tools:text="Downloading" />

                                    <TextView
                                            android:id="@+id/result_movie_download_text_precentage"
                                            android:layout_width="wrap_content"
                                            android:layout_height="match_parent"
                                            android:gravity="center"
                                            android:letterSpacing="0.09"
                                            android:paddingStart="5dp"
                                            android:paddingEnd="5dp"
                                            android:textAllCaps="false"
                                            android:textColor="?attr/textColor"
                                            android:textSize="15sp"
                                            android:textStyle="bold"
                                            android:visibility="gone"
                                            tools:text="68%" />
                                </LinearLayout>
                            </FrameLayout>


                            <!--<androidx.core.widget.ContentLoadingProgressBar
                                    android:layout_width="match_parent"
                                    android:layout_height="20dp"
                                    tools:progress="50"
                                    android:id="@+id/result_movie_progress_downloaded"
                                    android:indeterminate="false"
                                    style="?android:attr/progressBarStyleHorizontal"
                                    android:progressBackgroundTint="?attr/colorPrimary"
                                    android:max="100"
                                    android:layout_gravity="end|center_vertical"
                                    android:progress="0"
                                    android:visibility="gone"
                                    tools:visibility="visible" />
    -->
                            <!--  <TextView
                                      android:id="@+id/result_movie_text_progress"
                                      android:layout_gravity="center_vertical"
                                      android:gravity="center_vertical"
                                      tools:text="128MB / 237MB"
                                      android:textColor="?attr/grayTextColor"
                                      android:layout_width="wrap_content"
                                      android:layout_height="match_parent" />-->
                        </LinearLayout>

                        <LinearLayout
                                android:id="@+id/result_series_parent"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="5dp"
                                android:orientation="vertical"
                                android:visibility="gone"
                                tools:visibility="visible">

                            <com.google.android.material.button.MaterialButton
                                    android:id="@+id/result_resume_series_button"
                                    style="@style/WhiteButton"
                                    android:layout_width="match_parent"

                                    android:layout_gravity="center_vertical"
                                    android:layout_marginStart="0dp"
                                    android:layout_marginEnd="0dp"
                                    android:layout_marginBottom="10dp"
                                    android:nextFocusUp="@id/result_bookmark_button"
                                    android:nextFocusDown="@id/result_download_movie"
                                    android:text="@string/resume"
                                    android:visibility="visible"
                                    app:icon="@drawable/ic_baseline_play_arrow_24"
                                    tools:visibility="visible" />

                            <com.google.android.material.button.MaterialButton
                                    android:id="@+id/result_next_series_button"
                                    style="@style/WhiteButton"
                                    android:layout_width="match_parent"

                                    android:layout_gravity="center_vertical"
                                    android:layout_marginStart="0dp"
                                    android:layout_marginEnd="0dp"
                                    android:layout_marginBottom="10dp"
                                    android:nextFocusUp="@id/result_bookmark_button"
                                    android:nextFocusDown="@id/result_download_movie"
                                    android:text="@string/next_episode"
                                    android:visibility="gone"
                                    app:icon="@drawable/cast_ic_mini_controller_skip_next" />

                            <TextView
                                    android:id="@+id/result_resume_series_title"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:textColor="?attr/textColor"
                                    android:textSize="17sp"
                                    android:textStyle="bold"
                                    tools:text="S1E1 Episode 1" />
                        </LinearLayout>

                        <LinearLayout
                                android:id="@+id/result_resume_progress_holder"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="horizontal"
                                android:paddingTop="10dp"
                                android:visibility="gone"
                                tools:visibility="visible">

                            <androidx.core.widget.ContentLoadingProgressBar
                                    android:id="@+id/result_resume_series_progress"
                                    style="?android:attr/progressBarStyleHorizontal"
                                    android:layout_width="match_parent"
                                    android:layout_height="20dp"
                                    android:layout_gravity="end|center_vertical"
                                    android:layout_weight="1"
                                    android:indeterminate="false"
                                    android:max="100"
                                    android:progress="0"
                                    android:progressBackgroundTint="?attr/colorPrimary"
                                    android:visibility="visible"
                                    tools:progress="50"
                                    tools:visibility="visible" />

                            <TextView
                                    android:id="@+id/result_resume_series_progress_text"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_gravity="center"
                                    android:layout_weight="0"
                                    android:gravity="center"
                                    android:paddingStart="10dp"
                                    android:textColor="?attr/grayTextColor"
                                    tools:ignore="RtlSymmetry"
                                    tools:text="69m\nremaining" />
                        </LinearLayout>

                        <LinearLayout
                                android:id="@+id/result_episodes_tab"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical">

                            <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:layout_marginBottom="10dp"
                                    android:gravity="center_vertical"
                                    android:orientation="horizontal">

                                <com.google.android.material.button.MaterialButton
                                        android:id="@+id/result_season_button"
                                        style="@style/MultiSelectButton"
                                        android:layout_gravity="center_vertical"
                                        android:layout_marginStart="0dp"
                                        android:nextFocusLeft="@id/result_episode_select"
                                        android:nextFocusRight="@id/result_episode_select"
                                        android:nextFocusUp="@id/result_description"
                                        android:nextFocusDown="@id/result_episodes"
                                        android:visibility="gone"
                                        tools:text="Season 1"
                                        tools:visibility="visible" />

                                <com.google.android.material.button.MaterialButton
                                        android:id="@+id/result_episode_select"
                                        style="@style/MultiSelectButton"

                                        android:layout_gravity="center_vertical"
                                        android:layout_marginStart="0dp"
                                        android:nextFocusLeft="@id/result_season_button"
                                        android:nextFocusRight="@id/result_season_button"

                                        android:nextFocusUp="@id/result_description"
                                        android:nextFocusDown="@id/result_episodes"
                                        android:visibility="gone"
                                        tools:text="50-100"
                                        tools:visibility="visible" />

                                <com.google.android.material.button.MaterialButton
                                        android:id="@+id/result_dub_select"
                                        style="@style/MultiSelectButton"

                                        android:layout_gravity="center_vertical"
                                        android:layout_marginStart="0dp"
                                        android:nextFocusLeft="@id/result_season_button"
                                        android:nextFocusRight="@id/result_season_button"

                                        android:nextFocusUp="@id/result_description"
                                        android:nextFocusDown="@id/result_episodes"
                                        android:visibility="gone"
                                        tools:text="Dubbed"
                                        tools:visibility="visible" />

                                <TextView
                                        android:id="@+id/result_episodes_text"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_gravity="center_vertical"
                                        android:paddingTop="10dp"
                                        android:paddingBottom="10dp"
                                        android:textColor="?attr/textColor"
                                        android:textSize="17sp"
                                        android:textStyle="normal"
                                        tools:text="8 Episodes" />
                            </LinearLayout>

                            <com.facebook.shimmer.ShimmerFrameLayout
                                    android:id="@+id/result_episode_loading"
                                    android:layout_width="match_parent"
                                    android:layout_height="match_parent"
                                    android:layout_gravity="center"
                                    android:layout_marginTop="15dp"
                                    android:orientation="vertical"
                                    app:shimmer_auto_start="true"
                                    app:shimmer_base_alpha="0.2"
                                    app:shimmer_duration="@integer/loading_time"
                                    app:shimmer_highlight_alpha="0.3"
                                    tools:visibility="visible">

                                <LinearLayout
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:orientation="vertical">

                                    <include layout="@layout/loading_episode" />

                                    <include layout="@layout/loading_episode" />

                                    <include layout="@layout/loading_episode" />

                                    <include layout="@layout/loading_episode" />
                                </LinearLayout>
                            </com.facebook.shimmer.ShimmerFrameLayout>
                            <!--<androidx.core.widget.ContentLoadingProgressBar
                                    android:id="@+id/result_episode_loading"

                                    style="@style/Widget.AppCompat.ProgressBar"
                                    android:layout_gravity="center"
                                    android:layout_width="50dp"
                                    android:layout_height="50dp" />-->

                            <androidx.recyclerview.widget.RecyclerView
                                    android:id="@+id/result_episodes"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="0dp"
                                    android:clipToPadding="false"
                                    android:descendantFocusability="afterDescendants"
                                    android:paddingBottom="100dp"
                                    tools:listitem="@layout/result_episode" />
                        </LinearLayout>
                    </LinearLayout>

                </LinearLayout>
            </LinearLayout>
        </androidx.core.widget.NestedScrollView>

    </FrameLayout>


    <!--
    <androidx.cardview.widget.CardView
            android:layout_width="100dp"
            android:layout_height="150dp"
            app:cardCornerRadius="@dimen/roundedImageRadius"
            android:elevation="10dp"
    >
        <ImageView
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:scaleType="centerCrop"
                android:id="@+id/result_poster"
                android:clickable="true"
                android:focusable="true"
                tools:src="@drawable/example_poster"
                android:foreground="?android:attr/selectableItemBackgroundBorderless"
                android:contentDescription="@string/search_poster_descript"/>
    </androidx.cardview.widget.CardView>-->

</FrameLayout>


================================================
FILE: app/src/main/res/layout/fragment_result_swipe.xml
================================================
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <FrameLayout
            android:id="@+id/result_top_bar"
            android:background="?attr/primaryGrayBackground"
            android:paddingStart="@dimen/result_padding"
            android:paddingEnd="@dimen/result_padding"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        <LinearLayout
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:layout_gravity="center_vertical"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
            <ImageView
                    android:nextFocusDown="@id/result_bookmark_button"
                    android:nextFocusRight="@id/result_share"
                    android:background="?android:attr/selectableItemBackgroundBorderless"

                    android:id="@+id/result_back"
                    android:clickable="true"
                    android:focusable="true"

                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:layout_gravity="center_vertical|start"
                    android:src="@drawable/ic_baseline_arrow_back_24"
                    android:contentDescription="@string/go_back"
                    app:tint="?attr/white" />
            <androidx.recyclerview.widget.RecyclerView
                    android:paddingStart="10dp"
                    android:paddingEnd="10dp"
                    android:id="@+id/result_mini_sync"
                    android:layout_width="match_parent"
                    android:descendantFocusability="afterDescendants"
                    android:layout_height="wrap_content"
                    android:fadingEdge="horizontal"
                    android:focusableInTouchMode="false"
                    android:focusable="false"
                    android:layout_gravity="center"
                    android:orientation="horizontal"
                    android:paddingTop="5dp"
                    android:requiresFadingEdge="horizontal"
                    app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                    tools:itemCount="2"
                    tools:listitem="@layout/result_mini_image" />
        </LinearLayout>

        <LinearLayout
                android:gravity="end"
                android:layout_width="match_parent"
                android:layout_height="50dp"
                android:id="@+id/media_route_button_holder"
                android:layout_gravity="center_vertical|end">

            <androidx.mediarouter.app.MediaRouteButton
                    android:layout_gravity="end|center_vertical"
                    android:id="@+id/media_route_button"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:mediaRouteTypes="user"
                    android:visibility="gone"
                    app:mediaRouteButtonTint="?attr/textColor" />

            <ImageView
                    android:nextFocusUp="@id/result_back"
                    android:nextFocusDown="@id/result_description"
                    android:nextFocusLeft="@id/result_add_sync"
                    android:nextFocusRight="@id/result_open_in_browser"

                    android:id="@+id/result_share"
                    android:layout_width="25dp"
                    android:layout_height="25dp"
                    android:layout_marginEnd="10dp"
                    android:elevation="10dp"

                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_outline_share_24"
                    android:layout_gravity="end|center_vertical"
                    android:contentDescription="@string/result_share"
                    app:tint="?attr/textColor" />

            <ImageView
                    android:nextFocusUp="@id/result_back"
                    android:nextFocusDown="@id/result_description"
                    android:nextFocusLeft="@id/result_share"
                    android:nextFocusRight="@id/result_search"

                    android:id="@+id/result_open_in_browser"
                    android:layout_width="25dp"
                    android:layout_height="25dp"
                    android:layout_margin="5dp"
                    android:elevation="10dp"

                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_baseline_public_24"
                    android:layout_gravity="end|center_vertical"
                    android:contentDescription="@string/result_open_in_browser"
                    app:tint="?attr/textColor" />

            <ImageView
                    android:nextFocusUp="@id/result_back"
                    android:nextFocusDown="@id/result_description"
                    android:nextFocusLeft="@id/result_open_in_browser"
                    android:nextFocusRight="@id/result_recommendations_btt"

                    android:id="@+id/result_search"
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:layout_margin="5dp"
                    android:elevation="10dp"

                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/search_icon"
                    android:layout_gravity="end|center_vertical"
                    android:contentDescription="@string/result_open_in_browser"
                    app:tint="?attr/textColor" />
            <ImageView
                    tools:visibility="visible"
                    android:visibility="gone"
                    android:nextFocusUp="@id/result_back"
                    android:nextFocusDown="@id/result_description"
                    android:nextFocusLeft="@id/result_search"
                    android:nextFocusRight="@id/result_bookmark_button"

                    android:id="@+id/result_recommendations_btt"
                    android:layout_width="25dp"
                    android:layout_height="25dp"
                    android:layout_margin="5dp"
                    android:elevation="10dp"

                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/baseline_list_alt_24"
                    android:layout_gravity="end|center_vertical"
                    android:contentDescription="@string/result_open_in_browser"
                    app:tint="?attr/textColor" />
        </LinearLayout>
    </FrameLayout>

    <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <com.discord.panels.OverlappingPanelsLayout
                android:id="@+id/result_overlapping_panels"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

            <!-- Set layout_gravity on the start panel to "start" -->
            <FrameLayout
                    android:visibility="gone"
                    android:id="@+id/start_panel"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_gravity="start">

                <include layout="@layout/result_sync"/>
            </FrameLayout>

            <FrameLayout
                    android:id="@+id/center_panel"
                    android:layout_gravity="center"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent">

                <include layout="@layout/fragment_result" />

            </FrameLayout>

            <!-- Set layout_gravity on the end panel to "end" -->
            <FrameLayout
                    android:id="@+id/end_panel"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_gravity="end">

                <include layout="@layout/result_recommendations" />
            </FrameLayout>
        </com.discord.panels.OverlappingPanelsLayout>

        <LinearLayout
                android:layout_gravity="bottom"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

            <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton
                    android:visibility="gone"
                    tools:visibility="visible"
                    android:id="@+id/result_bookmark_fab"
                    app:icon="@drawable/ic_baseline_bookmark_24"
                    style="@style/ExtendedFloatingActionButton"
                    tools:ignore="ContentDescription" />

            <fragment
                    app:customCastBackgroundColor="?attr/primaryBlackBackground"
                    app:castControlButtons="@array/cast_mini_controller_control_buttons"
                    android:id="@+id/cast_mini_controller"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:visibility="gone"
                    class="com.lagradost.cloudstream3.ui.MyMiniControllerFragment"
                    tools:ignore="FragmentTagUsage" />
        </LinearLayout>
    </FrameLayout>
</LinearLayout>



================================================
FILE: app/src/main/res/layout/fragment_search.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/searchRoot"
        tools:context=".ui.search.SearchFragment"
        android:orientation="vertical"
        android:background="?attr/primaryGrayBackground"
        android:layout_marginTop="@dimen/navbar_height">

    <FrameLayout
            android:visibility="visible"
            android:layout_margin="10dp"
            android:background="@drawable/search_background"
            android:layout_width="match_parent"
            android:layout_height="40dp">

        <FrameLayout
                android:layout_gravity="center_vertical"
                android:layout_width="match_parent"
                android:layout_marginEnd="30dp"
                android:layout_height="30dp">

            <androidx.appcompat.widget.SearchView
                    android:nextFocusUp="@id/nav_rail_view"
                    android:nextFocusRight="@id/search_filter"
                    android:nextFocusLeft="@id/nav_rail_view"
                    android:nextFocusDown="@id/search_autofit_results"

                    android:imeOptions="actionSearch"
                    android:inputType="text"

                    android:id="@+id/main_search"
                    app:queryBackground="@color/transparent"

                    app:searchIcon="@drawable/search_icon"
                    android:paddingStart="-10dp"
                    android:iconifiedByDefault="false"
                    app:queryHint="@string/search_hint"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_gravity="center_vertical"
                    app:iconifiedByDefault="false"
                    tools:ignore="RtlSymmetry">

                <requestFocus />

                <androidx.core.widget.ContentLoadingProgressBar
                        android:id="@+id/search_loading_bar"
                        android:layout_width="20dp"
                        android:layout_height="20dp"
                        android:layout_marginStart="-35dp"
                        style="@style/Widget.AppCompat.ProgressBar"
                        android:foregroundTint="@color/white"
                        android:progressTint="@color/white"
                        android:layout_gravity="center">

                </androidx.core.widget.ContentLoadingProgressBar>
                <!--app:queryHint="@string/search_hint"
                 android:background="@color/grayBackground" @color/itemBackground
                            app:searchHintIcon="@drawable/search_white"
                            -->
            </androidx.appcompat.widget.SearchView>
        </FrameLayout>

        <ImageView
                android:nextFocusUp="@id/nav_rail_view"
                android:nextFocusRight="@id/main_search"
                android:nextFocusLeft="@id/main_search"
                android:nextFocusDown="@id/search_autofit_results"

                android:id="@+id/search_filter"
                android:background="?selectableItemBackgroundBorderless"
                android:src="@drawable/ic_baseline_tune_24"
                android:layout_width="25dp"
                android:layout_height="25dp"
                android:layout_margin="10dp"
                android:layout_gravity="end|center_vertical"
                app:tint="?attr/textColor"
                android:contentDescription="@string/change_providers_img_des" />
    </FrameLayout>

    <HorizontalScrollView
            android:paddingStart="10dp"
            android:paddingEnd="10dp"
            android:fadingEdge="horizontal"
            android:requiresFadingEdge="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

        <LinearLayout
                android:orientation="horizontal"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

            <com.google.android.material.button.MaterialButton
                    android:nextFocusRight="@id/search_select_tv_series"

                    android:id="@+id/search_select_movies"
                    android:text="@string/movies"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/search_select_movies"
                    android:nextFocusRight="@id/search_select_anime"

                    android:id="@+id/search_select_tv_series"
                    android:text="@string/tv_series"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/search_select_tv_series"
                    android:nextFocusRight="@id/search_select_asian"

                    android:id="@+id/search_select_anime"
                    android:text="@string/anime"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/search_select_anime"
                    android:nextFocusRight="@id/search_select_cartoons"

                    android:id="@+id/search_select_asian"
                    android:text="@string/asian_drama"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/search_select_asian"
                    android:nextFocusRight="@id/search_select_documentaries"

                    android:id="@+id/search_select_cartoons"
                    android:text="@string/cartoons"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/search_select_cartoons"

                    android:id="@+id/search_select_documentaries"
                    android:text="@string/documentaries"
                    style="@style/RoundedSelectableButton" />
        </LinearLayout>
    </HorizontalScrollView>


    <com.lagradost.cloudstream3.ui.AutofitRecyclerView
            android:visibility="gone"
            android:nextFocusLeft="@id/nav_rail_view"
            android:descendantFocusability="afterDescendants"

            android:background="?attr/primaryBlackBackground"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:paddingStart="8dp"
            android:paddingTop="5dp"
            app:spanCount="3"
            android:paddingEnd="8dp"
            android:id="@+id/search_autofit_results"
            tools:listitem="@layout/search_result_grid"
            android:orientation="vertical" />

    <androidx.recyclerview.widget.RecyclerView
            android:visibility="gone"
            android:nextFocusLeft="@id/nav_rail_view"
            android:descendantFocusability="afterDescendants"

            android:background="?attr/primaryBlackBackground"
            android:id="@+id/search_master_recycler"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            tools:listitem="@layout/homepage_parent" />

    <androidx.recyclerview.widget.RecyclerView
            android:visibility="visible"
            android:nextFocusLeft="@id/nav_rail_view"
            android:descendantFocusability="afterDescendants"

            android:background="?attr/primaryBlackBackground"
            android:id="@+id/search_history_recycler"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            tools:listitem="@layout/search_history_item" />
</LinearLayout>


================================================
FILE: app/src/main/res/layout/home_episodes_expanded.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:background="?attr/primaryGrayBackground"
        android:layout_height="wrap_content">

    <FrameLayout
            android:nextFocusDown="@id/home_expanded_recycler"

            android:foreground="?android:attr/selectableItemBackgroundBorderless"
            android:id="@+id/home_expanded_drag_down"
            android:padding="12dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <requestFocus />

        <TextView
                android:id="@+id/home_expanded_text"
                style="@style/WatchHeaderText"
                tools:text="Trending" />

        <ImageView
                android:layout_marginEnd="5dp"
                android:layout_gravity="end|center_vertical"
                android:src="@drawable/ic_baseline_keyboard_arrow_down_24"
                android:layout_width="30dp"
                android:layout_height="match_parent"
                android:contentDescription="@string/home_expanded_hide" />
    </FrameLayout>

    <com.lagradost.cloudstream3.ui.AutofitRecyclerView
            android:descendantFocusability="afterDescendants"

            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/home_expanded_recycler"
            tools:listitem="@layout/search_result_grid" />
</LinearLayout>


================================================
FILE: app/src/main/res/layout/home_result_big_grid.xml
================================================
<?xml version="1.0" encoding="utf-8"?>

<!--  android:layout_width="114dp"
        android:layout_height="180dp"-->
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:foreground="@drawable/outline_drawable"
        android:layout_margin="2dp"
        android:layout_width="148dp"
        android:layout_height="234dp"
        android:layout_marginBottom="2dp"
        android:elevation="10dp"
        app:cardCornerRadius="@dimen/rounded_image_radius"
        android:id="@+id/background_card"
        app:cardBackgroundColor="?attr/primaryGrayBackground">

    <ImageView
            android:duplicateParentState="true"
            android:id="@+id/imageView"
            tools:src="@drawable/example_poster"
            android:scaleType="centerCrop"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:foreground="?android:attr/selectableItemBackgroundBorderless"
            android:contentDescription="@string/search_poster_img_des" />

    <TextView
            tools:text="@string/quality_hd"
            android:id="@+id/text_quality"
            style="@style/SearchBox"
            android:background="@drawable/type_bg_color" />
    <!--
    <LinearLayout
            android:orientation="vertical"
            android:layout_gravity="end"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        <TextView
                android:text="@string/app_dubbed_text"
                android:id="@+id/text_is_dub"
                android:textColor="?attr/textColor"
                android:paddingRight="10dp"
                android:paddingLeft="10dp"
                android:paddingTop="4dp"
                android:layout_marginBottom="5dp"
                android:layout_gravity="end"
                android:paddingBottom="4dp"
                android:minWidth="50dp"
                android:gravity="center"
                android:background="@drawable/dub_bg_color"
                android:layout_width="wrap_content" android:layout_height="wrap_content">
        </TextView>
        <TextView
                android:id="@+id/text_is_sub"
                android:text="@string/app_subbed_text"
                android:layout_gravity="end"
                android:textColor="?attr/textColor"
                android:paddingRight="10dp"
                android:paddingLeft="10dp"
                android:paddingTop="4dp"
                android:paddingBottom="4dp"
                android:minWidth="50dp"
                android:gravity="center"
                android:background="@drawable/sub_bg_color"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
        />

    </LinearLayout>
     -->
</androidx.cardview.widget.CardView>



================================================
FILE: app/src/main/res/layout/home_result_grid.xml
================================================
<?xml version="1.0" encoding="utf-8"?>

<!--  android:layout_width="114dp"
        android:layout_height="180dp"-->
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:foreground="@drawable/outline_drawable"
        android:layout_margin="2dp"
        android:layout_width="114dp"
        android:layout_height="180dp"
        android:layout_marginBottom="2dp"
        android:elevation="10dp"
        app:cardCornerRadius="@dimen/rounded_image_radius"
        android:id="@+id/background_card"
        app:cardBackgroundColor="?attr/primaryGrayBackground">

    <ImageView
            android:duplicateParentState="true"
            android:id="@+id/imageView"
            tools:src="@drawable/example_poster"
            android:scaleType="centerCrop"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:foreground="?android:attr/selectableItemBackgroundBorderless"
            android:contentDescription="@string/search_poster_img_des" />

    <ImageView
            android:focusable="false"
            android:clickable="false"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:id="@+id/title_shadow"
            android:src="@drawable/title_shadow"
            android:layout_gravity="bottom"
            tools:ignore="ContentDescription" />

    <TextView
            tools:text="The Perfect Run"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:layout_gravity="bottom"
            android:paddingBottom="5dp"
            android:paddingTop="5dp"
            android:textColor="@color/textColor"
            android:id="@+id/imageText"
            android:textStyle="bold"
            android:maxLines="2"
            android:paddingStart="5dp"
            android:paddingEnd="5dp"
            android:ellipsize="end" />

    <ImageView
            android:id="@+id/search_item_download_play"
            android:layout_gravity="center"
            android:src="@drawable/play_button"
            android:layout_width="60dp"
            android:layout_height="60dp" />

    <androidx.core.widget.ContentLoadingProgressBar
            android:layout_marginBottom="-1.5dp"
            android:id="@+id/watchProgress"
            android:progressTint="?attr/colorPrimary"
            android:progressBackgroundTint="?attr/colorPrimary"
            style="@android:style/Widget.Material.ProgressBar.Horizontal"
            android:layout_width="match_parent"
            tools:progress="50"
            android:layout_gravity="bottom"
            android:layout_height="5dp" />

    <!--<View
            android:id="@+id/search_result_lang"
            android:layout_gravity="bottom"
            android:layout_width="match_parent"
            android:layout_height="4dp"
            android:alpha="0.9">

    </View>-->
    <!--<ImageView
            android:src="@drawable/ic_baseline_bookmark_24"
            android:id="@+id/search_result_lang"
            android:layout_gravity="right"
            android:layout_marginTop="-5dp"
            android:layout_marginRight="-6.5dp"
            android:layout_width="30dp"
            android:layout_height="30dp">
    </ImageView>-->
    <TextView
            tools:text="@string/quality_hd"
            android:id="@+id/text_quality"
            style="@style/SearchBox"
            android:background="@drawable/type_bg_color"/>

    <LinearLayout
            android:orientation="vertical"
            android:layout_gravity="end"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <!--
                    <ImageView android:id="@+id/text_is_dub" android:tint="?attr/colorPrimary"
                               android:src="@drawable/ic_baseline_subtitles_24" android:layout_width="wrap_content"
                               android:layout_height="20dp">

                    </ImageView>-->
        <TextView
                android:text="@string/app_dubbed_text"
                android:id="@+id/text_is_dub"
                style="@style/SearchBox"
                android:layout_gravity="end"
                android:background="@drawable/dub_bg_color" />

        <TextView
                android:id="@+id/text_is_sub"
                android:text="@string/app_subbed_text"
                style="@style/SearchBox"
                android:layout_gravity="end"
                android:background="@drawable/sub_bg_color" />
    </LinearLayout>
</androidx.cardview.widget.CardView>



================================================
FILE: app/src/main/res/layout/home_result_grid_expanded.xml
================================================
<?xml version="1.0" encoding="utf-8"?>

<!--  android:layout_width="114dp"
        android:layout_height="180dp"-->


<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:backgroundTint="@color/transparent"
        android:foreground="@drawable/outline_drawable"
        app:cardElevation="0dp"
        android:layout_height="wrap_content"
        app:cardCornerRadius="@dimen/rounded_image_radius"
        android:layout_margin="2dp"
        android:id="@+id/background_card"
        android:layout_width="wrap_content">

    <LinearLayout
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

        <androidx.cardview.widget.CardView
                android:layout_width="114dp"
                android:layout_height="180dp"
                android:elevation="10dp"
                app:cardCornerRadius="@dimen/rounded_image_radius"
                app:cardBackgroundColor="?attr/primaryGrayBackground">

            <ImageView
                    android:duplicateParentState="true"
                    android:id="@+id/imageView"
                    tools:src="@drawable/example_poster"
                    android:scaleType="centerCrop"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:foreground="?android:attr/selectableItemBackgroundBorderless"
                    android:contentDescription="@string/search_poster_img_des" />


            <ImageView
                    android:id="@+id/search_item_download_play"
                    android:layout_gravity="center"
                    android:src="@drawable/play_button"
                    android:layout_width="60dp"
                    android:layout_height="60dp" />

            <androidx.core.widget.ContentLoadingProgressBar
                    android:layout_marginBottom="-1.5dp"
                    android:id="@+id/watchProgress"
                    android:progressTint="?attr/colorPrimary"
                    android:progressBackgroundTint="?attr/colorPrimary"
                    style="@android:style/Widget.Material.ProgressBar.Horizontal"
                    android:layout_width="match_parent"
                    tools:progress="50"
                    android:layout_gravity="bottom"
                    android:layout_height="5dp" />

            <!--<View
                    android:id="@+id/search_result_lang"
                    android:layout_gravity="bottom"
                    android:layout_width="match_parent"
                    android:layout_height="4dp"
                    android:alpha="0.9">

            </View>-->
            <!--<ImageView
                    android:src="@drawable/ic_baseline_bookmark_24"
                    android:id="@+id/search_result_lang"
                    android:layout_gravity="right"
                    android:layout_marginTop="-5dp"
                    android:layout_marginRight="-6.5dp"
                    android:layout_width="30dp"
                    android:layout_height="30dp">
            </ImageView>-->
            <TextView
                    tools:text="@string/quality_hd"
                    android:id="@+id/text_quality"
                    style="@style/SearchBox"
                    android:background="@drawable/type_bg_color" />

            <LinearLayout
                    android:orientation="vertical"
                    android:layout_gravity="end"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent">

                <!--
                            <ImageView android:id="@+id/text_is_dub" android:tint="?attr/colorPrimary"
                                       android:src="@drawable/ic_baseline_subtitles_24" android:layout_width="wrap_content"
                                       android:layout_height="20dp">

                            </ImageView>-->
                <TextView
                        android:text="@string/app_dubbed_text"
                        android:id="@+id/text_is_dub"
                        style="@style/SearchBox"
                        android:layout_gravity="end"
                        android:background="@drawable/dub_bg_color" />

                <TextView
                        android:id="@+id/text_is_sub"
                        android:text="@string/app_subbed_text"
                        style="@style/SearchBox"
                        android:layout_gravity="end"
                        android:background="@drawable/sub_bg_color" />
            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <TextView
                tools:text="The Perfect Run\nThe Perfect Run\nhello"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textSize="13sp"
                android:gravity="center"
                android:layout_gravity="bottom"
                android:paddingBottom="5dp"
                android:paddingTop="5dp"
                android:textColor="@color/textColor"
                android:id="@+id/imageText"
                android:minLines="2"
                android:maxLines="2"
                android:paddingStart="5dp"
                android:paddingEnd="5dp"
                android:ellipsize="end" />
    </LinearLayout>
</androidx.cardview.widget.CardView>



================================================
FILE: app/src/main/res/layout/home_select_mainpage.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

    <ListView
            android:clipToPadding="false"
            android:nextFocusRight="@id/cancel_btt"
            android:nextFocusLeft="@id/apply_btt"

            android:id="@+id/listview1"
            android:layout_marginBottom="60dp"
            android:minHeight="0dp"
            android:layout_marginTop="10dp"
            android:requiresFadingEdge="vertical"
            tools:listitem="@layout/sort_bottom_single_choice"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_rowWeight="1" />

    <HorizontalScrollView
            android:layout_marginTop="-60dp"
            android:paddingStart="10dp"
            android:paddingEnd="10dp"
            android:clipToPadding="true"
            android:fadingEdge="horizontal"
            android:requiresFadingEdge="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

        <LinearLayout
                android:orientation="horizontal"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
            <!--  android:minWidth="0dp"
                    app:iconTint="?attr/textColor"
                    android:insetLeft="0dp"
                    android:insetTop="0dp"
                    android:insetRight="0dp"
                    android:insetBottom="0dp"
                    app:iconGravity="textStart"
                    app:iconPadding="0dp"
                    android:layout_height="35dp"-->
            <!-- <com.google.android.material.button.MaterialButton
                     android:nextFocusRight="@id/home_select_tv_series"
                     app:icon="@drawable/ic_baseline_close_24"

                     android:id="@+id/home_select_none"
                     style="@style/RoundedSelectableButtonIcon"/>-->
            <com.google.android.material.button.MaterialButton
                    android:nextFocusRight="@id/home_select_tv_series"

                    android:id="@+id/home_select_movies"
                    android:text="@string/movies"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/home_select_movies"
                    android:nextFocusRight="@id/home_select_anime"

                    android:id="@+id/home_select_tv_series"
                    android:text="@string/tv_series"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/home_select_tv_series"
                    android:nextFocusRight="@id/home_select_asian"

                    android:id="@+id/home_select_anime"
                    android:text="@string/anime"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/home_select_anime"
                    android:nextFocusRight="@id/home_select_cartoons"

                    android:id="@+id/home_select_asian"
                    android:text="@string/asian_drama"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/home_select_asian"
                    android:nextFocusRight="@id/home_select_documentaries"

                    android:id="@+id/home_select_cartoons"
                    android:text="@string/cartoons"
                    style="@style/RoundedSelectableButton" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/home_select_cartoons"

                    android:id="@+id/home_select_documentaries"
                    android:text="@string/documentaries"
                    style="@style/RoundedSelectableButton" />
        </LinearLayout>
    </HorizontalScrollView>

    <LinearLayout
            android:visibility="gone"
            android:id="@+id/apply_btt_holder"
            android:orientation="horizontal"
            android:layout_gravity="bottom"
            android:gravity="bottom|end"
            android:layout_width="match_parent"
            android:layout_height="60dp">

        <com.google.android.material.button.MaterialButton
                style="@style/WhiteButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_apply"
                android:id="@+id/apply_btt"
                android:layout_width="wrap_content" />

        <com.google.android.material.button.MaterialButton
                style="@style/BlackButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_cancel"
                android:id="@+id/cancel_btt"
                android:layout_width="wrap_content" />
    </LinearLayout>
</LinearLayout>


================================================
FILE: app/src/main/res/layout/homepage_parent.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    <FrameLayout
            android:foreground="?android:attr/selectableItemBackgroundBorderless"
            android:id="@+id/home_child_more_info"
            android:padding="12dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <TextView
                android:id="@+id/home_parent_item_title"
                style="@style/WatchHeaderText"
                tools:text="Trending" />

        <ImageView
                app:tint="?attr/textColor"
                android:layout_marginEnd="5dp"
                android:layout_gravity="end|center_vertical"
                android:src="@drawable/ic_baseline_arrow_forward_24"
                android:layout_width="30dp"
                android:layout_height="match_parent"
                android:contentDescription="@string/home_more_info" />
    </FrameLayout>

    <androidx.recyclerview.widget.RecyclerView
            android:nextFocusUp="@id/home_child_more_info"
            android:paddingHorizontal="5dp"
            android:clipToPadding="false"

            android:descendantFocusability="afterDescendants"

            app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
            android:id="@+id/home_child_recyclerview"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            tools:listitem="@layout/home_result_grid" />
</LinearLayout>


================================================
FILE: app/src/main/res/layout/homepage_parent_tv.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    <TextView
            android:id="@+id/home_parent_item_title"
            android:padding="12dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            style="@style/WatchHeaderText"
            android:layout_marginEnd="0dp"
            tools:text="Trending">
    </TextView>

    <androidx.recyclerview.widget.RecyclerView
            android:nextFocusUp="@id/home_child_more_info"
            android:paddingHorizontal="5dp"
            android:clipToPadding="false"

            android:descendantFocusability="afterDescendants"

            app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
            android:id="@+id/home_child_recyclerview"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            tools:listitem="@layout/home_result_grid" />
</LinearLayout>


================================================
FILE: app/src/main/res/layout/loading_downloads.xml
================================================
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:paddingBottom="@dimen/loading_margin"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    <include layout="@layout/loading_poster" />

    <LinearLayout
            android:layout_marginStart="15dp"
            android:orientation="vertical"
            android:layout_gravity="center"
            android:layout_width="match_parent"
            android:layout_marginEnd="50dp"
            android:layout_height="wrap_content">

        <include layout="@layout/loading_line" />

        <include layout="@layout/loading_line_short" />
    </LinearLayout>
</LinearLayout>



================================================
FILE: app/src/main/res/layout/loading_episode.xml
================================================
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:paddingTop="@dimen/loading_margin"
        android:paddingBottom="@dimen/loading_margin"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    <LinearLayout
            android:layout_marginBottom="@dimen/loading_margin"
            android:layout_width="match_parent"
            android:orientation="horizontal"
            android:layout_height="wrap_content">
        <!--app:cardCornerRadius="@dimen/roundedImageRadius"-->
        <androidx.cardview.widget.CardView
                android:background="@color/grayShimmer"
                app:cardCornerRadius="@dimen/loading_radius"
                android:layout_width="126dp"
                android:layout_height="72dp"
                android:foreground="@drawable/outline_drawable" />

        <LinearLayout
                android:layout_marginStart="15dp"
                android:orientation="vertical"
                android:layout_gravity="center"
                android:layout_width="match_parent"
                android:layout_marginEnd="50dp"
                android:layout_height="wrap_content">

            <include layout="@layout/loading_line" />

            <include layout="@layout/loading_line_short" />
        </LinearLayout>
    </LinearLayout>

    <include layout="@layout/loading_line" />

    <include layout="@layout/loading_line" />
</LinearLayout>



================================================
FILE: app/src/main/res/layout/loading_line.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:tools="http://schemas.android.com/tools"
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        app:cardCornerRadius="@dimen/loading_radius"
        android:layout_width="match_parent"
        android:layout_height="@dimen/loading_line_height"
        android:layout_marginBottom="@dimen/loading_margin"
        android:background="@color/grayShimmer"
        tools:ignore="ContentDescription" />


================================================
FILE: app/src/main/res/layout/loading_line_short.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:tools="http://schemas.android.com/tools"
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        app:cardCornerRadius="@dimen/loading_radius"
        android:layout_width="120dp"
        android:layout_height="@dimen/loading_line_height"
        android:layout_marginBottom="@dimen/loading_margin"
        android:background="@color/grayShimmer"
        tools:ignore="ContentDescription" />


================================================
FILE: app/src/main/res/layout/loading_line_short_center.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:tools="http://schemas.android.com/tools"
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        app:cardCornerRadius="@dimen/loading_radius"
        android:layout_width="200dp"
        android:layout_gravity="center"
        android:layout_height="@dimen/loading_line_height"
        android:layout_marginBottom="@dimen/loading_margin"
        android:background="@color/grayShimmer"
        tools:ignore="ContentDescription" />


================================================
FILE: app/src/main/res/layout/loading_list.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:paddingTop="@dimen/loading_margin"
        android:paddingBottom="@dimen/loading_margin"
        android:layout_height="200dp"
        android:layout_width="match_parent">

    <include layout="@layout/loading_line_short" />

    <LinearLayout
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <include layout="@layout/loading_poster" />

        <View
                android:layout_height="wrap_content"
                android:layout_width="@dimen/loading_margin" />

        <include layout="@layout/loading_poster" />

        <View
                android:layout_height="wrap_content"
                android:layout_width="@dimen/loading_margin" />

        <include layout="@layout/loading_poster" />

        <View
                android:layout_height="wrap_content"
                android:layout_width="@dimen/loading_margin" />

        <include layout="@layout/loading_poster" />

        <View
                android:layout_height="wrap_content"
                android:layout_width="@dimen/loading_margin" />

        <include layout="@layout/loading_poster" />

        <View
                android:layout_height="wrap_content"
                android:layout_width="@dimen/loading_margin" />

        <include layout="@layout/loading_poster" />

        <View
                android:layout_height="match_parent"
                android:layout_width="@dimen/loading_margin" />

        <include layout="@layout/loading_poster" />

        <View
                android:layout_height="wrap_content"
                android:layout_width="@dimen/loading_margin" />

        <include layout="@layout/loading_poster" />
    </LinearLayout>

</LinearLayout>




================================================
FILE: app/src/main/res/layout/loading_poster.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:tools="http://schemas.android.com/tools"
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        app:cardCornerRadius="@dimen/loading_radius"
        android:layout_width="100dp"
        android:layout_height="140dp"
        android:background="@color/grayShimmer"
        tools:ignore="ContentDescription" />


================================================
FILE: app/src/main/res/layout/logcat.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <ScrollView
            android:layout_marginBottom="60dp"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <TextView
                android:id="@+id/text1"
                android:padding="15dp"

                android:textSize="15sp"
                android:textColor="?attr/textColor"
                android:layout_width="match_parent"
                android:layout_rowWeight="1"
                tools:text="Test"
                android:layout_height="wrap_content" />
    </ScrollView>

    <HorizontalScrollView
            android:scrollbars="none"
            android:id="@+id/apply_btt_holder"
            android:layout_gravity="bottom"
            android:gravity="bottom|end"
            android:layout_marginTop="-60dp"
            android:layout_width="match_parent"
            android:layout_height="60dp">

        <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:orientation="horizontal">

            <com.google.android.material.button.MaterialButton
                    android:nextFocusRight="@id/copy_btt"
                    android:id="@+id/save_btt"

                    style="@style/WhiteButton"
                    android:layout_gravity="center_vertical|end"
                    android:text="@string/sort_save"
                    android:layout_width="wrap_content" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/save_btt"
                    android:nextFocusRight="@id/clear_btt"
                    android:id="@+id/copy_btt"

                    style="@style/BlackButton"
                    android:layout_gravity="center_vertical|end"
                    android:text="@string/sort_copy"
                    android:layout_width="wrap_content" />


            <com.google.android.material.button.MaterialButton
                    android:nextFocusRight="@id/close_btt"
                    android:nextFocusLeft="@id/copy_btt"

                    style="@style/BlackButton"
                    android:layout_gravity="center_vertical|end"
                    android:text="@string/sort_clear"
                    android:id="@+id/clear_btt"
                    android:layout_width="wrap_content" />

            <com.google.android.material.button.MaterialButton
                    android:nextFocusLeft="@id/clear_btt"
                    android:id="@+id/close_btt"

                    style="@style/BlackButton"
                    android:layout_gravity="center_vertical|end"
                    android:text="@string/sort_close"
                    android:layout_width="wrap_content" />
        </LinearLayout>
    </HorizontalScrollView>

</LinearLayout>



================================================
FILE: app/src/main/res/layout/main_settings.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:background="?attr/primaryBlackBackground"
        android:layout_height="match_parent">

    <ScrollView
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintBottom_toBottomOf="parent"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <LinearLayout
                android:orientation="vertical"
                android:gravity="center_vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

            <TextView
                    android:nextFocusDown="@id/settings_lang"

                    android:id="@+id/settings_player"
                    style="@style/SettingsItem"
                    android:text="@string/category_player" />

            <TextView
                    android:nextFocusUp="@id/settings_player"
                    android:nextFocusDown="@id/settings_ui"

                    android:id="@+id/settings_lang"
                    style="@style/SettingsItem"
                    android:text="@string/category_preferred_media_and_lang" />

            <TextView
                    android:nextFocusUp="@id/settings_lang"
                    android:nextFocusDown="@id/settings_nginx"

                    android:id="@+id/settings_ui"
                    style="@style/SettingsItem"
                    android:text="@string/category_ui" />

            <TextView
                    android:nextFocusUp="@id/settings_ui"
                    android:nextFocusDown="@id/settings_updates"

                    android:id="@+id/settings_nginx"
                    style="@style/SettingsItem"
                    android:text="@string/category_nginx" />

            <TextView
                    android:nextFocusUp="@id/settings_nginx"
                    android:nextFocusDown="@id/settings_credits"

                    android:id="@+id/settings_updates"
                    style="@style/SettingsItem"
                    android:text="@string/category_updates" />

            <TextView
                    android:nextFocusUp="@id/settings_updates"

                    android:id="@+id/settings_credits"
                    style="@style/SettingsItem"
                    android:text="@string/category_credits" />

            <TextView
                    android:padding="10dp"
                    android:gravity="center"
                    android:layout_gravity="center"
                    android:textColor="?attr/textColor"
                    android:text="@string/app_version"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />
        </LinearLayout>
    </ScrollView>
</androidx.constraintlayout.widget.ConstraintLayout>


================================================
FILE: app/src/main/res/layout/options_popup_tv.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal">

    <androidx.cardview.widget.CardView xmlns:app="http://schemas.android.com/apk/res-auto"
            xmlns:tools="http://schemas.android.com/tools"
            android:foreground="@drawable/outline_drawable"
            android:layout_margin="2dp"
            android:layout_width="114dp"
            android:layout_height="180dp"
            android:layout_marginBottom="2dp"
            android:elevation="10dp"
            app:cardCornerRadius="@dimen/rounded_image_radius"
            android:id="@+id/background_card"
            app:cardBackgroundColor="?attr/primaryGrayBackground">

        <ImageView
                android:duplicateParentState="true"
                android:id="@+id/imageView"
                tools:src="@drawable/example_poster"
                android:scaleType="centerCrop"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:foreground="?android:attr/selectableItemBackgroundBorderless"
                android:contentDescription="@string/search_poster_img_des" />
    </androidx.cardview.widget.CardView>

    <ListView
            android:nextFocusRight="@id/cancel_btt"
            android:nextFocusLeft="@id/apply_btt"

            android:nextFocusUp="@id/toggle1"
            android:nextFocusDown="@id/apply_btt"

            android:id="@+id/listview1"
            android:requiresFadingEdge="vertical"
            tools:listitem="@layout/sort_bottom_single_choice_color"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_rowWeight="1" />
</LinearLayout>


================================================
FILE: app/src/main/res/layout/player_custom_layout.xml
================================================
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/player_holder"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:screenOrientation="landscape"
        tools:orientation="vertical">

    <FrameLayout
            android:id="@+id/subtitle_holder"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <View
                android:id="@+id/shadow_overlay"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@color/black_overlay" />
    </FrameLayout>
    <!--
        <LinearLayout android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:gravity="end"
                      android:id="@+id/video_lock_holder"
        >

            <FrameLayout
                    android:layout_margin="5dp"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    tools:ignore="UselessParent">
                <ImageView
                        android:layout_width="30dp"
                        android:layout_height="30dp"
                        android:layout_margin="20dp"
                        android:id="@+id/video_locked_img"
                        android:layout_gravity="end|center_vertical"
                        android:src="@drawable/video_locked">
                </ImageView>
                <ImageView
                        android:id="@+id/video_lock"
                        android:layout_width="70dp"
                        android:layout_height="70dp"
                        android:layout_gravity="end|center_vertical"
                        android:focusable="true"
                        android:clickable="true"
                        android:background="@drawable/video_tap_button_always_white">
                </ImageView>

            </FrameLayout>

    </LinearLayout>
-->
    <RelativeLayout
            android:id="@+id/player_time_menu"
            android:layout_width="match_parent"
            android:layout_height="200dp"
            android:orientation="horizontal"
            app:layout_constraintBottom_toTopOf="@+id/player_center_menu"
            app:layout_constraintTop_toBottomOf="@+id/topMenuRight">

        <TextView
                android:id="@+id/player_time_text_left"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_marginStart="100dp"
                android:alpha="0"
                android:gravity="center|start"
                android:shadowColor="@android:color/black"
                android:shadowRadius="10.0"
                android:textColor="@android:color/white"
                android:textSize="40sp">

        </TextView>

        <TextView
                android:id="@+id/player_time_text"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:shadowColor="@android:color/black"
                android:shadowRadius="10.0"
                android:textColor="@android:color/white"
                android:textSize="30sp"
                tools:text="+100">

        </TextView>

        <TextView
                android:id="@+id/time_text_right"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_marginEnd="100dp"
                android:gravity="center|end"
                android:shadowColor="@android:color/black"
                android:shadowRadius="10.0"
                android:textColor="@android:color/white"
                android:textSize="40sp" />
    </RelativeLayout>

    <FrameLayout
            android:id="@+id/player_episode_filler_holder"
            android:layout_margin="20dp"
            android:layout_gravity="end"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

        <com.google.android.material.button.MaterialButton
                style="@style/SmallBlackButton"
                android:text="@string/filler"
                android:id="@+id/player_episode_filler" />
    </FrameLayout>

    <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/player_video_holder"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <FrameLayout
                android:id="@+id/player_top_holder"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

            <TextView
                    android:id="@+id/player_video_title"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="80dp"
                    android:layout_marginTop="35dp"
                    android:layout_marginEnd="80dp"
                    android:gravity="center"
                    android:textColor="@color/white"
                    android:textStyle="bold"
                    android:visibility="visible"
                    app:layout_constraintLeft_toLeftOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    tools:text="Hello world" />

            <TextView
                    android:id="@+id/player_video_title_rez"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="80dp"
                    android:layout_marginTop="20dp"
                    android:layout_marginEnd="80dp"
                    android:gravity="center"
                    android:textColor="@color/white"
                    app:layout_constraintLeft_toLeftOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/player_video_title"
                    tools:text="1920x1080" />


            <!-- Removed as it has no use anymore-->
            <!--<androidx.mediarouter.app.MediaRouteButton
                    android:id="@+id/player_media_route_button"
                    android:layout_width="70dp"
                    android:layout_height="70dp"
                    android:layout_gravity="end"
                    android:layout_margin="5dp"
                    android:mediaRouteTypes="user"
                    android:visibility="visible"
                    app:layout_constraintRight_toRightOf="parent"
                    app:layout_constraintTop_toTopOf="parent" />-->

            <FrameLayout
                    android:id="@+id/player_go_back_holder"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="5dp"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent">

                <ImageView
                        android:layout_width="30dp"
                        android:layout_height="30dp"
                        android:layout_gravity="center"
                        android:src="@drawable/ic_baseline_arrow_back_24"
                        app:tint="@android:color/white"
                        android:contentDescription="@string/go_back_img_des" />

                <ImageView
                        android:id="@+id/player_go_back"
                        android:layout_width="70dp"
                        android:layout_height="70dp"
                        android:layout_gravity="center"
                        android:background="@drawable/video_tap_button_always_white"
                        android:clickable="true"
                        android:focusable="true"
                        android:contentDescription="@string/go_back_img_des" />
            </FrameLayout>


        </FrameLayout>

        <!--use for thinner app:trackThickness="3dp" com.google.android.material.progressindicator.CircularProgressIndicator-->
        <ProgressBar
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintLeft_toLeftOf="parent"
                app:layout_constraintRight_toRightOf="parent"
                app:layout_constraintTop_toTopOf="parent"

                android:focusable="false"
                android:clickable="false"
                android:focusableInTouchMode="false"

                android:indeterminate="true"
                android:visibility="gone"
                tools:visibility="visible"
                android:id="@+id/player_buffering"
                android:layout_gravity="center"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content" />

        <!-- This nested layout is necessary because of buffering and clicking-->
        <FrameLayout
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintLeft_toLeftOf="parent"
                app:layout_constraintRight_toRightOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:id="@+id/player_pause_play_holder_holder">

            <FrameLayout
                    tools:ignore="uselessParent"
                    android:id="@+id/player_pause_play_holder"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent">

                <ImageView
                        app:tint="@color/white"
                        android:id="@+id/player_pause_play"
                        android:nextFocusLeft="@id/exo_rew"
                        android:nextFocusRight="@id/exo_ffwd"
                        android:nextFocusUp="@id/player_go_back"
                        android:nextFocusDown="@id/player_lock"

                        android:layout_gravity="center"

                        android:src="@drawable/netflix_pause"
                        android:background="@drawable/video_tap_button"

                        android:layout_width="70dp"
                        android:layout_height="70dp"
                        tools:ignore="ContentDescription" />
            </FrameLayout>
        </FrameLayout>

        <androidx.constraintlayout.widget.ConstraintLayout
                android:id="@+id/player_center_menu"
                android:layout_width="match_parent"
                android:layout_height="100dp"
                android:layout_gravity="center"
                android:gravity="center"
                android:orientation="horizontal"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintLeft_toLeftOf="parent"
                app:layout_constraintRight_toRightOf="parent"
                app:layout_constraintTop_toTopOf="parent">

            <FrameLayout
                    android:id="@+id/player_rew_holder"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    app:layout_constraintWidth_percent="0.5"
                    android:layout_gravity="center_vertical|start"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintLeft_toLeftOf="parent"
                    app:layout_constraintRight_toLeftOf="@id/player_ffwd_holder"
                    app:layout_constraintTop_toTopOf="parent">

                <TextView
                        android:id="@+id/exo_rew_text"
                        android:layout_width="200dp"
                        android:layout_height="40dp"
                        android:layout_gravity="center"

                        android:gravity="center"
                        android:textColor="@color/white"
                        android:textSize="19sp"

                        android:textStyle="bold"
                        tools:text="10" />

                <ImageButton
                        android:id="@id/exo_rew"
                        android:layout_width="70dp"
                        android:layout_height="70dp"
                        android:layout_gravity="center"

                        android:background="@drawable/video_tap_button_skip"
                        android:nextFocusLeft="@id/exo_rew"
                        android:nextFocusUp="@id/player_go_back"
                        android:nextFocusDown="@id/player_lock"
                        android:padding="10dp"
                        android:scaleType="fitCenter"
                        android:scaleX="-1"
                        android:src="@drawable/netflix_skip_forward"
                        app:tint="@color/white"
                        android:tintMode="src_in"
                        tools:ignore="ContentDescription" />
            </FrameLayout>

            <FrameLayout
                    android:id="@+id/player_ffwd_holder"
                    android:layout_width="0dp"
                    app:layout_constraintWidth_percent="0.5"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical|end"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintLeft_toRightOf="@id/player_rew_holder"
                    app:layout_constraintRight_toRightOf="parent"
                    app:layout_constraintTop_toTopOf="parent">

                <TextView
                        android:id="@+id/exo_ffwd_text"
                        android:layout_width="200dp"
                        android:layout_height="40dp"
                        android:layout_gravity="center"
                        android:gravity="center"
                        android:textColor="@color/white"
                        android:textSize="19sp"
                        android:textStyle="bold"
                        tools:text="10" />

                <ImageButton
                        android:id="@id/exo_ffwd"
                        android:layout_width="70dp"
                        android:layout_height="70dp"
                        android:layout_gravity="center"

                        android:background="@drawable/video_tap_button_skip"
                        android:nextFocusRight="@id/exo_rew"
                        android:nextFocusUp="@id/player_go_back"
                        android:nextFocusDown="@id/player_lock"
                        android:padding="10dp"
                        android:scaleType="fitCenter"
                        android:src="@drawable/netflix_skip_forward"
                        app:tint="@color/white"
                        android:tintMode="src_in"
                        tools:ignore="ContentDescription" />
            </FrameLayout>
        </androidx.constraintlayout.widget.ConstraintLayout>

        <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="bottom"
                android:layout_marginBottom="20dp"
                android:gravity="center"
                android:orientation="horizontal"
                android:paddingTop="4dp"
                android:visibility="gone"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent">

            <ImageButton
                    android:id="@id/exo_prev"
                    style="@style/ExoMediaButton.Previous"
                    app:tint="?attr/colorPrimaryDark"
                    android:tintMode="src_in"
                    tools:ignore="ContentDescription" />


            <ImageButton
                    android:id="@id/exo_repeat_toggle"
                    style="@style/ExoMediaButton"
                    app:tint="?attr/colorPrimaryDark"
                    android:tintMode="src_in"
                    tools:ignore="ContentDescription" />


            <ImageButton
                    android:id="@id/exo_next"
                    style="@style/ExoMediaButton.Next"
                    app:tint="?attr/colorPrimaryDark"
                    android:tintMode="src_in"
                    tools:ignore="ContentDescription" />

            <ImageButton
                    android:id="@id/exo_vr"
                    style="@style/ExoMediaButton.VR"
                    app:tint="?attr/colorPrimaryDark"
                    android:tintMode="src_in"
                    tools:ignore="ContentDescription" />

            <ImageButton
                    android:id="@id/exo_play"
                    app:tint="?attr/colorPrimaryDark"
                    android:tintMode="src_in"
                    tools:ignore="ContentDescription"
                    android:layout_height="0dp"
                    android:layout_width="0dp" />

            <ImageButton
                    android:id="@id/exo_pause"
                    app:tint="?attr/colorPrimaryDark"
                    android:tintMode="src_in"
                    tools:ignore="ContentDescription"
                    android:layout_height="0dp"
                    android:layout_width="0dp" />
        </LinearLayout>

        <LinearLayout
                android:id="@+id/bottom_player_bar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dp"
                android:gravity="center_vertical"
                android:orientation="vertical"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent">

            <LinearLayout
                    android:id="@+id/player_video_bar"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                <TextView
                        android:id="@id/exo_position"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:layout_marginStart="20dp"
                        android:gravity="end"
                        android:includeFontPadding="false"
                        android:minWidth="50dp"
                        android:paddingLeft="4dp"
                        android:paddingRight="4dp"
                        android:textColor="@android:color/white"
                        android:textSize="14sp"
                        android:textStyle="normal"
                        tools:text="15:30" />
                <!--app:buffered_color="@color/videoCache"-->
                <com.google.android.exoplayer2.ui.DefaultTimeBar
                        android:id="@id/exo_progress"
                        android:layout_width="0dp"
                        android:layout_height="30dp"
                        android:layout_weight="1"
                        app:bar_height="2dp"
                        app:played_color="?attr/colorPrimary"

                        app:scrubber_color="?attr/colorPrimary"
                        app:scrubber_dragged_size="26dp"
                        app:scrubber_enabled_size="24dp"
                        app:unplayed_color="@color/videoProgress" />

                <!-- exo_duration-->
                <TextView
                        android:id="@id/exo_duration"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:layout_marginEnd="20dp"
                        android:includeFontPadding="false"
                        android:minWidth="50dp"
                        android:paddingLeft="4dp"
                        android:paddingRight="4dp"
                        android:textColor="@android:color/white"
                        android:textSize="14sp"
                        android:textStyle="normal"
                        tools:text="23:20" />

            </LinearLayout>

            <HorizontalScrollView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center">

                <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="60dp"
                        android:gravity="center"
                        android:orientation="horizontal"
                        android:paddingTop="10dp"
                        android:paddingBottom="10dp">

                    <com.google.android.material.button.MaterialButton
                            android:id="@+id/player_lock"
                            style="@style/VideoButton"
                            android:nextFocusLeft="@id/player_skip_episode"
                            android:nextFocusRight="@id/player_resize_btt"
                            android:text="@string/video_lock"
                            app:icon="@drawable/video_locked"

                            app:iconSize="30dp" />

                    <LinearLayout
                            android:id="@+id/player_lock_holder"
                            android:layout_width="wrap_content"
                            android:layout_height="match_parent"
                            android:orientation="horizontal">

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/player_resize_btt"
                                style="@style/VideoButton"
                                android:nextFocusLeft="@id/player_lock"

                                android:nextFocusRight="@id/player_speed_btt"
                                android:text="@string/video_aspect_ratio_resize"
                                app:icon="@drawable/ic_baseline_aspect_ratio_24" />

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/player_speed_btt"
                                style="@style/VideoButton"
                                android:nextFocusLeft="@id/player_resize_btt"

                                android:nextFocusRight="@id/player_subtitle_offset_btt"
                                app:icon="@drawable/ic_baseline_speed_24"
                                tools:text="Speed" />

                        <com.google.android.material.button.MaterialButton
                                android:visibility="gone"
                                tools:visibility="visible"
                                android:id="@+id/player_subtitle_offset_btt"
                                style="@style/VideoButton"
                                android:nextFocusLeft="@id/player_speed_btt"

                                android:nextFocusRight="@id/player_sources_btt"
                                app:icon="@drawable/ic_outline_subtitles_24"
                                android:text="@string/subtitle_offset"/>

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/player_sources_btt"
                                style="@style/VideoButton"
                                android:nextFocusLeft="@id/player_subtitle_offset_btt"

                                android:nextFocusRight="@id/player_skip_op"
                                android:text="@string/video_source"
                                app:icon="@drawable/ic_baseline_playlist_play_24" />

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/player_skip_op"
                                style="@style/VideoButton"
                                android:nextFocusLeft="@id/player_sources_btt"

                                android:nextFocusRight="@id/player_skip_episode"
                                android:text="@string/video_skip_op"
                                app:icon="@drawable/ic_baseline_fast_forward_24" />

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/player_skip_episode"
                                style="@style/VideoButton"
                                android:nextFocusLeft="@id/player_skip_op"

                                android:nextFocusRight="@id/player_lock"
                                android:text="@string/next_episode"
                                app:icon="@drawable/ic_baseline_skip_next_24" />
                    </LinearLayout>
                </LinearLayout>
            </HorizontalScrollView>
        </LinearLayout>
    </androidx.constraintlayout.widget.ConstraintLayout>

    <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal">

        <RelativeLayout
                android:id="@+id/player_progressbar_left_holder"
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:gravity="start"
                android:visibility="gone"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintLeft_toLeftOf="parent"
                app:layout_constraintRight_toLeftOf="@+id/centerMenuView"
                app:layout_constraintTop_toTopOf="parent"
                tools:alpha="1"
                tools:visibility="visible">
            <!--VERY hacky layout -->
            <ImageView
                    android:id="@+id/player_progressbar_left_icon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_marginBottom="220dp"
                    android:src="@drawable/ic_baseline_volume_up_24"
                    app:tint="@android:color/white"
                    tools:ignore="ContentDescription">

            </ImageView>

            <ProgressBar
                    android:id="@+id/player_progressbar_left"
                    style="@android:style/Widget.Material.ProgressBar.Horizontal"
                    android:layout_width="4dp"
                    android:layout_height="150dp"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true"
                    android:layout_gravity="end|center_vertical"
                    android:layout_marginStart="40dp"
                    android:indeterminate="false"
                    android:max="100"
                    android:progress="100"
                    android:progressDrawable="@drawable/progress_drawable_vertical"
                    tools:progress="30" />
        </RelativeLayout>

        <RelativeLayout
                android:id="@+id/player_progressbar_right_holder"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:gravity="right"
                android:visibility="gone"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintLeft_toRightOf="@+id/centerMenuView"
                app:layout_constraintRight_toRightOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                tools:alpha="1"
                tools:ignore="RtlHardcoded"
                tools:visibility="visible">

            <ImageView
                    android:id="@+id/player_progressbar_right_icon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_marginBottom="220dp"
                    android:src="@drawable/ic_baseline_brightness_7_24"
                    app:tint="@android:color/white"
                    tools:ignore="ContentDescription">

            </ImageView>

            <ProgressBar
                    android:id="@+id/player_progressbar_right"
                    style="@android:style/Widget.Material.ProgressBar.Horizontal"
                    android:layout_width="4dp"
                    android:layout_height="150dp"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true"
                    android:layout_gravity="end|center_vertical"
                    android:layout_marginEnd="40dp"
                    android:indeterminate="false"
                    android:max="100"
                    android:progress="100"
                    android:progressDrawable="@drawable/progress_drawable_vertical" />
        </RelativeLayout>
    </LinearLayout>
</FrameLayout>



================================================
FILE: app/src/main/res/layout/player_custom_layout_tv.xml
================================================
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/player_holder"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:screenOrientation="landscape"
        tools:orientation="vertical"
        android:tag="television">

    <FrameLayout
            android:id="@+id/subtitle_holder"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <View
                android:id="@+id/shadow_overlay"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@drawable/player_gradient_tv" />
    </FrameLayout>
    <!--
        <LinearLayout android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:gravity="end"
                      android:id="@+id/video_lock_holder"
        >

            <FrameLayout
                    android:layout_margin="5dp"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    tools:ignore="UselessParent">
                <ImageView
                        android:layout_width="30dp"
                        android:layout_height="30dp"
                        android:layout_margin="20dp"
                        android:id="@+id/video_locked_img"
                        android:layout_gravity="end|center_vertical"
                        android:src="@drawable/video_locked">
                </ImageView>
                <ImageView
                        android:id="@+id/video_lock"
                        android:layout_width="70dp"
                        android:layout_height="70dp"
                        android:layout_gravity="end|center_vertical"
                        android:focusable="true"
                        android:clickable="true"
                        android:background="@drawable/video_tap_button_always_white">
                </ImageView>

            </FrameLayout>

    </LinearLayout>
-->

    <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/player_video_holder"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:padding="16dp">

        <FrameLayout
                android:id="@+id/player_top_holder"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

            <TextView
                    android:id="@+id/player_video_title"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="80dp"
                    android:layout_marginTop="20dp"
                    android:layout_marginEnd="32dp"
                    android:gravity="end"
                    android:textColor="@color/white"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    tools:text="Hello world" />

            <TextView
                    android:id="@+id/player_video_title_rez"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="80dp"
                    android:layout_marginTop="40dp"
                    android:layout_marginEnd="32dp"
                    android:gravity="end"
                    android:textColor="@color/white"
                    android:textSize="16sp"
                    tools:text="1920x1080" />

            <!-- Removed as it has no use anymore-->
            <!--<androidx.mediarouter.app.MediaRouteButton
                    android:id="@+id/player_media_route_button"
                    android:layout_width="70dp"
                    android:layout_height="70dp"
                    android:layout_gravity="end"
                    android:layout_margin="5dp"
                    android:mediaRouteTypes="user"
                    android:visibility="visible"
                    app:layout_constraintRight_toRightOf="parent"
                    app:layout_constraintTop_toTopOf="parent" />-->

            <FrameLayout
                    android:id="@+id/player_go_back_holder"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="5dp"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent">

                <ImageView
                        android:layout_width="30dp"
                        android:layout_height="30dp"
                        android:layout_gravity="center"
                        android:src="@drawable/ic_baseline_arrow_back_24"
                        app:tint="@android:color/white"
                        android:contentDescription="@string/go_back_img_des" />

                <ImageView
                        android:id="@+id/player_go_back"
                        android:layout_width="70dp"
                        android:layout_height="70dp"
                        android:layout_gravity="center"
                        android:background="@drawable/video_tap_button_always_white"
                        android:clickable="true"
                        android:contentDescription="@string/go_back_img_des"
                        android:focusable="true" />
            </FrameLayout>
        </FrameLayout>

        <!--use for thinner app:trackThickness="3dp" com.google.android.material.progressindicator.CircularProgressIndicator-->
        <ProgressBar
                android:id="@+id/player_buffering"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"

                android:clickable="false"
                android:focusable="false"
                android:focusableInTouchMode="false"

                android:indeterminate="true"
                android:visibility="gone"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintLeft_toLeftOf="parent"
                app:layout_constraintRight_toRightOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                tools:visibility="visible" />

        <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="bottom"
                android:layout_marginBottom="20dp"
                android:gravity="center"
                android:orientation="horizontal"
                android:paddingTop="4dp"
                android:visibility="gone"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent">

            <ImageButton
                    android:id="@id/exo_prev"
                    style="@style/ExoMediaButton.Previous"
                    android:tintMode="src_in"
                    app:tint="?attr/colorPrimaryDark"
                    tools:ignore="ContentDescription" />


            <ImageButton
                    android:id="@id/exo_repeat_toggle"
                    style="@style/ExoMediaButton"
                    android:tintMode="src_in"
                    app:tint="?attr/colorPrimaryDark"
                    tools:ignore="ContentDescription" />


            <ImageButton
                    android:id="@id/exo_next"
                    style="@style/ExoMediaButton.Next"
                    android:tintMode="src_in"
                    app:tint="?attr/colorPrimaryDark"
                    tools:ignore="ContentDescription" />

            <ImageButton
                    android:id="@id/exo_vr"
                    style="@style/ExoMediaButton.VR"
                    android:tintMode="src_in"
                    app:tint="?attr/colorPrimaryDark"
                    tools:ignore="ContentDescription" />

            <ImageButton
                    android:id="@id/exo_play"
                    android:layout_width="0dp"
                    android:layout_height="0dp"
                    android:tintMode="src_in"
                    app:tint="?attr/colorPrimaryDark"
                    tools:ignore="ContentDescription" />

            <ImageButton
                    android:id="@id/exo_pause"
                    android:layout_width="0dp"
                    android:layout_height="0dp"
                    android:tintMode="src_in"
                    app:tint="?attr/colorPrimaryDark"
                    tools:ignore="ContentDescription" />
        </LinearLayout>

        <LinearLayout
                android:id="@+id/bottom_player_bar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginStart="64dp"
                android:layout_marginEnd="64dp"
                android:layout_marginBottom="10dp"
                android:gravity="center_vertical"
                android:orientation="vertical"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent">

            <LinearLayout
                    android:id="@+id/player_video_bar"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                <ImageView
                        android:id="@+id/player_pause_play"
                        android:layout_width="30dp"
                        android:layout_height="30dp"
                        android:layout_gravity="center"
                        android:layout_marginStart="20dp"
                        android:background="@drawable/video_tap_button"
                        android:focusable="true"
                        android:focusableInTouchMode="true"
                        android:nextFocusUp="@id/player_go_back"
                        android:nextFocusDown="@id/player_lock"

                        android:src="@drawable/netflix_pause"
                        app:tint="@color/player_button_tv"
                        tools:ignore="ContentDescription" />

                <TextView
                        android:id="@id/exo_position"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:gravity="end"
                        android:includeFontPadding="false"
                        android:minWidth="50dp"
                        android:paddingLeft="4dp"
                        android:paddingRight="4dp"
                        android:textColor="@android:color/white"
                        android:textSize="14sp"
                        android:textStyle="normal"
                        tools:text="15:30" />
                <!--app:buffered_color="@color/videoCache"-->
                <com.google.android.exoplayer2.ui.DefaultTimeBar
                        android:id="@id/exo_progress"
                        android:layout_width="0dp"
                        android:layout_height="30dp"
                        android:layout_gravity="center"
                        android:layout_weight="1"
                        android:focusable="false"
                        android:focusableInTouchMode="false"
                        app:bar_height="2dp"
                        app:played_color="?attr/colorPrimary"
                        app:scrubber_color="?attr/colorPrimary"
                        app:scrubber_dragged_size="26dp"
                        app:scrubber_enabled_size="24dp"
                        app:unplayed_color="@color/videoProgress" />

                <!-- exo_duration-->
                <TextView
                        android:id="@id/exo_duration"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:layout_marginEnd="20dp"
                        android:includeFontPadding="false"
                        android:minWidth="50dp"
                        android:paddingLeft="4dp"
                        android:paddingRight="4dp"
                        android:textColor="@android:color/white"
                        android:textSize="14sp"
                        android:textStyle="normal"
                        tools:text="23:20" />

            </LinearLayout>

            <HorizontalScrollView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center">

                <LinearLayout
                        android:id="@+id/player_lock_holder"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:orientation="horizontal">

                    <com.google.android.material.button.MaterialButton
                            android:id="@+id/player_resize_btt"
                            style="@style/VideoButtonTV"
                            android:nextFocusLeft="@id/player_lock"
                            android:nextFocusRight="@id/player_speed_btt"
                            android:nextFocusUp="@id/player_pause_play"
                            android:text="@string/video_aspect_ratio_resize"
                            app:icon="@drawable/ic_baseline_aspect_ratio_24" />

                    <com.google.android.material.button.MaterialButton
                            android:id="@+id/player_speed_btt"
                            style="@style/VideoButtonTV"
                            android:nextFocusLeft="@id/player_resize_btt"
                            android:nextFocusRight="@id/player_subtitle_offset_btt"
                            android:nextFocusUp="@id/player_pause_play"
                            app:icon="@drawable/ic_baseline_speed_24"
                            tools:text="Speed" />

                    <com.google.android.material.button.MaterialButton
                            android:visibility="gone"
                            tools:visibility="visible"
                            android:id="@+id/player_subtitle_offset_btt"
                            style="@style/VideoButtonTV"
                            android:nextFocusLeft="@id/player_speed_btt"

                            android:nextFocusRight="@id/player_sources_btt"
                            app:icon="@drawable/ic_outline_subtitles_24"
                            android:text="@string/subtitle_offset"/>

                    <com.google.android.material.button.MaterialButton
                            android:id="@+id/player_sources_btt"
                            style="@style/VideoButtonTV"
                            android:nextFocusLeft="@id/player_subtitle_offset_btt"
                            android:nextFocusRight="@id/player_skip_op"
                            android:nextFocusUp="@id/player_pause_play"
                            android:text="@string/video_source"
                            app:icon="@drawable/ic_baseline_playlist_play_24" />

                    <com.google.android.material.button.MaterialButton
                            android:id="@+id/player_skip_op"
                            style="@style/VideoButtonTV"
                            android:nextFocusLeft="@id/player_sources_btt"
                            android:nextFocusRight="@id/player_skip_episode"
                            android:nextFocusUp="@id/player_pause_play"
                            android:text="@string/video_skip_op"
                            app:icon="@drawable/ic_baseline_fast_forward_24" />

                    <com.google.android.material.button.MaterialButton
                            android:id="@+id/player_skip_episode"
                            style="@style/VideoButtonTV"

                            android:nextFocusLeft="@id/player_skip_op"
                            android:nextFocusRight="@id/player_lock"
                            android:nextFocusUp="@id/player_pause_play"
                            android:text="@string/next_episode"
                            app:icon="@drawable/ic_baseline_skip_next_24" />
                </LinearLayout>
            </HorizontalScrollView>
        </LinearLayout>
    </androidx.constraintlayout.widget.ConstraintLayout>

</FrameLayout>



================================================
FILE: app/src/main/res/layout/player_select_source_and_subs.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@null"
        android:orientation="vertical">

    <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginBottom="60dp"
            android:baselineAligned="false"
            android:orientation="horizontal">

        <LinearLayout
                android:id="@+id/sort_sources_holder"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="50"
                android:orientation="vertical">

            <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_rowWeight="1"
                    android:layout_marginTop="10dp"
                    android:paddingStart="?android:attr/listPreferredItemPaddingStart"
                    android:paddingTop="10dp"
                    android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
                    android:paddingBottom="10dp"
                    android:text="@string/pick_source"
                    android:textColor="?attr/textColor"
                    android:textSize="20sp"
                    android:textStyle="bold" />

            <ListView
                    android:requiresFadingEdge="vertical"
                    android:id="@+id/sort_providers"
                    android:layout_width="match_parent"

                    android:layout_height="match_parent"
                    android:layout_rowWeight="1"
                    android:background="?attr/primaryBlackBackground"
                    android:nextFocusLeft="@id/sort_subtitles"
                    android:nextFocusRight="@id/apply_btt"
                    tools:listitem="@layout/sort_bottom_single_choice" />
        </LinearLayout>

        <LinearLayout
                android:id="@+id/sort_subtitles_holder"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="50"
                android:orientation="vertical">

            <!--   android:id="@+id/subs_settings"                 android:foreground="?android:attr/selectableItemBackgroundBorderless"
-->
            <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    tools:ignore="UseCompoundDrawables">

                <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_rowWeight="1"
                        android:layout_marginTop="10dp"
                        android:paddingStart="?android:attr/listPreferredItemPaddingStart"
                        android:paddingTop="10dp"
                        android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
                        android:paddingBottom="10dp"
                        android:text="@string/pick_subtitle"
                        android:textColor="?attr/textColor"
                        android:textSize="20sp"
                        android:textStyle="bold" />

                <ImageView
                        android:layout_width="25dp"
                        android:layout_height="wrap_content"
                        android:layout_gravity="end|center_vertical"
                        android:layout_marginTop="0dp"
                        android:layout_marginEnd="10dp"

                        android:contentDescription="@string/home_change_provider_img_des"
                        android:src="@drawable/ic_outline_settings_24"
                        android:visibility="gone" />
            </LinearLayout>

            <ListView
                    android:requiresFadingEdge="vertical"
                    android:id="@+id/sort_subtitles"
                    android:layout_width="match_parent"

                    android:layout_height="match_parent"
                    android:layout_rowWeight="1"
                    android:background="?attr/primaryBlackBackground"
                    android:nextFocusLeft="@id/sort_providers"
                    android:nextFocusRight="@id/cancel_btt"
                    tools:listfooter="@layout/sort_bottom_footer_add_choice"
                    tools:listitem="@layout/sort_bottom_single_choice" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
            android:id="@+id/apply_btt_holder"
            android:orientation="horizontal"
            android:layout_gravity="bottom"
            android:gravity="bottom|end"
            android:layout_marginTop="-60dp"
            android:layout_width="match_parent"
            android:layout_height="60dp">

        <com.google.android.material.button.MaterialButton
                style="@style/WhiteButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_apply"
                android:id="@+id/apply_btt"
                android:layout_width="wrap_content" />

        <com.google.android.material.button.MaterialButton
                style="@style/BlackButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_cancel"
                android:id="@+id/cancel_btt"
                android:layout_width="wrap_content" />
    </LinearLayout>
</LinearLayout>



================================================
FILE: app/src/main/res/layout/provider_list.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:background="?attr/primaryBlackBackground"
        android:layout_height="match_parent">

    <!--
       app:thumbTint="@color/toggle_selector"
       app:trackTint="@color/toggle_selector"-->
    <com.google.android.material.switchmaterial.SwitchMaterial
            android:id="@+id/toggle1"

            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:layout_marginTop="10dp"
            android:paddingStart="20dp"
            android:paddingEnd="20dp"
            android:textStyle="bold"
            android:textSize="20sp"
            app:useMaterialThemeColors="false"

            android:textColor="?attr/textColor"
            tools:text="Search"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <requestFocus />
    </com.google.android.material.switchmaterial.SwitchMaterial>

    <ListView
            android:nextFocusRight="@id/cancel_btt"
            android:nextFocusLeft="@id/apply_btt"

            android:nextFocusUp="@id/toggle1"
            android:nextFocusDown="@id/apply_btt"

            android:id="@+id/listview1"
            android:layout_marginTop="-10dp"
            android:layout_marginBottom="60dp"
            android:paddingTop="10dp"
            android:requiresFadingEdge="vertical"
            tools:listitem="@layout/sort_bottom_single_choice"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_rowWeight="1" />

    <ListView
            android:nextFocusRight="@id/cancel_btt"
            android:nextFocusLeft="@id/apply_btt"

            android:nextFocusUp="@id/toggle1"
            android:nextFocusDown="@id/apply_btt"

            android:id="@+id/listview2"
            android:layout_marginTop="-10dp"
            android:layout_marginBottom="60dp"
            android:paddingTop="10dp"
            android:requiresFadingEdge="vertical"
            tools:listitem="@layout/sort_bottom_single_choice"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_rowWeight="1" />

    <LinearLayout
            android:id="@+id/apply_btt_holder"
            android:orientation="horizontal"
            android:layout_gravity="bottom"
            android:gravity="bottom|end"
            android:layout_marginTop="-60dp"
            android:layout_width="match_parent"
            android:layout_height="60dp">

        <com.google.android.material.button.MaterialButton
                android:nextFocusRight="@id/cancel_btt"
                android:nextFocusLeft="@id/cancel_btt"

                android:id="@+id/apply_btt"
                style="@style/WhiteButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_apply"
                android:layout_width="wrap_content" />

        <com.google.android.material.button.MaterialButton
                android:nextFocusLeft="@id/apply_btt"
                android:nextFocusRight="@id/apply_btt"

                android:id="@+id/cancel_btt"
                style="@style/BlackButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_cancel"
                android:layout_width="wrap_content" />
    </LinearLayout>
</LinearLayout>



================================================
FILE: app/src/main/res/layout/quick_search.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"

        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/quick_search_root"
        android:background="?attr/primaryGrayBackground"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

    <LinearLayout
            android:visibility="visible"
            android:layout_margin="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <ImageView
                android:id="@+id/quick_search_back"
                android:layout_gravity="center"
                android:foregroundGravity="center"
                android:background="?android:attr/selectableItemBackgroundBorderless"
                android:src="@drawable/ic_baseline_arrow_back_24"
                app:tint="@android:color/white"
                android:layout_width="25dp"
                android:layout_height="wrap_content">

            <requestFocus />
        </ImageView>

        <FrameLayout
                android:layout_marginStart="10dp"
                android:background="@drawable/search_background"
                android:layout_gravity="center_vertical"
                android:layout_width="match_parent"
                android:layout_height="40dp">

            <androidx.appcompat.widget.SearchView
                    android:nextFocusRight="@id/search_filter"
                    android:nextFocusLeft="@id/search_filter"
                    android:nextFocusDown="@id/search_autofit_results"

                    android:imeOptions="actionSearch"
                    android:inputType="text"

                    android:id="@+id/quick_search"
                    app:queryBackground="@color/transparent"

                    app:searchIcon="@drawable/search_icon"
                    android:paddingStart="-10dp"
                    android:iconifiedByDefault="false"
                    app:queryHint="@string/search_hint"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_gravity="center_vertical"
                    app:iconifiedByDefault="false"
                    tools:ignore="RtlSymmetry">

                <androidx.core.widget.ContentLoadingProgressBar
                        android:id="@+id/quick_search_loading_bar"
                        android:layout_width="20dp"
                        android:layout_height="20dp"
                        android:layout_marginStart="-35dp"
                        style="@style/Widget.AppCompat.ProgressBar"
                        android:foregroundTint="@color/white"
                        android:progressTint="@color/white"
                        android:layout_gravity="center">

                </androidx.core.widget.ContentLoadingProgressBar>
                <!--app:queryHint="@string/search_hint"
                 android:background="@color/grayBackground" @color/itemBackground
                            app:searchHintIcon="@drawable/search_white"
                            -->
            </androidx.appcompat.widget.SearchView>
        </FrameLayout>
    </LinearLayout>

    <androidx.recyclerview.widget.RecyclerView
            android:descendantFocusability="afterDescendants"

            android:background="?attr/primaryBlackBackground"
            android:id="@+id/quick_search_master_recycler"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            tools:listitem="@layout/homepage_parent" />

    <com.lagradost.cloudstream3.ui.AutofitRecyclerView
            android:visibility="gone"
            android:nextFocusLeft="@id/nav_rail_view"
            android:descendantFocusability="afterDescendants"

            android:background="?attr/primaryBlackBackground"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:paddingStart="8dp"
            android:paddingTop="5dp"
            app:spanCount="3"
            android:paddingEnd="8dp"
            android:id="@+id/quick_search_autofit_results"
            tools:listitem="@layout/search_result_grid"
            android:orientation="vertical" />
</LinearLayout>


================================================
FILE: app/src/main/res/layout/result_episode.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"

        android:nextFocusLeft="@id/result_episode_download"
        android:nextFocusRight="@id/result_episode_download"

        android:id="@+id/episode_holder"
        android:layout_width="match_parent"
        android:layout_height="50dp"

        app:cardCornerRadius="@dimen/rounded_image_radius"
        app:cardBackgroundColor="@color/transparent"
        app:cardElevation="0dp"
        android:foreground="@drawable/outline_drawable"
        android:layout_marginBottom="5dp">
    <!-- IDK BUT THIS DOES NOT SEAM LIKE A GOOD WAY OF DOING IT -->
    <!--<LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
        <View
                android:layout_weight="0.5"
                android:id="@+id/episode_view_procentage"
                android:alpha="0.2"
                android:background="?attr/colorPrimary"
                android:layout_width="0dp"
                android:layout_height="match_parent">
        </View>
        <View
                android:id="@+id/episode_view_procentage_off"
                android:layout_weight="0.10"
                android:alpha="0"
                android:background="@color/transparent"
                android:layout_width="0dp"
                android:layout_height="match_parent">
        </View>
    </LinearLayout>-->
    <androidx.core.widget.ContentLoadingProgressBar
            android:layout_marginBottom="-1.5dp"
            android:id="@+id/episode_progress"
            android:progressTint="?attr/colorPrimary"
            android:progressBackgroundTint="?attr/colorPrimary"
            style="@android:style/Widget.Material.ProgressBar.Horizontal"
            android:layout_width="match_parent"
            tools:progress="50"
            android:layout_gravity="bottom"
            android:layout_height="5dp" />

    <LinearLayout
            android:foreground="?android:attr/selectableItemBackgroundBorderless"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <ImageView
                app:tint="?attr/textColor"
                android:layout_marginStart="10dp"
                android:layout_marginEnd="10dp"
                android:layout_gravity="center_vertical"
                android:id="@+id/episode_play"
                android:src="@drawable/ic_baseline_play_arrow_24"
                android:contentDescription="@string/episode_play_img_des"
                android:layout_height="match_parent"
                android:layout_width="wrap_content" />
        <!--marquee_forever-->
        <com.google.android.material.button.MaterialButton
                android:layout_gravity="center"
                style="@style/SmallBlackButton"
                android:text="@string/filler"
                android:id="@+id/episode_filler" />

        <TextView
                android:id="@+id/episode_text"
                android:layout_marginStart="10dp"
                android:layout_marginEnd="50dp"
                android:layout_gravity="center_vertical"
                android:gravity="center_vertical"
                tools:text="Episode 1"
                android:textColor="?attr/textColor"

                android:scrollHorizontally="true"
                android:ellipsize="marquee"

                android:marqueeRepeatLimit="0"
                android:singleLine="true"

                android:layout_width="match_parent"
                android:layout_height="match_parent" />
    </LinearLayout>

    <FrameLayout
            android:layout_gravity="end"
            android:layout_width="wrap_content"
            android:layout_height="match_parent">

        <androidx.core.widget.ContentLoadingProgressBar
                android:layout_marginEnd="10dp"
                android:layout_marginStart="10dp"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:id="@+id/result_episode_progress_downloaded"
                android:indeterminate="false"
                android:progressDrawable="@drawable/circular_progress_bar"
                android:background="@drawable/circle_shape"
                style="?android:attr/progressBarStyleHorizontal"
                android:max="100"
                android:layout_margin="5dp"
                android:layout_gravity="end|center_vertical"
                android:progress="0"
                android:visibility="visible" />

        <ImageView
                android:nextFocusLeft="@id/episode_holder"
                android:nextFocusRight="@id/episode_holder"

                app:tint="?attr/white"

                android:id="@+id/result_episode_download"
                android:visibility="visible"
                android:layout_marginEnd="10dp"
                android:layout_marginStart="10dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:padding="2dp"
                android:layout_width="30dp"
                android:background="?selectableItemBackgroundBorderless"
                android:src="@drawable/ic_baseline_play_arrow_24"
                android:contentDescription="@string/download" />
    </FrameLayout>
</androidx.cardview.widget.CardView>


================================================
FILE: app/src/main/res/layout/result_episode_large.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"

        android:nextFocusLeft="@id/episode_poster"
        android:nextFocusRight="@id/result_episode_download"
        android:id="@+id/episode_holder"

        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:cardCornerRadius="@dimen/rounded_image_radius"
        app:cardBackgroundColor="?attr/boxItemBackground"

        android:foreground="@drawable/outline_drawable"
        android:layout_marginBottom="10dp">

    <LinearLayout
            android:foreground="?android:attr/selectableItemBackgroundBorderless"
            android:padding="10dp"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <LinearLayout
                android:layout_width="match_parent"
                android:orientation="horizontal"
                android:layout_height="wrap_content">
            <!--app:cardCornerRadius="@dimen/roundedImageRadius"-->
            <androidx.cardview.widget.CardView
                    android:layout_width="126dp"
                    android:layout_height="72dp"
                    android:foreground="@drawable/outline_drawable">

                <ImageView
                        android:nextFocusLeft="@id/result_episode_download"
                        android:nextFocusRight="@id/episode_holder"

                        android:id="@+id/episode_poster"
                        tools:src="@drawable/example_poster"
                        android:foreground="?android:attr/selectableItemBackgroundBorderless"

                        android:scaleType="centerCrop"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:contentDescription="@string/episode_poster_img_des" />

                <ImageView
                        android:src="@drawable/play_button"
                        android:layout_gravity="center"
                        android:layout_width="36dp"
                        android:layout_height="36dp"
                        android:contentDescription="@string/play_episode" />

                <androidx.core.widget.ContentLoadingProgressBar
                        android:layout_marginBottom="-1.5dp"
                        android:id="@+id/episode_progress"
                        android:progressTint="?attr/colorPrimary"
                        android:progressBackgroundTint="?attr/colorPrimary"
                        style="@android:style/Widget.Material.ProgressBar.Horizontal"
                        android:layout_width="match_parent"
                        tools:progress="50"
                        android:layout_gravity="bottom"
                        android:layout_height="5dp" />
            </androidx.cardview.widget.CardView>

            <LinearLayout
                    android:layout_marginStart="15dp"
                    android:orientation="vertical"
                    android:layout_gravity="center"
                    android:layout_width="match_parent"
                    android:layout_marginEnd="50dp"
                    android:layout_height="wrap_content">

                <LinearLayout
                        android:orientation="horizontal"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content">

                    <com.google.android.material.button.MaterialButton
                            android:layout_gravity="start"
                            style="@style/SmallBlackButton"
                            android:layout_marginEnd="10dp"
                            android:text="@string/filler"
                            android:id="@+id/episode_filler" />

                    <TextView
                            android:layout_gravity="center_vertical"
                            android:id="@+id/episode_text"
                            tools:text="1. Jobless"
                            android:textStyle="bold"
                            android:textColor="?attr/textColor"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                </LinearLayout>

                <TextView
                        android:id="@+id/episode_rating"
                        tools:text="Rated: 8.8"
                        android:textColor="?attr/grayTextColor"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />
            </LinearLayout>

            <FrameLayout
                    android:layout_marginStart="-50dp"
                    android:layout_gravity="end"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent">

                <androidx.core.widget.ContentLoadingProgressBar
                        android:layout_marginEnd="10dp"
                        android:layout_marginStart="10dp"
                        android:layout_width="40dp"
                        android:layout_height="40dp"
                        android:id="@+id/result_episode_progress_downloaded"
                        android:indeterminate="false"
                        android:progressDrawable="@drawable/circular_progress_bar"
                        android:background="@drawable/circle_shape"
                        style="?android:attr/progressBarStyleHorizontal"
                        android:max="100"
                        android:layout_margin="5dp"
                        android:layout_gravity="end|center_vertical"
                        android:progress="0"
                        android:visibility="visible" />

                <ImageView
                        android:nextFocusLeft="@id/episode_poster"
                        android:nextFocusRight="@id/episode_holder"
                        android:id="@+id/result_episode_download"

                        android:visibility="visible"
                        android:layout_marginEnd="10dp"
                        android:layout_marginStart="10dp"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_vertical"
                        android:padding="2dp"
                        android:layout_width="30dp"
                        android:background="?selectableItemBackgroundBorderless"
                        android:src="@drawable/ic_baseline_play_arrow_24"
                        android:contentDescription="@string/download"
                        app:tint="?attr/white" />
            </FrameLayout>
        </LinearLayout>

        <TextView
                android:paddingTop="10dp"
                android:paddingBottom="10dp"
                android:id="@+id/episode_descript"
                android:textColor="?attr/grayTextColor"
                tools:text="Jon and Daenerys arrive in Winterfell and are met with skepticism. Sam learns about the fate of his family. Cersei gives Euron the reward he aims for. Theon follows his heart. "
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
    </LinearLayout>
</androidx.cardview.widget.CardView>


================================================
FILE: app/src/main/res/layout/result_mini_image.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="35dp"
        android:layout_height="35dp"
        android:layout_gravity="center"
        tools:src="@drawable/ic_anilist_icon"
        android:background="?android:attr/selectableItemBackgroundBorderless"
        app:tint="?attr/white">
</ImageView>


================================================
FILE: app/src/main/res/layout/result_poster.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="?attr/primaryBlackBackground" >
    <ImageView
        android:id="@+id/imgPoster"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:scaleType="fitCenter"
        android:adjustViewBounds="true"
        android:src="@drawable/default_cover"
        android:background="#fffff0"
        android:contentDescription="@string/poster_image"
        />
</LinearLayout>


================================================
FILE: app/src/main/res/layout/result_recommendations.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <LinearLayout
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <com.google.android.material.button.MaterialButton
                style="@style/BlackButton"
                android:layout_gravity="center_vertical|end"
                android:text="GogoAnime"
                android:id="@+id/result_recommendations_filter_button"
                android:layout_width="match_parent"
                android:layout_marginTop="10dp"
                android:layout_marginBottom="10dp"
                android:layout_marginStart="0dp"
                android:layout_marginEnd="0dp"
                app:layout_constraintBottom_toTopOf="@id/result_recommendations" />

        <com.lagradost.cloudstream3.ui.AutofitRecyclerView
                android:descendantFocusability="afterDescendants"

                android:background="?attr/primaryBlackBackground"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:clipToPadding="false"
                app:spanCount="3"
                android:id="@+id/result_recommendations"
                tools:listitem="@layout/search_result_grid"
                android:orientation="vertical" />
    </LinearLayout>
</androidx.core.widget.NestedScrollView>


================================================
FILE: app/src/main/res/layout/result_sync.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"

        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <ScrollView
            android:id="@+id/result_sync_holder"
            tools:visibility="visible"
            android:visibility="gone"
            android:padding="16dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

            <TextView
                    android:id="@+id/result_sync_names"
                    android:textStyle="bold"
                    android:textSize="16sp"
                    android:layout_marginBottom="10dp"
                    android:text="MyAnimeList, AniList"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            <LinearLayout
                    android:visibility="visible"
                    android:orientation="horizontal"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                <ImageView
                        android:id="@+id/result_sync_sub_episode"
                        android:padding="10dp"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:background="?android:attr/selectableItemBackgroundBorderless"
                        android:src="@drawable/baseline_remove_24"
                        android:layout_gravity="end|center_vertical"
                        app:tint="?attr/textColor" />

                <EditText
                        android:id="@+id/result_sync_current_episodes"
                        style="@style/AppEditStyle"
                        tools:hint="20"
                        android:textSize="20sp"
                        android:inputType="number"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        tools:ignore="LabelFor" />

                <TextView
                        android:id="@+id/result_sync_max_episodes"
                        android:layout_gravity="center_vertical"
                        android:paddingBottom="1dp"
                        android:textSize="20sp"
                        android:textColor="?attr/textColor"
                        tools:text="30"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />

                <ImageView
                        android:id="@+id/result_sync_add_episode"
                        android:padding="10dp"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:background="?android:attr/selectableItemBackgroundBorderless"
                        android:src="@drawable/ic_baseline_add_24"
                        android:layout_gravity="end|center_vertical"
                        app:tint="?attr/textColor" />
            </LinearLayout>

            <androidx.core.widget.ContentLoadingProgressBar
                    android:id="@+id/result_sync_episodes"
                    android:padding="10dp"
                    android:layout_width="match_parent"
                    android:layout_height="20dp"
                    android:progress="0"
                    android:indeterminate="false"
                    android:progressBackgroundTint="?attr/colorPrimary"
                    style="?android:attr/progressBarStyleHorizontal"
                    android:max="100"
                    android:layout_gravity="end|center_vertical"
                    tools:visibility="visible" />

            <!--
                    <LinearLayout
                            android:layout_marginBottom="10dp"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content">


                        <TextView
                                android:layout_gravity="center_vertical"
                                android:padding="10dp"
                                android:textSize="17sp"
                                android:textColor="?attr/textColor"
                                android:text="Status:"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content" />

                        <com.google.android.material.button.MaterialButton
                                android:layout_height="30dp"
                                android:text="Watching"
                                android:minWidth="0dp"
                                android:layout_width="wrap_content"
                                android:layout_gravity="center_vertical"
                                android:layout_marginStart="0dp"
                                style="@style/BlackButton" />
                    </LinearLayout>

                    <GridLayout
                            android:orientation="horizontal"
                            android:columnCount="2"

                            android:layout_width="match_parent"
                            android:layout_height="wrap_content">

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/sync_completed"
                                android:nextFocusRight="@id/sync_on_hold"
                                android:nextFocusDown="@id/sync_plan_to_watch"

                                android:layout_row="0"
                                android:layout_column="0"
                                android:text="@string/type_completed"
                                style="@style/SyncButton" />

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/sync_on_hold"
                                android:nextFocusDown="@id/sync_watching"
                                android:nextFocusLeft="@id/sync_completed"

                                android:layout_row="0"
                                android:layout_column="1"
                                style="@style/SyncButton"
                                android:text="@string/type_on_hold" />

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/sync_plan_to_watch"
                                android:nextFocusRight="@id/sync_plan_to_watch"
                                android:nextFocusDown="@id/sync_dropped"
                                android:nextFocusUp="@id/sync_completed"

                                android:layout_row="1"
                                android:layout_column="0"
                                android:text="@string/type_plan_to_watch"
                                style="@style/SyncButton"
                                />

                        <com.google.android.material.button.MaterialButton
                                android:id="@+id/sync_watching"
                                android:nextFocusLeft="@id/sync_plan_to_watch"
                                android:nextFocusDown="@id/sync_dropped"
                                android:nextFocusUp="@id/sync_on_hold"

                                android:layout_row="1"
                                android:layout_column="1"

                                style="@style/SyncButton"
                                android:text="@string/type_watching" />

                    </GridLayout>

            <com.google.android.material.button.MaterialButton
                    android:id="@+id/sync_dropped"
                    android:nextFocusUp="@id/sync_plan_to_watch"

                    android:layout_width="match_parent"
                    style="@style/SyncButton"

                    android:text="@string/type_dropped" />-->

            <LinearLayout
                    android:orientation="horizontal"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                <TextView
                        android:layout_gravity="center_vertical"
                        android:padding="10dp"
                        android:textSize="17sp"
                        android:textColor="?attr/textColor"
                        android:text="@string/sync_score"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />

                <com.google.android.material.button.MaterialButton
                        android:id="@+id/result_sync_score_text"

                        android:layout_height="30dp"
                        android:text="7/10"
                        android:minWidth="0dp"
                        android:layout_width="wrap_content"
                        android:layout_gravity="center_vertical"
                        android:layout_marginStart="0dp"
                        style="@style/BlackButton" />
            </LinearLayout>

            <com.google.android.material.slider.Slider
                    android:id="@+id/result_sync_rating"
                    android:valueFrom="0"
                    android:valueTo="10"
                    android:value="4"
                    android:stepSize="1"
                    app:tickVisible="false"
                    android:layout_marginStart="-5dp"
                    android:layout_marginEnd="-5dp"
                    app:thumbRadius="10dp"
                    app:labelStyle="@style/BlackLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            <FrameLayout
                    android:visibility="gone"
                    android:paddingTop="12dp"
                    android:paddingBottom="12dp"
                    android:orientation="horizontal"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                <TextView
                        android:id="@+id/home_parent_item_title"
                        style="@style/WatchHeaderText"
                        tools:text="Recommended" />

                <ImageView
                        app:tint="?attr/textColor"
                        android:layout_marginEnd="5dp"
                        android:layout_gravity="end|center_vertical"
                        android:src="@drawable/ic_baseline_arrow_forward_24"
                        android:layout_width="30dp"
                        android:layout_height="match_parent"
                        android:contentDescription="@string/home_more_info" />
            </FrameLayout>

            <ListView
                    android:id="@+id/result_sync_check"
                    tools:listitem="@layout/sort_bottom_single_choice"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_rowWeight="1" />

            <com.google.android.material.button.MaterialButton
                    android:visibility="gone"
                    android:layout_marginTop="10dp"
                    android:layout_width="match_parent"
                    style="@style/WhiteButton"
                    android:text="@string/type_watching" />

            <com.google.android.material.button.MaterialButton
                    android:id="@+id/result_sync_set_score"
                    android:layout_marginTop="10dp"
                    android:layout_width="match_parent"
                    style="@style/BlackButton"
                    app:icon="@drawable/baseline_sync_24"
                    android:text="@string/upload_sync" />
        </LinearLayout>

    </ScrollView>

    <com.facebook.shimmer.ShimmerFrameLayout
            tools:visibility="gone"
            android:id="@+id/result_sync_loading_shimmer"
            app:shimmer_base_alpha="0.2"
            app:shimmer_highlight_alpha="0.3"
            app:shimmer_duration="@integer/loading_time"
            app:shimmer_auto_start="true"
            android:padding="15dp"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:orientation="vertical">

        <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

            <Space
                    android:layout_width="match_parent"
                    android:layout_height="30dp" />

            <include layout="@layout/loading_line_short" />

            <include layout="@layout/loading_line" />

            <Space
                    android:layout_width="match_parent"
                    android:layout_height="30dp" />

            <include layout="@layout/loading_line_short" />

            <include layout="@layout/loading_line" />

            <Space
                    android:layout_width="match_parent"
                    android:layout_height="30dp" />

            <include layout="@layout/loading_line_short" />

            <include layout="@layout/loading_line_short" />

            <include layout="@layout/loading_line_short" />

            <include layout="@layout/loading_line_short" />

            <include layout="@layout/loading_line_short" />

            <Space
                    android:layout_width="match_parent"
                    android:layout_height="30dp" />

            <include layout="@layout/loading_line" />

            <include layout="@layout/loading_line" />

        </LinearLayout>
    </com.facebook.shimmer.ShimmerFrameLayout>
</FrameLayout>


================================================
FILE: app/src/main/res/layout/result_tag.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="-4dp"
    android:layout_marginBottom="-4dp"
    android:paddingLeft="2dp"
    android:paddingTop="-10dp"
    android:paddingRight="2dp">
    <!--app:strokeColor="@color/colorAccent"-->

    <com.google.android.material.button.MaterialButton
        android:id="@+id/result_tag_card"
        style="@style/Tag"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:minWidth="0dp"
        android:minHeight="0dp"
        android:textAllCaps="false"
        android:textColor="?attr/textColor"
        android:textSize="12sp"
        app:cornerRadius="100dp"
        tools:text="Test">

    </com.google.android.material.button.MaterialButton>
</FrameLayout>


================================================
FILE: app/src/main/res/layout/search_history_item.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:id="@+id/home_history_tab"
        android:foreground="?android:attr/selectableItemBackgroundBorderless"
        android:nextFocusRight="@id/home_history_remove">

    <TextView
            android:id="@+id/home_history_title"
            android:textColor="?attr/textColor"
            android:textSize="18sp"
            tools:text="Hello World"
            android:padding="10dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintBottom_toBottomOf="parent" />

    <ImageView
            android:padding="10dp"
            android:id="@+id/home_history_remove"
            android:nextFocusLeft="@id/home_history_tab"
            android:background="?android:attr/selectableItemBackgroundBorderless"

            android:src="@drawable/ic_baseline_close_24"
            android:layout_width="wrap_content"
            android:layout_gravity="center_vertical|end"
            android:layout_height="match_parent"
            app:tint="?attr/white"
            tools:ignore="ContentDescription"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintEnd_toEndOf="parent" />
</androidx.constraintlayout.widget.ConstraintLayout>



================================================
FILE: app/src/main/res/layout/search_result_compact.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="80dp"
        android:layout_marginBottom="0dp"
        android:layoutDirection="ltr">

    <androidx.cardview.widget.CardView
            android:foreground="?android:attr/selectableItemBackgroundBorderless"

            android:id="@+id/background_card"
            android:layout_margin="2dp"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginBottom="2dp"
            android:elevation="0dp"

            app:cardCornerRadius="@dimen/rounded_image_radius"
            app:cardBackgroundColor="?attr/boxItemBackground"
            android:clickable="true"
            android:focusable="true">

        <androidx.cardview.widget.CardView
                android:elevation="0dp"
                app:cardCornerRadius="@dimen/rounded_image_radius"
                android:layout_width="54dp"
                android:layout_height="match_parent">

            <ImageView
                    android:layout_gravity="left"
                    android:id="@+id/imageView"
                    android:scaleType="centerCrop"
                    android:layout_height="match_parent"
                    android:layout_width="match_parent"
                    android:foreground="?android:attr/selectableItemBackgroundBorderless"
                    tools:ignore="RtlHardcoded" />
        </androidx.cardview.widget.CardView>

        <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:layout_gravity="center_vertical"
                android:layout_marginStart="64dp">

            <TextView
                    tools:text="@string/no_data"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:textSize="17sp"
                    android:textColor="?attr/textColor"
                    android:id="@+id/imageText"
                    android:textStyle="bold"
                    android:maxLines="3" />

            <TextView
                    tools:text="@string/no_data"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:textColor="?attr/grayTextColor"
                    android:id="@+id/imageTextExtra"
                    android:textSize="13sp"
                    android:textStyle="bold"
                    android:maxLines="3" />

            <TextView
                    tools:text="Rated 4.13"
                    android:visibility="gone"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:textColor="?attr/colorPrimary"
                    android:id="@+id/imageTextProvider"
                    android:maxLines="1" />
        </LinearLayout>

    </androidx.cardview.widget.CardView>
</LinearLayout>


================================================
FILE: app/src/main/res/layout/search_result_grid.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"

        android:foreground="@drawable/outline_drawable"
        android:focusable="true"
        android:clickable="true"
        android:id="@+id/search_result_root">

    <androidx.cardview.widget.CardView
            android:layout_margin="2dp"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginBottom="2dp"
            android:elevation="10dp"
            app:cardCornerRadius="@dimen/rounded_image_radius"
            android:id="@+id/background_card"
            app:cardBackgroundColor="?attr/primaryGrayBackground">

        <ImageView
                android:id="@+id/imageView"

                android:duplicateParentState="true"
                android:scaleType="centerCrop"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:foreground="?android:attr/selectableItemBackgroundBorderless"
                android:contentDescription="@string/search_poster_img_des" />

        <ImageView
                android:focusable="false"
                android:clickable="false"
                android:layout_width="match_parent"
                android:layout_height="50dp"
                android:id="@+id/title_shadow"
                android:src="@drawable/title_shadow"
                android:layout_gravity="bottom"
                tools:ignore="ContentDescription" />

        <TextView
                android:id="@+id/imageText"

                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:layout_gravity="bottom"
                android:paddingBottom="5dp"
                android:paddingTop="5dp"
                android:textColor="@color/textColor"
                android:textStyle="bold"
                android:maxLines="2"
                android:paddingStart="5dp"
                android:paddingEnd="5dp"
                android:ellipsize="end" />

        <TextView
                tools:text="@string/quality_hd"
                android:id="@+id/text_quality"
                android:textColor="@color/textColor"
                style="@style/SearchBox"
                android:background="@drawable/type_bg_color" />

        <LinearLayout
                android:orientation="vertical"
                android:layout_gravity="end"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

            <TextView
                    android:text="@string/app_dubbed_text"
                    android:id="@+id/text_is_dub"
                    android:layout_gravity="end"
                    style="@style/SearchBox"
                    android:background="@drawable/dub_bg_color" />

            <TextView
                    android:id="@+id/text_is_sub"
                    android:text="@string/app_subbed_text"
                    android:layout_gravity="end"
                    style="@style/SearchBox"
                    android:background="@drawable/sub_bg_color" />
        </LinearLayout>
    </androidx.cardview.widget.CardView>

</FrameLayout>


================================================
FILE: app/src/main/res/layout/search_result_grid_expanded.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"

        android:foreground="@drawable/outline_drawable"
        android:focusable="true"
        android:clickable="true"
        android:id="@+id/search_result_root">

        <androidx.cardview.widget.CardView
                android:layout_margin="2dp"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_marginBottom="2dp"
                android:elevation="10dp"
                app:cardCornerRadius="@dimen/rounded_image_radius"
                android:id="@+id/background_card"
                app:cardBackgroundColor="?attr/primaryGrayBackground">

            <ImageView
                    android:id="@+id/imageView"
                    tools:src="@drawable/example_poster"

                    android:duplicateParentState="true"
                    android:scaleType="centerCrop"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:foreground="?android:attr/selectableItemBackgroundBorderless"
                    android:contentDescription="@string/search_poster_img_des" />

            <TextView
                    tools:text="@string/quality_hd"
                    android:id="@+id/text_quality"
                    android:textColor="@color/textColor"
                    style="@style/SearchBox"
                    android:background="@drawable/type_bg_color" />

            <LinearLayout
                    android:orientation="vertical"
                    android:layout_gravity="end"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent">

                <TextView
                        android:text="@string/app_dubbed_text"
                        android:id="@+id/text_is_dub"
                        android:layout_gravity="end"
                        style="@style/SearchBox"
                        android:background="@drawable/dub_bg_color" />

                <TextView
                        android:id="@+id/text_is_sub"
                        android:text="@string/app_subbed_text"
                        android:layout_gravity="end"
                        style="@style/SearchBox"
                        android:background="@drawable/sub_bg_color" />
            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <TextView
                tools:text="The Perfect Run\nThe Perfect Run"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textSize="13sp"
                android:gravity="center"
                android:layout_gravity="bottom"
                android:paddingBottom="5dp"
                android:paddingTop="5dp"
                android:textColor="@color/textColor"
                android:id="@+id/imageText"
                android:minLines="2"
                android:maxLines="2"
                android:paddingStart="5dp"
                android:paddingEnd="5dp"
                android:ellipsize="end" />
</LinearLayout>


================================================
FILE: app/src/main/res/layout/search_result_super_compact.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_marginBottom="3dp">

    <androidx.cardview.widget.CardView
            android:foreground="?android:attr/selectableItemBackgroundBorderless"
            android:id="@+id/background_card"
            android:layout_margin="2dp"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginBottom="10dp"
            android:elevation="0dp"
            app:cardCornerRadius="@dimen/rounded_image_radius"
            app:cardBackgroundColor="?attr/boxItemBackground"
            android:clickable="true"
            android:focusable="true">
        <!-- USING CROP RATIO (182/268), centerCrop for fill -->
        <androidx.cardview.widget.CardView
                app:cardCornerRadius="@dimen/rounded_image_radius"
                android:layout_width="35dp"
                android:elevation="0dp"
                android:layout_height="match_parent">

            <ImageView
                    android:layout_gravity="left"
                    android:id="@+id/imageView"
                    android:scaleType="centerCrop"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:foreground="?android:attr/selectableItemBackgroundBorderless"
                    tools:ignore="RtlHardcoded"
                    android:contentDescription="@string/search_poster_img_des" />
        </androidx.cardview.widget.CardView>

        <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:layout_gravity="center_vertical"
                android:layout_marginStart="45dp">

            <TextView
                    tools:text="@string/no_data"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:textSize="17sp"
                    android:textColor="?attr/textColor"
                    android:id="@+id/imageText"
                    android:textStyle="normal"
                    android:maxLines="3" />

            <TextView
                    tools:text="@string/no_data"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:visibility="gone"
                    android:textColor="?attr/grayTextColor"
                    android:id="@+id/imageTextExtra"
                    android:textSize="13sp"
                    android:textStyle="bold"
                    android:maxLines="3" />

            <TextView
                    tools:text="Rated 4.13"
                    android:visibility="gone"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:textColor="?attr/colorPrimary"
                    android:id="@+id/imageTextProvider"
                    android:maxLines="1" />
        </LinearLayout>
    </androidx.cardview.widget.CardView>
</LinearLayout>


================================================
FILE: app/src/main/res/layout/sort_bottom_footer_add_choice.xml
================================================
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        style="@style/CheckLabel"
        android:id="@android:id/text1"
        tools:text="hello"
        app:drawableStartCompat="@drawable/ic_baseline_add_24" />


================================================
FILE: app/src/main/res/layout/sort_bottom_sheet.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:background="@null"
        android:layout_height="match_parent">

    <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:orientation="vertical"
            android:layout_weight="50">

        <TextView
                android:paddingStart="?android:attr/listPreferredItemPaddingStart"
                android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
                android:layout_marginTop="20dp"
                android:layout_marginBottom="10dp"
                android:textStyle="bold"
                android:text="@string/pick_source"
                android:textSize="20sp"
                android:textColor="?attr/textColor"
                android:layout_width="match_parent"
                android:layout_rowWeight="1"
                android:layout_height="wrap_content" />

        <ListView
                android:layout_marginTop="-10dp"
                android:paddingTop="10dp"
                android:id="@+id/sort_providers"
                android:background="?attr/primaryBlackBackground"
                android:requiresFadingEdge="vertical"
                tools:listitem="@layout/sort_bottom_single_choice"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_rowWeight="1" />
    </LinearLayout>

    <LinearLayout
            android:id="@+id/sort_subtitles_holder"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:orientation="vertical"
            android:layout_weight="50">

        <TextView
                android:paddingStart="?android:attr/listPreferredItemPaddingStart"
                android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
                android:layout_marginTop="20dp"
                android:layout_marginBottom="10dp"
                android:textStyle="bold"
                android:text="@string/pick_subtitle"
                android:textSize="20sp"
                android:textColor="?attr/textColor"
                android:layout_rowWeight="1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />

        <ListView
                android:layout_marginTop="-10dp"
                android:paddingTop="10dp"
                android:id="@+id/sort_subtitles"
                android:background="?attr/primaryBlackBackground"
                android:requiresFadingEdge="vertical"
                tools:listitem="@layout/sort_bottom_single_choice"
                android:layout_width="match_parent"
                android:layout_rowWeight="1"
                android:layout_height="match_parent" />
    </LinearLayout>
</LinearLayout>



================================================
FILE: app/src/main/res/layout/sort_bottom_single_choice.xml
================================================
<!--<CheckedTextView
        xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools"
        android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="?android:attr/listPreferredItemHeightSmall"
        android:textAppearance="?android:attr/textAppearanceListItemSmall"
        android:gravity="center_vertical"
        android:textColor="?attr/textColor"
        tools:text="Example Text"
        android:background="?attr/bitDarkerGrayBackground"
        android:checkMark="?android:attr/listChoiceIndicatorSingle"
        android:paddingStart="?android:attr/listPreferredItemPaddingStart"
        android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"/>
-->

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        style="@style/CheckLabel"
        tools:text="hello"
        android:id="@android:id/text1" />



================================================
FILE: app/src/main/res/layout/sort_bottom_single_choice_color.xml
================================================
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        style="@style/AppTextViewStyle"
        android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minHeight="?android:attr/listPreferredItemHeightSmall"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@color/text_selection_color"
        android:textSize="16sp"
        android:textStyle="bold"
        android:gravity="center_vertical"
        android:paddingStart="12dp"
        android:paddingEnd="7dip"
        tools:text="TEST"
        android:checkMark="?android:attr/listChoiceIndicatorSingle"
        android:ellipsize="marquee"
        android:foreground="?attr/selectableItemBackgroundBorderless" />



================================================
FILE: app/src/main/res/layout/subtitle_offset.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="300dp"
        android:layout_height="match_parent"
        xmlns:app="http://schemas.android.com/apk/res-auto">

    <TextView
            style="@style/WatchHeaderText"
            android:layout_margin="0dp"
            android:paddingTop="10dp"
            android:text="@string/subtitle_offset_title"
            android:layout_gravity="center"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

    <TextView
            android:id="@+id/subtitle_offset_sub_title"
            android:layout_gravity="center"
            tools:text="@string/subtitle_offset_extra_hint_none_format"
            android:textColor="?attr/grayTextColor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    <LinearLayout
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <ImageView
                android:id="@+id/subtitle_offset_subtract"
                android:background="?android:attr/selectableItemBackgroundBorderless"
                android:padding="10dp"
                android:layout_weight="1"
                android:layout_gravity="center"
                android:src="@drawable/baseline_remove_24"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                app:tint="?attr/white"
                tools:ignore="ContentDescription" />
        <EditText
                android:layout_weight="20"
                android:id="@+id/subtitle_offset_input"
                android:inputType="numberSigned"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:hint="@string/subtitle_offset_hint"
                tools:ignore="LabelFor" />

        <ImageView
                android:id="@+id/subtitle_offset_add"
                android:background="?android:attr/selectableItemBackgroundBorderless"
                android:padding="10dp"
                android:layout_weight="1"
                android:layout_gravity="center"
                android:src="@drawable/ic_baseline_add_24"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                app:tint="?attr/white"
                tools:ignore="ContentDescription" />
    </LinearLayout>
    <LinearLayout
            android:orientation="horizontal"
            android:layout_gravity="bottom"
            android:gravity="bottom|end"
            android:layout_width="match_parent"
            android:layout_height="60dp">

        <com.google.android.material.button.MaterialButton
                style="@style/WhiteButton"
                android:layout_gravity="center_vertical|end"
                android:visibility="visible"
                android:text="@string/sort_apply"
                android:id="@+id/apply_btt"
                android:layout_width="wrap_content">

            <requestFocus />
        </com.google.android.material.button.MaterialButton>

        <com.google.android.material.button.MaterialButton
                style="@style/BlackButton"
                android:layout_gravity="center_vertical|end"
                android:text="@string/sort_cancel"
                android:id="@+id/cancel_btt"
                android:layout_width="wrap_content" />
    </LinearLayout>
</LinearLayout>



================================================
FILE: app/src/main/res/layout/subtitle_settings.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/subs_root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="?attr/primaryBlackBackground">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_rowWeight="1"
            android:layout_marginTop="20dp"
            android:layout_marginBottom="10dp"
            android:paddingStart="20dp"
            android:paddingEnd="20dp"
            android:text="@string/subtitles_settings"
            android:textColor="?attr/textColor"
            android:textSize="20sp"
            android:textStyle="bold" />

        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="75sp">

            <ImageView
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:contentDescription="@string/preview_background_img_des"
                android:scaleType="centerCrop"
                android:src="@drawable/subtitles_preview_background" />

            <com.google.android.exoplayer2.ui.SubtitleView
                android:id="@+id/subtitle_text"

                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_gravity="center"
                android:foregroundGravity="center" />
        </FrameLayout>

        <TextView
            android:id="@+id/subs_font"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"

            android:nextFocusRight="@id/cancel_btt"
            android:nextFocusDown="@id/subs_font_size"
            android:text="@string/subs_font" />

        <TextView
            android:id="@+id/subs_font_size"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:nextFocusUp="@id/subs_font"
            android:nextFocusDown="@id/subs_text_color"
            android:text="@string/subs_font_size" />

        <TextView
            android:id="@+id/subs_text_color"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:nextFocusUp="@id/subs_font_size"
            android:nextFocusDown="@id/subs_outline_color"
            android:text="@string/subs_text_color" />

        <TextView
            android:id="@+id/subs_outline_color"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:nextFocusUp="@id/subs_text_color"
            android:nextFocusDown="@id/subs_background_color"
            android:text="@string/subs_outline_color" />

        <TextView
            android:id="@+id/subs_background_color"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:nextFocusUp="@id/subs_outline_color"
            android:nextFocusDown="@id/subs_window_color"
            android:text="@string/subs_background_color" />

        <TextView
            android:id="@+id/subs_window_color"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:nextFocusUp="@id/subs_background_color"
            android:nextFocusDown="@id/subs_edge_type"
            android:text="@string/subs_window_color" />

        <TextView
            android:id="@+id/subs_edge_type"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:nextFocusUp="@id/subs_window_color"
            android:nextFocusDown="@id/subs_subtitle_elevation"
            android:text="@string/subs_edge_type" />

        <TextView
            android:id="@+id/subs_subtitle_elevation"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:nextFocusUp="@id/subs_edge_type"
            android:nextFocusDown="@id/subs_auto_select_language"
            android:text="@string/subs_subtitle_elevation" />

        <TextView
            android:id="@+id/subs_auto_select_language"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:nextFocusUp="@id/subs_subtitle_elevation"
            android:nextFocusDown="@id/subs_download_languages"
            android:text="@string/subs_auto_select_language" />

        <TextView
            android:id="@+id/subs_download_languages"
            style="@style/SettingsItem"
            android:nextFocusLeft="@id/apply_btt"
            android:nextFocusRight="@id/cancel_btt"

            android:nextFocusUp="@id/subs_auto_select_language"
            android:nextFocusDown="@id/apply_btt"
            android:text="@string/subs_download_languages" />

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_rowWeight="1"

            android:gravity="center"
            android:text="@string/subs_hold_to_reset_to_default"
            android:textColor="?attr/textColor"
            android:textSize="14sp" />

        <TextView
            android:id="@+id/subs_import_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_rowWeight="1"
            android:gravity="center"
            android:text="@string/subs_import_text"
            android:textColor="?attr/textColor"
            android:textSize="14sp" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:layout_gravity="bottom"
            android:gravity="bottom|end"
            android:orientation="horizontal">

            <com.google.android.material.button.MaterialButton
                android:id="@+id/apply_btt"
                style="@style/WhiteButton"
                android:layout_width="wrap_content"
                android:layout_gravity="center_vertical|end"
                android:nextFocusRight="@id/cancel_btt"
                android:nextFocusUp="@id/subs_download_languages"
                android:text="@string/sort_apply"
                android:visibility="visible">

                <requestFocus />
            </com.google.android.material.button.MaterialButton>

            <com.google.android.material.button.MaterialButton
                android:id="@+id/cancel_btt"
                style="@style/BlackButton"
                android:layout_width="wrap_content"
                android:layout_gravity="center_vertical|end"
                android:nextFocusLeft="@id/apply_btt"
                android:nextFocusUp="@id/subs_download_languages"
                android:text="@string/sort_cancel" />
        </LinearLayout>
    </LinearLayout>
</ScrollView>


================================================
FILE: app/src/main/res/layout/toast.xml
================================================
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:id="@+id/toast_layout_root"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="5dp"
        app:cardCornerRadius="10dp"
        app:cardBackgroundColor="?attr/primaryBlackBackground"
        android:background="?attr/primaryBlackBackground">

    <TextView
            android:padding="20dp"
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:textColor="?attr/textColor" />

</androidx.cardview.widget.CardView>



================================================
FILE: app/src/main/res/menu/bottom_nav_menu.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item
            android:id="@+id/navigation_home"
            android:icon="@drawable/ic_outline_home_24"
            android:title="@string/title_home"/>
    <item
            android:id="@+id/navigation_search"
            android:icon="@drawable/search_icon"
            android:title="@string/title_search"/>
    <item
            android:id="@+id/navigation_downloads"
            android:icon="@drawable/netflix_download"
            android:title="@string/title_downloads"/>
    <item
            android:id="@+id/navigation_settings"
            android:icon="@drawable/ic_outline_settings_24"
            android:title="@string/title_settings"/>
</menu>


================================================
FILE: app/src/main/res/menu/cast_expanded_controller_menu.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:app="http://schemas.android.com/apk/res-auto" >
    <item
            android:id="@+id/media_route_menu_item"
            app:actionProviderClass="androidx.mediarouter.app.MediaRouteActionProvider"
            app:showAsAction="always"
            android:title=""/>
</menu>


================================================
FILE: app/src/main/res/mipmap-anydpi-v26/ic_banner.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_banner_background"/>
</adaptive-icon>


================================================
FILE: app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@color/ic_launcher_background"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>


================================================
FILE: app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@color/ic_launcher_background"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>


================================================
FILE: app/src/main/res/navigation/mobile_navigation.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/mobile_navigation"
        app:startDestination="@+id/navigation_home">

    <action
            android:id="@+id/global_to_navigation_results"
            app:destination="@id/navigation_results"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <argument
                android:name="url"
                app:argType="string" />
        <argument
                android:name="apiName"
                app:argType="string" />
        <argument
                android:name="startAction"
                app:argType="integer"
                android:defaultValue="0" />
        <argument
                android:name="startValue"
                app:argType="integer"
                android:defaultValue="0" />
        <argument
                android:name="restart"
                app:argType="boolean"
                android:defaultValue="false" />
    </action>
    <action
            android:id="@+id/global_to_navigation_player"
            app:destination="@id/navigation_player"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <argument
                android:name="data"
                app:argType="string"
                android:defaultValue="@null" />
        <argument
                android:name="uriData"
                app:argType="string"
                android:defaultValue="@null" />
        <argument
                android:name="resumePosition"
                app:argType="long"
                android:defaultValue="0L" />
    </action>

    <action
            android:id="@+id/global_to_navigation_home"
            app:destination="@id/navigation_home"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim" />

    <action
            android:id="@+id/global_to_navigation_subtitles"
            app:destination="@id/navigation_subtitles"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <argument
                android:name="hide"
                app:argType="boolean"
                android:defaultValue="true" />
    </action>

    <action
            android:id="@+id/global_to_navigation_chrome_subtitles"
            app:destination="@id/navigation_chrome_subtitles"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <argument
                android:name="hide"
                app:argType="boolean"
                android:defaultValue="true" />
    </action>

    <fragment
            android:id="@+id/navigation_settings_player"
            android:name="com.lagradost.cloudstream3.ui.settings.SettingsPlayer"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <action
                android:id="@+id/action_navigation_settings_player_to_navigation_subtitles"
                app:destination="@id/navigation_subtitles"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
        <action
                android:id="@+id/action_navigation_settings_player_to_navigation_chrome_subtitles"
                app:destination="@id/navigation_chrome_subtitles"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
    </fragment>

    <fragment
            android:id="@+id/navigation_settings_ui"
            android:name="com.lagradost.cloudstream3.ui.settings.SettingsUI"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim" />

    <fragment
            android:id="@+id/navigation_settings_lang"
            android:name="com.lagradost.cloudstream3.ui.settings.SettingsLang"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim" />

    <fragment
            android:id="@+id/navigation_settings_nginx"
            android:name="com.lagradost.cloudstream3.ui.settings.SettingsNginx"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim" />

    <fragment
            android:id="@+id/navigation_settings_updates"
            android:name="com.lagradost.cloudstream3.ui.settings.SettingsUpdates"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim" />

    <fragment
            android:id="@+id/navigation_settings_account"
            android:name="com.lagradost.cloudstream3.ui.settings.SettingsAccount"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim" />

    <action
            android:id="@+id/global_to_navigation_quick_search"
            app:destination="@id/navigation_quick_search"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <argument
                android:name="mainapi"
                app:argType="boolean"
                android:defaultValue="true" />
        <argument
                android:name="autosearch"
                app:argType="string"
                android:defaultValue="@null" />
    </action>

    <fragment
            android:id="@+id/navigation_home"
            android:name="com.lagradost.cloudstream3.ui.home.HomeFragment"
            android:label="@string/title_home"
            tools:layout="@layout/fragment_home"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <action
                android:id="@+id/action_navigation_home_to_navigation_results"
                app:destination="@id/navigation_results"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
        <action
                android:id="@+id/action_navigation_home_to_navigation_quick_search"
                app:destination="@id/navigation_quick_search"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
    </fragment>

    <fragment
            android:id="@+id/navigation_search"
            android:name="com.lagradost.cloudstream3.ui.search.SearchFragment"
            android:label="@string/title_search"
            tools:layout="@layout/fragment_search"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <action
                android:id="@+id/action_navigation_search_to_navigation_results"
                app:destination="@id/navigation_results"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
    </fragment>

    <fragment
            android:id="@+id/navigation_downloads"
            android:name="com.lagradost.cloudstream3.ui.download.DownloadFragment"
            android:label="@string/title_downloads"
            tools:layout="@layout/fragment_downloads"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">

        <action
                android:id="@+id/action_navigation_downloads_to_navigation_download_child"
                app:destination="@id/navigation_download_child"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim">
            <argument
                    android:name="name"
                    app:argType="string" />
            <argument
                    android:name="folder"
                    app:argType="string" />
        </action>
        <action
                android:id="@+id/action_navigation_downloads_to_navigation_results"
                app:destination="@id/navigation_results"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
        <action
                android:id="@+id/action_navigation_downloads_to_navigation_player"
                app:destination="@id/navigation_player"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
    </fragment>
    <fragment
            android:id="@+id/navigation_settings"
            android:layout_height="match_parent"
            android:name="com.lagradost.cloudstream3.ui.settings.SettingsFragment"
            android:label="@string/title_settings"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <action
                android:id="@+id/action_navigation_settings_to_navigation_settings_nginx"
                app:destination="@id/navigation_settings_nginx"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
        <action
                android:id="@+id/action_navigation_settings_to_navigation_settings_ui"
                app:destination="@id/navigation_settings_ui"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
        <action
                android:id="@+id/action_navigation_settings_to_navigation_settings_lang"
                app:destination="@id/navigation_settings_lang"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
        <action
                android:id="@+id/action_navigation_settings_to_navigation_settings_player"
                app:destination="@id/navigation_settings_player"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
        <action
                android:id="@+id/action_navigation_settings_to_navigation_settings_updates"
                app:destination="@id/navigation_settings_updates"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
        <action
                android:id="@+id/action_navigation_settings_to_navigation_settings_account"
                app:destination="@id/navigation_settings_account"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
    </fragment>

    <fragment
            android:id="@+id/navigation_subtitles"
            android:layout_height="match_parent"
            android:name="com.lagradost.cloudstream3.ui.subtitles.SubtitlesFragment"
            android:label="@string/subtitles_settings"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim" />

    <fragment
            android:id="@+id/navigation_chrome_subtitles"
            android:layout_height="match_parent"
            android:name="com.lagradost.cloudstream3.ui.subtitles.ChromecastSubtitlesFragment"
            android:label="@string/chromecast_subtitles_settings"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim" />

    <fragment
            android:id="@+id/navigation_quick_search"
            android:layout_height="match_parent"
            android:name="com.lagradost.cloudstream3.ui.quicksearch.QuickSearchFragment"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim"
            android:label="@string/search" />

    <fragment
            android:id="@+id/navigation_download_child"
            android:layout_height="match_parent"
            android:name="com.lagradost.cloudstream3.ui.download.DownloadChildFragment"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <action
                android:id="@+id/action_navigation_download_child_to_navigation_player"
                app:destination="@id/navigation_player"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
    </fragment>

    <fragment
            android:id="@+id/navigation_results"
            android:layout_height="match_parent"
            android:name="com.lagradost.cloudstream3.ui.result.ResultFragment"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim">
        <action
                android:id="@+id/action_navigation_results_to_navigation_quick_search"
                app:destination="@id/navigation_quick_search"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
        <action
                android:id="@+id/action_navigation_results_to_navigation_player"
                app:destination="@id/navigation_player"
                app:enterAnim="@anim/enter_anim"
                app:exitAnim="@anim/exit_anim"
                app:popEnterAnim="@anim/enter_anim"
                app:popExitAnim="@anim/exit_anim" />
    </fragment>

    <fragment
            android:id="@+id/navigation_player"
            android:layout_height="match_parent"
            android:name="com.lagradost.cloudstream3.ui.player.GeneratorPlayer"
            app:enterAnim="@anim/enter_anim"
            app:exitAnim="@anim/exit_anim"
            app:popEnterAnim="@anim/enter_anim"
            app:popExitAnim="@anim/exit_anim" />
</navigation>


================================================
FILE: app/src/main/res/values/array.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <array name="cast_mini_controller_control_buttons">
        <item>@id/cast_button_type_rewind_30_seconds</item>
        <item>@id/cast_button_type_play_pause_toggle</item>
        <item>@id/cast_button_type_forward_30_seconds</item>
    </array>
    <array name="cast_expanded_controller_control_buttons">
        <!-- Fake sources button -->
        <item>@id/cast_button_type_rewind_30_seconds</item>
        <item>@id/cast_button_type_rewind_30_seconds</item>
        <item>@id/cast_button_type_forward_30_seconds</item>
        <!-- Actually fake to make the skip op button the same style -->
        <item>@id/cast_button_type_forward_30_seconds</item>
    </array>

    <array name="dns_pref">
        <item>@string/none</item>
        <item>Google</item>
        <item>Cloudflare</item>
        <!--        <item>OpenDns</item>-->
        <item>AdGuard</item>
    </array>
    <array name="dns_pref_values">
        <item>0</item>
        <item>1</item>
        <item>2</item>
        <!--        <item>3</item>-->
        <item>4</item>
    </array>

    <array name="media_type_pref">
        <item>All</item>
        <item>Movies and TV</item>
        <item>Anime</item>
        <item>Documentary</item>
    </array>
    <array name="media_type_pref_values">
        <item>0</item>
        <item>1</item>
        <item>2</item>
        <item>3</item>
    </array>

    <array name="limit_title_rez_pref_names">
        <item>@string/resolution_and_title</item>
        <item>@string/title</item>
        <item>@string/resolution</item>
        <item>@string/none</item>
    </array>

    <array name="limit_title_rez_pref_values">
        <item>3</item>
        <item>2</item>
        <item>1</item>
        <item>0</item>
    </array>

    <array name="limit_title_pref_names">
        <item>@string/none</item>
        <item>16 characters</item>
        <item>32 characters</item>
        <item>64 characters</item>
        <item>128 characters</item>
        <item>Hide Title</item>
    </array>
    <array name="limit_title_pref_values">
        <item>0</item>
        <item>16</item>
        <item>32</item>
        <item>64</item>
        <item>128</item>
        <item>-1</item>
    </array>

    <array name="skip_sec_values">
        <item>5</item>
        <item>10</item>
        <item>15</item>
        <item>20</item>
        <item>25</item>
        <item>30</item>
    </array>

    <array name="video_buffer_length_names">
        <item>@string/automatic</item>
        <item>1min</item>
        <item>1min 30s</item>
        <item>2min</item>
        <item>2min 30s</item>
        <item>3min</item>
        <item>3min 30s</item>
        <item>4min</item>
        <item>5min</item>
        <item>6min</item>
        <item>7min</item>
        <item>8min</item>
        <item>9min</item>
        <item>10min</item>
        <item>15min</item>
        <item>20min</item>
        <item>30min</item>
    </array>

    <array name="video_buffer_length_values">
        <item>0</item>
        <item>60</item>
        <item>90</item>
        <item>120</item>
        <item>150</item>
        <item>180</item>
        <item>210</item>
        <item>240</item>
        <item>300</item>
        <item>360</item>
        <item>420</item>
        <item>480</item>
        <item>540</item>
        <item>600</item>
        <item>900</item>
        <item>1200</item>
        <item>1800</item>
    </array>

    <array name="video_buffer_size_names">
        <item>@string/automatic</item>
        <item>10MB</item>
        <item>20MB</item>
        <item>30MB</item>
        <item>40MB</item>
        <item>50MB</item>
        <item>60MB</item>
        <item>70MB</item>
        <item>80MB</item>
        <item>90MB</item>
        <item>100MB</item>
        <item>150MB</item>
        <item>200MB</item>
        <item>250MB</item>
        <item>300MB</item>
        <item>350MB</item>
        <item>400MB</item>
        <item>450MB</item>
        <item>500MB</item>
    </array>

    <array name="video_buffer_size_values">
        <item>0</item>
        <item>10</item>
        <item>20</item>
        <item>30</item>
        <item>40</item>
        <item>50</item>
        <item>60</item>
        <item>70</item>
        <item>80</item>
        <item>90</item>
        <item>100</item>
        <item>150</item>
        <item>200</item>
        <item>250</item>
        <item>300</item>
        <item>350</item>
        <item>400</item>
        <item>450</item>
        <item>500</item>
    </array>

    <array name="poster_ui_options">
        <item>@string/show_hd</item>
        <item>@string/show_dub</item>
        <item>@string/show_sub</item>
        <item>@string/show_title</item>
    </array>

    <array name="poster_ui_options_values">
        <item>@string/show_hd_key</item>
        <item>@string/show_dub_key</item>
        <item>@string/show_sub_key</item>
        <item>@string/show_title_key</item>
    </array>

    <array name="episode_long_click_options">
        <item>@string/episode_action_chromecast_episode</item>
        <item>@string/episode_action_chromecast_mirror</item>
        <item>@string/episode_action_play_in_app</item>
        <item>@string/episode_action_play_in_vlc</item>
        <item>@string/episode_action_play_in_browser</item>
        <item>@string/episode_action_copy_link</item>
        <item>@string/episode_action_auto_download</item>
        <item>@string/episode_action_download_mirror</item>
        <item>@string/episode_action_download_subtitle</item>
        <item>@string/episode_action_reload_links</item>
    </array>

    <array name="episode_long_click_options_values">
        <item>4</item>
        <item>5</item>
        <item>1</item>
        <item>2</item>
        <item>3</item>
        <item>9</item>
        <item>6</item>
        <item>7</item>
        <item>13</item>
        <item>8</item>
    </array>

    <array name="app_layout">
        <item>@string/automatic</item>
        <item>@string/phone_layout</item>
        <item>@string/tv_layout</item>
        <item>@string/emulator_layout</item>
    </array>

    <array name="app_layout_values">
        <item>-1</item>
        <item>0</item>
        <item>1</item>
        <item>2</item>
    </array>

    <string-array name="themes_overlay_names">
        <item>Normal</item>
        <item>Carnation Pink</item>
        <item>Dark Green</item>
        <item>Maroon</item>
        <item>Navy Blue</item>
        <item>Grey</item>
        <item>White</item>
        <item>Brown</item>
        <item>Cool</item>
        <item>Fire</item>
        <item>Burple</item>
        <item>Green</item>
        <item>Apple</item>
        <item>Banana</item>
        <item>Party</item>
        <item>Pink Pain</item>
    </string-array>
    <string-array name="themes_overlay_names_values">
        <item>Normal</item>
        <item>CarnationPink</item>
        <item>DarkGreen</item>
        <item>Maroon</item>
        <item>NavyBlue</item>
        <item>Grey</item>
        <item>White</item>
        <item>Brown</item>
        <item>Blue</item>
        <item>Red</item>
        <item>Purple</item>
        <item>Green</item>
        <item>GreenApple</item>
        <item>Banana</item>
        <item>Party</item>
        <item>Pink</item>
    </string-array>

    <string-array name="themes_names">
        <item>Dark</item>
        <item>Gray</item>
        <item>Amoled</item>
        <item>Flashbang</item>
    </string-array>
    <string-array name="themes_names_values">
        <item>AmoledLight</item>
        <item>Black</item>
        <item>Amoled</item>
        <item>Light</item>
    </string-array>
</resources>



================================================
FILE: app/src/main/res/values/attrs.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="FlowLayout_Layout">
        <attr format="dimension" name="itemSpacing" />
    </declare-styleable>
    <declare-styleable name="FlowLayout_Layout_layout_space" />

    <declare-styleable name="CustomCast">
        <attr name="customCastBackgroundColor" format="color" />
    </declare-styleable>

    <style name="customCastDefColor">
        <item name="customCastBackgroundColor">?attr/colorPrimary</item>
    </style>

    <declare-styleable name="MainColors">
        <attr name="colorPrimary" format="color" />
        <attr name="colorSearch" format="color" />
        <attr name="colorOngoing" format="color" />
        <attr name="colorPrimaryDark" format="color" />

        <attr name="primaryGrayBackground" format="color" />
        <attr name="primaryBlackBackground" format="color" />
        <attr name="iconGrayBackground" format="color" />
        <attr name="boxItemBackground" format="color" />

        <attr name="textColor" format="color" />
        <attr name="grayTextColor" format="color" />
        <attr name="iconColor" format="color" />
        <attr name="white" format="color" />
    </declare-styleable>
</resources>


================================================
FILE: app/src/main/res/values/colors.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="colorPrimary">#3d50fa</color>
    <color name="colorPrimarySecond">@color/colorPrimary</color>
    <color name="colorSearch">#303135</color> <!--#3444D1 @color/itemBackground-->
    <color name="colorOngoing">#F53B66</color> <!--FF8181-->
    <color name="colorPrimaryDark">#3700B3</color>
    <color name="colorAccent">#3b65f5</color> <!-- 818fff-->

    <color name="primaryGrayBackground">#2B2C30</color> <!--0f0f10 0E0E10 303135 2B2C30-->
    <color name="primaryBlackBackground">#111111</color> <!--1C1C20 191a1f 19181E 202125 1C1C20-->
    <color name="iconGrayBackground">#1C1C20</color> <!--141419 202125-->
    <color name="boxItemBackground">#161616</color> <!-- 17171B 1B1B20-->

    <color name="textColor">#e9eaee</color> <!--FFF-->
    <color name="grayTextColor">#9ba0a4</color> <!-- 5e5f62-->
    <color name="grayShimmer">#DCDCDC</color> <!-- 5e5f62-->

    <color name="searchColorTransparent">#1AFFFFFF</color> <!--DADADA-->
    <color name="transparent">#00000000</color>

    <color name="white">#FFF</color>
    <color name="black">#000</color>

    <color name="dubColor">#3d50fa</color> <!--3b65f5 f18c82 8294F1-->
    <color name="amoledModeLight">#121213</color>

    <color name="dubColorBg">#3B65F5</color>
    <color name="subColor">#F54A3B</color> <!--F53B66 FA3D79-->
    <color name="subColorBg">#F53B66</color>
    <color name="typeColor">#3BF585</color>
    <color name="typeColorBg">?attr/colorPrimaryDark</color>

    <color name="video_ripple">#80FFFFFF</color>
    <color name="video_button_ripple">#32FFFFFF</color>

    <color name="black_overlay">#66000000</color>
    <color name="darkBarTransparent">#C0121212</color>
    <color name="darkBar">#121212</color>
    <color name="videoProgress">#66B5B5B5</color> <!--66B5B5B5-->
    <!--<color name="videoCache">#663D50FA</color>--> <!--66B5B5B5-->

    <color name="iconColor">#9ba0a6</color>

    <!-- <color name="usedStorageColor">?attr/white</color>#fff-->
    <!-- <color name="freeStorageColor">?attr/grayTextColor</color> #676767-->

    <!--Light Mode -->
    <color name="lightPrimaryGrayBackground">#f1f1f1</color>
    <color name="lightBitDarkerGrayBackground">#fff</color>
    <color name="lightGrayBackground">#eeeeee</color>
    <color name="lightItemBackground">#eeeeee</color>
    <color name="lightTextColor">#202125</color>
    <color name="lightGrayTextColor">#5f6267</color>
    <color name="lightIconColor">#5f6267</color>

    <!--Other Colors -->
    <color name="colorPrimaryBlue">#5664B7</color>
    <color name="colorPrimaryRed">#D50000</color>
    <color name="colorPrimaryPurple">#6200EA</color> <!-- Burple-->
    <color name="colorPrimaryGreen">#00BFA5</color>
    <color name="colorPrimaryGreenApple">#48E484</color>
    <color name="colorPrimaryBanana">#E4D448</color>
    <color name="colorPrimaryParty">#ea596e</color>
    <color name="colorPrimaryPink">#ff1493</color>

    <color name="colorPrimaryCarnationPink">#BD5DA5</color>
    <color name="colorPrimaryDarkGreen">#004500</color>
    <color name="colorPrimaryMaroon">#451010</color>
    <color name="colorPrimaryNavyBlue">#000080</color>
    <color name="colorPrimaryGrey">#515151</color>
    <color name="colorPrimaryWhite">#FFFFFF</color>
    <color name="colorPrimaryBrown">#622C00</color>
</resources>


================================================
FILE: app/src/main/res/values/dimens.xml
================================================
<resources>
    <!-- Default screen margins, per the Android Design guidelines. -->
    <dimen name="activity_horizontal_margin">16dp</dimen>
    <dimen name="activity_vertical_margin">16dp</dimen>
    <dimen name="rounded_image_radius">10dp</dimen>
    <dimen name="navbar_height">0dp</dimen>
    <dimen name="card_corner_radius">2dp</dimen>
    <dimen name="result_padding">15dp</dimen>

    <dimen name="loading_line_height">15dp</dimen>
    <dimen name="loading_radius">3dp</dimen>
    <dimen name="loading_margin">15dp</dimen>

    <integer name="loading_time">2000</integer>
</resources>


================================================
FILE: app/src/main/res/values/ic_launcher_background.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="ic_launcher_background">#000000</color>
</resources>


================================================
FILE: app/src/main/res/values/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <!-- KEYS DON'T TRANSLATE -->
    <string name="search_providers_list_key" translatable="false">search_providers_list</string>
    <string name="locale_key" translatable="false">app_locale</string>
    <string name="search_types_list_key" translatable="false">search_type_list</string>
    <string name="auto_update_key" translatable="false">auto_update</string>
    <string name="skip_update_key" translatable="false">skip_update_key</string>
    <string name="prerelease_update_key" translatable="false">prerelease_update</string>
    <string name="manual_check_update_key" translatable="false">manual_check_update</string>
    <string name="fast_forward_button_time_key" translatable="false">fast_forward_button_time</string>
    <string name="benene_count" translatable="false">benene_count</string>
    <string name="subtitle_settings_key" translatable="false">subtitle_settings_key</string>
    <string name="subtitle_settings_chromecast_key" translatable="false">subtitle_settings_chromecast_key</string>
    <string name="quality_pref_key" translatable="false">quality_pref_key</string>
    <string name="prefer_limit_title_key" translatable="false">prefer_limit_title_key</string>
    <string name="prefer_limit_title_rez_key" translatable="false">prefer_limit_title_rez_key</string>
    <string name="video_buffer_size_key" translatable="false">video_buffer_size_key</string>
    <string name="video_buffer_length_key" translatable="false">video_buffer_length_key</string>
    <string name="video_buffer_clear_key" translatable="false">video_buffer_clear_key</string>
    <string name="video_buffer_disk_key" translatable="false">video_buffer_disk_key</string>
    <string name="prerelease_commit_hash" translatable="false">unknown_prerelease</string>
    <string name="use_system_brightness_key" translatable="false">use_system_brightness_key</string>
    <string name="swipe_enabled_key" translatable="false">swipe_enabled_key</string>
    <string name="playback_speed_enabled_key" translatable="false">playback_speed_enabled_key</string>
    <string name="player_resize_enabled_key" translatable="false">player_resize_enabled_key</string>
    <string name="pip_enabled_key" translatable="false">pip_enabled_key</string>
    <string name="double_tap_enabled_key" translatable="false">double_tap_enabled_key</string>
    <string name="double_tap_pause_enabled_key" translatable="false">double_tap_pause_enabled_key</string>
    <string name="double_tap_seek_time_key" translatable="false">double_tap_seek_time_key</string>
    <string name="swipe_vertical_enabled_key" translatable="false">swipe_vertical_enabled_key</string>
    <string name="display_sub_key" translatable="false">display_sub_key</string>
    <string name="show_fillers_key" translatable="false">show_fillers_key</string>
    <string name="random_button_key" translatable="false">random_button_key</string>
    <string name="provider_lang_key" translatable="false">provider_lang_key</string>
    <string name="dns_key" translatable="false">dns_key</string>
    <string name="download_path_key" translatable="false">download_path_key</string>
    <string name="nginx_url_key" translatable="false">nginx_url_key</string>
    <string name="nginx_credentials" translatable="false">nginx_credentials</string>
    <string name="nginx_info" translatable="false">nginx_info</string>
    <string name="app_name_download_path" translatable="false">Cloudstream</string>
    <string name="app_layout_key" translatable="false">app_layout_key</string>
    <string name="primary_color_key" translatable="false">primary_color_key</string>
    <string name="restore_key" translatable="false">restore_key</string>
    <string name="killswitch_key" translatable="false">killswitch_key</string>
    <string name="backup_key" translatable="false">backup_key</string>
    <string name="prefer_media_type_key" translatable="false">prefer_media_type_key</string>
    <string name="app_theme_key" translatable="false">app_theme_key</string>
    <string name="episode_sync_enabled_key" translatable="false">episode_sync_enabled_key</string>
    <string name="log_enabled_key" translatable="false">log_enabled_key</string>
    <string name="show_logcat_key" translatable="false">show_logcat_key</string>
    <string name="bottom_title_key" translatable="false">bottom_title_key</string>
    <string name="poster_ui_key" translatable="false">poster_ui_key</string>

    <!-- FORMAT MIGHT TRANSLATE, WILL CAUSE CRASH IF APPLIED WRONG -->
    <string name="extra_info_format" translatable="false" formatted="true">%d %s | %sMB</string>
    <string name="storage_size_format" translatable="false" formatted="true">%s â€¢ %sGB</string>
    <string name="download_size_format" translatable="false" formatted="true">%sMB / %sMB</string>
    <string name="mb_format" translatable="false" formatted="true">%dMB</string>
    <string name="episode_name_format" translatable="false" formatted="true">%s %s</string>
    <string name="ffw_text_format" translatable="false" formatted="true">+%d</string>
    <string name="rew_text_format" translatable="false" formatted="true">-%d</string>
    <string name="ffw_text_regular_format" translatable="false" formatted="true">%d</string>
    <string name="rew_text_regular_format" translatable="false" formatted="true">%d</string>
    <string name="rating_format" translatable="false" formatted="true">%.1f/10.0</string>
    <string name="year_format" translatable="false" formatted="true">%d</string>
    <string name="app_dub_sub_episode_text_format" formatted="true">%s Ep %d</string>
    <string name="cast_format" formatted="true">Cast: %s</string>

    <!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">Poster</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">Episode Poster</string>
    <string name="home_main_poster_img_des">Main Poster</string>
    <string name="home_next_random_img_des">Next Random</string>
    <string name="episode_play_img_des" translatable="false">@string/play_episode</string>
    <string name="go_back_img_des">Go back</string>
    <string name="change_providers_img_des" translatable="false">@string/home_change_provider_img_des</string>
    <string name="home_change_provider_img_des">Change Provider</string>
    <string name="preview_background_img_des">Preview Background</string>

    <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">Speed (%.2fx)</string>
    <string name="rated_format" formatted="true">Rated: %.1f</string>
    <string name="new_update_format" formatted="true">New update found!\n%s -> %s</string>
    <string name="filler" formatted="true">Filler</string>
    <string name="duration_format" formatted="true">%d min</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">Home</string>
    <string name="title_search">Search</string>
    <string name="title_downloads">Downloads</string>
    <string name="title_settings">Settings</string>

    <string name="search_hint">Searchâ€¦</string>
    <string name="search_hint_site" formatted="true">Search %sâ€¦</string>

    <string name="no_data">No Data</string>
    <string name="episode_more_options_des">More Options</string>
    <string name="next_episode">Next episode</string>
    <string name="result_plot" translatable="false">@string/synopsis</string>
    <string name="result_tags">Genres</string>
    <string name="result_share">Share</string>
    <string name="result_open_in_browser">Open In Browser</string>
    <string name="skip_loading">Skip Loading</string>
    <string name="loading_chromecast">Loadingâ€¦</string>

    <string name="type_watching">Watching</string>
    <string name="type_on_hold">On-Hold</string>
    <string name="type_completed">Completed</string>
    <string name="type_dropped">Dropped</string>
    <string name="type_plan_to_watch">Plan to Watch</string>
    <string name="type_none">None</string>
    <string name="type_re_watching">Rewatching</string>

    <string name="play_movie_button">Play Movie</string>
    <string name="play_torrent_button">Stream Torrent</string>
    <string name="pick_source">Sources</string>
    <string name="pick_subtitle">Subtitles</string>
    <string name="reload_error">Retry connectionâ€¦</string>
    <string name="go_back">Go Back</string>
    <string name="play_episode">Play Episode</string>
    <!--<string name="need_storage">Allow to download episodes</string>-->

    <string name="download">Download</string>
    <string name="downloaded">Downloaded</string>
    <string name="downloading">Downloading</string>
    <string name="download_paused">Download Paused</string>
    <string name="download_started">Download Started</string>
    <string name="download_failed">Download Failed</string>
    <string name="download_canceled">Download Canceled</string>
    <string name="download_done">Download Done</string>
    <string name="download_format" translatable="false">%s - %s</string>

    <string name="error_loading_links_toast">Error Loading Links</string>
    <string name="download_storage_text">Internal Storage</string>

    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>

    <string name="popup_delete_file">Delete File</string>
    <string name="popup_play_file">Play File</string>
    <string name="popup_resume_download">Resume Download</string>
    <string name="popup_pause_download">Pause Download</string>

    <string name="pref_disable_acra">Disable automatic bug reporting</string>
    <string name="home_more_info">More info</string>
    <string name="home_expanded_hide">Hide</string>
    <string name="home_play">Play</string>
    <string name="home_info">Info</string>
    <string name="filter_bookmarks">Filter Bookmarks</string>
    <string name="error_bookmarks_text">Bookmarks</string>
    <string name="action_remove_from_bookmarks">Remove</string>
    <string name="action_add_to_bookmarks">Set watch status</string>
    <string name="sort_apply">Apply</string>
    <string name="sort_cancel">Cancel</string>
    <string name="sort_copy">Copy</string>
    <string name="sort_close">Close</string>
    <string name="sort_clear">Clear</string>
    <string name="sort_save">Save</string>

    <string name="player_speed">Player Speed</string>

    <string name="subtitles_settings">Subtitle Settings</string>
    <string name="subs_text_color">Text Color</string>
    <string name="subs_outline_color">Outline Color</string>
    <string name="subs_background_color">Background Color</string>
    <string name="subs_window_color">Window Color</string>
    <string name="subs_edge_type">Edge Type</string>
    <string name="subs_subtitle_elevation">Subtitle Elevation</string>
    <string name="subs_font">Font</string>
    <string name="subs_font_size">Font Size</string>

    <string name="search_provider_text_providers">Search using providers</string>
    <string name="search_provider_text_types">Search using types</string>

    <string name="benene_count_text">%d Benenes given to devs</string>
    <string name="benene_count_text_none">No Benenes given</string>

    <string name="subs_auto_select_language">Auto-Select Language</string>
    <string name="subs_download_languages">Download Languages</string>
    <string name="subs_hold_to_reset_to_default">Hold to reset to default</string>
    <string name="subs_import_text" formatted="true">Import fonts by placing them in %s</string>
    <string name="continue_watching">Continue Watching</string>

    <string name="action_remove_watching">Remove</string>
    <string name="action_open_watching">More Info</string>
    <string name="action_open_play">@string/home_play </string>

    <string name="vpn_might_be_needed">A VPN might be needed for this provider to work correctly</string>
    <string name="vpn_torrent">This provider is a torrent, a VPN is recommended</string>

    <string name="provider_info_meta">Metadata is not provided by site, video loading will fail if it does not exist on site.</string>

    <string name="torrent_plot">Description</string>
    <string name="normal_no_plot">No Plot Found</string>
    <string name="torrent_no_plot">No Description Found</string>

    <string name="show_log_cat">Show logcat ðŸˆ</string>

    <string name="picture_in_picture">Picture-in-picture</string>
    <string name="picture_in_picture_des">Continues playback in a miniature player on top of other apps</string>
    <string name="player_size_settings">Player resize button</string>
    <string name="player_size_settings_des">Remove the black borders</string>
    <string name="player_subtitles_settings">Subtitles</string>
    <string name="player_subtitles_settings_des">Player subtitles settings</string>
    <string name="chromecast_subtitles_settings">Chromecast Subtitles</string>
    <string name="chromecast_subtitles_settings_des">Chromecast subtitles settings</string>

    <string name="eigengraumode_settings">Eigengravy Mode</string>
    <string name="eigengraumode_settings_des">Adds a speed option in the player</string>
    <string name="swipe_to_seek_settings">Swipe to seek</string>
    <string name="swipe_to_seek_settings_des">Swipe left or right to control time in the videoplayer</string>
    <string name="swipe_to_change_settings">Swipe to change settings</string>
    <string name="swipe_to_change_settings_des">Swipe on the left or right side to change brightness or volume</string>
    <string name="double_tap_to_seek_settings">Double tap to seek</string>
    <string name="double_tap_to_pause_settings">Double tap to pause</string>
    <string name="double_tap_to_seek_amount_settings">Player seek amount</string>
    <string name="double_tap_to_seek_settings_des">Tap twice on the right or left side to seek forwards or backwards
    </string>
    <string name="double_tap_to_pause_settings_des">Tap in the middle to pause</string>
    <string name="use_system_brightness_settings">Use system brightness</string>
    <string name="use_system_brightness_settings_des">Use system brightness in the app player instead of a dark
        overlay
    </string>

    <string name="episode_sync_settings">Update watch progress</string>
    <string name="episode_sync_settings_des">Automatically sync your current episode progress</string>

    <string name="restore_settings">Restore data from backup</string>
    <string name="killswitch_settings">Download latest metadata from github</string>
    <string name="killswitch_settings_des">If you want access to all providers (even broken ones) turn this off</string>

    <string name="backup_settings">Backup data</string>
    <string name="restore_success">Loaded backup file</string>
    <string name="restore_failed_format" formatted="true">Failed to restore data from file %s</string>
    <string name="backup_success">Successfully stored data</string>
    <string name="backup_failed">Storage permissions missing, please try again</string>
    <string name="backup_failed_error_format">Error backing up %s</string>

    <string name="search">Search</string>
    <string name="category_nginx">Nginx</string>
    <string name="category_credits">Credits and account</string>
    <string name="category_updates">Updates and backup</string>
    <string name="nginx_credentials_title">Nginx Credential</string>
    <string name="nginx_credentials_summary">You have to use the following format mycoolusername:mysecurepassword123</string>
    <string name="nginx_info_title">What is Nginx ?</string>
    <string name="nginx_info_summary">Nginx is a software that can be used to display files from a server that you own. Click to see a Nginx setup guide</string>

    <string name="settings_info">Info</string>
    <string name="advanced_search">Advanced Search</string>
    <string name="advanced_search_des">Gives you the search results separated by provider</string>
    <string name="bug_report_settings_off">Only sends data on crashes</string>
    <string name="bug_report_settings_on">Sends no data</string>
    <string name="show_fillers_settings">Show filler episode for anime</string>
    <string name="updates_settings">Show app updates</string>
    <string name="updates_settings_des">Automatically search for new updates on start</string>
    <string name="uprereleases_settings">Update to prereleases</string>
    <string name="uprereleases_settings_des">Search for prerelease updates instead of full releases only</string>
    <string name="github">Github</string>
    <string name="lightnovel">Light novel app by the same devs</string>
    <string name="anim">Anime app by the same devs</string>
    <string name="discord">Join Discord</string>
    <string name="benene">Give a benene to the devs</string>
    <string name="benene_des">Given benene</string>

    <string name="app_language">App Language</string>

    <string name="no_chromecast_support_toast">This provider has no Chromecast support</string>
    <string name="no_links_found_toast">No Links Found</string>
    <string name="copy_link_toast">Link copied to clipboard</string>
    <string name="play_episode_toast">Play Episode</string>
    <string name="subs_default_reset_toast">Reset to default value</string>
    <string name="acra_report_toast">Sorry, the application crashed. An anonymous bug report will be sent to the
        developers
    </string>

    <string name="season">Season</string>
    <string name="no_season">No Season</string>
    <string name="episode">Episode</string>
    <string name="episodes">Episodes</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>
    <string name="no_episodes_found">No Episodes found</string>

    <string name="delete_file">Delete File</string>
    <string name="delete">Delete</string>
    <string name="cancel" translatable="false">@string/sort_cancel</string>
    <string name="pause">Pause</string>
    <string name="resume">Resume</string>
    <string name="go_back_30">-30</string>
    <string name="go_forward_30">+30</string>
    <string name="delete_message" formatted="true">This will permanently delete %s\nAre you sure?</string>
    <string name="resume_time_left" formatted="true">%dm\nremaining</string>


    <string name="status_ongoing">Ongoing</string>
    <string name="status_completed">Completed</string>
    <string name="status">Status</string>
    <string name="year">Year</string>
    <string name="rating">Rating</string>
    <string name="duration">Duration</string>
    <string name="site">Site</string>
    <string name="synopsis">Synopsis</string>

    <string name="queued">queued</string>
    <string name="no_subtitles">No Subtitles</string>
    <string name="default_subtitles">Default</string>

    <string name="free_storage">Free</string>
    <string name="used_storage">Used</string>
    <string name="app_storage">App</string>

    <!--plural-->
    <string name="movies">Movies</string>
    <string name="tv_series">TV Series</string>
    <string name="cartoons">Cartoons</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrents</string>
    <string name="documentaries">Documentaries</string>
    <string name="ova">OVA</string>
    <string name="asian_drama">Asian Dramas</string>

    <!--singular-->
    <string name="movies_singular">Movie</string>
    <string name="tv_series_singular">Series</string>
    <string name="cartoons_singular">Cartoon</string>
    <string name="anime_singular">@string/anime</string>
    <string name="ova_singular">@string/ova</string>
    <string name="torrent_singular">Torrent</string>
    <string name="documentaries_singular">Documentary</string>
    <string name="asian_drama_singular">Asian Drama</string>

    <string name="source_error">Source error</string>
    <string name="remote_error">Remote error</string>
    <string name="render_error">Renderer error</string>
    <string name="unexpected_error">Unexpected player error</string>
    <string name="storage_error">Download error, check storage permissions</string>

    <string name="episode_action_chromecast_episode">Chromecast episode</string>
    <string name="episode_action_chromecast_mirror">Chromecast mirror</string>
    <string name="episode_action_play_in_app">Play in app</string>
    <string name="episode_action_play_in_vlc">Play in VLC</string>
    <string name="episode_action_play_in_browser">Play in browser</string>
    <string name="episode_action_copy_link">Copy link</string>
    <string name="episode_action_auto_download">Auto download</string>
    <string name="episode_action_download_mirror">Download mirror</string>
    <string name="episode_action_reload_links">Reload links</string>
    <string name="episode_action_download_subtitle">Download subtitles</string>

    <string name="show_hd">Quality label</string>
    <string name="show_dub">Dub label</string>
    <string name="show_sub">Sub label</string>
    <string name="show_title">Title</string>
    <string name="show_hd_key" translatable="false">show_hd_key</string>
    <string name="show_dub_key" translatable="false">show_dub_key</string>
    <string name="show_sub_key" translatable="false">show_sub_key</string>
    <string name="show_title_key" translatable="false">show_title_key</string>
    <string name="poster_ui_settings">Toggle UI elements on poster</string>

    <string name="no_update_found">No Update Found</string>
    <string name="check_for_update">Check for Update</string>

    <string name="video_lock">Lock</string>
    <string name="video_aspect_ratio_resize">Resize</string>
    <string name="video_source">Source</string>
    <string name="video_skip_op">Skip OP</string>

    <string name="dont_show_again">Don\'t show again</string>
    <string name="skip_update">Skip this Update</string>
    <string name="update">Update</string>
    <string name="watch_quality_pref">Preferred watch quality</string>
    <string name="limit_title">Video player title max chars</string>
    <string name="limit_title_rez">Video player resolution</string>

    <string name="video_buffer_size_settings">Video buffer size</string>
    <string name="video_buffer_length_settings">Video buffer length</string>
    <string name="video_buffer_disk_settings">Video cache on disk</string>
    <string name="video_buffer_clear_settings">Clear video and image cache</string>

    <string name="video_ram_description">Will cause random crashes if set too high. Don\'t change if you have a low amount of ram such as an Android TV or old phone</string>
    <string name="video_disk_description">May cause problems on systems with low storage space such as Android TV devices if you set it too high</string>

    <string name="dns_pref">DNS over HTTPS</string>
    <string name="dns_pref_summary">Useful for bypassing ISP blocks</string>

    <string name="download_path_pref">Download path</string>

    <string name="nginx_url_pref">Nginx server url</string>

    <string name="display_subbed_dubbed_settings">Display Dubbed/Subbed Anime</string>

    <string name="resize_fit">Fit to screen</string>
    <string name="resize_fill">Stretch</string>
    <string name="resize_zoom">Zoom</string>

    <string name="legal_notice">Disclaimer</string>
    <string name="legal_notice_key" translatable="false">legal_notice_key</string>
    <string name="legal_notice_text" translatable="false">Any legal issues regarding the content on this application
        should be taken up with the actual file hosts and providers themselves as we are not affiliated with them.

        In case of copyright infringement, please directly contact the responsible parties or the streaming websites.

        The app is purely for educational and personal use.

        CloudStream 3 does not host any content on the app, and has no control over what media is put up or taken down.
        CloudStream 3 functions like any other search engine, such as Google. CloudStream 3 does not host, upload or
        manage any videos, films or content. It simply crawls, aggregates and displayes links in a convenient,
        user-friendly interface.

        It merely scrapes 3rd-party websites that are publicly accessable via any regular web browser. It is the
        responsibility of user to avoid any actions that might violate the laws governing his/her locality. Use
        CloudStream 3 at your own risk.
    </string>
    <string name="general">General</string>
    <string name="random_button_settings">Random Button</string>
    <string name="random_button_settings_desc">Show random button on Homepage</string>
    <string name="provider_lang_settings">Provider languages</string>
    <string name="app_layout">App Layout</string>
    <string name="preferred_media_settings">Preferred media</string>
    <string name="category_preferred_media_and_lang">Preferred media and language</string>
    <string name="category_ui">User interface</string>

    <string name="automatic">Auto</string>
    <string name="tv_layout">TV layout</string>
    <string name="phone_layout">Phone layout</string>
    <string name="emulator_layout">Emulator layout</string>

    <string name="primary_color_settings">Primary color</string>
    <string name="app_theme_settings">App theme</string>
    <string name="bottom_title_settings">Poster title location</string>
    <string name="bottom_title_settings_des">Put the title under the poster</string>


    <!-- account stuff -->
    <string name="anilist_key" translatable="false">anilist_key</string>
    <string name="mal_key" translatable="false">mal_key</string>
    <!--
    <string name="mal_account_settings" translatable="false">MAL</string>
    <string name="anilist_account_settings" translatable="false">AniList</string>
    <string name="tmdb_account_settings" translatable="false">TMDB</string>
    <string name="imdb_account_settings" translatable="false">IMDB</string>
    <string name="kitsu_account_settings" translatable="false">Kitsu</string>
    <string name="trakt_account_settings" translatable="false">Trakt</string>
    -->
    <string name="login_format" formatted="true">%s %s</string>
    <string name="account">account</string>
    <string name="logout">Logout</string>
    <string name="login">Login</string>
    <string name="switch_account">Switch account</string>
    <string name="add_account">Add account</string>
    <string name="add_sync">Add tracking</string>
    <string name="added_sync_format" formatted="true">Added %s</string>
    <string name="upload_sync">Sync</string>
    <string name="sync_score">Rated</string>
    <string name="sync_score_format" formatted="true">%d / 10</string>
    <string name="sync_total_episodes_none">/??</string>
    <string name="sync_total_episodes_some" formatted="true">/%d</string>
    <string name="authenticated_user" formatted="true">Authenticated %s</string>
    <string name="authenticated_user_fail" formatted="true">Failed to authenticate to %s</string>

    <!-- ============ -->
    <string name="none">None</string>
    <string name="normal">Normal</string>
    <string name="all">All</string>
    <string name="max">Max</string>
    <string name="min">Min</string>
    <string name="subtitles_none" translatable="false">@string/none</string>
    <string name="subtitles_outline">Outline</string>
    <string name="subtitles_depressed">Depressed</string>
    <string name="subtitles_shadow">Shadow</string>
    <string name="subtitles_raised">Raised</string>
    <string name="subtitle_offset">Sync subs</string>
    <string name="subtitle_offset_hint">1000ms</string>
    <string name="subtitle_offset_title">Subtitle delay</string>
    <string name="subtitle_offset_extra_hint_later_format">Use this if the subtitles are shown %dms too early</string>
    <string name="subtitle_offset_extra_hint_before_format">Use this if subtitles are shown %dms too late</string>
    <string name="subtitle_offset_extra_hint_none_format">No subtitle delay</string>

    <!--
    Example text (pangram) can optionally be translated; if you do, include all the letters in the alphabet,
    see: 
	https://en.wikipedia.org/w/index.php?title=Pangram&oldid=225849300
	https://en.wikipedia.org/wiki/The_quick_brown_fox_jumps_over_the_lazy_dog
    -->
    <string name="subtitles_example_text">The quick brown fox jumps over the lazy dog</string>

    <string name="recommended">Recommended</string>
    <string name="player_loaded_subtitles" formatted="true">Loaded %s</string>
    <string name="player_load_subtitles">Load from file</string>
    <string name="downloaded_file">Downloaded file</string>
    <string name="actor_main">Main</string>
    <string name="actor_supporting">Supporting</string>
    <string name="actor_background">Background</string>

    <string name="home_source">Source</string>
    <string name="home_random">Random</string>

    <string name="coming_soon">Coming soonâ€¦</string>

    <string name="quality_cam">Cam</string>
    <string name="quality_cam_rip">Cam</string>
    <string name="quality_cam_hd">Cam</string>
    <string name="quality_hq">HQ</string>
    <string name="quality_hd">HD</string>
    <string name="quality_ts">TS</string>
    <string name="quality_tc">TC</string>
    <string name="quality_blueray">BlueRay</string>
    <string name="quality_workprint">WP</string>
    <string name="quality_dvd">DVD</string>
    <string name="quality_4k">4K</string>
    <string name="quality_sd">SD</string>
    <string name="quality_uhd">UHD</string>
    <string name="quality_hdr">HDR</string>
    <string name="quality_sdr">SDR</string>
    <string name="quality_webrip">Web</string>

    <string name="poster_image">Poster Image</string>
    <string name="category_player">Player</string>
    <string name="resolution_and_title">Resolution and title</string>
    <string name="title">Title</string>
    <string name="resolution">Resolution</string>
    <string name="error_invalid_id">Invalid id</string>
</resources>



================================================
FILE: app/src/main/res/values/styles.xml
================================================
<resources>
    <!-- Base application theme. Material3 -->
    <style name="AppTheme" parent="Theme.Material3.Dark.NoActionBar">
        <item name="android:windowBackground">@drawable/splash_background</item>
        <item name="android:navigationBarColor">?attr/primaryBlackBackground</item>
        <item name="android:colorEdgeEffect">?attr/textColor</item>

        <!--<item name="android:navigationBarColor">@color/darkBackground</item>-->
        <item name="android:statusBarColor">?attr/iconGrayBackground</item>

        <item name="android:scrollbarThumbVertical">@null</item>
        <item name="android:scrollbarThumbHorizontal">@null</item>

        <item name="android:windowTranslucentStatus">true</item> <!--true-->
        <item name="android:windowTranslucentNavigation">false</item>
        <item name="alertDialogTheme">@style/Theme.AlertDialog</item>

        <item name="android:textViewStyle">@style/AppTextViewStyle</item>
        <item name="android:buttonStyle">@style/AppButtonStyle</item>
        <item name="android:editTextStyle">@style/AppEditStyle</item>
        <item name="materialButtonStyle">@style/AppMaterialButtonStyle</item>
        <item name="preferenceFragmentCompatStyle">@style/PreferenceTheme</item>
        <item name="bottomSheetDialogTheme">@style/AppBottomSheetDialogTheme</item>
        <item name="searchViewStyle">@style/AppSearchViewStyle</item>
        <item name="tabStyle">@style/Theme.Widget.Tabs</item>
        <item name="android:divider">@color/transparent</item>
        <item name="divider">@color/transparent</item>
        <item name="android:dividerHeight">0dp</item>
        <item name="showDividers">none</item>
        <item name="android:listViewStyle">@style/ListViewStyle</item>

        <item name="castExpandedControllerStyle">
            @style/CustomCastExpandedController
        </item>
        <item name="castMiniControllerStyle">@style/CustomCastMiniController</item>
        <!--<item name="mediaRouteButtonTint">?attr/colorPrimary</item>-->

        <!-- Preference -->
        <item name="android:textColor">?attr/textColor</item>
        <item name="android:textColorSecondary">?attr/grayTextColor</item>
        <item name="android:icon">?attr/grayTextColor</item>

        <item name="android:textColorHint">?attr/grayTextColor</item>
        <item name="android:editTextColor">?attr/textColor</item>
        <item name="android:colorForeground">?attr/textColor</item>
        <item name="android:colorControlHighlight">?attr/textColor</item> <!--iconRipple-->

        <item name="android:windowAllowReturnTransitionOverlap">true</item>
        <item name="android:windowAllowEnterTransitionOverlap">true</item>
        <!--<item name="preferenceTheme">@style/PreferencesTheme</item>-->

        <!-- DEF STYLE -->
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
        <item name="textColor">@color/textColor</item>
        <item name="grayTextColor">@color/grayTextColor</item>
        <item name="primaryGrayBackground">@color/primaryGrayBackground</item>
        <item name="primaryBlackBackground">@color/primaryBlackBackground</item>
        <item name="iconGrayBackground">@color/iconGrayBackground</item>
        <item name="boxItemBackground">@color/boxItemBackground</item>
        <item name="iconColor">@color/iconColor</item>
        <item name="white">#FFF</item>
    </style>

    <style name="ListViewStyle" parent="Widget.AppCompat.ListView">
        <item name="android:divider">@null</item>
    </style>

    <style name="AmoledModeLight" parent="AmoledMode">
        <item name="primaryGrayBackground">@color/amoledModeLight</item>
    </style>

    <style name="AmoledMode">
        <item name="primaryGrayBackground">@color/black</item>
        <item name="primaryBlackBackground">@color/black</item>
        <item name="iconGrayBackground">@color/primaryBlackBackground</item>
        <item name="boxItemBackground">@color/black</item>
        <item name="textColor">@color/textColor</item>
        <item name="grayTextColor">@color/grayTextColor</item>
        <item name="white">@color/white</item>
    </style>

    <style name="LightMode">
        <item name="primaryGrayBackground">@color/lightPrimaryGrayBackground</item>
        <item name="primaryBlackBackground">@color/lightBitDarkerGrayBackground</item>
        <item name="iconGrayBackground">@color/lightGrayBackground</item>
        <item name="boxItemBackground">@color/lightItemBackground</item>
        <item name="textColor">@color/lightTextColor</item>
        <item name="grayTextColor">@color/lightGrayTextColor</item>
        <item name="white">#000</item>
    </style>

    <style name="OverlayPrimaryColorNormal">
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="android:colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
        <item name="colorOnPrimary">@color/colorAccent</item>
        <!-- Needed for leanback fuckery -->
        <item name="android:colorAccent">@color/colorAccent</item>
    </style>

    <style name="OverlayPrimaryColorBlue">
        <item name="colorPrimary">@color/colorPrimaryBlue</item>
        <item name="android:colorPrimary">@color/colorPrimaryBlue</item>
        <item name="colorPrimaryDark">#4855A2</item>
        <item name="colorAccent">#5A6BCB</item>
        <item name="colorOnPrimary">#5A6BCB</item>
        <!-- Needed for leanback fuckery -->
        <item name="android:colorAccent">@color/colorPrimaryBlue</item>
    </style>

    <style name="OverlayPrimaryColorPurple">
        <item name="colorPrimary">@color/colorPrimaryPurple</item>
        <item name="android:colorPrimary">@color/colorPrimaryPurple</item>
        <item name="colorPrimaryDark">#4704A3</item>
        <item name="colorAccent">#7125DB</item>
        <item name="colorOnPrimary">#7125DB</item>
        <item name="android:colorAccent">@color/colorPrimaryPurple</item>
    </style>

    <style name="OverlayPrimaryColorGreen">
        <item name="colorPrimary">@color/colorPrimaryGreen</item>
        <item name="android:colorPrimary">@color/colorPrimaryGreen</item>
        <item name="colorPrimaryDark">#007363</item>
        <item name="colorAccent">#39C1AE</item>
        <item name="colorOnPrimary">#39C1AE</item>
        <item name="android:colorAccent">@color/colorPrimaryGreen</item>
    </style>

    <style name="OverlayPrimaryColorGreenApple">
        <item name="colorPrimary">@color/colorPrimaryGreenApple</item>
        <item name="android:colorPrimary">@color/colorPrimaryGreenApple</item>
        <item name="colorPrimaryDark">#319B5A</item>
        <item name="colorAccent">#51C57E</item>
        <item name="colorOnPrimary">#51C57E</item>
        <item name="android:colorAccent">@color/colorPrimaryGreenApple</item>
    </style>

    <style name="OverlayPrimaryColorRed">
        <item name="colorPrimary">@color/colorPrimaryRed</item>
        <item name="android:colorPrimary">@color/colorPrimaryRed</item>
        <item name="colorPrimaryDark">#B62B2B</item>
        <item name="colorAccent">@color/colorPrimaryRed</item> <!--#F53B3B-->
        <item name="colorOnPrimary">@color/colorPrimaryRed</item> <!--#EC3838-->
        <!-- Needed for leanback fuckery -->
        <item name="android:colorAccent">@color/colorPrimaryRed</item>
    </style>

    <style name="OverlayPrimaryColorBanana">
        <item name="colorPrimary">@color/colorPrimaryBanana</item>
        <item name="android:colorPrimary">@color/colorPrimaryBanana</item>
        <item name="colorPrimaryDark">#9B7D31</item>
        <item name="colorAccent">#C5B251</item>
        <item name="colorOnPrimary">#C5A851</item>
        <item name="android:colorAccent">@color/colorPrimaryBanana</item>
    </style>

    <style name="OverlayPrimaryColorParty">
        <item name="colorPrimary">@color/colorPrimaryParty</item>
        <item name="android:colorPrimary">@color/colorPrimaryParty</item>
        <item name="colorPrimaryDark">#C1495B</item>
        <item name="colorAccent">#FD798C</item>
        <item name="colorOnPrimary">#BF5968</item>
        <item name="android:colorAccent">@color/colorPrimaryParty</item>
    </style>

    <style name="OverlayPrimaryColorPink">
        <item name="colorPrimary">@color/colorPrimaryPink</item>
        <item name="android:colorPrimary">@color/colorPrimaryPink</item>
        <item name="colorPrimaryDark">#DD1280</item>
        <item name="colorAccent">#FF4DAE</item>
        <item name="colorOnPrimary">#DD1280</item>
        <item name="android:colorAccent">@color/colorPrimaryPink</item>
    </style>

    <style name="OverlayPrimaryColorCarnationPink">
        <item name="colorPrimary">@color/colorPrimaryCarnationPink</item>
        <item name="android:colorPrimary">@color/colorPrimaryCarnationPink</item>
        <item name="colorPrimaryDark">#83366f</item>
        <item name="colorAccent">#BD5DA5</item>
        <item name="colorOnPrimary">#BD5DA5</item>
        <!--   Needed for leanback fuckery   -->
        <item name="android:colorAccent">@color/colorPrimaryCarnationPink</item>
    </style>

    <style name="OverlayPrimaryColorMaroon">
        <item name="colorPrimary">@color/colorPrimaryMaroon</item>
        <item name="android:colorPrimary">@color/colorPrimaryMaroon</item>
        <item name="colorPrimaryDark">#370C0C</item>
        <item name="colorAccent">#451010</item>
        <item name="colorOnPrimary">#451010</item>
        <!--   Needed for leanback fuckery   -->
        <item name="android:colorAccent">@color/colorPrimaryMaroon</item>
    </style>

    <style name="OverlayPrimaryColorDarkGreen">
        <item name="colorPrimary">@color/colorPrimaryDarkGreen</item>
        <item name="android:colorPrimary">@color/colorPrimaryDarkGreen</item>
        <item name="colorPrimaryDark">#003d00</item>
        <item name="colorAccent">#004500</item>
        <item name="colorOnPrimary">#004500</item>
        <!--   Needed for leanback fuckery   -->
        <item name="android:colorAccent">@color/colorPrimaryDarkGreen</item>
    </style>

    <style name="OverlayPrimaryColorNavyBlue">
        <item name="colorPrimary">@color/colorPrimaryNavyBlue</item>
        <item name="android:colorPrimary">@color/colorPrimaryNavyBlue</item>
        <item name="colorPrimaryDark">#000073</item>
        <item name="colorAccent">#000080</item>
        <item name="colorOnPrimary">#000080</item>
        <!--   Needed for leanback fuckery   -->
        <item name="android:colorAccent">@color/colorPrimaryNavyBlue</item>
    </style>

    <style name="OverlayPrimaryColorGrey">
        <item name="colorPrimary">@color/colorPrimaryGrey</item>
        <item name="android:colorPrimary">@color/colorPrimaryGrey</item>
        <item name="colorPrimaryDark">#484848</item>
        <item name="colorAccent">#515151</item>
        <item name="colorOnPrimary">#515151</item>
        <!--   Needed for leanback fuckery   -->
        <item name="android:colorAccent">@color/colorPrimaryGrey</item>
    </style>

    <style name="OverlayPrimaryColorWhite">
        <item name="colorPrimary">@color/colorPrimaryWhite</item>
        <item name="android:colorPrimary">@color/colorPrimaryWhite</item>
        <item name="colorPrimaryDark">#CCCCCC</item>
        <item name="colorAccent">#FFFFFF</item>
        <item name="colorOnPrimary">#FFFFFF</item>
        <!--   Needed for leanback fuckery   -->
        <item name="android:colorAccent">@color/colorPrimaryWhite</item>
    </style>

    <style name="OverlayPrimaryColorBrown">
        <item name="colorPrimary">@color/colorPrimaryBrown</item>
        <item name="android:colorPrimary">@color/colorPrimaryBrown</item>
        <item name="colorPrimaryDark">#582700</item>
        <item name="colorAccent">#622C00</item>
        <item name="colorOnPrimary">#622C00</item>
        <!--   Needed for leanback fuckery   -->
        <item name="android:colorAccent">@color/colorPrimaryBrown</item>
    </style>

    <style name="customRatingBar" parent="@style/Widget.AppCompat.RatingBar">

        <item name="android:progressDrawable">@drawable/abc_ratingbar_indicator_material</item>
        <item name="android:indeterminateDrawable">@drawable/abc_ratingbar_indicator_material</item>
    </style>

    <style name="LoadedStyle">
        <item name="android:navigationBarColor">?attr/primaryGrayBackground</item>
        <item name="android:windowBackground">?attr/primaryBlackBackground</item>
    </style>

    <style name="AppSearchViewStyle" parent="Theme.MaterialComponents.NoActionBar">
        <item name="android:searchIcon">@drawable/search_icon</item>
        <item name="android:queryHint">@string/search_hint</item>
        <item name="android:background">@color/transparent</item>
        <item name="android:fontFamily">@font/google_sans</item>
    </style>

    <style name="AppBottomSheetDialogTheme">
        <item name="android:windowCloseOnTouchOutside">true</item>
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:windowAnimationStyle">@style/Animation.Design.BottomSheetDialog</item>
        <item name="bottomSheetStyle">@style/AppModalStyle</item>
    </style>

    <style name="AppModalStyle">
        <item name="android:windowCloseOnTouchOutside">true</item>
        <item name="behavior_hideable">true</item>
        <item name="behavior_skipCollapsed">true</item>
        <item name="shapeAppearance">@null</item>
        <item name="shapeAppearanceOverlay">@null</item>
        <item name="backgroundTint">?android:attr/colorBackground</item>
        <item name="android:background">@drawable/rounded_dialog</item>
        <item name="behavior_peekHeight">512dp</item>
    </style>

    <style name="PreferenceTheme" parent="@style/AppTheme"></style>

    <style name="Theme.AlertDialog" parent="ThemeOverlay.MaterialComponents.Dialog.Alert">
        <item name="android:windowMinWidthMajor">@android:dimen/dialog_min_width_major</item>
        <item name="android:windowMinWidthMinor">@android:dimen/dialog_min_width_minor</item>
        <item name="android:windowBackground">@drawable/dialog__window_background</item>
        <item name="textAllCaps">false</item>
    </style>

    <style name="AppTextViewStyle" parent="android:Widget.TextView">
        <item name="android:fontFamily">@font/google_sans</item>
    </style>

    <style name="AppButtonStyle" parent="android:Widget.Holo.Button">
        <item name="android:fontFamily">@font/google_sans</item>
    </style>

    <style name="AppEditStyle" parent="android:Widget.EditText">
        <item name="android:fontFamily">@font/google_sans</item>
    </style>

    <style name="ResultInfoText">
        <item name="android:layout_gravity">center_vertical</item>
        <item name="textColor">?attr/white</item>

        <item name="android:gravity">center</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:minHeight">24dp</item>
        <item name="android:minWidth">0dp</item>
        <!--   <item name="android:paddingStart">5dp</item>
           <item name="android:paddingEnd">5dp</item>-->
    </style>

    <style name="AppMaterialButtonStyle" parent="Widget.MaterialComponents.Button">
        <item name="android:fontFamily">@font/google_sans</item>
    </style>

    <style name="Theme.Widget.Tabs" parent="Widget.MaterialComponents.TabLayout.Colored">
        <!--<item name="tabGravity">center</item>
        <item name="backgroundTint">@color/transparent</item>
        <item name="tabIndicator">@drawable/tab_selector</item>
        <item name="tabIndicatorColor">?attr/colorPrimary</item>
        <item name="tabTextColor">?attr/colorPrimary</item>
        <item name="tabIndicatorFullWidth">false</item>
        <item name="tabIndicatorHeight">3dp</item>
        <item name="tabInlineLabel">true</item>
        <item name="tabMinWidth">75dp</item>
        <item name="tabMode">scrollable</item>-->
    </style>

    <style name="AlertDialogCustom" parent="Theme.AppCompat.Dialog.Alert">
        <item name="android:windowFullscreen">true</item>
        <item name="android:textColor">?attr/textColor</item>
        <item name="android:textColorPrimary">?attr/textColor</item>
        <!--<item name="android:background">@color/darkBackground</item>-->
        <item name="android:textAllCaps">false</item>
        <!--<item name="android:colorBackground">@color/darkBackground</item>-->
        <item name="textColorAlertDialogListItem">?attr/textColor</item>
        <item name="colorControlNormal">?attr/textColor</item>
        <!-- colorPrimarySecond used because colorPrimary fails for no reason -->
        <item name="colorControlActivated">?attr/colorPrimary</item>

        <item name="android:windowMinWidthMajor">@android:dimen/dialog_min_width_major</item>
        <item name="android:windowMinWidthMinor">@android:dimen/dialog_min_width_minor</item>
        <item name="android:windowBackground">@drawable/dialog__window_background</item>
    </style>

    <style name="AlertDialogCustomTransparent" parent="Theme.AppCompat.Dialog.Alert">
        <item name="android:windowBackground">@color/transparent</item>
    </style>

    <style name="AlertDialogCustomBlack" parent="Theme.AppCompat.Dialog.Alert">
        <item name="android:windowBackground">?attr/primaryBlackBackground</item>
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">fill_parent</item>
        <!-- No backgrounds, titles or window float -->
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowIsFloating">false</item>
        <item name="android:navigationBarColor">?attr/primaryBlackBackground</item>
    </style>

    <style name="PopupMenu" parent="@android:style/Widget.PopupMenu">
        <item name="android:backgroundTint">?attr/primaryBlackBackground</item>
    </style>

    <style name="SettingsItem">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">50sp</item>
        <item name="android:gravity">center_vertical</item>
        <item name="android:paddingStart">20dp</item>
        <item name="android:paddingEnd">20dp</item>
        <item name="android:selectAllOnFocus">true</item>
        <item name="android:background">@color/transparent</item>
        <item name="android:textColor">?attr/textColor</item>
        <item name="android:foreground">?attr/selectableItemBackgroundBorderless</item>
        <item name="android:textAppearance">?android:attr/textAppearanceListItemSmall</item>
        <item name="drawableEndCompat">@drawable/ic_baseline_keyboard_arrow_right_24</item>
    </style>

    <style name="WatchHeaderText">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textColor">?attr/textColor</item>
        <item name="android:gravity">center_vertical</item>
        <item name="android:textSize">18sp</item>
        <item name="android:layout_marginEnd">50dp</item>
        <item name="android:textStyle">bold</item>
    </style>

    <style name="SearchBox">
        <item name="android:textStyle">bold</item>
        <item name="android:minWidth">50dp</item>
        <item name="android:gravity">center</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_marginBottom">5dp</item>
        <item name="android:paddingLeft">10dp</item>
        <item name="android:paddingRight">10dp</item>
        <item name="android:paddingTop">5dp</item>
        <item name="android:paddingBottom">5dp</item>
        <item name="android:textSize">12sp</item>
        <item name="textColor">@color/textColor</item>
        <item name="android:textColor">@color/textColor</item>
        <item name="android:layout_margin">2dp</item>
    </style>

    <style name="NiceButton">
        <!--removes shadow-->
        <item name="android:stateListAnimator">@null</item>

        <item name="android:padding">5dp</item>
        <item name="android:layout_marginStart">5dp</item>
        <item name="android:layout_marginEnd">5dp</item>
        <item name="android:layout_height">40dp</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textAllCaps">false</item>
        <item name="iconGravity">textStart</item>
        <item name="iconSize">20dp</item>
        <item name="cornerRadius">4dp</item>
        <item name="android:textSize">15sp</item>

        <item name="android:insetTop">0dp</item>
        <item name="android:insetBottom">0dp</item>
        <item name="android:foreground">@drawable/outline_drawable</item>
    </style>

    <style name="WhiteButton" parent="NiceButton">
        <item name="strokeColor">?attr/iconGrayBackground</item>
        <item name="backgroundTint">?attr/textColor</item>
        <item name="iconTint">?attr/iconGrayBackground</item>
        <item name="android:textColor">?attr/iconGrayBackground</item>
        <item name="rippleColor">?attr/primaryBlackBackground</item>
    </style>

    <style name="BlackLabel" parent="@style/Widget.MaterialComponents.Tooltip">
        <item name="backgroundTint">?attr/iconGrayBackground</item>
        <item name="android:textColor">?attr/textColor</item>
    </style>

    <style name="CheckLabel" parent="@style/AppTextViewStyle">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:minHeight">?android:attr/listPreferredItemHeightSmall</item>
        <item name="android:textColor">@color/text_selection_color</item>
        <item name="android:textSize">16sp</item>
        <item name="android:textStyle">bold</item>
        <item name="android:gravity">center_vertical</item>
        <item name="android:paddingStart">12dp</item>
        <item name="android:paddingEnd">12dp</item>
        <item name="android:checkMark">?android:attr/listChoiceIndicatorSingle</item>
        <item name="android:ellipsize">marquee</item>
        <item name="android:foreground">?attr/selectableItemBackgroundBorderless</item>
        <item name="android:drawablePadding">20dp</item>
        <item name="drawableTint">@color/check_selection_color</item>
        <item name="drawableStartCompat">@drawable/ic_baseline_check_24</item>
    </style>

    <style name="BlackButton" parent="NiceButton">
        <item name="strokeColor">?attr/textColor</item>
        <item name="backgroundTint">?attr/iconGrayBackground</item>
        <item name="iconTint">?attr/textColor</item>
        <item name="android:textColor">?attr/textColor</item>
        <item name="rippleColor">?attr/textColor</item>
    </style>

    <style name="SmallBlackButton" parent="BlackButton">
        <item name="android:layout_height">24dp</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:textSize">12sp</item>
        <item name="android:layout_marginStart">0dp</item>
        <item name="android:layout_marginEnd">0dp</item>
        <item name="android:stateListAnimator">@null</item>
        <item name="iconPadding">0dp</item>
        <item name="android:paddingTop">0dp</item>
        <item name="android:paddingBottom">0dp</item>
        <item name="android:minWidth">0dp</item>
    </style>

    <style name="RoundedSelectableButtonIcon" parent="RoundedSelectableButton">
        <item name="minWidth">0dp</item>
        <item name="iconTint">?attr/textColor</item>
        <item name="iconGravity">textStart</item>
        <item name="iconPadding">0dp</item>
        <item name="android:layout_width">35dp</item>
        <!--<item name="android:layout_height">35dp</item>-->
    </style>

    <style name="ExtendedFloatingActionButton">
        <item name="elevation">0dp</item>
        <item name="android:textStyle">bold</item>
        <item name="backgroundTint">?attr/primaryGrayBackground</item>
        <item name="tint">?attr/colorPrimary</item>
        <item name="textColor">?attr/colorPrimary</item>
        <item name="iconTint">?attr/textColor</item>
        <item name="android:layout_margin">16dp</item>
        <item name="android:layout_gravity">end|bottom</item>
        <item name="textAllCaps">false</item>
        <item name="android:gravity">center</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
    </style>

    <style name="RoundedSelectableButton">
        <item name="backgroundTint">@color/toggle_button</item>
        <item name="rippleColor">@color/textColor</item>
        <item name="android:textColor">@color/toggle_button_text</item>
        <item name="cornerRadius">100dp</item>
        <item name="strokeWidth">1dp</item>
        <item name="strokeColor">@color/toggle_button_outline</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">45dp</item>
        <item name="android:paddingTop">0dp</item>
        <item name="android:paddingBottom">0dp</item>
        <item name="android:paddingStart">10dp</item>
        <item name="android:paddingEnd">10dp</item>
        <!--<item name="android:layout_marginStart">10dp</item>-->
        <item name="android:layout_marginEnd">5dp</item>
        <item name="textAllCaps">false</item>
        <item name="android:textSize">13sp</item>
    </style>

    <style name="MultiSelectButton" parent="BlackButton">
        <item name="android:layout_height">40dp</item>
        <item name="android:layout_width">wrap_content</item>
    </style>

    <style name="VideoButton">
        <item name="android:stateListAnimator">@null</item>
        <item name="strokeColor">@color/transparent</item>
        <item name="backgroundTint">@color/transparent</item>
        <item name="rippleColor">@color/video_button_ripple</item>
        <item name="android:shadowColor">@color/transparent</item>

        <item name="cornerRadius">3dp</item>
        <item name="iconTint">@color/white</item>
        <item name="textColor">@color/white</item>
        <item name="android:textColor">@color/white</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">45dp</item>
        <item name="android:gravity">center</item>
        <item name="android:layout_gravity">center</item>
        <item name="textAllCaps">false</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">10sp</item>
        <item name="android:layout_marginStart">10dp</item>
        <item name="android:layout_marginEnd">10dp</item>
    </style>

    <style name="SyncButton" parent="NiceButton">
        <item name="rippleColor">?attr/white</item>
        <item name="iconTint">?attr/textColor</item>
        <item name="android:layout_columnWeight">1</item>
        <item name="android:layout_rowWeight">1</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:textColor">?attr/textColor</item>
        <item name="backgroundTint">@color/toggle_button</item>
        <item name="android:layout_marginBottom">10dp</item>
        <item name="strokeWidth">1dp</item>
        <item name="strokeColor">@color/toggle_button_outline</item>
    </style>

    <style name="Tag" parent="Widget.MaterialComponents.Button.OutlinedButton">
        <item name="strokeColor">@color/tag_stroke_color</item>
    </style>

    <style name="VideoButtonTV">
        <item name="android:stateListAnimator">@null</item>
        <item name="strokeColor">@color/transparent</item>
        <item name="backgroundTint">@null</item>
        <item name="android:background">@drawable/player_button_tv</item>
        <item name="rippleColor">@color/white</item>
        <item name="android:shadowColor">@color/transparent</item>

        <item name="iconTint">@color/player_on_button_tv</item>
        <item name="textColor">@color/player_on_button_tv</item>
        <item name="android:textColor">@color/player_on_button_tv</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">25dp</item>
        <item name="iconSize">16dp</item>
        <item name="android:gravity">center</item>
        <item name="android:layout_gravity">center</item>
        <item name="android:baselineAligned">false</item>
        <item name="textAllCaps">false</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">10sp</item>
        <item name="android:layout_marginStart">4dp</item>
        <item name="android:layout_marginEnd">4dp</item>
        <item name="android:insetBottom">0dp</item>
        <item name="android:insetTop">0dp</item>
    </style>

    <!--@color/white ?attr/colorPrimary-->
    <!--CHECK ?attr/darkBackground ?attr/colorPrimary-->
    <!-- CHROMECAST -->
    <style name="CustomCastExpandedController" parent="CastExpandedController">
        <item name="castControlButtons">
            @array/cast_expanded_controller_control_buttons
        </item>
        <!-- <item name="castButtonColor">@null</item>

         <item name="castSeekBarSecondaryProgressColor">@color/darkBar
         </item>
         -->
        <item name="castSeekBarProgressAndThumbColor">?attr/colorPrimary</item>
        <item name="castBackground">?attr/colorPrimary</item>
        <item name="castProgressBarColor">?attr/colorPrimary</item>
        <item name="castPlayButtonDrawable">@drawable/ic_baseline_play_arrow_24</item>
        <item name="castPauseButtonDrawable">@drawable/netflix_pause</item>
        <item name="castStopButtonDrawable">@drawable/cast_ic_expanded_controller_stop</item>
        <item name="castSkipPreviousButtonDrawable">
            @drawable/cast_ic_expanded_controller_skip_previous
        </item>
        <item name="castSkipNextButtonDrawable">@drawable/cast_ic_expanded_controller_skip_next
        </item>
        <item name="castRewind30ButtonDrawable">@drawable/go_back_30</item>
        <item name="castForward30ButtonDrawable">@drawable/go_forward_30</item>
    </style>

    <style name="CustomCastMiniController" parent="CastMiniController">
        <item name="castMiniControllerLoadingIndicatorColor">?attr/colorPrimary</item>
        <item name="castShowImageThumbnail">true</item>

        <item name="castTitleTextAppearance">@style/TextAppearance.AppCompat.Subhead</item>
        <item name="castSubtitleTextAppearance">@style/TextAppearance.AppCompat.Caption</item>
        <item name="castBackground">@color/transparent
        </item> <!--CHECK bitDarkerGrayBackground darkBackground-->
        <item name="castProgressBarColor">?attr/colorPrimary</item>
        <item name="castStopButtonDrawable">@drawable/cast_ic_mini_controller_stop</item>'
        <item name="castLargeStopButtonDrawable">@drawable/cast_ic_mini_controller_stop_large</item>
        <item name="castSkipPreviousButtonDrawable">@drawable/cast_ic_mini_controller_skip_prev
        </item>
        <item name="castSkipNextButtonDrawable">@drawable/cast_ic_mini_controller_skip_next</item>
        <item name="castRewind30ButtonDrawable">@drawable/go_back_30</item>
        <item name="castForward30ButtonDrawable">@drawable/go_forward_30</item>
        <item name="castMuteToggleButtonDrawable">@drawable/cast_ic_mini_controller_mute</item>
        <item name="castClosedCaptionsButtonDrawable">
            @drawable/cast_ic_mini_controller_closed_caption
        </item>
    </style>
</resources>


================================================
FILE: app/src/main/res/values-ar/strings.xml
================================================
<resources>
    <!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">Ù…Ù„ØµÙ‚</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">Ù…Ù„ØµÙ‚ Ø§Ù„Ø­Ù„Ù‚Ø©</string>
    <string name="home_main_poster_img_des">Ø§Ù„Ù…Ù„ØµÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</string>
    <string name="home_next_random_img_des">Ø§Ù„ØªØ§Ù„ÙŠ Ø¹Ø´ÙˆØ§Ø¦ÙŠ</string>
    <string name="go_back_img_des">Ø§Ø±Ø¬Ø¹ Ù„Ù„Ø®Ù„Ù</string>
    <string name="home_change_provider_img_des">ØªØºÙŠÙŠØ± Ø§Ù„Ù…ØµØ¯Ø±</string>
    <string name="preview_background_img_des">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©</string>

    <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">Ø³Ø±Ø¹Ø© (%.2fx)</string>
    <string name="rated_format" formatted="true">Rated: %.1f</string>
    <string name="new_update_format" formatted="true">!ØªÙ… Ø¥ÙŠØ¬Ø§Ø¯ ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯\n%s -> %s</string>
    <string name="duration_format" formatted="true">%d Ø¯Ù‚ÙŠÙ‚Ø©</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</string>
    <string name="title_search">Ø¨Ø­Ø«</string>
    <string name="title_downloads">Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª</string>
    <string name="title_settings">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</string>

    <string name="search_hint">â€¦Ø¨Ø­Ø«</string>	
    <string name="no_data">Ù„Ø§ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</string>
    <string name="episode_more_options_des">Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª</string>
    <string name="next_episode">Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©</string>
    <string name="result_tags">Ø§Ù„Ù†ÙˆØ§Ø¹</string>
    <string name="result_share">Ø´Ø§Ø±Ùƒ</string>
    <string name="result_open_in_browser">ÙØªØ­ ÙÙŠ Ø§Ù„ÙˆÙŠØ¨ </string>
    <string name="skip_loading">ØªØ®Ø·ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</string>
    <string name="loading_chromecast">â€¦ØªØ­Ù…ÙŠÙ„</string>

    <string name="type_watching">Ù…Ø´Ø§Ù‡Ø¯Ø©</string>
    <string name="type_on_hold">ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</string>
    <string name="type_completed">Ù…ÙƒØªÙ…Ù„</string>
    <string name="type_dropped">Ø¥Ø³Ù‚Ø§Ø·</string>
    <string name="type_plan_to_watch">ØªØ®Ø·Ø· Ù„Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</string>
    <string name="type_none">Ù„Ø§ Ø´ÙŠØ¡</string>
    <string name="type_re_watching">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</string>
	
    <string name="play_movie_button">Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠÙ„Ù…</string>
    <string name="play_torrent_button">ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙˆØ±Ù†Øª</string>
    <string name="pick_source">Ø§Ù„Ù…ØµØ§Ø¯Ø±</string>
    <string name="pick_subtitle">Ø§Ù„ØªØ±Ø¬Ù…Ø©</string>
    <string name="reload_error">â€¦Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„</string>
    <string name="go_back">Ø§Ø±Ø¬Ø¹ Ù„Ù„Ø®Ù„Ù</string>
    <string name="play_episode">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ù„Ù‚Ø©</string>
    <!--<string name="need_storage">Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ù„Ù‚Ø§Øª</string>-->

    <string name="download">ØªØ­Ù…ÙŠÙ„</string>
    <string name="downloaded">ØªÙ… Ø§Ù„ØªÙ†Ø²ÙŠÙ„</string>
    <string name="downloading">Ø¬Ø§Ø±Ù‰ Ø§Ù„ØªØ­Ù…ÙŠÙ„</string>
    <string name="download_paused">ØªÙˆÙ‚Ù Ø§Ù„ØªÙ†Ø²ÙŠÙ„ Ù…Ø¤Ù‚ØªÙ‹Ø§</string>
    <string name="download_started">Ø¨Ø¯Ø£ Ø§Ù„ØªÙ†Ø²ÙŠÙ„</string>
    <string name="download_failed">Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙØ´Ù„</string>
    <string name="download_canceled">ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙ†Ø²ÙŠÙ„</string>
    <string name="download_done">ØªÙ†Ø²ÙŠÙ„ ØªÙ…</string>

    <string name="error_loading_links_toast">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø·</string>
    <string name="download_storage_text">Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</string>

    <string name="app_dubbed_text">Ù…Ø¯Ø¨Ù„Ø¬</string>
    <string name="app_subbed_text">Ù…ØªØ±Ø¬Ù…</string>

    <string name="popup_delete_file">Ø­Ø°Ù Ù…Ù„Ù</string>
    <string name="popup_play_file">ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù„Ù</string>
    <string name="popup_resume_download">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªÙ†Ø²ÙŠÙ„</string>
    <string name="popup_pause_download">Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ†Ø²ÙŠÙ„ Ù…Ø¤Ù‚ØªÙ‹Ø§</string>

    <string name="pref_disable_acra">Ù‚Ù… Ø¨ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§</string>
    <string name="home_more_info">Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</string>
    <string name="home_expanded_hide">Ø¥Ø®ÙØ§Ø¡</string>
    <string name="home_play">ØªØ´ØºÙŠÙ„</string>
    <string name="home_info">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</string>
    <string name="filter_bookmarks">ØªØµÙÙŠØ© Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…ÙØ¶Ù„Ø©</string>
    <string name="error_bookmarks_text">Ø¥Ø´Ø§Ø±Ø§Øª Ù…Ø±Ø¬Ø¹ÙŠØ©</string>
    <string name="action_remove_from_bookmarks">Ø­Ø°Ù</string>
    <string name="sort_apply">ØªØ·Ø¨ÙŠÙ‚</string>
    <string name="sort_cancel">Ø¥Ù„ØºØ§Ø¡</string>
    <string name="player_speed">Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ø´ØºÙ„</string>

    <string name="subtitles_settings">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ±Ø¬Ù…Ø©</string>
    <string name="subs_text_color">Ù„ÙˆÙ† Ø§Ù„Ø®Ø·</string>
    <string name="subs_outline_color">Ù„ÙˆÙ† Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</string>
    <string name="subs_background_color">Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©</string>
    <string name="subs_window_color">Ù„ÙˆÙ† Ø§Ù„Ù†Ø§ÙØ°Ø©</string>
    <string name="subs_edge_type">Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§ÙØ©</string>
    <string name="subs_subtitle_elevation">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ØªØ±Ø¬Ù…Ø©</string>
    <string name="subs_font">Ø§Ù„Ø®Ø·</string>
    <string name="subs_font_size">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</string>

    <string name="search_provider_text_providers">Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ø±</string>
    <string name="search_provider_text_types">Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</string>

    <string name="benene_count_text">%d Ø§Ù„Ø¨Ù†ÙŠÙ†ÙŠØ³ Ø§Ù„Ù…Ø¹Ø·Ø§Ø© Ø§Ù„Ù‰ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†</string>
    <string name="benene_count_text_none">Ù„Ù… ÙŠØªÙ… Ø¥Ø¹Ø·Ø§Ø¡ Ø¨Ù†ÙŠÙ†</string>

    <string name="subs_auto_select_language">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ØºØ© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§</string>
    <string name="subs_download_languages">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ØºØ§Øª</string>
    <string name="subs_hold_to_reset_to_default">Ø§Ø¶ØºØ· Ø¨Ø¥Ø³ØªÙ…Ø±Ø§Ø± Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†</string>
    <string name="continue_watching">Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</string>

    <string name="action_remove_watching">Ø­Ø°Ù</string>
    <string name="action_open_watching">Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</string>

    <string name="vpn_might_be_needed">Ù‚Ø¯ ØªÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø´Ø¨ÙƒØ© Ø¸Ø§Ù‡Ø±ÙŠØ© Ø®Ø§ØµØ© Ù„ÙƒÙŠ ÙŠØ¹Ù…Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø²ÙˆØ¯ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</string>
    <string name="vpn_torrent">Ù‡Ø°Ø§ Ø§Ù„Ù…Ø²ÙˆØ¯ Ù‡Ùˆ ØªÙˆØ±Ù†Øª ØŒ ÙŠÙˆØµÙ‰ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…  Ø´Ø¨ÙƒØ© Ø¸Ø§Ù‡Ø±ÙŠØ© Ø®Ø§ØµØ©</string>
	
    <string name="provider_info_meta">.Ø³ÙŠØ¸Ù‡Ø± Ø¥Ø¹Ù„Ø§Ù† Ù…Ø¯ØªÙ‡ Ø®Ù…Ø³Ø© Ø¹Ø´Ø± Ø«Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… ØªÙˆÙÙŠØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹</string>
	
    <string name="torrent_plot">Ø§Ù„ÙˆØµÙ</string>
    <string name="normal_no_plot">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙˆØµÙ</string>
    <string name="torrent_no_plot">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙˆØµÙ</string>

    <string name="picture_in_picture">Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©</string>
    <string name="picture_in_picture_des">ÙŠØ³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„ ÙÙŠ Ù…Ø´ØºÙ„ Ù…ØµØºØ± ÙÙˆÙ‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰</string>
    <string name="player_size_settings">Ø²Ø± ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù…Ø´ØºÙ„</string>
    <string name="player_size_settings_des">Ù‚Ù… Ø¨Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡</string>
    <string name="player_subtitles_settings">Ø§Ù„ØªØ±Ø¬Ù…Ø©</string>
    <string name="player_subtitles_settings_des">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù…Ø´ØºÙ„</string>
    <string name="eigengraumode_settings">ÙˆØ¶Ø¹ Ø¥ÙŠØºÙ†ØºØ±Ø§ÙÙŠ</string>
    <string name="eigengraumode_settings_des">ÙŠØ¶ÙŠÙ Ø®ÙŠØ§Ø± Ø§Ù„Ø³Ø±Ø¹Ø© ÙÙŠ Ø§Ù„Ù…Ø´ØºÙ„</string>
    <string name="swipe_to_seek_settings">Ø§Ø³Ø­Ø¨ Ù„Ù„Ø³Ø¹ÙŠ</string>
    <string name="swipe_to_seek_settings_des">Ø§Ø³Ø­Ø¨ Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± Ø£Ùˆ Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ÙˆÙ‚Øª ÙÙŠ Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</string>
    <string name="swipe_to_change_settings">Ø§Ø³Ø­Ø¨ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</string>
    <string name="swipe_to_change_settings_des">Ø§Ø³Ø­Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠØ³Ø± Ø£Ùˆ Ø§Ù„Ø£ÙŠÙ…Ù† Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ø·ÙˆØ¹ Ø£Ùˆ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª</string>
    <string name="double_tap_to_seek_settings">Ø§Ù†Ù‚Ø± Ù…Ø±ØªÙŠÙ†  Ù„Ù„Ø³Ø¹ÙŠ Ù„Ù„Ø£Ù…Ø§Ù… Ø£Ùˆ Ù„Ù„Ø®Ù„Ù</string>
    <string name="double_tap_to_pause_settings">Ø§Ø¶ØºØ· Ù…Ø±ØªÙŠÙ† Ù„Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</string>
    <string name="double_tap_to_seek_settings_des">Ø§Ø¶ØºØ· Ù…Ø±ØªÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠÙ…Ù† Ø£Ùˆ Ø§Ù„Ø£ÙŠØ³Ø± Ù„Ù„Ø³Ø¹ÙŠ Ù„Ù„Ø£Ù…Ø§Ù… Ø£Ùˆ Ù„Ù„Ø®Ù„Ù	</string>
    <string name="double_tap_to_pause_settings_des">Ø§Ø¶ØºØ· ÙÙŠ Ø§Ù„ÙˆØ³Ø· Ù„Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</string>
    <string name="use_system_brightness_settings">Ø§Ø³ØªØ®Ø¯Ù… Ø³Ø·ÙˆØ¹ Ø§Ù„Ù†Ø¸Ø§Ù…</string>
    <string name="use_system_brightness_settings_des">Ø§Ø³ØªØ®Ø¯Ù… Ø³Ø·ÙˆØ¹ Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙŠ Ù…Ø´ØºÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„ØªØ±Ø§ÙƒØ¨ Ø§Ù„Ø¯Ø§ÙƒÙ†</string>

    <string name="search">Ø¨Ø­Ø«</string>
    <string name="settings_info">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</string>
    <string name="advanced_search">Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</string>
    <string name="advanced_search_des">ÙŠØ¹Ø·ÙŠÙƒ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ù…ÙØµÙˆÙ„Ø© Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ù…Ø²ÙˆØ¯</string>
    <string name="bug_report_settings_off">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù† Ø§Ù„Ø£Ø¹Ø·Ø§Ù„ ÙÙ‚Ø·</string>
    <string name="bug_report_settings_on">Ù„Ø§ ØªØ±Ø³Ù„ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª</string>
    <string name="show_fillers_settings">Ø¹Ø±Ø¶ Ø­Ù„Ù‚Ø© ÙÙ„Ø± Ù„Ø£Ù†ÙŠÙ…ÙŠ</string>
    <string name="updates_settings">Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</string>
    <string name="updates_settings_des">Ø§Ø¨Ø­Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</string>
    <string name="uprereleases_settings">Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¥Ù„Ù‰ Ø§Ù„Ø§ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠÙ‡ (Ø¨ÙŠØªØ§)</string>
    <string name="uprereleases_settings_des">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø© ÙÙ‚Ø·</string>
    <string name="github">Github</string>
    <string name="lightnovel">ØªØ·Ø¨ÙŠÙ‚ Ø±ÙˆØ§ÙŠØ© Ø®ÙÙŠÙ Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†</string>
    <string name="anim">ØªØ·Ø¨ÙŠÙ‚ Anime Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†</string>
    <string name="discord">Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø¥Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</string>
    <string name="benene">Ø£Ø¹Ø· Ù…ÙˆØ²Ø© Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†</string>
    <string name="benene_des">Ø£Ø¹Ø· Ø§Ù„Ù…ÙˆØ²</string>

    <string name="app_language">Ù„ØºØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</string>

    <string name="no_chromecast_support_toast">Ù‡Ø°Ø§ Ø§Ù„Ù…Ø²ÙˆØ¯ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙ‡ Ø¯Ø¹Ù… ÙƒØ±ÙˆÙ… ÙƒØ§Ø³Øª</string>
    <string name="no_links_found_toast">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø·</string>
    <string name="copy_link_toast">ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©</string>
    <string name="play_episode_toast">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ù„Ù‚Ø©</string>
    <string name="subs_default_reset_toast">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</string>
    <string name="acra_report_toast">Ø¹Ø°Ø±Ø§ ØŒ ØªØ¹Ø·Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚. Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø±ÙŠØ± Ø®Ø·Ø£ Ù…Ø¬Ù‡ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†</string>
	
    <string name="season">Ù…ÙˆØ³Ù…</string>
    <string name="no_season">Ù„Ø§ Ù…ÙˆØ³Ù…</string>
    <string name="episode">Ø­Ù„Ù‚Ø©</string>
    <string name="episodes">Ø­Ù„Ù‚Ø§Øª</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>
    <string name="no_episodes_found">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ù„Ù‚Ø§Øª</string>

    <string name="delete_file">Ø­Ø°Ù Ù…Ù„Ù</string>
    <string name="delete">Ø­Ø°Ù</string>
    <string name="pause">Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</string>
    <string name="resume">Ø£ÙƒÙ…Ù„</string>
    <string name="go_back_30">-30</string>
    <string name="go_forward_30">+30</string>
    <string name="delete_message">This will permanently delete %s\nAre you sure?</string>
    <string name="resume_time_left" formatted="true">%dØ¯\nÙ…ØªØ¨Ù‚ÙŠØ©</string>

    <string name="status_ongoing">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°</string>
    <string name="status_completed">Ø§ÙƒØªÙ…Ù„</string>
    <string name="status">Ø§Ù„Ø­Ø§Ù„Ø©</string>
    <string name="year">Ø³Ù†Ø©</string>
    <string name="rating">ØªÙ‚ÙŠÙŠÙ…</string>
    <string name="duration">Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</string>
    <string name="site">Ù…ÙˆÙ‚Ø¹</string>
    <string name="synopsis">Ù…Ù„Ø®Øµ</string>

    <string name="queued">ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</string>
    <string name="no_subtitles">Ø§Ù„ØªØ±Ø¬Ù…Ø© Ù„ÙŠØ³Øª Ù…ÙˆØ¬ÙˆØ¯Ø©</string>
    <string name="default_subtitles">Ø§Ù„Ø¥ÙØªØ±Ø§Ø¶ÙŠ</string>

    <string name="free_storage">Ø­Ø±</string>
    <string name="used_storage">Ù…Ø³ØªØ®Ø¯Ù…</string>
    <string name="app_storage">ØªØ·Ø¨ÙŠÙ‚</string>

    <string name="movies">Ø£ÙÙ„Ø§Ù…</string>
    <string name="tv_series">Ù…Ø³Ù„Ø³Ù„Ø§Øª</string>
    <string name="cartoons">Ø±Ø³ÙˆÙ… Ù…ØªØ­Ø±ÙƒØ©</string>
    <string name="anime">Ø§Ù†Ù…ÙŠ</string>
    <string name="torrent">ØªÙˆØ±Ù†Øª</string>
    <string name="documentaries">Ø§Ù„Ø§ÙÙ„Ø§Ù… Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ÙŠØ©</string>
    <string name="ova">OVA</string>
	
    <string name="movies_singular">ÙÙŠÙ„Ù…</string>
    <string name="tv_series_singular">Ù…Ø³Ù„Ø³Ù„Ø§Øª</string>
    <string name="cartoons_singular">ÙƒØ§Ø±ØªÙˆÙ†</string>
    <string name="torrent_singular">ØªÙˆØ±Ù†Øª</string>
    <string name="documentaries_singular">ÙˆØ«Ø§Ø¦Ù‚ÙŠ</string>	
	
    <string name="source_error">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ØµØ¯Ø±</string>
    <string name="remote_error">Ø®Ø·Ø£ Ø¨Ø¹ÙŠØ¯</string>
    <string name="render_error">Ø®Ø·Ø£ ÙÙŠ Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¹Ø±Ø¶</string>
    <string name="unexpected_error">Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ù…Ø´ØºÙ„</string>
    <string name="storage_error">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø²ÙŠÙ„ ØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ†</string>

    <string name="episode_action_chromecast_episode">Ø­Ù„Ù‚Ø© ÙƒØ±ÙˆÙ… ÙƒØ§Ø³Øª</string>
    <string name="episode_action_chromecast_mirror">Ù…Ø±Ø¢Ø© ÙƒØ±ÙˆÙ… ÙƒØ§Ø³Øª</string>
    <string name="episode_action_play_in_app">ØªØ´ØºÙŠÙ„ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</string>
    <string name="episode_action_play_in_vlc">VLC ØªØ´ØºÙŠÙ„ ÙÙŠ</string>
    <string name="episode_action_play_in_browser">ØªØ´ØºÙŠÙ„ ÙÙŠ Ø§Ù„ÙˆÙŠØ¨ </string>
    <string name="episode_action_copy_link">Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</string>
    <string name="episode_action_auto_download">Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</string>
    <string name="episode_action_download_mirror">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø±Ø¢Ø©</string>
    <string name="episode_action_reload_links">Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</string>

    <string name="no_update_found">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØªØ­Ø¯ÙŠØ«</string>
    <string name="check_for_update">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª</string>

    <string name="video_lock">Ù‚ÙÙ„</string>
    <string name="video_aspect_ratio_resize">ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù…</string>
    <string name="video_source">Ù…ØµØ¯Ø±</string>
    <string name="video_skip_op">OP ØªØ®Ø·ÙŠ</string>

    <string name="dont_show_again">Ù„Ø§ ØªØ¸Ù‡Ø± Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</string>
    <string name="update">ØªØ­Ø¯ÙŠØ«</string>
    <string name="watch_quality_pref">Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©</string>
    <string name="video_buffer_size_settings">Ø­Ø¬Ù… Ø°Ø§ÙƒØ±Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª Ù„Ù„ÙÙŠØ¯ÙŠÙˆ</string>
    <string name="dns_pref">DNS ÙÙˆÙ‚ HTTPS</string>
    <string name="dns_pref_summary">Ù…ÙÙŠØ¯ Ù„ØªØ¬Ø§ÙˆØ² ÙƒØªÙ„ Ù…Ø²ÙˆØ¯ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</string>
	
    <string name="download_path_pref">Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙ†Ø²ÙŠÙ„</string>	
	
    <string name="display_subbed_dubbed_settings">Ø¹Ø±Ø¶ Ø£Ù†Ù…ÙŠ Ù…Ø¯Ø¨Ù„Ø¬ / Ù…ØªØ±Ø¬Ù…</string>

    <string name="resize_fit">ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø´Ø§Ø´Ø©</string>
    <string name="resize_fill">Ø§Ù…ØªØ¯Ø§Ø¯</string>
    <string name="resize_zoom">ØªÙƒØ¨ÙŠØ±</string>

    <string name="general">Ø¹Ø§Ù…</string>
    <string name="provider_lang_settings">Ù„ØºØ§Øª Ø§Ù„Ù…ÙˆÙØ±</string>
    <string name="app_layout">ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</string>	
    <string name="preferred_media_settings">Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ù…ÙØ¶Ù„ Ù…Ù† Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</string>	
	
    <string name="automatic">Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ</string> 
    <string name="tv_layout">ÙˆØ§Ø¬Ù‡Ø© Ø®Ø§ØµØ© Ø¨ØªÙ„ÙØ§Ø²</string>
    <string name="phone_layout">ÙˆØ§Ø¬Ù‡Ø© Ø®Ø§ØµØ© Ø¨Ù‡Ø§ØªÙ</string>
	
    <string name="primary_color_settings">Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</string>
    <string name="app_theme_settings">Ù…Ø¸Ù‡Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</string>
	
    <string name="account">Ø§Ù„Ø­Ø³Ø§Ø¨</string>
    <string name="logout">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</string>
    <string name="login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</string>
    <string name="switch_account">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨</string>
    <string name="add_account">Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨</string>
    <string name="add_sync">Add tracking</string>
    <!-- ============ -->
    <string name="none">Ù„Ø§ Ø´ÙŠØ¡</string>
    <string name="normal">Ø¹Ø§Ø¯ÙŠ</string>
    <string name="all">Ø§Ù„ÙƒÙ„</string>
    <string name="max">Ù…Ø§ÙƒØ³</string>
    <string name="min">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</string>
    <string name="subtitles_outline">Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø¹Ø±ÙŠØ¶Ø©</string>
    <string name="subtitles_depressed">Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…ÙƒØªØ¦Ø¨</string>
    <string name="subtitles_shadow">Ø¸Ù„</string>
    <string name="subtitles_raised">Ø±ÙØ¹</string>	
	
    <string name="subtitles_example_text">Ù†ØµÙŒÙ‘ Ø­ÙƒÙŠÙ…ÙŒ Ù„Ù‡Ù Ø³ÙØ±ÙŒÙ‘ Ù‚Ø§Ø·ÙØ¹ÙŒ ÙˆÙŽØ°ÙÙˆ Ø´ÙŽØ£Ù†Ù Ø¹ÙŽØ¸ÙŠÙ…Ù Ù…ÙƒØªÙˆØ¨ÙŒ Ø¹Ù„Ù‰ Ø«ÙˆØ¨Ù Ø£Ø®Ø¶Ø±ÙŽ ÙˆÙ…ÙØºÙ„ÙÙŒ Ø¨Ø¬Ù„Ø¯Ù Ø£Ø²Ø±Ù‚</string>

    <string name="recommended">Ù…ÙˆØµÙ‰ Ø¨Ù‡</string>
    <string name="player_load_subtitles">Ø¥Ø®ØªÙŠØ§Ø± Ù…Ù„Ù</string>
    <string name="downloaded_file">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø°ÙŠ ØªÙ… ØªÙ†Ø²ÙŠÙ„Ù‡</string>
    <string name="actor_main">Ø±Ø¦ÙŠØ³ÙŠ</string>
    <string name="actor_supporting">Ù…Ø³Ø§Ø¹Ø¯</string>
    <string name="actor_background">Ø®Ù„ÙÙŠØ©</string>
    <string name="chromecast_subtitles_settings">ØªØ±Ø¬Ù…Ø© ÙƒØ±ÙˆÙ… ÙƒØ§Ø³Øª</string>
    <string name="chromecast_subtitles_settings_des">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªØ±Ø¬Ù…Ø© Ø§Ù„ÙƒØ±ÙˆÙ… ÙƒØ§Ø³Øª</string>
    <string name="home_source">Ø§Ù„Ù…ØµØ§Ø¯Ø±</string>
</resources>



================================================
FILE: app/src/main/res/values-de/strings-de.xml
================================================
<resources xmlns:tools="http://schemas.android.com/tools" tools:ignore="MissingTranslation">

    <string name="result_poster_img_des">Poster</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">Episode Poster</string>
    <string name="home_main_poster_img_des">Hauptposter</string>
    <string name="home_next_random_img_des">NÃ¤chstes Poster</string>
    <string name="go_back_img_des">ZurÃ¼ck</string>
    <string name="home_change_provider_img_des">Anbieter Ã¤ndern</string>
    <string name="preview_background_img_des">Vorschau Hintergrund</string>
    <string name="player_speed_text_format" formatted="true">Geschwindigkeit (%.2fx)</string>
    <string name="rated_format" formatted="true">Bewertung: %.1f</string>
    <string name="new_update_format" formatted="true">Neues Update gefunden!\n%s -> %s</string>
    <string name="app_name">CloudStream</string>
    <string name="title_home">Startseite</string>
    <string name="title_search">Suchen</string>
    <string name="title_downloads">Downloads</string>
    <string name="title_settings">Einstellungen</string>
    <string name="search_hint">Sucheâ€¦</string>
    <string name="no_data">Keine Daten vorhanden</string>
    <string name="episode_more_options_des">Mehr Optionen</string>
    <string name="next_episode">NÃ¤chste Episode</string>
    <string name="result_tags">Genres</string>
    <string name="result_share">Teilen</string>
    <string name="result_open_in_browser">Im Browser Ã¶ffnen</string>
    <string name="skip_loading">Buffern Ã¼berspringen</string>
    <string name="loading_chromecast">LÃ¤dtâ€¦</string>
    <string name="type_watching">Am schauen</string>
    <string name="type_on_hold">Pausiert</string>
    <string name="type_completed">Abgeschlossen</string>
    <string name="type_dropped">Abgebrochen</string>
    <string name="type_plan_to_watch">Geplant</string>
    <string name="type_none">Nichts</string>
    <string name="play_movie_button">Film abspielen</string>
    <string name="play_torrent_button">Torrent streamen</string>
    <string name="pick_source">Quellen</string>
    <string name="pick_subtitle">Untertitel</string>
    <string name="reload_error">Verbindung wiederholenâ€¦</string>
    <string name="go_back">ZurÃ¼ck</string>
    <string name="play_episode">Episode abspielen</string>
    <string name="download">Herunterladen</string>
    <string name="downloaded">Heruntergeladen</string>
    <string name="downloading">LÃ¤dt herunter</string>
    <string name="download_paused">Download pausiert</string>
    <string name="download_started">Download begonnen</string>
    <string name="download_failed">Download fehlgeschlagen</string>
    <string name="download_canceled">Download abgebrochen</string>
    <string name="download_done">Download abgeschlossen</string>
    <string name="error_loading_links_toast">Fehler beim Laden von Links</string>
    <string name="download_storage_text">Interner Speicher</string>
    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>
    <string name="popup_delete_file">Datei lÃ¶schen</string>
    <string name="popup_play_file">Datei abspielen</string>
    <string name="popup_resume_download">Download fortsetzen</string>
    <string name="popup_pause_download">Download pausieren</string>
    <string name="pref_disable_acra">Automatische Fehlerberichterstattung deaktivieren</string>
    <string name="home_more_info">Mehr Infos</string>
    <string name="home_expanded_hide">Ausblenden</string>
    <string name="home_play">Abspielen</string>
    <string name="home_info">Info</string>
    <string name="filter_bookmarks">Lesezeichen filtern</string>
    <string name="error_bookmarks_text">Lesezeichen</string>
    <string name="action_remove_from_bookmarks">LÃ¶schen</string>
    <string name="sort_apply">Anwenden</string>
    <string name="sort_cancel">Abbrechen</string>
    <string name="player_speed">Player Geschwindigkeit</string>
    <string name="subtitles_settings">Untertitel Einstellungen</string>
    <string name="subs_text_color">Textfarbe</string>
    <string name="subs_outline_color">Konturfarbe</string>
    <string name="subs_background_color">Hintergrundfarbe</string>
    <string name="subs_window_color">Fensterfarbe</string>
    <string name="subs_edge_type">Kanten-Typ</string>
    <string name="subs_subtitle_elevation">Untertitel HÃ¶he</string>
    <string name="subs_font">Schriftart</string>
    <string name="subs_font_size">SchriftgrÃ¶ÃŸe</string>
    <string name="search_provider_text_providers">Suchen mit Anbietern</string>
    <string name="search_provider_text_types">Suchen mit Kategorien</string>
    <string name="benene_count_text">%d Benenes an die Entwickler gegeben</string>
    <string name="benene_count_text_none">Keine Benenes gegeben</string>
    <string name="subs_auto_select_language">Sprache automatisch auswÃ¤hlen</string>
    <string name="subs_download_languages">Sprachen herunterladen</string>
    <string name="subs_hold_to_reset_to_default">Halten, um auf die Standardeinstellungen zurÃ¼ckzusetzen</string>
    <string name="continue_watching">Weiterschauen</string>
    <string name="action_remove_watching">LÃ¶schen</string>
    <string name="action_open_watching">Mehr Infos</string>
    <string name="vpn_might_be_needed">Damit dieser Anbieter korrekt funktioniert, ist mÃ¶glicherweise eine VPN erforderlich</string>
    <string name="vpn_torrent">Dies ist ein Torrent Anbieter, eine VPN wird empfohlen</string>
    <string name="torrent_plot">Beschreibung</string>
    <string name="normal_no_plot">Keine Parzelle gefunden</string>
    <string name="torrent_no_plot">Keine Beschreibung gefunden</string>
    <string name="picture_in_picture">Bild-in-Bild-Modus</string>
    <string name="picture_in_picture_des">Setzt die Wiedergabe in einem Miniplayer Ã¼ber anderen Anwendungen fort</string>
    <string name="player_size_settings">SchaltflÃ¤che um die GrÃ¶ÃŸe des Players zu verÃ¤ndern</string>
    <string name="player_size_settings_des">Entfernt schwarze RÃ¤nder</string>
    <string name="player_subtitles_settings">Untertitel</string>
    <string name="player_subtitles_settings_des">Player Untertiteleinstellungen</string>
    <string name="eigengraumode_settings">Eigengravy Modus</string>
    <string name="eigengraumode_settings_des">FÃ¼gt die Geschwindigkeitsoption im Player hinzu</string>
    <string name="swipe_to_seek_settings">Wischen zum Suchen</string>
    <string name="swipe_to_seek_settings_des">Wische nach links oder rechts, um im Player vor- und zurÃ¼ckzuspulen</string>
    <string name="swipe_to_change_settings">Wischen, um Einstellungen zu Ã¤ndern</string>
    <string name="swipe_to_change_settings_des">Wische auf der linken oder rechten Seite, um die Helligkeit oder LautstÃ¤rke zu Ã¤ndern</string>
    <string name="double_tap_to_seek_settings">Doppeltippen zum vor- und zurÃ¼ckspulen</string>
    <string name="double_tap_to_seek_settings_des">Tippe zweimal auf die rechte oder linke Seite, um vorwÃ¤rts oder rÃ¼ckwÃ¤rts zuspulen</string>
    <string name="double_tap_to_pause_settings_des">Tippen zweimal in die Mitte, um zu pausieren</string>
    <string name="use_system_brightness_settings">Systemhelligkeit benutzen</string>
    <string name="use_system_brightness_settings_des">Benutze Systemhelligkeit im Player anstatt von einem Dunklem Overlay</string>
    <string name="restore_settings">Daten aus der Sicherung wiederherstellen</string>
    <string name="killswitch_settings">Aktuelle Metadaten von Github herunterladen</string>
    <string name="killswitch_settings_des">FÃ¼r Zugang zu allen Anbietern (auch zu defekten), deaktiviere diese Einstellung</string>
    <string name="backup_settings">Daten sichern</string>
    <string name="restore_success">Sicherungsdatei geladen</string>
    <string name="restore_failed_format" formatted="true">Wiederherstellung der Daten aus der Datei %s fehlgeschlagen</string>
    <string name="backup_success">Daten erfolgreich gespeichert</string>
    <string name="backup_failed">Speicherberechtigungen fehlen, bitte erneut versuchen</string>
    <string name="backup_failed_error_format">Fehler beim Sichern von %s</string>
    <string name="search">Suche</string>
    <string name="settings_info">Info</string>
    <string name="advanced_search">Erweiterte Suche</string>
    <string name="advanced_search_des">Liefert die Suchergebnisse getrennt von den jeweiligen Anbietern</string>
    <string name="bug_report_settings_off">Sendet Daten nur bei AbstÃ¼rzen</string>
    <string name="bug_report_settings_on">Sendet keine Daten</string>
    <string name="show_fillers_settings">Filler-Episoden fÃ¼r Animes anzeigen</string>
    <string name="updates_settings">App-Updates anzeigen</string>
    <string name="updates_settings_des">Automatisches Suchen nach neuen Updates beim Start</string>
    <string name="uprereleases_settings">Updaten auf Vorabversionen</string>
    <string name="uprereleases_settings_des">Sucht auch nach Vorabversionen statt nur nach Vollversionen</string>
    <string name="github">Github</string>
    <string name="lightnovel">Light Novel App von denselben Entwicklern</string>
    <string name="anim">Anime-App von denselben Entwicklern</string>
    <string name="discord">Discord beitreten</string>
    <string name="benene">Gebe den Entwicklern eine Benene</string>
    <string name="benene_des">Gegebene Benenes</string>
    <string name="app_language">App-Sprache</string>
    <string name="no_chromecast_support_toast">Dieser Anbieter hat keine Chromecast-UnterstÃ¼tzung</string>
    <string name="no_links_found_toast">Keine Links gefunden</string>
    <string name="copy_link_toast">Link in die Zwischenablage kopiert</string>
    <string name="play_episode_toast">Episode abspielen</string>
    <string name="subs_default_reset_toast">Auf Standardwerte zurÃ¼ckgesetzt</string>
    <string name="acra_report_toast">Sorry, die App ist abgestÃ¼rzt. Ein anonymer Fehlerbericht wird an die Entwickler gesendet</string>
    <string name="season">Season</string>
    <string name="no_season">Keine Season</string>
    <string name="episode">Episode</string>
    <string name="episodes">Episoden</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>
    <string name="delete_file">GelÃ¶schte Dateien</string>
    <string name="delete">LÃ¶schen</string>
    <string name="pause">Pausieren</string>
    <string name="resume">Fortsetzen</string>
    <string name="delete_message">Dies lÃ¶scht dauerhaft %s\nBist du dir sicher?</string>
    <string name="status_ongoing">Laufend</string>
    <string name="status_completed">Abgeschlossen</string>
    <string name="status">Status</string>
    <string name="year">Jahr</string>
    <string name="rating">Bewertung</string>
    <string name="duration">Dauer</string>
    <string name="site">Seite</string>
    <string name="synopsis">Zusammenfassung</string>
    <string name="queued">In der Warteschlange</string>
    <string name="no_subtitles">Kein Untertitel</string>
    <string name="default_subtitles">Standard</string>
    <string name="free_storage">Frei</string>
    <string name="used_storage">Benutzt</string>
    <string name="app_storage">App</string>
    <string name="movies">Filme</string>
    <string name="tv_series">TV-Serien</string>
    <string name="cartoons">Zeichentrickfilme</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrent</string>
    <string name="documentaries">Dokumentationen</string>
    <string name="ova">OVA</string>
    <string name="asian_drama">Asiatische Dramen</string>
    <string name="movies_singular">Film</string>
    <string name="tv_series_singular">Serie</string>
    <string name="cartoons_singular">Zeichentrickfilm</string>
    <string name="anime_singular">@string/anime</string>
    <string name="ova_singular">@string/ova</string>
    <string name="torrent_singular">Torrent</string>
    <string name="documentaries_singular">Dokumentation</string>
    <string name="asian_drama_singular">Asiatisches Drama</string>
    <string name="source_error">Quellenfehler</string>
    <string name="remote_error">Remotefehler</string>
    <string name="render_error">Renderfehler</string>
    <string name="unexpected_error">Unerwarteter Player-Fehler</string>
    <string name="storage_error">Download-Fehler, Speicherberechtigungen prÃ¼fen</string>
    <string name="episode_action_chromecast_episode">Chromecast Episoden</string>
    <string name="episode_action_chromecast_mirror">Chromecast Spiegeln</string>
    <string name="episode_action_play_in_app">In App abspielen</string>
    <string name="episode_action_play_in_vlc">In VLC-Player abspielen</string>
    <string name="episode_action_play_in_browser">Im Browser abspielen</string>
    <string name="episode_action_copy_link">Link kopieren</string>
    <string name="episode_action_auto_download">Automatischer Download</string>
    <string name="episode_action_download_mirror">Mirror herunterladen</string>
    <string name="episode_action_reload_links">Links neuladen</string>
    <string name="no_update_found">Keine Aktualisierungen gefunden</string>
    <string name="check_for_update">Auf Aktualisierungen Ã¼berprÃ¼fen</string>
    <string name="video_lock">Sperren</string>
    <string name="video_aspect_ratio_resize">GrÃ¶ÃŸe anpassen</string>
    <string name="video_source">Quelle</string>
    <string name="video_skip_op">Intro Ã¼berspringen</string>
    <string name="video_buffer_size_settings">VideopuffergrÃ¶ÃŸe</string>
    <string name="video_buffer_length_settings">VideopufferlÃ¤nge</string>
    <string name="video_buffer_disk_settings">Video-Cache auf Festplatte</string>
    <string name="video_buffer_clear_settings">Video- und Bildcache lÃ¶schen</string>
    <string name="video_ram_description">Kann auf Systemen mit geringem Arbeitsspeicher, wie z. B. Android-TV-GerÃ¤ten oder alten Handys, Probleme verursachen, wenn der Wert zu hoch eingestellt ist</string>
    <string name="video_disk_description">Kann auf Systemen mit geringem Speicherplatz, wie z. B. Android TV-GerÃ¤ten, zu Problemen fÃ¼hren, wenn der Wert zu hoch eingestellt ist</string>
    <string name="dont_show_again">Nicht mehr anzeigen</string>
    <string name="update">Aktualisieren</string>
    <string name="watch_quality_pref">Bevorzugte VideoqualitÃ¤t</string>
    <string name="dns_pref">DNS Ã¼ber HTTPS</string>
    <string name="dns_pref_summary">NÃ¼tzlich zur Umgehung von ISP-Sperren</string>
    <string name="display_subbed_dubbed_settings">Zeige Dubbed/Subbed Animes</string>
    <string name="resize_fit">An Bildschirm anpassen</string>
    <string name="resize_fill">Strecken</string>
    <string name="resize_zoom">Zoomen</string>
    <string name="provider_lang_settings">Anbietersprache</string>
    <string name="legal_notice">Haftungsausschluss</string>
    <string name="app_layout">App-Layout</string>
    <string name="preferred_media_settings">Bevorzugte Medien</string>
    <string name="automatic">Automatisch</string>
    <string name="tv_layout">TV-Layout</string>
    <string name="phone_layout">Handy-Layout</string>
    <string name="primary_color_settings">PrimÃ¤rfarbe</string>
    <string name="app_theme_settings">App-Thema</string>
    <string name="download_path_pref">Downloadpfad</string>
    <string name="account">Konto</string>
    <string name="logout">Abmelden</string>
    <string name="login">Anmelden</string>
    <string name="switch_account">Konto wechseln</string>
    <string name="add_account">Konto hinzufÃ¼gen</string>
    <string name="none">Keine</string>
    <string name="normal">Normal</string>
    <string name="all">Alle</string>
    <string name="subtitles_outline">Umrandung</string>
    <string name="subtitles_depressed">Gesenkt</string>
    <string name="subtitles_shadow">Schatten</string>
    <string name="subtitles_raised">ErhÃ¶ht</string>
    <string name="subtitle_offset">Synchronisiere Untertitel</string>
    <string name="subtitle_offset_hint">1000ms</string>
    <string name="subtitle_offset_title">Untertitel VerzÃ¶gerung</string>
    <string name="subtitle_offset_extra_hint_later_format">Verwende diese Option, wenn die Untertitel %dms zu frÃ¼h angezeigt werden</string>
    <string name="subtitle_offset_extra_hint_before_format">Verwende diese Option, wenn die Untertitel %dms zu spÃ¤t angezeigt werden</string>
    <string name="subtitle_offset_extra_hint_none_format">Keine VerzÃ¶gerung bei Untertiteln</string>
    <string name="subtitles_example_text">Kaufen Sie jede Woche vier gute bequeme Pelze</string>
    <string name="recommended">Empfohlen</string>
    <string name="player_loaded_subtitles" formatted="true">Geladen %s</string>
    <string name="player_load_subtitles">Aus Datei laden</string>
    <string name="downloaded_file">Datei herunterladen</string>
    <string name="actor_main">Hauptdarsteller</string>
    <string name="actor_supporting">Nebendarsteller</string>
    <string name="actor_background">Hintergrunddarsteller</string>
    <string name="home_source">Quelle</string>
    <string name="coming_soon">DemnÃ¤chst...</string>
    <string name="poster_image">Vorschaubild</string>
</resources>



================================================
FILE: app/src/main/res/values-el/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <string name="app_name">CloudStream</string>
    <string name="title_home">Î‘ÏÏ‡Î¹ÎºÎ®</string>
    <string name="title_search">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</string>
    <string name="title_downloads">Î›Î®ÏˆÎµÎ¹Ï‚</string>
    <string name="title_settings">Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚</string>
    <string name="search_hint">Î¨Î¬Î¾Îµâ€¦</string>
    <string name="search_poster_img_des">Î ÏŒÏƒÏ„ÎµÏ</string>
    <string name="no_data">Î§Ï‰ÏÎ¯Ï‚ Î´ÎµÎ´Î¿Î¼Î­Î½Î±</string>
    <string name="episode_more_options_des">Î ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Î•Ï€Î¹Î»Î¿Î³Î­Ï‚</string>
    <string name="go_back_img_des">Î Î¯ÏƒÏ‰</string>
    <string name="next_episode">Î•Ï€ÏŒÎ¼ÎµÎ½Î¿ Î•Ï€Î¹ÏƒÏŒÎ´ÎµÎ¹Î¿</string>
    <string name="result_poster_img_des">Î ÏŒÏƒÏ„ÎµÏ</string>
    <string name="synopsis">Î Î»Î¿ÎºÎ®</string>
    <string name="result_tags">Genres</string>
    <string name="result_share">ÎœÎ¿Î¯ÏÎ±ÏƒÎµ</string>
    <string name="result_open_in_browser">Î†Î½Î¿Î¹Î³Î¼Î± ÏƒÏ„Î¿Î½ Ï€ÎµÏÎ¹Î·Î³Î·Ï„Î®</string>
    <string name="skip_loading">Î ÏÎ¿ÏƒÏ€Î­ÏÎ±ÏƒÎ· Ï†Î¿ÏÏ„ÏŽÎ¼Î±Ï„Î¿Ï‚</string>
    <string name="loading_chromecast">Î¦ÏŒÏÏ„Ï‰ÏƒÎ·â€¦</string>

    <string name="type_watching">Watching</string>
    <string name="type_on_hold">On-Hold</string>
    <string name="type_completed">Completed</string>
    <string name="type_dropped">Dropped</string>
    <string name="type_plan_to_watch">Plan to Watch</string>
    <string name="type_none">None</string>

    <string name="play_movie_button">Î‘Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î® Î¤Î±Î¹Î½ÎµÎ¯Î±Ï‚</string>
    <string name="play_torrent_button">ÎœÎµÏ„Î¬Î´Î¿ÏƒÎ· Torrent</string>
    <string name="pick_source">Î Î·Î³Î­Ï‚</string>
    <string name="pick_subtitle">Î¥Ï€ÏŒÏ„Î¹Ï„Î»Î¿Î¹</string>
    <string name="reload_error">ÎžÎ±Î½Î¬ Ï†ÏŒÏÏ„Ï‰ÏƒÎµâ€¦</string>
    <string name="go_back">Î Î¯ÏƒÏ‰</string>
    <string name="episode_poster_img_des">Î ÏŒÏƒÏ„ÎµÏ</string>
    <string name="play_episode">Î‘Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î® Î•Ï€Î¹ÏƒÎ¿Î´ÎµÎ¯Î¿Ï…</string>
    <!--<string name="need_storage">Î”ÏŽÏƒÎµ Î¬Î´ÎµÎ¹Î± Î³Î¹Î± Ï„Î·Î½ Î»Î®ÏˆÎ· ÎµÏ€Î¹ÏƒÎ¿Î´ÎµÎ¯Î¿Ï…</string>-->
    <string name="download">Î›Î®Î¾Î·</string>
    <string name="error_loading_links_toast">Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎµÎ¹Ï‚ ÏƒÏ…Î½Î´Î­ÏƒÎ¼Ï‰Î½</string>
    <string name="download_storage_text">Î•ÏƒÏ‰Ï„ÎµÏÎ¹ÎºÏŒÏ‚ Ï‡ÏŽÏÎ¿Ï‚</string>
    <!--<string name="options">Î•Ï€Î¹Î»Î¿Î³Î­Ï‚</string>-->

    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>

    <string name="popup_delete_file">Î”Î¹Î±Î³ÏÎ±Ï†Î® Î‘ÏÏ‡ÎµÎ¯Î¿Ï…</string>
    <string name="popup_play_file">Î‘Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î® Î‘ÏÏ‡ÎµÎ¯Î¿Ï…</string>
    <string name="popup_resume_download">Î£Ï…Î½Î­Ï‡Î¹ÏƒÎ· Î›Î®ÏˆÎ·Ï‚</string>
    <string name="popup_pause_download">Î Î±ÏÏƒÎ· Î›Î®ÏˆÎ·Ï‚</string>

    <string name="acra_report_toast">Î›Ï…Ï€Î¿ÏÎ¼Î±ÏƒÏ„Îµ, Î· ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÎºÎ±Ï„Î­ÏÏÎµÏ…ÏƒÎµ. ÎœÎ¹Î± Î±Î½ÏŽÎ½Ï…Î¼Î· Î±Î½Î±Ï†Î¿ÏÎ¬ ÏƒÏ†Î±Î»Î¼Î¬Ï„Ï‰Î½ Î¸Î± ÏƒÏ„Î±Î»ÎµÎ¯ ÏƒÏ„Î¿Ï…Ï‚ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÏ„Î­Ï‚</string>
    <string name="pref_disable_acra">Î‘Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î·Î½ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Î½Î±Ï†Î¿ÏÎ¬ ÏƒÏ†Î±Î»Î¼Î¬Ï„Ï‰Î½</string>
    <string name="home_more_info">Î Î±ÏÎ±Ï€Î¬Î½Ï‰ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚</string>
    <string name="home_expanded_hide">ÎšÏÏÏˆÎ¹Î¼Î¿</string>
    <string name="home_main_poster_img_des">ÎšÏÏÎ¹Î¿ Î ÏŒÏƒÏ„ÎµÏ</string>
    <string name="home_play">Î‘Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î®</string>
    <string name="home_info">Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚</string>
    <string name="home_next_random_img_des">Next Random</string>
    <string name="home_change_provider_img_des">Change Provider</string>
    <string name="filter_bookmarks">Filter Bookmarks</string>
    <string name="error_bookmarks_text">Bookmarks</string>
    <string name="action_remove_from_bookmarks">Remove</string>
    <string name="play_episode_toast">Î‘Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î® Episode</string>
    <string name="sort_apply">Î¥Ï€Î¿Î²Î¿Î»Î®</string>
    <string name="sort_cancel">Î‘ÎºÏÏÏ‰ÏƒÎ·</string>
    <string name="player_speed">Î¤Î±Ï‡ÏÏ„Î·Ï„Î± Î±Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î®Ï‚</string>
    <string name="subtitles_settings">Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Ï…Ï€ÏŒÏ„Î¹Ï„Î»Ï‰Î½</string>
    <string name="subs_text_color">Î§ÏÏŽÎ¼Î± ÎºÎµÎ¯Î¼ÎµÎ½Î¿Ï…</string>
    <string name="subs_outline_color">Î§ÏÏŽÎ¼Î± Ï€ÎµÏÎ¹Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚</string>
    <string name="subs_background_color">Î§ÏÏŽÎ¼Î± Ï†ÏŒÎ½Ï„Î¿Ï…</string>
    <string name="subs_window_color">Î§ÏÏŽÎ¼Î± Ï€Î±ÏÎ±Î¸ÏÏÎ¿Ï…</string>
    <string name="subs_edge_type">Î¤ÏÏ€Î¿Ï‚ Î¬ÎºÏÏ‰Î½</string>
    <string name="subs_subtitle_elevation">ÎŽÏˆÏ‰ÏƒÎ· Ï…Ï€ÏŒÏ„Î¹Ï„Î»Ï‰Î½</string>
    <string name="subs_default_reset_toast">Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ ÏƒÏ„Î·Î½ Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î· Ï„Î¹Î¼Î®</string>
    <string name="preview_background_img_des">Î ÏÎ¿ÎµÏ€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ· Ï†ÏŒÎ½Ï„Î¿Ï…</string>
    <string name="subs_font">Î“ÏÎ±Î¼Î¼Î±Ï„Î¿ÏƒÎµÎ¹ÏÎ¬</string>
    <string name="search_provider_text_providers">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î¼Îµ Ï„Î¿Ï…Ï‚ Ï€Î±ÏÏŒÏ‡Î¿Ï…Ï‚</string>
    <string name="search_provider_text_types">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î¼Îµ Ï„ÏÏ€Î¿Ï…Ï‚</string>
    <string name="benene_count_text">%d Benenes given to devs</string>
    <string name="benene_count_text_none">No Benenes given</string>

    <string name="subs_auto_select_language">Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÎµÏ€Î¹Î»Î¿Î³Î® Î³Î»ÏŽÏƒÏƒÎ±Ï‚</string>
    <string name="subs_download_languages">Î›Î®ÏˆÎ· Î³Î»Ï‰ÏƒÏƒÏŽÎ½</string>
    <string name="subs_hold_to_reset_to_default">ÎšÏÎ±Ï„Î®ÏƒÏ„Îµ Ï€Î±Ï„Î·Î¼Î­Î½Î¿ Î³Î¹Î± ÎµÏ€Î±Î½Î±Ï†Î¿ÏÎ¬ ÏƒÏ„Î± Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î±</string>
    <string name="continue_watching">Î£Ï…Î½Î­Ï‡ÎµÎ¹Î± Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ·Ï‚</string>

    <string name="action_remove_watching">Î‘Ï†Î±Î¯ÏÎµÏƒÎ·</string>
    <string name="action_open_watching">Î Î±ÏÎ±Ï€Î¬Î½Ï‰ Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚</string>

    <string name="vpn_might_be_needed">A VPN might be needed for this provider to work correctly</string>
    <string name="vpn_torrent">This providers is a torrent, a VPN is recommended</string>
    <string name="torrent_plot">Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®</string>
    <string name="normal_no_plot">Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î®</string>
    <string name="torrent_no_plot">Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î®</string>
    
    <string name="picture_in_picture">Picture-in-picture</string>
    <string name="picture_in_picture_des">Î£Ï…Î½ÎµÏ‡Î¯Î¶ÎµÎ¹ Ï„Î·Î½ Î±Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î® ÏƒÎµ Î­Î½Î± Î¼Î¯Î½Î¹ Ï€Î±Î¯ÎºÏ„Î· Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Î¬Î»Î»ÎµÏ‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚</string>
    <string name="player_size_settings">Î‘Î»Î»Î±Î³Î® Î¼ÎµÎ³Î­Î¸Î¿Ï…Ï‚ Ï€Î±Î¯ÎºÏ„Î·</string>
    <string name="player_size_settings_des">Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Î¼Î±ÏÏÏ‰Î½ Ï€ÎµÏÎ¹Î³ÏÎ±Î¼Î¼Î¬Ï„Ï‰Î½</string>
    <string name="player_subtitles_settings">Î¥Ï€ÏŒÏ„Î¹Ï„Î»Î¿Î¹</string>
    <string name="player_subtitles_settings_des">Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Ï…Ï€Î¿Ï„Î¯Ï„Î»Ï‰Î½ Ï„Î¿Ï… Ï€Î±Î¯ÎºÏ„Î·</string>
    <string name="eigengraumode_settings">Eigengrau Mode</string>
    <string name="eigengraumode_settings_des">Î ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹ Ï„Î·Î½ ÎµÏ€Î¹Î»Î¿Î³Î® Ï„Î±Ï‡ÏÏ„Î·Ï„Î±Ï‚ ÏƒÏ„Î¿Î½ Ï€Î±Î¯ÎºÏ„Î·</string>
    <string name="swipe_to_seek_settings">Î£ÏÏÎµÏ„Îµ Î³Î¹Î± seek</string>
    <string name="swipe_to_seek_settings_des">Î£ÏÏÎµÏ„Îµ Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬ Î® Î´ÎµÎ¾Î¹Î¬ Î³Î¹Î± Î½Î± ÎµÎ»Î­Î³Î¾ÎµÏ„Îµ Ï„Î¿Î½ Ï‡ÏÏŒÎ½Î¿ ÏƒÏ„Î¿Î½ Ï€Î±Î¯ÎºÏ„Î·</string>
    <string name="swipe_to_change_settings">Î£ÏÏÎµÏ„Îµ Î³Î¹Î± Î½Î± Î±Î»Î»Î¬Î¾ÎµÏ„Îµ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚</string>
    <string name="swipe_to_change_settings_des">Î£ÏÏÎµÏ„Îµ Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬ Î® Î´ÎµÎ¾Î¹Î¬ Î³Î¹Î± Î½Î± Î±Î»Î»Î¬Î¾ÎµÏ„Îµ Ï„Î· Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î± Î® Ï„Î·Î½ Î­Î½Ï„Î±ÏƒÎ·</string>
    <string name="double_tap_to_seek_settings">Î”Î¹Ï€Î»ÏŒ Ï€Î¬Ï„Î·Î¼Î± Î³Î¹Î± seek</string>
    <string name="double_tap_to_seek_settings_des">Î”Î¹Ï€Î»ÏŒ Ï€Î¬Ï„Î·Î¼Î± ÏƒÏ„Î± Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬ Î® Î´ÎµÎ¾Î¹Î¬ Î³Î¹Î± seek Î¼Ï€ÏÎ¿ÏƒÏ„Î¬ Î® Ï€Î¯ÏƒÏ‰</string>
    <string name="search">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</string>
    <string name="settings_info">Î Î»Î·ÏÎ¿Ï†Î¿ÏÎµÎ¯ÎµÏ‚</string>
    <string name="advanced_search">Î ÏÎ¿Ï‡Ï‰ÏÎ·Î¼Î­Î½Î· Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</string>
    <string name="advanced_search_des">Î”Î¯Î½ÎµÎ¹ Ï„Î± Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î± Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚ Ï‡Ï‰ÏÎ¹ÏƒÎ¼Î­Î½Î± Î±Î½Î¬ Ï€Î¬ÏÎ¿Ï‡Î¿</string>
    <string name="bug_report_settings_off">Î‘Ï€Î¿ÏƒÏ„Î­Î»Î»ÎµÎ¹ Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î¼ÏŒÎ½Î¿ Î³Î¹Î± ÏƒÏ†Î¬Î»Î¼Î±Ï„Î±</string>
    <string name="bug_report_settings_on">Î”ÎµÎ½ ÏƒÏ„Î­Î»Î½ÎµÎ¹ Î´ÎµÎ´Î¿Î¼Î­Î½Î±</string>
    <string name="updates_settings">Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· ÎµÎ½Î·Î¼ÎµÏÏŽÏƒÎµÏ‰Î½</string>
    <string name="updates_settings_des">Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î½Î­Ï‰Î½ ÎµÎ½Î·Î¼ÎµÏÏŽÏƒÎµÏ‰Î½</string>
    <string name="uprereleases_settings">Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏƒÎµ Ï€ÏÎ¿-ÎµÎºÎ´ÏŒÏƒÎµÎ¹Ï‚</string>
    <string name="uprereleases_settings_des">Î‘Î½Î±Î¶Î·Ï„Î®ÏƒÏ„Îµ ÎµÎ½Î·Î¼ÎµÏÏŽÏƒÎµÎ¹Ï‚ Ï€ÏÎ¿-ÎµÎºÎ´ÏŒÏƒÎµÏ‰Î½ Î±Î½Ï„Î¯ Î³Î¹Î± ÎºÎ±Î½Î¿Î½Î¹ÎºÎ­Ï‚ ÎµÎºÎ´ÏŒÏƒÎµÎ¹Ï‚</string>
    <string name="github">Github</string>
    <string name="lightnovel">Light novel app by the same devs</string>
    <string name="anim">Anime app by the same devs</string>
    <string name="discord">Join Discord</string>
    <string name="benene">Î”ÏŽÏƒÎµ benene ÏƒÏ„Î¿Ï…Ï‚ devs</string>
    <string name="benene_des">Î’enene Î´ÏŽÎ¸Î·ÎºÎµ</string>
</resources>



================================================
FILE: app/src/main/res/values-es/strings-es.xml
================================================
<resources xmlns:tools="http://schemas.android.com/tools" tools:ignore="MissingTranslation">
<!--Created by The Translator <https://play.google.com/store/apps/details?id=com.sunilpaulmathew.translator>-->

    <string name="result_poster_img_des">Poster</string>
     <string name="search_poster_img_des">@string/result_poster_img_des</string>
     <string name="episode_poster_img_des">Episode Poster</string>
     <string name="home_main_poster_img_des">Main Poster</string>
     <string name="home_next_random_img_des">Next Random</string>
     <string name="go_back_img_des">Go back</string>
     <string name="home_change_provider_img_des">Change Provider</string>
     <string name="preview_background_img_des">Preview Background</string>
     <string name="player_speed_text_format" formatted="true">Velocidad (%.2fx)</string>
     <string name="rated_format" formatted="true">Puntuado: %.1f</string>
     <string name="new_update_format" formatted="true">Â¡Nueva actualizaciÃ³n encontrada!\n%s -> %s</string>
     <string name="filler" formatted="true">Relleno</string>
     <string name="app_name">CloudStream</string>
     <string name="title_home">Inicio</string>
     <string name="title_search">Buscar</string>
     <string name="title_downloads">Descargas</string>
     <string name="title_settings">Ajustes</string>
     <string name="search_hint">Buscarâ€¦</string>
     <string name="no_data">No hay datos</string>
     <string name="episode_more_options_des">MÃ¡s Opciones</string>
     <string name="next_episode">Siguiente capÃ­tulo</string>
     <string name="result_tags">GÃ©neros</string>
     <string name="result_share">Compartir</string>
     <string name="result_open_in_browser">Abrir en Navegador</string>
     <string name="skip_loading">Saltar Carga</string>
     <string name="loading_chromecast">Cargandoâ€¦</string>
     <string name="type_watching">Viendo</string>
     <string name="type_on_hold">En espera</string>
     <string name="type_completed">Completada</string>
     <string name="type_dropped">Dejada</string>
     <string name="type_plan_to_watch">Se planea ver</string>
     <string name="type_none">Ninguno</string>
     <string name="play_movie_button">Mirar PelÃ­cula</string>
     <string name="play_torrent_button">Stream Torrent</string>
     <string name="pick_source">Fuentes</string>
     <string name="pick_subtitle">SubtÃ­tulos</string>
     <string name="reload_error">Reintentar conexiÃ³nâ€¦</string>
     <string name="go_back">Ir atrÃ¡s</string>
     <string name="play_episode">Reproducir capÃ­tulo</string>
     <string name="download">Descarga</string>
     <string name="downloaded">Descargada</string>
     <string name="downloading">Descargando</string>
     <string name="download_paused">Descarga Pausada</string>
     <string name="download_started">Descarga Iniciada</string>
     <string name="download_failed">Descarga Fallida</string>
     <string name="download_canceled">Descarga Cancelada</string>
     <string name="download_done">Descarga Terminada</string>
     <string name="error_loading_links_toast">Error Cargando Links</string>
     <string name="download_storage_text">Almacenamiento Interno</string>
     <string name="app_dubbed_text">Dub</string>
     <string name="app_subbed_text">Sub</string>
     <string name="popup_delete_file">Eliminar Archivo</string>
     <string name="popup_play_file">Reproducir Archivo</string>
     <string name="popup_resume_download">Reanudar Descarga</string>
     <string name="popup_pause_download">Pausar Descarga</string>
     <string name="pref_disable_acra">Deshabilitar reporte de bugs automÃ¡tico</string>
     <string name="home_more_info">MÃ¡s info</string>
     <string name="home_expanded_hide">Esconder</string>
     <string name="home_play">Reproducir</string>
     <string name="home_info">Info</string>
     <string name="filter_bookmarks">Filtrar Marcadores</string>
     <string name="error_bookmarks_text">Marcadores</string>
     <string name="action_remove_from_bookmarks">Remover</string>
     <string name="sort_apply">Aplicar</string>
     <string name="sort_cancel">Cancelar</string>
     <string name="player_speed">Velocidad de Reproductor</string>
     <string name="subtitles_settings">Ajustes de SubtÃ­tulos</string>
     <string name="subs_text_color">Color de Texto</string>
     <string name="subs_outline_color">Color de Delineado</string>
     <string name="subs_background_color">Color de Fondo</string>
     <string name="subs_window_color">Color de Ventana</string>
     <string name="subs_edge_type">Tipo de Borde</string>
     <string name="subs_subtitle_elevation">ElevaciÃ³n de SubtÃ­tulo</string>
     <string name="subs_font">Fuente</string>
     <string name="subs_font_size">TamaÃ±o de Fuente</string>
     <string name="search_provider_text_providers">Buscar usando proveedores</string>
     <string name="search_provider_text_types">Buscar usando tipos</string>
     <string name="benene_count_text">%d Benenes dadas a los devs</string>
     <string name="benene_count_text_none">No se dieron Benenes</string>
     <string name="subs_auto_select_language">Auto-elegir Idioma</string>
     <string name="subs_download_languages">Descargar Idiomas</string>
     <string name="subs_hold_to_reset_to_default">Mantener para resetear a default</string>
     <string name="continue_watching">Seguir Viendo</string>
     <string name="action_remove_watching">Remover</string>
     <string name="action_open_watching">MÃ¡s Info</string>
     <string name="vpn_might_be_needed">PodrÃ­a necesitarse una VPN para que este proveedor funcione correctamente</string>
     <string name="vpn_torrent">Este proveedor es un torrent; se recomienda una VPN</string>
     <string name="torrent_plot">DescripciÃ³n</string>
     <string name="normal_no_plot">Trama No Encontrada</string>
     <string name="torrent_no_plot">DescripciÃ³n No Encontrada</string>
     <string name="picture_in_picture">Picture-in-picture</string>
     <string name="picture_in_picture_des">ContinÃºa reproduciendo en un player miniatura por encima de otras apps</string>
     <string name="player_size_settings">BotÃ³n Cambiar TamaÃ±o de player</string>
     <string name="player_size_settings_des">Quitar bordes negros</string>
     <string name="player_subtitles_settings">SubtÃ­tulos</string>
     <string name="player_subtitles_settings_des">Ajustes de subtÃ­tulos del Player</string>
     <string name="eigengraumode_settings">Modo Eigengravy</string>
     <string name="eigengraumode_settings_des">Agrega un botÃ³n de velocidad en el reproductor</string>
     <string name="swipe_to_seek_settings">Deslizar para adelantar</string>
     <string name="swipe_to_seek_settings_des">Deslizar a la izq. o der. para controlar el tiempo en el reproductor</string>
     <string name="swipe_to_change_settings">Deslizar para cambiar ajustes</string>
     <string name="swipe_to_change_settings_des">Deslizar en el lado izq. o der. para cambiar brillo o volumen</string>
     <string name="double_tap_to_seek_settings">Doble toque para adelantar</string>
     <string name="use_system_brightness_settings">Usar brillo del sistema</string>
     <string name="use_system_brightness_settings_des">Usar el brillo del sistema en lugar de una capa negra</string>
     <string name="search">Buscar</string>
     <string name="settings_info">Info</string>
     <string name="advanced_search">BÃºsqueda Avanzada</string>
     <string name="advanced_search_des">Muestra resultados de bÃºsqueda separador por proveedor</string>
     <string name="bug_report_settings_off">SÃ³lo envÃ­a datos al crashear</string>
     <string name="bug_report_settings_on">No envÃ­a datos</string>
     <string name="show_fillers_settings">Mostrar episodio relleno para anime</string>
     <string name="updates_settings">Mostrar actualizaciones de app</string>
     <string name="updates_settings_des">Busca nuevas actualizaciones al iniciar</string>
     <string name="uprereleases_settings">Actualizar a Pre-releases</string>
     <string name="uprereleases_settings_des">Busca actualizaciones pre-release en vez de sÃ³lo releases completas</string>
     <string name="github">Github</string>
     <string name="lightnovel">App light novel por los mismos devs</string>
     <string name="discord">Unirse a Discord</string>
     <string name="benene">Darle benene a los devs</string>
     <string name="benene_des">Benene dada</string>
     <string name="app_language">Idioma de App</string>
     <string name="no_chromecast_support_toast">Este proveedor no tiene soporte para chromecast</string>
     <string name="no_links_found_toast">Links No Encontrados</string>
     <string name="copy_link_toast">Link copiado al portapapeles</string>
     <string name="play_episode_toast">Reproducir capÃ­tulo</string>
     <string name="subs_default_reset_toast">Resetear a valor por defecto</string>
     <string name="season">Temporada</string>
     <string name="no_season">Sin Temporada</string>
     <string name="episode">CapÃ­tulo</string>
     <string name="episodes">CapÃ­tulos</string>
     <string name="season_short">T</string>
     <string name="episode_short">C</string>
     <string name="delete_file">Eliminar Archivo</string>
     <string name="delete">Eliminar</string>
     <string name="pause">Pausar</string>
     <string name="resume">Reanudar</string>
     <string name="delete_message">Esto borrarÃ¡ %s permanentemente\nÂ¿Seguro?</string>
     <string name="status_ongoing">En Curso</string>
     <string name="status_completed">Completada</string>
     <string name="status">Estado</string>
     <string name="year">AÃ±o</string>
     <string name="rating">Puntaje</string>
     <string name="duration">DuraciÃ³n</string>
     <string name="site">Sitio</string>
     <string name="synopsis">Sinopsis</string>
     <string name="queued">En cola</string>
     <string name="no_subtitles">No Hay SubtÃ­tulos</string>
     <string name="default_subtitles">Por Defecto</string>
     <string name="free_storage">Libre</string>
     <string name="used_storage">Usado</string>
     <string name="app_storage">App</string>
     <string name="movies">Pelis</string>
     <string name="tv_series">Series de TV</string>
     <string name="cartoons">Caricaturas</string>
     <string name="anime">Anime</string>
     <string name="torrent">Torrent</string>
     <string name="source_error">Error de fuente</string>
     <string name="remote_error">Error remoto</string>
     <string name="render_error">Error de Renderizador</string>
     <string name="unexpected_error">Error de reproductor inesperado</string>
     <string name="storage_error">Error de descarga
 revisar permisos de almacenamiento</string>
     <string name="episode_action_chromecast_episode">Chromecast al CapÃ­tulo</string>
     <string name="episode_action_chromecast_mirror">Chromecast al Espejo</string>
     <string name="episode_action_play_in_app">Mirar en App</string>
     <string name="episode_action_play_in_vlc">Mirar en VLC</string>
     <string name="episode_action_play_in_browser">Mirar en Navegador</string>
     <string name="episode_action_copy_link">Copiar Link</string>
     <string name="episode_action_auto_download">Auto Descargar</string>
     <string name="episode_action_download_mirror">Descargar Espejo</string>
     <string name="episode_action_reload_links">Recargar Links</string>
     <string name="no_update_found">No hay Actualizaciones</string>
     <string name="check_for_update">Buscar ActualizaciÃ³n</string>
     <string name="video_lock">Fijar</string>
     <string name="video_aspect_ratio_resize">Cambiar TamaÃ±o</string>
     <string name="video_source">Fuente</string>
     <string name="video_skip_op">Saltar OP</string>
     <string name="dont_show_again">No mostrar de nuevo</string>
     <string name="update">Actualizar</string>
     <string name="watch_quality_pref">Calidad Preferida</string>
     <string name="display_subbed_dubbed_settings">Mostrar Anime Doblado/Subtitulado</string>
     <string name="resize_fit">Ajustar a Pantalla</string>
     <string name="resize_fill">Estirar</string>
     <string name="resize_zoom">Acercar</string>
</resources>


================================================
FILE: app/src/main/res/values-fr/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <string name="app_name">CloudStream</string>
    <string name="title_home">Accueil</string>
    <string name="title_search">Rechercher</string>
    <string name="title_downloads">TÃ©lÃ©chargements</string>
    <string name="title_settings">ParamÃ¨tres</string>
    <string name="search_hint">Rechercherâ€¦</string>
    <string name="search_poster_img_des">Miniature</string>
    <string name="no_data">Aucune DonnÃ©e</string>
    <string name="episode_more_options_des">Plus d\'options</string>
    <string name="go_back_img_des">Retour</string>
    <string name="next_episode">Episode suivant</string>
    <string name="result_poster_img_des">Miniature</string>
    <string name="result_tags">Genres</string>
    <string name="result_share">Partager</string>
    <string name="result_open_in_browser">Ouvrir dans le naviguateur</string>
    <string name="skip_loading">Passer le chargement</string>
    <string name="loading_chromecast">Chargementâ€¦</string>
    <string name="type_watching">En visionnage</string>
    <string name="type_on_hold">En pose</string>
    <string name="type_completed">TerminÃ©</string>
    <string name="type_dropped">AbandonnÃ©</string>
    <string name="type_plan_to_watch">A regarder</string>
    <string name="type_none">Aucun</string>
    <string name="play_movie_button">Lire</string>
    <string name="play_torrent_button">Streamer Torrent</string>
    <string name="pick_source">Sources</string>
    <string name="pick_subtitle">Sous-titres</string>
    <string name="reload_error">RÃ©essayer la connectionâ€¦</string>
    <string name="go_back">Retour</string>
    <string name="episode_poster_img_des">Miniature de l\'Episode</string>
    <string name="play_episode">Lire l\'Episode</string>
    <!--<string name="need_storage">Permet de tÃ©lÃ©charger les Ã©pisodes</string>-->
    <string name="download">TÃ©lÃ©charger</string>
    <string name="downloaded">TÃ©lÃ©chargÃ©</string>
    <string name="downloading">TÃ©lÃ©chargement</string>
    <string name="download_paused">TÃ©lÃ©chargement en pause</string>
    <string name="download_started">TÃ©lÃ©chargement commencÃ©</string>
    <string name="download_failed">Echec du TÃ©lÃ©chargement</string>
    <string name="download_canceled">TÃ©lÃ©chargement AnnulÃ©</string>
    <string name="download_done">TÃ©lÃ©chargement TerminÃ©</string>
    <string name="error_loading_links_toast">Erreur lors du tÃ©lÃ©chargement des liens</string>
    <string name="download_storage_text">Stockage Interne</string>
    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>
    <string name="popup_delete_file">Supprimer le fichier</string>
    <string name="popup_play_file">Lire le fichier</string>
    <string name="popup_resume_download">Reprendre le tÃ©lÃ©chargement</string>
    <string name="popup_pause_download">Mettre en pause le tÃ©lÃ©chargement</string>
    <string name="pref_disable_acra">DÃ©sactiver le rapport de bug automatique</string>
    <string name="home_more_info">Plus d\'informations</string>
    <string name="home_expanded_hide">Cacher</string>
    <string name="home_main_poster_img_des">Poster principal</string>
    <string name="home_play">Lecture</string>
    <string name="home_info">Info</string>
    <string name="home_next_random_img_des">Suivant AlÃ©atoire</string>
    <string name="home_change_provider_img_des">Changer le fournisseur</string>
    <string name="filter_bookmarks">Filtrer les marques-pages</string>
    <string name="error_bookmarks_text">Marque-pages</string>
    <string name="action_remove_from_bookmarks">Supprimer</string>
    <string name="sort_apply">Appliquer</string>
    <string name="sort_cancel">Annuler</string>
    <string name="player_speed">Vitesse de lecture</string>
    <string name="subtitles_settings">ParamÃ¨tres de sous-titres</string>
    <string name="subs_text_color">Couleur du texte</string>
    <string name="subs_outline_color">Couleur de la bordure exterieur</string>
    <string name="subs_background_color">Couleur de fond</string>
    <string name="subs_window_color">Couleur de la fenÃ¨tre</string>
    <string name="subs_edge_type">Type de bordure</string>
    <string name="subs_subtitle_elevation">Elevation des sous-titres</string>
    <string name="preview_background_img_des">AperÃ§u de l\'arriÃ¨re-plan</string>
    <string name="subs_font">Police</string>
    <string name="search_provider_text_providers">Rechercher en utilisant les fournisseurs</string>
    <string name="search_provider_text_types">Rechercher en utilisant les types</string>
    <string name="benene_count_text">%d Benenes donnÃ©es au dev</string>
    <string name="benene_count_text_none">Aucune Benenes donnÃ©e</string>
    <string name="subs_auto_select_language">SÃ©lÃ©ction automatique de la langue</string>
    <string name="subs_download_languages">TÃ©lÃ©charger les langues</string>
    <string name="subs_hold_to_reset_to_default">Maintenir pour rÃ©initialliser les valeurs par dÃ©fault</string>
    <string name="continue_watching">Continer Ã  regarder</string>
    <string name="action_remove_watching">Supprimer</string>
    <string name="action_open_watching">Plus d\'info</string>
    <string name="vpn_might_be_needed">Un VPN peut Ãªtre requit pour que ce fournisseur fonctionne</string>
    <string name="vpn_torrent">Ce fournisseur est un torrent, un VPN est recommendÃ©</string>
    <string name="torrent_plot">Description</string>
    <string name="normal_no_plot">Aucune description trouvÃ©e</string>
    <string name="torrent_no_plot">Aucune description trouvÃ©e</string>
    <string name="picture_in_picture">Lecteur en mode Picture-in-Picture</string>
    <string name="picture_in_picture_des">Continuer la lecture dans une fenÃªtre miniature en superposition sur d\'autres applis</string>
    <string name="player_size_settings">Boutton de redimentionnement du lecteur</string>
    <string name="player_size_settings_des">Supprimer les bordures noires</string>
    <string name="player_subtitles_settings">Sous-titres</string>
    <string name="player_subtitles_settings_des">ParamÃ¨tres des sous-titres du lecteur</string>
    <string name="eigengraumode_settings">Vitesse de lecture</string>
    <string name="eigengraumode_settings_des">Ajouter l\'option de vitesse sur le lecteur</string>
    <string name="swipe_to_seek_settings">Balayer pour avancer rapidement</string>
    <string name="swipe_to_seek_settings_des">Balayer vers la gauche ou la droite pour controler le temps du lecteur vidÃ©o</string>
    <string name="swipe_to_change_settings">Balayer pour changer les paramÃ¨tres</string>
    <string name="swipe_to_change_settings_des">Balayer sur le cotÃ© droit ou gauche pour changer le niveau de luminositÃ© ou de volume</string>
    <string name="double_tap_to_seek_settings">Taper deux fois pour rechercher</string>
    
    <string name="double_tap_to_pause_settings">Taper deux fois pour mettre en pause</string>

    <string name="double_tap_to_seek_settings_des">Taper deux fois sur le cotÃ© droit ou gauche pour avancer ou reculer</string>
    <string name="search">Rechercher</string>
    <string name="settings_info">Informations</string>
    <string name="advanced_search">Recherche AvancÃ©e</string>
    <string name="advanced_search_des">Donne les rÃ©sultats sÃ©parÃ© par les fournisseur</string>
    <string name="bug_report_settings_off">N\'envoyer les donnÃ©es que lors d\'un crash</string>
    <string name="bug_report_settings_on">N\'envoyer aucune donnÃ©es</string>
    <string name="updates_settings">Afficher les mises-Ã -jour de l\'application</string>
    <string name="updates_settings_des">Chercher des mises-Ã -jour automatiquement au dÃ©marage</string>
    <string name="uprereleases_settings">Mettre Ã  jour vers une version bÃ©ta</string>
    <string name="uprereleases_settings_des">Rechercher pour une mise Ã  jour vers une version bÃ©ta au lieu des version complÃ¨tes seulement</string>
    <string name="github">Github</string>
    <string name="lightnovel">L\'application Light Novel par les mÃªmes devs</string>
    <string name="anim">Application d\'animÃ©s par les mÃªmes devs</string>
    <string name="discord">Rejoindre le serveur Discord</string>
    <string name="benene">Donner une benene aux devs</string>
    <string name="benene_des">benenes donnÃ©es</string>
    <string name="app_language">Language de l\'application</string>
    <string name="no_chromecast_support_toast">Ce fournisseur ne supporte pas le Chromecast</string>
    <string name="no_links_found_toast">Aucun lien trouvÃ©</string>
    <string name="copy_link_toast">Lien copiÃ© dans le presse-papiers</string>
    <string name="play_episode_toast">Lecture de l\'episode</string>
    <string name="subs_default_reset_toast">RÃ©initialiser aux valeurs par dÃ©fault</string>
    <string name="acra_report_toast">DÃ©solÃ©, l\'application Ã  crashÃ©. Un rapport de bug anonyme va Ãªtre envoyÃ© aux devloppeurs</string>
    <string name="season">Saison</string>
    <string name="no_season">Pas de Saison</string>
    <string name="episode">Episode</string>
    <string name="episodes">Episodes</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>
    <string name="delete_file">Supprimer le Fichier</string>
    <string name="delete">Supprimer</string>
    <string name="pause">Pause</string>
    <string name="resume">Reprendre</string>
    <string name="delete_message">Cela va supprimer dÃ©finitivement %s\nÃŠtes vous sÃ»r ?</string>
    <string name="status_ongoing">En cours</string>
    <string name="status_completed">TerminÃ©</string>
    <string name="status">Status</string>
    <string name="year">AnnÃ©e</string>
    <string name="rating">Note</string>
    <string name="duration">DurÃ©e</string>
    <string name="site">Site</string>
    <string name="synopsis">Synopsis</string>
    <string name="queued">Liste d\'attente</string>
    <string name="no_subtitles">Pas de sous-titres</string>
    <string name="default_subtitles">DÃ©fault</string>
    <string name="free_storage">Libre</string>
    <string name="used_storage">UtilisÃ©</string>
    <string name="app_storage">Application</string>
    <string name="movies">Films</string>
    <string name="tv_series">SÃ©ries TV</string>
    <string name="cartoons">Dessin animÃ©s</string>
    <string name="anime">AnimÃ©s</string>
    <string name="torrent">Torrents</string>
    <string name="source_error">Erreur de la source</string>
    <string name="remote_error">Erreur distante</string>
    <string name="render_error">Erreur d\'affichage</string>
    <string name="unexpected_error">Erreur innatendue du lecteur</string>
    <string name="storage_error">Erreur du tÃ©lÃ©chargement, vÃ©rifier l\'autorisation du stockage</string>
    <string name="episode_action_chromecast_episode">Episode Chromecast</string>
    <string name="episode_action_chromecast_mirror">Miroir Chromecast</string>
    <string name="episode_action_play_in_app">Lecture dans l\'application</string>
    <string name="episode_action_play_in_vlc">Lecture dans VLC</string>
    <string name="episode_action_play_in_browser">Lecture dans le navigateur</string>
    <string name="episode_action_copy_link">Copier le lien</string>
    <string name="episode_action_auto_download">TÃ©lÃ©chargement Automatique</string>
    <string name="episode_action_download_mirror">TÃ©lÃ©charger depuis le miroir</string>
    <string name="episode_action_reload_links">Recharger les liens</string>
    <string name="no_update_found">Pas de mise-Ã -jour trouvÃ©s</string>
    <string name="check_for_update">VÃ©rifier les mise-Ã -jour</string>
    <string name="video_lock">Verouiller</string>
    <string name="video_aspect_ratio_resize">Redimensionner</string>
    <string name="video_source">Source</string>
    <string name="video_skip_op">Passer l\'OP</string>
    <string name="dont_show_again">Ne pas afficher Ã  nouveau</string>
    <string name="update">Mettre Ã  jour</string>
    <string name="dns_pref_summary">Utile pour contourner les bloquages des FAI</string>

    <string name="download_path_pref">Emplacement de tÃ©lÃ©chargement</string>

    <string name="new_update_format" formatted="true">Nouvelle mise Ã  jour trouvÃ©e !
\n%s -&gt; %s</string>
    <string name="filler" formatted="true">Ã‰pisode spÃ©cial</string>
    <string name="watch_quality_pref">QualitÃ© de visionnage prÃ©fÃ©rÃ©e</string>
    <string name="video_buffer_size_settings">Taille de la mÃ©moire cache</string>
    <string name="resize_fill">Ã‰tendre</string>
    <string name="legal_notice">Non-responsabilitÃ©</string>
    <string name="primary_color_settings">Couleur principale</string>
    <string name="app_theme_settings">ThÃ¨me de l\'application</string>
    <string name="player_speed_text_format" formatted="true">Vitesse (%.2fx)</string>
    <string name="use_system_brightness_settings">Utiliser la luminositÃ© du systÃ¨me</string>
    <string name="general">GÃ©nÃ©ral</string>
    <string name="dns_pref">DNS avec HTTPS</string>
    <string name="display_subbed_dubbed_settings">Afficher les animÃ©s en Anglais (Dub) / sous-titrÃ©s</string>
    <string name="phone_layout">Disposition en mode tÃ©lÃ©phone</string>
    <string name="app_dub_sub_episode_text_format">%s Ep %d</string>
    <string name="rated_format" formatted="true">Noteâ€¯: %.1f</string>
    <string name="subs_font_size">Taille de la police</string>
    <string name="use_system_brightness_settings_des">Utiliser la luminositÃ© du systÃ¨me dans le lecteur de l\'application au lieu d\'un Ã©cran noir</string>
    <string name="show_fillers_settings">Afficher les Ã©pisodes spÃ©ciaux pour les animÃ©s</string>
    <string name="resize_zoom">Zoom</string>
    <string name="resize_fit">Adapter Ã  l\'Ã©cran</string>
    <string name="app_layout">Disposition de l\'application</string>
    <string name="tv_layout">Disposition TV</string>
    <string name="provider_lang_settings">Language des fournisseurs</string>
    <string name="preferred_media_settings">MÃ©dias prÃ©fÃ¨res</string>
    <string name="automatic">Auto</string>
</resources>



================================================
FILE: app/src/main/res/values-hi/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">à¤°à¤«à¥à¤¤à¤¾à¤° (%.2fx)</string>
    <string name="new_update_format" formatted="true">à¤¨à¤¯à¤¾ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤†à¤¯à¤¾ à¤¹à¥ˆ!\n%s -> %s</string>

    <string name="title_home">à¤¹à¥‹à¤®</string>
    <string name="title_search">à¤–à¥‹à¤œà¥‡à¤‚</string>
    <string name="title_downloads">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡</string>
    <string name="title_settings">à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—</string>

    <string name="no_data">à¤¡à¥‡à¤Ÿà¤¾ à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤¨à¤¹à¥€ à¤¹à¥ˆ</string>
    <string name="episode_more_options_des">à¤…à¤¨à¥à¤¯ à¤‘à¤ªà¥à¤¶à¤¨</string>
    <string name="next_episode">à¤…à¤—à¤²à¤¾ à¤à¤ªà¤¿à¤¸à¥‹à¤¡</string>
    <string name="result_tags">à¤¶à¥ˆà¤²à¤¿à¤¯à¤¾à¤‚</string>
    <string name="result_share">à¤¶à¥‡à¤¯à¤°</string>
    <string name="result_open_in_browser">à¤¬à¥à¤°à¤¾à¤‰à¥›à¤° à¤®à¥‡à¤‚ à¤–à¥‹à¤²à¥‡à¤‚</string>

    <string name="type_watching">à¤¦à¥‡à¤–à¤¾ à¤œà¤¾ à¤°à¤¹à¤¾ à¤¹à¥ˆ</string>
    <string name="type_on_hold">à¤¹à¥‹à¤²à¥à¤¡ à¤ªà¤°</string>
    <string name="type_completed">à¤ªà¥‚à¤°à¤¾ à¤¦à¥‡à¤–à¤¾</string>
    <string name="type_dropped">à¤…à¤§à¥‚à¤°à¤¾ à¤›à¥‹à¤¡à¤¼à¤¾</string>
    <string name="type_plan_to_watch">à¤¦à¥‡à¤–à¤¨à¥‡ à¤•à¥€ à¤¯à¥‹à¤œà¤¨à¤¾</string>

    <string name="play_movie_button">à¤®à¥‚à¤µà¥€ à¤šà¤²à¤¾à¤¯à¥‡</string>
    <string name="play_torrent_button">à¤Ÿà¥‹à¤°à¥‡à¤‚à¤Ÿ à¤šà¤²à¤¾à¤¯à¥‡</string>
    <string name="pick_source">à¤¸à¥‚à¤¤à¥à¤°</string>
    <string name="reload_error">à¤«à¤¿à¤°à¤¸à¥‡ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡â€¦</string>
    <string name="go_back">à¤µà¤¾à¤ªà¤¿à¤¸ à¤œà¤¾à¤</string>
    <string name="play_episode">à¤à¤ªà¤¿à¤¸à¥‹à¤¡ à¤šà¤²à¤¾à¤¯à¥‡</string>
    <!--<string name="need_storage">Allow to download episodes</string>-->

    <string name="download">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡</string>
    <string name="downloaded">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾</string>
    <string name="downloading">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾</string>
    <string name="download_paused">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤°à¥‹à¤•à¤¾ à¤—à¤¯à¤¾</string>
    <string name="download_started">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤¶à¥à¤°à¥‚</string>
    <string name="download_failed">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤¨à¤¹à¥€ à¤¹à¥‹ à¤ªà¤¾à¤¯à¤¾</string>
    <string name="download_canceled">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤°à¤¦à¥à¤¦</string>
    <string name="download_done">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤ªà¥‚à¤°à¤¾ à¤¹à¥à¤†</string>

    <string name="error_loading_links_toast">à¤²à¤¿à¤‚à¤• à¤®à¥‡à¤‚ à¤—à¥œà¤¬à¥œ à¤¹à¥ˆ</string>
    <string name="download_storage_text">à¤…à¤‚à¤¦à¤°à¥‚à¤¨à¥€ à¤¸à¥à¤Ÿà¥‹à¤°à¥‡à¤œ</string>

    <string name="popup_delete_file">à¥žà¤¾à¤‡à¤² à¤¡à¤¿à¤²à¥€à¤Ÿ</string>
    <string name="popup_play_file">à¥žà¤¾à¤‡à¤² à¤šà¤²à¤¾à¤¯à¥‡</string>
    <string name="popup_resume_download">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤«à¤¿à¤° à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡</string>
    <string name="popup_pause_download">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤°à¥‹à¤•à¥‡</string>

    <string name="pref_disable_acra">Disable automatic bug reporting</string>
    <string name="home_more_info">à¤”à¤° à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€</string>
    <string name="home_expanded_hide">à¤›à¤¿à¤ªà¤¾à¤¯à¥‡</string>
    <string name="home_play">à¤šà¤²à¤¾à¤¯à¥‡</string>
    <string name="home_info">à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€</string>
    <string name="filter_bookmarks">à¤¬à¥à¤•à¤®à¤¾à¤°à¥à¤• à¤›à¤¾à¤‚à¤Ÿà¥‡</string>
    <string name="error_bookmarks_text">à¤¬à¥à¤•à¤®à¤¾à¤°à¥à¤•à¥à¤¸</string>
    <string name="action_remove_from_bookmarks">à¤¹à¤Ÿà¤¾à¤à¤</string>
    <string name="sort_apply">à¤²à¤¾à¤—à¥‚ à¤•à¤°à¥‡</string>
    <string name="sort_cancel">à¤°à¤¦à¥à¤¦ à¤•à¤°à¥‡</string>
    <string name="player_speed">à¤ªà¥à¤²à¥‡à¤¯à¤° à¤•à¥€ à¤°à¤«à¥à¤¤à¤¾à¤°</string>

    <string name="search_provider_text_providers">à¤¸à¥‚à¤¤à¥à¤°à¥‹à¤‚ à¤¸à¥‡ à¤›à¤¾à¤‚à¤Ÿà¥‡</string>
    <string name="search_provider_text_types">à¤ªà¥à¤°à¤•à¤¾à¤° à¤¸à¥‡ à¤›à¤¾à¤‚à¤Ÿà¥‡</string>

    <string name="benene_count_text">%d à¤•à¥‡à¤²à¥‡ à¤¦à¤¿à¤ à¤—à¤</string>
    <string name="benene_count_text_none">à¤•à¥‹à¤ˆ à¤•à¥‡à¤²à¥‡ à¤¨à¤¹à¥€ à¤¦à¤¿à¤ à¤—à¤</string>

    <string name="subs_hold_to_reset_to_default">à¤°à¤¿à¤¸à¥‡à¤Ÿ à¤•à¤°à¤¨à¥‡ à¤²à¥‡ à¤•à¤¿à¤¯à¥‡ à¤¦à¤¬à¤¾à¤¯à¥‡ à¤°à¤–à¥‡</string>
    <string name="continue_watching">à¤¦à¥‡à¤–à¤¨à¤¾ à¤œà¤¾à¤°à¥€ à¤°à¤–à¥‡à¤‚</string>

    <string name="action_remove_watching">à¤¹à¤Ÿà¤¾à¤à¤</string>
    <string name="action_open_watching">à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€</string>

    <string name="vpn_might_be_needed">à¤‡à¤¸ à¤¸à¥‚à¤¤à¥à¤° à¤•à¥‹ à¤‡à¤¸à¥à¤¤à¥‡à¤®à¤¾à¤² à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤à¤• VPN à¤•à¥€ à¥›à¤°à¥‚à¤°à¤¤ à¤ªà¥œ à¤¸à¤•à¤¤à¥€ à¤¹à¥ˆ</string>
    <string name="vpn_torrent">à¤¯à¤¹ à¤¸à¥‚à¤¤à¥à¤° à¤à¤• torrent à¤¹à¥ˆ, à¤à¤• VPN à¤‡à¤¸à¥à¤¤à¥‡à¤®à¤¾à¤² à¤•à¤°à¤¨à¥‡ à¤•à¥€ à¤¸à¤¿à¤«à¤¾à¤°à¤¿à¤¶ à¤•à¥€ à¤œà¤¾à¤¤à¥€ à¤¹à¥ˆ</string>
    <string name="torrent_plot">à¤µà¤°à¥à¤£à¤¨</string>
    <string name="normal_no_plot">à¤•à¥‹à¤ˆ à¤µà¤¿à¤·à¤¯ à¤¨à¤¹à¥€ à¤®à¤¿à¤²à¤¾</string>
    <string name="torrent_no_plot">à¤•à¥‹à¤ˆ à¤µà¤°à¥à¤£à¤¨ à¤¨à¤¹à¥€ à¤®à¤¿à¤²à¤¾</string>

    <string name="picture_in_picture_des">à¤†à¤ªà¤•à¥€ à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤à¤• à¤›à¥‹à¤Ÿà¥‡ à¤¸à¥‡ à¤¡à¤¬à¥à¤¬à¥‡ à¤®à¥‡à¤‚ à¤šà¤²à¤¾à¤¤à¤¾ à¤¹à¥ˆ</string>
    <string name="player_size_settings_des">à¤•à¤¾à¤²à¥‡ à¤¬à¥‰à¤°à¥à¤¡à¤° à¤•à¥‹ à¤¹à¤Ÿà¤¾à¤¤à¤¾ à¤¹à¥ˆ</string>
    <string name="player_subtitles_settings_des">à¤ªà¥à¤²à¥‡à¤¯à¤° à¤•à¥€ subtitle à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸</string>
    <string name="eigengraumode_settings_des">à¤ªà¥à¤²à¥‡à¤¯à¤° à¤®à¥‡à¤‚ à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤•à¥€ à¤°à¤«à¥à¤¤à¤¾à¤° à¤§à¤¿à¤®à¥€ à¤¯à¤¾ à¤¤à¥‡à¥› à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ</string>
    <string name="swipe_to_seek_settings_des">à¤¦à¤¾à¤à¤‚ à¤¯à¤¾ à¤¬à¤¾à¤à¤‚ à¤¤à¤°à¤« à¤¸à¥à¤µà¤¾à¤‡à¤ª à¤•à¤°à¤¨à¥‡ à¤¸à¥‡ à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤•à¥‹ à¤†à¤—à¥‡ à¤ªà¥€à¤›à¥‡ à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ</string>
    <string name="swipe_to_change_settings_des">à¤¦à¤¾à¤à¤‚ à¤¤à¤°à¤« à¤¯à¤¾ à¤¬à¤¾à¤à¤‚ à¤¤à¤°à¤« à¤¸à¥à¤µà¤¾à¤‡à¤ª à¤•à¤°à¤¨à¥‡ à¤¸à¥‡ à¤°à¥‹à¤¶à¤¿à¤¨à¥€ à¤”à¤° à¤†à¤µà¤¾à¥› à¤•à¥‹ à¤Šà¤ªà¤° à¤¨à¥€à¤šà¥‡ à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ</string>
    <string name="double_tap_to_seek_settings_des">à¤¦à¥‹ à¤¬à¤¾à¤° à¤¦à¤¾à¤à¤‚ à¤¯à¤¾ à¤¬à¤¾à¤à¤‚ à¤¤à¤°à¤« à¤¦à¤¬à¤¾à¤¨à¥‡ à¤¸à¥‡ à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤•à¥‹ à¤†à¤—à¥‡ à¤¯à¤¾ à¤ªà¥€à¤›à¥‡ à¤•à¤°à¤¾ à¤œà¤¾ à¤¸à¤•à¤¤à¤¾ à¤¹à¥ˆ
    </string>
    <string name="search">à¤–à¥‹à¤œà¥‡à¤‚</string>
    <string name="settings_info">à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€</string>
    <string name="advanced_search_des">à¤¨à¤¤à¥€à¤œà¥‹à¤‚ à¤•à¥‹ à¤¸à¥‚à¤¤à¥à¤°à¥‹à¤‚ à¤•à¥‡ à¤¹à¤¿à¤¸à¤¾à¤¬ à¤¸à¥‡ à¤¬à¤¾à¤‚à¤Ÿà¤•à¤° à¤¦à¤¿à¤–à¤¤à¤¾ à¤¹à¥ˆ</string>
    <string name="bug_report_settings_off">à¤¸à¤¿à¤°à¥à¤« à¤¦à¥à¤°à¥à¤˜à¤Ÿà¤¨à¤¾ à¤¹à¥‹à¤¨à¥‡ à¤ªà¥‡ à¤†à¤ªà¤•à¥€ à¤•à¥à¤› à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤­à¥‡à¤œà¥€ à¤œà¤¾à¤à¤—à¥€</string>
    <string name="bug_report_settings_on">à¤†à¤ªà¤•à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤¨à¤¹à¥€ à¤­à¥‡à¤œà¥€ à¤œà¤¾à¤à¤—à¥€</string>
    <string name="updates_settings_des">à¤¹à¤° à¤¬à¤¾à¤° à¤–à¥à¤²à¤¨à¥‡ à¤ªà¥‡ à¤¨à¤ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¥‡ à¤²à¤¿à¤ à¤œà¤¾à¤‚à¤š à¤•à¤°à¥‡à¤—à¤¾</string>
    <string name="uprereleases_settings_des">à¤ªà¥‚à¤°à¥€ à¤°à¤¿à¤²à¥€à¤¸ à¤•à¥‡ à¤¬à¤œà¤¾à¤ à¤ªà¥‚à¤°à¥à¤µ à¤°à¤¿à¤²à¥€à¤¸ à¤•à¥€ à¤œà¤¾à¤‚à¤š à¤•à¤°à¥‡à¤—à¤¾</string>
    <string name="lightnovel">à¤¹à¤®à¤¾à¤°à¤¾ à¤à¤• Light novel app</string>
    <string name="anim">à¤¹à¤®à¤¾à¤°à¤¾ à¤à¤• Anime app</string>
    <string name="discord">Discord à¤¸à¥‡ à¤œà¥à¥œà¤¿à¤¯à¥‡</string>
    <string name="benene">à¤‡à¤¸ à¤ªà¥à¤°à¥‹à¤—à¥à¤°à¤¾à¤® à¤•à¥‡ à¤¨à¤¿à¤°à¥à¤®à¤¾à¤¤à¤¾ à¤•à¥‹ à¤•à¥‡à¤²à¤¾ à¤šà¥à¤¾à¤¯à¥‡</string>
    <string name="benene_des">à¤•à¥‡à¤²à¥‡ à¤¦à¥‡ à¤¦à¤¿à¤ à¤—à¤</string>

    <string name="app_language">à¤à¤ªà¥à¤ª à¤•à¥€ à¤­à¤¾à¤·à¤¾</string>

    <string name="no_chromecast_support_toast">à¤¯à¤¹ à¤¸à¥‚à¤¤à¥à¤° à¤•à¥à¤°à¥‹à¤®à¤•à¤¾à¤¸à¥à¤Ÿ à¤•à¤¾ à¤¸à¤®à¤°à¥à¤¥à¤¨ à¤¨à¤¹à¥€ à¤•à¤°à¤¤à¤¾</string>
    <string name="no_links_found_toast">à¤•à¥‹à¤ˆ à¤²à¤¿à¤‚à¤• à¤¨à¤¹à¥€ à¤®à¤¿à¤²à¥‡</string>
    <string name="copy_link_toast">à¤²à¤¿à¤‚à¤• à¤•à¥‹ à¤•à¥à¤²à¤¿à¤ªà¤¬à¥‹à¤°à¥à¤¡ à¤ªà¥‡ à¤•à¥‰à¤ªà¥€ à¤•à¤°à¤¦à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾</string>
    <string name="play_episode_toast">à¤šà¤²à¤¾à¤¯à¥‡</string>
    <string name="acra_report_toast">à¤…à¤¸à¥à¤µà¤¿à¤§à¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤–à¥‡à¤¦ à¤¹à¥ˆ, à¤¯à¤¹ à¤à¤ªà¥à¤ª à¤•à¥à¤°à¥ˆà¤¶ à¤¹à¥‹ à¤—à¤¯à¤¾ à¤¹à¥ˆ à¥¤ à¤à¤• à¤—à¥à¤®à¤¨à¤¾à¤® à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤¨à¤¿à¤°à¥à¤®à¤¾à¤¤à¤¾à¤“à¤‚ à¤•à¥‹ à¤­à¥‡à¤œ à¤¦à¥€ à¤—à¤¯à¥€ à¤¹à¥ˆ à¥¤
    </string>


    <string name="delete_file">à¥žà¤¾à¤‡à¤² à¤¡à¤¿à¤²à¥€à¤Ÿ à¤•à¤°à¥‡à¤‚</string>
    <string name="delete">à¤¡à¤¿à¤²à¥€à¤Ÿ</string>
    <string name="pause">à¤°à¥‹à¤•à¥‡</string>
    <string name="resume">à¤µà¤¾à¤ªà¤¿à¤¸ à¤šà¤²à¤¾à¤¯à¥‡</string>
    <string name="delete_message">à¤à¤œ à¤‡à¤¸ à¤šà¥€à¥› à¤•à¥‹ à¤¹à¤®à¥‡à¤¶à¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤¨à¤·à¥à¤Ÿ à¤•à¤° à¤¦à¥‡à¤—à¤¾ %s\nà¤•à¥à¤¯à¤¾ à¤†à¤ªà¤•à¤¾ à¤¨à¤¿à¤°à¥à¤£à¤¯ à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤¹à¥ˆ ?</string>

    <string name="status_ongoing">à¤…à¤­à¥€ à¤šà¤¾à¤²à¥‚ à¤¹à¥ˆ</string>
    <string name="status_completed">à¤–à¤¤à¥à¤® à¤¹à¥‹ à¤—à¤¯à¤¾ à¤¹à¥ˆ</string>
    <string name="status">à¤¸à¥à¤¤à¤¿à¤¥à¤¿</string>
    <string name="year">à¤¸à¤¾à¤²</string>
    <string name="rating">à¤°à¥‡à¤Ÿà¤¿à¤‚à¤—</string>
    <string name="duration">à¤…à¤µà¤§à¤¿</string>
    <string name="site">à¤¸à¥‚à¤¤à¥à¤°</string>
    <string name="synopsis">Synopsis</string>

    <string name="free_storage">à¤–à¤¾à¤²à¥€</string>
    <string name="used_storage">à¤‡à¤¸à¥à¤¤à¥‡à¤®à¤¾à¤² à¤®à¥‡à¤‚</string>
    <string name="app_storage">à¤à¤ªà¥à¤ª</string>

    <string name="movies">à¤®à¥‚à¤µà¥€</string>
    <string name="tv_series">à¤Ÿà¥€à¤µà¥€ à¤¸à¥€à¤°à¤¿à¤¯à¤²</string>
    <string name="cartoons">à¤•à¤¾à¤°à¥à¤Ÿà¥‚à¤¨</string>
    <string name="anime">à¤…à¤¨à¤¿à¤®à¥‡</string>
    <string name="torrent">à¤Ÿà¥‹à¤°à¥‡à¤‚à¤Ÿ</string>

    <string name="episode_action_chromecast_episode">à¤•à¥à¤°à¥‹à¤®à¤•à¤¾à¤¸à¥à¤Ÿ à¤à¤ªà¤¿à¤¸à¥‹à¤¡</string>
    <string name="episode_action_chromecast_mirror">à¤•à¤•à¥à¤°à¥‹à¤®à¤•à¤¾à¤¸à¥à¤Ÿ à¤®à¤¿à¤°à¤°</string>
    <string name="episode_action_play_in_app">à¤à¤ªà¥à¤ª à¤®à¥ˆà¤‚ à¤šà¤²à¤¾à¤¯à¥‡</string>
    <string name="episode_action_play_in_vlc">VLC à¤®à¥‡à¤‚ à¤šà¤²à¤¾à¤</string>
    <string name="episode_action_play_in_browser">Browser à¤®à¥‡à¤‚ à¤šà¤²à¤¾à¤</string>
    <string name="episode_action_copy_link">à¤²à¤¿à¤‚à¤• à¤•à¥‰à¤ªà¥€ à¤•à¤°à¥‡à¤‚</string>
    <string name="episode_action_auto_download">à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤•à¤°à¥‡</string>
    <string name="episode_action_download_mirror">à¤®à¤¿à¤°à¤° à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡</string>
    <string name="episode_action_reload_links">à¤²à¤¿à¤‚à¤• à¤«à¤¿à¤°à¤¸à¥‡ à¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚</string>

    <string name="no_update_found">à¤•à¥‹à¤ˆ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤¨à¤¹à¥€ à¤®à¤¿à¤²à¤¾</string>
    <string name="check_for_update">à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¥‡ à¤²à¤¿à¤ à¤–à¥‹à¤œà¥‡</string>

    <string name="video_lock">à¤¤à¤¾à¤²à¤¾</string>
    <string name="video_aspect_ratio_resize">à¤†à¤•à¤¾à¤°</string>
    <string name="video_source">à¤¸à¥‚à¤¤à¥à¤°</string>
    <string name="video_skip_op">OP à¤Ÿà¤¾à¤²à¥‡à¤‚</string>

    <string name="dont_show_again">à¤«à¤¿à¤°à¤¸à¥‡ à¤¨à¤¾ à¤¦à¤¿à¤–à¤¾à¤</string>
    <string name="update">à¤…à¤ªà¤¡à¥‡à¤Ÿ</string>
    <string name="watch_quality_pref">à¤ªà¤¸à¤‚à¤¦à¥€à¤¦à¤¾ à¤¦à¥‡à¤–à¤¨à¥‡ à¤•à¥€ à¤•à¥à¤µà¤¾à¤²à¤¿à¤Ÿà¥€</string>
    <string name="dns_pref_summary">ISP à¤¬à¥à¤²à¥‰à¤• à¤¸à¥‡ à¤›à¥à¤Ÿà¤•à¤¾à¤°à¤¾ à¤ªà¤¾à¤à¤‚</string>
    <string name="provider_lang_settings">à¤¸à¥‚à¤¤à¥à¤° à¤•à¥€ à¤­à¤¾à¤·à¤¾à¤à¤‚</string>
    <string name="app_layout">à¤à¤ª à¤•à¤¾ à¤²à¥‡à¤†à¤‰à¤Ÿ</string>
    <string name="preferred_media_settings">à¤ªà¤¸à¤‚à¤¦à¥€à¤¦à¤¾ à¤®à¥€à¤¡à¤¿à¤¯à¤¾ </string>
    
    <string name="download_path_pref"> à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤•à¤¾ à¤®à¤¾à¤°à¥à¤—</string>
    <string name="display_subbed_dubbed_settings">Dubbed à¤¯à¤¾ Subbed Anime à¤¦à¤¿à¤–à¤¾à¤¯à¥‡</string>
    
    <string name="tv_layout">à¤Ÿà¥€à¤µà¥€ à¤²à¥‡à¤†à¤‰à¤Ÿ</string>
    <string name="phone_layout">à¤«à¤¼à¥‹à¤¨ à¤²à¥‡à¤†à¤‰à¤Ÿ</string>

    <string name="primary_color_settings">à¤®à¥à¤–à¥à¤¯ à¤°à¤‚à¤—</string>
    <string name="app_theme_settings">à¤à¤ª à¤•à¤¾ à¤°à¤‚à¤—</string>
</resources>



================================================
FILE: app/src/main/res/values-id/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>

    <!-- FORMAT MIGHT TRANSLATE, WILL CAUSE CRASH IF APPLIED WRONG -->
    <string name="extra_info_format" translatable="false" formatted="true">%d %s | %sMB</string>
    <string name="storage_size_format" translatable="false" formatted="true">%s â€¢ %sGB</string>
    <string name="download_size_format" translatable="false" formatted="true">%sMB / %sMB</string>
    <string name="mb_format" translatable="false" formatted="true">%dMB</string>
    <string name="episode_name_format" translatable="false" formatted="true">%s %s</string>
    <string name="ffw_text_format" translatable="false" formatted="true">+%d</string>
    <string name="rew_text_format" translatable="false" formatted="true">-%d</string>
    <string name="ffw_text_regular_format" translatable="false" formatted="true">%d</string>
    <string name="rew_text_regular_format" translatable="false" formatted="true">%d</string>
    <string name="rating_format" translatable="false" formatted="true">%.1f/10.0</string>
    <string name="year_format" translatable="false" formatted="true">%d</string>
    <string name="app_dub_sub_episode_text_format" formatted="true">%s Ep %d</string>
    <string name="cast_format" formatted="true">Pemeran: %s</string>

    <!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">Poster</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">Episode Poster</string>
    <string name="home_main_poster_img_des">Main Poster</string>
    <string name="home_next_random_img_des">Next Random</string>
    <string name="episode_play_img_des" translatable="false">@string/play_episode</string>
    <string name="go_back_img_des">Go back</string>
    <string name="change_providers_img_des" translatable="false">@string/home_change_provider_img_des</string>
    <string name="home_change_provider_img_des">Change Provider</string>
    <string name="preview_background_img_des">Preview Background</string>

    <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">Kecepatan (%.2fx)</string>
    <string name="rated_format" formatted="true">Dinilai: %.1f</string>
    <string name="new_update_format" formatted="true">Update baru ditemukan!\n%s -> %s</string>
    <string name="filler" formatted="true">Filler</string>
    <string name="duration_format" formatted="true">%d mnt</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">Beranda</string>
    <string name="title_search">Cari</string>
    <string name="title_downloads">Download</string>
    <string name="title_settings">Pengaturan</string>

    <string name="search_hint">Cariâ€¦</string>
    <string name="search_hint_site" formatted="true">Cari %sâ€¦</string>

    <string name="no_data">Tidak Ada Data</string>
    <string name="episode_more_options_des">Opsi Lanjutan</string>
    <string name="next_episode">Episode selanjutnya</string>
    <string name="result_plot" translatable="false">@string/synopsis</string>
    <string name="result_tags">Genre</string>
    <string name="result_share">Bagikan</string>
    <string name="result_open_in_browser">Buka Di Browser</string>
    <string name="skip_loading">Skip Loading</string>
    <string name="loading_chromecast">Loadingâ€¦</string>

    <string name="type_watching">Sedang Menonton</string>
    <string name="type_on_hold">Tertahan</string>
    <string name="type_completed">Selesai</string>
    <string name="type_dropped">Dihentikan</string>
    <string name="type_plan_to_watch">Rencana untuk Menonton</string>
    <string name="type_none">Tidak Ada</string>
    <string name="type_re_watching">Menonton Ulang</string>

    <string name="play_movie_button">Putar Movie</string>
    <string name="play_torrent_button">Streaming Torrent</string>
    <string name="pick_source">Sumber</string>
    <string name="pick_subtitle">Subtitle</string>
    <string name="reload_error">Coba ulang koneksiâ€¦</string>
    <string name="go_back">Kembali</string>
    <string name="play_episode">Putar Episode</string>
    <!--<string name="need_storage">Allow to download episodes</string>-->

    <string name="download">Download</string>
    <string name="downloaded">Terdownload</string>
    <string name="downloading">Sedang Didownload</string>
    <string name="download_paused">Download Dijeda</string>
    <string name="download_started">Download Dimulai</string>
    <string name="download_failed">Download Gagal</string>
    <string name="download_canceled">Download Dibatalkan</string>
    <string name="download_done">Download Selesai</string>
    <string name="download_format" translatable="false">%s - %s</string>

    <string name="error_loading_links_toast">Error Memuat Tautan</string>
    <string name="download_storage_text">Penyimpanan Internal</string>

    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>

    <string name="popup_delete_file">Hapus File</string>
    <string name="popup_play_file">Putar File</string>
    <string name="popup_resume_download">Lanjutkan Download</string>
    <string name="popup_pause_download">Jeda Download</string>

    <string name="pref_disable_acra">Matikan pelaporan bug otomatis</string>
    <string name="home_more_info">Lebih banyak info</string>
    <string name="home_expanded_hide">Sembunyikan</string>
    <string name="home_play">Putar</string>
    <string name="home_info">Info</string>
    <string name="filter_bookmarks">Filter Bookmark</string>
    <string name="error_bookmarks_text">Bookmark</string>
    <string name="action_remove_from_bookmarks">Hapus</string>
    <string name="action_add_to_bookmarks">Atur status tontonan</string>
    <string name="sort_apply">Terapkan</string>
    <string name="sort_cancel">Batalkan</string>
    <string name="sort_copy">Salin</string>
    <string name="sort_close">Tutup</string>
    <string name="sort_clear">Bersihkan</string>
    <string name="sort_save">Simpan</string>

    <string name="player_speed">Kecepatan Pemutar</string>

    <string name="subtitles_settings">Pengaturan Subtitle</string>
    <string name="subs_text_color">Warna Teks</string>
    <string name="subs_outline_color">Warna Garis Luar</string>
    <string name="subs_background_color">Warna Latar Belakang</string>
    <string name="subs_window_color">Warna Window</string>
    <string name="subs_edge_type">Jenis Tepi</string>
    <string name="subs_subtitle_elevation">Ketinggian Subtitle</string>
    <string name="subs_font">Font</string>
    <string name="subs_font_size">Ukuran Font</string>

    <string name="search_provider_text_providers">Cari menggunakan provider</string>
    <string name="search_provider_text_types">Cari menggunakan jenis</string>

    <string name="benene_count_text">%d Piseng yang diberikan kepada developer</string>
    <string name="benene_count_text_none">Tidak ada piseng yang diberikan</string>

    <string name="subs_auto_select_language">Pilih Bahasa Otomatis</string>
    <string name="subs_download_languages">Download Bahasa</string>
    <string name="subs_hold_to_reset_to_default">Tahan untuk mengatur ulang ke default</string>
    <string name="subs_import_text" formatted="true">Impor font dengan meletakkan mereka di %s</string>
    <string name="continue_watching">Lanjutkan Menonton</string>

    <string name="action_remove_watching">Hapus</string>
    <string name="action_open_watching">Info lebih lanjut</string>
    <string name="action_open_play">@string/home_play </string>

    <string name="vpn_might_be_needed">Sebuah VPN mungkin diperlukan agar provider ini bisa bekerja dengan benar</string>
    <string name="vpn_torrent">Provider ini adalah sebuah torrent, VPN direkomendasikan</string>

    <string name="provider_info_meta">Metadata tidak disediakan oleh situs, loading video akan gagal jika tidak ada di situs.</string>

    <string name="torrent_plot">Deskripsi</string>
    <string name="normal_no_plot">Tidak Ada Plot Yang Ditemukan</string>
    <string name="torrent_no_plot">Tidak Ada Deskripsi Yang Ditemukan</string>

    <string name="show_log_cat">Tampilkan logcat ðŸˆ</string>

    <string name="picture_in_picture">Picture-in-picture</string>
    <string name="picture_in_picture_des">Melanjutkan pemutaran di pemutar mini di atas aplikasi lain</string>
    <string name="player_size_settings">Tombol mengubah ukuran pemutar</string>
    <string name="player_size_settings_des">Menghapus batasan hitam</string>
    <string name="player_subtitles_settings">Subtitle</string>
    <string name="player_subtitles_settings_des">Pengaturan subtitle pemutar</string>
    <string name="chromecast_subtitles_settings">Subtitle Chromecast</string>
    <string name="chromecast_subtitles_settings_des">Pengaturan subtitle Chromecast</string>

    <string name="eigengraumode_settings">Mode Eigengravy</string>
    <string name="eigengraumode_settings_des">Menambahkan opsi kecepatan di pemutar</string>
    <string name="swipe_to_seek_settings">Geser untuk mengubah waktu</string>
    <string name="swipe_to_seek_settings_des">Geser ke kiri atau kanan untuk mengontrol waktu di pemutar video</string>
    <string name="swipe_to_change_settings">Geser untuk mengubah pengaturan</string>
    <string name="swipe_to_change_settings_des">Geser ke sisi kiri atau kanan untuk mengubah pencerahan atau volume</string>
    <string name="double_tap_to_seek_settings">Tekan dua kali untuk mengubah waktu</string>
    <string name="double_tap_to_pause_settings">Tekan dua kali untuk menjeda</string>
    <string name="double_tap_to_seek_amount_settings">Jumlah pengubah waktu pemutar</string>
    <string name="double_tap_to_seek_settings_des">Tekan dua kali di sisi kanan atau kiri untuk mengubah waktu ke depan atau ke belakang
    </string>
    <string name="double_tap_to_pause_settings_des">Tekan di tengah untuk menjeda</string>
    <string name="use_system_brightness_settings">Gunakan pencerahan sistem</string>
    <string name="use_system_brightness_settings_des">Gunakan pencerahan sistem di pemutar aplikasi dari pada hamparan gelap
    </string>

    <string name="episode_sync_settings">Update progres tontonan</string>
    <string name="episode_sync_settings_des">Sinkronisasikan progres episode saat ini secara otomatis</string>

    <string name="restore_settings">Pulihkan data dari cadangan</string>
    <string name="killswitch_settings">Download metadata terbaru dari github</string>
    <string name="killswitch_settings_des">Jika anda ingin askes dari seluruh provider (bahkan yang sudah rusak) matikan ini</string>

    <string name="backup_settings">Cadangkan data</string>
    <string name="restore_success">File cadangan termuat</string>
    <string name="restore_failed_format" formatted="true">Gagal untuk memulihkan data dari file %s</string>
    <string name="backup_success">Data berhasil disimpan</string>
    <string name="backup_failed">Izin penyimpanan tidak ditemukan, mohon coba lagi</string>
    <string name="backup_failed_error_format">Error saat mencadang %s</string>

    <string name="search">Cari</string>
    <string name="category_nginx">Nginx</string>
    <string name="category_credits">Kredit dan akun</string>
    <string name="category_updates">Update dan cadangan</string>
    <string name="nginx_credentials_title">Kredensial Nginx</string> 
    <string name="nginx_credentials_summary">Kamu harus menggunakan format berikut namaku:passwordku123</string>
    <string name="nginx_info_title">Apa itu Nginx ?</string>
    <string name="nginx_info_summary">Nginx adalah sebuah software yang dapat digunakan untuk menampilkan file dari server yang anda miliki. Klik untuk melihat panduan pengaturan Nginx</string>

    <string name="settings_info">Info</string>
    <string name="advanced_search">Pencarian Lanjutan</string>
    <string name="advanced_search_des">Memberikan hasil pencarian yang dipisahkan berdasarkan provider</string>
    <string name="bug_report_settings_off">Hanya mengirim data saat ngecrash</string>
    <string name="bug_report_settings_on">Tidak mengirim data</string>
    <string name="show_fillers_settings">Tampilkan episode filler untuk anime</string>
    <string name="updates_settings">Tampilkan update aplikasi</string>
    <string name="updates_settings_des">Secara otomatis mencari update terbaru saat aplikasi dibuka</string>
    <string name="uprereleases_settings">Update ke prarilis</string>
    <string name="uprereleases_settings_des">Hanya mencari update prarilis daripada rilis penuh</string>
    <string name="github">Github</string>
    <string name="lightnovel">Aplikasi novel ringan dari developer yang sama</string>
    <string name="anim">Aplikasi anime dari developer yang sama</string>
    <string name="discord">Bergabung dengan Discord</string>
    <string name="benene">Berikan sebuah piseng kepada developer</string>
    <string name="benene_des">Piseng yang diberikan</string>

    <string name="app_language">Bahasa Aplikasi</string>

    <string name="no_chromecast_support_toast">Provider ini tidak memiliki dukungan Chromecast</string>
    <string name="no_links_found_toast">Tidak Ada Tautan Yang Ditemukan</string>
    <string name="copy_link_toast">Tautan disalin ke papan klip</string>
    <string name="play_episode_toast">Putar Episode</string>
    <string name="subs_default_reset_toast">Ulang ke pengaturan default</string>
    <string name="acra_report_toast">Maaf, aplikasi ngecrash. Laporan bug anonim akan dikirim ke developer
    </string>

    <string name="season">Season</string>
    <string name="no_season">Tidak Ada Season</string>
    <string name="episode">Episode</string>
    <string name="episodes">Episode</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>
    <string name="no_episodes_found">Episode Tidak Ditemukan</string>

    <string name="delete_file">Hapus File</string>
    <string name="delete">Hapus</string>
    <string name="cancel" translatable="false">@string/sort_cancel</string>
    <string name="pause">Jeda</string>
    <string name="resume">Lanjutkan</string>
    <string name="go_back_30">-30</string>
    <string name="go_forward_30">+30</string>
    <string name="delete_message" formatted="true">Ini akan secara permanen menghapus %s\nApakah anda yakin?</string>
    <string name="resume_time_left" formatted="true">%dm\ntersisa</string>


    <string name="status_ongoing">Masih Berlanjut</string>
    <string name="status_completed">Tamat</string>
    <string name="status">Status</string>
    <string name="year">Tahun</string>
    <string name="rating">Skor</string>
    <string name="duration">Durasi</string>
    <string name="site">Situs</string>
    <string name="synopsis">Sinopsis</string>

    <string name="queued">antri</string>
    <string name="no_subtitles">Tidak Ada Subtitle</string>
    <string name="default_subtitles">Default</string>

    <string name="free_storage">Bebas</string>
    <string name="used_storage">Terpakai</string>
    <string name="app_storage">Aplikasi</string>

    <!--plural-->
    <string name="movies">Movie</string>
    <string name="tv_series">Seri TV</string>
    <string name="cartoons">Kartun</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrent</string>
    <string name="documentaries">Film Dokumenter</string>
    <string name="ova">OVA</string>
    <string name="asian_drama">Drama Asia</string>

    <!--singular-->
    <string name="movies_singular">Movie</string>
    <string name="tv_series_singular">Seri</string>
    <string name="cartoons_singular">Kartun</string>
    <string name="anime_singular">@string/anime</string>
    <string name="ova_singular">@string/ova</string>
    <string name="torrent_singular">Torrent</string>
    <string name="documentaries_singular">Film Dokumenter</string>
    <string name="asian_drama_singular">Drama Asia</string>

    <string name="source_error">Error sumber</string>
    <string name="remote_error">Error jarak jauh</string>
    <string name="render_error">Error perender</string>
    <string name="unexpected_error">Error pemutar yang tidak terduga</string>
    <string name="storage_error">Error mendownload, cek izin penyimpanan</string>

    <string name="episode_action_chromecast_episode">Episode Chromecast</string>
    <string name="episode_action_chromecast_mirror">Mirror Chromecast</string>
    <string name="episode_action_play_in_app">Putar di aplikasi</string>
    <string name="episode_action_play_in_vlc">Putar di VLC</string>
    <string name="episode_action_play_in_browser">Putar di browser</string>
    <string name="episode_action_copy_link">Salin tautan</string>
    <string name="episode_action_auto_download">Download otomatis</string>
    <string name="episode_action_download_mirror">Download mirror</string>
    <string name="episode_action_reload_links">Muat ulang tautan</string>
    <string name="episode_action_download_subtitle">Download subtitle</string>

    <string name="show_hd">Label kualitas</string>
    <string name="show_dub">Label dub</string>
    <string name="show_sub">Label sub</string>
    <string name="show_title">Judul</string>
    <string name="show_hd_key" translatable="false">show_hd_key</string>
    <string name="show_dub_key" translatable="false">show_dub_key</string>
    <string name="show_sub_key" translatable="false">show_sub_key</string>
    <string name="show_title_key" translatable="false">show_title_key</string>
    <string name="poster_ui_settings">Aktifkan atau nonaktifkan elemen UI pada poster</string>

    <string name="no_update_found">Tidak Ada Update Yang Ditemukan</string>
    <string name="check_for_update">Cek Untuk Update</string>

    <string name="video_lock">Kunci</string>
    <string name="video_aspect_ratio_resize">Ubah Ukuran</string>
    <string name="video_source">Sumber</string>
    <string name="video_skip_op">Skip OP</string>

    <string name="dont_show_again">Jangan tunjukkan lagi</string>
    <string name="skip_update">Skip Update ini</string>
    <string name="update">Update</string>
    <string name="watch_quality_pref">Kualitas tontonan yang lebih diinginkan</string>
    <string name="limit_title">Karakter maksimal judul pemutar video</string>
    <string name="limit_title_rez">Resolusi pemutar video</string>

    <string name="video_buffer_size_settings">Ukuran buffer video</string>
    <string name="video_buffer_length_settings">Panjang buffer video</string>
    <string name="video_buffer_disk_settings">Cache video di disk</string>
    <string name="video_buffer_clear_settings">Membersihkan cache video dan gambar</string>

    <string name="video_ram_description">Akan menyebabkan crash acak jika disetel terlalu tinggi. Jangan diubah jika anda memiliki jumlah ram yang rendah seperti TV Android atau ponsel lama</string>
    <string name="video_disk_description">Dapat menyebabkan masalah pada sistem dengan ruang penyimpanan yang rendah seperti perangkat Android TV jika anda menyetelnya terlalu tinggi</string>

    <string name="dns_pref">DNS melalui HTTPS</string>
    <string name="dns_pref_summary">Berguna untuk melewati blok ISP</string>

    <string name="download_path_pref">Jalur download</string>

    <string name="nginx_url_pref">Url server Nginx</string>

    <string name="display_subbed_dubbed_settings">Tampilkan Anime Dub/Sub</string>

    <string name="resize_fit">Paskan dengan layar</string>
    <string name="resize_fill">Regang</string>
    <string name="resize_zoom">Zoom</string>

    <string name="legal_notice">Peringatan</string>
    <string name="legal_notice_key" translatable="false">legal_notice_key</string>
    <string name="legal_notice_text" translatable="false">Any legal issues regarding the content on this application
        should be taken up with the actual file hosts and providers themselves as we are not affiliated with them.

        In case of copyright infringement, please directly contact the responsible parties or the streaming websites.

        The app is purely for educational and personal use.

        CloudStream 3 does not host any content on the app, and has no control over what media is put up or taken down.
        CloudStream 3 functions like any other search engine, such as Google. CloudStream 3 does not host, upload or
        manage any videos, films or content. It simply crawls, aggregates and displayes links in a convenient,
        user-friendly interface.

        It merely scrapes 3rd-party websites that are publicly accessable via any regular web browser. It is the
        responsibility of user to avoid any actions that might violate the laws governing his/her locality. Use
        CloudStream 3 at your own risk.
    </string>
    <string name="general">Umum</string>
    <string name="random_button_settings">Tombol Acak</string>
    <string name="random_button_settings_desc">Tampilkan tombol acak di Beranda</string>
    <string name="provider_lang_settings">Bahasa provider</string>
    <string name="app_layout">Tata Letak Aplikasi</string>
    <string name="preferred_media_settings">Media yang lebih diinginkan</string>
    <string name="category_preferred_media_and_lang">Media dan bahasa yang lebih diinginkan</string>
    <string name="category_ui">Antarmuka pengguna</string>

    <string name="automatic">Otomatis</string>
    <string name="tv_layout">Tata letak TV</string>
    <string name="phone_layout">Tata letak HP</string>
    <string name="emulator_layout">Tata letak emulator</string>

    <string name="primary_color_settings">Warna primer</string>
    <string name="app_theme_settings">Tema aplikasi</string>
    <string name="bottom_title_settings">Lokasi judul poster</string>
    <string name="bottom_title_settings_des">Meletakkan judul di bawah poster</string>


    <!-- account stuff -->
    <string name="anilist_key" translatable="false">anilist_key</string>
    <string name="mal_key" translatable="false">mal_key</string>
    <!--
    <string name="mal_account_settings" translatable="false">MAL</string>
    <string name="anilist_account_settings" translatable="false">AniList</string>
    <string name="tmdb_account_settings" translatable="false">TMDB</string>
    <string name="imdb_account_settings" translatable="false">IMDB</string>
    <string name="kitsu_account_settings" translatable="false">Kitsu</string>
    <string name="trakt_account_settings" translatable="false">Trakt</string>
    -->
    <string name="login_format" formatted="true">%s %s</string>
    <string name="account">akun</string>
    <string name="logout">Logout</string>
    <string name="login">Login</string>
    <string name="switch_account">Ganti akun</string>
    <string name="add_account">Tambah akun</string>
    <string name="add_sync">Tambah pelacak</string>
    <string name="added_sync_format" formatted="true">Menambah %s</string>
    <string name="upload_sync">Sinkronisasi</string>
    <string name="sync_score">Skor</string>
    <string name="sync_score_format" formatted="true">%d / 10</string>
    <string name="sync_total_episodes_none">/??</string>
    <string name="sync_total_episodes_some" formatted="true">/%d</string>
    <string name="authenticated_user" formatted="true">%s Diautentikasikan</string>
    <string name="authenticated_user_fail" formatted="true">Gagal untuk mengautentikasi ke %s</string>

    <!-- ============ -->
    <string name="none">Tidak Ada</string>
    <string name="normal">Normal</string>
    <string name="all">Semua</string>
    <string name="max">Maks</string>
    <string name="min">Min</string>
    <string name="subtitles_none" translatable="false">@string/none</string>
    <string name="subtitles_outline">Garis luar</string>
    <string name="subtitles_depressed">Depresi</string>
    <string name="subtitles_shadow">Bayangan</string>
    <string name="subtitles_raised">Menonjol</string>
    <string name="subtitle_offset">Sinkronisasi sub</string>
    <string name="subtitle_offset_hint">1000ms</string>
    <string name="subtitle_offset_title">Penundaan subtitle</string>
    <string name="subtitle_offset_extra_hint_later_format">Gunakan ini jika subtitle ditampilkan %dms terlalu cepat</string>
    <string name="subtitle_offset_extra_hint_before_format">Gunakan ini jika subtitle ditampilkan %dms terlalu lambat</string>
    <string name="subtitle_offset_extra_hint_none_format">Tidak ada penundaan subtitle</string>

    <!--
    Example text (pangram) can optionally be translated; if you do, include all the letters in the alphabet,
    see: 
	https://en.wikipedia.org/w/index.php?title=Pangram&oldid=225849300
	https://en.wikipedia.org/wiki/The_quick_brown_fox_jumps_over_the_lazy_dog
    -->
    <string name="subtitles_example_text">The quick brown fox jumps over the lazy dog</string>

    <string name="recommended">Direkomendasikan</string>
    <string name="player_loaded_subtitles" formatted="true">Memuat %s</string>
    <string name="player_load_subtitles">Muat dari file</string>
    <string name="downloaded_file">File terdownload</string>
    <string name="actor_main">Utama</string>
    <string name="actor_supporting">Pendukung</string>
    <string name="actor_background">Latar Belakang</string>

    <string name="home_source">Sumber</string>
    <string name="home_random">Acak</string>

    <string name="coming_soon">Segera hadirâ€¦</string>

    <string name="quality_cam">Cam</string>
    <string name="quality_cam_rip">Cam</string>
    <string name="quality_cam_hd">Cam</string>
    <string name="quality_hq">HQ</string>
    <string name="quality_hd">HD</string>
    <string name="quality_ts">TS</string>
    <string name="quality_tc">TC</string>
    <string name="quality_blueray">BlueRay</string>
    <string name="quality_workprint">WP</string>
    <string name="quality_dvd">DVD</string>
    <string name="quality_4k">4K</string>
    <string name="quality_sd">SD</string>
    <string name="quality_uhd">UHD</string>
    <string name="quality_hdr">HDR</string>
    <string name="quality_sdr">SDR</string>
    <string name="quality_webrip">Web</string>

    <string name="poster_image">Gambar Poster</string>
    <string name="category_player">Pemutar</string>
    <string name="resolution_and_title">Resolusi dan judul</string>
    <string name="title">Judul</string>
    <string name="resolution">Resolusi</string>
</resources>



================================================
FILE: app/src/main/res/values-it/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <!-- FORMAT MIGHT TRANSLATE, WILL CAUSE CRASH IF APPLIED WRONG -->
    <string name="extra_info_format" translatable="false" formatted="true">%d %s | %sMB</string>
    <string name="storage_size_format" translatable="false" formatted="true">%s â€¢ %sGB</string>
    <string name="download_size_format" translatable="false" formatted="true">%sMB / %sMB</string>
    <string name="episode_name_format" translatable="false" formatted="true">%s %s</string>
    <string name="ffw_text_format" translatable="false" formatted="true">+%d</string>
    <string name="rew_text_format" translatable="false" formatted="true">-%d</string>
    <string name="ffw_text_regular_format" translatable="false" formatted="true">%d</string>
    <string name="rew_text_regular_format" translatable="false" formatted="true">%d</string>
    <string name="rating_format" translatable="false" formatted="true">%.1f/10.0</string>
    <string name="year_format" translatable="false" formatted="true">%d</string>
    <string name="app_dub_sub_episode_text_format" formatted="true">%s Ep %d</string>
    <string name="cast_format" formatted="true">Cast: %s</string>

    <!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">Poster</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">Episode Poster</string>
    <string name="home_main_poster_img_des">Main Poster</string>
    <string name="home_next_random_img_des">Next Random</string>
    <string name="go_back_img_des">Go back</string>
    <string name="home_change_provider_img_des">Change Provider</string>
    <string name="preview_background_img_des">Preview Background</string>

    <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">VelocitÃ  (%.2fx)</string>
    <string name="rated_format" formatted="true">Valutato: %.1f</string>
    <string name="new_update_format" formatted="true">Nuovo aggiornamento trovato!\n%s -> %s</string>
    <string name="filler" formatted="true">Filler</string>
    <string name="duration_format" formatted="true">%d min</string>

    <!-- <string name="app_name">CloudStream</string> -->
    <string name="title_home">Home</string>
    <string name="title_search">Cerca</string>
    <string name="title_downloads">Scaricati</string>
    <string name="title_settings">Impostazioni</string>

    <string name="search_hint">Cercaâ€¦</string>
    <string name="no_data">Nessun dato</string>
    <string name="episode_more_options_des">PiÃ¹ impostazioni</string>
    <string name="next_episode">Prossimo episodio</string>
    <string name="result_tags">Genere</string>
    <string name="result_share">Condividi</string>
    <string name="result_open_in_browser">Apri nel browser</string>
    <string name="skip_loading">Salta caricamento</string>
    <string name="loading_chromecast">Caricamentoâ€¦</string>

    <string name="type_watching">Guardando</string>
    <string name="type_on_hold">In attesa</string>
    <string name="type_completed">Completato</string>
    <string name="type_dropped">Abbandonato</string>
    <string name="type_plan_to_watch">Da guardare</string>
    <string name="type_none">Nessuno</string>
    <string name="type_re_watching">Riguardando</string>

    <string name="play_movie_button">Riproduci film</string>
    <string name="play_torrent_button">Stream Torrent</string>
    <string name="pick_source">Fonti</string>
    <string name="pick_subtitle">Sottotitoli</string>
    <string name="reload_error">Riprova connesisoneâ€¦</string>
    <string name="go_back">Indietro</string>
    <string name="play_episode">Riproduci episodio</string>
    <!--<string name="need_storage">Per permettere il download</string>-->

    <string name="download">Scarica</string>
    <string name="downloaded">Scaricato</string>
    <string name="downloading">Scaricando</string>
    <string name="download_paused">Download in pausa</string>
    <string name="download_started">Download iniziato</string>
    <string name="download_failed">Download fallito</string>
    <string name="download_canceled">Download cancellato</string>
    <string name="download_done">Download completato</string>
    <string name="download_format" translatable="false">%s - %s</string>

    <string name="error_loading_links_toast">Errore durante il caricamento dei link</string>
    <string name="download_storage_text">Archiviazione interna</string>

    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>

    <string name="popup_delete_file">Elimina file</string>
    <string name="popup_play_file">Riproduci file</string>
    <string name="popup_resume_download">Riprendi download</string>
    <string name="popup_pause_download">Ferma download</string>

    <string name="pref_disable_acra">Disabilita segnalazione automatica di bug</string>
    <string name="home_more_info">PiÃ¹ info</string>
    <string name="home_expanded_hide">Nascondi</string>
    <string name="home_play">Riproduci</string>
    <string name="home_info">Info</string>
    <string name="filter_bookmarks">Filtra segnalibri</string>
    <string name="error_bookmarks_text">Segnalibri</string>
    <string name="action_remove_from_bookmarks">Rimuovi</string>
    <string name="action_add_to_bookmarks">Imposta stato riproduzione</string>
    <string name="sort_apply">Applica</string>
    <string name="sort_cancel">Cancella</string>
    <string name="sort_copy">Copia</string>
    <string name="sort_close">Chiudi</string>
    <string name="sort_clear">Cancella</string>
    <string name="sort_save">Salva</string>

    <string name="player_speed">VelocitÃ  video</string>

    <string name="subtitles_settings">Impostazioni sottotitoli</string>
    <string name="subs_text_color">Colore testo</string>
    <string name="subs_outline_color">Colore contorno</string>
    <string name="subs_background_color">Colore sfondo</string>
    <string name="subs_window_color">Colore finestra</string>
    <string name="subs_edge_type">Tipo bordo</string>
    <string name="subs_subtitle_elevation">Elevazione sottotitolo</string>
    <string name="subs_font">Carattere</string>
    <string name="subs_font_size">Dimensione</string>

    <string name="search_provider_text_providers">Cerca per provider</string>
    <string name="search_provider_text_types">Cerca per tipo</string>

    <string name="benene_count_text">%d banane date agli sviluppatori</string>
    <string name="benene_count_text_none">Nessuna banana data</string>

    <string name="subs_auto_select_language">Selezione automatica lingua</string>
    <string name="subs_download_languages">Lingue da scaricare</string>
    <string name="subs_hold_to_reset_to_default">Tenere premuto per ripristinare le impostazioni predefinite</string>
    <string name="continue_watching">Continua a guardare</string>

    <string name="action_remove_watching">Rimuovi</string>
    <string name="action_open_watching">PiÃ¹ info</string>
    <string name="action_open_play">@string/home_play</string>

    <string name="vpn_might_be_needed">Potrebbe essere necessaria una VPN per far funzionare correttamente questo provider</string>
    <string name="vpn_torrent">Questo provider Ã¨ un torrent, si raccomanda una VPN</string>

    <string name="provider_info_meta">I metadati non sono forniti dal sito, il caricamento del video fallirÃ  se non esiste sul sito.</string>

    <string name="torrent_plot">Descrizione</string>
    <string name="normal_no_plot">Nessuna trama trovata</string>
    <string name="torrent_no_plot">Nessuna descrizione trovata</string>

    <string name="show_log_cat">Mostra Logcat ðŸˆ</string>

    <string name="picture_in_picture">Picture-in-Picture</string>
    <string name="picture_in_picture_des">Continua la riproduzione in un player in miniatura sopra altre applicazioni</string>
    <string name="player_size_settings">Pulsante di ridimensionamento del video</string>
    <string name="player_size_settings_des">Rimuovi bordi neri</string>
    <string name="player_subtitles_settings">Sottotitoli</string>
    <string name="player_subtitles_settings_des">Impostazioni sottotitoli</string>
    <string name="chromecast_subtitles_settings">Sottotitoli Chromecast</string>
    <string name="chromecast_subtitles_settings_des">Impostazioni sottotitoli Chromecast</string>

    <string name="eigengraumode_settings">ModalitÃ  eigengravy</string>
    <string name="eigengraumode_settings_des">Aggiungi opzione velocitÃ  nel player</string>
    <string name="swipe_to_seek_settings">Scorri per mandare avanti/indietro</string>
    <string name="swipe_to_seek_settings_des">Scorri a sinistra o a destra per controllare il tempo del video</string>
    <string name="swipe_to_change_settings">Scorri per cambiare le impostazioni</string>
    <string name="swipe_to_change_settings_des">Passa il dito sul lato sinistro o destro per cambiare la luminositÃ  o il volume</string>
    <string name="double_tap_to_seek_settings">Doppio tocco per mandare avanti/indietro</string>
    <string name="double_tap_to_pause_settings">Doppio tocco per mettere in pausa</string>
    <string name="double_tap_to_seek_settings_des">Tocca due volte il lato destro o sinistro dello schermo per mandare avanti o indietro il video</string>
    <string name="double_tap_to_pause_settings_des">Tocca due volte il centro dello schermo per mettere in pausa il video</string>
    <string name="use_system_brightness_settings">Utilizzare la luminositÃ  del sistema</string>
    <string name="use_system_brightness_settings_des">Utilizzare la luminositÃ  del sistema al posto di una sovrapposizione scura</string>

    <string name="restore_settings">Ripristinare i dati da backup</string>
    <string name="killswitch_settings">Scarica gli ultimi metadata da GitHub</string>
    <string name="killswitch_settings_des">Disattiva se vuoi l\'accesso a tutti i provider (anche quelli non funzionanti)</string>

    <string name="backup_settings">Backup data</string>
    <string name="restore_success">File di backup caricato</string>
    <string name="restore_failed_format" formatted="true">Impossibile ripristinare i dati dal file %s</string>
    <string name="backup_success">Dati salvati con successo</string>
    <string name="backup_failed">Permessi di archiviazione mancanti, riprova</string>
    <string name="backup_failed_error_format">Errore nel backup %s</string>

    <string name="search">Cerca</string>
    <string name="settings_info">Info</string>
    <string name="advanced_search">Ricerca avanzata</string>
    <string name="advanced_search_des">Dividi i risultati della ricerca per provider</string>
    <string name="bug_report_settings_off">Invia i dati solo in caso di crash</string>
    <string name="bug_report_settings_on">Non inviare alcun dato</string>
    <string name="show_fillers_settings">Mostra episodi filler per anime</string>
    <string name="updates_settings">Mostra gli aggiornamenti dell\'app</string>
    <string name="updates_settings_des">Cerca automaticamente nuovi aggiornamenti all\'avvio</string>
    <string name="uprereleases_settings">Aggiorna alle prerelease</string>
    <string name="uprereleases_settings_des">Cerca per aggiornamenti alle prerelease invice di cercare solo le release complete</string>
    <string name="github">GitHub</string>
    <string name="lightnovel">App di light novel degli stessi sviluppatori</string>
    <string name="anim">App di anime dagli stessi sviluppatori</string>
    <string name="discord">Entra Discord</string>
    <string name="benene">Dai una banana agli sviluppatori</string>
    <string name="benene_des">Dai una banana</string>

    <string name="app_language">Lingua app</string>

    <string name="no_chromecast_support_toast">Questo provider non ha il supporto per Chromecast</string>
    <string name="no_links_found_toast">Nessun link trovato</string>
    <string name="copy_link_toast">Link copiato negli appunti</string>
    <string name="play_episode_toast">Riproduci episodio</string>
    <string name="subs_default_reset_toast">Ripristina il valore predefinito</string>
    <string name="acra_report_toast">Spiacente, l\'applicazione Ã¨ andata in crash. Una segnalazione anonima di bug sarÃ  inviata agli sviluppatori</string>

    <string name="season">Stagione</string>
    <string name="no_season">Nessuna stagione</string>
    <string name="episode">Episodio</string>
    <string name="episodes">Episodi</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>
    <string name="no_episodes_found">Nessun episodio trovato</string>

    <string name="delete_file">Elimina file</string>
    <string name="delete">Elimina</string>
    <string name="cancel" translatable="false">@string/sort_cancel</string>
    <string name="pause">Pausa</string>
    <string name="resume">Riprendi</string>
    <string name="go_back_30">-30</string>
    <string name="go_forward_30">+30</string>
    <string name="delete_message" formatted="true">Stai per eliminare permanentemente %s\nSei sicuro?</string>
    <string name="resume_time_left" formatted="true">%dm\nrimanenti</string>

    <string name="status_ongoing">In corso</string>
    <string name="status_completed">Completato</string>
    <string name="status">Stato</string>
    <string name="year">Anno</string>
    <string name="rating">Valutazione</string>
    <string name="duration">Durata</string>
    <string name="site">Sito</string>
    <string name="synopsis">Sinossi</string>

    <string name="queued">In coda</string>
    <string name="no_subtitles">Nessun sottotiolo</string>
    <string name="default_subtitles">Default</string>

    <string name="free_storage">Libero</string>
    <string name="used_storage">Usato</string>
    <string name="app_storage">App</string>

    <!--plural-->
    <string name="movies">Film</string>
    <string name="tv_series">Serie TV</string>
    <string name="cartoons">Cartone</string>
    <string name="anime">Anime</string>
    <string name="ova">OVA</string>
    <string name="torrent">Torrent</string>
    <string name="documentaries">Documentari</string>
    <string name="asian_drama">Drama Asiatici</string>

    <!--singular-->
    <string name="movies_singular">Film</string>
    <string name="tv_series_singular">Serie TV</string>
    <string name="cartoons_singular">Cartoni</string>
    <string name="anime_singular">Anime</string>
    <string name="ova_singular">OVA</string>
    <string name="torrent_singular">Torrent</string>
    <string name="documentaries_singular">Documentario</string>
    <string name="asian_drama_singular">Drama Asiatico</string>

    <string name="source_error">Source error</string>
    <string name="remote_error">Remote error</string>
    <string name="render_error">Renderer error</string>
    <string name="unexpected_error">Errore inaspettato nel player video</string>
    <string name="storage_error">Errore download, controlla i permessi di archiviazione</string>

    <string name="episode_action_chromecast_episode">Chromecast</string>
    <string name="episode_action_chromecast_mirror">Chromecast mirror</string>
    <string name="episode_action_play_in_app">Riproduci in app</string>
    <string name="episode_action_play_in_vlc">Riproduci in VLC</string>
    <string name="episode_action_play_in_browser">Riproduci nel browser</string>
    <string name="episode_action_copy_link">Copia link</string>
    <string name="episode_action_auto_download">Download</string>
    <string name="episode_action_download_mirror">Download mirror</string>
    <string name="episode_action_reload_links">Aggiorna link</string>
    <string name="episode_action_download_subtitle">Download sottotitoli</string>

    <string name="no_update_found">Nessun aggiornamento trovato</string>
    <string name="check_for_update">Controlla aggiornamenti</string>

    <string name="video_lock">Blocca</string>
    <string name="video_aspect_ratio_resize">Ridimensiona</string>
    <string name="video_source">Sorgente</string>
    <string name="video_skip_op">Salta intro</string>

    <string name="dont_show_again">Non mostrare di nuovo</string>
    <string name="skip_update">Salta questo aggiornamento</string>
    <string name="update">Aggiorna</string>
    <string name="watch_quality_pref">Risoluzione preferita</string>
    <string name="limit_title">Limita i caratteri del titolo nel player</string>
    <string name="video_buffer_size_settings">Dimensione cache video</string>
    <string name="video_buffer_length_settings">Lunghezza buffer video</string>
    <string name="video_buffer_disk_settings">Dimensione cache video su disco</string>
    <string name="video_buffer_clear_settings">Cancella cache immagini e video</string>

    <string name="video_ram_description">Se impostato troppo alto puÃ² causare problemi su sistemi con poca RAM. Come i dispositivi Android TV o vecchi telefoni</string>
    <string name="video_disk_description">Se impostato troppo alto puÃ² causare problemi su sistemi con poca Archiviazione interna. Come i dispositivi Android TV</string>

    <string name="dns_pref">DNS over HTTPS</string>
    <string name="dns_pref_summary">Utile per bypassare i blocchi ISP</string>

    <string name="download_path_pref">Posizione Download</string>

    <string name="display_subbed_dubbed_settings">Mostra anime doppiati/sottotitolati</string>

    <string name="resize_fit">Adatta allo schermo</string>
    <string name="resize_fill">Allunga</string>
    <string name="resize_zoom">Zoom</string>

    <string name="legal_notice">Disclaimer</string>
    <string name="general">Generale</string>
    <string name="provider_lang_settings">Lingua provider</string>
    <string name="app_layout">Layout app</string>
    <string name="preferred_media_settings">Media preferito</string>

    <string name="automatic">Auto</string>
    <string name="tv_layout">Layout TV</string>
    <string name="phone_layout">Layout Telefono</string>

    <string name="primary_color_settings">Colore primario</string>
    <string name="app_theme_settings">Tema</string>

    <!-- account stuff -->
    <string name="login_format" formatted="true">%s %s</string>
    <string name="account">account</string>
    <string name="logout">Logout</string>
    <string name="login">Login</string>
    <string name="switch_account">Cambia account</string>
    <string name="add_account">Aggiungi account</string>
    <string name="add_sync">Aggiungi tracking</string>
    <string name="added_sync_format" formatted="true">Aggiunto %s</string>
    <string name="upload_sync">Sync</string>
    <string name="sync_score">Valutato</string>
    <string name="sync_score_format" formatted="true">%d / 10</string>
    <string name="sync_total_episodes_none">/??</string>
    <string name="sync_total_episodes_some" formatted="true">/%d</string>
    <string name="authenticated_user" formatted="true">%s autenticato</string>
    <string name="authenticated_user_fail" formatted="true">Impossibile autenticarsi a %s</string>

    <!-- ============ -->
    <string name="none">Nessuno</string>
    <string name="normal">Normale</string>
    <string name="all">Tutto</string>
    <string name="max">Max</string>
    <string name="min">Min</string>
    <string name="subtitles_none" translatable="false">@string/none</string>
    <string name="subtitles_outline">Contorno</string>
    <string name="subtitles_depressed">Bassorilievo</string>
    <string name="subtitles_shadow">Ombra</string>
    <string name="subtitles_raised">Rilievo</string>
    <string name="subtitle_offset">Sincronizza sottotitoli</string>
    <string name="subtitle_offset_hint">1000ms</string>
    <string name="subtitle_offset_title">Ritardo sottotitoli</string>
    <string name="subtitle_offset_extra_hint_later_format">Usa questo se i sottotitoli sono mostrati %dms troppo presto</string>
    <string name="subtitle_offset_extra_hint_before_format">Usa questo se i sottotitoli vengono mostrati %dms troppo tardi</string>
    <string name="subtitle_offset_extra_hint_none_format">Nessun ritardo dei sottotitoli</string>
    <!--
    Example text (pangram) can optionally be translated; if you do, include all the letters in the alphabet,
    see: 
	https://en.wikipedia.org/w/index.php?title=Pangram&oldid=225849300
	https://en.wikipedia.org/wiki/The_quick_brown_fox_jumps_over_the_lazy_dog
    -->
    <string name="subtitles_example_text">Ma che bel gufo spenzola da quei travi</string>

    <string name="recommended">Consiglaito</string>
    <string name="player_loaded_subtitles" formatted="true">Caricato %s</string>
    <string name="player_load_subtitles">Carica da file</string>
    <string name="downloaded_file">Downloaded file</string>
    <string name="actor_main">Main</string>
    <string name="actor_supporting">Supporting</string>
    <string name="actor_background">Background</string>

    <string name="home_source">Sorgente</string>

    <string name="coming_soon">In Arrivo</string>

    <string name="quality_cam">Cam</string>
    <string name="quality_cam_rip">Cam</string>
    <string name="quality_cam_hd">Cam</string>
    <string name="quality_hq">HQ</string>
    <string name="quality_hd">HD</string>
    <string name="quality_ts">TS</string>
    <string name="quality_tc">TC</string>
    <string name="quality_blueray">BlueRay</string>
    <string name="quality_workprint">WP</string>
    <string name="quality_dvd">DVD</string>
    <string name="quality_4k">4K</string>
    <string name="quality_sd">SD</string>
    <string name="quality_uhd">UHD</string>
    <string name="quality_hdr">HDR</string>
    <string name="quality_sdr">SDR</string>
    <string name="quality_webrip">Web</string>

    <string name="poster_image">Poster</string>
</resources>



================================================
FILE: app/src/main/res/values-mk/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
       <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">Ð‘Ñ€Ð·Ð¸Ð½Ð° (%.2fx)</string>
    <string name="rated_format" formatted="true">ÐžÑ†ÐµÐ½ÐµÑ‚Ð¾: %.1f</string>
    <string name="new_update_format" formatted="true">ÐŸÑ€Ð¾Ð½Ð°Ñ˜Ð´ÐµÐ½Ð° Ð½Ð¾Ð²Ð° Ð²ÐµÑ€Ð·Ð¸Ñ˜Ð° Ð½Ð° Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð°!\n%s -> %s</string>
    <string name="filler" formatted="true">Ð¤Ð¸Ð»Ñ‚ÐµÑ€</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">Ð”Ð¾Ð¼Ð°</string>
    <string name="title_search">Ð‘Ð°Ñ€Ð°Ñ˜</string>
    <string name="title_downloads">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐ°</string>
    <string name="title_settings">ÐŸÐ¾ÑÑ‚Ð°Ð²ÐºÐ¸</string>

    <string name="search_hint">Ð‘Ð°Ñ€Ð°Ñ˜â€¦</string>
    <string name="no_data">ÐÐµÐ¼Ð° Ð¿Ð¾Ð´Ð°Ñ‚Ð¾Ñ†Ð¸</string>
    <string name="episode_more_options_des">ÐŸÐ¾Ð²ÐµÑœÐµ Ð¾Ð¿Ñ†Ð¸Ð¸</string>
    <string name="next_episode">Ð¡Ð»ÐµÐ´Ð½Ð° ÐµÐ¿Ð¸Ð·Ð¾Ð´Ð°</string>
    <string name="result_tags">Ð–Ð°Ð½Ñ€Ð¾Ð²Ð¸</string>
    <string name="result_share">Ð¡Ð¿Ð¾Ð´ÐµÐ»Ð¸</string>
    <string name="result_open_in_browser">ÐžÑ‚Ð²Ð¾Ñ€Ð¸ Ð²Ð¾ Ð¿Ñ€ÐµÐ»Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡</string>
    <string name="skip_loading">ÐŸÑ€ÐµÑÐºÐ¾ÐºÐ½Ð¸ Ð²Ñ‡Ð¸Ñ‚ÑƒÐ²Ð°ÑšÐµ</string>
    <string name="loading_chromecast">Ð’Ñ‡Ð¸Ñ‚ÑƒÐ²Ð°ÑšÐµâ€¦</string>

    <string name="type_watching">ÐœÐ¾Ð¼ÐµÐ½Ñ‚Ð°Ð»Ð½Ð¸ Ð³Ð»ÐµÐ´Ð°ÑšÐ°</string>
    <string name="type_on_hold">Ð¡Ñ‚Ð°Ð²ÐµÐ½Ð¾ Ð½Ð° Ñ‡ÐµÐºÐ°ÑšÐµ</string>
    <string name="type_completed">Ð—Ð°Ð²Ñ€ÑˆÐµÐ½Ð¸</string>
    <string name="type_dropped">ÐžÑ‚Ñ„Ñ€Ð»ÐµÐ½Ð¸</string>
    <string name="type_plan_to_watch">ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð°Ð½Ð¸ Ð·Ð° Ð³Ð»ÐµÐ´Ð°ÑšÐµ</string>
    <string name="type_none">ÐÐ¸ÑˆÑ‚Ð¾ Ð¾Ð´Ð±Ñ€Ð°Ð½Ð¾</string>
    <string name="type_re_watching">ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð³Ð»ÐµÐ´Ð°ÑšÐµ</string>

    <string name="play_movie_button">ÐŸÑƒÑˆÑ‚Ð¸ Ñ„Ð¸Ð»Ð¼</string>
    <string name="play_torrent_button">Ð¡Ñ‚Ñ€Ð¸Ð¼Ð°Ñ˜ Ñ‚Ð¾Ñ€ÐµÐ½Ñ‚</string>
    <string name="pick_source">Ð˜Ð·Ð²Ð¾Ñ€Ð¸</string>
    <string name="pick_subtitle">ÐŸÑ€ÐµÐ²Ð¾Ð´Ð¸</string>
    <string name="reload_error">ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸ ÐºÐ¾Ð½ÐµÐºÑ†Ð¸Ñ˜Ð°â€¦</string>
    <string name="go_back">ÐžÐ´Ð¸ Ð½Ð°Ð·Ð°Ð´</string>
    <string name="play_episode">ÐŸÑƒÑˆÑ‚Ð¸ ÐµÐ¿Ð¸Ð·Ð¾Ð´Ð°</string>
    <!--<string name="need_storage">Allow to download episodes</string>-->

    <string name="download">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð¸</string>
    <string name="downloaded">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼ÐµÐ½Ð¾</string>
    <string name="downloading">Ð¡Ðµ Ð¿Ñ€ÐµÐ²Ð·ÐµÐ¼Ð°</string>
    <string name="download_paused">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµÑ‚Ð¾ Ðµ Ð¿Ð°ÑƒÐ·Ð¸Ñ€Ð°Ð½Ð¾</string>
    <string name="download_started">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµÑ‚Ð¾ Ð·Ð°Ð¿Ð¾Ñ‡Ð½Ð°</string>
    <string name="download_failed">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµÑ‚Ð¾ Ðµ Ð½ÐµÑƒÑÐ¿ÐµÑˆÐ½Ð¾</string>
    <string name="download_canceled">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµÑ‚Ð¾ Ðµ Ð¾Ñ‚ÐºÐ°Ð¶Ð°Ð½Ð¾</string>
    <string name="download_done">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµÑ‚Ð¾ Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾</string>

    <string name="error_loading_links_toast">Ð“Ñ€ÐµÑˆÐºÐ° Ð¿Ñ€Ð¸ Ð²Ñ‡Ð¸Ñ‚ÑƒÐ²Ð°ÑšÐµ Ð½Ð° Ð²Ñ€ÑÐºÐ°Ñ‚Ð°</string>
    <string name="download_storage_text">Ð’Ð½Ð°Ñ‚Ñ€ÐµÑˆÐ½Ð° Ð¼ÐµÐ¼Ð¾Ñ€Ð¸Ñ˜Ð°</string>

    <string name="popup_delete_file">Ð˜Ð·Ð±Ñ€Ð¸ÑˆÐ¸ Ð´Ð°Ñ‚Ð¾Ñ‚ÐµÐºÐ°</string>
    <string name="popup_play_file">ÐŸÑƒÑˆÑ‚Ð¸ Ð´Ð°Ñ‚Ð¾Ñ‚ÐµÐºÐ°</string>
    <string name="popup_resume_download">ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸ ÑÐ¾ Ð¿Ñ€ÐµÐ·ÐµÐ¼Ð°ÑšÐµ</string>
    <string name="popup_pause_download">ÐŸÐ°ÑƒÐ·Ð¸Ñ€Ð°Ñ˜ ÑÐ¾ Ð¿Ñ€ÐµÐ·ÐµÐ¼Ð°ÑšÐµ</string>

    <string name="pref_disable_acra">ÐžÐ½ÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚ÑÐºÐ¾ Ð¸Ð·Ð²ÐµÑÑ‚ÑƒÐ²Ð°ÑšÐµ Ð·Ð° Ð³Ñ€ÐµÑˆÐºÐ¸</string>
    <string name="home_more_info">ÐŸÐ¾Ð²ÐµÑœÐµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸</string>
    <string name="home_expanded_hide">Ð¡ÐºÑ€Ð¸Ñ˜</string>
    <string name="home_play">ÐŸÑƒÑˆÑ‚Ð¸</string>
    <string name="home_info">Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸</string>
    <string name="filter_bookmarks">Ð¤Ð¸Ð»Ñ‚Ñ€Ð¸Ñ€Ð°Ñ˜Ñ‚Ðµ Ð³Ð¸ Ð¾Ð±ÐµÐ»ÐµÐ¶ÑƒÐ²Ð°Ñ‡Ð¸Ñ‚Ðµ</string>
    <string name="error_bookmarks_text">ÐžÐ±ÐµÐ»ÐµÐ¶ÑƒÐ²Ð°Ñ‡Ð¸</string>
    <string name="action_remove_from_bookmarks">ÐžÑ‚ÑÑ‚Ñ€Ð°Ð½Ð¸</string>
    <string name="sort_apply">ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð°Ñ˜</string>
    <string name="sort_cancel">ÐžÑ‚ÐºÐ°Ð¶Ð¸</string>
    <string name="player_speed">Ð‘Ñ€Ð·Ð¸Ð½Ð° Ð½Ð° Ð¿Ð»ÐµÐµÑ€</string>

    <string name="subtitles_settings">ÐŸÐ¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð·Ð° Ð¿Ñ€ÐµÐ²Ð¾Ð´Ð¸</string>
    <string name="subs_text_color">Ð‘Ð¾Ñ˜Ð° Ð½Ð° Ñ‚ÐµÐºÑÑ‚Ð¾Ñ‚</string>
    <string name="subs_outline_color">Ð‘Ð¾Ñ˜Ð° Ð½Ð° Ð½Ð°Ð´Ð²Ð¾Ñ€ÐµÑˆÐ½Ð° Ð»Ð¸Ð½Ð¸Ñ˜Ð° Ð¾Ð´ Ñ‚ÐµÐºÑÑ‚Ð¾Ñ‚</string>
    <string name="subs_background_color">ÐŸÐ¾Ð·Ð°Ð´Ð¸Ð½ÑÐºÐ° Ð±Ð¾Ñ˜Ð°</string>
    <string name="subs_window_color">Ð‘Ð¾Ñ˜Ð° Ð½Ð° Ð¿Ñ€Ð¾Ð·Ð¾Ñ€ÐµÑ†</string>
    <string name="subs_edge_type">Ð¢Ð¸Ð¿ Ð½Ð° Ñ€Ð°Ð±</string>
    <string name="subs_subtitle_elevation">Ð’Ð¸ÑÐ¸Ð½Ð° Ð½Ð° Ñ‚Ð¸Ñ‚Ð»</string>
    <string name="subs_font">Ð¤Ð¾Ð½Ñ‚</string>
    <string name="subs_font_size">Ð“Ð¾Ð»ÐµÐ¼Ð¸Ð½Ð° Ð½Ð° Ñ„Ð¾Ð½Ñ‚</string>

    <string name="search_provider_text_providers">ÐŸÑ€ÐµÐ±Ð°Ñ€ÑƒÐ²Ð°Ñ˜ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÐµÑ˜ÑœÐ¸ Ð¿Ñ€Ð¾Ð²Ð°Ñ˜Ð´ÐµÑ€Ð¸</string>
    <string name="search_provider_text_types">ÐŸÑ€ÐµÐ±Ð°Ñ€ÑƒÐ²Ð°Ñ˜ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÐµÑ˜ÑœÐ¸ Ñ‚Ð¸Ð¿Ð¾Ð²Ð¸</string>

    <string name="benene_count_text">%d ÐšÑ€ÐµÐ¼ Ð±Ð°Ð½Ð°Ð½Ð¸ Ð´Ð°Ð´ÐµÐ½Ð¸ Ð½Ð° Ð´ÐµÐ²ÐµÐ»Ð¾Ð¿ÐµÑ€Ð¸Ñ‚Ðµ</string>
    <string name="benene_count_text_none">ÐÐµÐ¼Ð° ÐºÑ€ÐµÐ¼ Ð±Ð°Ð½Ð°Ð½Ð¸ Ð´Ð°Ð´ÐµÐ½Ð¸</string>

    <string name="subs_auto_select_language">ÐÐ²Ñ‚Ð¾ Ð¾Ð´Ð±Ð¸Ñ€Ð°ÑšÐµ Ð½Ð° Ñ˜Ð°Ð·Ð¸Ðº</string>
    <string name="subs_download_languages">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð¸ Ñ˜Ð°Ð·Ð¸Ñ†Ð¸</string>
    <string name="subs_hold_to_reset_to_default">Ð”Ñ€Ð¶ÐµÑ‚Ðµ Ð·Ð° Ð´Ð° ÑÐµ Ñ€ÐµÑÐµÑ‚Ð¸Ñ€Ð° Ð½Ð° ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ð´Ð½Ð¾</string>
    <string name="continue_watching">ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸ ÑÐ¾ Ð³Ð»ÐµÐ´Ð°ÑšÐµ</string>

    <string name="action_remove_watching">Ð˜Ð·Ð±Ñ€Ð¸ÑˆÐ¸</string>
    <string name="action_open_watching">ÐŸÐ¾Ð²ÐµÑœÐµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸</string>

    <string name="vpn_might_be_needed">ÐœÐ¾Ð¶ÐµÐ±Ð¸ ÑœÐµ Ð±Ð¸Ð´Ðµ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±ÐµÐ½ VPN Ð·Ð° Ð´Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð½Ð¾ Ð¾Ð²Ð¾Ñ˜ Ð¿Ñ€Ð¾Ð²Ð°Ñ˜Ð´ÐµÑ€</string>
    <string name="vpn_torrent">ÐžÐ²Ð¾Ñ˜ Ð¿Ñ€Ð¾Ð²Ð°Ñ˜Ð´ÐµÑ€ Ðµ Ñ‚Ð¾Ñ€ÐµÐ½Ñ‚, ÑÐµ Ð¿Ñ€ÐµÐ¿Ð¾Ñ€Ð°Ñ‡ÑƒÐ²Ð° VPN</string>

    <string name="provider_info_meta">ÐœÐµÑ‚Ð°Ð¿Ð¾Ð´Ð°Ñ‚Ð¾Ñ†Ð¸Ñ‚Ðµ Ð½Ðµ ÑÐµ Ð¾Ð±ÐµÐ·Ð±ÐµÐ´ÐµÐ½Ð¸ Ð¾Ð´ ÑÑ‚Ñ€Ð°Ð½Ð°Ñ‚Ð°, Ð²Ñ‡Ð¸Ñ‚ÑƒÐ²Ð°ÑšÐµÑ‚Ð¾ Ð½Ð° Ð²Ð¸Ð´ÐµÐ¾Ñ‚Ð¾ Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ð½Ðµ ÑƒÑÐ¿ÐµÐµ.</string>

    <string name="torrent_plot">ÐžÐ¿Ð¸Ñ</string>
    <string name="normal_no_plot">ÐÐµ Ðµ Ð¿Ñ€Ð¾Ð½Ð°Ñ˜Ð´ÐµÐ½ Ð·Ð°Ð³Ð¾Ð²Ð¾Ñ€</string>
    <string name="torrent_no_plot">ÐÐµ Ðµ Ð¿Ñ€Ð¾Ð½Ð°Ñ˜Ð´ÐµÐ½ Ð¾Ð¿Ð¸Ñ</string>

    <string name="picture_in_picture">Ð¡Ð»Ð¸ÐºÐ°-Ð²Ð¾-ÑÐ»Ð¸ÐºÐ°</string>
    <string name="picture_in_picture_des">ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶ÑƒÐ²Ð° ÑÐ¾ Ñ€ÐµÐ¿Ñ€Ð¾Ð´ÑƒÐºÑ†Ð¸Ñ˜Ð° Ð²Ð¾ Ð¼Ð¸Ð½Ð¸Ñ˜Ð°Ñ‚ÑƒÑ€ÐµÐ½ Ð¿Ð»ÐµÐµÑ€ Ð½Ð°Ð´ Ð´Ñ€ÑƒÐ³Ð¸Ñ‚Ðµ Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸</string>
    <string name="player_size_settings">ÐšÐ¾Ð¿Ñ‡Ðµ Ð·Ð° Ð¿Ñ€Ð¾Ð¼ÐµÐ½Ð° Ð½Ð° Ð³Ð¾Ð»ÐµÐ¼Ð¸Ð½Ð°Ñ‚Ð° Ð½Ð° Ð¿Ð»ÐµÐµÑ€Ð¾Ñ‚</string>
    <string name="player_size_settings_des">ÐžÑ‚ÑÑ‚Ñ€Ð°Ð½ÐµÑ‚Ðµ Ð³Ð¸ Ñ†Ñ€Ð½Ð¸Ñ‚Ðµ Ð³Ñ€Ð°Ð½Ð¸Ñ†Ð¸</string>
    <string name="player_subtitles_settings">ÐŸÑ€ÐµÐ²Ð¾Ð´Ð¸</string>
    <string name="player_subtitles_settings_des">ÐŸÐ¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð½Ð° Ð¿Ð»ÐµÐµÑ€Ð¾Ñ‚ Ð·Ð° Ð¿Ñ€ÐµÐ²Ð¾Ð´Ð¸</string>
    <string name="eigengraumode_settings">Ð ÐµÐ¶Ð¸Ð¼ Ð½Ð° Eigengravy</string>
    <string name="eigengraumode_settings_des">Ð”Ð¾Ð´Ð°Ð²Ð° Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ Ð·Ð° Ð±Ñ€Ð·Ð¸Ð½Ð° Ð½Ð° ÑÐ½Ð¸Ð¼ÐºÐ° Ð²Ð¾ Ð¿Ð»ÐµÐµÑ€Ð¾Ñ‚</string>
    <string name="swipe_to_seek_settings">ÐŸÐ¾Ð²Ð»ÐµÑ‡ÐµÑ‚Ðµ Ð·Ð° Ð´Ð° Ð±Ð°Ñ€Ð°Ñ‚Ðµ</string>
    <string name="swipe_to_seek_settings_des">ÐŸÐ¾Ð²Ð»ÐµÑ‡ÐµÑ‚Ðµ Ð»ÐµÐ²Ð¾ Ð¸Ð»Ð¸ Ð´ÐµÑÐ½Ð¾ Ð·Ð° Ð´Ð° Ð³Ð¾ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð¸Ñ€Ð°Ñ‚Ðµ Ð²Ñ€ÐµÐ¼ÐµÑ‚Ð¾ Ð²Ð¾ Ð²Ð¸Ð´ÐµÐ¾Ð¿Ð»ÐµÐµÑ€Ð¾Ñ‚</string>
    <string name="swipe_to_change_settings">ÐŸÐ¾Ð²Ð»ÐµÑ‡ÐµÑ‚Ðµ Ð·Ð° Ð´Ð° Ð³Ð¸ Ð¿Ñ€Ð¾Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¿Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸Ñ‚Ðµ</string>
    <string name="swipe_to_change_settings_des">ÐŸÐ¾Ð²Ð»ÐµÑ‡ÐµÑ‚Ðµ Ð½Ð° Ð»ÐµÐ²Ð°Ñ‚Ð° Ð¸Ð»Ð¸ Ð´ÐµÑÐ½Ð°Ñ‚Ð° ÑÑ‚Ñ€Ð°Ð½Ð° Ð·Ð° Ð´Ð° Ñ˜Ð° Ð¿Ñ€Ð¾Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¾ÑÐ²ÐµÑ‚Ð»ÐµÐ½Ð¾ÑÑ‚Ð° Ð¸Ð»Ð¸ Ñ˜Ð°Ñ‡Ð¸Ð½Ð°Ñ‚Ð° Ð½Ð° Ð·Ð²ÑƒÐºÐ¾Ñ‚</string>
    <string name="double_tap_to_seek_settings">Ð”Ð¾Ð¿Ñ€ÐµÑ‚Ðµ Ð´Ð²Ð°Ð¿Ð°Ñ‚Ð¸ Ð·Ð° Ð´Ð° Ð±Ð°Ñ€Ð°Ñ‚Ðµ</string>
    <string name="double_tap_to_seek_settings_des">Ð”Ð¾Ð¿Ñ€ÐµÑ‚Ðµ Ð´Ð²Ð°Ð¿Ð°Ñ‚Ð¸ Ð½Ð° Ð´ÐµÑÐ½Ð°Ñ‚Ð° Ð¸Ð»Ð¸ Ð»ÐµÐ²Ð°Ñ‚Ð° ÑÑ‚Ñ€Ð°Ð½Ð° Ð·Ð° Ð´Ð° Ð±Ð°Ñ€Ð°Ñ‚Ðµ Ð½Ð°Ð¿Ñ€ÐµÐ´ Ð¸Ð»Ð¸ Ð½Ð°Ð·Ð°Ð´</string>
    <string name="use_system_brightness_settings">ÐšÐ¾Ñ€Ð¸ÑÑ‚ÐµÑ‚Ðµ Ñ˜Ð° Ð¾ÑÐ²ÐµÑ‚Ð»ÐµÐ½Ð¾ÑÑ‚Ð° Ð½Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾Ñ‚</string>
    <string name="use_system_brightness_settings_des">ÐšÐ¾Ñ€Ð¸ÑÑ‚ÐµÑ‚Ðµ Ñ˜Ð° Ð¾ÑÐ²ÐµÑ‚Ð»ÐµÐ½Ð¾ÑÑ‚Ð° Ð½Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾Ñ‚ Ð²Ð¾ Ð¿Ð»ÐµÐµÑ€Ð¾Ñ‚ Ð½Ð°Ð¼ÐµÑÑ‚Ð¾ Ñ‚ÐµÐ¼Ð½Ð°Ñ‚Ð° Ð¿Ñ€ÐµÐºÑ€Ð¸Ð²ÐºÐ°</string>

    <string name="search">Ð‘Ð°Ñ€Ð°Ñ˜</string>
    <string name="settings_info">Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸</string>
    <string name="advanced_search">ÐÐ°Ð¿Ñ€ÐµÐ´Ð½Ð¾ Ð¿Ñ€ÐµÐ±Ð°Ñ€ÑƒÐ²Ð°ÑšÐµ</string>
    <string name="advanced_search_des">Ð’Ð¸ Ð³Ð¸ Ð´Ð°Ð²Ð° Ñ€ÐµÐ·ÑƒÐ»Ñ‚Ð°Ñ‚Ð¸Ñ‚Ðµ Ð¾Ð´ Ð¿Ñ€ÐµÐ±Ð°Ñ€ÑƒÐ²Ð°ÑšÐµÑ‚Ð¾ Ð¾Ð´Ð´ÐµÐ»ÐµÐ½Ð¸ Ð¿Ð¾ Ð¿Ñ€Ð¾Ð²Ð°Ñ˜Ð´ÐµÑ€</string>
    <string name="bug_report_settings_off">Ð˜ÑÐ¿Ñ€Ð°ÑœÐ° Ð¿Ð¾Ð´Ð°Ñ‚Ð¾Ñ†Ð¸ ÑÐ°Ð¼Ð¾ Ð·Ð° Ð¿Ð°Ð´Ð¾Ð²Ð¸ Ð½Ð° Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð°</string>
    <string name="bug_report_settings_on">ÐÐµ Ð¸ÑÐ¿Ñ€Ð°ÑœÐ° Ð¿Ð¾Ð´Ð°Ñ‚Ð¾Ñ†Ð¸</string>
    <string name="show_fillers_settings">ÐŸÑ€Ð¸ÐºÐ°Ð¶Ð¸ ÐµÐ¿Ð¸Ð·Ð¾Ð´Ð° Ð·Ð° Ð¿Ð¾Ð»Ð½ÐµÑšÐµ Ð·Ð° Ð°Ð½Ð¸Ð¼Ðµ</string>
    <string name="updates_settings">ÐŸÑ€Ð¸ÐºÐ°Ð¶Ð¸ Ð°Ð¶ÑƒÑ€Ð¸Ñ€Ð°ÑšÐ° Ð½Ð° Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸</string>
    <string name="updates_settings_des">ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚ÑÐºÐ¸ Ð¿Ñ€ÐµÐ±Ð°Ñ€ÑƒÐ²Ð°Ñ˜Ñ‚Ðµ Ð½Ð¾Ð²Ð¸ Ð°Ð¶ÑƒÑ€Ð¸Ñ€Ð°ÑšÐ° Ð½Ð° Ð²ÐºÐ»ÑƒÑ‡ÑƒÐ²Ð°ÑšÐµ Ð½Ð° Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð°</string>
    <string name="uprereleases_settings">ÐÐ¶ÑƒÑ€Ð¸Ñ€Ð°ÑšÐµ Ð½Ð° Ð¿Ñ€ÐµÐ´ Ð¾Ñ„Ð¸Ñ†Ð¸Ñ˜Ð°Ð»Ð½Ð¸ Ð²ÐµÑ€Ð·Ð¸Ð¸</string>
    <string name="uprereleases_settings_des">ÐŸÑ€ÐµÐ±Ð°Ñ€Ð°Ñ˜Ñ‚Ðµ Ð¿Ñ€ÐµÐ´ Ð¾Ñ„Ð¸Ñ†Ð¸Ñ˜Ð°Ð»Ð½Ð¸ Ð²ÐµÑ€Ð·Ð¸Ð¸ Ð½Ð°Ð¼ÐµÑÑ‚Ð¾ Ð°Ð¶ÑƒÑ€Ð¸Ñ€Ð°ÑšÐ° Ð½Ð° ÑÐ°Ð¼Ð¾ Ð¾Ñ„Ð¸Ñ†Ð¸Ñ˜Ð°Ð»Ð½Ð¸ Ð²ÐµÑ€Ð·Ð¸Ð¸</string>
    <string name="github">Github</string>
    <string name="lightnovel">Ð›ÐµÑÐ½Ð° Ð½Ð¾Ð²Ð° Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð° Ð¾Ð´ Ð¸ÑÑ‚Ð¸Ñ‚Ðµ Ñ€Ð°Ð·Ð²Ð¸Ð²Ð°Ñ‡Ð¸</string>
    <string name="anim">ÐÐ¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð° Ð·Ð° Ð°Ð½Ð¸Ð¼Ðµ Ð¾Ð´ Ð¸ÑÑ‚Ð¸Ñ‚Ðµ Ñ€Ð°Ð·Ð²Ð¸Ð²Ð°Ñ‡Ð¸</string>
    <string name="discord">ÐŸÑ€Ð¸Ð´Ñ€ÑƒÐ¶ÐµÑ‚Ðµ ÑÐµ Ð½Ð° Discord</string>
    <string name="benene">Ð”Ð°Ñ˜Ñ‚Ðµ Ð¸Ð¼ ÐºÑ€ÐµÐ¼ Ð±Ð°Ð½Ð°Ð½Ð° Ð½Ð° Ñ€Ð°Ð·Ð²Ð¸Ð²Ð°Ñ‡Ð¸Ñ‚Ðµ</string>
    <string name="benene_des">Ð”Ð°Ð´ÐµÐ½Ð¸ ÐºÑ€ÐµÐ¼ Ð±Ð°Ð½Ð°Ð½Ð¸</string>

    <string name="app_language">ÐˆÐ°Ð·Ð¸Ðº Ð½Ð° Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð°</string>

    <string name="no_chromecast_support_toast">ÐžÐ²Ð¾Ñ˜ Ð¿Ñ€Ð¾Ð²Ð°Ñ˜Ð´ÐµÑ€ Ð½ÐµÐ¼Ð° Ð¿Ð¾Ð´Ð´Ñ€ÑˆÐºÐ° Ð·Ð° Chromecast</string>
    <string name="no_links_found_toast">ÐÐµ ÑÐµ Ð¿Ñ€Ð¾Ð½Ð°Ñ˜Ð´ÐµÐ½Ð¸ Ð²Ñ€ÑÐºÐ¸</string>
    <string name="copy_link_toast">Ð’Ñ€ÑÐºÐ°Ñ‚Ð° Ðµ ÐºÐ¾Ð¿Ð¸Ñ€Ð°Ð½Ð° Ð²Ð¾ Ñ‚Ð°Ð±Ð»Ð°Ñ‚Ð° ÑÐ¾ Ð¸ÑÐµÑ‡Ð¾Ñ†Ð¸</string>
    <string name="play_episode_toast">ÐŸÑƒÑˆÑ‚Ð¸ Ñ˜Ð° ÐµÐ¿Ð¸Ð·Ð¾Ð´Ð°Ñ‚Ð°</string>
    <string name="subs_default_reset_toast">Ð ÐµÑÐµÑ‚Ð¸Ñ€Ð°ÑšÐµ Ð½Ð° ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ð´Ð½Ð¸Ñ‚Ðµ Ð²Ñ€ÐµÐ´Ð½Ð¾ÑÑ‚Ð¸</string>
    <string name="acra_report_toast">Ð—Ð° Ð¶Ð°Ð», Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð° Ð¿Ð°Ð´Ð½Ð°. ÐŒÐµ ÑÐµ Ð¸ÑÐ¿Ñ€Ð°Ñ‚Ð¸ Ð°Ð½Ð¾Ð½Ð¸Ð¼ÐµÐ½ Ð¸Ð·Ð²ÐµÑˆÑ‚Ð°Ñ˜ Ð·Ð° Ð³Ñ€ÐµÑˆÐºÐ° Ð´Ð¾ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼ÐµÑ€Ð¸Ñ‚Ðµ</string>

    <string name="season">Ð¡ÐµÐ·Ð¾Ð½Ð°</string>
    <string name="no_season">ÐÐµÐ¼Ð° ÑÐµÐ·Ð¾Ð½Ð°</string>
    <string name="episode">Ð•Ð¿Ð¸Ð·Ð¾Ð´Ð°</string>
    <string name="episodes">Ð•Ð¿Ð¸Ð·Ð¾Ð´Ð¸</string>
    <string name="season_short">Ð¡</string>
    <string name="episode_short">Ð•</string>

    <string name="delete_file">Ð˜Ð·Ð±Ñ€Ð¸ÑˆÐ¸ Ð´Ð°Ñ‚Ð¾Ñ‚ÐµÐºÐ°</string>
    <string name="delete">Ð˜Ð·Ð±Ñ€Ð¸ÑˆÐ¸</string>
    <string name="pause">ÐŸÐ°ÑƒÐ·Ð¸Ñ€Ð°Ñ˜</string>
    <string name="resume">ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸</string>
    <string name="delete_message">ÐžÐ²Ð° Ñ‚Ñ€Ð°Ñ˜Ð½Ð¾ ÑœÐµ Ð³Ð¾ Ð¸Ð·Ð±Ñ€Ð¸ÑˆÐµ %s\nÐ”Ð°Ð»Ð¸ ÑÐ¸ ÑÐ¸Ð³ÑƒÑ€ÐµÐ½?</string>

    <string name="status_ongoing">Ð’Ð¾ Ñ‚ÐµÐº</string>
    <string name="status_completed">Ð—Ð°Ð²Ñ€ÑˆÐµÐ½Ð¸</string>
    <string name="status">Ð¡Ñ‚Ð°Ñ‚ÑƒÑ</string>
    <string name="year">Ð“Ð¾Ð´Ð¸Ð½Ð°</string>
    <string name="rating">Ð ÐµÑ˜Ñ‚Ð¸Ð½Ð³</string>
    <string name="duration">Ð’Ñ€ÐµÐ¼ÐµÑ‚Ñ€Ð°ÐµÑšÐµ</string>
    <string name="site">Ð˜Ð·Ð²Ð¾Ñ€</string>
    <string name="synopsis">ÐšÑ€Ð°Ñ‚</string>

    <string name="queued">Ð²Ð¾ Ñ€ÐµÐ´Ð¸Ñ†Ð°</string>
    <string name="no_subtitles">ÐÐµÐ¼Ð° Ð¿Ñ€ÐµÐ²Ð¾Ð´Ð¸</string>
    <string name="default_subtitles">Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ð´Ð½Ð¾</string>

    <string name="free_storage">Ð¡Ð»Ð¾Ð±Ð¾Ð´ÐµÐ½ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ€</string>
    <string name="used_storage">Ð˜ÑÐºÐ¾Ñ€Ð¸ÑÑ‚ÐµÐ½ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ€</string>
    <string name="app_storage">ÐÐ¿Ð»Ð¸ÐºÐ°Ñ†Ð¸ÑÐºÐ¸ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ€</string>

    <string name="movies">Ð¤Ð¸Ð»Ð¼Ð¾Ð²Ð¸</string>
    <string name="tv_series">Ð¡ÐµÑ€Ð¸Ð¸</string>
    <string name="cartoons">Ð¦Ñ€Ñ‚Ð°Ð½Ð¸</string>
    <string name="anime">ÐÐ½Ð¸Ð¼Ðµ</string>
    <string name="torrent">Ð¢Ð¾Ñ€ÐµÐ½Ñ‚</string>

    <string name="source_error">Ð˜Ð·Ð²Ð¾Ñ€ Ð½Ð° Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð¾Ñ‚</string>
    <string name="remote_error">Ð“Ñ€ÐµÑˆÐºÐ°</string>
    <string name="render_error">Ð“Ñ€ÐµÑˆÐºÐ°</string>
    <string name="unexpected_error">ÐÐµÐ¾Ñ‡ÐµÐºÑƒÐ²Ð°Ð½Ð° Ð³Ñ€ÐµÑˆÐºÐ° ÑÐ¾ Ð¿Ð»ÐµÐµÑ€Ð¾Ñ‚</string>
    <string name="storage_error">Ð“Ñ€ÐµÑˆÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ñ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµÑ‚Ð¾, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÑ‚Ðµ ÑÐ¸ Ð³Ð¸ Ð´Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚Ðµ Ð·Ð° ÐºÐ¾Ñ€Ð¸ÑÑ‚ÐµÑšÐµ Ð½Ð° Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ€</string>

    <string name="episode_action_chromecast_episode">Ð•Ð¿Ð¸Ð·Ð¾Ð´Ð° Ð½Ð° Chromecast</string>
    <string name="episode_action_chromecast_mirror">ÐžÐ³Ð»ÐµÐ´Ð°Ð»Ð¾ Ð½Ð° Chromecastr</string>
    <string name="episode_action_play_in_app">ÐŸÑƒÑˆÑ‚Ð¸ Ð²Ð¾ Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð°</string>
    <string name="episode_action_play_in_vlc">ÐŸÑƒÑˆÑ‚Ð¸ Ð½Ð° VLC</string>
    <string name="episode_action_play_in_browser">ÐŸÑƒÑˆÑ‚Ð¸ Ð½Ð° Ð¿Ñ€ÐµÐ»Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡</string>
    <string name="episode_action_copy_link">ÐšÐ¾Ð¿Ð¸Ñ€Ð°Ñ˜ Ð»Ð¸Ð½Ðº</string>
    <string name="episode_action_auto_download">ÐÐ²Ñ‚Ð¾ Ð¿Ñ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµ</string>
    <string name="episode_action_download_mirror">ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð¸ Mirror</string>
    <string name="episode_action_reload_links">Ð’Ñ‡Ð¸Ñ‚Ð°Ñ˜ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð²Ñ€ÑÐºÐ¸</string>

    <string name="no_update_found">ÐÐµ Ðµ Ð¿Ñ€Ð¾Ð½Ð°Ñ˜Ð´ÐµÐ½Ð¾ Ð°Ð¶ÑƒÑ€Ð¸Ñ€Ð°ÑšÐµ</string>
    <string name="check_for_update">ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÑ‚Ðµ Ð°Ð¶ÑƒÑ€Ð¸Ñ€Ð°ÑšÐ°</string>

    <string name="video_lock">Ð—Ð°ÐºÐ»ÑƒÑ‡Ð¸</string>
    <string name="video_aspect_ratio_resize">ÐŸÑ€Ð¾Ð¼ÐµÐ½ÐµÑ‚Ðµ Ñ˜Ð° Ð³Ð¾Ð»ÐµÐ¼Ð¸Ð½Ð°Ñ‚Ð°</string>
    <string name="video_source">Ð˜Ð·Ð±Ð¾Ñ€</string>
    <string name="video_skip_op">ÐŸÑ€ÐµÑÐºÐ¾ÐºÐ½Ð¸ ÐžÐŸ</string>

    <string name="dont_show_again">ÐÐµ Ð¿Ñ€Ð¸ÐºÐ°Ð¶ÑƒÐ²Ð°Ñ˜ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾</string>
    <string name="update">ÐÐ¶ÑƒÑ€Ð¸Ñ€Ð°Ñ˜</string>
    <string name="watch_quality_pref">ÐŸÑ€ÐµÑ„ÐµÑ€Ð¸Ñ€Ð°Ð½ ÐºÐ²Ð°Ð»Ð¸Ñ‚ÐµÑ‚ Ð½Ð° Ð³Ð»ÐµÐ´Ð°ÑšÐµ</string>
    <string name="dns_pref">DNS Ð¿Ñ€ÐµÐºÑƒ HTTPS</string>
    <string name="dns_pref_summary">ÐšÐ¾Ñ€Ð¸ÑÐ½Ð¾ Ð·Ð° Ð·Ð°Ð¾Ð±Ð¸ÐºÐ¾Ð»ÑƒÐ²Ð°ÑšÐµ Ð½Ð° Ð±Ð»Ð¾ÐºÐ¾Ð²Ð¸Ñ‚Ðµ Ð½Ð° Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚ Ð¿Ñ€Ð¾Ð²Ð°Ñ˜Ð´ÐµÑ€Ð¸Ñ‚Ðµ</string>

    <string name="download_path_pref">ÐŸÐ°Ñ‚ÐµÐºÐ° Ð½Ð° Ð¿Ñ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµ</string>

    <string name="display_subbed_dubbed_settings">ÐŸÑ€Ð¸ÐºÐ°Ð¶Ð¸ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€Ð°Ð½Ð¾/ÑÑƒÐ±Ð»Ð¸Ñ€Ð°Ð½Ð¾ Ð°Ð½Ð¸Ð¼Ðµ</string>

    <string name="resize_fit">ÐŸÑ€Ð¸Ð»Ð°Ð³Ð¾Ð´Ð¸ Ð½Ð° ÐµÐºÑ€Ð°Ð½Ð¾Ñ‚</string>
    <string name="resize_fill">Ð˜ÑÑ‚ÐµÐ³Ð½Ð¸</string>
    <string name="resize_zoom">Ð—ÑƒÐ¼Ð¸Ñ€Ð°Ñ˜</string>

    <string name="legal_notice">Disclaimer</string>
    <string name="general">Ð“ÐµÐ½ÐµÑ€Ð°Ð»Ð½Ð¾</string>
    <string name="provider_lang_settings">ÐˆÐ°Ð·Ð¸Ñ†Ð¸ Ð½Ð° Ð¿Ñ€Ð¾Ð²Ð°Ñ˜Ð´ÐµÑ€Ð¸Ñ‚Ðµ</string>
    <string name="app_layout">Ð Ð°ÑÐ¿Ð¾Ñ€ÐµÐ´ Ð½Ð° Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð°</string>
    <string name="preferred_media_settings">ÐŸÑ€ÐµÑ‚Ð¿Ð¾Ñ‡Ð¸Ñ‚Ð°Ð½Ð¸ Ð¼ÐµÐ´Ð¸ÑƒÐ¼Ð¸</string>

    <string name="automatic">ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚ÑÐºÐ¸</string>
    <string name="tv_layout">Ð˜Ð·Ð³Ð»ÐµÐ´ Ð·Ð° Ð³Ð»ÐµÐ´Ð°ÑšÐµ Ð½Ð° Ñ‚ÐµÐ»ÐµÐ²Ð¸Ð·Ð¾Ñ€</string>
    <string name="phone_layout">Ð˜Ð·Ð³Ð»ÐµÐ´ Ð·Ð° Ð³Ð»ÐµÐ´Ð°ÑšÐµ Ð½Ð° Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½</string>

    <string name="primary_color_settings">ÐŸÑ€Ð¸Ð¼Ð°Ñ€Ð½Ð° Ð±Ð¾Ñ˜Ð°</string>
    <string name="app_theme_settings">Ð¢ÐµÐ¼Ð° Ð½Ð° Ð°Ð¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð°</string>

    <string name="login_format">%s %s</string>
    <string name="account">ÐšÐ¾Ñ€Ð¸ÑÐ½Ð¸Ñ‡ÐºÐ¾ Ð¸Ð¼Ðµ</string>
    <string name="logout">ÐžÐ´Ñ˜Ð°Ð²ÑƒÐ²Ð°ÑšÐµ</string>
    <string name="login">Ð›Ð¾Ð³Ð¸Ñ€Ð°Ñ˜ Ð¡Ðµ</string>
    <string name="switch_account">ÐŸÑ€Ð¾Ð¼ÐµÐ½Ð¸ ÐºÐ¾Ñ€Ð¸ÑÐ½Ð¸Ñ‡ÐºÐ° ÑÐ¼ÐµÑ‚ÐºÐ°</string>
    <string name="add_account">Ð”Ð¾Ð´Ð°Ð´Ð¸ ÐºÐ¾Ñ€Ð¸ÑÐ½Ð¸Ñ‡ÐºÐ° ÑÐ¼ÐµÑ‚ÐºÐ°</string>
    <!-- ============ -->
    <string name="none">ÐÐ¸ÑˆÑ‚Ð¾</string>
    <string name="normal">ÐÐ¾Ñ€Ð¼Ð°Ð»Ð½Ð¾</string>
    <string name="all">Ð¡Ð¸Ñ‚Ðµ</string>
    <string name="max">ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼</string>
    <string name="min">ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼</string>
    <string name="subtitles_outline">ÐÐ°Ð´Ð²Ð¾Ñ€ÐµÑˆÐ½Ð° Ð»Ð¸Ð½Ð¸Ñ˜Ð°</string>
    <string name="subtitles_depressed">Ð”ÐµÐ¿Ñ€ÐµÑÐ¸Ñ€Ð°Ð½</string>
    <string name="subtitles_shadow">Ð¡ÐµÐ½ÐºÐ°</string>
    <string name="subtitles_raised">ÐŸÐ¾Ð´Ð¸Ð³Ð½Ð°Ñ‚</string>
</resources>



================================================
FILE: app/src/main/res/values-ml/strings.xml
================================================
[Binary file]


================================================
FILE: app/src/main/res/values-mo/string.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- For true intellectuals -->
    <string name="app_name">aauugghhaauuh</string>
    <string name="title_home">ooh</string>
    <string name="title_search">oouuh</string>
    <string name="title_downloads">ouuhhhooh ooh</string>
    <string name="title_settings">aaaghhoh aauugghh</string>
    <string name="search_hint">haaooh</string>
    <string name="search_poster_img_des">aaaaaah</string>
    <string name="no_data">oooohhoouuh</string>
    <string name="episode_more_options_des">aaaaaoouuhahhh ahh</string>
    <string name="go_back_img_des">oooohh aauuh</string>
    <string name="next_episode">ahhhaaaghh aaaaa</string>
    <string name="result_poster_img_des">ahaauugghh</string>
    <string name="result_tags">ahhh oouuh</string>
    <string name="result_share">aauuh</string>
    <string name="result_open_in_browser">oooohh oooohhhaaaoouuh</string>
    <string name="skip_loading">oooohhooooo</string>
    <string name="loading_chromecast">ooh aaahhu</string>
    <string name="type_watching">aaaghh ooo-ahah</string>
    <string name="type_on_hold">aaahhu</string>
    <string name="type_completed">ahhahooo</string>
    <string name="type_dropped">ooooo haa</string>
    <string name="type_plan_to_watch">aaahhuoh</string>
    <string name="type_none">aaaghh</string>
    <string name="play_movie_button">aaaaa aaaghh</string>
    <string name="play_torrent_button">aaaghhaaahhu aaaaa</string>
    <string name="pick_source">oha aauuh</string>
    <string name="pick_subtitle">ahooo ooo-ahah</string>
    <string name="reload_error">aaaghhahaaaaaaaaaaooh</string>
    <string name="go_back">aauugghhaaaghh</string>
    <string name="episode_poster_img_des">oouuhahoooooo-ahahoooohh</string>
    <string name="play_episode">aaaaa oh ohaouuhhh</string>
    <!--<string name="need_storage">ahouuhhhaaaaa ahhaaaghh ahhh</string>-->
    <string name="download">aauuhahh</string>
    <string name="download_storage_text">aauugghhahahhah</string>
    <string name="app_dubbed_text">ooooo</string>
    <string name="app_subbed_text">ahooo</string>
    <string name="popup_delete_file">ouuhhh</string>
    <string name="popup_play_file">ahhaauugghh</string>
    <string name="pref_disable_acra">ooo-ahahoohahoooooo-ahahouuhhhoouuhaaahhu</string>
    <string name="home_more_info">ahooo a aaaghhouuhhh</string>
    <string name="home_expanded_hide">oh ahhh</string>
    <string name="home_main_poster_img_des">ahhhahaaaaaahhhaaaghh</string>
    <string name="home_play">ooo-ahahouuhhh</string>
    <string name="home_info">aauugghh</string>
    <string name="home_next_random_img_des">aoooohh</string>
    <string name="home_change_provider_img_des">ah ohaaaaghh aaahhu</string>
    <string name="filter_bookmarks">aaaghh aaaghhoouuh</string>
    <string name="error_bookmarks_text">oouuh ooh</string>
    <string name="action_remove_from_bookmarks">aauuh ooh</string>
    <string name="sort_apply">oouuhaooo-ahah</string>
    <string name="sort_cancel">oooohh</string>
    <string name="player_speed">oouuh aauuh oha</string>
    <string name="subtitles_settings">ouuhhhooooooh ooo-ahah</string>
    <string name="subs_text_color">ohaouuhhh</string>
    <string name="subs_outline_color">ahh oouuh</string>
    <string name="subs_background_color">aaaghh aahooo</string>
    <string name="subs_window_color">oouuhoooohhah aauugghh</string>
    <string name="subs_edge_type">aaaaaooh</string>
    <string name="subs_subtitle_elevation">oooohhaaaaghh ooh ahhh</string>
    <string name="preview_background_img_des">ahoooooo-ahah ohaaaaaaauuh</string>
    <string name="subs_font">ooo-ahah</string>
    <string name="search_provider_text_providers">aauuhaauugghhahhh ohaauugghhouuhhh</string>
    <string name="search_provider_text_types">ahhhahoooohhaa ahhhoohahh</string>
    <string name="benene_count_text">%d ooo-ahah ooooo ahhhahooo aauuhah ouuhhh</string>
    <string name="benene_count_text_none">oouuhoooooahhaaahhu</string>
    <string name="subs_auto_select_language">oooohhaaaaa ahhhahh oooohh</string>
    <string name="subs_download_languages">ahaaahhu aahoooaauugghh aaaghhoha</string>
    <string name="subs_hold_to_reset_to_default">oohoohohaoha haaohaauugghhaaahhuoouuhahhaaaghh</string>
    <string name="continue_watching">ahhh ahhhooo-ahah</string>
    <string name="action_remove_watching">aaaaaooooo</string>
    <string name="action_open_watching">ahooo ooo-ahah</string>
    <string name="vpn_might_be_needed">ouuhhh aaahhuooh haaaauugghhahoooaaahhuooo-ahahouuhhhaaahhuaaaghh haa</string>
    <string name="vpn_torrent">aaaghh aaaaaaaahhuahhhooo-ahahahh aaaaa ahooo oha ahooo</string>
    <string name="torrent_plot">ahooo ooh oooohh</string>
    <string name="normal_no_plot">aauugghhoohoohohaooooo oooohh</string>
    <string name="torrent_no_plot">ahaaaghh oha oouuhooo-ahah</string>
    <string name="picture_in_picture">ohaahhooooo</string>
    <string name="picture_in_picture_des">ooooooohhaa ouuhhh ouuhhhohahh oh ahoooaaahhuaoooooooo-ahahahh</string>
    <string name="player_size_settings">oouuhaoouuh aaaaa aauuhohahhh oooooaaaghhoh oh aaaaa</string>
    <string name="player_size_settings_des">aaaghhaaahhuahooo oha aaaghh</string>
    <string name="player_subtitles_settings">ahhhaauugghh</string>
    <string name="player_subtitles_settings_des">oha ooh ouuhhh oooohhahhh ouuhhh</string>
    <string name="eigengraumode_settings">haaahhh ahoouuh</string>
    <string name="eigengraumode_settings_des">haaoooohhaaahhuoha ouuhhh ah oouuh ohoohaaahhu</string>
    <string name="swipe_to_seek_settings">ohahaaaauugghh ahooo aaahhu</string>
    <string name="swipe_to_seek_settings_des">aaaghh aaaghhohahooooo ouuhhh oouuh ooo-ahahahooo-ahah ohaaaaaghh</string>
    <string name="swipe_to_change_settings">aaaaaahhaaahhuoouuhaaaaa aahooo</string>
    <string name="swipe_to_change_settings_des">ohahhaaahhuoh ooo-ahahahhhooo-ahah aaaghha oooohhoouuh aaaghhaaaghhooo-ahah</string>
    <string name="double_tap_to_seek_settings">ahaauuhaaaaaooooo ahooo aauuh aaaghhaooo-ahah</string>
    <string name="search">aauuh</string>
    <string name="settings_info">aauugghh ah</string>
    <string name="advanced_search">aah ouuhhhooo-ahah aaaghh</string>
    <string name="advanced_search_des">aauugghh ahahooo ouuhhhahh ooh oouuhahoooahhaaahhu ohaooh oouuhooo-ahah</string>
    <string name="bug_report_settings_off">aaaaa ahhhahhohoouuhahoooaaaghh aahhhaaaaa</string>
    <string name="bug_report_settings_on">oouuhoooohh ahhooo-ahah</string>
    <string name="updates_settings">haa oohaauugghhooh oh</string>
    <string name="updates_settings_des">aaahhuoouuhouuhhh aauugghhahaaaghhoohahhoooohhouuhhh</string>
    <string name="uprereleases_settings">aaaghh ahhhahoooooo-ahah aaaghh</string>
    <string name="uprereleases_settings_des">ahhh ooo-ahahahhahh ooooo aauugghh oooohhahhhahoooaoooohhouuhhh aaahhu</string>
    <string name="github">aauuhoha</string>
    <string name="lightnovel">ooo-ahahoh ohaaauugghh ahhh haaahooo</string>
    <string name="anim">ooooohaa ohaaaaaaahoooahoooaaaghh</string>
    <string name="discord">ooooohaa ahhh aauuhahhahh</string>
    <string name="benene">aaaaaoooooaoouuhaauugghhaauuh</string>
    <string name="benene_des">ahooo aaaghh</string>
    <string name="app_language">haaooh</string>
    <string name="no_chromecast_support_toast">aauugghhoh ouuhhh ohaaauugghhaaahhuoouuhah</string>
    <string name="no_links_found_toast">oh ohaaaaghhah ahhha</string>
    <string name="copy_link_toast">ooh oouuh ahoooah ohaa oh ouuhhh</string>
    <string name="play_episode_toast">ouuhhhoouuh ouuhhh</string>
    <string name="subs_default_reset_toast">haaahhh ooo-ahah haaoh haaooh</string>
    <string name="acra_report_toast">oooooahoohaaaghh oouuhoooohhaaaaaoha ohaaauugghh oohaaaaaahooo ooo-ahah aaaaaa ahooo</string>
    <string name="error_loading_links_toast">ahooo oouuhoooohh oooohhaaaghh oouuh</string>
    <string name="season">ooo-ahah</string>
    <string name="no_season">aauuh ohaahooo</string>
    <string name="episode">ahhhaaahhu</string>
    <string name="episodes">ahhh ooooo</string>
    <string name="season_short">H</string>
    <string name="episode_short">A</string>
    <string name="delete_file">ooha ohahaaahoooa ahahooo</string>
    <string name="delete">oooooah</string>
    <string name="delete_message">aahhaaaaaahooo aauuh aaahhuaooo-ahahoooohh aoouuhoohoohooo-ahah</string>
    <string name="status_ongoing">aaaghhaaaaa</string>
    <string name="status_completed">aauuhaauuh</string>
    <string name="status">ahhhaaaaa</string>
    <string name="year">oohahahh oha</string>
    <string name="rating">ah ooooo</string>
    <string name="duration">ahhhooh</string>
    <string name="site">ah oha</string>
    <string name="synopsis">aauugghh ohaaauugghh</string>
    <string name="queued">haaouuhhh</string>
    <string name="no_subtitles">ahaaaaaaaaaahaaaauugghh</string>
    <string name="default_subtitles">ahooooh</string>
    <string name="free_storage">ooo-ahahaaaaa</string>
    <string name="used_storage">ahhahhh</string>
    <string name="app_storage">aauugghh</string>
    <string name="movies">a oouuh</string>
    <string name="tv_series">ahh ooooo</string>
    <string name="cartoons">ahoooouuhhh</string>
    <string name="anime">aahooo</string>
    <string name="torrent">ah ooh</string>
    <string name="episode_action_chromecast_episode">aauugghhooo-ahah ohaaauugghh</string>
    <string name="episode_action_chromecast_mirror">aoohaaahhu ahouuhhh</string>
    <string name="episode_action_play_in_app">ooo-ahahaauuh aaahhu</string>
    <string name="episode_action_play_in_vlc">ooo-ahah ohaauuh</string>
    <string name="episode_action_play_in_browser">ahoha ooo-ahahohoohah oooohh</string>
    <string name="episode_action_copy_link">aauugghhahhaauugghh</string>
    <string name="episode_action_auto_download">aaaghhoooohh aaahhu ahooo</string>
    <string name="episode_action_download_mirror">ohooo-ahahaohaohahhhoouuh</string>
    <string name="episode_action_reload_links">ahoooaaahhuahaaahhuoha</string>
    <string name="no_update_found">oohaaahhu ah ahhaaaaa ooo-ahah</string>
    <string name="check_for_update">ohaaaahhuhaaahhhaaahhu</string>
    <string name="video_lock">ooo-ahah</string>
    <string name="video_aspect_ratio_resize">ohaooo-ahahouuhhh</string>
    <string name="video_source">ahohooh</string>
    <string name="video_skip_op">aaaaaohaah ooh</string>
    <string name="dont_show_again">ahh haa ah ooooo</string>
    <string name="update">aaahhuooh ahh</string>
    <string name="download_started">aaaaa oooohh aauugghh</string>
    <string name="download_failed">aaaghhahhooo-ahahahhha aaaghh</string>
    <string name="downloaded">ooo-ahahaaaghh</string>
    <string name="downloading">oohahaaoouuh</string>
    <string name="download_paused">aaahhuooo-ahahhaaa</string>
    <string name="download_canceled">ooo-ahah aaaghhahooo</string>
    <string name="download_done">aaaghhaaaaa ohouuhhh</string>
    <string name="popup_resume_download">aaaghhahhhooooo oohaaaaa</string>
    <string name="popup_pause_download">aauugghhaaaaa haa</string>
    <string name="pause">ooh aaaaa</string>
    <string name="resume">oouuh haa</string>
    <string name="double_tap_to_seek_settings_des">oohahaha hahha ooooohaha</string>
    <string name="storage_error">oohahaha hahha ooooohaha haaoou</string>
    <string name="use_system_brightness_settings">u ahhu uuuh hau  uaohuau</string>
    <string name="use_system_brightness_settings_des">aahuuouhh ouh hhhah hhaohuhha</string>
    <string name="subs_font_size">a auoo ohauh</string>
    <string name="source_error">uhaauauau  ahuuouaha</string>
    <string name="remote_error">auuuha h a ahuhaaaa</string>
    <string name="render_error">uaoh   uhu uahaaaaoo</string>
    <string name="unexpected_error">uauhah u  aao u oah</string>
    <string name="watch_quality_pref">h u   ahahh aoou  ha</string>
    <string name="dns_pref">haoooo aaoou uou ah</string>
    <string name="dns_pref_summary">oahuouooaouoa ouuhh</string>
    <string name="display_subbed_dubbed_settings">o ouou uhauuuoaah h</string>
    <string name="resize_fit">ou aouhouo aaooao hh</string>
    <string name="resize_fill">hhauhohhuu  au aaohu</string>
    <string name="resize_zoom">uhuoh o   a ohahuhohoa hah</string>
    <string name="provider_lang_settings">ua hu ouo o aoau hah ah</string>
    <string name="legal_notice">ah huu  oouhhau aoaoaaohoo ha</string>
    <string name="general">a ahu uoo uoahuo   uo</string>
    <string name="app_layout">uo u ohouao</string>
    <string name="automatic">uuoouhh hhuhuuh ouhoaao hau aouo</string>
    <string name="tv_layout">uha uh  huo uooaah u</string>
    <string name="phone_layout">u ooah uo ahauao huhuu hauu h</string>
    <string name="primary_color_settings">a ou oh ouhuouhoaaha</string>
    <string name="show_fillers_settings">aaooohhouhhha hauauuu</string>
    <string name="new_update_format">aaaaaaa uuuuuu\n%s -> %s</string>
</resources>


================================================
FILE: app/src/main/res/values-nl/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <string name="app_name">CloudStream</string>
    <string name="title_home">Home</string>
    <string name="title_search">Zoeken</string>
    <string name="title_downloads">Downloads</string>
    <string name="title_settings">Instellingen</string>
    <string name="search_hint">Zoekenâ€¦</string>
    <string name="search_poster_img_des">Poster</string>
    <string name="no_data">Geen gegevens</string>
    <string name="episode_more_options_des">Meer Opties</string>
    <string name="go_back_img_des">Ga terug</string>
    <string name="next_episode">Volgende aflevering</string>
    <string name="result_poster_img_des">Poster</string>
    <string name="synopsis">Verhaal</string>
    <string name="result_tags">Genres</string>
    <string name="result_share">Deel</string>
    <string name="result_open_in_browser">Openen in Browser</string>
    <string name="skip_loading">Laden overslaan</string>
    <string name="loading_chromecast">Ladenâ€¦</string>

    <string name="type_watching">Aan het kijken</string>
    <string name="type_on_hold">In de wacht</string>
    <string name="type_completed">Voltooid</string>
    <string name="type_dropped">Dropped</string>
    <string name="type_plan_to_watch">Plan om te kijken</string>
    <string name="type_none">Geen</string>

    <string name="play_movie_button">Film afspelen</string>
    <string name="play_torrent_button">Stream Torrent</string>
    <string name="pick_source">Bronnen</string>
    <string name="pick_subtitle">Ondertitels</string>
    <string name="reload_error">Probeer verbinding opnieuwâ€¦</string>
    <string name="go_back">Ga terug</string>
    <string name="episode_poster_img_des">Afleveringsposter</string>
    <string name="play_episode">Aflevering afspelen</string>
    <!--<string name="need_storage">Toestaan om afleveringen te downloaden</string>-->
    <string name="download">Download</string>
    <string name="error_loading_links_toast">Fout bij laden van links</string>
    <string name="download_storage_text">Interne opslag</string>
    <!--<string name="options">Opties</string>-->

    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>

    <string name="popup_delete_file">Bestand verwijderen</string>
    <string name="popup_play_file">Bestand afspelen</string>
    <string name="popup_resume_download">Downloaden Hervatten</string>
    <string name="popup_pause_download">Download pauzeren</string>

    <string name="acra_report_toast">Sorry, de applicatie is gecrasht. Een anoniem bugrapport zal naar de ontwikkelaars worden gestuurd</string>
    <string name="pref_disable_acra">Automatische bugrapportage uitschakelen</string>
    <string name="home_more_info">Meer informatie</string>
    <string name="home_expanded_hide">Verberg</string>
    <string name="home_main_poster_img_des">Hoofd Poster</string>
    <string name="home_play">Speel</string>
    <string name="home_info">Info</string>
    <string name="home_next_random_img_des">Volgende willekeurig</string>
    <string name="home_change_provider_img_des">Aanbieder wijzigen</string>
    <string name="filter_bookmarks">Bladwijzers filteren</string>
    <string name="error_bookmarks_text">Bladwijzers</string>
    <string name="action_remove_from_bookmarks">Verwijderen</string>
    <string name="play_episode_toast">Aflevering afspelen</string>
    <string name="sort_apply">Toepassen</string>
    <string name="sort_cancel">Annuleren</string>
    <string name="player_speed">Afspelen Snelhei</string>
    <string name="subtitles_settings">Afspeler ondertiteling Instellingen</string>
    <string name="subs_text_color">Tekst Kleur</string>
    <string name="subs_outline_color">Omtrekkleur</string>
    <string name="subs_background_color">Achtergrond Kleur</string>
    <string name="subs_window_color">Vensterkleur</string>
    <string name="subs_edge_type">Randtype</string>
    <string name="subs_subtitle_elevation">Ondertitelhoogte</string>
    <string name="subs_default_reset_toast">Reset naar standaardwaarde</string>
    <string name="preview_background_img_des">Voorbeeld Achtergrond</string>
    <string name="subs_font">Lettertype</string>
    <string name="search_provider_text_providers">Zoeken met providers</string>
    <string name="search_provider_text_types">Zoeken met types</string>
    <string name="benene_count_text">%d Benenes gegeven aan ontwikkelaars</string>
    <string name="benene_count_text_none">Geen Benenes gegeven</string>

    <string name="subs_auto_select_language">Taal automatisch selecteren</string>
    <string name="subs_download_languages">Talen downloaden</string>
    <string name="subs_hold_to_reset_to_default">Houd ingedrukt om naar standaard te resetten</string>
    <string name="continue_watching">Doorgaan met kijken</string>

    <string name="action_remove_watching">Verwijderen</string>
    <string name="action_open_watching">Meer informatie </string>

    <string name="vpn_might_be_needed">Een VPN kan nodig zijn om deze provider correct te laten werken</string>
    <string name="vpn_torrent">Deze provider is een torrent, een VPN wordt aanbevolen</string>
    <string name="torrent_plot">Beschrijving</string>
    <string name="normal_no_plot">Geen plot gevonden</string>
    <string name="torrent_no_plot">Geen beschrijving gevonden</string>
    
    <string name="picture_in_picture">Beeld-in-beeld</string>
    <string name="picture_in_picture_des">Blijft afspelen in een miniatuurspeler bovenop andere apps</string>
    <string name="player_size_settings_des">Verwijder de zwarte randen</string>
    <string name="player_size_settings">Knop voor formaat wijzigen</string>
    <string name="player_subtitles_settings">Ondertiteling</string>
    <string name="player_subtitles_settings_des">Ondertiteling instellingen</string>
    <string name="eigengraumode_settings">Eigengrau modus</string>
    <string name="eigengraumode_settings_des">Voegt de snelheid optie toe in de speler</string>
    <string name="swipe_to_seek_settings">Veeg om te zoeken</string>
    <string name="swipe_to_seek_settings_des">Veeg naar links of rechts om de tijd in de videoplayer te regelen</string>
    <string name="swipe_to_change_settings">wissen om instellingen te wijzigen</string>
    <string name="swipe_to_change_settings_des">Veeg aan de linker- of rechterkant om de helderheid of het volume te wijzigen</string>
    <string name="double_tap_to_seek_settings">Dubbeltik om te zoeken</string>
    <string name="double_tap_to_seek_settings_des">Tik twee keer aan de rechter- of linkerkant om vooruit of achteruit te zoeken</string>
    <string name="search">Zoeken</string>
    <string name="advanced_search">Geavanceerd zoeken</string>
    <string name="advanced_search_des">Geeft u de zoekresultaten gescheiden per aanbieder</string>
    <string name="bug_report_settings_off">Stuurt alleen gegevens bij crashes</string>
    <string name="bug_report_settings_on">Zendt geen gegevens</string>
    <string name="updates_settings">Toon app updates</string>
    <string name="updates_settings_des">Automatisch zoeken naar nieuwe updates bij het opstarten</string>
    <string name="uprereleases_settings">Update naar pre-releases</string>
    <string name="uprereleases_settings_des">Zoeken naar prerelease updates in plaats van alleen volledige releases</string>
    <string name="github">Github</string>
    <string name="lightnovel">Light novel app van dezelfde ontwikkelaars</string>
    <string name="anim">Anime app van dezelfde ontwikkelaars</string>
    <string name="discord">Word lid van ons Discord kanaal</string>
    <string name="benene">Geef een banaan aan de ontwikkelaars</string>
    <string name="benene_des">Gegeven banaan</string>

    <string name="app_language">App Taal</string>

    <string name="no_chromecast_support_toast">Deze provider heeft geen Chromecast ondersteuning</string>
    <string name="no_links_found_toast">Geen links gevonden</string>
    <string name="copy_link_toast">Link gekopieerd naar klembord</string>
    
    <string name="season">Seizoen</string>
    <string name="no_season">Geen seizoen</string>
    <string name="episode">Aflevering</string>
    <string name="episodes">Afleveringen</string>
    <string name="season_short">A</string>
    <string name="episode_short">A</string>

    <string name="delete_file">Bestand verwijderen</string>
    <string name="delete">Verwijderen</string>
    <string name="pause">Pauze</string>
    <string name="resume">Hervat</string>
    <string name="delete_message">Dit wordt zeker permanent verwijderd %s\nWeet u het zeker?</string>

    <string name="status_ongoing">Lopend</string>
    <string name="status_completed">Voltooid</string>
    <string name="status">Status</string>
    <string name="year">Jaar</string>
    <string name="rating">Beoordeling</string>
    <string name="duration">Duur</string>
    <string name="site">Site</string>

    <string name="queued">in de wachtrij</string>
    <string name="no_subtitles">Geen ondertitels</string>
    <string name="default_subtitles">Standaard</string>

    <string name="free_storage">Vrij</string>
    <string name="used_storage">Gebruikt</string>
    <string name="app_storage">App</string>

    <string name="movies">Films</string>
    <string name="tv_series">TV series</string>
    <string name="cartoons">tekenfilms</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrent</string>

    <string name="source_error">Bronfout</string>
    <string name="remote_error">Externe fout</string>
    <string name="render_error">Rendererfout</string>
    <string name="unexpected_error">Onverwachte speler fout</string>
    <string name="storage_error">Downloadfout, controleer opslagrechten</string>

    <string name="episode_action_chromecast_episode">Chromecast aflevering</string>
    <string name="episode_action_chromecast_mirror">Chromecast spiegel</string>
    <string name="episode_action_play_in_app">Afspelen In App</string>
    <string name="episode_action_play_in_vlc">Afspelen in VLC</string>
    <string name="episode_action_play_in_browser">Afspelen in browser</string>
    <string name="episode_action_copy_link">Kopieer Link</string>
    <string name="episode_action_auto_download">Automatisch downloaden</string>
    <string name="episode_action_download_mirror">Spiegel downloaden</string>
    <string name="episode_action_reload_links">Herlaad Links</string>

    <string name="no_update_found">Geen update gevonden</string>
    <string name="check_for_update">Controleren op updates</string>

    <string name="video_lock">Slot</string>
    <string name="video_aspect_ratio_resize">Formaat wijzigen</string>
    <string name="video_source">Bron</string>
    <string name="video_skip_op">OP overslaan</string>

    <string name="dont_show_again">Niet meer weergeven</string>
    <string name="update">Update</string>
    <string name="watch_quality_pref">Voorkeur kijk kwaliteit</string>
 </resources>



================================================
FILE: app/src/main/res/values-no/strings.xml
================================================
<resources>
    <!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">Plakat</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">Episode Plakat</string>
    <string name="home_main_poster_img_des">Main Plakat</string>
    <string name="home_next_random_img_des">Neste tilfeldig</string>
    <string name="go_back_img_des">GÃ¥ tilbake</string>
    <string name="home_change_provider_img_des">Bytt leverandÃ¸r</string>
    <string name="preview_background_img_des">ForhÃ¥ndsvisning Bakgrunn</string>

    <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">Avspillingshastighet (%.2fx)</string>
    <string name="rated_format" formatted="true">Vurdert: %.1f</string>
    <string name="new_update_format" formatted="true">Ny oppdatering funnet!\n%s -> %s</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">Hjem</string>
    <string name="title_search">SÃ¸k</string>
    <string name="title_downloads">Nedlastinger</string>
    <string name="title_settings">Innstillinger</string>

    <string name="search_hint">SÃ¸kâ€¦</string>
    <string name="no_data">Nei informasjon</string>
    <string name="episode_more_options_des">Flere valg</string>
    <string name="next_episode">Neste episode</string>
    <string name="result_tags">Sjangere</string>
    <string name="result_share">Dele</string>
    <string name="result_open_in_browser">Ã…pne i nettleseren</string>
    <string name="skip_loading">Hopp over</string>
    <string name="loading_chromecast">Laster innâ€¦</string>

    <string name="type_watching">Ser pÃ¥</string>
    <string name="type_on_hold">PÃ¥ vent</string>
    <string name="type_completed">FullfÃ¸rt</string>
    <string name="type_dropped">Falt</string>
    <string name="type_plan_to_watch">Planlegg Ã¥ se</string>
    <string name="type_none">Ingen</string>

    <string name="play_movie_button">Spill filmer</string>
    <string name="play_torrent_button">StrÃ¸m Torrent</string>
    <string name="pick_source">Kilder</string>
    <string name="pick_subtitle">Undertekster</string>
    <string name="reload_error">PrÃ¸v tilkoblingen pÃ¥ nyttâ€¦</string>
    <string name="go_back">GÃ¥ tilbake</string>
    <string name="play_episode">Spille Episode</string>
    <!--<string name="need_storage">Tillat Ã¥ laste ned episoder</string>-->

    <string name="download">nedlasting</string>
    <string name="downloaded">Lastet ned</string>
    <string name="downloading">Nedlasting pÃ¥gÃ¥r</string>
    <string name="download_paused">Nedlasting stoppet midlertidig</string>
    <string name="download_started">Nedlasting startet</string>
    <string name="download_failed">Nedlasting mislyktes</string>
    <string name="download_canceled">Nedlasting avbrutt</string>
    <string name="download_done">Last ned Ferdig</string>

    <string name="error_loading_links_toast">feil ved lasting av lenker</string>
    <string name="download_storage_text">Intern lagring</string>

    <string name="app_dubbed_text">Dubbet</string>
    <string name="app_subbed_text">Subbed</string>

    <string name="popup_delete_file">Slett fil</string>
    <string name="popup_play_file">Spill av fil</string>
    <string name="popup_resume_download">Fortsett nedlasting</string>
    <string name="popup_pause_download">Stopp nedlastingen</string>

    <string name="pref_disable_acra">Deaktiver automatisk feilrapportering</string>
    <string name="home_more_info">Mer informasjon</string>
    <string name="home_expanded_hide">Gjemme seg</string>
    <string name="home_play">Spille</string>
    <string name="home_info">Informasjon</string>
    <string name="filter_bookmarks">Filtrer bokmerker</string>
    <string name="error_bookmarks_text">Bokmerker</string>
    <string name="action_remove_from_bookmarks">Ta bort</string>
    <string name="sort_apply">SÃ¸ke om</string>
    <string name="sort_cancel">Avbryt</string>
    <string name="player_speed">Spillerhastighet</string>

    <string name="subtitles_settings">Innstillinger for teksting</string>
    <string name="subs_text_color">Tekstfarge</string>
    <string name="subs_outline_color">Konturfarge</string>
    <string name="subs_background_color">Bakgrunnsfarge</string>
    <string name="subs_window_color">Vindusfarge</string>
    <string name="subs_edge_type">Kanttype</string>
    <string name="subs_subtitle_elevation">Undertekst hÃ¸yde</string>
    <string name="subs_font">Skrift</string>
    <string name="subs_font_size">SkriftstÃ¸rrelse</string>

    <string name="search_provider_text_providers">SÃ¸k med leverandÃ¸rer</string>
    <string name="search_provider_text_types">SÃ¸k med typer</string>

    <string name="benene_count_text">%d Benenes gitt til utvikler</string>
    <string name="benene_count_text_none">Nei Benenes gitt</string>

    <string name="subs_auto_select_language">Velg sprÃ¥k automatisk</string>
    <string name="subs_download_languages">Last ned sprÃ¥k</string>
    <string name="subs_hold_to_reset_to_default">Hold inne for Ã¥ tilbakestille</string>
    <string name="continue_watching">Fortsett Ã¥ se</string>

    <string name="action_remove_watching">ta bort</string>
    <string name="action_open_watching">Mer informasjon</string>

    <string name="vpn_might_be_needed">En VPN kan vÃ¦re nÃ¸dvendig for at denne leverandÃ¸ren skal fungere</string>
    <string name="vpn_torrent">Denne leverandÃ¸ren er en torrent, en VPN anbefales</string>
    <string name="torrent_plot">Beskrivelse</string>
    <string name="normal_no_plot">Fant ikke tomt</string>
    <string name="torrent_no_plot">Ingen beskrivelse funnet</string>

    <string name="picture_in_picture">Bilde-i-bilde</string>
    <string name="picture_in_picture_des">Fortsetter avspilling i en miniatyr spiller pÃ¥ toppen av andre apper</string>
    <string name="player_size_settings">Knapp for stÃ¸rrelse pÃ¥ spiller</string>
    <string name="player_size_settings_des">Fjern de svarte kantene</string>
    <string name="player_subtitles_settings">Undertekster</string>
    <string name="player_subtitles_settings_des">Innstillinger for spillerens teksting</string>
    <string name="eigengraumode_settings">Eigengravy Modus</string>
    <string name="eigengraumode_settings_des">Legger til hastighetsalternativ i spilleren</string>
    <string name="swipe_to_seek_settings">Sveip for Ã¥ sÃ¸ke</string>
    <string name="swipe_to_seek_settings_des">Sveip til venstre eller hÃ¸yre for Ã¥ kontrollere tiden i videospilleren</string>
    <string name="swipe_to_change_settings">Sveip for Ã¥ endre innstillinger</string>
    <string name="swipe_to_change_settings_des">Sveip pÃ¥ venstre eller hÃ¸yre side for Ã¥ endre lysstyrke eller volum</string>
    <string name="double_tap_to_seek_settings">Dobbelttrykk til Ã¥ sÃ¸ke</string>
    <string name="double_tap_to_seek_settings_des">Trykk to ganger pÃ¥ hÃ¸yre eller venstre for Ã¥ sÃ¸ke fremover eller bakover</string>
    <string name="use_system_brightness_settings">Bruk systemets lysstyrke</string>
    <string name="use_system_brightness_settings_des">Bruk systemlysstyrke i appspilleren i stedet for et mÃ¸rkt overlegg</string>

    <string name="search">SÃ¸k</string>
    <string name="settings_info">Informasjon</string>
    <string name="advanced_search">Avansert sÃ¸k</string>
    <string name="advanced_search_des">Gir deg sÃ¸keresultatene atskilt etter leverandÃ¸r</string>
    <string name="bug_report_settings_off">Sender bare rapportere om krasjer</string>
    <string name="bug_report_settings_on">Sender ingen rapportere</string>
    <string name="show_fillers_settings">Vis filler-episode til anime</string>
    <string name="updates_settings">Vis appoppdateringer</string>
    <string name="updates_settings_des">SÃ¸k automatisk etter nye oppdateringer</string>
    <string name="uprereleases_settings">Oppdatering til forhÃ¥ndsutgivelser</string>
    <string name="uprereleases_settings_des">SÃ¸k etter oppdateringer fÃ¸r utgivelse i stedet for fullstendige utgivelser</string>
    <string name="github">Github</string>
    <string name="lightnovel">Light novel app av samme devs</string>
    <string name="anim">Anime app av samme devs</string>
    <string name="discord">Bli med Discord</string>
    <string name="benene">Gi en benene til devs</string>
    <string name="benene_des">Gitt benene</string>

    <string name="app_language">appsprÃ¥k</string>

    <string name="no_chromecast_support_toast">Denne leverandÃ¸ren har ingen Chromecast-stÃ¸tte</string>
    <string name="no_links_found_toast">Ingen lenker funnet</string>
    <string name="copy_link_toast">Linken er kopiert til utklippstavlen</string>
    <string name="play_episode_toast">spille episode</string>
    <string name="subs_default_reset_toast">tilbakestill standardverdien</string>
    <string name="acra_report_toast">Beklager, programmet krasjet. En anonym feilrapport vil bli sendt til utviklerne</string>
    <string name="season">Sesong</string>
    <string name="no_season">Ingen sesong</string>
    <string name="episode">Episode</string>
    <string name="episodes">Episoder</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>

    <string name="delete_file">Slett fil</string>
    <string name="delete">Slett</string>
    <string name="pause">Stopp</string>
    <string name="resume">Gjenoppta</string>
    <string name="delete_message">Dette vil slette %s\nEr du sikker?</string>

    <string name="status_ongoing">PÃ¥gÃ¥ende</string>
    <string name="status_completed">FullfÃ¸rt</string>
    <string name="status">Posisjon</string>
    <string name="year">Ã…r</string>
    <string name="rating">Vurdering</string>
    <string name="duration">Varighet</string>
    <string name="site">Nettstedet</string>
    <string name="synopsis">Om</string>

    <string name="queued">I kÃ¸</string>
    <string name="no_subtitles">Ingen undertekster</string>
    <string name="default_subtitles">Misligholde</string>

    <string name="free_storage">Tilgjengelig</string>
    <string name="used_storage">Brukt</string>
    <string name="app_storage">applikasjon</string>

    <string name="movies">Filmer</string>
    <string name="tv_series">TV-serier</string>
    <string name="cartoons">Tegneserier</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrent</string>

    <string name="source_error">Kildefeil</string>
    <string name="remote_error">Fjernfeil</string>
    <string name="render_error">Gjengivelsesfeil</string>
    <string name="unexpected_error">Uventet spillerfeil</string>
    <string name="storage_error">Nedlastingsfeil, sjekk lagringstillatelser</string>

    <string name="episode_action_chromecast_episode">StÃ¸pt Episode</string>
    <string name="episode_action_chromecast_mirror">StÃ¸pt Speil</string>
    <string name="episode_action_play_in_app">Spill i appen</string>
    <string name="episode_action_play_in_vlc">Spill i VLC</string>
    <string name="episode_action_play_in_browser">Spill i nettleseren</string>
    <string name="episode_action_copy_link">Kopier link</string>
    <string name="episode_action_auto_download">Automatisk nedlasting</string>
    <string name="episode_action_download_mirror">Last ned speil</string>
    <string name="episode_action_reload_links">Last inn lenker pÃ¥ nytt</string>

    <string name="no_update_found">Ingen oppdatering funnet</string>
    <string name="check_for_update">Se etter oppdatering</string>

    <string name="video_lock">LÃ¥se</string>
    <string name="video_aspect_ratio_resize">Endre stÃ¸rrelse</string>
    <string name="video_source">Kilde</string>
    <string name="video_skip_op">Hoppe OP</string>

    <string name="dont_show_again">Ikke vis igjen</string>
    <string name="update">Oppdater</string>
    <string name="watch_quality_pref">Foretrukket klokkekvalitet</string>
    <string name="dns_pref">DNS rundt HTTPS</string>
    <string name="dns_pref_summary">Nyttig til omgÃ¥ InternettleverandÃ¸r hinder</string>
    <string name="display_subbed_dubbed_settings">Vis dubbet/subbed Anime</string>

    <string name="resize_fit">Tilpass til skjermen</string>
    <string name="resize_fill">TÃ¸ye ut</string>
    <string name="resize_zoom">Zoome</string>
    <string name="general">Grunnleggende</string>
    <string name="provider_lang_settings">LeverandÃ¸r SprÃ¥k</string>
    <string name="app_layout">App Oppsett</string>
    <string name="automatic">Automatisk</string>
    <string name="tv_layout">Tv Oppsett</string>
    <string name="phone_layout">Mobile Oppsett</string>
    <string name="primary_color_settings">PrimÃ¦r Farge</string>
    <string name="app_theme_settings">App Tema</string>
    <string name="preferred_media_settings">Foretrukket Videoinnhold</string>
    
    <string name="legal_notice" translatable="false">Disclaimer</string>
    <string name="legal_notice_key" translatable="false">legal_notice_key</string>
    <string name="legal_notice_text" translatable="false">Any legal issues regarding the content on this application
        should be taken up with the actual file hosts and providers themselves as we are not affiliated with them.

        In case of copyright infringement, please directly contact the responsible parties or the streaming websites.

        The app is purely for educational and personal use.

        CloudStream 3 does not host any content on the app, and has no control over what media is put up or taken down.
        CloudStream 3 functions like any other search engine, such as Google. CloudStream 3 does not host, upload or
        manage any videos, films or content. It simply crawls, aggregates and displayes links in a convenient,
        user-friendly interface.

        It merely scrapes 3rd-party websites that are publicly accessable via any regular web browser. It is the
        responsibility of user to avoid any actions that might violate the laws governing his/her locality. Use
        CloudStream 3 at your own risk.
    </string>
</resources>



================================================
FILE: app/src/main/res/values-pl/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <string name="player_speed_text_format" formatted="true">PrÄ™dkoÅ›Ä‡ (%.2fx)</string>
    <string name="rated_format" formatted="true">Ocena: %.1f</string>
    <string name="new_update_format" formatted="true">Znaleziono nowÄ… aktualizacjÄ™!\n%s -> %s</string>
    <string name="filler" formatted="true">Filler</string>
    <string name="duration_format" formatted="true">%d min</string>

    <string name="result_poster_img_des">Plakat</string>
    <string name="episode_poster_img_des">Plakat odcinka</string>
    <string name="home_main_poster_img_des">GÅ‚Ã³wny plakat</string>
    <string name="home_next_random_img_des">NastÄ™pny losowy</string>
    <string name="go_back_img_des">Wstecz</string>
    <string name="home_change_provider_img_des">ZmieÅ„ dostawcÄ™</string>
    <string name="preview_background_img_des">PoglÄ…d tÅ‚a</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">GÅ‚Ã³wna</string>
    <string name="title_search">Szukaj</string>
    <string name="title_downloads">Pobrane</string>
    <string name="title_settings">Ustawienia</string>

    <string name="search_hint">Szukajâ€¦</string>
    <string name="no_data">Brak danych</string>
    <string name="episode_more_options_des">WiÄ™cej opcji</string>
    <string name="next_episode">NastÄ™pny odcinek</string>
    <string name="result_tags">Gatunki</string>
    <string name="result_share">UdostÄ™pnij</string>
    <string name="result_open_in_browser">OtwÃ³rz w przeglÄ…darce</string>
    <string name="skip_loading">PomiÅ„ Å‚adowanie</string>
    <string name="loading_chromecast">Åadowanie...</string>

    <string name="type_watching">W trakcie</string>
    <string name="type_on_hold">Zawieszone</string>
    <string name="type_completed">ZakoÅ„czone</string>
    <string name="type_dropped">Porzucone</string>
    <string name="type_plan_to_watch">Planowane</string>
    <string name="type_none">Brak</string>
    <string name="type_re_watching">Ponowne oglÄ…danie</string>

    <string name="play_movie_button">OdtwÃ³rz film</string>
    <string name="play_torrent_button">OtwÃ³rz torrent</string>
    <string name="pick_source">Å¹rÃ³dÅ‚a</string>
    <string name="pick_subtitle">Napisy</string>
    <string name="reload_error">PoÅ‚Ä…cz ponownieâ€¦</string>
    <string name="go_back">Wstecz</string>
    <string name="play_episode">OdtwÃ³rz odcinek</string>
    <!--<string name="need_storage">Allow to download episodes</string>-->

    <string name="download">Pobierz</string>
    <string name="downloaded">Pobrane</string>
    <string name="downloading">Pobieranie</string>
    <string name="download_paused">Wstrzymano pobieranie</string>
    <string name="download_started">RozpoczÄ™to pobieranie</string>
    <string name="download_failed">BÅ‚Ä…d przy pobieraniu</string>
    <string name="download_canceled">Anulowano pobieranie</string>
    <string name="download_done">ZakoÅ„czono pobieranie</string>

    <string name="error_loading_links_toast">BÅ‚Ä…d przy Å‚adowaniu linkÃ³w</string>
    <string name="download_storage_text">PamiÄ™Ä‡ wewnÄ™trzna</string>

    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>

    <string name="popup_delete_file">UsuÅ„ plik</string>
    <string name="popup_play_file">OdtwÃ³rz plik</string>
    <string name="popup_resume_download">WznÃ³w pobieranie</string>
    <string name="popup_pause_download">Wstrzymaj pobieranie</string>

    <string name="pref_disable_acra">WyÅ‚Ä…cz przekazywanie bÅ‚Ä™dÃ³w</string>
    <string name="home_more_info">WiÄ™cej informacji</string>
    <string name="home_expanded_hide">Ukryj</string>
    <string name="home_play">OdtwÃ³rz</string>
    <string name="home_info">Informacje</string>
    <string name="filter_bookmarks">Filtruj zakÅ‚adki</string>
    <string name="error_bookmarks_text">ZakÅ‚adki</string>
    <string name="action_remove_from_bookmarks">UsuÅ„</string>
    <string name="sort_apply">Zastosuj</string>
    <string name="sort_cancel">Anuluj</string>
    <string name="player_speed">PrÄ™dkoÅ›Ä‡ odtwarzania</string>

    <string name="subtitles_settings">Ustawienia napisÃ³w</string>
    <string name="subs_text_color">Kolor tekstu</string>
    <string name="subs_outline_color">Kolor konturu</string>
    <string name="subs_background_color">Kolor tÅ‚a</string>
    <string name="subs_window_color">Kolor okna</string>
    <string name="subs_edge_type">Kolor krawÄ™dzi</string>
    <string name="subs_subtitle_elevation">Wzniesienie napisÃ³w</string>
    <string name="subs_font">Czcionka</string>
    <string name="subs_font_size">Rozmiar czcionki</string>

    <string name="search_provider_text_providers">Szukaj wedÅ‚ug dostawcÃ³w</string>
    <string name="search_provider_text_types">Szukaj wedÅ‚ug typÃ³w</string>

    <string name="benene_count_text">Dano %d bananÃ³w</string>
    <string name="benene_count_text_none">Brak bananÃ³w</string>

    <string name="subs_auto_select_language">Wybierz jÄ™zyk automatycznie</string>
    <string name="subs_download_languages">Pobieranie jÄ™zykÃ³w</string>
    <string name="subs_hold_to_reset_to_default">Przytrzymaj aby zresetowaÄ‡</string>
    <string name="continue_watching">Kontyntynuj oglÄ…danie</string>

    <string name="action_remove_watching">UsuÅ„</string>
    <string name="action_open_watching">WiÄ™cej informacji</string>

    <string name="vpn_might_be_needed">PoÅ‚Ä…czenie przez VPN moÅ¼e byÄ‡ wymagane</string>
    <string name="vpn_torrent">Ten dostawca jest torrentem, wskazane jest uÅ¼ycie poÅ‚Ä…czenia VPN</string>
    
    <string name="provider_info_meta">Metadane nie sÄ… dostarczane przez witrynÄ™, Å‚adowanie filmu nie powiedzie siÄ™, jeÅ›li nie ma ich w witrynie.</string>
    
    <string name="torrent_plot">Opis</string>
    <string name="normal_no_plot">Nie znaleziono opisu</string>
    <string name="torrent_no_plot">Nie znaleziono opisu</string>

    <string name="picture_in_picture">Obraz-w-obrazie</string>
    <string name="picture_in_picture_des">OglÄ…daj w maÅ‚ym, pÅ‚ywajÄ…cym okienku</string>
    <string name="player_size_settings">Przycisk zmiany rozmiaru</string>
    <string name="player_size_settings_des">Usuwanie czarnych ramek</string>
    <string name="player_subtitles_settings">Napisy</string>
    <string name="player_subtitles_settings_des">Ustawienia napisÃ³w</string>
    <string name="chromecast_subtitles_settings">Napisy Chromecast</string>
    <string name="chromecast_subtitles_settings_des">Ustawienia napisÃ³w Chromecast</string>

    <string name="eigengraumode_settings">Tryb Eigengrau</string>
    <string name="eigengraumode_settings_des">Ustawienia prÄ™dkoÅ›ci</string>
    <string name="swipe_to_seek_settings">Przesuwaj aby przeglÄ…daÄ‡</string>
    <string name="swipe_to_seek_settings_des">Przesuwaj w lewo lub prawo aby kontrolowaÄ‡ czas</string>
    <string name="swipe_to_change_settings">Przesuwaj aby zmieniÄ‡ ustawienia</string>
    <string name="swipe_to_change_settings_des">Przesuwaj po lewej lub prawej stronie aby zmieniÄ‡ jasnoÅ›Ä‡ i gÅ‚oÅ›noÅ›Ä‡</string>
    <string name="double_tap_to_seek_settings">PodwÃ³jne wciÅ›niÄ™cie aby przeglÄ…daÄ‡</string>
    <string name="double_tap_to_pause_settings">Stuknij dwukrotnie, aby wstrzymaÄ‡</string>
    <string name="double_tap_to_seek_settings_des">NaciÅ›nij 2 razy z prawej lub lewej strony aby przeglÄ…daÄ‡</string>
    <string name="double_tap_to_pause_settings_des">Stuknij na Å›rodku, aby wstrzymaÄ‡</string>
    <string name="use_system_brightness_settings">UÅ¼yj jasnoÅ›ci systemowej</string>
    <string name="use_system_brightness_settings_des">UÅ¼yj jasnoÅ›ci systemowej w odtwarzaczu aplikacji zamiast ciemnej nakÅ‚adki
    </string>
    
    <string name="restore_settings">Przywracanie danych z kopii zapasowej</string>
    <string name="killswitch_settings">Pobierz najnowsze metadane z Githuba</string>
    <string name="killswitch_settings_des">JeÅ›li chcesz mieÄ‡ dostÄ™p do wszystkich dostawcÃ³w (nawet tych uszkodzonych), wyÅ‚Ä…cz tÄ™ opcjÄ™</string>

    <string name="backup_settings">Kopia zapasowa danych</string>
    <string name="restore_success">Wczytano plik kopii zapasowej</string>
    <string name="restore_failed_format" formatted="true">Nie udaÅ‚o siÄ™ przywrÃ³ciÄ‡ danych z pliku %s</string>
    <string name="backup_success">Dane zapisane z powodzeniem</string>
    <string name="backup_failed">Brak uprawnieÅ„ do przechowywania, sprÃ³buj ponownien</string>
    <string name="backup_failed_error_format">BÅ‚Ä…d tworzenia kopii zapasowej %s</string>

    <string name="search">Szukaj</string>
    <string name="settings_info">Informacje</string>
    <string name="advanced_search">Zaawansowane wyszukiwanie</string>
    <string name="advanced_search_des">Szukaj z podziaÅ‚em na dostawcÃ³w</string>
    <string name="bug_report_settings_off">WysyÅ‚aj dane tylko przy awariach</string>
    <string name="bug_report_settings_on">Nie wysyÅ‚aj Å¼adnych danych</string>
    <string name="show_fillers_settings">PokaÅ¼ odcinek wypeÅ‚niajÄ…cy dla anime</string>
    <string name="updates_settings">Pokazuj aktualizacje</string>
    <string name="updates_settings_des">Automatycznie wyszukuj aktualizacji</string>
    <string name="uprereleases_settings">Aktualizuj do wersji beta</string>
    <string name="uprereleases_settings_des">Wyszukuj wersji beta, zamiast peÅ‚nych wydaÅ„</string>
    <string name="github">Github</string>
    <string name="lightnovel">Aplikacja do noweli</string>
    <string name="anim">Aplikacja do anime</string>
    <string name="discord">Discord</string>
    <string name="benene">Daj banana programistom</string>
    <string name="benene_des">Dano banana</string>

    <string name="app_language">JÄ™zyk</string>

    <string name="no_chromecast_support_toast">Ten dostawca nie wspiera Chromecast</string>
    <string name="no_links_found_toast">Nie znaleziono linkÃ³w</string>
    <string name="copy_link_toast">Skopiowano do schowka</string>
    <string name="play_episode_toast">OdtwÃ³rz odcinek</string>
    <string name="subs_default_reset_toast">Zresetowano</string>
    <string name="acra_report_toast">Awaria aplikacji. Anonimowe zgÅ‚oszenie bÅ‚edu zostanie wysÅ‚ane programistom</string>

    <string name="season">Sezon</string>
    <string name="no_season">Brak sezonu</string>
    <string name="episode">Odcinek</string>
    <string name="episodes">Odcinki</string>
    <string name="season_short">S</string>
    <string name="episode_short">O</string>

    <string name="delete_file">UsuÅ„ plik</string>
    <string name="delete">UsuÅ„</string>
    <string name="pause">Wstrzymaj</string>
    <string name="resume">OdtwÃ³rz</string>
    <string name="go_back_30">-30</string>
    <string name="go_forward_30">+30</string>
    <string name="delete_message" formatted="true">TSpowoduje to trwaÅ‚e usuniÄ™cie %s\nCzy jesteÅ› pewien?</string>
    <string name="resume_time_left" formatted="true">%dm\npozostaÅ‚o</string>

    <string name="status_ongoing">BierzÄ…cy</string>
    <string name="status_completed">ZakoÅ„czone</string>
    <string name="status">Status</string>
    <string name="year">Rok</string>
    <string name="rating">Ocena</string>
    <string name="duration">Czas trwania</string>
    <string name="site">Strona</string>
    <string name="synopsis">Streszczenie</string>

    <string name="queued">W kolejce</string>
    <string name="no_subtitles">Brak napisÃ³w</string>
    <string name="default_subtitles">DomyÅ›lne</string>

    <string name="free_storage">Wolne</string>
    <string name="used_storage">W uÅ¼yciu</string>
    <string name="app_storage">Aplikacja</string>

    <string name="movies">Filmy</string>
    <string name="tv_series">Serial telewizyjny</string>
    <string name="cartoons">KreskÃ³wki</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrenty</string>
    <string name="documentaries">Filmy dokumentalne</string>
    <string name="ova">OVA</string>
    <string name="asian_drama">Filmy azjatyckie</string>

    <string name="movies_singular">Film</string>
    <string name="tv_series_singular">Serial telewizyjny</string>
    <string name="cartoons_singular">KreskÃ³wka</string>
    <string name="torrent_singular">Torrent</string>
    <string name="documentaries_singular">Film dokumentalny</string>
    <string name="asian_drama_singular">Film azjatycki</string>

    <string name="source_error">BÅ‚Ä…d Å¼rÃ³dÅ‚a</string>
    <string name="remote_error">Zdalny bÅ‚Ä…d</string>
    <string name="render_error">BÅ‚Ä…d renderowania</string>
    <string name="unexpected_error">Nieoczekiwany bÅ‚Ä…d odtwarzacza</string>
    <string name="storage_error">BÅ‚Ä…d pobierania, sprawdÅº uprawnienia</string>

    <string name="episode_action_chromecast_episode">Chromecast odcinka</string>
    <string name="episode_action_chromecast_mirror">Chromecast mirroru</string>
    <string name="episode_action_play_in_app">OdtwÃ³rz w aplikacji</string>
    <string name="episode_action_play_in_vlc">OdtwÃ³rz w VLC</string>
    <string name="episode_action_play_in_browser">OdtwÃ³rz w przeglÄ…darce</string>
    <string name="episode_action_copy_link">Kopiuj link</string>
    <string name="episode_action_auto_download">Automatyczne pobieranie</string>
    <string name="episode_action_download_mirror">Pobierz mirror</string>
    <string name="episode_action_reload_links">OdÅ›wierz linki</string>

    <string name="no_update_found">No Update Found</string>
    <string name="check_for_update">Check for Update</string>

    <string name="video_lock">Zablokuj</string>
    <string name="video_aspect_ratio_resize">Rozmiar</string>
    <string name="video_source">Å¹rÃ³dlo</string>
    <string name="video_skip_op">PomiÅ„ OP</string>

    <string name="dont_show_again">Nie pokazuj ponownie</string>
    <string name="update">Aktualizacja</string>
    <string name="watch_quality_pref">DomyÅ›lna jakoÅ›Ä‡</string>
    <string name="video_buffer_size_settings">Rozmiar bufora wideo</string>
    <string name="video_buffer_length_settings">DÅ‚ugoÅ›Ä‡ bufora wideo</string>
    <string name="video_buffer_disk_settings">PamiÄ™Ä‡ podrÄ™czna wideo na dysku</string>
    <string name="video_buffer_clear_settings">WyczyÅ›Ä‡ pamiÄ™Ä‡ podrÄ™cznÄ… wideo i obrazÃ³w</string>

    <string name="video_ram_description">Ustawienie zbyt wysokiej wartoÅ›ci moÅ¼e powodowaÄ‡ problemy w systemach z maÅ‚Ä… iloÅ›ciÄ… pamiÄ™ci RAM, takich jak urzÄ…dzenia Android TV lub stare telefony.</string>
    <string name="video_disk_description">Zbyt wysokie ustawienie moÅ¼e powodowaÄ‡ problemy w systemach z maÅ‚Ä… iloÅ›ciÄ… miejsca w pamiÄ™ci, takich jak urzÄ…dzenia Android TV</string>

    <string name="dns_pref">DNS over HTTPS</string>
    <string name="dns_pref_summary">Przydatne w pomijaniu blokad dostawcÃ³w internetu</string>
    
    <string name="download_path_pref">ÅšcieÅ¼ka pobierania</string>
    <string name="display_subbed_dubbed_settings">WyÅ›wietlanie Anime z dubbingiem/subbingiem</string>

    <string name="resize_fit">Dopasuj do ekranu</string>
    <string name="resize_fill">RozciÄ…gnij</string>
    <string name="resize_zoom">PowiÄ™ksz</string>

    <string name="legal_notice">ZastrzeÅ¼enie</string>

    <string name="provider_lang_settings">JÄ™zyki dostawcÃ³w</string>
    <string name="general">OgÃ³lne</string>
    <string name="app_layout">UkÅ‚ad aplikacji</string>
    <string name="preferred_media_settings">Preferowane media</string>

    <string name="automatic">Automatyczny</string>
    <string name="tv_layout">UkÅ‚ad dla telewizorÃ³w</string>
    <string name="phone_layout">UkÅ‚ad dla telefonÃ³w</string>
    <string name="emulator_layout">UkÅ‚ad dla emulatorÃ³w</string>

    <string name="primary_color_settings">Kolor podstawowy</string>
    <string name="app_theme_settings">Motyw aplikacji</string>


    <string name="account">konto</string>
    <string name="logout">Wyloguj siÄ™</string>
    <string name="login">Logowanie</string>
    <string name="switch_account">PrzeÅ‚Ä…cz konto</string>
    <string name="add_account">Dodaj konto</string>
    <string name="add_sync">Dodaj synchronizacjÄ™</string>
    <string name="added_sync_format" formatted="true">Dodano %s</string>
    <string name="upload_sync">Synchronizacja</string>

    <string name="none">Brak</string>
    <string name="normal">Normalne</string>
    <string name="all">Wszystkie</string>
    <string name="max">Maks</string>
    <string name="min">Min</string>
    <string name="subtitles_outline">Kontur</string>
    <string name="subtitles_depressed">WciÅ›niÄ™te</string>
    <string name="subtitles_shadow">CieÅ„</string>
    <string name="subtitles_raised">Zniesione</string>
    <string name="subtitle_offset">Synchronizacja napisÃ³w</string>
    <string name="subtitle_offset_hint">1000ms</string>
    <string name="subtitle_offset_title">OpÃ³Åºnienie napisÃ³w</string>
    <string name="subtitle_offset_extra_hint_later_format">UÅ¼yj tego, jeÅ›li napisy sÄ… wyÅ›wietlane %dms za wczeÅ›nie</string>
    <string name="subtitle_offset_extra_hint_before_format">UÅ¼yj tego, jeÅ›li napisy sÄ… wyÅ›wietlane %dms za pÃ³Åºno</string>
    <string name="subtitle_offset_extra_hint_none_format">Brak opÃ³Åºnienia napisÃ³w</string>

    <string name="subtitles_example_text">PchnÄ…Ä‡ w tÄ™ Å‚Ã³dÅº jeÅ¼a lub oÅ›m skrzyÅ„ fig.</string>

    <string name="recommended">Polecane</string>
    <string name="player_loaded_subtitles" formatted="true">ZaÅ‚adowano %s</string>
    <string name="player_load_subtitles">Wczytaj z pliku</string>
    <string name="downloaded_file">Pobrano plik</string>
    <string name="actor_main">GÅ‚Ã³wna</string>
    <string name="actor_supporting">Drugoplanowy</string>
    <string name="actor_background">Pomocniczy</string>

    <string name="home_source">Å¹rÃ³dÅ‚o</string>

    <string name="coming_soon">JuÅ¼ wkrÃ³tce...</string>
    <string name="quality_cam">Cam</string>
    <string name="quality_cam_rip">Cam</string>
    <string name="quality_cam_hd">Cam</string>
    <string name="quality_hq">HQ</string>
    <string name="quality_hd">HD</string>
    <string name="quality_ts">TS</string>
    <string name="quality_tc">TC</string>
    <string name="quality_blueray">BlueRay</string>
    <string name="quality_workprint">WP</string>
    <string name="quality_dvd">DVD</string>
    <string name="poster_image">Obraz plakatu</string>
</resources>



================================================
FILE: app/src/main/res/values-pt/strings-pt.xml
================================================
<resources xmlns:tools="http://schemas.android.com/tools" tools:ignore="MissingTranslation">
<!--Created by The Translator <https://play.google.com/store/apps/details?id=com.sunilpaulmathew.translator>-->

	<!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">Poster</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">Episode Poster</string>
    <string name="home_main_poster_img_des">Main Poster</string>
    <string name="home_next_random_img_des">Next Random</string>
    <string name="go_back_img_des">Go back</string>
    <string name="home_change_provider_img_des">Change Provider</string>
    <string name="preview_background_img_des">Preview Background</string>
	
	 <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">Velocidade (%.2fx)</string>
    <string name="rated_format" formatted="true">Classificado: %.1f</string>
    <string name="new_update_format" formatted="true">Nova atualizaÃ§Ã£o encontrada!\n%s -> %s</string>
    <string name="filler" formatted="true">Cheio</string>
	
    <string name="app_name">CloudStream</string>
    <string name="title_home">InÃ­cio</string>
    <string name="title_search">Buscar</string>
    <string name="title_downloads">Downloads</string>
    <string name="title_settings">OpÃ§Ãµes</string>
	
    <string name="search_hint">Buscarâ€¦</string>
    <string name="no_data">Sem dados</string>
    <string name="episode_more_options_des">Mais OpÃ§Ãµes</string>
    <string name="next_episode">PrÃ³ximo episÃ³dio</string>
    <string name="result_tags">GÃªneros</string>
    <string name="result_share">Compartir</string>
    <string name="result_open_in_browser">Abrir no Navegador</string>
    <string name="skip_loading">Saltar Carga</string>
    <string name="loading_chromecast">Cargandoâ€¦</string>
	
    <string name="type_watching">Assistindo</string>
    <string name="type_on_hold">Em espera</string>
    <string name="type_completed">Completado</string>
    <string name="type_dropped">Deixado</string>
    <string name="type_plan_to_watch">Planejando assistir</string>
	<string name="type_none">Nenhuma</string>
	<string name="type_re_watching">Assistindo de Novo</string>
	
    <string name="play_movie_button">Assistir Filme</string>
    <string name="play_torrent_button">Stream Torrent</string>
    <string name="pick_source">Origems</string>
    <string name="pick_subtitle">SubtÃ­tulos</string>
    <string name="reload_error">Reintentar conexÃ£oâ€¦</string>
    <string name="go_back">Voltar AtrÃ¡s</string>
    <string name="play_episode">Assistir EpisÃ³dio</string>
	
    <string name="download">DescÃ rregar</string>
    <string name="downloaded">DescÃ rregado</string>
    <string name="downloading">DescÃ rregando</string>
    <string name="download_paused">DescÃ rrega Pausada</string>
    <string name="download_started">DescÃ rrega Iniciada</string>
    <string name="download_failed">DescÃ rrega Fallida</string>
    <string name="download_canceled">DescÃ rrega Cancelada</string>
    <string name="download_done">DescÃ rrega Terminada</string>
	
    <string name="error_loading_links_toast">Error Cargando Links</string>
    <string name="download_storage_text">Armazenagem Interno</string>
	
    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>
	
    <string name="popup_delete_file">Eliminar Arquivo</string>
    <string name="popup_play_file">Reproduzir Arquivo</string>
    <string name="popup_resume_download">Retomar DescÃ rrega</string>
    <string name="popup_pause_download">Pausar DescÃ rrega</string>
	
    <string name="pref_disable_acra">Desativar o relatÃ³rio automÃ¡tico de erros</string>
    <string name="home_more_info">Mais info</string>
    <string name="home_expanded_hide">Esconder</string>
    <string name="home_play">Reproduzir</string>
    <string name="home_info">Info</string>
    <string name="filter_bookmarks">Filtrar Marcadores</string>
    <string name="error_bookmarks_text">Marcadores</string>
    <string name="action_remove_from_bookmarks">Eliminar</string>
    <string name="sort_apply">Aplicar</string>
    <string name="sort_cancel">Cancelar</string>
    <string name="player_speed">Velocidade do Reproductor</string>
	
    <string name="subtitles_settings">Ajustes de SubtÃ­tulos</string>
    <string name="subs_text_color">Color do Texto</string>
    <string name="subs_outline_color">Color do Delineado</string>
    <string name="subs_background_color">Color do Fondo</string>
    <string name="subs_window_color">Color da Janela</string>
    <string name="subs_edge_type">Tipo de Borda</string>
    <string name="subs_subtitle_elevation">ElevaÃ§Ã£o de SubtÃ­tulo</string>
    <string name="subs_font">Fonte</string>
    <string name="subs_font_size">Tamanho da Fonte</string>
	
    <string name="search_provider_text_providers">Busca usando fornecedores</string>
    <string name="search_provider_text_types">Busca usando tipos</string>
	
    <string name="benene_count_text">%d Benenes dadas a os devs</string>
    <string name="benene_count_text_none">Nenhum Benene dado</string>
	
    <string name="subs_auto_select_language">Auto-seleÃ§Ã£o de Idioma</string>
    <string name="subs_download_languages">DescÃ rregar Idiomas</string>
    <string name="subs_hold_to_reset_to_default">Segure para reinicializar para o padrÃ£o</string>
    <string name="continue_watching">Continuar Assistindo</string>
	
    <string name="action_remove_watching">Eliminar</string>
    <string name="action_open_watching">Mais info</string>
	
    <string name="vpn_might_be_needed">Uma VPN pode ser necessÃ¡ria para que este provedor funcione corretamente</string>
    <string name="vpn_torrent">Este provedor Ã© uma torrent; uma VPN Ã© recomendada</string>
    
	<string name="provider_info_meta">Metadados nÃ£o sÃ£o fornecidos pelo site, o carregamento de vÃ­deo pode falhar.</string>
	
	<string name="torrent_plot">DescripÃ§Ã£o</string>
    <string name="normal_no_plot">Nenhuma Trama Encontrada</string>
    <string name="torrent_no_plot">Nenhuma DescripÃ§Ã£o Encontrada</string>
	
    <string name="picture_in_picture">Picture-em-picture</string>
    <string name="picture_in_picture_des">Continua a reproduÃ§Ã£o em um player em miniatura em cima de outros apps</string>
    <string name="player_size_settings">BotÃ£o de redimensionamento do player</string>
    <string name="player_size_settings_des">Tirar as bordas negras</string>
    <string name="player_subtitles_settings">SubtÃ­tulos</string>
    <string name="player_subtitles_settings_des">ConfiguraÃ§Ãµes de subtÃ­tulos do Player</string>
    <string name="eigengraumode_settings">Modo Eigengravy</string>
    <string name="eigengraumode_settings_des">Adiciona um botÃ£o de velocidade no player</string>
    <string name="swipe_to_seek_settings">Deslize para buscar para frente</string>
    <string name="swipe_to_seek_settings_des">Deslize para a esq. ou dir. para controlar o tempo no player</string>
    <string name="swipe_to_change_settings">Deslize para mudar as configuraÃ§Ãµes</string>
    <string name="swipe_to_change_settings_des">Deslize para o lado esq. ou dir. para ajustar brilho ou volume</string>
    <string name="double_tap_to_seek_settings">Duplo toque para buscar para frente</string>
    <string name="use_system_brightness_settings">Usar o brilho da sistema</string>
    <string name="use_system_brightness_settings_des">Usar o brilho da sistema em vez de uma sobreposiÃ§Ã£o escura</string>
	
    <string name="search">Buscar</string>
    <string name="settings_info">Info</string>
    <string name="advanced_search">BÃºsqueda AvanÃ§ada</string>
    <string name="advanced_search_des">Mostra resultados da busca separados por fornecedor</string>
    <string name="bug_report_settings_off">SÃ³ envia dados sobre travamentos</string>
    <string name="bug_report_settings_on">NÃ£o envia nenhum dado</string>
    <string name="show_fillers_settings">Mostrar episÃ³dios de enchimento para anime</string>
    <string name="updates_settings">Mostrar actualizaÃ§Ãµes do app</string>
    <string name="updates_settings_des">Busca novas actualizaÃ§Ãµes Ã  iniciar</string>
    <string name="uprereleases_settings">Actualizar Ã  PrÃ©-lanÃ§amentos</string>
    <string name="uprereleases_settings_des">Busca actualizaÃ§Ãµes prÃ©-lanÃ§amento em vez de sÃ³ lanÃ§amentos completos</string>
    <string name="github">Github</string>
    <string name="lightnovel">App light novel por os mesmos devs</string>
    <string name="discord">Junte-se Ã  Discord</string>
    <string name="benene">Dar um benene Ã  os devs</string>
    <string name="benene_des">Benene dada</string>
	
    <string name="app_language">Linguagem do App</string>
	
    <string name="no_chromecast_support_toast">Este fornecedor nÃ£o tem suporte para Chromecast</string>
    <string name="no_links_found_toast">Links NÃ£o Encontrados</string>
    <string name="copy_link_toast">Link copiado para a prancheta</string>
    <string name="play_episode_toast">Reproduzir episÃ³dio</string>
    <string name="subs_default_reset_toast">Reinicializar para o padrÃ£o</string>
	<string name="acra_report_toast">Desculpe, a aplicaÃ§Ã£o falhou. Um relatÃ³rio de erro anÃ´nimo serÃ¡ enviado para os
       desenvolvedores
    </string>
	
    <string name="season">Temporada</string>
    <string name="no_season">Sem Temporada</string>
    <string name="episode">EpisÃ³dio</string>
    <string name="episodes">EpisÃ³dios</string>
    <string name="season_short">T</string>
    <string name="episode_short">E</string>
	
    <string name="delete_file">Eliminar Arquivo</string>
    <string name="delete">Eliminar</string>
    <string name="pause">Pausar</string>
    <string name="resume">Retomar</string>
    <string name="delete_message">Isto apagarÃ  %s permanentemente\nVocÃª tem certeza?</string>
	
    <string name="status_ongoing">Em Curso</string>
    <string name="status_completed">ConcluÃ­do</string>
    <string name="status">Estado</string>
    <string name="year">Ano</string>
    <string name="rating">ClassificaÃ§Ã£o</string>
    <string name="duration">DuraÃ§Ã£o</string>
    <string name="site">Sitio</string>
    <string name="synopsis">Sinopsis</string>
	
    <string name="queued">Em fila</string>
    <string name="no_subtitles">NÃ£o HÃ¡ SubtÃ­tulos</string>
    <string name="default_subtitles">Por PadrÃ£o</string>
	
    <string name="free_storage">Livre</string>
    <string name="used_storage">Usado</string>
    <string name="app_storage">App</string>
	
	<!--plural-->
    <string name="movies">Filmes</string>
    <string name="tv_series">SÃ©ries de TV</string>
    <string name="cartoons">Desenhos animados</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrentes</string>
	<string name="documentaries">DocumentÃ¡rios</string>
	
	<!--singular-->
	<string name="movies_singular">Filme</string>
	<string name="tv_series_singular">SÃ©riado</string>
	<string name="cartoons_singular">Desenho animado</string>
	<string name="torrent_singular">Torrent</string>
	<string name="documentaries_singular">DocumentÃ¡rio</string>
	
    <string name="source_error">Erro de origem</string>
    <string name="remote_error">Erro remoto</string>
    <string name="render_error">Erro de Renderizador</string>
    <string name="unexpected_error">Erro inesperado do player reproductor</string>
    <string name="storage_error">Erro de descÃ rrega; verifica permissÃµes de armazenamento</string>
	
    <string name="episode_action_chromecast_episode">Chromecast o EpisÃ³dio</string>
    <string name="episode_action_chromecast_mirror">Chromecast Ã¡ o Espelho</string>
    <string name="episode_action_play_in_app">Assistir no App</string>
    <string name="episode_action_play_in_vlc">Assistir no VLC</string>
    <string name="episode_action_play_in_browser">Assistir no Navegador</string>
    <string name="episode_action_copy_link">Copiar Link</string>
    <string name="episode_action_auto_download">Auto DescÃ rrega</string>
    <string name="episode_action_download_mirror">DescÃ rregar Espelho</string>
    <string name="episode_action_reload_links">Recarregar Links</string>
	
    <string name="no_update_found">Nenhuma AtualizaÃ§Ã£o</string>
    <string name="check_for_update">Buscar AtualizaÃ§Ã£o</string>
	
    <string name="video_lock">Fixar</string>
    <string name="video_aspect_ratio_resize">Mudar Tamanho</string>
    <string name="video_source">Origem</string>
    <string name="video_skip_op">Pular OP</string>
	
    <string name="dont_show_again">NÃ£o mostra de novo</string>
    <string name="update">Atualizar</string>
    <string name="watch_quality_pref">Calidade Preferida</string>
    <string name="dns_pref">DNS sobre HTTPS</string>
    <string name="dns_pref_summary">Ãštil para contornar blocos do provedor de internet</string>	

	<string name="download_path_pref">Caminho de descarga</string>	
	
    <string name="display_subbed_dubbed_settings">Mostrar Anime Dublado/SubtÃ­tulado</string>
	
    <string name="resize_fit">Ajustar para a Tela</string>
    <string name="resize_fill">Esticar</string>
    <string name="resize_zoom">Aumentar</string>
	
	<string name="legal_notice">Aviso Legal</string>
    <string name="legal_notice_text" translatable="false">Quaisquer questÃµes legais relativas ao conteÃºdo desta aplicaÃ§Ã£o
       devem ser levados em conta com os prÃ³prios anfitriÃµes e fornecedores de arquivos, pois nÃ£o somos afiliados a eles.

       Em caso de violaÃ§Ã£o de direitos autorais, favor contatar diretamente as partes responsÃ¡veis ou os sites de streaming.

       O aplicativo Ã© puramente para uso educacional e pessoal.

       O CloudStream 3 nÃ£o hospeda nenhum conteÃºdo no aplicativo, e nÃ£o tem controle sobre qual mÃ­dia Ã© colocada ou retirada.
       O CloudStream 3 funciona como qualquer outro mecanismo de busca, como o Google. O CloudStream 3 nÃ£o hospeda, nÃ£o faz upload ou
       gerenciar qualquer vÃ­deo, filme ou conteÃºdo. Ele simplesmente rasteja, agrega e exibe links em um conveniente,
       interface amigÃ¡vel para o usuÃ¡rio.

       Ela apenas raspa sites de terceiros que podem ser acessados publicamente atravÃ©s de qualquer navegador web normal. Ã‰ o
       responsabilidade do usuÃ¡rio de evitar qualquer aÃ§Ã£o que possa violar as leis que regem sua localidade. Utilizar
       CloudStream 3 por sua prÃ³pria conta e risco.
    </string>
	<string name="general">Geral</string>
    <string name="provider_lang_settings">Idiomas dos Origems</string>
    <string name="app_layout">Layout do App</string>
    <string name="preferred_media_settings">MÃ­dia preferida</string>

    <string name="automatic">Auto</string>
    <string name="tv_layout">Layout de TV</string>
    <string name="phone_layout">Layout de Celular</string>

    <string name="primary_color_settings">Cor PrimÃ¡ria</string>
    <string name="app_theme_settings">Tema do App</string>
	
	<!-- account stuff -->
    <string name="account">Conta</string>
    <string name="logout">Sair</string>
    <string name="login">Autenticar</string>
    <string name="switch_account">Mudar de conta</string>
    <string name="add_account">Adicionar conta</string>
    <!-- ============ -->
    <string name="none">Nenhuma</string>
    <string name="normal">Normal</string>
    <string name="all">Todos</string>
    <string name="max">Max</string>
    <string name="min">Min</string>
    <string name="subtitles_outline">EsboÃ§ado</string>
    <string name="subtitles_depressed">Deprimido</string>
    <string name="subtitles_shadow">Sombrado</string>
    <string name="subtitles_raised">Em Relevo</string>
    <!--
    Example text (pangram) can optionally be translated; if you do, include all the letters in the alphabet,
    see: 
	https://en.wikipedia.org/w/index.php?title=Pangram&oldid=225849300
	https://en.wikipedia.org/wiki/The_quick_brown_fox_jumps_over_the_lazy_dog
    -->
    <string name="subtitles_example_text">LuÃ­s argÃ¼ia Ã  JÃºlia que Â«braÃ§Ãµes, fÃ©, chÃ¡, Ã³xido, pÃ´r, zÃ¢ngÃ£oÂ» eram palavras do portuguÃªs</string>
</resources>


================================================
FILE: app/src/main/res/values-ro/strings-ro.xml
================================================
<resources xmlns:tools="http://schemas.android.com/tools" tools:ignore="MissingTranslation">
<!--Created by The Translator <https://play.google.com/store/apps/details?id=com.sunilpaulmathew.translator>-->

	<!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">AfiÈ™</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">AfiÈ™ul Episodului</string>
    <string name="home_main_poster_img_des">AfiÈ™ Principal</string>
    <string name="home_next_random_img_des">UrmÄƒtor Aleatoriu</string>
    <string name="go_back_img_des">ÃŽnapoi</string>
    <string name="home_change_provider_img_des">SchimbaÈ›i furnizorul</string>
    <string name="preview_background_img_des">Previzualizare fundal</string>
	
	<!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">VitezÄƒ (%.2fx)</string>
    <string name="rated_format" formatted="true">Evaluat: %.1f</string>
    <string name="new_update_format" formatted="true">Noua actualizare gÄƒsitÄƒ!\n%s -> %s</string>
    <string name="filler" formatted="true">Umplut</string>
	
    <string name="app_name">CloudStream</string>
    <string name="title_home">Principal</string>
    <string name="title_search">CÄƒutare</string>
    <string name="title_downloads">DescÄƒrcÄƒri</string>
    <string name="title_settings">OpÈ›iuni</string>
	
    <string name="search_hint">CÄƒutareâ€¦</string>
    <string name="no_data">FÄƒrÄƒ date</string>
    <string name="episode_more_options_des">Mai Multe OpÈ›iuni</string>
    <string name="next_episode">UrmÄƒtorul episod</string>
    <string name="result_tags">Genuri</string>
    <string name="result_share">Partajare</string>
    <string name="result_open_in_browser">DeschideÈ›i Ã®n browser</string>
    <string name="skip_loading">SÄƒriÈ›i Ã®ncÄƒrcarea</string>
    <string name="loading_chromecast">ÃŽncÄƒrcareâ€¦</string>
    
	<string name="type_watching">UrmÄƒrind</string>
    <string name="type_on_hold">ÃŽn aÈ™teptare</string>
    <string name="type_completed">Finalizat</string>
    <string name="type_dropped">RenunÈ›at</string>
    <string name="type_plan_to_watch">Planificare pentru a urmÄƒri</string>
    <string name="type_none">Niciunul</string>
	<string name="type_re_watching">ReUrmare</string>
	
    <string name="play_movie_button">UrmÄƒriÈ›i Filmul</string>
    <string name="play_torrent_button">Stream Torrent</string>
    <string name="pick_source">Surse</string>
    <string name="pick_subtitle">Subtitrare</string>
    <string name="reload_error">ReÃ®ncercarea conexiuniiâ€¦</string>
    <string name="go_back">ÃŽntoarce-te</string>
    <string name="play_episode">RedÄƒ episodul</string>
    
	<string name="download">DescÄƒrcare</string>
    <string name="downloaded">DescÄƒrcat</string>
    <string name="downloading">DescÄƒrcÃ¢nd</string>
    <string name="download_paused">DescÄƒrcare Ã®n PauzÄƒ</string>
    <string name="download_started">DescÄƒrcare ÃŽnceputÄƒ</string>
    <string name="download_failed">DescÄƒrcare EÈ™uatÄƒ</string>
    <string name="download_canceled">DescÄƒrcare AnulatÄƒ</string>
    <string name="download_done">DescÄƒrcare FinalizatÄƒ</string>
	
    <string name="error_loading_links_toast">Eroare de ÃŽncÄƒrcare a Linkurilor</string>
    <string name="download_storage_text">Memorie InternÄƒ</string>
	
    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>
	
    <string name="popup_delete_file">È˜terge FiÈ™ierul</string>
    <string name="popup_play_file">Redare FiÈ™ierul</string>
    <string name="popup_resume_download">ContinuaÈ›i DescÄƒrcarea</string>
    <string name="popup_pause_download">PauzÄƒ DescÄƒrcare</string>
	
    <string name="pref_disable_acra">DezactivaÈ›i raportarea automatÄƒ a erorilor</string>
    <string name="home_more_info">Mai multe info</string>
    <string name="home_expanded_hide">Ascunde</string>
    <string name="home_play">ÃŽncepe</string>
    <string name="home_info">Info</string>
    <string name="filter_bookmarks">FiltreazÄƒ Marcajele</string>
    <string name="error_bookmarks_text">Marcajele</string>
    <string name="action_remove_from_bookmarks">EliminaÈ›i</string>
    <string name="sort_apply">AplicaÈ›i</string>
    <string name="sort_cancel">AnulaÈ›i</string>
    <string name="player_speed">Viteza de Redare</string>
	
    <string name="subtitles_settings">OpÈ›iuni de Subtitrare</string>
    <string name="subs_text_color">Culoarea Textului</string>
    <string name="subs_outline_color">Culoarea Conturului</string>
    <string name="subs_background_color">Culoarea de Fundal</string>
    <string name="subs_window_color">Culoarea Ferestrei</string>
    <string name="subs_edge_type">Tipul de Margine</string>
    <string name="subs_subtitle_elevation">ElevaÈ›ia SubtitrÄƒrilor</string>
    <string name="subs_font">Fontul</string>
    <string name="subs_font_size">Dimensiunea Fontului</string>
	
    <string name="search_provider_text_providers">CÄƒutare cu ajutorul furnizorilor</string>
    <string name="search_provider_text_types">CÄƒutare utilizÃ¢nd tipuri</string>
	
    <string name="benene_count_text">%d Benenes date la dezvoltatorilor</string>
    <string name="benene_count_text_none">FÄƒrÄƒ Beneni administraÈ›i</string>
	
    <string name="subs_auto_select_language">Auto-selectare LimbÄƒ</string>
    <string name="subs_download_languages">DescÄƒrcaÈ›i Limbi</string>
    <string name="subs_hold_to_reset_to_default">ÈšineÈ›i apÄƒsat pentru a reseta la valorile implicite</string>
    <string name="continue_watching">ContinuÄƒ sÄƒ UrmÄƒreÈ™ti</string>
    
	<string name="action_remove_watching">EliminaÈ›i</string>
    <string name="action_open_watching">Mai Multe Info</string>
    
	<string name="vpn_might_be_needed">Este posibil sÄƒ fie necesar un VPN pentru ca acest furnizor sÄƒ funcÈ›ioneze corect</string>
    <string name="vpn_torrent">Acest furnizor este un torrent, se recomandÄƒ un VPN</string>
	
	<string name="provider_info_meta">Metadatele nu sunt furnizate de site, este posibil ca Ã®ncÄƒrcarea videoclipului sÄƒ eÈ™ueze.</string>
    
	<string name="torrent_plot">Descriere</string>
    <string name="normal_no_plot">Nici o ParcelÄƒ GÄƒsitÄƒ</string>
    <string name="torrent_no_plot">Nicio Descriere GÄƒsitÄƒ</string>
	
    <string name="picture_in_picture">Picture-in-picture</string>
    <string name="picture_in_picture_des">ContinuÄƒ redarea Ã®ntr-un player Ã®n miniaturÄƒ deasupra altor aplicaÈ›ii</string>
    <string name="player_size_settings">Butonul de Redimensionare a Playerului</string>
    <string name="player_size_settings_des">EliminaÈ›i marginile negre</string>
    <string name="player_subtitles_settings">Subtitrare</string>
    <string name="player_subtitles_settings_des">OpÈ›iuni de subtitrare a Playerului</string>
    <string name="eigengraumode_settings">Modul Eigengravy</string>
    <string name="eigengraumode_settings_des">AdaugÄƒ un buton de vitezÄƒ Ã®n player</string>
    <string name="swipe_to_seek_settings">GlisaÈ›i pentru a cÄƒuta</string>
    <string name="swipe_to_seek_settings_des">GlisaÈ›i la stÃ¢nga sau la dreapta pentru a controla timpul Ã®n player</string>
    <string name="swipe_to_change_settings">GlisaÈ›i pentru a ajusta opÈ›iunile</string>
    <string name="swipe_to_change_settings_des">GlisaÈ›i pe partea stÃ¢ngÄƒ sau dreaptÄƒ pentru a schimba luminozitatea sau volumul</string>
    <string name="double_tap_to_seek_settings">AtingeÈ›i dublu pentru a cÄƒuta</string>
    <string name="use_system_brightness_settings">UtilizaÈ›i luminozitatea sistemului</string>
    <string name="use_system_brightness_settings_des">UtilizaÈ›i luminozitatea sistemului Ã®n playerul aplicaÈ›iei Ã®n loc de o suprapunere Ã®ntunecatÄƒ</string>
	
    <string name="search">CÄƒutare</string>
    <string name="settings_info">Info</string>
    <string name="advanced_search">CÄƒutare AvansatÄƒ</string>
    <string name="advanced_search_des">AfiÈ™eazÄƒ rezultatele cÄƒutÄƒrii sortate dupÄƒ furnizor</string>
    <string name="bug_report_settings_off">Trimite numai rapoarte de accident</string>
    <string name="bug_report_settings_on">Nu trimite date</string>
    <string name="show_fillers_settings">AratÄƒ episoade de umpluturÄƒ anime</string>
    <string name="updates_settings">AfiÈ™aÈ›i actualizÄƒrile aplicaÈ›iei</string>
    <string name="updates_settings_des">CÄƒutare automatÄƒ a noilor actualizÄƒri la pornire</string>
    <string name="uprereleases_settings">Actualizare la pre-lansÄƒri</string>
    <string name="uprereleases_settings_des">CÄƒutaÈ›i doar actualizÄƒri de pre-lansare Ã®n loc de versiuni complete</string>
    <string name="github">Github</string>
    <string name="lightnovel">AplicaÈ›ia light novel de cÄƒtre aceiaÈ™i dezvoltatorilor</string>
	<string name="anim">AplicaÈ›ie anime de aceiaÈ™i dezvoltatorilor</string>
    <string name="discord">AlÄƒturaÈ›i-vÄƒ Discord</string>
    <string name="benene">DaÈ›i un benene pentru dezvoltatorilor</string>
    <string name="benene_des">Benene dat</string>
	
    <string name="app_language">Limba AplicaÈ›iei</string>
	
    <string name="no_chromecast_support_toast">Acest furnizor nu are suport pentru Chromecast</string>
    <string name="no_links_found_toast">Niciun Link GÄƒsit</string>
    <string name="copy_link_toast">Link copiat Ã®n clipboard</string>
    <string name="play_episode_toast">RedÄƒ episodul</string>
    <string name="subs_default_reset_toast">Resetarea la valoarea implicitÄƒ</string>
	<string name="acra_report_toast">Ne pare rÄƒu, aplicaÈ›ia s-a blocat. Un raport de eroare anonim va fi trimis la
       dezvoltatorilor
    </string>
	
    <string name="season">Sezonul</string>
    <string name="no_season">FÄƒrÄƒ Sezon</string>
    <string name="episode">Episodul</string>
    <string name="episodes">Episoade</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>
	
    <string name="delete_file">È˜terge FiÈ™ierul</string>
    <string name="delete">È˜terge</string>
    <string name="pause">PauzÄƒ</string>
    <string name="resume">Continuarea</string>
    <string name="delete_message">Acest lucru va È™terge definitiv %s\nEÈ™ti sigur?</string>
    
	<string name="status_ongoing">ÃŽn Curs </string>
    <string name="status_completed">ÃŽncheiat</string>
    <string name="status">Status</string>
    <string name="year">An</string>
    <string name="rating">Rating</string>
    <string name="duration">DuratÄƒ</string>
    <string name="site">Site-ul</string>
    <string name="synopsis">Sinopsis</string>
    
	<string name="queued">ÃŽn coadÄƒ</string>
    <string name="no_subtitles">FÄƒrÄƒ SubtitrÄƒri</string>
    <string name="default_subtitles">Implicit</string>
    
	<string name="free_storage">LiberÄƒ</string>
    <string name="used_storage">UtilizatÄƒ</string>
    <string name="app_storage">AplicaÈ›ie</string>
    
	<!--plural-->
	<string name="movies">Filme</string>
    <string name="tv_series">Serial TV</string>
    <string name="cartoons">Caricaturi</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrent</string>
	<string name="documentaries">Filme Documentare</string>
	
	<!--singular-->
    <string name="movies_singular">Filmul</string>
    <string name="tv_series_singular">Serie</string>
    <string name="cartoons_singular">Caricatur</string>
    <string name="torrent_singular">Torrent</string>
    <string name="documentaries_singular">Documentar</string>
    
	<string name="source_error">Eroare de sursÄƒ</string>
    <string name="remote_error">Eroare de telecomandÄƒ</string>
    <string name="render_error">Eroare de randare</string>
    <string name="unexpected_error">Eroare neaÈ™teptatÄƒ a playerului</string>
    <string name="storage_error">Eroare de descÄƒrcare; verificaÈ›i permisiunile de stocare</string>
    
	<string name="episode_action_chromecast_episode">Chromecast Acest Episod</string>
    <string name="episode_action_chromecast_mirror">Chromecast Acest OglindÄƒ</string>
    <string name="episode_action_play_in_app">RedÄƒ Ã®n AplicaÈ›ie</string>
    <string name="episode_action_play_in_vlc">RedÄƒ Ã®n VLC</string>
    <string name="episode_action_play_in_browser">RedÄƒ Ã®n Browser</string>
    <string name="episode_action_copy_link">copie Link-ul</string>
    <string name="episode_action_auto_download">Auto-descÄƒrcare</string>
    <string name="episode_action_download_mirror">DescÄƒrcare OglindÄƒ</string>
    <string name="episode_action_reload_links">ReÃ®ncÄƒrcare Link-uri</string>
    
	<string name="no_update_found">Nicio Actualizare GÄƒsitÄƒ</string>
    <string name="check_for_update">VerificaÈ›i dacÄƒ existÄƒ ActualizÄƒri</string>
    
	<string name="video_lock">Blocare</string>
    <string name="video_aspect_ratio_resize">RedimensionaÈ›i</string>
    <string name="video_source">SursÄƒ</string>
    <string name="video_skip_op">SÄƒriÈ›i OP</string>
    
	<string name="dont_show_again">Nu mai apare din nou</string>
    <string name="update">Actualizare</string>
    <string name="watch_quality_pref">Calitatea PreferatÄƒ</string>
	<string name="dns_pref">DNS prin HTTPS</string>
    <string name="dns_pref_summary">Util pentru ocolirea blocurilor ISP</string>
	
	<string name="download_path_pref">Calea de descÄƒrcare</string>
    
	<string name="display_subbed_dubbed_settings">AfiÈ™area Anime-ului Dublat/Subtitrat</string>
    
	<string name="resize_fit">Se Potrivesc la Ecran</string>
    <string name="resize_fill">ÃŽntindere</string>
    <string name="resize_zoom">MÄƒrire</string>
	
	<string name="legal_notice">RenunÈ›are de responsabilitate</string>
    <string name="legal_notice_text">Orice probleme juridice legate de conÈ›inutul acestei aplicaÈ›ii
        ar trebui sÄƒ fie rezolvate cu gazdele È™i furnizorii de fiÈ™iere, deoarece noi nu suntem afiliaÈ›i cu aceÈ™tia.

        ÃŽn caz de Ã®ncÄƒlcare a drepturilor de autor, vÄƒ rugÄƒm sÄƒ contactaÈ›i direct pÄƒrÈ›ile responsabile sau site-urile de streaming.

        AplicaÈ›ia este destinatÄƒ exclusiv utilizÄƒrii educaÈ›ionale È™i personale.

        CloudStream 3 nu gÄƒzduieÈ™te niciun fel de conÈ›inut Ã®n aplicaÈ›ie È™i nu are niciun control asupra conÈ›inutului media care este pus sau retras.
        CloudStream 3 funcÈ›ioneazÄƒ ca orice alt motor de cÄƒutare, cum ar fi Google. CloudStream 3 nu gÄƒzduieÈ™te, nu Ã®ncarcÄƒ sau
        gestioneazÄƒ niciun videoclip, film sau conÈ›inut. Pur È™i simplu rÄƒscoleÈ™te, agregÄƒ È™i afiÈ™eazÄƒ link-uri Ã®ntr-un mod convenabil,
        interfaÈ›Äƒ convenabilÄƒ È™i uÈ™or de utilizat.

        Pur È™i simplu, acesta extrage site-urile web ale unor terÈ›e pÄƒrÈ›i care sunt accesibile publicului prin intermediul oricÄƒrui browser web obiÈ™nuit. Este
        responsabilitatea utilizatorului de a evita orice acÈ›iune care ar putea Ã®ncÄƒlca legile care guverneazÄƒ localitatea sa. UtilizaÈ›i
        CloudStream 3 pe propriul risc.
    </string>
    <string name="general">GeneralÄƒ</string>
    <string name="provider_lang_settings">Limbile Furnizorului</string>
    <string name="app_layout">Aranjament-ul AplicaÈ›iei</string>
    <string name="preferred_media_settings">Media PreferatÄƒ</string>

    <string name="automatic">Auto</string>
    <string name="tv_layout">Aranjament TV</string>
    <string name="phone_layout">Aranjament Telefonului</string>

    <string name="primary_color_settings">Culoare primarÄƒ</string>
	<string name="app_theme_settings">Tema AplicaÈ›iei</string>
	
	<!-- account stuff -->
    <string name="account">contul</string>
    <string name="logout">IeÈ™ire</string>
    <string name="login">Conectare</string>
    <string name="switch_account">SchimbaÈ›i contul</string>
    <string name="add_account">AdÄƒugaÈ›i contul</string>
    <!-- ============ -->
    <string name="none">Niciunul</string>
    <string name="normal">NormalÄƒ</string>
    <string name="all">Toate</string>
    <string name="max">Max</string>
    <string name="min">Min</string>
    <string name="subtitles_outline">Contur</string>
    <string name="subtitles_depressed">DeprimatÄƒ</string>
    <string name="subtitles_shadow">UmbrÄƒ</string>
    <string name="subtitles_raised">ÃŽn relief</string>
	<!--
    Example text (pangram) can optionally be translated; if you do, include all the letters in the alphabet,
    see: 
	https://en.wikipedia.org/w/index.php?title=Pangram&oldid=225849300
	https://en.wikipedia.org/wiki/The_quick_brown_fox_jumps_over_the_lazy_dog
    -->
	<string name="subtitles_example_text">Gheorghe, obezul, a reuÅŸit sÄƒ obÅ£inÄƒ jucÃ¢ndu-se un flux Ã®n Quebec de o mie kilowaÅ£iorÄƒ</string>
</resources>


================================================
FILE: app/src/main/res/values-sv/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <string name="rated_format">Betygsatt: %.1f</string>
    <string name="player_speed_text_format">Hastighet (%.2fx)</string>
    <string name="new_update_format">Ny uppdatering hittad!\n%s -> %s</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">Hem</string>
    <string name="title_search">SÃ¶k</string>
    <string name="title_downloads">Nerladdningar</string>
    <string name="title_settings">InstÃ¤lningar</string>
    <string name="search_hint">SÃ¶kâ€¦</string>
    <string name="search_poster_img_des">Poster</string>
    <string name="no_data">Ingen Data</string>
    <string name="episode_more_options_des">Mer InstÃ¤lningar</string>
    <string name="go_back_img_des">GÃ¥ tillbacka</string>
    <string name="next_episode">NÃ¤sta avsnitt</string>
    <string name="result_poster_img_des">Affisch</string>
    <string name="result_tags">Genrer</string>
    <string name="result_share">Dela</string>
    <string name="result_open_in_browser">Ã–ppna i webblÃ¤saren</string>
    <string name="skip_loading">Hoppa Ã¶ver</string>
    <string name="loading_chromecast">Laddarâ€¦</string>

    <string name="type_watching">Tittar pÃ¥</string>
    <string name="type_on_hold">Pausad</string>
    <string name="type_completed">Avslutad</string>
    <string name="type_dropped">Dropped</string>
    <string name="type_plan_to_watch">Plannerad</string>
    <string name="type_none">Ingen</string>

    <string name="play_movie_button">Spela Upp</string>
    <string name="play_torrent_button">StrÃ¶mma Torrent</string>
    <string name="pick_source">KÃ¤llor</string>
    <string name="pick_subtitle">Undertexter</string>
    <string name="reload_error">FÃ¶rsÃ¶k ansluta igenâ€¦</string>
    <string name="go_back">GÃ¥ tillbaka</string>
    <string name="episode_poster_img_des">@string/result_poster_img_des</string>
    <string name="play_episode">Spela Avsnitt</string>
    <string name="download">Ladda ner</string>
    <string name="download_storage_text">Intern lagring</string>

    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>

    <string name="popup_delete_file">Ta bort</string>
    <string name="popup_play_file">Spela upp</string>

    <string name="pref_disable_acra">Inaktivera automatisk felrapportering</string>
    <string name="home_more_info">Mer information</string>
    <string name="home_expanded_hide">Hide</string>
    <string name="home_main_poster_img_des">@string/result_poster_img_des</string>
    <string name="home_play">Spela upp</string>
    <string name="home_info">Info</string>
    <string name="home_next_random_img_des">NÃ¤sta</string>
    <string name="home_change_provider_img_des">Byt leverantÃ¶r</string>
    <string name="filter_bookmarks">Filtrera bokmÃ¤rken</string>
    <string name="error_bookmarks_text">BokmÃ¤rken</string>
    <string name="action_remove_from_bookmarks">Ta bort</string>
    <string name="sort_apply">TillÃ¤mpa</string>
    <string name="sort_cancel">Avbryt</string>
    <string name="player_speed">Spelarhastighet</string>
    <string name="subtitles_settings">UndertextinstÃ¤llningar</string>
    <string name="subs_text_color">TextfÃ¤rg</string>
    <string name="subs_outline_color">KantfÃ¤rg</string>
    <string name="subs_background_color">BakgrundsfÃ¤rg</string>
    <string name="subs_window_color">TextfÃ¶nsterfÃ¤rg</string>
    <string name="subs_edge_type">Kanttyp</string>
    <string name="subs_subtitle_elevation">UndertextfÃ¶rflyttning</string>
    <string name="preview_background_img_des">FÃ¶rhandsgranska bakgrund</string>
    <string name="subs_font">Font</string>
    <string name="search_provider_text_providers">SÃ¶k med fÃ¶ljande leverantÃ¶rer</string>
    <string name="search_provider_text_types">SÃ¶k med fÃ¶ljande filmtyper</string>

    <string name="benene_count_text">%d Bananer donerade till utvecklarna</string>
    <string name="benene_count_text_none">Inga bananer givna</string>

    <string name="subs_auto_select_language">Automatisk val av undertextsprÃ¥k</string>
    <string name="subs_download_languages">Automatisk nerladdaning av sprÃ¥k</string>
    <string name="subs_hold_to_reset_to_default">HÃ¥ll inne fÃ¶r att Ã¥terstÃ¤lla till standard</string>
    <string name="continue_watching">FortsÃ¤tt titta</string>

    <string name="action_remove_watching">Ta bort</string>
    <string name="action_open_watching">Mer information</string>

    <string name="vpn_might_be_needed">En VPN kan behÃ¶vas fÃ¶r att den hÃ¤r leverantÃ¶ren ska fungera korrekt</string>
    <string name="vpn_torrent">Denna leverantÃ¶r Ã¤r en torrent, en VPN rekommenderas</string>
    <string name="torrent_plot">Beskrivning</string>
    <string name="normal_no_plot">Ingen sammanfattning hittades</string>
    <string name="torrent_no_plot">Ingen beskrivning hittades</string>

    <string name="picture_in_picture">Bild-i-bild</string>
    <string name="picture_in_picture_des">FortsÃ¤tter uppspelning i en miniatyrspelare ovanpÃ¥ andra appar</string>
    <string name="player_size_settings">LÃ¤gger till en knapp fÃ¶r att justera bildfÃ¶rhÃ¥llandet</string>
    <string name="player_size_settings_des">Ta bort de svarta kanterna</string>
    <string name="player_subtitles_settings">Undertexter</string>
    <string name="player_subtitles_settings_des">InstÃ¤llningar fÃ¶r undertexter</string>
    <string name="eigengraumode_settings">Eigengrau LÃ¤ge</string>
    <string name="eigengraumode_settings_des">LÃ¤gger till hastighetsalternativet i spelaren</string>
    <string name="swipe_to_seek_settings">Svep fÃ¶r att strya tiden</string>
    <string name="swipe_to_seek_settings_des">Svep Ã¥t vÃ¤nster eller hÃ¶ger fÃ¶r att styra tiden i videospelaren</string>
    <string name="swipe_to_change_settings">Svep fÃ¶r att Ã¤ndra instÃ¤llningar</string>
    <string name="swipe_to_change_settings_des">Svep pÃ¥ vÃ¤nster eller hÃ¶ger sida fÃ¶r att Ã¤ndra ljusstyrka eller volym</string>
    <string name="double_tap_to_seek_settings">Dubbeltryck fÃ¶r att hoppa fram eller bak</string>
    <string name="double_tap_to_seek_settings_des">Tryck tvÃ¥ gÃ¥nger pÃ¥ hÃ¶ger eller vÃ¤nster sida fÃ¶r att hoppa fram eller bak</string>
    <string name="search">SÃ¶k</string>
    <string name="settings_info">Information</string>
    <string name="advanced_search">Avancerade sÃ¶kresultat</string>
    <string name="advanced_search_des">Presenterar sÃ¶kresultaten i flera olika rader baserat pÃ¥ leverantÃ¶ren</string>
    <string name="bug_report_settings_off">Skickar endast data nÃ¤r appen kraschar</string>
    <string name="bug_report_settings_on">Skickar ingen data</string>
    <string name="updates_settings">Visa appuppdateringar</string>
    <string name="updates_settings_des">SÃ¶k automatiskt efter nya uppdateringar vid start</string>
    <string name="uprereleases_settings">Uppdatera till beta-version</string>
    <string name="uprereleases_settings_des">SÃ¶k efter beta-version istÃ¤llet fÃ¶r fullstÃ¤ndiga utgÃ¥vor av appen</string>
    <string name="github">Github</string>
    <string name="lightnovel">Lightnovel app av samma utvecklare</string>
    <string name="anim">Anime app av samma utvecklare</string>
    <string name="discord">GÃ¥ med i Discord-gruppen</string>
    <string name="benene">Ge en banan till utvecklarna</string>
    <string name="benene_des">Ge banan</string>

    <string name="app_language">SprÃ¥k</string>

    <string name="no_chromecast_support_toast">Denna leverantÃ¶r har inget Chromecast-stÃ¶d</string>
    <string name="no_links_found_toast">Inga lÃ¤nkar hittades</string>
    <string name="copy_link_toast">LÃ¤nken kopierades till urklipp</string>
    <string name="play_episode_toast">Spela upp avsnitt</string>
    <string name="subs_default_reset_toast">Ã…terstÃ¤lld till standardvÃ¤rdet</string>
    <string name="acra_report_toast">Programmet kraschade tyvÃ¤rr. En anonym felrapport kommer att skickas till utvecklarna</string>
    <string name="error_loading_links_toast">Fel uppstod vid laddning av lÃ¤nkarna</string>

    <string name="season">SÃ¤song</string>
    <string name="no_season">Ingen SÃ¤song</string>
    <string name="episode">Avsnitt</string>
    <string name="episodes">Avsnitt</string>
    <string name="season_short">S</string>
    <string name="episode_short">A</string>

    <string name="delete_file">Ta bort nerladdad fil</string>
    <string name="delete">Ta bort</string>
    <string name="delete_message">%s kommer att raderas permanent\nÃ„r du helt sÃ¤ker?</string>

    <string name="status_ongoing">PÃ¥gÃ¥ende</string>
    <string name="status_completed">FÃ¤rdig</string>
    <string name="status">Status</string>
    <string name="year">Publicerad</string>
    <string name="rating">Betyg</string>
    <string name="duration">LÃ¤ngd</string>
    <string name="site">Sida</string>
    <string name="synopsis">Sammanfattning</string>

    <string name="queued">pÃ¥ kÃ¶</string>
    <string name="no_subtitles">Inga undertexter</string>
    <string name="default_subtitles">Standard</string>

    <string name="free_storage">TillgÃ¤ngligt</string>
    <string name="used_storage">AnvÃ¤ntt</string>
    <string name="app_storage">App</string>

    <string name="movies">Filmer</string>
    <string name="tv_series">Tv Serier</string>
    <string name="cartoons">Cartoons</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrent</string>

    <string name="episode_action_chromecast_episode">Chromecasta ett Avsnitt</string>
    <string name="episode_action_chromecast_mirror">Chromecasta en LÃ¤nk</string>
    <string name="episode_action_play_in_app">Spela upp i appen</string>
    <string name="episode_action_play_in_vlc">Spela upp i VLC</string>
    <string name="episode_action_play_in_browser">Spela upp i webblÃ¤saren</string>
    <string name="episode_action_copy_link">Kopiera lÃ¤nk</string>
    <string name="episode_action_auto_download">Automatisk nerladdning</string>
    <string name="episode_action_download_mirror">Ladda ner en specifik lÃ¤nk</string>
    <string name="episode_action_reload_links">Ladda om alla lÃ¤nkar</string>

    <string name="no_update_found">Ingen uppdatering hittad</string>
    <string name="check_for_update">SÃ¶k efter uppdatering</string>

    <string name="video_lock">SkÃ¤rmlÃ¥s</string>
    <string name="video_aspect_ratio_resize">BildfÃ¶rhÃ¥llande</string>
    <string name="video_source">KÃ¤lla</string>
    <string name="video_skip_op">Hoppa Ã¶ver OP</string>

    <string name="dont_show_again">Visa inte igen</string>
    <string name="update">Uppdatera</string>

    <string name="download_started">Nerladdningar startad</string>
    <string name="download_failed">Nerladdning Misslyckades</string>
    <string name="downloaded">Nerladdad</string>
    <string name="downloading">Laddar ner</string>
    <string name="download_paused">Nerladdning Pausad</string>
    <string name="download_canceled">Nerladdning Avbryten</string>
    <string name="download_done">Nerladdning FÃ¤rdig</string>
    <string name="popup_resume_download">Ã…terupta nerladdning</string>
    <string name="popup_pause_download">Pausa nerladdning</string>

    <string name="pause">Pausa</string>
    <string name="resume">Ã…teruppta</string>
    <string name="storage_error">Ett nerladdningsfel uppstod, kolla om appen har lagringsbehÃ¶righeter</string>
    <string name="watch_quality_pref">FÃ¶redragen videokvalitet</string>
    <string name="general">AllmÃ¤nna InstÃ¤llningar</string>
    <string name="subs_font_size">Textstorlek</string>
    <string name="use_system_brightness_settings">AnvÃ¤nd system ljusstyrka</string>
    <string name="use_system_brightness_settings_des">AnvÃ¤nder systemets ljusstyrka instÃ¤llet fÃ¶r en svart Ã¶verlaga</string>
    <string name="show_fillers_settings">Visa filler avsnitt fÃ¶r anime</string>
    <string name="display_subbed_dubbed_settings">Visa Dubbad/Subbad anime</string>
    <string name="resize_fit">Anpassad till skÃ¤rmstorlek</string>
    <string name="provider_lang_settings">LeverantÃ¶rsprÃ¥k</string>
    <string name="resize_fill">UtstrÃ¤ckt</string>
    <string name="resize_zoom">Inzoomad</string>
    <string name="unexpected_error">OfÃ¶rvÃ¤ntat uppspelingsfel</string>
    <string name="source_error">KÃ¤llfel</string>
    <string name="remote_error">FjÃ¤rrfel</string>
    <string name="render_error">Renderingsfel</string>
    <string name="subtitles_example_text">Flygande bÃ¤ckasiner sÃ¶ka hwila pÃ¥ mjuka tuvor</string>
    <string name="subtitles_shadow">Skugga</string>
    <string name="subtitles_outline">Kontur</string>
    <string name="subtitles_depressed">NedsÃ¤nkt</string>
    <string name="subtitles_raised">UpphÃ¶jd</string>
    <string name="none">Ingen</string>
    <string name="normal">Normal</string>
    <string name="all">Allt</string>
    <string name="max">Min</string>
    <string name="min">Max</string>
    <string name="add_account">LÃ¤gg till konto</string>
    <string name="switch_account">Byt konto</string>
    <string name="login">Logga in</string>
    <string name="logout">Logga ut</string>
    <string name="account">konto</string>
    <string name="download_path_pref">Nerladdningsplats</string>
    <string name="type_re_watching">Kollar om</string>
    <string name="automatic">Automatisk</string>
    <string name="dns_pref">DNS Ã¶ver HTTPS</string>
    <string name="dns_pref_summary">" "</string>
    <string name="app_theme_settings">Appens tema</string>
    <string name="app_dub_sub_episode_text_format">%s A%d</string>
</resources>



================================================
FILE: app/src/main/res/values-tl/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <!-- KEYS DON'T TRANSLATE -->


    <!-- FORMAT MIGHT TRANSLATE, WILL CAUSE CRASH IF APPLIED WRONG -->
    <string name="app_dub_sub_episode_text_format">%s Ep %d</string>

    <!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">Poster</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">Episode Poster</string>
    <string name="home_main_poster_img_des">Main Poster</string>
    <string name="home_next_random_img_des">Next Random</string>
    <string name="go_back_img_des">Go back</string>
    <string name="home_change_provider_img_des">Change Provider</string>
    <string name="preview_background_img_des">Preview Background</string>

    <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">Bilis (%.2fx)</string>
    <string name="rated_format" formatted="true">Rated: %.1f</string>
    <string name="new_update_format" formatted="true">Bagong update!\n%s -> %s</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">Home</string>
    <string name="title_search">Maghanap</string>
    <string name="title_downloads">Mga Downloads</string>
    <string name="title_settings">Mga Settings</string>

    <string name="search_hint">Maghanapâ€¦</string>
    <string name="no_data">Walang datos</string>
    <string name="episode_more_options_des">Opsyon</string>
    <string name="next_episode">Susunod na Episode</string>
    <string name="result_tags">Genres</string>
    <string name="result_share">I-share</string>
    <string name="result_open_in_browser">Buksan sa browser</string>
    <string name="skip_loading">Skip Loadingâ€¦</string>
    <string name="loading_chromecast">Loadingâ€¦</string>

    <string name="type_watching">Pinapanood</string>
    <string name="type_on_hold">Inihinto</string>
    <string name="type_completed">Tapos nang panoorin</string>
    <string name="type_dropped">Ayaw nang panoorin</string>
    <string name="type_plan_to_watch">Balak panoorin</string>
    <string name="type_none">None</string>

    <string name="play_movie_button">I-play ang Movie</string>
    <string name="play_torrent_button">Stream Torrent</string>
    <string name="pick_source">Sources</string>
    <string name="pick_subtitle">Subtitles</string>
    <string name="reload_error">Retry connectionâ€¦</string>
    <string name="go_back">Go back</string>
    <string name="play_episode">I-play ang episode</string>
    <!--<string name="need_storage">Payagan sa Itabi</string>-->

    <string name="download">Download</string>
    <string name="downloaded">Downloaded</string>
    <string name="downloading">Downloading</string>
    <string name="download_paused">Download Paused</string>
    <string name="download_started">Download Started</string>
    <string name="download_failed">Download Failed</string>
    <string name="download_canceled">Download Canceled</string>
    <string name="download_done">Download Done</string>

    <string name="error_loading_links_toast">Error Loading Links</string>
    <string name="download_storage_text">Internal Storage</string>

    <string name="app_dubbed_text">Dub</string>
    <string name="app_subbed_text">Sub</string>

    <string name="popup_delete_file">I-delete ang file</string>
    <string name="popup_play_file">I-play ang file</string>
    <string name="popup_resume_download">I-resume ang download</string>
    <string name="popup_pause_download">I-pause ang download</string>

    <string name="pref_disable_acra">Huwag awtomatikong mag-ulat ng bug</string>
    <string name="home_more_info">More Info</string>
    <string name="home_expanded_hide">Itago</string>
    <string name="home_play">I-play</string>
    <string name="home_info">Impormasyon</string>
    <string name="filter_bookmarks">Filter Bookmarks</string>
    <string name="error_bookmarks_text">Bookmark</string>
    <string name="action_remove_from_bookmarks">Tanggalin</string>
    <string name="sort_apply">Kumpirmahin</string>
    <string name="sort_cancel">Kanselahin</string>
    <string name="player_speed">Bilis ng Playback</string>

    <string name="subtitles_settings">Subtitle Setting</string>
    <string name="subs_text_color">Kulay ng Teksto</string>
    <string name="subs_outline_color">Kulay ng Outline</string>
    <string name="subs_background_color">Kulay ng Background</string>
    <string name="subs_window_color">Window Color</string>
    <string name="subs_edge_type">Edge Type</string>
    <string name="subs_subtitle_elevation">Subtitle Elevation</string>
    <string name="subs_font">Istilo ng Font</string>
    <string name="subs_font_size">Laki ng Font</string>

    <string name="search_provider_text_providers">Search using providers</string>
    <string name="search_provider_text_types">Search using types</string>

    <string name="benene_count_text">%d Benenes na ibinigay sa mga devs</string>
    <string name="benene_count_text_none">Walang Benenes na binigay</string>

    <string name="subs_auto_select_language">Awtomatikong magpili ng lenggwahe</string>
    <string name="subs_download_languages">Download Languages</string>
    <string name="subs_hold_to_reset_to_default">Pindutin nang matagal upang i-reset sa default</string>
    <string name="continue_watching">Ipagpatuloy ang pinapanood</string>

    <string name="action_remove_watching">Tanggalin</string>
    <string name="action_open_watching">Impormasyon</string>

    <string name="vpn_might_be_needed">Maaaring nangangailangan gumamit ng VPN upang gumana ito</string>
    <string name="vpn_torrent">Ito ay torrent, inirerekomenda ang paggamit ng VPN</string>
    <string name="torrent_plot">Deskripsyon</string>
    <string name="normal_no_plot">Walang nakitang plot</string>
    <string name="torrent_no_plot">Walang nakitang deskripsyon</string>

    <string name="picture_in_picture">Picture-in-picture</string>
    <string name="picture_in_picture_des">Nagpapatuloy ang playback sa isang maliit na player sa itaas ng ibang apps</string>
    <string name="player_size_settings">Pindutan upang baguhin ang laki</string>
    <string name="player_size_settings_des">Alisin ang black borders</string>
    <string name="player_subtitles_settings">Subtitles</string>
    <string name="player_subtitles_settings_des">Player subtitles settings</string>
    <string name="eigengraumode_settings">Eigengravy Mode</string>
    <string name="eigengraumode_settings_des">Nagdadagdag ng opsyon sa player upang baguhin ang bilis ng pinapanood</string>
    <string name="swipe_to_seek_settings">Swipe to seek</string>
    <string name="swipe_to_seek_settings_des">Swipe pakanan o pakaliwa upang makontrol ang oras ng pinapanood</string>
    <string name="swipe_to_change_settings">Swipe to change settings</string>
    <string name="swipe_to_change_settings_des">Swipe pataas/pababa sa kanan o kaliwang bahagi ng player upang dagdagan/bawasan ang brightness/volume</string>
    <string name="double_tap_to_seek_settings">Double tap to seek</string>
    <string name="double_tap_to_seek_settings_des">Tapikin ng dalawang beses sa kanan o kaliwang bahagi ng player upang mag-forward/backward</string>
    <string name="use_system_brightness_settings">Gamitin ang brightness ng system</string>
    <string name="use_system_brightness_settings_des">Gamitin ang brightness ng system para sa player</string>

    <string name="search">Maghanap</string>
    <string name="settings_info">Impormasyon</string>
    <string name="advanced_search">Adbans na maghanap</string>
    <string name="advanced_search_des">Magbibigay ng pinaghiwa-hiwalay na resulta</string>
    <string name="bug_report_settings_off">Nagpapadala lamang ng data kung nag-crash ang app</string>
    <string name="bug_report_settings_on">Hindi magpapadala ng kahit anong data</string>
    <string name="show_fillers_settings">Ipakita ang filler episode sa anime</string>
    <string name="updates_settings">Ipakita kung may bagong update</string>
    <string name="updates_settings_des">Awtomatikong mag-check ng bagong update pagbukas ng app</string>
    <string name="uprereleases_settings">Update to prereleases</string>
    <string name="uprereleases_settings_des">Search for prerelease updates instead of full releases only</string>
    <string name="github">Github</string>
    <string name="lightnovel">Light novel app ng parehong devs</string>
    <string name="anim">Anime app ng parehong devs</string>
    <string name="discord">Sumali sa Discord</string>
    <string name="benene">Magbigay ng benene sa ang devs</string>
    <string name="benene_des">Sumali benene</string>

    <string name="app_language">Wika</string>

    <string name="no_chromecast_support_toast">Walang chromecast support ang provider na ito</string>
    <string name="no_links_found_toast">Walang link na nakita</string>
    <string name="copy_link_toast">Link copied to clipboard</string>
    <string name="play_episode_toast">Play Episode</string>
    <string name="subs_default_reset_toast">I-reset sa default value</string>
    <string name="acra_report_toast">Paumanhin, ang app ay nag-crash. Isang anonymous bug report ang ipapadala sa developers</string>

    <string name="season">Season</string>
    <string name="no_season">No season</string>
    <string name="episode">Episode</string>
    <string name="episodes">Episodes</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>

    <string name="delete_file">Burahin ang file</string>
    <string name="delete">Tanggalin</string>
    <string name="pause">I-pause</string>
    <string name="resume">I-resume</string>
    <string name="delete_message">This will permanently delete %s\nAre you sure?</string>

    <string name="status_ongoing">Patuloy</string>
    <string name="status_completed">Tapos na</string>
    <string name="status">Katayuan</string>
    <string name="year">Taon</string>
    <string name="rating">Marka</string>
    <string name="duration">Tagal</string>
    <string name="site">Site</string>
    <string name="synopsis">Sinopsis</string>

    <string name="queued">nakapila</string>
    <string name="no_subtitles">walang subtitles</string>
    <string name="default_subtitles">Default</string>

    <string name="free_storage">Bakante</string>
    <string name="used_storage">Gamit</string>
    <string name="app_storage">App</string>

    <string name="movies">Pelikula</string>
    <string name="tv_series">Palabas sa TV</string>
    <string name="cartoons">Cartoons</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrent</string>

    <string name="source_error">Source error</string>
    <string name="remote_error">Remote error</string>
    <string name="render_error">Renderer error</string>
    <string name="unexpected_error">Unexpected player error</string>
    <string name="storage_error">Download error, check storage permissions</string>

    <string name="episode_action_chromecast_episode">Chromecast Episode</string>
    <string name="episode_action_chromecast_mirror">Chromecast Mirror</string>
    <string name="episode_action_play_in_app">I-play sa App</string>
    <string name="episode_action_play_in_vlc">I-play sa VLC</string>
    <string name="episode_action_play_in_browser">I-play sa browser</string>
    <string name="episode_action_copy_link">Kopyahin ang Link</string>
    <string name="episode_action_auto_download">Awtomatiking i-download</string>
    <string name="episode_action_download_mirror">Download mirror</string>
    <string name="episode_action_reload_links">Subukan muli</string>

    <string name="no_update_found">Walang bagong update</string>
    <string name="check_for_update">Tingnan kung may bagong update</string>

    <string name="video_lock">I-lock</string>
    <string name="video_aspect_ratio_resize">Palakihin</string>
    <string name="video_source">Source</string>
    <string name="video_skip_op">Skip OP</string>

    <string name="dont_show_again">Huwag nang ipakita ulit</string>
    <string name="update">Update</string>
    <string name="watch_quality_pref">Preferred watch quality</string>
    <string name="dns_pref">DNS over HTTPS</string>
    <string name="dns_pref_summary">Mainam gamitin sa pag-bypass ng ISP blocks</string>

    <string name="display_subbed_dubbed_settings">Display Dubbed/Subbed Anime</string>

    <string name="resize_fit">Fit to screen</string>
    <string name="resize_fill">Punan ang buong screen</string>
    <string name="resize_zoom">Zoom</string>

    <string name="general">Pangkalahatan</string>
    <string name="provider_lang_settings">Lenggwahe ng Provider</string>
    <string name="app_layout">App Layout</string>
    <string name="automatic">Awtomatik</string>
    <string name="tv_layout">TV Layout</string>
    <string name="phone_layout">Phone Layout</string>
    <string name="primary_color_settings">Pangunahin Kulay</string>
    <string name="app_theme_settings">Tema ng app</string>
    <string name="preferred_media_settings">Preferred Media</string>
</resources>



================================================
FILE: app/src/main/res/values-tr/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <!-- FORMAT MIGHT TRANSLATE, WILL CAUSE CRASH IF APPLIED WRONG -->
    <string name="extra_info_format" translatable="false" formatted="true">%d %s | %sMB</string>
    <string name="storage_size_format" translatable="false" formatted="true">%s â€¢ %sGB</string>
    <string name="download_size_format" translatable="false" formatted="true">%sMB / %sMB</string>
    <string name="mb_format" translatable="false" formatted="true">%dMB</string>
    <string name="episode_name_format" translatable="false" formatted="true">%s %s</string>
    <string name="ffw_text_format" translatable="false" formatted="true">+%d</string>
    <string name="rew_text_format" translatable="false" formatted="true">-%d</string>
    <string name="ffw_text_regular_format" translatable="false" formatted="true">%d</string>
    <string name="rew_text_regular_format" translatable="false" formatted="true">%d</string>
    <string name="rating_format" translatable="false" formatted="true">%.1f/10.0</string>
    <string name="year_format" translatable="false" formatted="true">%d</string>
    <string name="app_dub_sub_episode_text_format" formatted="true">%s Ep %d</string>
    <string name="cast_format" formatted="true">Cast: %s</string>

    <!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">Poster</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">Episode Poster</string>
    <string name="home_main_poster_img_des">Main Poster</string>
    <string name="home_next_random_img_des">Next Random</string>
    <string name="episode_play_img_des" translatable="false">@string/play_episode</string>
    <string name="go_back_img_des">Go back</string>
    <string name="change_providers_img_des" translatable="false">@string/home_change_provider_img_des</string>
    <string name="home_change_provider_img_des">Change Provider</string>
    <string name="preview_background_img_des">Preview Background</string>

    <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">HÄ±z (%.2fx)</string>
    <string name="rated_format" formatted="true">Puan: %.1f</string>
    <string name="new_update_format" formatted="true">Yeni gÃ¼ncelleme bulundu!\n%s -> %s</string>
    <string name="filler" formatted="true">Filler</string>
    <string name="duration_format" formatted="true">%d min</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">Ana Sayfa</string>
    <string name="title_search">Arama</string>
    <string name="title_downloads">Ä°ndirmeler</string>
    <string name="title_settings">Ayarlar</string>

    <string name="search_hint">Araâ€¦</string>
    <string name="no_data">Veri Yok</string>
    <string name="episode_more_options_des">Daha Fazla SeÃ§enek</string>
    <string name="next_episode">Sonraki bÃ¶lÃ¼m</string>
    <string name="result_plot" translatable="false">@string/synopsis</string>
    <string name="result_tags">TÃ¼rler</string>
    <string name="result_share">PaylaÅŸ</string>
    <string name="result_open_in_browser">TarayÄ±cÄ±da AÃ§</string>
    <string name="skip_loading">YÃ¼klemeyi Atla</string>
    <string name="loading_chromecast">YÃ¼kleniyorâ€¦</string>

    <string name="type_watching">Ä°zleniyor</string>
    <string name="type_on_hold">Bekleniyor</string>
    <string name="type_completed">TamamlandÄ±</string>
    <string name="type_dropped">BÄ±rakÄ±ldÄ±</string>
    <string name="type_plan_to_watch">PlanlandÄ±</string>
    <string name="type_none">HiÃ§biri</string>
    <string name="type_re_watching">Yeniden Ä°zleniyor</string>

    <string name="play_movie_button">Filmi Oynat</string>
    <string name="play_torrent_button">Torrent Oynat</string>
    <string name="pick_source">Kaynaklar</string>
    <string name="pick_subtitle">AltyazÄ±lar</string>
    <string name="reload_error">Yeniden baÄŸlanâ€¦</string>
    <string name="go_back">Geri DÃ¶n</string>
    <string name="play_episode">BÃ¶lÃ¼mÃ¼ Oynat</string>
    <!--<string name="need_storage">Allow to download episodes</string>-->

    <string name="download">Ä°ndir</string>
    <string name="downloaded">Ä°ndirildi</string>
    <string name="downloading">Ä°ndiriliyor</string>
    <string name="download_paused">Ä°ndirme Durduruldu</string>
    <string name="download_started">Ä°ndirme BaÅŸlatÄ±ldÄ±</string>
    <string name="download_failed">Ä°ndirme BaÅŸarÄ±sÄ±z</string>
    <string name="download_canceled">Ä°ndirme Ä°ptal Edildi</string>
    <string name="download_done">Ä°ndirme Bitti</string>
    <string name="download_format" translatable="false">%s - %s</string>

    <string name="error_loading_links_toast">BaÄŸlantÄ±larÄ± YÃ¼kleme BaÅŸarÄ±sÄ±z</string>
    <string name="download_storage_text">Dahili Depolama</string>

    <string name="app_dubbed_text">Dublaj</string>
    <string name="app_subbed_text">AltyazÄ±</string>

    <string name="popup_delete_file">DosyayÄ± Sil</string>
    <string name="popup_play_file">DosyayÄ± Oynat</string>
    <string name="popup_resume_download">Ä°ndirmeyi SÃ¼rdÃ¼r</string>
    <string name="popup_pause_download">Ä°ndirmeyi Durdur</string>

    <string name="pref_disable_acra">Otomatik hata raporlamayÄ± devre dÄ±ÅŸÄ± bÄ±rak</string>
    <string name="home_more_info">Daha fazla bilgi</string>
    <string name="home_expanded_hide">Gizle</string>
    <string name="home_play">Oynat</string>
    <string name="home_info">Bilgi</string>
    <string name="filter_bookmarks">Yer imlerini filtrele</string>
    <string name="error_bookmarks_text">Yer imleri</string>
    <string name="action_remove_from_bookmarks">KaldÄ±r</string>
    <string name="action_add_to_bookmarks">Ä°zleme durumunu ayarla</string>
    <string name="sort_apply">Uygula</string>
    <string name="sort_cancel">Ä°ptal Et</string>
    <string name="sort_copy">Kopyala</string>
    <string name="sort_close">Kapat</string>
    <string name="sort_clear">Temizle</string>
    <string name="sort_save">Kaydet</string>

    <string name="player_speed">Oynatma HÄ±zÄ±</string>

    <string name="subtitles_settings">AltyazÄ± AyarlarÄ±</string>
    <string name="subs_text_color">Metin Rengi</string>
    <string name="subs_outline_color">DÄ±ÅŸ Hat Rengi</string>
    <string name="subs_background_color">Arkaplan Rengi</string>
    <string name="subs_window_color">Pencere Rengi</string>
    <string name="subs_edge_type">Kenar Tipi</string>
    <string name="subs_subtitle_elevation">AltyazÄ± YÃ¼ksekliÄŸi</string>
    <string name="subs_font">Font</string>
    <string name="subs_font_size">Font BÃ¼yÃ¼klÃ¼ÄŸÃ¼</string>

    <string name="search_provider_text_providers">SaÄŸlayÄ±cÄ±larÄ± kullanarak ara</string>
    <string name="search_provider_text_types">TÃ¼rleri kullanarak ara</string>

    <string name="benene_count_text">GeliÅŸtiricilere %d muz verildi</string>
    <string name="benene_count_text_none">HiÃ§ muz verilmedi</string>

    <string name="subs_auto_select_language">Dili otomatik seÃ§</string>
    <string name="subs_download_languages">Dilleri Ä°ndir</string>
    <string name="subs_hold_to_reset_to_default">VarsayÄ±lana dÃ¶ndÃ¼rmek iÃ§in basÄ±lÄ± tut</string>
    <string name="continue_watching">Ä°zlemeye Devam Et</string>

    <string name="action_remove_watching">KaldÄ±r</string>
    <string name="action_open_watching">Daha Fazla Bilgi</string>
    <string name="action_open_play">@string/home_play </string>

    <string name="vpn_might_be_needed">Bu saÄŸlayÄ±cÄ±nÄ±n dÃ¼zgÃ¼n Ã§alÄ±ÅŸmasÄ± iÃ§in VPN gerekebilir</string>
    <string name="vpn_torrent">Bu saÄŸlayÄ±cÄ± bir Torrent, VPN kullanmanÄ±z Ã¶nerilir</string>

    <string name="provider_info_meta">Site Metadata verisini saÄŸlamadÄ±, video eÄŸer sitede bulunmuyorsa oynatma baÅŸarÄ±sÄ±z olabilir</string>

    <string name="torrent_plot">AÃ§Ä±klama</string>
    <string name="normal_no_plot">Senaryo bulunamadÄ±</string>
    <string name="torrent_no_plot">AÃ§Ä±klama bulunamadÄ±</string>

    <string name="show_log_cat">logcat\'i gÃ¶ster ðŸˆ</string>

    <string name="picture_in_picture">Resim-iÃ§inde-resim</string>
    <string name="picture_in_picture_des">DiÄŸer uygulamalarÄ±n Ã¼zerinde minyatÃ¼r oynatÄ±cÄ±yÄ± Ã§alÄ±ÅŸtÄ±rÄ±r</string>
    <string name="player_size_settings">Yeniden boyutlandÄ±rma butonu</string>
    <string name="player_size_settings_des">Siyah kenarlÄ±klarÄ± kaldÄ±r</string>
    <string name="player_subtitles_settings">AltyazÄ±lar</string>
    <string name="player_subtitles_settings_des">OynatÄ±cÄ± altyazÄ± seÃ§enekleri</string>
    <string name="chromecast_subtitles_settings">Chromecast AltyazÄ±larÄ±</string>
    <string name="chromecast_subtitles_settings_des">Chromecast AltyazÄ± AyarlarÄ±</string>

    <string name="eigengraumode_settings">Eigengravy Modu</string>
    <string name="eigengraumode_settings_des">HÄ±z seÃ§eneÄŸi ekler</string>
    <string name="swipe_to_seek_settings">GÃ¶zlemek iÃ§in kaydÄ±r</string>
    <string name="swipe_to_seek_settings_des">ZamanÄ± ayarlamak iÃ§in saÄŸa ve sola kaydÄ±r</string>
    <string name="swipe_to_change_settings">AyarlarÄ± deÄŸiÅŸtirmek iÃ§in kaydÄ±r</string>
    <string name="swipe_to_change_settings_des">Sol ve saÄŸ taraftan kaydÄ±rarak parlaklÄ±k ve sesi ayarla</string>
    <string name="double_tap_to_seek_settings">GÃ¶zlemek iÃ§in Ã§ift tÄ±kla</string>
    <string name="double_tap_to_pause_settings">Durdurmak iÃ§in Ã§ift tÄ±kla</string>
    <string name="double_tap_to_seek_settings_des">Ä°leri ve geri atlamak iÃ§in saÄŸ ve sola Ã§ift tÄ±kla
    </string>
    <string name="double_tap_to_pause_settings_des">Durdurmak iÃ§in ortaya bas</string>
    <string name="use_system_brightness_settings">Sistem parlaklÄ±ÄŸÄ±nÄ± kullan</string>
    <string name="use_system_brightness_settings_des">OynatÄ±cÄ±da karanlÄ±k kaplama yerine sistem parlaklÄ±ÄŸÄ±nÄ± kullan
    </string>

    <string name="episode_sync_settings">Ä°zleme ilerlemesini gÃ¼ncelle</string>
    <string name="episode_sync_settings_des">Mevcut bÃ¶lÃ¼m ilerlemesini otomatik gÃ¼ncelle</string>

    <string name="restore_settings">Yedekten veri iade et</string>
    <string name="killswitch_settings">Github\'dan en son metadata\'yÄ± indir</string>
    <string name="killswitch_settings_des">If you want access to all providers (even broken ones) turn this off TÃ¼m saÄŸlayÄ±cÄ±lara eriÅŸim istiyorsan (bozuk olanlar dahil) bunu kapat</string>

    <string name="backup_settings">Veri Yedekle</string>
    <string name="restore_success">Yedek dosyayÄ± yÃ¼klendi</string>
    <string name="restore_failed_format" formatted="true">Dosyadan veri iade etme baÅŸarÄ±sÄ±z %s</string>
    <string name="backup_success">Veri baÅŸarÄ±yla depolandÄ±</string>
    <string name="backup_failed">Depolama izinleri eksik, lÃ¼tfen tekrar deneyin</string>
    <string name="backup_failed_error_format">Yedekleme hatasÄ± %s</string>

    <string name="search">Ara</string>
    <string name="category_nginx">Nginx AyarlarÄ±</string>
    <string name="nginx_credentials_title">Nginx Kimlik Bilgileri</string>
    <string name="nginx_credentials_summary">Ã–rnekteki formatta yazmalÄ±sÄ±n havalÄ±kullanÄ±cÄ±adÄ±m:gÃ¼venliÅŸifrem123</string>
    <string name="nginx_info_title">Nginx nedir?</string>
    <string name="nginx_info_summary">Nginx sahip olduÄŸun sunucundaki dosyalarÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in kullanÄ±labilecek bir yazÄ±lÄ±mdÄ±r. Nginx kurulum rehberini gÃ¶rmek iÃ§in tÄ±kla</string>

    <string name="settings_info">Bilgi</string>
    <string name="advanced_search">GeliÅŸmiÅŸ Arama</string>
    <string name="advanced_search_des">SaÄŸlaayÄ±cÄ±lar ile ayrÄ±lmÄ±ÅŸ arama sonuÃ§larÄ±nÄ± verir</string>
    <string name="bug_report_settings_off">Sadece Ã§Ã¶kme durumunda veri gÃ¶nderir</string>
    <string name="bug_report_settings_on">HiÃ§ veri gÃ¶ndermez</string>
    <string name="show_fillers_settings">Anime iÃ§in filler bÃ¶lÃ¼mleri gÃ¶sterir</string>
    <string name="updates_settings">Uygulama gÃ¼ncellemelerini gÃ¶ster</string>
    <string name="updates_settings_des">UygulamayÄ± baÅŸlattÄ±ÄŸÄ±nda yeni gÃ¼ncelleme olup olmadÄ±ÄŸÄ±nÄ± kontrol et</string>
    <string name="uprereleases_settings">Ã–n sÃ¼rÃ¼me gÃ¼ncelle</string>
    <string name="uprereleases_settings_des"> Sadece tam sÃ¼rÃ¼mler yerine Ã¶n sÃ¼rÃ¼mleri de ara</string>
    <string name="github">Github</string>
    <string name="lightnovel">AynÄ± geliÅŸtiricilerden LightNovel uygulamasÄ±</string>
    <string name="anim">AynÄ± geliÅŸtiricilerden anime uygulamasÄ±</string>
    <string name="discord">Discord\'a katÄ±l</string>
    <string name="benene">GeliÅŸtiricilere muz ver</string>
    <string name="benene_des">Verilen muzlar</string>

    <string name="app_language">Uygulama Dili</string>


    <string name="no_chromecast_support_toast">Bu saÄŸlayÄ±cÄ±nÄ±n Chromecast desteÄŸi yok</string>
    <string name="no_links_found_toast">BaÄŸlantÄ± bulunamadÄ±</string>


    <string name="copy_link_toast">BaÄŸlantÄ± panoya kopyalandÄ±</string>
    <string name="play_episode_toast">BÃ¶lÃ¼mÃ¼ Oynat</string>
    <string name="subs_default_reset_toast">VarsayÄ±lan deÄŸere dÃ¶n</string>
    <string name="acra_report_toast">ÃœzgÃ¼nÃ¼m, uygulama Ã§Ã¶ktÃ¼. Anonim hata raporu geliÅŸtiricilere gÃ¶nderilecek
    </string>

    <string name="season">Sezon</string>
    <string name="no_season">Sezon yok</string>
    <string name="episode">BÃ¶lÃ¼m</string>
    <string name="episodes">BÃ¶lÃ¼mler</string>
    <string name="season_short">S</string>
    <string name="episode_short">B</string>
    <string name="no_episodes_found">BÃ¶lÃ¼m BulunamadÄ±</string>

    <string name="delete_file">DosyayÄ± Sil</string>
    <string name="delete">Sil</string>
    <string name="cancel" translatable="false">@string/sort_cancel</string>
    <string name="pause">Durdur</string>
    <string name="resume">SÃ¼rdÃ¼r</string>
    <string name="go_back_30">-30</string>
    <string name="go_forward_30">+30</string>
    <string name="delete_message" formatted="true">Dosya tamamen silinecek %s\nEmin misin?</string>
    <string name="resume_time_left" formatted="true">%dm\nkalan</string>


    <string name="status_ongoing">Devam ediyor</string>
    <string name="status_completed">TamamlandÄ±</string>
    <string name="status">Durum</string>
    <string name="year">YÄ±l</string>
    <string name="rating">Puan</string>
    <string name="duration">SÃ¼re</string>
    <string name="site">Site</string>
    <string name="synopsis">Ã–zet</string>

    <string name="queued">kuyrukta</string>
    <string name="no_subtitles">AltyazÄ± Yok</string>
    <string name="default_subtitles">VarsayÄ±lan</string>

    <string name="free_storage">KullanÄ±labilir</string>
    <string name="used_storage">KullanÄ±lan</string>
    <string name="app_storage">Uygulama</string>

    <!--plural-->
    <string name="movies">Filmler</string>
    <string name="tv_series">Diziler</string>
    <string name="cartoons">Ã‡izgi Filmler</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrentler</string>
    <string name="documentaries">Belgeseller</string>
    <string name="ova">OVA</string>
    <string name="asian_drama">Asya DramalarÄ±</string>

    <!--singular-->
    <string name="movies_singular">Film</string>
    <string name="tv_series_singular">Dizi</string>
    <string name="cartoons_singular">Ã‡izgi Film</string>
    <string name="anime_singular">@string/anime</string>
    <string name="ova_singular">@string/ova</string>
    <string name="torrent_singular">Torrent</string>
    <string name="documentaries_singular">Belgesel</string>
    <string name="asian_drama_singular">Asya DramasÄ±</string>

    <string name="source_error">Kaynak hatasÄ±</string>
    <string name="remote_error">Uzak sunucu hatasÄ±</string>
    <string name="render_error">OluÅŸturucu hatasÄ±</string>
    <string name="unexpected_error">OynatÄ±cÄ±da beklenmeyen hata</string>
    <string name="storage_error">Ä°ndirme hatasÄ±, depolama izinlerini kontrol et</string>


    <string name="episode_action_chromecast_episode">Chromecast bÃ¶lÃ¼mÃ¼</string>
    <string name="episode_action_chromecast_mirror">Chromecast yansÄ±tma</string>
    <string name="episode_action_play_in_app">Uygulamada oynat</string>
    <string name="episode_action_play_in_vlc">VLC\'de oynat</string>
    <string name="episode_action_play_in_browser">TarayÄ±cÄ±da oynat</string>
    <string name="episode_action_copy_link">BaÄŸlantÄ±yÄ± kopyala</string>
    <string name="episode_action_auto_download">Otomatik indir</string>
    <string name="episode_action_download_mirror">Ayna kaynaktan indir</string>
    <string name="episode_action_reload_links">BaÄŸlantÄ±yÄ± yeniden yÃ¼kle</string>
    <string name="episode_action_download_subtitle">AltyazÄ±larÄ± indir</string>


    <string name="no_update_found">GÃ¼ncelleme bulunamadÄ±</string>
    <string name="check_for_update">GÃ¼ncellemeyi kontrol et</string>

    <string name="video_lock">Kilitle</string>
    <string name="video_aspect_ratio_resize">BoyutlandÄ±r</string>
    <string name="video_source">Kaynak</string>
    <string name="video_skip_op">BaÅŸlangÄ±cÄ± atla</string>

    <string name="dont_show_again">Tekrar gÃ¶sterme</string>
    <string name="update">GÃ¼ncelle</string>
    <string name="watch_quality_pref">Tercih edilen izleme kalitesi</string>
    <string name="limit_title">OynatÄ±cÄ±da baÅŸlÄ±k karakterini sÄ±nÄ±rla</string>
    <string name="video_buffer_size_settings">Video ara bellek boyutu</string>
    <string name="video_buffer_length_settings">Video ara bellek uzunluÄŸu</string>
    <string name="video_buffer_disk_settings">Video disk Ã¶nbelleÄŸi</string>
    <string name="video_buffer_clear_settings">Video ve resim Ã¶nbelleÄŸini temizle</string>

    <string name="video_ram_description">Android TV cihazlarÄ± veya eski telefonlar gibi RAM\'i dÃ¼ÅŸÃ¼k olan sistemlerde Ã§ok yÃ¼ksek ayarlarsanÄ±z sorun Ã§Ä±karabilir</string>
    <string name="video_disk_description">Ã‡ok yÃ¼kseÄŸe ayarlarsanÄ±z, Android TV cihazlarÄ± gibi dÃ¼ÅŸÃ¼k depolama alanÄ±na sahip sistemlerde sorunlara neden olabilir</string>

    <string name="dns_pref">HTTPS Ã¼zeri DNS</string>
    <string name="dns_pref_summary">Ä°SS engellerine karÅŸÄ± kullanÄ±ÅŸlu</string>

    <string name="download_path_pref">Ä°ndirme yolu</string>

    <string name="nginx_url_pref">Nginx sunucu url\'si</string>

    <string name="display_subbed_dubbed_settings">DublajlÄ±/AltyazÄ±lÄ± Anime gÃ¶ster</string>

    <string name="resize_fit">Ekrana SÄ±ÄŸdÄ±r</string>
    <string name="resize_fill">Uzat</string>
    <string name="resize_zoom">YakÄ±nlaÅŸtÄ±r</string>

    <string name="legal_notice">Disclaimer</string>
    <string name="legal_notice_key" translatable="false">legal_notice_key</string>
    <string name="legal_notice_text" translatable="false">Any legal issues regarding the content on this application
        should be taken up with the actual file hosts and providers themselves as we are not affiliated with them.

        In case of copyright infringement, please directly contact the responsible parties or the streaming websites.

        The app is purely for educational and personal use.

        CloudStream 3 does not host any content on the app, and has no control over what media is put up or taken down.
        CloudStream 3 functions like any other search engine, such as Google. CloudStream 3 does not host, upload or
        manage any videos, films or content. It simply crawls, aggregates and displayes links in a convenient,
        user-friendly interface.

        It merely scrapes 3rd-party websites that are publicly accessable via any regular web browser. It is the
        responsibility of user to avoid any actions that might violate the laws governing his/her locality. Use
        CloudStream 3 at your own risk.
    </string>
    <string name="general">Genel</string>
    <string name="provider_lang_settings">SaÄŸlayÄ±cÄ± Dilleri</string>
    <string name="app_layout">Uygulama DÃ¼zeni</string>
    <string name="preferred_media_settings">Tercih Edilen Medya</string>

    <string name="automatic">Otomatik</string>
    <string name="tv_layout">TV DÃ¼zeni</string>
    <string name="phone_layout">Telefon DÃ¼zeni</string>
    <string name="emulator_layout">EmÃ¼latÃ¶r DÃ¼zeni</string>

    <string name="primary_color_settings">Birincil Renk</string>
    <string name="app_theme_settings">Uygulama TemasÄ±</string>

    <!-- account stuff -->
    <string name="anilist_key" translatable="false">anilist_key</string>
    <string name="mal_key" translatable="false">mal_key</string>
    <!--
    <string name="mal_account_settings" translatable="false">MAL</string>
    <string name="anilist_account_settings" translatable="false">AniList</string>
    <string name="tmdb_account_settings" translatable="false">TMDB</string>
    <string name="imdb_account_settings" translatable="false">IMDB</string>
    <string name="kitsu_account_settings" translatable="false">Kitsu</string>
    <string name="trakt_account_settings" translatable="false">Trakt</string>
    -->
    <string name="login_format" formatted="true">%s %s</string>
    <string name="account">hesap</string>
    <string name="logout">Ã‡Ä±kÄ±ÅŸ</string>
    <string name="login">GiriÅŸ</string>
    <string name="switch_account">Hesap deÄŸiÅŸtir</string>
    <string name="add_account">Hesap ekle</string>
    <string name="add_sync">BÃ¶lÃ¼m takibi ekle</string>
    <string name="added_sync_format" formatted="true">Eklendi %s</string>
    <string name="upload_sync">Senkronize et</string>
    <string name="sync_score">Puan</string>
    <string name="sync_score_format" formatted="true">%d / 10</string>
    <string name="sync_total_episodes_none">/??</string>
    <string name="sync_total_episodes_some" formatted="true">/%d</string>
    <string name="authenticated_user" formatted="true">DoÄŸrulandÄ± %s</string>
    <string name="authenticated_user_fail" formatted="true">DoÄŸrulama BaÅŸarÄ±sÄ±z %s</string>

    <!-- ============ -->
    <string name="none">HiÃ§biri</string>
    <string name="normal">Normal</string>
    <string name="all">Hepsi</string>
    <string name="max">Maks</string>
    <string name="min">Min</string>
    <string name="subtitles_none" translatable="false">@string/none</string>
    <string name="subtitles_outline">DÄ±ÅŸ Hat</string>
    <string name="subtitles_depressed">Depresif</string>
    <string name="subtitles_shadow">GÃ¶lge</string>
    <string name="subtitles_raised">YÃ¼kseltilmiÅŸ</string>
    <string name="subtitle_offset">AltyazÄ± senkronu</string>
    <string name="subtitle_offset_hint">1000ms</string>
    <string name="subtitle_offset_title">AltyazÄ± gecikmesi</string>
    <string name="subtitle_offset_extra_hint_later_format">Bunu altyazÄ±lar %dms erken geliyorsa kullan</string>
    <string name="subtitle_offset_extra_hint_before_format">Bunu altyazÄ±lar %dms geÃ§ kalÄ±yorsa kullan</string>
    <string name="subtitle_offset_extra_hint_none_format">AltyazÄ± gecikmesi yok</string>

    <!--
    Example text (pangram) can optionally be translated; if you do, include all the letters in the alphabet,
    see: 
	https://en.wikipedia.org/w/index.php?title=Pangram&oldid=225849300
	https://en.wikipedia.org/wiki/The_quick_brown_fox_jumps_over_the_lazy_dog
    -->
    <string name="subtitles_example_text">PijamalÄ± hasta yaÄŸÄ±z ÅŸofÃ¶re Ã§abucak gÃ¼vendi</string>

    <string name="recommended">Tavsiye edilen</string>
    <string name="player_loaded_subtitles" formatted="true">YÃ¼klendi %s</string>
    <string name="player_load_subtitles">Dosyadan yÃ¼kle</string>
    <string name="downloaded_file">Ä°ndirilen dosya</string>
    <string name="actor_main">Ana</string>
    <string name="actor_supporting">Destekliyor</string>
    <string name="actor_background">Arkaplan</string>

    <string name="home_source">Kaynak</string>

    <string name="coming_soon">Ã‡ok YakÄ±ndaâ€¦</string>

    <string name="quality_cam">Cam</string>
    <string name="quality_cam_rip">Cam</string>
    <string name="quality_cam_hd">Cam</string>
    <string name="quality_hq">HQ</string>
    <string name="quality_hd">HD</string>
    <string name="quality_ts">TS</string>
    <string name="quality_tc">TC</string>
    <string name="quality_blueray">BlueRay</string>
    <string name="quality_workprint">WP</string>
    <string name="quality_dvd">DVD</string>
    <string name="quality_4k">4K</string>
    <string name="quality_sd">SD</string>
    <string name="quality_uhd">UHD</string>
    <string name="quality_hdr">HDR</string>
    <string name="quality_sdr">SDR</string>
    <string name="quality_webrip">Web</string>

    <string name="poster_image">Poster Resmi</string>
</resources>



================================================
FILE: app/src/main/res/values-vi/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <string name="player_speed_text_format" formatted="true">Tá»‘c Ä‘á»™ (%.2fx)</string>
    <string name="rated_format" formatted="true">ÄÃ¡nh giÃ¡: %.1f</string>
    <string name="new_update_format" formatted="true">ÄÃ£ tÃ¬m tháº¥y báº£n cáº­p nháº­t má»›i!\n%s -> %s</string>
    <string name="filler" formatted="true">Bá»™ lá»c</string>
    <string name="duration_format" formatted="true">%d phÃºt</string>

    <string name="title_home">Trang Chá»§</string>
    <string name="title_search">TÃ¬m Kiáº¿m</string>
    <string name="title_downloads">Táº£i Vá»</string>
    <string name="title_settings">CÃ i Äáº·t</string>

    <string name="search_hint">TÃ¬m kiáº¿mâ€¦</string>
    <string name="no_data">KhÃ´ng cÃ³ dá»¯ liá»‡u</string>
    <string name="episode_more_options_des">ThÃªm tuá»³ chá»n</string>
    <string name="next_episode">Táº­p tiáº¿p theo</string>
    <string name="result_tags">Thá»ƒ loáº¡i</string>
    <string name="result_share">Chia sáº»</string>
    <string name="result_open_in_browser">Má»Ÿ báº±ng trÃ¬nh duyá»‡t</string>
    <string name="skip_loading">Bá» qua</string>
    <string name="loading_chromecast">Äang táº£iâ€¦</string>

    <string name="type_watching">Äang xem</string>
    <string name="type_on_hold">Äang chá»</string>
    <string name="type_completed">HoÃ n thÃ nh</string>
    <string name="type_dropped">Bá» qua</string>
    <string name="type_plan_to_watch">Xem sau</string>
    <string name="type_none">Máº·c Ä‘á»‹nh</string>
	<string name="type_re_watching">Xem láº¡i</string>

    <string name="play_movie_button">Xem Ngay</string>
    <string name="play_torrent_button">Xem Báº±ng Torrent</string>
    <string name="pick_source">Nguá»“n Phim</string>
    <string name="pick_subtitle">Phá»¥ Äá»</string>
    <string name="reload_error">Thá»­ káº¿t ná»‘i láº¡iâ€¦</string>
    <string name="go_back">Quay láº¡i</string>
    <string name="play_episode">Xem Táº­p Phim</string>
    <!--<string name="need_storage">Allow to download episodes</string>-->

    <string name="download">Táº£i Xuá»‘ng</string>
    <string name="downloaded">ÄÃ£ táº£i</string>
    <string name="downloading">Äang táº£i</string>
    <string name="download_paused">Táº¡m dá»«ng</string>
    <string name="download_started">ÄÃ£ báº¯t Ä‘áº§u táº£i</string>
    <string name="download_failed">Táº£i lá»—i</string>
    <string name="download_canceled">ÄÃ£ há»§y</string>
    <string name="download_done">Táº£i thÃ nh cÃ´ng</string>

    <string name="error_loading_links_toast">ÄÃ£ cÃ³ lá»—i xáº£y ra</string>
    <string name="download_storage_text">Bá»™ nhá»› mÃ¡y</string>

    <string name="app_dubbed_text">Lá»“ng Tiáº¿ng</string>
    <string name="app_subbed_text">Phá»¥ Äá»</string>

    <string name="popup_delete_file">XÃ³a Tá»‡p</string>
    <string name="popup_play_file">Xem Tá»‡p</string>
    <string name="popup_resume_download">Tiáº¿p tá»¥c táº£i</string>
    <string name="popup_pause_download">Táº¡m dá»«ng táº£i</string>

    <string name="pref_disable_acra">Táº¯t tá»± Ä‘á»™ng gá»­i dá»¯ liá»‡u khi xáº£y ra lá»—i</string>
    <string name="home_more_info">ThÃ´ng tin thÃªm</string>
    <string name="home_expanded_hide">áº¨n</string>
    <string name="home_play">Xem ngay</string>
    <string name="home_info">ThÃ´ng tin</string>
    <string name="filter_bookmarks">Lá»c theo danh sÃ¡ch Ä‘Ã£ lÆ°u</string>
    <string name="error_bookmarks_text">Danh sÃ¡ch Ä‘Ã£ lÆ°u</string>
    <string name="action_remove_from_bookmarks">XÃ³a</string>
	<string name="action_add_to_bookmarks">Äáº·t tráº¡ng thÃ¡i xem</string>
    <string name="sort_apply">Ãp dá»¥ng</string>
    <string name="sort_cancel">Há»§y bá»</string>
    <string name="player_speed">Tá»‘c Ä‘á»™ chÆ¡i</string>

    <string name="subtitles_settings">CÃ i Ä‘áº·t hiá»ƒn thá»‹ phá»¥ Ä‘á»</string>
    <string name="subs_text_color">MÃ u chá»¯</string>
    <string name="subs_outline_color">MÃ u viá»n chá»¯</string>
    <string name="subs_background_color">MÃ u ná»n</string>
    <string name="subs_window_color">MÃ u cá»­a sá»•</string>
    <string name="subs_edge_type">Kiá»ƒu viá»n</string>
    <string name="subs_subtitle_elevation">Äá»™ nÃ¢ng</string>
    <string name="subs_font">Kiá»ƒu chá»¯</string>
    <string name="subs_font_size">KÃ­ch thÆ°á»›c chá»¯</string>

    <string name="search_provider_text_providers">TÃ¬m kiáº¿m theo nhÃ  cung cáº¥p</string>
    <string name="search_provider_text_types">TÃ¬m kiáº¿m theo thá»ƒ loáº¡i</string>

    <string name="benene_count_text">%d lá»i cáº£m Æ¡n Ä‘Ã£ Ä‘Æ°á»£c gá»­i táº·ng nhÃ  phÃ¡t triá»ƒn</string>
    <string name="benene_count_text_none">HÃ£y táº·ng cho nhÃ  phÃ¡t triá»ƒn má»™t lá»i cáº£m Æ¡n</string>

    <string name="subs_auto_select_language">Tá»± Ä‘á»™ng chá»n ngÃ´n ngá»¯</string>
    <string name="subs_download_languages">NgÃ´n ngá»¯ khi táº£i xuá»‘ng</string>
    <string name="subs_hold_to_reset_to_default">Giá»¯ Ä‘á»ƒ lÃ m má»›i toÃ n bá»™</string>
    <string name="continue_watching">Äang Xem</string>

    <string name="action_remove_watching">Loáº¡i bá»</string>
    <string name="action_open_watching">ThÃ´ng tin thÃªm</string>

    <string name="vpn_might_be_needed">Báº¡n cÃ³ thá»ƒ sáº½ cáº§n sá»­ dá»¥ng VPN Ä‘á»ƒ xem phim nÃ y.</string>
    <string name="vpn_torrent">Phim nÃ y Ä‘Æ°á»£c chiáº¿u dÆ°á»›i dáº¡ng Torrent. HÃ£y sá»­ dá»¥ng VPN Ä‘á»ƒ xem nhÃ©</string>

    <string name="provider_info_meta">SiÃªu dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c cung cáº¥p bá»Ÿi trang web, quÃ¡ trÃ¬nh táº£i video sáº½ khÃ´ng thÃ nh cÃ´ng náº¿u nÃ³ khÃ´ng tá»“n táº¡i trÃªn trang web.</string>	

    <string name="torrent_plot">ThÃ´ng tin phim</string>
    <string name="normal_no_plot">Äang cáº­p nháº­t</string>
    <string name="torrent_no_plot">KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin</string>

    <string name="picture_in_picture">Cháº¿ Ä‘á»™ cá»­a sá»• nhá»</string>
    <string name="picture_in_picture_des">Tiáº¿p tá»¥c xem phim khi thoÃ¡t app hoáº·c Ä‘ang tÃ¬m kiáº¿m</string>
    <string name="player_size_settings">Báº­t nÃºt thu phÃ³ng khi xem</string>
    <string name="player_size_settings_des">Äiá»u nÃ y sáº½ xÃ³a khoáº£ng Ä‘en cá»§a phim</string>
    <string name="player_subtitles_settings">Phá»¥ Ä‘á»</string>
    <string name="player_subtitles_settings_des">CÃ i Ä‘áº·t phá»¥ Ä‘á»</string>
    <string name="chromecast_subtitles_settings">Phá»¥ Ä‘á» Chromecast</string>
    <string name="chromecast_subtitles_settings_des">CÃ i Ä‘áº·t phá»¥ Ä‘á» Chromecast</string>
	
    <string name="eigengraumode_settings">Äiá»u chá»‰nh tá»‘c Ä‘á»™ khi xem phim</string>
    <string name="eigengraumode_settings_des">CÃ³ thá»ƒ Ä‘iá»u chá»‰nh tá»‘c Ä‘á»™ phÃ¡t phim</string>
    <string name="swipe_to_seek_settings">Vuá»‘t Ä‘á»ƒ tua nhanh</string>
    <string name="swipe_to_seek_settings_des">Báº¡n cÃ³ thá»ƒ vuá»‘t trÃ¡i hoáº·c pháº£i Ä‘á»ƒ tua nhanh khi Ä‘ang xem phim</string>
    <string name="swipe_to_change_settings">Vuá»‘t Ä‘á»ƒ Ä‘iá»u chá»‰nh Ã¢m lÆ°á»£ng vÃ  Ä‘á»™ sÃ¡ng</string>
    <string name="swipe_to_change_settings_des">Vuá»‘t tá»« dÆ°á»›i lÃªn trÃªn á»Ÿ bÃªn trÃ¡i hoáº·c pháº£i Ä‘á»u Ä‘iá»u chá»‰nh Ä‘á»™ sÃ¡ng vÃ  Ã¢m lÆ°á»£ng</string>
    <string name="double_tap_to_seek_settings">Nháº¥n 2 láº§n Ä‘á»ƒ tua</string>
    <string name="double_tap_to_pause_settings">Cháº¡m 2 láº§n Ä‘á»ƒ táº¡m dá»«ng</string>
    <string name="double_tap_to_seek_settings_des">Nháº¥n 2 láº§n vÃ o bÃªn trÃ¡i hoáº·c mÃ n hÃ¬nh Ä‘á»ƒ tua trÆ°á»›c hoáº·c sau
    </string>
    <string name="double_tap_to_pause_settings_des">Nháº¥n vÃ o giá»¯a Ä‘á»ƒ táº¡m dá»«ng</string>
    <string name="use_system_brightness_settings">Sá»­ dá»¥ng Ä‘á»™ sÃ¡ng há»‡ thá»‘ng</string>
    <string name="use_system_brightness_settings_des">Sá»­ dá»¥ng Ä‘á»™ sÃ¡ng há»‡ thá»‘ng trong trÃ¬nh phÃ¡t á»©ng dá»¥ng
    </string>

    <string name="search">TÃ¬m kiáº¿m</string>
    <string name="settings_info">ThÃ´ng tin</string>
    <string name="advanced_search">TÃ¬m kiáº¿m nÃ¢ng cao</string>
    <string name="advanced_search_des">Cho phÃ©p tÃ¬m kiáº¿m theo bá»™ lá»c tá»«ng nhÃ  cung cáº¥p</string>
    <string name="bug_report_settings_off">Chá»‰ gá»­i dá»¯ liá»‡u khi xáº£y ra lá»—i Ä‘áº¿n nhÃ  phÃ¡t triá»ƒn</string>
    <string name="bug_report_settings_on">KhÃ´ng gá»­i dá»¯ liá»‡u</string>
    <string name="show_fillers_settings">Hiá»ƒn thá»‹ táº­p phá»¥ cho anime</string>
    <string name="updates_settings">Hiá»ƒn thá»‹ thÃ´ng bÃ¡o cáº­p nháº­t App</string>
    <string name="updates_settings_des">Tá»± Ä‘á»™ng tÃ¬m kiáº¿m vÃ  thÃ´ng bÃ¡o khi cÃ³ báº£n cáº­p nháº­t má»›i</string>
    <string name="uprereleases_settings">Cáº­p nháº­t phiÃªn báº£n Beta</string>
    <string name="uprereleases_settings_des">TÃ¬m kiáº¿m cÃ¡c phiÃªn báº£n Beta thay vÃ¬ Ä‘á»£i báº£n cáº­p nháº­t chÃ­nh thá»©c</string>
    <string name="github">Github</string>
    <string name="lightnovel">á»¨ng dá»¥ng Ä‘á»c tiá»ƒu thuyáº¿t cá»§a cÃ¹ng nhÃ  phÃ¡t triá»ƒn</string>
    <string name="anim">á»¨ng dá»¥ng xem Anime cá»§a cÃ¹ng nhÃ  phÃ¡t triá»ƒn</string>
    <string name="discord">Tham gia cá»™ng Ä‘á»“ng trÃªn Discord</string>
    <string name="benene">Gá»­i lá»i cáº£m Æ¡n tá»›i nhÃ  phÃ¡t triá»ƒn</string>
    <string name="benene_des">Gá»­i lá»i cáº£m Æ¡n</string>

    <string name="app_language">NgÃ´n ngá»¯ á»©ng dá»¥ng</string>

    <string name="no_chromecast_support_toast">NhÃ  cung cáº¥p nÃ y chÆ°a há»— trá»£ Chromecast</string>
    <string name="no_links_found_toast">KhÃ´ng tÃ¬m tháº¥y link</string>
    <string name="copy_link_toast">ÄÃ£ copy link vÃ o bá»™ nhá»› Ä‘á»‡m</string>
    <string name="play_episode_toast">Xem Phim</string>
    <string name="subs_default_reset_toast">LÃ m má»›i toÃ n bá»™ cÃ i Ä‘áº·t</string>
    <string name="acra_report_toast">Ráº¥t tiáº¿c! á»¨ng dá»¥ng Ä‘Ã£ xáº£y ra lá»—i. ChÃºng tÃ´i Ä‘ang tÃ¬m hiá»ƒu nguyÃªn nhÃ¢n vÃ  kháº¯c phá»¥c nÃ³.
    </string>

    <string name="season">MÃ¹a</string>
    <string name="no_season">KhÃ´ng cÃ³ mÃ¹a nÃ o</string>
    <string name="episode">Táº­p</string>
    <string name="episodes">Táº­p</string>
    <string name="season_short">M</string>
    <string name="episode_short">T</string>
    <string name="no_episodes_found">KhÃ´ng tháº¥y táº­p</string>

    <string name="delete_file">XÃ³a Tá»‡p</string>
    <string name="delete">XÃ³a</string>
    <string name="pause">Táº¡m Dá»«ng</string>
    <string name="resume">Tiáº¿p Tá»¥c</string>
    <string name="delete_message">Äiá»u nÃ y sáº½ xÃ³a %s\nBáº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a?</string>
    <string name="resume_time_left" formatted="true">%dm\ncÃ²n láº¡i</string>

    <string name="status_ongoing">Äang Chiáº¿u</string>
    <string name="status_completed">HoÃ n ThÃ nh</string>
    <string name="status">Tráº¡ng ThÃ¡i</string>
    <string name="year">NÄƒm</string>
    <string name="rating">ÄÃ¡nh GiÃ¡</string>
    <string name="duration">Thá»i LÆ°á»£ng</string>
    <string name="site">Nguá»“n</string>
    <string name="synopsis">ThÃ´ng tin</string>

    <string name="queued">HÃ ng Äá»£i</string>
    <string name="no_subtitles">KhÃ´ng cÃ³ phá»¥ Ä‘á»</string>
    <string name="default_subtitles">Máº·c Äá»‹nh</string>


    <string name="free_storage">CÃ²n trá»‘ng</string>
    <string name="used_storage">ÄÃ£ Sá»­ dá»¥ng</string>
    <string name="app_storage">App</string>

    <!--plural-->
    <string name="movies">Phim Láº»</string>
    <string name="tv_series">Phim Bá»™</string>
    <string name="cartoons">Hoáº¡t HÃ¬nh</string>
    <string name="anime">Anime</string>
    <string name="torrent">Torrent</string>
    <string name="documentaries">Phim TÃ i Liá»‡u</string>
	
	<!--singular-->
    <string name="movies_singular">Phim Láº»</string>
    <string name="tv_series_singular">Phim Bá»™</string>
    <string name="cartoons_singular">Hoáº¡t HÃ¬nh</string>
    <string name="anime_singular">@string/anime</string>
    <string name="torrent_singular">Torrent</string>
    <string name="documentaries_singular">Phim TÃ i Liá»‡u</string>

    <string name="source_error">ÄÃ£ cÃ³ lá»—i vá» nguá»“n phim xáº£y ra</string>
    <string name="remote_error">KhÃ´ng thá»ƒ káº¿t ná»‘i tá»›i mÃ¡y chá»§</string>
    <string name="render_error">KhÃ´ng thá»ƒ render</string>
    <string name="unexpected_error">ÄÃ£ cÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i sau</string>
    <string name="storage_error">KhÃ´ng thá»ƒ táº£i xuá»‘ng. HÃ£y kiá»ƒm tra quyá»n truy cáº­p bá»™ nhá»› cá»§a á»©ng dá»¥ng</string>

    <string name="episode_action_chromecast_episode">Chromecast Episode</string>
    <string name="episode_action_chromecast_mirror">Chromecast Mirror</string>
    <string name="episode_action_play_in_app">Xem vá»›i trÃ¬nh phÃ¡t máº·c Ä‘á»‹nh</string>
    <string name="episode_action_play_in_vlc">Xem vá»›i trÃ¬nh phÃ¡t VLC</string>
    <string name="episode_action_play_in_browser">Xem vá»›i trÃ¬nh duyá»‡t</string>
    <string name="episode_action_copy_link">Sao chÃ©p liÃªn káº¿t</string>
    <string name="episode_action_auto_download">Tá»± Ä‘á»™ng táº£i xuá»‘ng</string>
    <string name="episode_action_download_mirror">Download Mirror</string>
    <string name="episode_action_reload_links">Láº¥y link má»›i nháº¥t</string>

    <string name="no_update_found">Báº¡n Ä‘ang dÃ¹ng phiÃªn báº£n má»›i nháº¥t</string>
    <string name="check_for_update">Kiá»ƒm tra cáº­p nháº­t phiá»ƒn báº£n má»›i</string>

    <string name="video_lock">KhÃ³a</string>
    <string name="video_aspect_ratio_resize">Thu PhÃ³ng</string>
    <string name="video_source">Phá»¥ Äá»</string>
    <string name="video_skip_op">Tua Nhanh</string>

    <string name="dont_show_again">KhÃ´ng hiá»ƒn thá»‹ láº¡i</string>
    <string name="update">Cáº­p nháº­t</string>
    <string name="watch_quality_pref">Tá»± Ä‘á»™ng chá»n cháº¥t lÆ°á»£ng phim</string>
    <string name="video_buffer_size_settings">KÃ­ch thÆ°á»›c video cache</string>
    <string name="dns_pref_summary">Ráº¥t há»¯u Ã­ch Ä‘á»ƒ bá» cháº·n ISP</string>

    <string name="download_path_pref">ÄÆ°á»ng dáº«n táº£i xuá»‘ng</string>
	
    <string name="display_subbed_dubbed_settings">Hiá»ƒn thá»‹ cá» Phá»¥ Ä‘á» hoáº·c Thuyáº¿t minh</string>
	
    <string name="resize_fit">Vá»«a mÃ n hÃ¬nh</string>
    <string name="resize_fill">KÃ©o dÃ£n</string>
    <string name="resize_zoom">PhÃ³ng to</string>
	
    <string name="general">Tá»•ng quan</string>
    <string name="provider_lang_settings">NgÃ´n ngá»¯ nhÃ  cung cáº¥p</string>
    <string name="app_layout">Giao diá»‡n App</string>
    <string name="preferred_media_settings">Thá»ƒ loáº¡i Æ°u tiÃªn</string>

    <string name="automatic">Tá»± Ä‘á»™ng</string>
    <string name="tv_layout">Giao diá»‡n TV</string>
    <string name="phone_layout">Giao diá»‡n Ä‘iá»‡n thoáº¡i</string>

    <string name="primary_color_settings">MÃ u chÃ­nh</string>
    <string name="app_theme_settings">Chá»§ Ä‘á» App</string>
	
	<!-- account stuff -->
	<string name="account">tÃ i khoáº£n</string>
    <string name="logout">ÄÄƒng xuáº¥t</string>
    <string name="login">ÄÄƒng nháº­p</string>
    <string name="switch_account">Äá»•i tÃ i khoáº£n</string>
    <string name="add_account">ThÃªm tÃ i khoáº£n</string>
    <string name="add_sync">ThÃªm theo dÃµi</string>
    <string name="added_sync_format" formatted="true">ÄÃ£ thÃªm %s</string>
	<!-- ============ -->
    <string name="none">Máº·c Ä‘á»‹nh</string>
    <string name="normal">BÃ¬nh thÆ°á»ng</string>
    <string name="all">Táº¥t cáº£</string>
    <string name="max">Tá»‘i Ä‘a</string>
    <string name="min">Tá»‘i thiá»ƒu</string>
    <string name="subtitles_none" translatable="false">@string/none</string>
    <string name="subtitles_outline">Viá»n</string>
    <string name="subtitles_depressed">ChÃ¬m</string>
    <string name="subtitles_shadow">Äá»• bÃ³ng</string>
    <string name="subtitles_raised">NÃ¢ng</string>
    <!--
    Example text (pangram) can optionally be translated; if you do, include all the letters in the alphabet,
    see: 
	https://en.wikipedia.org/w/index.php?title=Pangram&oldid=225849300
	https://en.wikipedia.org/wiki/The_quick_brown_fox_jumps_over_the_lazy_dog
    -->
    <string name="subtitles_example_text">Xem trÆ°á»›c máº«u phá»¥ Ä‘á»</string>

    <string name="recommended">ÄÆ°á»£c Ä‘á» xuáº¥t</string>
    <string name="player_loaded_subtitles" formatted="true">ÄÃ£ táº£i %s</string>
    <string name="player_load_subtitles">Chá»n tá»‡p</string>
    <string name="downloaded_file">Tá»‡p Ä‘Ã£ táº£i</string>
    <string name="actor_main">ChÃ­nh</string>
    <string name="actor_supporting">Há»— trá»£</string>
    <string name="actor_background">LÃ½ lá»‹ch</string>

    <string name="home_source">Nguá»“n</string>
</resources>



================================================
FILE: app/src/main/res/values-zh/strings.xml
================================================
<!--https://newbedev.com/concatenate-multiple-strings-in-xml-->
<resources>
    <!-- FORMAT MIGHT TRANSLATE, WILL CAUSE CRASH IF APPLIED WRONG -->
    <string name="app_dub_sub_episode_text_format" formatted="true">%s å…±%dé›†</string>
    <string name="cast_format" formatted="true">æ¼”å‘˜ï¼š%s</string>

    <!-- IS NOT NEEDED TO TRANSLATE AS THEY ARE ONLY USED FOR SCREEN READERS AND WONT SHOW UP TO NORMAL USERS -->
    <string name="result_poster_img_des">æµ·æŠ¥</string>
    <string name="search_poster_img_des">@string/result_poster_img_des</string>
    <string name="episode_poster_img_des">å‰§é›†æµ·æŠ¥</string>
    <string name="home_main_poster_img_des">ä¸»æµ·æŠ¥</string>
    <string name="home_next_random_img_des">éšæœºä¸‹ä¸€ä¸ª</string>
    <string name="episode_play_img_des" translatable="false">@string/play_episode</string>
    <string name="go_back_img_des">è¿”å›ž</string>
    <string name="change_providers_img_des" translatable="false">@string/home_change_provider_img_des</string>
    <string name="home_change_provider_img_des">æ›´æ”¹å†…å®¹æä¾›è€…</string>
    <string name="preview_background_img_des">é¢„è§ˆèƒŒæ™¯</string>

    <!-- TRANSLATE, BUT DON'T FORGET FORMAT -->
    <string name="player_speed_text_format" formatted="true">é€Ÿåº¦(%.2fx)</string>
    <string name="rated_format" formatted="true">è¯„åˆ†ï¼š%.1f</string>
    <string name="new_update_format" formatted="true">å‘çŽ°æ–°ç‰ˆæœ¬ï¼\n%s -> %s</string>
    <string name="filler" formatted="true">å¡«å……</string>
    <string name="duration_format" formatted="true">%dåˆ†é’Ÿ</string>

    <string name="app_name">CloudStream</string>
    <string name="title_home">ä¸»é¡µ</string>
    <string name="title_search">æœç´¢</string>
    <string name="title_downloads">ä¸‹è½½</string>
    <string name="title_settings">è®¾ç½®</string>

    <string name="search_hint">æœç´¢â€¦</string>
    <string name="no_data">æ— æ•°æ®</string>
    <string name="episode_more_options_des">æ›´å¤šé€‰é¡¹</string>
    <string name="next_episode">ä¸‹ä¸€é›†</string>
    <string name="result_plot" translatable="false">@string/synopsis</string>
    <string name="result_tags">ç±»åž‹</string>
    <string name="result_share">åˆ†äº«</string>
    <string name="result_open_in_browser">åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€</string>
    <string name="skip_loading">è·³è¿‡åŠ è½½</string>
    <string name="loading_chromecast">æ­£åœ¨åŠ è½½â€¦</string>

    <string name="type_watching">æ­£åœ¨è§‚çœ‹</string>
    <string name="type_on_hold">æš‚æ—¶æç½®</string>
    <string name="type_completed">è§‚çœ‹å®Œæ¯•</string>
    <string name="type_dropped">æ”¾å¼ƒè§‚çœ‹</string>
    <string name="type_plan_to_watch">è®¡åˆ’è§‚çœ‹</string>
    <string name="type_none">æ— </string>
    <string name="type_re_watching">é‡æ–°è§‚çœ‹</string>

    <string name="play_movie_button">æ’­æ”¾ç”µå½±</string>
    <string name="play_torrent_button">ä¸²æµTorrent</string>
    <string name="pick_source">æ¥æº</string>
    <string name="pick_subtitle">å­—å¹•</string>
    <string name="reload_error">é‡è¯•è¿žæŽ¥â€¦</string>
    <string name="go_back">è¿”å›ž</string>
    <string name="play_episode">æ’­æ”¾å‰§é›†</string>
    <!--<string name="need_storage">Allow to download episodes</string>-->

    <string name="download">ä¸‹è½½</string>
    <string name="downloaded">å·²ä¸‹è½½</string>
    <string name="downloading">æ­£åœ¨ä¸‹è½½</string>
    <string name="download_paused">ä¸‹è½½æš‚åœ</string>
    <string name="download_started">ä¸‹è½½å¼€å§‹</string>
    <string name="download_failed">ä¸‹è½½å¤±è´¥</string>
    <string name="download_canceled">ä¸‹è½½å–æ¶ˆ</string>
    <string name="download_done">ä¸‹è½½å®Œæ¯•</string>
    <string name="download_format" translatable="false">%s - %s</string>

    <string name="error_loading_links_toast">åŠ è½½é“¾æŽ¥æ—¶å‡ºé”™</string>
    <string name="download_storage_text">å†…éƒ¨å­˜å‚¨</string>

    <string name="app_dubbed_text">é…éŸ³</string>
    <string name="app_subbed_text">å­—å¹•</string>

    <string name="popup_delete_file">åˆ é™¤æ–‡ä»¶</string>
    <string name="popup_play_file">æ’­æ”¾æ–‡ä»¶</string>
    <string name="popup_resume_download">ç»§ç»­ä¸‹è½½</string>
    <string name="popup_pause_download">æš‚åœä¸‹è½½</string>

    <string name="pref_disable_acra">ç¦ç”¨è‡ªåŠ¨é”™è¯¯æŠ¥å‘Š</string>
    <string name="home_more_info">æ›´å¤šä¿¡æ¯</string>
    <string name="home_expanded_hide">éšè—</string>
    <string name="home_play">æ’­æ”¾</string>
    <string name="home_info">ä¿¡æ¯</string>
    <string name="filter_bookmarks">ç­›é€‰ä¹¦ç­¾</string>
    <string name="error_bookmarks_text">ä¹¦ç­¾</string>
    <string name="action_remove_from_bookmarks">ç§»é™¤</string>
    <string name="action_add_to_bookmarks">è®¾ç½®è§‚çœ‹çŠ¶æ€</string>
    <string name="sort_apply">åº”ç”¨</string>
    <string name="sort_cancel">å–æ¶ˆ</string>
    <string name="player_speed">æ’­æ”¾é€Ÿåº¦</string>

    <string name="subtitles_settings">å­—å¹•è®¾ç½®</string>
    <string name="subs_text_color">æ–‡æœ¬é¢œè‰²</string>
    <string name="subs_outline_color">è½®å»“é¢œè‰²</string>
    <string name="subs_background_color">èƒŒæ™¯é¢œè‰²</string>
    <string name="subs_window_color">çª—å£é¢œè‰²</string>
    <string name="subs_edge_type">è¾¹ç¼˜ç±»åž‹</string>
    <string name="subs_subtitle_elevation">å­—å¹•é«˜åº¦</string>
    <string name="subs_font">å­—ä½“</string>
    <string name="subs_font_size">å­—ä½“å¤§å°</string>

    <string name="search_provider_text_providers">æŒ‰å†…å®¹æä¾›è€…æœç´¢</string>
    <string name="search_provider_text_types">æŒ‰ç±»åž‹æœç´¢</string>

    <string name="benene_count_text">é€ç»™å¼€å‘è€…%dæ ¹é¦™è•‰</string>
    <string name="benene_count_text_none">ä¸é€é¦™è•‰</string>

    <string name="subs_auto_select_language">è‡ªåŠ¨é€‰æ‹©è¯­è¨€</string>
    <string name="subs_download_languages">ä¸‹è½½è¯­è¨€</string>
    <string name="subs_hold_to_reset_to_default">æŒ‰ä½é‡ç½®ä¸ºé»˜è®¤å€¼</string>
    <string name="continue_watching">ç»§ç»­è§‚çœ‹</string>

    <string name="action_remove_watching">ç§»é™¤</string>
    <string name="action_open_watching">æ›´å¤šä¿¡æ¯</string>
    <string name="action_open_play">@string/home_play </string>

    <string name="vpn_might_be_needed">æ­¤å†…å®¹æä¾›è€…å¯èƒ½éœ€è¦VPNæ‰èƒ½æ­£å¸¸å·¥ä½œ</string>
    <string name="vpn_torrent">æ­¤å†…å®¹æä¾›è€…æ˜¯ä¸€ä¸ªTorrent,å»ºè®®ä½¿ç”¨VPN</string>

    <string name="provider_info_meta">ç«™ç‚¹ä¸æä¾›å…ƒæ•°æ®ï¼Œå¦‚æžœç«™ç‚¹ä¸Šä¸å­˜åœ¨å…ƒæ•°æ®ï¼Œè§†é¢‘åŠ è½½å°†å¤±è´¥ã€‚</string>

    <string name="torrent_plot">ç®€ä»‹</string>
    <string name="normal_no_plot">æ²¡æœ‰æ‰¾åˆ°ç®€ä»‹</string>
    <string name="torrent_no_plot">æ²¡æœ‰æ‰¾åˆ°ç®€ä»‹</string>

    <string name="picture_in_picture">ç”»ä¸­ç”»</string>
    <string name="picture_in_picture_des">åœ¨å…¶ä»–åº”ç”¨ä¹‹ä¸Šçš„è¿·ä½ æ’­æ”¾å™¨ä¸­ç»§ç»­æ’­æ”¾</string>
    <string name="player_size_settings">æ’­æ”¾å™¨ç”»é¢è°ƒæ•´æŒ‰é’®</string>
    <string name="player_size_settings_des">ç§»é™¤é»‘è‰²è¾¹æ¡†</string>
    <string name="player_subtitles_settings">å­—å¹•</string>
    <string name="player_subtitles_settings_des">æ’­æ”¾å™¨å­—å¹•è®¾ç½®</string>
    <string name="chromecast_subtitles_settings">æŠ•å±å­—å¹•</string>
    <string name="chromecast_subtitles_settings_des">æŠ•å±å­—å¹•è®¾ç½®</string>

    <string name="eigengraumode_settings">æœ¬å¾æ¨¡å¼</string>
    <string name="eigengraumode_settings_des">åœ¨æ’­æ”¾å™¨ä¸­æ·»åŠ æ’­æ”¾é€Ÿåº¦é€‰é¡¹</string>
    <string name="swipe_to_seek_settings">æ»‘åŠ¨æŽ§åˆ¶è¿›åº¦</string>
    <string name="swipe_to_seek_settings_des">å‘å±å¹•å·¦ä¾§æˆ–å³ä¾§æ»‘åŠ¨æ¥æŽ§åˆ¶æ’­æ”¾è¿›åº¦</string>
    <string name="swipe_to_change_settings">æ»‘åŠ¨æ›´æ”¹è®¾ç½®</string>
    <string name="swipe_to_change_settings_des">åœ¨å±å¹•å·¦ä¾§æˆ–å³ä¾§æ»‘åŠ¨æ¥æ›´æ”¹äº®åº¦æˆ–éŸ³é‡</string>
    <string name="double_tap_to_seek_settings">åŒå‡»æŽ§åˆ¶è¿›åº¦</string>
    <string name="double_tap_to_pause_settings">åŒå‡»æš‚åœ</string>
    <string name="double_tap_to_seek_settings_des">åœ¨å±å¹•å·¦ä¾§æˆ–å³ä¾§åŒå‡»æ¥å¿«è¿›æˆ–å¿«é€€
    </string>
    <string name="double_tap_to_pause_settings_des">åŒå‡»å±å¹•ä¸­é—´æš‚åœ</string>
    <string name="use_system_brightness_settings">ä½¿ç”¨ç³»ç»Ÿäº®åº¦</string>
    <string name="use_system_brightness_settings_des">åœ¨app playerä¸­ä½¿ç”¨ç³»ç»Ÿäº®åº¦ï¼Œè€Œä¸æ˜¯é»‘è‰²é®ç½©
    </string>

    <string name="restore_settings">ä»Žå¤‡ä»½ä¸­æ¢å¤æ•°æ®</string>
    <string name="killswitch_settings">ä»Žgithubä¸‹è½½æœ€æ–°å…ƒæ•°æ®</string>
    <string name="killswitch_settings_des">å¦‚æžœä½ æƒ³è®¿é—®æ‰€æœ‰çš„å†…å®¹æä¾›è€…ï¼ˆå³ä½¿æ˜¯æŸåçš„ï¼‰ï¼Œè¯·å…³é—­æ­¤é€‰é¡¹</string>

    <string name="backup_settings">å¤‡ä»½æ•°æ®</string>
    <string name="restore_success">å·²åŠ è½½å¤‡ä»½æ–‡ä»¶</string>
    <string name="restore_failed_format" formatted="true">æ— æ³•ä»Žæ–‡ä»¶%sä¸­è¿˜åŽŸæ•°æ®</string>
    <string name="backup_success">æˆåŠŸå­˜å‚¨æ•°æ®</string>
    <string name="backup_failed">ç¼ºå°‘å­˜å‚¨æƒé™ï¼Œè¯·é‡è¯•</string>
    <string name="backup_failed_error_format">å¤‡ä»½%sæ—¶å‡ºé”™</string>

    <string name="search">æœç´¢</string>
    <string name="settings_info">ä¿¡æ¯</string>
    <string name="advanced_search">é«˜çº§æœç´¢</string>
    <string name="advanced_search_des">ç»™å‡ºæŒ‰å†…å®¹æä¾›è€…åˆ†éš”çš„æœç´¢ç»“æžœ</string>
    <string name="bug_report_settings_off">åªå‘é€å…³äºŽå´©æºƒçš„æ•°æ®</string>
    <string name="bug_report_settings_on">ä¸å‘é€æ•°æ®</string>
    <string name="show_fillers_settings">ä¸ºåŠ¨ç”»æ˜¾ç¤ºä¸‹ä¸€é›†</string>
    <string name="updates_settings">æ˜¾ç¤ºåº”ç”¨æ›´æ–°</string>
    <string name="updates_settings_des">å¯åŠ¨æ—¶è‡ªåŠ¨æœç´¢æ›´æ–°</string>
    <string name="uprereleases_settings">æ›´æ–°è‡³é¢„è§ˆç‰ˆ</string>
    <string name="uprereleases_settings_des">æœç´¢é¢„è§ˆç‰ˆæ›´æ–°ï¼Œè€Œä¸æ˜¯ä»…æœç´¢å®Œæ•´ç‰ˆæœ¬</string>
    <string name="github">Github</string>
    <string name="lightnovel">ç”±åŒä¸€å¼€å‘è€…å¼€å‘çš„è½»å°è¯´åº”ç”¨</string>
    <string name="anim">ç”±åŒä¸€å¼€å‘è€…å¼€å‘çš„åŠ¨æ¼«åº”ç”¨</string>
    <string name="discord">åŠ å…¥Discord</string>
    <string name="benene">é€ç»™å¼€å‘è€…ä¸€æ ¹é¦™è•‰</string>
    <string name="benene_des">é€é¦™è•‰</string>

    <string name="app_language">åº”ç”¨è¯­è¨€</string>

    <string name="no_chromecast_support_toast">è¯¥å†…å®¹æä¾›è€…ä¸æ”¯æŒæŠ•å±</string>
    <string name="no_links_found_toast">æ²¡æœ‰æ‰¾åˆ°é“¾æŽ¥</string>
    <string name="copy_link_toast">é“¾æŽ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</string>
    <string name="play_episode_toast">æ’­æ”¾å‰§é›†</string>
    <string name="subs_default_reset_toast">é‡ç½®ä¸ºé»˜è®¤å€¼</string>
    <string name="acra_report_toast">æŠ±æ­‰ï¼Œåº”ç”¨å´©æºƒäº†ï¼Œå°†å‘å¼€å‘äººå‘˜å‘é€ä¸€ä»½åŒ¿åBugæŠ¥å‘Š
    </string>

    <string name="season">å­£</string>
    <string name="no_season">æ²¡æœ‰å­£</string>
    <string name="episode">é›†</string>
    <string name="episodes">é›†</string>
    <string name="season_short">S</string>
    <string name="episode_short">E</string>
    <string name="no_episodes_found">æ²¡æœ‰æ‰¾åˆ°å‰§é›†</string>

    <string name="delete_file">åˆ é™¤æ–‡ä»¶</string>
    <string name="delete">åˆ é™¤</string>
    <string name="cancel" translatable="false">@string/sort_cancel</string>
    <string name="pause">æš‚åœ</string>
    <string name="resume">ç»§ç»­</string>
    <string name="go_back_30">-30</string>
    <string name="go_forward_30">+30</string>
    <string name="delete_message" formatted="true">è¿™å°†æ°¸ä¹…åˆ é™¤%s\nä½ ç¡®å®šå—ï¼Ÿ</string>
    <string name="resume_time_left" formatted="true">å‰©ä½™%dåˆ†é’Ÿ\n</string>


    <string name="status_ongoing">è¿žè½½ä¸­</string>
    <string name="status_completed">å·²å®Œç»“</string>
    <string name="status">çŠ¶æ€</string>
    <string name="year">å¹´ä»½</string>
    <string name="rating">è¯„åˆ†</string>
    <string name="duration">æŒç»­æ—¶é—´</string>
    <string name="site">ç½‘ç«™</string>
    <string name="synopsis">ç®€ä»‹</string>

    <string name="queued">é˜Ÿåˆ—</string>
    <string name="no_subtitles">æ— å­—å¹•</string>
    <string name="default_subtitles">é»˜è®¤</string>

    <string name="free_storage">ç©ºé—²</string>
    <string name="used_storage">å·²ä½¿ç”¨</string>
    <string name="app_storage">åº”ç”¨</string>

    <!--plural-->
    <string name="movies">ç”µå½±</string>
    <string name="tv_series">å‰§é›†</string>
    <string name="cartoons">å¡é€š</string>
    <string name="anime">åŠ¨æ¼«</string>
    <string name="torrent">Torrents</string>
    <string name="documentaries">çºªå½•ç‰‡</string>
    <string name="ova">OVA</string>

    <!--singular-->
    <string name="movies_singular">ç”µå½±</string>
    <string name="tv_series_singular">å‰§é›†</string>
    <string name="cartoons_singular">å¡é€š</string>
    <string name="anime_singular">@string/anime</string>
    <string name="ova_singular">@string/ova</string>
    <string name="torrent_singular">Torrent</string>
    <string name="documentaries_singular">çºªå½•ç‰‡</string>

    <string name="source_error">æºé”™è¯¯</string>
    <string name="remote_error">è¿œç¨‹é”™è¯¯</string>
    <string name="render_error">æ¸²æŸ“å™¨é”™è¯¯</string>
    <string name="unexpected_error">æ„å¤–çš„æ’­æ”¾å™¨é”™è¯¯</string>
    <string name="storage_error">ä¸‹è½½é”™è¯¯ï¼Œè¯·æ£€æŸ¥å­˜å‚¨æƒé™</string>

    <string name="episode_action_chromecast_episode">æŠ•å±å‰§é›†</string>
    <string name="episode_action_chromecast_mirror">æŠ•å±é•œåƒ</string>
    <string name="episode_action_play_in_app">åœ¨åº”ç”¨ç¨‹åºä¸­æ’­æ”¾</string>
    <string name="episode_action_play_in_vlc">åœ¨VLCä¸­æ’­æ”¾</string>
    <string name="episode_action_play_in_browser">åœ¨æµè§ˆå™¨ä¸­æ’­æ”¾</string>
    <string name="episode_action_copy_link">å¤åˆ¶é“¾æŽ¥</string>
    <string name="episode_action_auto_download">è‡ªåŠ¨ä¸‹è½½</string>
    <string name="episode_action_download_mirror">ä¸‹è½½é•œåƒ</string>
    <string name="episode_action_reload_links">é‡æ–°åŠ è½½é“¾æŽ¥</string>

    <string name="no_update_found">æ‰¾ä¸åˆ°æ›´æ–°</string>
    <string name="check_for_update">æ£€æŸ¥æ›´æ–°</string>

    <string name="video_lock">é”å®š</string>
    <string name="video_aspect_ratio_resize">è°ƒæ•´ç”»é¢</string>
    <string name="video_source">æ¥æº</string>
    <string name="video_skip_op">è·³è¿‡OP</string>

    <string name="dont_show_again">ä¸å†æ˜¾ç¤º</string>
    <string name="update">æ›´æ–°</string>
    <string name="watch_quality_pref">é¦–é€‰æ’­æ”¾è´¨é‡</string>
    <string name="video_buffer_size_settings">è§†é¢‘ç¼“å†²å¤§å°</string>
    <string name="video_buffer_length_settings">è§†é¢‘ç¼“å†²æ—¶é•¿</string>
    <string name="video_buffer_disk_settings">ç£ç›˜ä¸Šçš„è§†é¢‘ç¼“å­˜</string>
    <string name="video_buffer_clear_settings">æ¸…é™¤è§†é¢‘å’Œå›¾åƒç¼“å­˜</string>

    <string name="video_ram_description">å¦‚æžœè®¾ç½®å¤ªé«˜ï¼Œå¯èƒ½ä¼šåœ¨å†…å­˜è¾ƒä½Žçš„ç³»ç»Ÿï¼ˆå¦‚Android TVè®¾å¤‡æˆ–æ—§æ‰‹æœºï¼‰ä¸Šå¯¼è‡´é—®é¢˜ </string>
    <string name="video_disk_description">å¦‚æžœå°†å­˜å‚¨ç©ºé—´è®¾ç½®å¾—å¤ªé«˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´Android TVè®¾å¤‡ç­‰å­˜å‚¨ç©ºé—´ä¸è¶³çš„ç³»ç»Ÿå‡ºçŽ°é—®é¢˜  </string>

    <string name="dns_pref">DNS over HTTPS</string>
    <string name="dns_pref_summary">ç”¨äºŽå¿½ç•¥ISPå—</string>

    <string name="download_path_pref">ä¸‹è½½è·¯å¾„</string>

    <string name="display_subbed_dubbed_settings">æ˜¾ç¤ºæœ‰é…éŸ³/å­—å¹•çš„åŠ¨ç”»</string>

    <string name="resize_fit">é€‚åº”å±å¹•</string>
    <string name="resize_fill">æ‹‰ä¼¸</string>
    <string name="resize_zoom">ç¼©æ”¾</string>

    <string name="legal_notice">å…è´£å£°æ˜Ž</string>
    <string name="legal_notice_key" translatable="false">legal_notice_key</string>
    <string name="legal_notice_text" translatable="false">Any legal issues regarding the content on this application
        should be taken up with the actual file hosts and providers themselves as we are not affiliated with them.

        In case of copyright infringement, please directly contact the responsible parties or the streaming websites.

        The app is purely for educational and personal use.

        CloudStream 3 does not host any content on the app, and has no control over what media is put up or taken down.
        CloudStream 3 functions like any other search engine, such as Google. CloudStream 3 does not host, upload or
        manage any videos, films or content. It simply crawls, aggregates and displayes links in a convenient,
        user-friendly interface.

        It merely scrapes 3rd-party websites that are publicly accessable via any regular web browser. It is the
        responsibility of user to avoid any actions that might violate the laws governing his/her locality. Use
        CloudStream 3 at your own risk.
    </string>
    <string name="general">å…¨å±€</string>
    <string name="provider_lang_settings">å†…å®¹æä¾›è€…è¯­è¨€</string>
    <string name="app_layout">åº”ç”¨å¸ƒå±€</string>
    <string name="preferred_media_settings">é¦–é€‰åª’ä½“</string>

    <string name="automatic">è‡ªåŠ¨</string>
    <string name="tv_layout">ç”µè§†å¸ƒå±€</string>
    <string name="phone_layout">æ‰‹æœºå¸ƒå±€</string>
    <string name="emulator_layout">æ¨¡æ‹Ÿå™¨å¸ƒå±€</string>

    <string name="primary_color_settings">ä¸»é¢˜è‰²</string>
    <string name="app_theme_settings">åº”ç”¨ä¸»é¢˜</string>

    <!-- account stuff -->
    <string name="anilist_key" translatable="false">anilist_key</string>
    <string name="mal_key" translatable="false">mal_key</string>
    <!--
    <string name="mal_account_settings" translatable="false">MAL</string>
    <string name="anilist_account_settings" translatable="false">AniList</string>
    <string name="tmdb_account_settings" translatable="false">TMDB</string>
    <string name="imdb_account_settings" translatable="false">IMDB</string>
    <string name="kitsu_account_settings" translatable="false">Kitsu</string>
    <string name="trakt_account_settings" translatable="false">Trakt</string>
    -->
    <string name="login_format" formatted="true">%s %s</string>
    <string name="account">è´¦æˆ·</string>
    <string name="logout">æ³¨é”€</string>
    <string name="login">ç™»å½•</string>
    <string name="switch_account">åˆ‡æ¢è´¦æˆ·</string>
    <string name="add_account">æ·»åŠ å¸æˆ·</string>
    <string name="add_sync">æ·»åŠ è·Ÿè¸ª</string>
    <string name="added_sync_format" formatted="true">å·²æ·»åŠ %s</string>
    <string name="upload_sync">åŒæ­¥</string>

    <!-- ============ -->
    <string name="none">æ— </string>
    <string name="normal">æ™®é€š</string>
    <string name="all">å…¨éƒ¨</string>
    <string name="max">æœ€å¤§</string>
    <string name="min">æœ€å°</string>
    <string name="subtitles_none" translatable="false">@string/none</string>
    <string name="subtitles_outline">è½®å»“</string>
    <string name="subtitles_depressed">é™ä½Ž</string>
    <string name="subtitles_shadow">é˜´å½±</string>
    <string name="subtitles_raised">æé«˜</string>
    <string name="subtitle_offset">åŒæ­¥å­—å¹•</string>
    <string name="subtitle_offset_hint">1000ms</string>
    <string name="subtitle_offset_title">å­—å¹•å»¶è¿Ÿ</string>
    <string name="subtitle_offset_extra_hint_later_format">å¦‚æžœå­—å¹•è¿‡æ—©æ˜¾ç¤º%dmsï¼Œè¯·ä½¿ç”¨æ­¤é€‰é¡¹ </string>
    <string name="subtitle_offset_extra_hint_before_format">å¦‚æžœå­—å¹•è¿‡æ™šæ˜¾ç¤º%dmsï¼Œè¯·ä½¿ç”¨æ­¤é€‰é¡¹</string>
    <string name="subtitle_offset_extra_hint_none_format">æ— å­—å¹•å»¶è¿Ÿ</string>

    <!--
    Example text (pangram) can optionally be translated; if you do, include all the letters in the alphabet,
    see:
	https://en.wikipedia.org/w/index.php?title=Pangram&oldid=225849300
	https://en.wikipedia.org/wiki/The_quick_brown_fox_jumps_over_the_lazy_dog
    -->
    <string name="subtitles_example_text">ä¸€åªæ•æ·çš„æ£•è‰²ç‹ç‹¸è·³è¿‡ä¸€åªæ‡’æƒ°çš„ç‹—</string>

    <string name="recommended">æŽ¨è</string>
    <string name="player_loaded_subtitles" formatted="true">å·²åŠ è½½%s</string>
    <string name="player_load_subtitles">ä»Žæ–‡ä»¶åŠ è½½</string>
    <string name="downloaded_file">ä¸‹è½½çš„æ–‡ä»¶</string>
    <string name="actor_main">ä¸»æ¼”</string>
    <string name="actor_supporting">é…æ¼”</string>
    <string name="actor_background">ç¾¤æ¼”</string>

    <string name="home_source">æ¥æº</string>
</resources>



================================================
FILE: app/src/main/res/xml/backup_descriptor.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<full-backup-content>
</full-backup-content>


================================================
FILE: app/src/main/res/xml/provider_paths.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<paths>
    <external-path
            name="external"
            path="." />
    <external-files-path
            name="external_files"
            path="." />
    <cache-path
            name="cache"
            path="." />
    <external-cache-path
            name="external_cache"
            path="." />
    <files-path
            name="files"
            path="." />
</paths>


================================================
FILE: app/src/main/res/xml/settings_credits_account.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto">
    <PreferenceCategory app:icon="@color/transparent" />
    <Preference
            android:key="@string/mal_key"
            android:icon="@drawable/mal_logo" />

    <Preference
            android:key="@string/anilist_key"
            android:icon="@drawable/ic_anilist_icon" />
    <Preference
            android:key="@string/legal_notice_key"
            android:title="@string/legal_notice"
            android:icon="@drawable/ic_baseline_warning_24" />

    <Preference
            android:title="@string/github"
            android:icon="@drawable/ic_github_logo"
            app:summary="https://github.com/LagradOst/CloudStream-3">
        <intent
                android:action="android.intent.action.VIEW"
                android:data="https://github.com/LagradOst/CloudStream-3" />
    </Preference>

    <Preference
            android:title="@string/lightnovel"
            android:icon="@drawable/quick_novel_icon"
            app:summary="https://github.com/LagradOst/QuickNovel">
        <intent
                android:action="android.intent.action.VIEW"
                android:data="https://github.com/LagradOst/QuickNovel" />
    </Preference>
    <Preference
            android:title="@string/discord"
            android:icon="@drawable/ic_baseline_discord_24"
            app:summary="https://discord.gg/5Hus6fM">
        <intent
                android:action="android.intent.action.VIEW"
                android:data="https://discord.gg/5Hus6fM" />
    </Preference>
    <Preference
            android:key="@string/benene_count"
            android:title="@string/benene"
            android:icon="@drawable/benene"
            app:summary="@string/benene_des" />
</PreferenceScreen>


================================================
FILE: app/src/main/res/xml/settings_media_lang.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto">
    <PreferenceCategory app:icon="@color/transparent" />

    <Preference
            android:key="@string/locale_key"
            android:title="@string/app_language"
            android:icon="@drawable/ic_baseline_language_24" />
    <Preference
            android:icon="@drawable/ic_baseline_language_24"
            android:key="@string/provider_lang_key"
            android:title="@string/provider_lang_settings" />

    <Preference
            android:key="@string/prefer_media_type_key"
            android:title="@string/preferred_media_settings"
            android:icon="@drawable/ic_baseline_play_arrow_24" />
    <Preference
            android:key="@string/display_sub_key"
            android:title="@string/display_subbed_dubbed_settings"
            android:icon="@drawable/ic_outline_voice_over_off_24" />
</PreferenceScreen>


================================================
FILE: app/src/main/res/xml/settings_nginx.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto">
    <PreferenceCategory app:icon="@color/transparent" />

    <Preference
            android:key="@string/nginx_url_key"
            android:title="@string/nginx_url_pref"
            android:icon="@drawable/ic_baseline_play_arrow_24" />
    <Preference
            android:key="@string/nginx_credentials"
            android:title="@string/nginx_credentials_title"
            android:icon="@drawable/video_locked"
            android:summary="@string/nginx_credentials_summary" />
    <Preference
            android:key="@string/nginx_info"
            android:title="@string/nginx_info_title"
            android:icon="@drawable/ic_baseline_play_arrow_24"
            android:summary="@string/nginx_info_summary">
        <intent
                android:action="android.intent.action.VIEW"
                android:data="https://www.sarlays.com/use-nginx-with-cloudstream/" />
    </Preference>
</PreferenceScreen>


================================================
FILE: app/src/main/res/xml/settings_player.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto">
    <PreferenceCategory app:icon="@color/transparent" />

    <Preference
            android:key="@string/subtitle_settings_key"
            android:title="@string/player_subtitles_settings"
            android:icon="@drawable/ic_outline_subtitles_24"
            app:summary="@string/player_subtitles_settings_des" />
    <Preference
            android:key="@string/subtitle_settings_chromecast_key"
            android:title="@string/chromecast_subtitles_settings"
            android:icon="@drawable/ic_outline_subtitles_24"
            app:summary="@string/chromecast_subtitles_settings_des" />

    <Preference
            android:key="@string/dns_key"
            android:title="@string/dns_pref"
            android:summary="@string/dns_pref_summary"
            android:icon="@drawable/ic_baseline_dns_24" />

    <Preference
            android:key="@string/download_path_key"
            android:title="@string/download_path_pref"
            android:icon="@drawable/netflix_download" />

    <Preference
            android:key="@string/quality_pref_key"
            android:title="@string/watch_quality_pref"
            android:icon="@drawable/ic_baseline_hd_24" />

    <Preference
            android:key="@string/prefer_limit_title_key"
            android:title="@string/limit_title"
            android:icon="@drawable/ic_baseline_text_format_24" />

    <Preference
            android:key="@string/prefer_limit_title_rez_key"
            android:title="@string/limit_title_rez"
            android:icon="@drawable/ic_baseline_text_format_24" />

    <SwitchPreference
            android:icon="@drawable/ic_baseline_picture_in_picture_alt_24"
            app:key="@string/pip_enabled_key"
            android:title="@string/picture_in_picture"
            android:summary="@string/picture_in_picture_des"
            app:defaultValue="true" />
    <SwitchPreference
            android:icon="@drawable/ic_baseline_aspect_ratio_24"
            app:key="@string/player_resize_enabled_key"
            android:title="@string/player_size_settings"
            android:summary="@string/player_size_settings_des"
            app:defaultValue="true" />
    <SwitchPreference
            android:icon="@drawable/ic_baseline_speed_24"
            app:key="@string/playback_speed_enabled_key"
            android:title="@string/eigengraumode_settings"
            android:summary="@string/eigengraumode_settings_des"
            app:defaultValue="false" />
    <SwitchPreference
            android:icon="@drawable/ic_baseline_ondemand_video_24"
            app:key="@string/swipe_enabled_key"
            android:title="@string/swipe_to_seek_settings"
            android:summary="@string/swipe_to_seek_settings_des"
            app:defaultValue="true" />
    <SwitchPreference
            android:icon="@drawable/ic_baseline_ondemand_video_24"
            app:key="@string/swipe_vertical_enabled_key"
            android:title="@string/swipe_to_change_settings"
            android:summary="@string/swipe_to_change_settings_des"
            app:defaultValue="true" />
    <SwitchPreference
            android:icon="@drawable/ic_baseline_touch_app_24"
            app:key="@string/double_tap_enabled_key"
            android:title="@string/double_tap_to_seek_settings"
            android:summary="@string/double_tap_to_seek_settings_des"
            app:defaultValue="false" />
    <SwitchPreference
            android:icon="@drawable/netflix_pause"
            app:key="@string/double_tap_pause_enabled_key"
            android:title="@string/double_tap_to_pause_settings"
            android:summary="@string/double_tap_to_pause_settings_des"
            app:defaultValue="false" />

    <SeekBarPreference
            app:icon="@drawable/go_forward_30"
            app:adjustable="true"
            android:defaultValue="10"
            app:min="5"
            app:seekBarIncrement="5"
            app:showSeekBarValue="true"
            android:max="60"
            app:key="@string/double_tap_seek_time_key"
            android:title="@string/double_tap_to_seek_amount_settings"
            app:defaultValue="false" />

    <SwitchPreference
            android:icon="@drawable/baseline_sync_24"
            app:key="@string/episode_sync_enabled_key"
            android:title="@string/episode_sync_settings"
            android:summary="@string/episode_sync_settings_des"
            app:defaultValue="true" />

    <Preference
            android:key="@string/video_buffer_disk_key"
            android:title="@string/video_buffer_disk_settings"
            android:summary="@string/video_disk_description"
            android:icon="@drawable/ic_baseline_storage_24" />

    <Preference
            android:key="@string/video_buffer_size_key"
            android:title="@string/video_buffer_size_settings"
            android:summary="@string/video_ram_description"
            android:icon="@drawable/ic_baseline_storage_24" />

    <Preference
            android:key="@string/video_buffer_length_key"
            android:title="@string/video_buffer_length_settings"
            android:summary="@string/video_ram_description"
            android:icon="@drawable/ic_baseline_storage_24" />

    <Preference
            android:key="@string/video_buffer_clear_key"
            android:title="@string/video_buffer_clear_settings"
            android:icon="@drawable/ic_baseline_delete_outline_24" />
</PreferenceScreen>


================================================
FILE: app/src/main/res/xml/settings_updates.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto">
    <PreferenceCategory app:icon="@color/transparent" />

    <Preference
            android:title="@string/check_for_update"
            app:summary="@string/app_version"
            app:key="@string/manual_check_update_key"
            app:icon="@drawable/ic_baseline_system_update_24" />

    <Preference
            android:icon="@drawable/baseline_save_as_24"
            android:key="@string/backup_key"
            android:title="@string/backup_settings" />

    <Preference
            android:icon="@drawable/baseline_restore_page_24"
            android:key="@string/restore_key"
            android:title="@string/restore_settings" />

    <Preference
            android:key="@string/show_logcat_key"
            android:title="@string/show_log_cat"
            android:icon="@drawable/baseline_description_24" />
    <SwitchPreference
            android:key="acra.disable"
            android:icon="@drawable/ic_baseline_bug_report_24"
            android:title="@string/pref_disable_acra"
            android:summaryOff="@string/bug_report_settings_off"
            android:summaryOn="@string/bug_report_settings_on"
            android:defaultValue="false" />
    <SwitchPreference
            app:key="@string/auto_update_key"
            android:title="@string/updates_settings"
            android:summary="@string/updates_settings_des"
            app:defaultValue="true"
            android:icon="@drawable/ic_baseline_notifications_active_24" />
    <SwitchPreference
            app:key="@string/prerelease_update_key"
            android:title="@string/uprereleases_settings"
            android:summary="@string/uprereleases_settings_des"
            app:defaultValue="false"
            android:icon="@drawable/ic_baseline_developer_mode_24" />
    <SwitchPreference
            android:icon="@drawable/netflix_download"
            android:key="@string/killswitch_key"
            android:defaultValue="true"
            android:summary="@string/killswitch_settings_des"
            android:title="@string/killswitch_settings" />
</PreferenceScreen>


================================================
FILE: app/src/main/res/xml/settins_ui.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto">
    <PreferenceCategory app:icon="@color/transparent" />

    <Preference
            android:icon="@drawable/ic_baseline_color_lens_24"
            android:key="@string/primary_color_key"
            android:title="@string/primary_color_settings" />
    <Preference
            android:icon="@drawable/ic_baseline_color_lens_24"
            android:key="@string/app_theme_key"
            android:title="@string/app_theme_settings" />
    <Preference
            android:icon="@drawable/ic_baseline_tv_24"
            android:key="@string/app_layout_key"
            android:title="@string/app_layout" />
    <Preference
            android:icon="@drawable/ic_baseline_tv_24"
            android:key="@string/poster_ui_key"
            android:title="@string/poster_ui_settings" />
    <SwitchPreference
            android:icon="@drawable/search_icon"
            app:key="advanced_search"
            android:title="@string/advanced_search"
            android:summary="@string/advanced_search_des"
            app:defaultValue="true" />
    <SwitchPreference
            android:defaultValue="true"
            android:icon="@drawable/baseline_grid_view_24"
            android:key="@string/bottom_title_key"
            android:summary="@string/bottom_title_settings_des"
            android:title="@string/bottom_title_settings" />
    <SwitchPreference
            android:key="@string/show_fillers_key"
            android:icon="@drawable/ic_baseline_skip_next_24"
            android:title="@string/show_fillers_settings"
            android:defaultValue="false" />
    <SwitchPreference
            android:icon="@drawable/ic_baseline_play_arrow_24"
            app:key="@string/random_button_key"
            android:title="@string/random_button_settings"
            android:summary="@string/random_button_settings_desc"
            app:defaultValue="false" />
</PreferenceScreen>


================================================
FILE: app/src/prerelease/res/drawable/ic_banner_foreground.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="320dp"
        android:height="180dp"
        android:viewportWidth="320"
        android:viewportHeight="180">
    <group
            android:scaleX="0.6666667"
            android:scaleY="0.6666667"
            android:translateX="53.333332"
            android:translateY="30">
        <group
                android:scaleX="0"
                android:scaleY="0"
                android:translateX="160"
                android:translateY="90">
            <group android:translateY="155.39062">
                <path
                        android:pathData="M81.84375,-4.53125Q70.671875,2,54,2Q32.484375,2,19.546875,-11.953125Q6.609375,-25.921875,6.609375,-48.59375Q6.609375,-72.953125,21.15625,-87.96875Q35.71875,-103,58.078125,-103Q72.421875,-103,81.84375,-98.59375L81.84375,-86Q71.015625,-92,57.9375,-92Q40.578125,-92,29.78125,-80.375Q18.984375,-68.765625,18.984375,-49.34375Q18.984375,-30.890625,29.078125,-19.9375Q39.171875,-9,55.546875,-9Q70.734375,-9,81.84375,-16L81.84375,-4.53125Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M112.203125,0L100.671875,0L100.671875,-107L112.203125,-107L112.203125,0Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M165.76562,2Q149.8125,2,140.28125,-8.171875Q130.75,-18.34375,130.75,-35.15625Q130.75,-53.4375,140.65625,-63.71875Q150.57812,-74,167.45312,-74Q183.5625,-74,192.59375,-64Q201.625,-54,201.625,-36.28125Q201.625,-18.921875,191.89062,-8.453125Q182.15625,2,165.76562,2ZM166.60938,-64Q155.5,-64,149.03125,-56.4375Q142.5625,-48.875,142.5625,-35.578125Q142.5625,-22.78125,149.09375,-15.390625Q155.64062,-8,166.60938,-8Q177.79688,-8,183.79688,-15.25Q189.8125,-22.5,189.8125,-35.859375Q189.8125,-49.359375,183.79688,-56.671875Q177.79688,-64,166.60938,-64Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M277.89062,0L266.35938,0L266.35938,-11.375L266.07812,-11.375Q258.90625,2,243.85938,2Q218.125,2,218.125,-28.78125L218.125,-72L229.59375,-72L229.59375,-30.78125Q229.59375,-8,247.03125,-8Q255.46875,-8,260.90625,-14.21875Q266.35938,-20.453125,266.35938,-30.5L266.35938,-72L277.89062,-72L277.89062,0Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M363.125,0L351.59375,0L351.59375,-12.21875L351.3125,-12.21875Q343.29688,2,326.5625,2Q313,2,304.875,-7.75Q296.75,-17.5,296.75,-34.296875Q296.75,-52.3125,305.75,-63.15625Q314.75,-74,329.73438,-74Q344.5625,-74,351.3125,-62.03125L351.59375,-62.03125L351.59375,-107L363.125,-107L363.125,0ZM351.59375,-32.546875L351.59375,-43.171875Q351.59375,-51.90625,345.82812,-57.953125Q340.0625,-64,331.20312,-64Q320.65625,-64,314.60938,-56.25Q308.5625,-48.515625,308.5625,-34.875Q308.5625,-22.421875,314.35938,-15.203125Q320.17188,-8,329.9375,-8Q339.57812,-8,345.57812,-14.953125Q351.59375,-21.921875,351.59375,-32.546875Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M383.51562,-4.078125L383.51562,-18Q385.90625,-15.90625,389.23438,-14.234375Q392.57812,-12.5625,396.26562,-11.40625Q399.96875,-10.25,403.6875,-9.625Q407.42188,-9,410.57812,-9Q421.48438,-9,426.85938,-13Q432.23438,-17,432.23438,-24.5Q432.23438,-28.609375,430.4375,-31.65625Q428.65625,-34.703125,425.48438,-37.21875Q422.32812,-39.734375,418,-42.03125Q413.67188,-44.328125,408.6875,-46.890625Q403.40625,-49.578125,398.82812,-52.34375Q394.26562,-55.109375,390.89062,-58.4375Q387.51562,-61.765625,385.57812,-65.96875Q383.65625,-70.1875,383.65625,-75.859375Q383.65625,-82.796875,386.67188,-87.9375Q389.70312,-93.078125,394.625,-96.40625Q399.54688,-99.734375,405.82812,-101.359375Q412.125,-103,418.67188,-103Q433.57812,-103,440.39062,-99.296875L440.39062,-86Q431.46875,-92,417.46875,-92Q413.60938,-92,409.73438,-91.1875Q405.875,-90.390625,402.84375,-88.578125Q399.82812,-86.765625,397.92188,-83.90625Q396.03125,-81.046875,396.03125,-76.921875Q396.03125,-73.03125,397.46875,-70.1875Q398.90625,-67.359375,401.71875,-65.015625Q404.53125,-62.6875,408.57812,-60.484375Q412.625,-58.28125,417.89062,-55.671875Q423.3125,-52.96875,428.15625,-50Q433.01562,-47.03125,436.67188,-43.40625Q440.32812,-39.796875,442.46875,-35.40625Q444.60938,-31.015625,444.60938,-25.34375Q444.60938,-17.828125,441.6875,-12.625Q438.78125,-7.421875,433.8125,-4.15625Q428.85938,-0.90625,422.39062,0.546875Q415.92188,2,408.75,2Q406.35938,2,402.84375,1.59375Q399.32812,1.1875,395.67188,0.40625Q392.01562,-0.375,388.75,-1.515625Q385.48438,-2.671875,383.51562,-4.078125Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M497.07812,-0.234375Q493,2,486.3125,2Q467.40625,2,467.40625,-19.1875L467.40625,-62L455.03125,-62L455.03125,-72L467.40625,-72L467.40625,-89.328125L478.9375,-93L478.9375,-72L497.07812,-72L497.07812,-62L478.9375,-62L478.9375,-21.4375Q478.9375,-14.1875,481.39062,-11.09375Q483.85938,-8,489.54688,-8Q493.90625,-8,497.07812,-10L497.07812,-0.234375Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M550.21875,-60Q547.2031,-62,541.5,-62Q534.125,-62,529.15625,-55.109375Q524.2031,-48.21875,524.2031,-36.328125L524.2031,0L512.6719,0L512.6719,-72L524.2031,-72L524.2031,-56.515625L524.4844,-56.515625Q526.9531,-64.296875,532.0156,-68.640625Q537.0781,-73,543.3281,-73Q547.8281,-73,550.21875,-72.015625L550.21875,-60Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M620.5469,-33L569.7031,-33Q569.9844,-21.03125,576.1719,-14.515625Q582.3594,-8,593.1875,-8Q605.3594,-8,615.5469,-16L615.5469,-5Q606.0625,2,590.4531,2Q575.1875,2,566.46875,-7.890625Q557.75,-17.78125,557.75,-35.71875Q557.75,-52.65625,567.28125,-63.328125Q576.8125,-74,590.9375,-74Q605.0781,-74,612.8125,-64.765625Q620.5469,-55.53125,620.5469,-39.109375L620.5469,-33ZM608.7344,-43Q608.65625,-52.9375,603.90625,-58.46875Q599.1719,-64,590.7344,-64Q582.5781,-64,576.875,-58.1875Q571.1875,-52.375,569.84375,-43L608.7344,-43Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M689.21875,0L677.6875,0L677.6875,-11.234375L677.40625,-11.234375Q669.875,2,655.25,2Q644.5,2,638.40625,-3.765625Q632.3281,-9.546875,632.3281,-19.109375Q632.3281,-39.578125,656.09375,-42.9375L677.6875,-46Q677.6875,-64,662.84375,-64Q649.84375,-64,639.3594,-55L639.3594,-67.09375Q649.9844,-74,663.8281,-74Q689.21875,-74,689.21875,-47.03125L689.21875,0ZM677.6875,-37L660.3125,-34.5625Q652.2969,-33.40625,648.21875,-30.5Q644.1406,-27.59375,644.1406,-20.203125Q644.1406,-14.8125,647.90625,-11.40625Q651.6719,-8,657.9219,-8Q666.5,-8,672.09375,-14.140625Q677.6875,-20.28125,677.6875,-29.671875L677.6875,-37Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M812.90625,0L801.375,0L801.375,-41.359375Q801.375,-53.3125,797.6875,-58.65625Q794,-64,785.28125,-64Q777.8906,-64,772.71875,-57.25Q767.5625,-50.5,767.5625,-41.078125L767.5625,0L756.03125,0L756.03125,-42.765625Q756.03125,-64,739.6406,-64Q732.0469,-64,727.125,-57.625Q722.2031,-51.265625,722.2031,-41.078125L722.2031,0L710.6719,0L710.6719,-72L722.2031,-72L722.2031,-60.625L722.4844,-60.625Q730.15625,-74,744.84375,-74Q752.2344,-74,757.71875,-69.796875Q763.2031,-65.609375,765.2344,-58.796875Q773.25,-74,789.1406,-74Q812.90625,-74,812.90625,-44.5625L812.90625,0Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M875.21875,0L875.21875,-101L903.0625,-101Q956.3594,-101,956.3594,-51.765625Q956.3594,-28.390625,941.5625,-14.1875Q926.7656,0,901.9375,0L875.21875,0ZM887.03125,-90L887.03125,-11L902.0781,-11Q921.90625,-11,932.9375,-21.546875Q943.9844,-32.109375,943.9844,-51.484375Q943.9844,-90,902.78125,-90L887.03125,-90Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M1032.5469,-33L981.7031,-33Q981.9844,-21.03125,988.1719,-14.515625Q994.3594,-8,1005.1875,-8Q1017.3594,-8,1027.5469,-16L1027.5469,-5Q1018.0625,2,1002.4531,2Q987.1875,2,978.46875,-7.890625Q969.75,-17.78125,969.75,-35.71875Q969.75,-52.65625,979.28125,-63.328125Q988.8125,-74,1002.9375,-74Q1017.0781,-74,1024.8125,-64.765625Q1032.5469,-55.53125,1032.5469,-39.109375L1032.5469,-33ZM1020.7344,-43Q1020.65625,-52.9375,1015.90625,-58.46875Q1011.1719,-64,1002.7344,-64Q994.5781,-64,988.875,-58.1875Q983.1875,-52.375,981.84375,-43L1020.7344,-43Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M1061.4844,-10.390625L1061.2031,-10.390625L1061.2031,0L1049.6719,0L1049.6719,-107L1061.2031,-107L1061.2031,-59.359375L1061.4844,-59.359375Q1070,-74,1086.375,-74Q1100.2344,-74,1108.0625,-64.25Q1115.9062,-54.5,1115.9062,-38.125Q1115.9062,-19.90625,1107.1094,-8.953125Q1098.3281,2,1083.0781,2Q1068.7969,2,1061.4844,-10.390625ZM1061.2031,-39.453125L1061.2031,-29.390625Q1061.2031,-20.453125,1067,-14.21875Q1072.8125,-8,1081.7344,-8Q1092.2188,-8,1098.1562,-16.015625Q1104.0938,-24.046875,1104.0938,-38.328125Q1104.0938,-50.359375,1098.5312,-57.171875Q1092.9844,-64,1083.5,-64Q1073.4375,-64,1067.3125,-57Q1061.2031,-50,1061.2031,-39.453125Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M1192.8906,0L1181.3594,0L1181.3594,-11.375L1181.0781,-11.375Q1173.9062,2,1158.8594,2Q1133.125,2,1133.125,-28.78125L1133.125,-72L1144.5938,-72L1144.5938,-30.78125Q1144.5938,-8,1162.0312,-8Q1170.4688,-8,1175.9062,-14.21875Q1181.3594,-20.453125,1181.3594,-30.5L1181.3594,-72L1192.8906,-72L1192.8906,0Z"
                        android:fillColor="#FFFFFF" />
                <path
                        android:pathData="M1278.125,-5.703125Q1278.125,34,1240.1562,34Q1226.7969,34,1216.8125,28.8125L1216.8125,17Q1228.9844,24,1240.0156,24Q1266.5938,24,1266.5938,-4.21875L1266.5938,-12.078125L1266.3125,-12.078125Q1258.0938,2,1241.5625,2Q1228.1406,2,1219.9375,-7.671875Q1211.75,-17.359375,1211.75,-33.65625Q1211.75,-52.171875,1220.5781,-63.078125Q1229.4062,-74,1244.7344,-74Q1259.2812,-74,1266.3125,-62.03125L1266.5938,-62.03125L1266.5938,-72L1278.125,-72L1278.125,-5.703125ZM1266.5938,-32.546875L1266.5938,-43.171875Q1266.5938,-51.765625,1260.7969,-57.875Q1255,-64,1246.3438,-64Q1235.6562,-64,1229.6094,-56.21875Q1223.5625,-48.453125,1223.5625,-34.453125Q1223.5625,-22.421875,1229.3594,-15.203125Q1235.1719,-8,1244.7344,-8Q1254.4375,-8,1260.5156,-14.890625Q1266.5938,-21.78125,1266.5938,-32.546875Z"
                        android:fillColor="#FFFFFF" />
            </group>
        </group>
    </group>
</vector>


================================================
FILE: app/src/prerelease/res/drawable-v24/ic_banner_background.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="320dp"
    android:height="180dp"
    android:viewportWidth="320"
    android:viewportHeight="180">
  <group android:scaleX="0.6666667"
      android:scaleY="0.6666667"
      android:translateX="53.333332"
      android:translateY="30">
    <group android:scaleX="0.35277516"
        android:scaleY="0.35277516"
        android:translateX="5.879586E-4">
        <path
                android:strokeWidth="1"
                android:pathData="M-20.09,-10.91h949.79v534.26h-949.79z"
                android:fillColor="#121212"
                android:strokeColor="#fff" />
        <path android:pathData="M273.68,250.58a18.79,18.79 0,0 0,-5.64 0.86,26.56 26.56,0 0,0 -24.73,-21.51 40.83,40.83 0,0 0,-68.95 -13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H273.68a18.9,18.9 0,0 0,0 -37.8Z">
            <aapt:attr name="android:fillColor">
                <gradient
                        android:startY="245.72"
                        android:startX="113.12"
                        android:endY="245.72"
                        android:endX="292.58"
                        android:type="linear">
                    <item
                            android:offset="0"
                            android:color="#DB0909" />
                    <item
                            android:offset="1"
                            android:color="#A10808" />
                </gradient>
            </aapt:attr>
        </path>
        <path android:pathData="M248.76,234.41c0,-1.22 0,-2.42 -0.09,-3.63a27,27 0,0 0,-5.36 -0.85,40.83 40.83,0 0,0 -68.95,-13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H228.5A81.75,81.75 0,0 0,248.76 234.41Z">
            <aapt:attr name="android:fillColor">
                <gradient
                        android:startY="245.72"
                        android:startX="113.12"
                        android:endY="245.72"
                        android:endX="248.76"
                        android:type="linear">
                    <item
                            android:offset="0"
                            android:color="#E23A3A" />
                    <item
                            android:offset="1"
                            android:color="#DD1130" />
                </gradient>
            </aapt:attr>
        </path>
        <path android:pathData="M174.36,216.85A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.89,18.89 0,0 0,-1.18 37.74A81.53,81.53 0,0 0,210 206.83c0,-1.15 0,-2.29 -0.09,-3.43a41.33,41.33 0,0 0,-5 -0.33A40.71,40.71 0,0 0,174.36 216.85Z">
            <aapt:attr name="android:fillColor">
                <gradient
                        android:startY="245.69"
                        android:startX="113.12"
                        android:endY="245.69"
                        android:endX="210.03"
                        android:type="linear">
                    <item
                            android:offset="0"
                            android:color="#E44D4D" />
                    <item
                            android:offset="1"
                            android:color="#E76161" />
                </gradient>
            </aapt:attr>
        </path>

        <path
                android:pathData="M358.81,285q-13.53,0 -22.64,-9.1t-9,-22.72q0,-13.62 9,-22.64 9,-9.18 22.64,-9.19 13.79,0 22.38,10l-5.62,5.44a20.82,20.82 0,0 0,-16.76 -7.91,23 23,0 0,0 -16.94,6.81q-6.72,6.72 -6.72,17.53t6.72,17.53a23,23 0,0 0,16.94 6.81q10.63,0 18.46,-8.94l5.7,5.53a29.57,29.57 0,0 1,-10.63 8A32.44,32.44 0,0 1,358.81 285Z"
                android:fillColor="#E23A3A" />
        <path
                android:pathData="M397.78,222.69v60.93H390V222.69Z"
                android:fillColor="#E23A3A" />
        <path
                android:pathData="M404.5,262.77q0,-9.61 6,-15.91a20.6,20.6 0,0 1,15.41 -6.3,20.31 20.31,0 0,1 15.31,6.3 21.87,21.87 0,0 1,6.13 15.91q0,9.71 -6.13,15.92A20.3,20.3 0,0 1,426 285a20.6,20.6 0,0 1,-15.41 -6.29Q404.5,272.39 404.5,262.77ZM412.33,262.77a15.31,15.31 0,0 0,3.91 10.9,13.38 13.38,0 0,0 19.41,0 17,17 0,0 0,0 -21.7,13.18 13.18,0 0,0 -19.41,0A15.18,15.18 0,0 0,412.33 262.77Z"
                android:fillColor="#E23A3A" />
        <path
                android:pathData="M490.7,283.62h-7.48v-5.78h-0.35a13.86,13.86 0,0 1,-5.48 5.1,15.77 15.77,0 0,1 -7.7,2q-7.67,0 -11.79,-4.38t-4.13,-12.47v-26.2h7.83v25.69q0.25,10.22 10.3,10.22a9.81,9.81 0,0 0,7.83 -3.79,13.7 13.7,0 0,0 3.14,-9.06V241.93h7.83Z"
                android:fillColor="#E23A3A" />
        <path
                android:pathData="M517.25,285a18.34,18.34 0,0 1,-14 -6.46,24.34 24.34,0 0,1 0,-31.49 18.35,18.35 0,0 1,14 -6.47,18.07 18.07,0 0,1 8.39,2 14.84,14.84 0,0 1,5.83 5.19h0.34l-0.34,-5.78L531.47,222.69h7.82v60.93h-7.48v-5.78h-0.34a14.84,14.84 0,0 1,-5.83 5.19A18.07,18.07 0,0 1,517.25 285ZM518.53,277.86a12,12 0,0 0,9.45 -4.17q3.82,-4.17 3.83,-10.9A15.54,15.54 0,0 0,528 252a12.05,12.05 0,0 0,-9.45 -4.26,12.19 12.19,0 0,0 -9.44,4.26 15.5,15.5 0,0 0,-3.83 10.8,15.32 15.32,0 0,0 3.83,10.81A12.19,12.19 0,0 0,518.53 277.84Z"
                android:fillColor="#E23A3A" />
        <path
                android:pathData="M587.8,267.33a15.91,15.91 0,0 1,-5.87 12.88A22.43,22.43 0,0 1,567.46 285a21.39,21.39 0,0 1,-13.36 -4.42,22.65 22.65,0 0,1 -8,-12.08l7.49,-3.07a19.3,19.3 0,0 0,2.13 4.94,15.72 15.72,0 0,0 3.19,3.78 14.25,14.25 0,0 0,4 2.47,12.26 12.26,0 0,0 4.68,0.9 13.47,13.47 0,0 0,8.76 -2.77,9 9,0 0,0 3.41,-7.36 8.8,8.8 0,0 0,-2.81 -6.55q-2.64,-2.64 -9.87,-5.11 -7.32,-2.64 -9.11,-3.57 -9.69,-4.94 -9.7,-14.55a14.84,14.84 0,0 1,5.37 -11.49A19.53,19.53 0,0 1,567 221.33a20.5,20.5 0,0 1,12.09 3.58,16.67 16.67,0 0,1 6.8,8.76l-7.31,3.06a10.84,10.84 0,0 0,-4 -5.65,13.1 13.1,0 0,0 -15.11,0.28 7.41,7.41 0,0 0,-3.15 6.19,7.14 7.14,0 0,0 2.47,5.42q2.73,2.29 11.83,5.42 9.27,3.17 13.23,7.72A16.53,16.53 0,0 1,587.8 267.33Z"
                android:fillColor="#E76161" />
        <path
                android:pathData="M610.26,284.3a11.88,11.88 0,0 1,-8.46 -3.15c-2.25,-2.09 -3.4,-5 -3.45,-8.76V249.07H591v-7.14h7.32V229.16h7.83v12.77h10.21v7.14H606.18v20.77c0,2.78 0.54,4.66 1.61,5.66a5.27,5.27 0,0 0,3.66 1.48,7.9 7.9,0 0,0 1.83,-0.21 9,9 0,0 0,1.66 -0.55l2.47,7A21.23,21.23 0,0 1,610.26 284.3Z"
                android:fillColor="#E76161" />
        <path
                android:pathData="M631.71,283.62h-7.83V241.93h7.48v6.8h0.35a11.31,11.31 0,0 1,4.89 -5.66,13.66 13.66,0 0,1 7.27,-2.34 14.7,14.7 0,0 1,5.79 1l-2.38,7.57a12.93,12.93 0,0 0,-4.6 -0.6,10.11 10.11,0 0,0 -7.7,3.58 12,12 0,0 0,-3.27 8.34Z"
                android:fillColor="#E76161" />
        <path
                android:pathData="M670.93,285a19.93,19.93 0,0 1,-15.14 -6.29q-6,-6.3 -6,-15.92a22.65,22.65 0,0 1,5.79 -15.87,19.15 19.15,0 0,1 14.8,-6.34q9.29,0 14.77,6t5.49,16.81l-0.09,0.85L657.83,264.24a13.56,13.56 0,0 0,4.08 9.87,13.06 13.06,0 0,0 9.36,3.75q7.49,0 11.75,-7.49l7,3.4a20.69,20.69 0,0 1,-7.78 8.25A21.51,21.51 0,0 1,670.93 285ZM658.42,257.77h23.92a10.43,10.43 0,0 0,-3.53 -7.19,12.38 12.38,0 0,0 -8.56,-2.85 11.34,11.34 0,0 0,-7.61 2.72A13.09,13.09 0,0 0,658.42 257.75Z"
                android:fillColor="#E76161" />
        <path
                android:pathData="M714.08,240.56q8.67,0 13.7,4.64c3.34,3.1 5,7.33 5,12.72v25.7h-7.49v-5.78H725Q720.11,285 712,285a16.83,16.83 0,0 1,-11.53 -4.08,13 13,0 0,1 -4.63,-10.21 12.38,12.38 0,0 1,4.89 -10.3q4.89,-3.83 13.06,-3.83a23.16,23.16 0,0 1,11.49 2.55v-1.78a8.9,8.9 0,0 0,-3.24 -6.94,11.08 11.08,0 0,0 -7.57,-2.85 12,12 0,0 0,-10.38 5.53l-6.89,-4.34Q702.93,240.57 714.08,240.56ZM704,270.86a6.24,6.24 0,0 0,2.59 5.1,9.57 9.57,0 0,0 6.09,2.05 12.5,12.5 0,0 0,8.81 -3.66,11.47 11.47,0 0,0 3.87,-8.6q-3.66,-2.88 -10.21,-2.89a13.22,13.22 0,0 0,-8 2.3A6.81,6.81 0,0 0,704 270.86Z"
                android:fillColor="#E76161" />
        <path
                android:pathData="M749.47,283.62h-7.82V241.93h7.48v5.78h0.34a14,14 0,0 1,5.49 -5.1,15.06 15.06,0 0,1 7.36,-2.05 15.22,15.22 0,0 1,8.09 2.13,12.56 12.56,0 0,1 5.1,5.87q5.19,-8 14.39,-8 7.23,0 11.14,4.43T805,257.58v26h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.06,9v23.06h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.07,9Z"
                android:fillColor="#E76161" />

        <path android:pathData="M-13.76,555.76c10.3,-20.89 58.91,-113.94 157.31,-139.7C261.3,385.24 405.9,462.43 469.89,613.28">
            <aapt:attr name="android:fillColor">
                <gradient
                        android:startY="252.3"
                        android:startX="194.11"
                        android:endY="252.3"
                        android:endX="373.57"
                        android:type="linear">
                    <item
                            android:offset="0"
                            android:color="#E76161" />
                    <item
                            android:offset="1"
                            android:color="#E23A3A" />
                </gradient>
            </aapt:attr>
        </path>
        <path android:pathData="M318.2,592.15c52.89,-55.46 139,-131.3 263,-187.83 223.69,-102 495.29,-119.94 515.35,-62.21 13,37.39 -73.5,124.43 -496.69,339.65">
            <aapt:attr name="android:fillColor">
                <gradient
                        android:startX="400.11"
                        android:endX="900"
                        android:type="linear">
                    <item
                            android:offset="0"
                            android:color="#E76161" />
                    <item
                            android:offset="1"
                            android:color="#E23A3A" />
                </gradient>
            </aapt:attr>
        </path>
        <path android:pathData="M-57.58,195c206.91,86.6 494,-219.13 453.91,-347.48C353.52,-289.67 -103.15,-353.41 -203.15,-176 -265.5,-65.35 -189.57,139.73 -57.58,195Z">
            <aapt:attr name="android:fillColor">
                <gradient
                        android:startY="252.3"
                        android:startX="-100"
                        android:endY="252.3"
                        android:endX="373.57"
                        android:type="linear">
                    <item
                            android:offset="0"
                            android:color="#E76161" />
                    <item
                            android:offset="1"
                            android:color="#E23A3A" />
                </gradient>
            </aapt:attr>
        </path>
        <path android:pathData="M698.42,648.89C625.71,546 764,320.79 920.68,218.45c46.61,-30.44 110.17,-72 164.35,-50.08 102.25,41.28 158.19,303.22 28.17,446.08C996.65,742.52 762.64,739.78 698.42,648.89Z">
            <aapt:attr name="android:fillColor">
                <gradient
                        android:startX="700.11"
                        android:endX="900.57"
                        android:type="linear">
                    <item
                            android:offset="0"
                            android:color="#E76161" />
                    <item
                            android:offset="1"
                            android:color="#E23A3A" />
                </gradient>
            </aapt:attr>
        </path>
        <path android:pathData="M339.91,-42.46a246.52,141.46 0,1 0,493.04 0a246.52,141.46 0,1 0,-493.04 0z">
            <aapt:attr name="android:fillColor">
                <gradient
                        android:startX="400.11"
                        android:endX="800.57"
                        android:type="linear">
                    <item
                            android:offset="0"
                            android:color="#E76161" />
                    <item
                            android:offset="1"
                            android:color="#E23A3A" />
                </gradient>
            </aapt:attr>
        </path>
    </group>
  </group>
</vector>



================================================
FILE: app/src/prerelease/res/drawable-v24/ic_launcher_foreground.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108"
    android:name="vector">
  <group android:scaleX="0.1755477"
      android:scaleY="0.1755477"
      android:translateX="29.16"
      android:translateY="29.16">
      <path android:name="path"
            android:pathData="M 245.05 148.63 C 242.249 148.627 239.463 149.052 236.79 149.89 C 235.151 141.364 230.698 133.63 224.147 127.931 C 217.597 122.233 209.321 118.893 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 245.05 203.9 C 252.375 203.9 259.408 200.987 264.587 195.807 C 269.767 190.628 272.68 183.595 272.68 176.27 C 272.68 168.945 269.767 161.912 264.587 156.733 C 259.408 151.553 252.375 148.64 245.05 148.64 Z"
            android:strokeWidth="1"
            tools:ignore="VectorPath">
          <aapt:attr name="android:fillColor">
              <gradient
                      android:startY="0"
                      android:startX="200"
                      android:endY="0"
                      android:endX="300"
                      android:type="linear">
                  <item android:offset="0" android:color="#DB0909"/>
                  <item android:offset="1" android:color="#A10808"/>
              </gradient>
          </aapt:attr>
      </path>

      <path android:name="path_1" android:pathData="M 208.61 125 C 208.61 123.22 208.55 121.45 208.48 119.69 C 205.919 119.01 203.296 118.595 200.65 118.45 C 195.913 105.431 186.788 94.458 174.851 87.427 C 162.914 80.396 148.893 77.735 135.21 79.905 C 121.527 82.074 109.017 88.941 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.615 148.64 23.582 151.553 18.403 156.733 C 13.223 161.912 10.31 168.945 10.31 176.27 C 10.31 183.595 13.223 190.628 18.403 195.807 C 23.582 200.987 30.615 203.9 37.94 203.9 L 179 203.9 C 198.116 182.073 208.646 154.015 208.61 125 Z"
            android:strokeWidth="1">
      <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="0"
                  android:startX="200"
                  android:endY="0"
                  android:endX="000"
                  android:type="linear">
              <item android:offset="0" android:color="#E23A3A"/>
              <item android:offset="1" android:color="#DD1130"/>
          </gradient>
      </aapt:attr>
      </path>

      <path android:name="path_2" android:pathData="M 99.84 99.32 C 89.871 95.945 79.051 96.024 69.133 99.545 C 59.215 103.065 50.765 109.826 45.155 118.73 C 39.545 127.634 37.094 138.174 38.2 148.64 L 37.94 148.64 C 30.783 148.665 23.909 151.471 18.779 156.461 C 13.648 161.452 10.653 168.246 10.43 175.399 C 10.207 182.553 12.773 189.52 17.583 194.82 C 22.392 200.121 29.079 203.349 36.22 203.82 C 67.216 202.93 96.673 189.98 118.284 167.742 C 139.895 145.504 151.997 115.689 152 84.68 C 152 83 151.94 81.33 151.87 79.68 C 149.443 79.361 146.998 79.194 144.55 79.18 C 136.095 79.171 127.735 80.962 120.026 84.434 C 112.317 87.907 105.435 92.982 99.84 99.32 Z"
             android:strokeWidth="1">
      <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="0"
                  android:startX="150"
                  android:endY="0"
                  android:endX="000"
                  android:type="linear">
              <item android:offset="0" android:color="#E44D4D"/>
              <item android:offset="1" android:color="#E76161"/>
          </gradient>
      </aapt:attr>
  </path>
  </group>
</vector>


================================================
FILE: app/src/prerelease/res/mipmap-anydpi-v26/ic_banner.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_banner_background"/>
</adaptive-icon>


================================================
FILE: app/src/prerelease/res/mipmap-anydpi-v26/ic_launcher.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@color/ic_launcher_background"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>


================================================
FILE: app/src/prerelease/res/mipmap-anydpi-v26/ic_launcher_round.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@color/ic_launcher_background"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>


================================================
FILE: app/src/prerelease/res/values/ic_launcher_background.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="ic_launcher_background">#000000</color>
</resources>


================================================
FILE: app/src/prerelease/res/values/strings.xml
================================================
<resources>
    <string name="app_name">CloudStream Beta</string>
</resources>


================================================
FILE: app/src/release/res/drawable-v24/ic_banner_background.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="320dp"
    android:height="180dp"
    android:viewportWidth="320"
    android:viewportHeight="180">
  <group android:scaleX="0.6666667"
      android:scaleY="0.6666667"
      android:translateX="53.333332"
      android:translateY="30">
    <group android:scaleX="0.35277516"
        android:scaleY="0.35277516"
        android:translateX="5.879586E-4">
      <path
          android:strokeWidth="1"
          android:pathData="M-20.09,-10.91h949.79v534.26h-949.79z"
          android:fillColor="#121212"
          android:strokeColor="#fff"/>
      <path
              android:pathData="M273.68,250.58a18.79,18.79 0,0 0,-5.64 0.86,26.56 26.56,0 0,0 -24.73,-21.51 40.83,40.83 0,0 0,-68.95 -13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H273.68a18.9,18.9 0,0 0,0 -37.8Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="245.72"
                  android:startX="113.12"
                  android:endY="245.72"
                  android:endX="292.58"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
              android:pathData="M248.76,234.41c0,-1.22 0,-2.42 -0.09,-3.63a27,27 0,0 0,-5.36 -0.85,40.83 40.83,0 0,0 -68.95,-13.08A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.9,18.9 0,0 0,0 37.8H228.5A81.75,81.75 0,0 0,248.76 234.41Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="245.72"
                  android:startX="113.12"
                  android:endY="245.72"
                  android:endX="248.76"
                  android:type="linear">
            <item android:offset="0" android:color="#FF4F6DFB"/>
            <item android:offset="0.6" android:color="#FF3559E7"/>
            <item android:offset="1" android:color="#FF2149D8"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
              android:pathData="M174.36,216.85A32.07,32.07 0,0 0,132 247.24a30.92,30.92 0,0 0,0.18 3.35H132a18.89,18.89 0,0 0,-1.18 37.74A81.53,81.53 0,0 0,210 206.83c0,-1.15 0,-2.29 -0.09,-3.43a41.33,41.33 0,0 0,-5 -0.33A40.71,40.71 0,0 0,174.36 216.85Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="245.69"
                  android:startX="113.12"
                  android:endY="245.69"
                  android:endX="210.03"
                  android:type="linear">
            <item android:offset="0" android:color="#FF56B6FE"/>
            <item android:offset="0.61" android:color="#FF599CFA"/>
            <item android:offset="1" android:color="#FF5C89F7"/>
          </gradient>
        </aapt:attr>
      </path>

      <path
              android:pathData="M358.81,285q-13.53,0 -22.64,-9.1t-9,-22.72q0,-13.62 9,-22.64 9,-9.18 22.64,-9.19 13.79,0 22.38,10l-5.62,5.44a20.82,20.82 0,0 0,-16.76 -7.91,23 23,0 0,0 -16.94,6.81q-6.72,6.72 -6.72,17.53t6.72,17.53a23,23 0,0 0,16.94 6.81q10.63,0 18.46,-8.94l5.7,5.53a29.57,29.57 0,0 1,-10.63 8A32.44,32.44 0,0 1,358.81 285Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M397.78,222.69v60.93H390V222.69Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M404.5,262.77q0,-9.61 6,-15.91a20.6,20.6 0,0 1,15.41 -6.3,20.31 20.31,0 0,1 15.31,6.3 21.87,21.87 0,0 1,6.13 15.91q0,9.71 -6.13,15.92A20.3,20.3 0,0 1,426 285a20.6,20.6 0,0 1,-15.41 -6.29Q404.5,272.39 404.5,262.77ZM412.33,262.77a15.31,15.31 0,0 0,3.91 10.9,13.38 13.38,0 0,0 19.41,0 17,17 0,0 0,0 -21.7,13.18 13.18,0 0,0 -19.41,0A15.18,15.18 0,0 0,412.33 262.77Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M490.7,283.62h-7.48v-5.78h-0.35a13.86,13.86 0,0 1,-5.48 5.1,15.77 15.77,0 0,1 -7.7,2q-7.67,0 -11.79,-4.38t-4.13,-12.47v-26.2h7.83v25.69q0.25,10.22 10.3,10.22a9.81,9.81 0,0 0,7.83 -3.79,13.7 13.7,0 0,0 3.14,-9.06V241.93h7.83Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M517.25,285a18.34,18.34 0,0 1,-14 -6.46,24.34 24.34,0 0,1 0,-31.49 18.35,18.35 0,0 1,14 -6.47,18.07 18.07,0 0,1 8.39,2 14.84,14.84 0,0 1,5.83 5.19h0.34l-0.34,-5.78L531.47,222.69h7.82v60.93h-7.48v-5.78h-0.34a14.84,14.84 0,0 1,-5.83 5.19A18.07,18.07 0,0 1,517.25 285ZM518.53,277.86a12,12 0,0 0,9.45 -4.17q3.82,-4.17 3.83,-10.9A15.54,15.54 0,0 0,528 252a12.05,12.05 0,0 0,-9.45 -4.26,12.19 12.19,0 0,0 -9.44,4.26 15.5,15.5 0,0 0,-3.83 10.8,15.32 15.32,0 0,0 3.83,10.81A12.19,12.19 0,0 0,518.53 277.84Z"
              android:fillColor="#2e24ff"/>
      <path
              android:pathData="M587.8,267.33a15.91,15.91 0,0 1,-5.87 12.88A22.43,22.43 0,0 1,567.46 285a21.39,21.39 0,0 1,-13.36 -4.42,22.65 22.65,0 0,1 -8,-12.08l7.49,-3.07a19.3,19.3 0,0 0,2.13 4.94,15.72 15.72,0 0,0 3.19,3.78 14.25,14.25 0,0 0,4 2.47,12.26 12.26,0 0,0 4.68,0.9 13.47,13.47 0,0 0,8.76 -2.77,9 9,0 0,0 3.41,-7.36 8.8,8.8 0,0 0,-2.81 -6.55q-2.64,-2.64 -9.87,-5.11 -7.32,-2.64 -9.11,-3.57 -9.69,-4.94 -9.7,-14.55a14.84,14.84 0,0 1,5.37 -11.49A19.53,19.53 0,0 1,567 221.33a20.5,20.5 0,0 1,12.09 3.58,16.67 16.67,0 0,1 6.8,8.76l-7.31,3.06a10.84,10.84 0,0 0,-4 -5.65,13.1 13.1,0 0,0 -15.11,0.28 7.41,7.41 0,0 0,-3.15 6.19,7.14 7.14,0 0,0 2.47,5.42q2.73,2.29 11.83,5.42 9.27,3.17 13.23,7.72A16.53,16.53 0,0 1,587.8 267.33Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M610.26,284.3a11.88,11.88 0,0 1,-8.46 -3.15c-2.25,-2.09 -3.4,-5 -3.45,-8.76V249.07H591v-7.14h7.32V229.16h7.83v12.77h10.21v7.14H606.18v20.77c0,2.78 0.54,4.66 1.61,5.66a5.27,5.27 0,0 0,3.66 1.48,7.9 7.9,0 0,0 1.83,-0.21 9,9 0,0 0,1.66 -0.55l2.47,7A21.23,21.23 0,0 1,610.26 284.3Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M631.71,283.62h-7.83V241.93h7.48v6.8h0.35a11.31,11.31 0,0 1,4.89 -5.66,13.66 13.66,0 0,1 7.27,-2.34 14.7,14.7 0,0 1,5.79 1l-2.38,7.57a12.93,12.93 0,0 0,-4.6 -0.6,10.11 10.11,0 0,0 -7.7,3.58 12,12 0,0 0,-3.27 8.34Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M670.93,285a19.93,19.93 0,0 1,-15.14 -6.29q-6,-6.3 -6,-15.92a22.65,22.65 0,0 1,5.79 -15.87,19.15 19.15,0 0,1 14.8,-6.34q9.29,0 14.77,6t5.49,16.81l-0.09,0.85L657.83,264.24a13.56,13.56 0,0 0,4.08 9.87,13.06 13.06,0 0,0 9.36,3.75q7.49,0 11.75,-7.49l7,3.4a20.69,20.69 0,0 1,-7.78 8.25A21.51,21.51 0,0 1,670.93 285ZM658.42,257.77h23.92a10.43,10.43 0,0 0,-3.53 -7.19,12.38 12.38,0 0,0 -8.56,-2.85 11.34,11.34 0,0 0,-7.61 2.72A13.09,13.09 0,0 0,658.42 257.75Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M714.08,240.56q8.67,0 13.7,4.64c3.34,3.1 5,7.33 5,12.72v25.7h-7.49v-5.78H725Q720.11,285 712,285a16.83,16.83 0,0 1,-11.53 -4.08,13 13,0 0,1 -4.63,-10.21 12.38,12.38 0,0 1,4.89 -10.3q4.89,-3.83 13.06,-3.83a23.16,23.16 0,0 1,11.49 2.55v-1.78a8.9,8.9 0,0 0,-3.24 -6.94,11.08 11.08,0 0,0 -7.57,-2.85 12,12 0,0 0,-10.38 5.53l-6.89,-4.34Q702.93,240.57 714.08,240.56ZM704,270.86a6.24,6.24 0,0 0,2.59 5.1,9.57 9.57,0 0,0 6.09,2.05 12.5,12.5 0,0 0,8.81 -3.66,11.47 11.47,0 0,0 3.87,-8.6q-3.66,-2.88 -10.21,-2.89a13.22,13.22 0,0 0,-8 2.3A6.81,6.81 0,0 0,704 270.86Z"
              android:fillColor="#5252ff"/>
      <path
              android:pathData="M749.47,283.62h-7.82V241.93h7.48v5.78h0.34a14,14 0,0 1,5.49 -5.1,15.06 15.06,0 0,1 7.36,-2.05 15.22,15.22 0,0 1,8.09 2.13,12.56 12.56,0 0,1 5.1,5.87q5.19,-8 14.39,-8 7.23,0 11.14,4.43T805,257.58v26h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.06,9v23.06h-7.83V258.77q0,-5.86 -2.13,-8.46t-7.15,-2.6a9.35,9.35 0,0 0,-7.57 3.83,14 14,0 0,0 -3.07,9Z"
              android:fillColor="#5252ff"/>
      <path
          android:pathData="M-13.76,555.76c10.3,-20.89 58.91,-113.94 157.31,-139.7C261.3,385.24 405.9,462.43 469.89,613.28">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="252.3"
                  android:startX="194.11"
                  android:endY="252.3"
                  android:endX="373.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M318.2,592.15c52.89,-55.46 139,-131.3 263,-187.83 223.69,-102 495.29,-119.94 515.35,-62.21 13,37.39 -73.5,124.43 -496.69,339.65">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startX="400.11"
                  android:endX="900"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M-57.58,195c206.91,86.6 494,-219.13 453.91,-347.48C353.52,-289.67 -103.15,-353.41 -203.15,-176 -265.5,-65.35 -189.57,139.73 -57.58,195Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startY="252.3"
                  android:startX="-100"
                  android:endY="252.3"
                  android:endX="373.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M698.42,648.89C625.71,546 764,320.79 920.68,218.45c46.61,-30.44 110.17,-72 164.35,-50.08 102.25,41.28 158.19,303.22 28.17,446.08C996.65,742.52 762.64,739.78 698.42,648.89Z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startX="700.11"
                  android:endX="900.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
      <path
          android:pathData="M339.91,-42.46a246.52,141.46 0,1 0,493.04 0a246.52,141.46 0,1 0,-493.04 0z">
        <aapt:attr name="android:fillColor">
          <gradient
                  android:startX="400.11"
                  android:endX="800.57"
                  android:type="linear">
            <item android:offset="0" android:color="#FF5D49EA"/>
            <item android:offset="0.45" android:color="#FF452FE4"/>
            <item android:offset="1" android:color="#FF2309DB"/>
          </gradient>
        </aapt:attr>
      </path>
    </group>
  </group>
</vector>



================================================
FILE: app/src/release/res/mipmap-anydpi-v26/ic_banner.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_banner_background"/>
</adaptive-icon>


================================================
FILE: app/src/test/java/com/lagradost/cloudstream3/ProviderTests.kt
================================================
package com.lagradost.cloudstream3

import com.lagradost.cloudstream3.APIHolder.allProviders
import com.lagradost.cloudstream3.mvvm.logError
import com.lagradost.cloudstream3.utils.Qualities
import com.lagradost.cloudstream3.utils.SubtitleHelper
import kotlinx.coroutines.runBlocking
import org.junit.Assert
import org.junit.Test

class ProviderTests {
    private fun getAllProviders(): List<MainAPI> {
        return allProviders.filter { !it.usesWebView }
    }

    private suspend fun loadLinks(api: MainAPI, url: String?): Boolean {
        Assert.assertNotNull("Api ${api.name} has invalid url on episode", url)
        if (url == null) return true
        var linksLoaded = 0
        try {
            val success = api.loadLinks(url, false, {}) { link ->
                Assert.assertTrue(
                    "Api ${api.name} returns link with invalid Quality",
                    Qualities.values().map { it.value }.contains(link.quality)
                )
                Assert.assertTrue(
                    "Api ${api.name} returns link with invalid url",
                    link.url.length > 4
                )
                linksLoaded++
            }
            if (success) {
                return linksLoaded > 0
            }
            Assert.assertTrue("Api ${api.name} has returns false on .loadLinks", success)
        } catch (e: Exception) {
            if (e.cause is NotImplementedError) {
                Assert.fail("Provider has not implemented .loadLinks")
            }
            logError(e)
        }
        return true
    }

    private suspend fun testSingleProviderApi(api: MainAPI): Boolean {
        val searchQueries = listOf("over", "iron", "guy")
        var correctResponses = 0
        var searchResult: List<SearchResponse>? = null
        for (query in searchQueries) {
            val response = try {
                api.search(query)
            } catch (e: Exception) {
                if (e.cause is NotImplementedError) {
                    Assert.fail("Provider has not implemented .search")
                }
                logError(e)
                null
            }
            if (!response.isNullOrEmpty()) {
                correctResponses++
                if (searchResult == null) {
                    searchResult = response
                }
            }
        }

        if (correctResponses == 0 || searchResult == null) {
            System.err.println("Api ${api.name} did not return any valid search responses")
            return false
        }

        try {
            var validResults = false
            for (result in searchResult) {
                Assert.assertEquals(
                    "Invalid apiName on response on ${api.name}",
                    result.apiName,
                    api.name
                )
                val load = api.load(result.url) ?: continue
                Assert.assertEquals(
                    "Invalid apiName on load on ${api.name}",
                    load.apiName,
                    result.apiName
                )
                Assert.assertTrue(
                    "Api ${api.name} on load does not contain any of the supportedTypes",
                    api.supportedTypes.contains(load.type)
                )
                when (load) {
                    is AnimeLoadResponse -> {
                        val gotNoEpisodes =
                            load.episodes.keys.isEmpty() || load.episodes.keys.any { load.episodes[it].isNullOrEmpty() }

                        if (gotNoEpisodes) {
                            println("Api ${api.name} got no episodes on ${load.url}")
                            continue
                        }

                        val url = (load.episodes[load.episodes.keys.first()])?.first()?.data
                        validResults = loadLinks(api, url)
                        if (!validResults) continue
                    }
                    is MovieLoadResponse -> {
                        val gotNoEpisodes = load.dataUrl.isBlank()
                        if (gotNoEpisodes) {
                            println("Api ${api.name} got no movie on ${load.url}")
                            continue
                        }

                        validResults = loadLinks(api, load.dataUrl)
                        if (!validResults) continue
                    }
                    is TvSeriesLoadResponse -> {
                        val gotNoEpisodes = load.episodes.isEmpty()
                        if (gotNoEpisodes) {
                            println("Api ${api.name} got no episodes on ${load.url}")
                            continue
                        }

                        validResults = loadLinks(api, load.episodes.first().data)
                        if (!validResults) continue
                    }
                }
                break
            }

            Assert.assertTrue("Api ${api.name} did not load on any}", validResults)
        } catch (e: Exception) {
            if (e.cause is NotImplementedError) {
                Assert.fail("Provider has not implemented .load")
            }
            logError(e)
            return false
        }
        return true
    }

    @Test
    fun providersExist() {
        Assert.assertTrue(getAllProviders().isNotEmpty())
    }

    @Test
    fun providerCorrectData() {
        val isoNames = SubtitleHelper.languages.map { it.ISO_639_1 }
        Assert.assertFalse("ISO does not contain any languages", isoNames.isNullOrEmpty())
        for (api in getAllProviders()) {
            Assert.assertTrue("Api does not contain a mainUrl", api.mainUrl != "NONE")
            Assert.assertTrue("Api does not contain a name", api.name != "NONE")
            Assert.assertTrue(
                "Api ${api.name} does not contain a valid language code",
                isoNames.contains(api.lang)
            )
            Assert.assertTrue(
                "Api ${api.name} does not contain any supported types",
                api.supportedTypes.isNotEmpty()
            )
        }
    }

    @Test
    fun providerCorrectHomepage() {
        runBlocking {
            getAllProviders().apmap { api ->
                if (api.hasMainPage) {
                    try {
                        val homepage = api.getMainPage()
                        when {
                            homepage == null -> {
                                Assert.fail("Homepage provider ${api.name} did not correctly load homepage!")
                            }
                            homepage.items.isEmpty() -> {
                                Assert.fail("Homepage provider ${api.name} does not contain any items!")
                            }
                            homepage.items.any { it.list.isEmpty() } -> {
                                Assert.fail("Homepage provider ${api.name} does not have any items on result!")
                            }
                        }
                    } catch (e: Exception) {
                        if (e.cause is NotImplementedError) {
                            Assert.fail("Provider marked as hasMainPage, while in reality is has not been implemented")
                        }
                        logError(e)
                    }
                }
            }
        }
    }

//    @Test
//    fun testSingleProvider() {
//        testSingleProviderApi(ThenosProvider())
//    }

    @Test
    suspend fun providerCorrect() {
        val invalidProvider = ArrayList<Pair<MainAPI, Exception?>>()
        val providers = getAllProviders()
        providers.apmap { api ->
            try {
                println("Trying $api")
                if (testSingleProviderApi(api)) {
                    println("Success $api")
                } else {
                    System.err.println("Error $api")
                    invalidProvider.add(Pair(api, null))
                }
            } catch (e: Exception) {
                logError(e)
                invalidProvider.add(Pair(api, e))
            }
        }

        println("Invalid providers are: ")
        for (provider in invalidProvider) {
            println("${provider.first}")
        }
    }
}


================================================
FILE: docs/_config.yml
================================================
theme: jekyll-theme-modernist


================================================
FILE: docs/index.html
================================================
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <title>CloudStream-3 Supported Sites</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>
    <div>
        <h1>Sites supported (<span id="count">0</span>):</h1>
        <table>
		<tbody id="siteList"></tbody>
        </table>
    </div>
    <script src="script.js" type="text/javascript"></script>
</body>

</html>



================================================
FILE: docs/keys.json
================================================
{
  "wco_key": "51wJ0FDq/UVCefLopEcmK3ni4WIQztMjZdSYOsbHr9R2h7PvxBGAuglaN8+kXT6y"
}


================================================
FILE: docs/providers.json
================================================
{
    "AkwamProvider": {
        "language": "ar",
        "name": "Akwam",
        "status": 1,
        "url": "https://akwam.to"
    },
    "AllAnimeProvider": {
        "language": "en",
        "name": "AllAnime",
        "status": 1,
        "url": "https://allanime.site"
    },
    "AllMoviesForYouProvider": {
        "language": "en",
        "name": "AllMoviesForYou",
        "status": 1,
        "url": "https://allmoviesforyou.net"
    },
    "AnimeFlickProvider": {
        "language": "en",
        "name": "AnimeFlick",
        "status": 1,
        "url": "https://animeflick.net"
    },
    "AnimePaheProvider": {
        "language": "en",
        "name": "AnimePahe",
        "status": 0,
        "url": "https://animepahe.com"
    },
    "AnimeWorldProvider": {
        "language": "it",
        "name": "AnimeWorld",
        "status": 1,
        "url": "https://www.animeworld.tv"
    },
    "AnimeflvnetProvider": {
        "language": "es",
        "name": "Animeflv.net",
        "status": 1,
        "url": "https://www3.animeflv.net"
    },
    "AnimekisaProvider": {
        "language": "en",
        "name": "Animekisa",
        "status": 1,
        "url": "https://animekisa.in"
    },
    "ApiMDBProvider": {
        "language": "en",
        "name": "ApiMDB",
        "status": 1,
        "url": "https://v2.apimdb.net"
    },
    "AsiaFlixProvider": {
        "language": "en",
        "name": "AsiaFlix",
        "status": 3,
        "url": "https://asiaflix.app"
    },
    "AsianLoadProvider": {
        "language": "en",
        "name": "AsianLoad",
        "status": 1,
        "url": "https://asianembed.io"
    },
    "BflixProvider": {
        "language": "en",
        "name": "Bflix",
        "status": 1,
        "url": "https://bflix.ru"
    },
    "CinecalidadProvider": {
        "language": "es",
        "name": "Cinecalidad",
        "status": 1,
        "url": "https://cinecalidad.lol"
    },
    "CuevanaProvider": {
        "language": "es",
        "name": "Cuevana",
        "status": 1,
        "url": "https://cuevana3.me"
    },
    "DopeboxProvider": {
        "language": "en",
        "name": "Dopebox",
        "status": 1,
        "url": "https://dopebox.to"
    },
    "DoramasYTProvider": {
        "language": "es",
        "name": "DoramasYT",
        "status": 1,
        "url": "https://doramasyt.com"
    },
    "DramaSeeProvider": {
        "language": "en",
        "name": "DramaSee",
        "status": 1,
        "url": "https://dramasee.net"
    },
    "DramaidProvider": {
        "language": "id",
        "name": "DramaId",
        "status": 1,
        "url": "https://185.224.83.103"
    },
    "DreamSubProvider": {
        "language": "it",
        "name": "DreamSub",
        "status": 1,
        "url": "https://dreamsub.me"
    },
    "DubbedAnimeProvider": {
        "language": "en",
        "name": "DubbedAnime",
        "status": 1,
        "url": "https://bestdubbedanime.com"
    },
    "EgyBestProvider": {
        "language": "ar",
        "name": "EgyBest",
        "status": 1,
        "url": "https://www.egy.best"
    },
    "EntrePeliculasySeriesProvider": {
        "name": "EntrePeliculasySeries",
        "status": 1,
        "url": "https://entrepeliculasyseries.nu"
    },
    "EntrepeliculasyseriesProvider": {
        "language": "es",
        "name": "EntrePeliculasySeries",
        "status": 1,
        "url": "https://entrepeliculasyseries.nu"
    },
    "FaselHDProvider": {
        "language": "ar",
        "name": "FaselHD",
        "status": 1,
        "url": "https://faselhd.io"
    },
    "FilmanProvider": {
        "language": "pl",
        "name": "filman.cc",
        "status": 1,
        "url": "https://filman.cc"
    },
    "FmoviesToProvider": {
        "language": "en",
        "name": "Fmovies.to",
        "status": 1,
        "url": "https://fmovies.to"
    },
    "FrenchStreamProvider": {
        "language": "fr",
        "name": "French Stream",
        "status": 1,
        "url": "https://french-stream.re"
    },
    "GogoanimeProvider": {
        "language": "en",
        "name": "GogoAnime",
        "status": 1,
        "url": "https://gogoanime.film"
    },
    "GomunimeProvider": {
        "language": "id",
        "name": "Gomunime",
        "status": 1,
        "url": "https://185.231.223.76"
    },
    "HDMProvider": {
        "language": "en",
        "name": "HD Movies",
        "status": 0,
        "url": "https://hdm.to"
    },
    "IHaveNoTvProvider": {
        "language": "en",
        "name": "I Have No TV",
        "status": 1,
        "url": "https://ihavenotv.com"
    },
    "KawaiifuProvider": {
        "language": "en",
        "name": "Kawaiifu",
        "status": 0,
        "url": "https://kawaiifu.com"
    },
    "KdramaHoodProvider": {
        "language": "en",
        "name": "KDramaHood",
        "status": 1,
        "url": "https://kdramahood.com"
    },
    "KuramanimeProvider": {
        "language": "id",
        "name": "Kuramanime",
        "status": 1,
        "url": "https://kuramanime.com"
    },
    "KuronimeProvider": {
        "language": "id",
        "name": "Kuronime",
        "status": 1,
        "url": "https://185.231.223.254"
    },
    "LayarKaca21Provider": {
        "name": "LayarKaca",
        "status": 1,
        "url": "https://149.56.24.226/"
    },
    "LayarKacaProvider": {
        "language": "id",
        "name": "LayarKaca",
        "status": 1,
        "url": "https://149.56.24.226"
    },
    "LookMovieProvider": {
        "language": "en",
        "name": "LookMovie",
        "status": 0,
        "url": "https://lookmovie.io"
    },
    "MeloMovieProvider": {
        "language": "en",
        "name": "MeloMovie",
        "status": 0,
        "url": "https://melomovie.com"
    },
    "MonoschinosProvider": {
        "language": "es",
        "name": "Monoschinos",
        "status": 1,
        "url": "https://monoschinos2.com"
    },
    "MyCimaProvider": {
        "language": "ar",
        "name": "MyCima",
        "status": 1,
        "url": "https://mycima.tv"
    },
    "NeonimeProvider": {
        "language": "id",
        "name": "Neonime",
        "status": 1,
        "url": "https://neonime.watch"
    },
    "NginxProvider": {
        "language": "en",
        "name": "Nginx",
        "status": 1,
        "url": ""
    },
    "NineAnimeProvider": {
        "language": "en",
        "name": "9Anime",
        "status": 1,
        "url": "https://9anime.id"
    },
    "NontonAnimeIDProvider": {
        "language": "id",
        "name": "NontonAnimeID",
        "status": 1,
        "url": "https://75.119.159.228"
    },
    "OlgplyProvider": {
        "language": "en",
        "name": "Olgply",
        "status": 1,
        "url": "https://olgply.com"
    },
    "OploverzProvider": {
        "language": "id",
        "name": "Oploverz",
        "status": 1,
        "url": "https://oploverz.asia"
    },
    "PeliSmartProvider": {
        "language": "es",
        "name": "PeliSmart",
        "status": 1,
        "url": "https://pelismart.com"
    },
    "PelisflixProvider": {
        "language": "es",
        "name": "Pelisflix",
        "status": 1,
        "url": "https://pelisflix.li"
    },
    "PelisplusHDProvider": {
        "language": "es",
        "name": "PelisplusHD",
        "status": 1,
        "url": "https://pelisplushd.net"
    },
    "PelisplusProvider": {
        "language": "en",
        "name": "Pelisplus",
        "status": 1,
        "url": "https://pelisplus.icu"
    },
    "PinoyHDXyzProvider": {
        "language": "tl",
        "name": "Pinoy-HD",
        "status": 1,
        "url": "https://www.pinoy-hd.xyz"
    },
    "PinoyMoviePediaProvider": {
        "language": "tl",
        "name": "Pinoy Moviepedia",
        "status": 1,
        "url": "https://pinoymoviepedia.ru"
    },
    "PinoyMoviesEsProvider": {
        "language": "tl",
        "name": "Pinoy Movies",
        "status": 1,
        "url": "https://pinoymovies.es"
    },
    "RebahinProvider": {
        "language": "id",
        "name": "Rebahin",
        "status": 1,
        "url": "http://167.88.14.149"
    },
    "SeriesflixProvider": {
        "language": "es",
        "name": "Seriesflix",
        "status": 1,
        "url": "https://seriesflix.video"
    },
    "SflixProProvider": {
        "language": "en",
        "name": "Sflix.pro",
        "status": 1,
        "url": "https://sflix.pro"
    },
    "SflixProvider": {
        "language": "en",
        "name": "Sflix.to",
        "status": 1,
        "url": "https://sflix.to"
    },
    "SoaptwoDayProvider": {
        "language": "en",
        "name": "Soap2Day",
        "status": 1,
        "url": "https://secretlink.xyz"
    },
    "SolarmovieProvider": {
        "language": "en",
        "name": "Solarmovie",
        "status": 1,
        "url": "https://solarmovie.pe"
    },
    "StreamingcommunityProvider": {
        "language": "it",
        "name": "Streamingcommunity",
        "status": 1,
        "url": "https://streamingcommunity.top"
    },
    "TantifilmProvider": {
        "language": "it",
        "name": "Tantifilm",
        "status": 1,
        "url": "https://www.tantifilm.rodeo"
    },
    "TenshiProvider": {
        "language": "en",
        "name": "Tenshi.moe",
        "status": 1,
        "url": "https://tenshi.moe"
    },
    "TheFlixToProvider": {
        "language": "en",
        "name": "TheFlix.to",
        "status": 0,
        "url": "https://theflix.to"
    },
    "TrailersTwoProvider": {
        "language": "en",
        "name": "Trailers.to",
        "status": 1,
        "url": "https://trailers.to"
    },
    "TwoEmbedProvider": {
        "language": "en",
        "name": "2Embed",
        "status": 1,
        "url": "https://www.2embed.ru"
    },
    "VMoveeProvider": {
        "language": "en",
        "name": "VMovee",
        "status": 1,
        "url": "https://www.vmovee.watch"
    },
    "VfFilmProvider": {
        "language": "fr",
        "name": "vf-film.me",
        "status": 1,
        "url": "https://vf-film.me"
    },
    "VfSerieProvider": {
        "language": "fr",
        "name": "vf-serie.org",
        "status": 1,
        "url": "https://vf-serie.org"
    },
    "VidEmbedProvider": {
        "language": "en",
        "name": "VidEmbed",
        "status": 1,
        "url": "https://vidembed.cc"
    },
    "WatchAsianProvider": {
        "language": "en",
        "name": "WatchAsian",
        "status": 1,
        "url": "https://watchasian.sh"
    },
    "WatchCartoonOnlineProvider": {
        "language": "en",
        "name": "WatchCartoonOnline",
        "status": 1,
        "url": "https://www.wcostream.com"
    },
    "WcoProvider": {
        "language": "en",
        "name": "WCO Stream",
        "status": 1,
        "url": "https://wcostream.cc"
    },
    "ZoroProvider": {
        "language": "en",
        "name": "Zoro",
        "status": 1,
        "url": "https://zoro.to"
    }
}


================================================
FILE: docs/script.js
================================================
const count = document.getElementById("count")
const mainContainer = document.getElementById("siteList")
const regionNamesInEnglish = new Intl.DisplayNames(['en'], { type: 'language' });
fetch("providers.json" + "?v=" + Date.now())
    .then(r => r.json())
    .then(function (data) {
        count.innerHTML = Object.keys(data).length;
        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];
                if (value.url == "NONE") { continue; }

                var _status = value.status
                var _lang = value.language

                var node = document.createElement("tr");
                node.classList.add("row");

                var _a = document.createElement("a");
                _a.setAttribute('href', value.url);
                _a.innerHTML = value.name

                var _langEl = document.createElement("sup");
                var _langName = "Unknown";
                try {
                    _langName = regionNamesInEnglish.of(_lang);
                } catch (langerr) {
                    _langName = "Unknown";
                    console.log("Error on parsing language code => " + langerr);
                }
                _langEl.innerHTML = " " + _langName
                _a.appendChild(_langEl);

                var _statusText = "Unknown";
                var _buttonText = "yellow";
                switch (_status) {
                    case 0:
                        _statusText = "Unavailable";
                        _buttonText = "red";
                        break;
                    case 1:
                        _statusText = "Available";
                        _buttonText = "green";

                        break;
                    case 2:
                        _statusText = "Slow";
                        _buttonText = "yellow";
                        break;
                    case 3:
                        _statusText = "Beta";
                        _buttonText = "blue";
                        break;
                }
                _a.classList.add(_buttonText + "Button");
                _a.classList.add("indicator");
                _a.classList.add("button");
                node.appendChild(_a);
                mainContainer.appendChild(node);
            }
        }
    })



================================================
FILE: docs/style.css
================================================
body {
    font-family: "Roboto", sans-serif;
    background-color: #FFF;
}
.whiteText {
    color : #FFF;
}

.button {
    color : #000;
    text-decoration: none;
}

.row {
    padding: 0px 10px;
    white-space: nowrap;
}
table {
    border-spacing: 0.5rem;
}

.yellowButton::before {
    background-image: url("data:image/svg+xml;charset=utf8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='m12 24c6.6274 0 12-5.3726 12-12 0-6.62744-5.3726-12-12-12-6.62744 0-12 5.37256-12 12 0 6.6274 5.37256 12 12 12zm0-17.5c.4141 0 .75.33582.75.75v4.5c0 .4142-.3359.75-.75.75s-.75-.3358-.75-.75v-4.5c0-.41418.3359-.75.75-.75zm.8242 9.5658c.0635-.0919.1118-.195.1416-.3054.0132-.0482.0225-.0979.0283-.1487.0039-.0366.0059-.074.0059-.1117 0-.5522-.4478-1-1-1s-1 .4478-1 1 .4478 1 1 1c.3423 0 .644-.172.8242-.4342z' fill='%23dbab09'/%3E%3C/svg%3e");
}

.blueButton::before {
    filter: sepia(100%) saturate(300%) brightness(70%) hue-rotate(180deg);
    background-image: url("data:image/svg+xml;charset=utf8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='m12 24c6.6274 0 12-5.3726 12-12 0-6.62744-5.3726-12-12-12-6.62744 0-12 5.37256-12 12 0 6.6274 5.37256 12 12 12zm0-17.5c.4141 0 .75.33582.75.75v4.5c0 .4142-.3359.75-.75.75s-.75-.3358-.75-.75v-4.5c0-.41418.3359-.75.75-.75zm.8242 9.5658c.0635-.0919.1118-.195.1416-.3054.0132-.0482.0225-.0979.0283-.1487.0039-.0366.0059-.074.0059-.1117 0-.5522-.4478-1-1-1s-1 .4478-1 1 .4478 1 1 1c.3423 0 .644-.172.8242-.4342z' fill='%23dbab09'/%3E%3C/svg%3e");
}

.redButton::before {
    background-image: url("data:image/svg+xml;charset=utf8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='m12 24c6.6274 0 12-5.3726 12-12 0-6.62744-5.3726-12-12-12-6.62744 0-12 5.37256-12 12 0 6.6274 5.37256 12 12 12zm0-17.5c.4141 0 .75.33582.75.75v4.5c0 .4142-.3359.75-.75.75s-.75-.3358-.75-.75v-4.5c0-.41418.3359-.75.75-.75zm.8242 9.5658c.0635-.0919.1118-.195.1416-.3054.0132-.0482.0225-.0979.0283-.1487.0039-.0366.0059-.074.0059-.1117 0-.5522-.4478-1-1-1s-1 .4478-1 1 .4478 1 1 1c.3423 0 .644-.172.8242-.4342z' fill='%23d73a49'/%3E%3C/svg%3e");
}

.greenButton::before{
    background-image: url("data:image/svg+xml;charset=utf8,%3Csvg width='15' height='15' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='m1 12c0-6.07513 4.92487-11 11-11 6.0751 0 11 4.92487 11 11 0 6.0751-4.9249 11-11 11-6.07513 0-11-4.9249-11-11zm16.2803-2.71967c.2929-.29289.2929-.76777 0-1.06066s-.7677-.29289-1.0606 0l-5.9697 5.96963-2.46967-2.4696c-.29289-.2929-.76777-.2929-1.06066 0s-.29289.7677 0 1.0606l3 3c.29293.2929.76773.2929 1.06063 0z' fill='%2328a745'/%3E%3C/svg%3e");ontent: '';
}

.indicator::before {
    display: inline-block;
    width: 24px;
    height: 24px;
    content: "";
    vertical-align: text-bottom;
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: center center;
    margin-right:10px;
}


================================================
FILE: fastlane/metadata/android/de-DE/full_description.txt
================================================
Mit CloudStream-3 kannst du Filme, TV-Serien und Anime streamen und herunterladen. Die App kommt ganz ohne Werbung und Analytik aus. Sie unterstÃ¼tzt mehrere Trailer-, Filmseiten und vieles mehr. Integrierte Features:



Lesezeichen


Herunterladen und Streamen von Filmen, Fernsehsendungen und Animes


Downloads von Untertiteln


Chromecast-UnterstÃ¼tzung



================================================
FILE: fastlane/metadata/android/de-DE/short_description.txt
================================================
Streame und downloade Filme, TV-Serien und Animes.



================================================
FILE: fastlane/metadata/android/en-US/full_description.txt
================================================
CloudStream-3 lets you stream and download Movies, TV-Series and Anime. The app comes without any ads and analytics. It supports multiple trailer & movie sites, and more. Features include:



Bookmarks


Download and stream movies, tv-shows and anime


subtitle downloads


Chromecast support



================================================
FILE: fastlane/metadata/android/en-US/short_description.txt
================================================
Stream and download Movies, TV-Series and Anime.



================================================
FILE: fastlane/metadata/android/en-US/title.txt
================================================
CloudStream



================================================
FILE: fastlane/metadata/android/en-US/changelogs/2.txt
================================================
- Changelog added!



================================================
FILE: fastlane/metadata/android/es-AR/full_description.txt
================================================
CloudStream-3 te permite ver y descargar PelÃ­culas, Series de TV y Anime. La app viene sin anuncios ni anÃ¡lisis. Soporta varios sitios de pelÃ­culas, trailers... Y
MÃ¡s. CaracterÃ­sticas incluÃ­das: 


Marcadores

Descargar y mirar streams de pelÃ­culas, shows de TV y anime

Descargar subtÃ­tulos

Soporte para Chromecast



================================================
FILE: fastlane/metadata/android/es-AR/short_description.txt
================================================
MirÃ¡ y descarga PelÃ­culas, Series y Anime



================================================
FILE: fastlane/metadata/android/it-IT/full_description.txt
================================================
CloudStream-3 ti consente di riprodurre in streaming e scaricare film, serie TV e anime. L'app viene fornita senza pubblicitÃ  e tracking. Supporta piÃ¹ siti di trailer e film e altro ancora. Le caratteristiche includono:



Preferiti


Scarica e riproduci in streaming film, serie TV e anime


scarica sottotitoli


Supporto a Chromecast



================================================
FILE: fastlane/metadata/android/it-IT/short_description.txt
================================================
Scarica e riproduci in streaming film, serie TV e anime



================================================
FILE: fastlane/metadata/android/mk-MK/full_description.txt
================================================
CloudStream-3 Ð²Ð¸ Ð´Ð¾Ð·Ð²Ð¾Ð»ÑƒÐ²Ð° Ð´Ð° Ð³Ð»ÐµÐ´Ð°Ñ‚Ðµ Ð¸ Ð¿Ñ€ÐµÐ²Ð·ÐµÐ¼Ð°Ñ‚Ðµ Ñ„Ð¸Ð»Ð¼Ð¾Ð²Ð¸, Ñ‚ÐµÐ»ÐµÐ²Ð¸Ð·Ð¸ÑÐºÐ¸ ÑÐµÑ€Ð¸Ð¸ Ð¸ Ð°Ð½Ð¸Ð¼Ðµ. ÐÐ¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð° Ð½ÐµÐ¼Ð° Ñ€ÐµÐºÐ»Ð°Ð¼Ð¸ Ð¸ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°. Ð¢Ð°Ð° Ð¿Ð¾Ð´Ð´Ñ€Ð¶ÑƒÐ²Ð° Ð¿Ð¾Ð²ÐµÑœÐµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð¸ Ð·Ð° Ñ‚Ñ€ÐµÑ˜Ð»ÐµÑ€Ð¸, Ñ„Ð¸Ð»Ð¼Ð¾Ð²Ð¸ Ð¸ Ð¼Ð½Ð¾Ð³Ñƒ Ð¿Ð¾Ð²ÐµÑœÐµ.
ÐÐ¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ˜Ð°Ñ‚Ð° Ð²ÐºÐ»ÑƒÑ‡ÑƒÐ²Ð°:

ÐžÐ±ÐµÐ»ÐµÐ¶ÑƒÐ²Ð°Ñ‡Ð¸ (bookmarks)
ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµ Ð¸ Ð³Ð»ÐµÐ´Ð°ÑšÐµ Ð½Ð° Ñ„Ð¸Ð»Ð¼Ð¾Ð²Ð¸, ÑÐµÑ€Ð¸Ð¸ Ð¸ Ð°Ð½Ð¸Ð¼Ðµ
ÐŸÑ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµ Ð½Ð° Ð¿Ñ€ÐµÐ²Ð¾Ð´Ð¸
ÐŸÐ¾Ð´Ð´Ñ€ÑˆÐºÐ° Ð·Ð° Chromecast



================================================
FILE: fastlane/metadata/android/mk-MK/short_description.txt
================================================
Ð“Ð»ÐµÐ´Ð°ÑšÐµ Ð¸ Ð¿Ñ€ÐµÐ²Ð·ÐµÐ¼Ð°ÑšÐµ Ð½Ð° Ñ„Ð¸Ð»Ð¼Ð¾Ð²Ð¸, ÑÐµÑ€Ð¸Ð¸ Ð¸ Ð°Ð½Ð¸Ð¼Ðµ



================================================
FILE: fastlane/metadata/android/mk-MK/title.txt
================================================
CloudStream



================================================
FILE: fastlane/metadata/android/zh-CN/full_description.txt
================================================
CloudStream-3å¯ä»¥è®©ä½ ä¸²æµå’Œä¸‹è½½ç”µå½±ã€å‰§é›†å’ŒåŠ¨æ¼«ã€‚è¿™æ¬¾åº”ç”¨æ²¡æœ‰ä»»ä½•å¹¿å‘Šå’Œåˆ†æžã€‚å®ƒæ”¯æŒå¤šä¸ªé¢„å‘Šç‰‡å’Œç”µå½±ç½‘ç«™ç­‰ã€‚ç‰¹ç‚¹åŒ…æ‹¬ï¼š



ä¹¦ç­¾


ä¸‹è½½å’Œä¸²æµç”µå½±ã€ç”µè§†èŠ‚ç›®å’ŒåŠ¨æ¼«


ä¸‹è½½å­—å¹•


æ”¯æŒæŠ•å±



================================================
FILE: fastlane/metadata/android/zh-CN/short_description.txt
================================================
ä¸²æµå’Œä¸‹è½½ç”µå½±ã€å‰§é›†å’ŒåŠ¨æ¼«ã€‚



================================================
FILE: gradle/wrapper/gradle-wrapper.properties
================================================
#Fri Apr 30 17:11:15 CEST 2021
distributionBase=GRADLE_USER_HOME
distributionUrl=https\://services.gradle.org/distributions/gradle-7.2-bin.zip
distributionPath=wrapper/dists
zipStorePath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME



================================================
FILE: .github/site-list.py
================================================
#!/usr/bin/python3

from glob import glob
from re import findall, compile, DOTALL
from json import dump, load
from typing import List, Dict

# Globals
JSON_PATH = "docs/providers.json"
GLOB_ANIME = "app/src/main/java/com/lagradost/cloudstream3/animeproviders/*Provider.kt"
GLOB_MOVIE = "app/src/main/java/com/lagradost/cloudstream3/movieproviders/*Provider.kt"
URL_REGEX = compile("override\sva[lr]\smainUrl[^\"']+[\"'](https?://[a-zA-Z0-9\.-/]+)[\"']")
FILENAME_REGEX = compile("([A-Za-z0-9]+)(?:.kt)$")
PROVIDER_CLASSNAME_REGEX = compile("(?<=class\s)([a-zA-Z]+)(?=\s:\sMainAPI\(\))")
NAME_REGEX = compile("override\sva[lr]\sname[^\"']+[\"']([a-zA-Z-.\s]+)")
LANG_REGEX = compile("override\sva[lr]\slang[^\"']+[\"']([a-zA-Z]+)")

old_sites: Dict[str, Dict] = load(open(JSON_PATH, "r", encoding="utf-8"))
sites: Dict[str, Dict] = {}

animelist = glob(GLOB_ANIME)
movielist = glob(GLOB_MOVIE)
allProvidersList = animelist + movielist

# parse all *Provider.kt files
for path in allProvidersList:
    with open(path, "r", encoding='utf-8') as file:
        try:
            site_text: str = file.read()
            filename: str = findall(FILENAME_REGEX, path)[0]
            name: str = [*findall(PROVIDER_CLASSNAME_REGEX, site_text), filename][0]
            provider_url: str = [*findall(URL_REGEX, site_text), ""][0]
            lang: str = [*findall(LANG_REGEX, site_text), "en"][0]

            if name in old_sites.keys():  # if already in previous list use old status and name
                sites[name] = {
                    "name": old_sites[name]['name'],
                    "url": provider_url if provider_url else old_sites[name]['url'],
                    "status": old_sites[name]['status'],
                    "language": lang
                }
            else: # if not in previous list add with new data
                display_name: str = [*findall(NAME_REGEX, site_text), name][0]
                if display_name.endswith("Provider"):
                    display_name = display_name[:-len("Provider")]
                sites[name] = {
                    "name": display_name,
                    "url": provider_url if provider_url else "",
                    "status": 1,
                    "language": lang
                }

        except Exception as ex:
            print("Error => {0}: {1}".format(path, ex))

# add sites from old_sites that are missing in new list
for name in old_sites.keys():
    if name not in sites.keys():
        sites[name] = {
            "name": old_sites[name]['name'],
            "url": old_sites[name]['url'],
            "status": old_sites[name]['status']
        }

dump(sites, open(JSON_PATH, "w+", encoding="utf-8"), indent=4, sort_keys=True)



================================================
FILE: .github/ISSUE_TEMPLATE/application-bug.yml
================================================
name: ðŸž Application Issue Report
description: Report a issue in CloudStream
labels: [bug]
body:

  - type: textarea
    id: reproduce-steps
    attributes:
      label: Steps to reproduce
      description: Provide an example of the issue.
      placeholder: |
        Example:
          1. First step
          2. Second step
          3. Issue here
    validations:
      required: true

  - type: textarea
    id: expected-behavior
    attributes:
      label: Expected behavior
      placeholder: |
        Example:
          "This should happen..."
    validations:
      required: true

  - type: textarea
    id: actual-behavior
    attributes:
      label: Actual behavior
      placeholder: |
        Example:
          "This happened instead..."
    validations:
      required: true

  - type: input
    id: cloudstream-version
    attributes:
      label: Cloudstream version
      description: |
        You can find your Cloudstream version in **Settings**.
      placeholder: |
        Example: "2.8.16"
    validations:
      required: true

  - type: input
    id: android-version
    attributes:
      label: Android version
      description: |
        You can find this somewhere in your Android settings.
      placeholder: |
        Example: "Android 12"
    validations:
      required: true

  - type: textarea
    id: other-details
    attributes:
      label: Other details
      placeholder: |
        Additional details and attachments.

  - type: checkboxes
    id: acknowledgements
    attributes:
      label: Acknowledgements
      description: Your issue will be closed if you haven't done these steps.
      options:
        - label: I have searched the existing issues and this is a new ticket, **NOT** a duplicate or related to another open issue.
          required: true
        - label: I have written a short but informative title.
          required: true
        - label: I have updated the app to pre-release version **[Latest](https://github.com/LagradOst/CloudStream-3/releases)**.
          required: true
        - label: If related to a provider, I have checked the site and it works, but not the app. 
          required: true
        - label: I will fill out all of the requested information in this form.
          required: true



================================================
FILE: .github/ISSUE_TEMPLATE/feature-request.yml
================================================
name: â­ Feature request
description: Suggest a feature to improve the app
labels: [enhancement]
body:

  - type: textarea
    id: feature-description
    attributes:
      label: Describe your suggested feature
      description: How can an existing source be improved?
      placeholder: |
        Example:
          "It should work like this..."
    validations:
      required: true

  - type: textarea
    id: other-details
    attributes:
      label: Other details
      placeholder: |
        Additional details and attachments.

  - type: checkboxes
    id: acknowledgements
    attributes:
      label: Acknowledgements
      description: Your issue will be closed if you haven't done these steps.
      options:
        - label: I have searched the existing issues and this is a new ticket, **NOT** a duplicate or related to another open issue.
          required: true
        - label: I have written a short but informative title.
          required: true
        - label: I will fill out all of the requested information in this form.
          required: true



================================================
FILE: .github/ISSUE_TEMPLATE/provider-bug.yml
================================================
name: ðŸž Provider Issue Report
description: Report a source issue
labels: [provider]
body:

  - type: input
    id: source
    attributes:
      label: Source information
      description: |
        You can find the source name in navigation drawer.
      placeholder: |
        Example: "Bflix"
    validations:
      required: true

  - type: input
    id: source-url
    attributes:
      label: Source link
      placeholder: |
        Example:
          "www.example.org"
    validations:
      required: true

  - type: textarea
    id: reproduce-steps
    attributes:
      label: Steps to reproduce
      description: Provide an example of the issue.
      placeholder: |
        Example:
          1. First step
          2. Second step
          3. Issue here
    validations:
      required: true

  - type: input
    id: cloudstream-version
    attributes:
      label: CloudStream version
      description: |
        You can find your CloudStream version in **Settings**.
      placeholder: |
        Example: "2.8.16"
    validations:
      required: true

  - type: input
    id: android-version
    attributes:
      label: Android version
      description: |
        You can find this somewhere in your Android settings.
      placeholder: |
        Example: "Android 12"
    validations:
      required: true

  - type: textarea
    id: other-details
    attributes:
      label: Other details
      placeholder: |
        Additional details and attachments.

  - type: checkboxes
    id: acknowledgements
    attributes:
      label: Acknowledgements
      description: Your issue will be closed if you haven't done these steps.
      options:
        - label: I have searched the existing issues and this is a new ticket, **NOT** a duplicate or related to another open issue.
          required: true
        - label: I have written a short but informative title.
          required: true
        - label: I have updated the app to pre-release version **[Latest](https://github.com/LagradOst/CloudStream-3/releases)**.
          required: true
        - label: If related to a provider, I have checked the site and it works, but not the app. 
          required: true
        - label: I will fill out all of the requested information in this form.
          required: true



================================================
FILE: .github/workflows/prerelease.yml
================================================
name: Pre-release

on:
  push:
    branches: [ master ]
    paths-ignore:
      - '*.md'
      - '*.json'
      - '**/wcokey.txt'

concurrency: 
  group: "pre-release"
  cancel-in-progress: true

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Set up JDK 11
      uses: actions/setup-java@v2
      with:
        java-version: '11'
        distribution: 'adopt'
    - name: Grant execute permission for gradlew
      run: chmod +x gradlew
    - name: Set checks for prerelease updates to true by default
      run: |
        sed -i "s/R\.string\.prerelease_update_key), false))/R\.string\.prerelease_update_key), true))/" app/src/main/java/com/lagradost/cloudstream3/utils/InAppUpdater.kt
    - name: Update prerelease_commit_hash
      run: |
        COMMIT_HASH="$(git log -1 --format='%H')"
        sed -i "s/<string name=\"prerelease_commit_hash\" translatable=\"false\">unknown_prerelease<\/string>/<string name=\"prerelease_commit_hash\">$COMMIT_HASH<\/string>/g" app/src/main/res/values/strings.xml
    - name: Decode Keystore
      env:
        ENCODED_STRING: ${{ secrets.KEYSTORE }}
      run: |
        TMP_KEYSTORE_FILE_PATH="${RUNNER_TEMP}"/keystore
        mkdir -p "${TMP_KEYSTORE_FILE_PATH}"
        echo $ENCODED_STRING | base64 -di > "${TMP_KEYSTORE_FILE_PATH}"/prerelease_keystore.keystore
    - name: Run Gradle
      run: ./gradlew app:assemblePrerelease
      env:
        SIGNING_KEY_ALIAS: ${{ secrets.SIGNING_KEY_ALIAS }}
        SIGNING_KEY_PASSWORD: ${{ secrets.SIGNING_KEY_PASSWORD }}
        SIGNING_STORE_PASSWORD: ${{ secrets.SIGNING_STORE_PASSWORD }}
    - name: Create pre-release
      uses: "marvinpinto/action-automatic-releases@latest"
      with:
        repo_token: "${{ secrets.GITHUB_TOKEN }}"
        automatic_release_tag: "pre-release"
        prerelease: true
        title: "Pre-release Build"
        files: |
          app/build/outputs/apk/prerelease/*.apk



================================================
FILE: .github/workflows/pull_request.yml
================================================
name: Artifact Build

on: [pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Set up JDK 11
      uses: actions/setup-java@v2
      with:
        java-version: '11'
        distribution: 'adopt'
    - name: Grant execute permission for gradlew
      run: chmod +x gradlew
    - name: Run Gradle
      run: ./gradlew assembleDebug
    - name: Upload Artifact
      uses: actions/upload-artifact@v2
      with:
        name: pull-request-build
        path: "app/build/outputs/apk/debug/*.apk"



================================================
FILE: .github/workflows/site_list.yml
================================================
name: Create site list

on:
  push:
    branches: [ master ]
    paths:
      - 'app/src/main/java/com/lagradost/cloudstream3/*providers/*Provider.kt'
      - '.github/workflows/site_list.yml'
      - '.github/site-list.py'
      - 'docs/providers.json'
      - 'app/src/main/java/com/lagradost/cloudstream3/MainAPI.kt'

concurrency: 
  group: "site-list"
  cancel-in-progress: true

jobs:
  create:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Edit providers.json
      run: |
        python3 .github/site-list.py
    - name: Commit to the repo
      run: |
        git config user.name "GitHub Actions"
        git config user.email "actions@github.com"
        git add .
        # "echo" returns true so the build succeeds, even if no changed files
        git commit -m 'chore(docs): update list of sites' || echo
        git push


